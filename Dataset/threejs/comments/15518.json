{"schema": {"fields":[{"type":"integer","name":"index"},{"type":"string","name":"author_association"},{"type":"string","name":"body"},{"type":"datetime","name":"created_at"},{"type":"string","name":"html_url"},{"type":"integer","name":"id"},{"type":"string","name":"issue_url"},{"type":"string","name":"node_id"},{"type":"datetime","name":"updated_at"},{"type":"string","name":"url"},{"type":"string","name":"user"}],"pandas_version":"0.20.0","primaryKey":["index"]}, "data": [{"index":0,"author_association":"OWNER","body":"Should we put these files in `src-addons` instead of `examples\/jsm`? As in..\r\n\r\n```\r\nsrc\/...\r\nsrc-addons\/...\r\n```\r\n\r\nFolder name suggestions? `src-extras`?\r\n\r\n\/ping @donmccurdy","created_at":"2019-01-03T19:15:23.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/15518#issuecomment-451247075","id":451247075,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/15518","node_id":"MDEyOklzc3VlQ29tbWVudDQ1MTI0NzA3NQ==","updated_at":"2019-01-03T19:26:38.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/451247075","user":{"following_url":"https:\/\/api.github.com\/users\/mrdoob\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/mrdoob\/events{\/privacy}","avatar_url":"https:\/\/avatars0.githubusercontent.com\/u\/97088?v=4","url":"https:\/\/api.github.com\/users\/mrdoob","gists_url":"https:\/\/api.github.com\/users\/mrdoob\/gists{\/gist_id}","html_url":"https:\/\/github.com\/mrdoob","subscriptions_url":"https:\/\/api.github.com\/users\/mrdoob\/subscriptions","node_id":"MDQ6VXNlcjk3MDg4","repos_url":"https:\/\/api.github.com\/users\/mrdoob\/repos","received_events_url":"https:\/\/api.github.com\/users\/mrdoob\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/mrdoob\/starred{\/owner}{\/repo}","site_admin":false,"login":"mrdoob","type":"User","id":97088,"followers_url":"https:\/\/api.github.com\/users\/mrdoob\/followers","organizations_url":"https:\/\/api.github.com\/users\/mrdoob\/orgs"}},{"index":1,"author_association":"NONE","body":"Why not `src`? How the components being extracted from `examples` are different from the components in `src`?","created_at":"2019-01-03T19:35:02.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/15518#issuecomment-451252645","id":451252645,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/15518","node_id":"MDEyOklzc3VlQ29tbWVudDQ1MTI1MjY0NQ==","updated_at":"2019-01-03T19:35:02.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/451252645","user":{"following_url":"https:\/\/api.github.com\/users\/sompylasar\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/sompylasar\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/498274?v=4","url":"https:\/\/api.github.com\/users\/sompylasar","gists_url":"https:\/\/api.github.com\/users\/sompylasar\/gists{\/gist_id}","html_url":"https:\/\/github.com\/sompylasar","subscriptions_url":"https:\/\/api.github.com\/users\/sompylasar\/subscriptions","node_id":"MDQ6VXNlcjQ5ODI3NA==","repos_url":"https:\/\/api.github.com\/users\/sompylasar\/repos","received_events_url":"https:\/\/api.github.com\/users\/sompylasar\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/sompylasar\/starred{\/owner}{\/repo}","site_admin":false,"login":"sompylasar","type":"User","id":498274,"followers_url":"https:\/\/api.github.com\/users\/sompylasar\/followers","organizations_url":"https:\/\/api.github.com\/users\/sompylasar\/orgs"}},{"index":2,"author_association":"OWNER","body":"I would like to keep `build\/three.js` the same size but I guess `build\/three.module.js` including addons should be okay? `src\/addons` maybe?","created_at":"2019-01-03T19:39:10.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/15518#issuecomment-451253797","id":451253797,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/15518","node_id":"MDEyOklzc3VlQ29tbWVudDQ1MTI1Mzc5Nw==","updated_at":"2019-01-03T19:45:45.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/451253797","user":{"following_url":"https:\/\/api.github.com\/users\/mrdoob\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/mrdoob\/events{\/privacy}","avatar_url":"https:\/\/avatars0.githubusercontent.com\/u\/97088?v=4","url":"https:\/\/api.github.com\/users\/mrdoob","gists_url":"https:\/\/api.github.com\/users\/mrdoob\/gists{\/gist_id}","html_url":"https:\/\/github.com\/mrdoob","subscriptions_url":"https:\/\/api.github.com\/users\/mrdoob\/subscriptions","node_id":"MDQ6VXNlcjk3MDg4","repos_url":"https:\/\/api.github.com\/users\/mrdoob\/repos","received_events_url":"https:\/\/api.github.com\/users\/mrdoob\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/mrdoob\/starred{\/owner}{\/repo}","site_admin":false,"login":"mrdoob","type":"User","id":97088,"followers_url":"https:\/\/api.github.com\/users\/mrdoob\/followers","organizations_url":"https:\/\/api.github.com\/users\/mrdoob\/orgs"}},{"index":3,"author_association":"NONE","body":"Since it's source code, putting it into `src` sounds reasonable; but since it's also not part of the core, maybe `src\/addons` would be appropriate?\r\n\r\nEdit: @mrdoob beat me to it. :)","created_at":"2019-01-03T19:39:18.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/15518#issuecomment-451253848","id":451253848,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/15518","node_id":"MDEyOklzc3VlQ29tbWVudDQ1MTI1Mzg0OA==","updated_at":"2019-01-03T19:41:04.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/451253848","user":{"following_url":"https:\/\/api.github.com\/users\/kdex\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/kdex\/events{\/privacy}","avatar_url":"https:\/\/avatars1.githubusercontent.com\/u\/4442505?v=4","url":"https:\/\/api.github.com\/users\/kdex","gists_url":"https:\/\/api.github.com\/users\/kdex\/gists{\/gist_id}","html_url":"https:\/\/github.com\/kdex","subscriptions_url":"https:\/\/api.github.com\/users\/kdex\/subscriptions","node_id":"MDQ6VXNlcjQ0NDI1MDU=","repos_url":"https:\/\/api.github.com\/users\/kdex\/repos","received_events_url":"https:\/\/api.github.com\/users\/kdex\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/kdex\/starred{\/owner}{\/repo}","site_admin":false,"login":"kdex","type":"User","id":4442505,"followers_url":"https:\/\/api.github.com\/users\/kdex\/followers","organizations_url":"https:\/\/api.github.com\/users\/kdex\/orgs"}},{"index":4,"author_association":"NONE","body":"Makes sense. The bundle size of the modular version should depend on tree-shaking of the bundler used by consumers of the library. I think `src\/addons` is viable.","created_at":"2019-01-03T19:44:47.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/15518#issuecomment-451255397","id":451255397,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/15518","node_id":"MDEyOklzc3VlQ29tbWVudDQ1MTI1NTM5Nw==","updated_at":"2019-01-03T19:44:47.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/451255397","user":{"following_url":"https:\/\/api.github.com\/users\/sompylasar\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/sompylasar\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/498274?v=4","url":"https:\/\/api.github.com\/users\/sompylasar","gists_url":"https:\/\/api.github.com\/users\/sompylasar\/gists{\/gist_id}","html_url":"https:\/\/github.com\/sompylasar","subscriptions_url":"https:\/\/api.github.com\/users\/sompylasar\/subscriptions","node_id":"MDQ6VXNlcjQ5ODI3NA==","repos_url":"https:\/\/api.github.com\/users\/sompylasar\/repos","received_events_url":"https:\/\/api.github.com\/users\/sompylasar\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/sompylasar\/starred{\/owner}{\/repo}","site_admin":false,"login":"sompylasar","type":"User","id":498274,"followers_url":"https:\/\/api.github.com\/users\/sompylasar\/followers","organizations_url":"https:\/\/api.github.com\/users\/sompylasar\/orgs"}},{"index":5,"author_association":"COLLABORATOR","body":"Exciting, thanks! \ud83c\udf8a\r\n\r\nWhat's the rationale for generating ES modules from the existing files, rather than the other way around? Do you prefer that, or is it just a transitional step? The reverse seemed easier to me \u2014 Rollup can automate it \u2014 but either way.\r\n\r\nI think folder names would depend on the question above. If ES modules are generated, maybe they would be in a `build\/*` folder to make it obvious that PRs should not modify them, or at least put a header in each file. If we think ES modules will eventually be the source-of-truth, then there's more argument for putting them in a src-ish directory...\r\n\r\nIt would be helpful if someone could confirm that this snippet...\r\n\r\n```js\r\nimport { Scene } from 'three';\r\nimport { GLTFLoader } from 'three\/examples\/jsm\/loaders\/GLTFLoader';\r\n\r\nvar loader = new GLTFLoader();\r\nloader.load('foo.glb', (gltf) => {\r\n  if (gltf.scene.constructor === Scene) {\r\n    console.log('success');\r\n  } else {\r\n    console.error('THREE.Scene has redundant definitions!');\r\n  }\r\n});\r\n```\r\n\r\n... works in major build systems like Browserify, Webpack, and Rollup. I'm not entirely sure what they'll do with the imports inside these generated files, but the changes here do look right to me.\r\n\r\n> **EDIT:** Fixed typo.","created_at":"2019-01-03T19:47:17.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/15518#issuecomment-451256036","id":451256036,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/15518","node_id":"MDEyOklzc3VlQ29tbWVudDQ1MTI1NjAzNg==","updated_at":"2019-01-03T19:56:40.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/451256036","user":{"following_url":"https:\/\/api.github.com\/users\/donmccurdy\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/donmccurdy\/events{\/privacy}","avatar_url":"https:\/\/avatars3.githubusercontent.com\/u\/1848368?v=4","url":"https:\/\/api.github.com\/users\/donmccurdy","gists_url":"https:\/\/api.github.com\/users\/donmccurdy\/gists{\/gist_id}","html_url":"https:\/\/github.com\/donmccurdy","subscriptions_url":"https:\/\/api.github.com\/users\/donmccurdy\/subscriptions","node_id":"MDQ6VXNlcjE4NDgzNjg=","repos_url":"https:\/\/api.github.com\/users\/donmccurdy\/repos","received_events_url":"https:\/\/api.github.com\/users\/donmccurdy\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/donmccurdy\/starred{\/owner}{\/repo}","site_admin":false,"login":"donmccurdy","type":"User","id":1848368,"followers_url":"https:\/\/api.github.com\/users\/donmccurdy\/followers","organizations_url":"https:\/\/api.github.com\/users\/donmccurdy\/orgs"}},{"index":6,"author_association":"NONE","body":"> What's the rationale for generating ES modules from the existing files, rather than the other way around? Do you prefer that, or is it just a transitional step?\r\n\r\nI actually had this question, too, but got too excited with this started moving at least somehow, so not asking any questions to not frighten away the progress.\r\n\r\n> `loader = new THREE.GLTFLoader();`\r\n\r\nDid you mean `new GLTFLoader()`?","created_at":"2019-01-03T19:56:12.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/15518#issuecomment-451258513","id":451258513,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/15518","node_id":"MDEyOklzc3VlQ29tbWVudDQ1MTI1ODUxMw==","updated_at":"2019-01-03T19:56:12.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/451258513","user":{"following_url":"https:\/\/api.github.com\/users\/sompylasar\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/sompylasar\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/498274?v=4","url":"https:\/\/api.github.com\/users\/sompylasar","gists_url":"https:\/\/api.github.com\/users\/sompylasar\/gists{\/gist_id}","html_url":"https:\/\/github.com\/sompylasar","subscriptions_url":"https:\/\/api.github.com\/users\/sompylasar\/subscriptions","node_id":"MDQ6VXNlcjQ5ODI3NA==","repos_url":"https:\/\/api.github.com\/users\/sompylasar\/repos","received_events_url":"https:\/\/api.github.com\/users\/sompylasar\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/sompylasar\/starred{\/owner}{\/repo}","site_admin":false,"login":"sompylasar","type":"User","id":498274,"followers_url":"https:\/\/api.github.com\/users\/sompylasar\/followers","organizations_url":"https:\/\/api.github.com\/users\/sompylasar\/orgs"}},{"index":7,"author_association":"COLLABORATOR","body":"I'm not so sure about including `examples\/js` by default in `build\/three.module.js` yet. These five files are common enough to probably justify, but if the goal is to follow up with the rest of `examples\/js`, that's going to be complicated. I'd rather just get the ES modules working first, as separate imports, then discuss where to go from there.\r\n\r\nIf we go that direction `examples\/jsm` seems like the most intuitive naming, but I'm also fine with `src\/addons`.\r\n\r\n> Did you mean new GLTFLoader()?\r\n\r\nOops, yes thanks.\r\n","created_at":"2019-01-03T20:05:47.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/15518#issuecomment-451261185","id":451261185,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/15518","node_id":"MDEyOklzc3VlQ29tbWVudDQ1MTI2MTE4NQ==","updated_at":"2019-01-03T20:05:47.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/451261185","user":{"following_url":"https:\/\/api.github.com\/users\/donmccurdy\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/donmccurdy\/events{\/privacy}","avatar_url":"https:\/\/avatars3.githubusercontent.com\/u\/1848368?v=4","url":"https:\/\/api.github.com\/users\/donmccurdy","gists_url":"https:\/\/api.github.com\/users\/donmccurdy\/gists{\/gist_id}","html_url":"https:\/\/github.com\/donmccurdy","subscriptions_url":"https:\/\/api.github.com\/users\/donmccurdy\/subscriptions","node_id":"MDQ6VXNlcjE4NDgzNjg=","repos_url":"https:\/\/api.github.com\/users\/donmccurdy\/repos","received_events_url":"https:\/\/api.github.com\/users\/donmccurdy\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/donmccurdy\/starred{\/owner}{\/repo}","site_admin":false,"login":"donmccurdy","type":"User","id":1848368,"followers_url":"https:\/\/api.github.com\/users\/donmccurdy\/followers","organizations_url":"https:\/\/api.github.com\/users\/donmccurdy\/orgs"}},{"index":8,"author_association":"NONE","body":"I don't understand why \"modules\" version is a \"build\" whereas it should be the \"source\" to benefit from ES6 modules tree-shaking. There should ideally be individually importable files that depend on each other, not just one huge blob of exports everything (although this should work with tree-shaking, too).","created_at":"2019-01-03T20:14:30.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/15518#issuecomment-451263477","id":451263477,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/15518","node_id":"MDEyOklzc3VlQ29tbWVudDQ1MTI2MzQ3Nw==","updated_at":"2019-01-03T20:14:30.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/451263477","user":{"following_url":"https:\/\/api.github.com\/users\/sompylasar\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/sompylasar\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/498274?v=4","url":"https:\/\/api.github.com\/users\/sompylasar","gists_url":"https:\/\/api.github.com\/users\/sompylasar\/gists{\/gist_id}","html_url":"https:\/\/github.com\/sompylasar","subscriptions_url":"https:\/\/api.github.com\/users\/sompylasar\/subscriptions","node_id":"MDQ6VXNlcjQ5ODI3NA==","repos_url":"https:\/\/api.github.com\/users\/sompylasar\/repos","received_events_url":"https:\/\/api.github.com\/users\/sompylasar\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/sompylasar\/starred{\/owner}{\/repo}","site_admin":false,"login":"sompylasar","type":"User","id":498274,"followers_url":"https:\/\/api.github.com\/users\/sompylasar\/followers","organizations_url":"https:\/\/api.github.com\/users\/sompylasar\/orgs"}},{"index":9,"author_association":"NONE","body":"ES6 modules are supposed to be bundled by the consumer of this library, not by the library itself.","created_at":"2019-01-03T20:16:52.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/15518#issuecomment-451264157","id":451264157,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/15518","node_id":"MDEyOklzc3VlQ29tbWVudDQ1MTI2NDE1Nw==","updated_at":"2019-01-03T20:16:52.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/451264157","user":{"following_url":"https:\/\/api.github.com\/users\/sompylasar\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/sompylasar\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/498274?v=4","url":"https:\/\/api.github.com\/users\/sompylasar","gists_url":"https:\/\/api.github.com\/users\/sompylasar\/gists{\/gist_id}","html_url":"https:\/\/github.com\/sompylasar","subscriptions_url":"https:\/\/api.github.com\/users\/sompylasar\/subscriptions","node_id":"MDQ6VXNlcjQ5ODI3NA==","repos_url":"https:\/\/api.github.com\/users\/sompylasar\/repos","received_events_url":"https:\/\/api.github.com\/users\/sompylasar\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/sompylasar\/starred{\/owner}{\/repo}","site_admin":false,"login":"sompylasar","type":"User","id":498274,"followers_url":"https:\/\/api.github.com\/users\/sompylasar\/followers","organizations_url":"https:\/\/api.github.com\/users\/sompylasar\/orgs"}},{"index":10,"author_association":"CONTRIBUTOR","body":"@mrdoob This is exciting! Thanks for moving this forward. A few comments and questions:\r\n\r\n- I was originally thinking of them as `extensions` but `src\/addons` sounds good to me. Should code in the `extras` folder then be moved into `addons`, then?\r\n\r\n- I also agree with @donmccurdy that UMD files should be generated from the `module` scripts not the opposite way around. It would be nice to keep as much code using modern syntax as possible.\r\n\r\n- I think it's great that we're looking into moving some of the code in `examples` into a proper place in the library. As has been exhaustively discussed scripts like `Controls`, `Loaders`, and `Exporters` never seemed to fall well into `examples`. If code is going to be promoted from `examples` to `addons` then it might make sense to document what constitutes an \"addon\" vs an \"example\" (for the sake of users and contributors). What should be people expecting from a script in the addons folder vs one in the examples folder? Why would some controls and standard file loaders be available in `examples` while others in `addons`?\r\n\r\n> I guess build\/three.module.js including addons should be okay? \r\n\r\n- I don't know if I agree with this. As it is I expect the module file to be built with loading directly into a browser in mind. I know bundlers and tree shaking address a lot of bundle size concerns but technically this file should be able to be loaded as a static file. Having said that, @sompylasar mentioned, is there a reason that the THREE source files cannot be used as es6 modules directly, yet? In the past I know that some preprocessing was necessary but it looks like some progress has been made since. `three.module.js` could go away entirely, no?\r\n\r\n- Lastly, how can we help? Do you have a plan for moving and transforming other files?\r\n\r\nThanks again! ","created_at":"2019-01-03T20:58:29.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/15518#issuecomment-451275035","id":451275035,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/15518","node_id":"MDEyOklzc3VlQ29tbWVudDQ1MTI3NTAzNQ==","updated_at":"2019-01-03T20:58:29.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/451275035","user":{"following_url":"https:\/\/api.github.com\/users\/gkjohnson\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/gkjohnson\/events{\/privacy}","avatar_url":"https:\/\/avatars0.githubusercontent.com\/u\/734200?v=4","url":"https:\/\/api.github.com\/users\/gkjohnson","gists_url":"https:\/\/api.github.com\/users\/gkjohnson\/gists{\/gist_id}","html_url":"https:\/\/github.com\/gkjohnson","subscriptions_url":"https:\/\/api.github.com\/users\/gkjohnson\/subscriptions","node_id":"MDQ6VXNlcjczNDIwMA==","repos_url":"https:\/\/api.github.com\/users\/gkjohnson\/repos","received_events_url":"https:\/\/api.github.com\/users\/gkjohnson\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/gkjohnson\/starred{\/owner}{\/repo}","site_admin":false,"login":"gkjohnson","type":"User","id":734200,"followers_url":"https:\/\/api.github.com\/users\/gkjohnson\/followers","organizations_url":"https:\/\/api.github.com\/users\/gkjohnson\/orgs"}},{"index":11,"author_association":"COLLABORATOR","body":"> I don't understand why \"modules\" version is a \"build\" whereas it should be the \"source\" to benefit from ES6 modules tree-shaking.\r\n\r\n> ES6 modules are supposed to be bundled by the consumer of this library, not by the library itself.\r\n\r\nThat's separate from the work in this PR, though. There are pros\/cons both ways, and I don't know that a firm best practice for how libraries are \"supposed to be bundled\" exists yet. For example, if we use more ES6 features we might want to compile back to ES5 in the `three.module.js` build (Rollup docs recommend this, if your library intends to support older browsers). Tree-shaking is supposed to work either way, yes?\r\n\r\n**EDIT:** For another example, TypeScript code is always going to have to be bundled by Rollup or similar before publishing. Not mentioning TS to open a TS vs JS discussion here, but just to say that tree-shaking tools really should be able to handle bundles fine.","created_at":"2019-01-03T21:30:37.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/15518#issuecomment-451283673","id":451283673,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/15518","node_id":"MDEyOklzc3VlQ29tbWVudDQ1MTI4MzY3Mw==","updated_at":"2019-01-03T21:34:20.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/451283673","user":{"following_url":"https:\/\/api.github.com\/users\/donmccurdy\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/donmccurdy\/events{\/privacy}","avatar_url":"https:\/\/avatars3.githubusercontent.com\/u\/1848368?v=4","url":"https:\/\/api.github.com\/users\/donmccurdy","gists_url":"https:\/\/api.github.com\/users\/donmccurdy\/gists{\/gist_id}","html_url":"https:\/\/github.com\/donmccurdy","subscriptions_url":"https:\/\/api.github.com\/users\/donmccurdy\/subscriptions","node_id":"MDQ6VXNlcjE4NDgzNjg=","repos_url":"https:\/\/api.github.com\/users\/donmccurdy\/repos","received_events_url":"https:\/\/api.github.com\/users\/donmccurdy\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/donmccurdy\/starred{\/owner}{\/repo}","site_admin":false,"login":"donmccurdy","type":"User","id":1848368,"followers_url":"https:\/\/api.github.com\/users\/donmccurdy\/followers","organizations_url":"https:\/\/api.github.com\/users\/donmccurdy\/orgs"}},{"index":12,"author_association":"NONE","body":"Tree-shaking within one file will only work if the code in that file is in ES6 Modules format, so that individual unused exports can be dead-code-eliminated.\r\n\r\nYes, it's the recommended practice to compile down to ES5 for publishing and consuming without compilation\/bundling, and this is what the regular UMD entry point of THREE provides (or should provide). The modules entry points, however (both the default one `from 'three'`, and per-file e.g. `from 'three\/addons\/OrbitControls'`), should not be bundled by the library into a single ES5 file. I think the closest build process that I would recommend for THREE is the one used by lodash: it produces a UMD, an ESM (both from a single rolled-up namespace and from tree-shakable files), and separate packages per module (the latter is only necessary if you want to save on installation time and space, but it incurs package management overhead).","created_at":"2019-01-03T21:42:45.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/15518#issuecomment-451286729","id":451286729,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/15518","node_id":"MDEyOklzc3VlQ29tbWVudDQ1MTI4NjcyOQ==","updated_at":"2019-01-03T21:42:45.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/451286729","user":{"following_url":"https:\/\/api.github.com\/users\/sompylasar\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/sompylasar\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/498274?v=4","url":"https:\/\/api.github.com\/users\/sompylasar","gists_url":"https:\/\/api.github.com\/users\/sompylasar\/gists{\/gist_id}","html_url":"https:\/\/github.com\/sompylasar","subscriptions_url":"https:\/\/api.github.com\/users\/sompylasar\/subscriptions","node_id":"MDQ6VXNlcjQ5ODI3NA==","repos_url":"https:\/\/api.github.com\/users\/sompylasar\/repos","received_events_url":"https:\/\/api.github.com\/users\/sompylasar\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/sompylasar\/starred{\/owner}{\/repo}","site_admin":false,"login":"sompylasar","type":"User","id":498274,"followers_url":"https:\/\/api.github.com\/users\/sompylasar\/followers","organizations_url":"https:\/\/api.github.com\/users\/sompylasar\/orgs"}},{"index":13,"author_association":"NONE","body":"I don't really care what is a part of the PR and what's not, I'm only concerned with the ultimate vision. For that to formulate, let's define what use cases the THREE library supports now and wants to support and does not want to support. From these requirements, the necessary changes will emerge to align what's there now with what's needed to be there. And yes, internally it may need to change some approaches, bur that will be the library implementation detail for the consumers and a thing to learn and accept for maintainers.","created_at":"2019-01-03T21:49:15.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/15518#issuecomment-451288480","id":451288480,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/15518","node_id":"MDEyOklzc3VlQ29tbWVudDQ1MTI4ODQ4MA==","updated_at":"2019-01-03T21:49:15.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/451288480","user":{"following_url":"https:\/\/api.github.com\/users\/sompylasar\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/sompylasar\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/498274?v=4","url":"https:\/\/api.github.com\/users\/sompylasar","gists_url":"https:\/\/api.github.com\/users\/sompylasar\/gists{\/gist_id}","html_url":"https:\/\/github.com\/sompylasar","subscriptions_url":"https:\/\/api.github.com\/users\/sompylasar\/subscriptions","node_id":"MDQ6VXNlcjQ5ODI3NA==","repos_url":"https:\/\/api.github.com\/users\/sompylasar\/repos","received_events_url":"https:\/\/api.github.com\/users\/sompylasar\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/sompylasar\/starred{\/owner}{\/repo}","site_admin":false,"login":"sompylasar","type":"User","id":498274,"followers_url":"https:\/\/api.github.com\/users\/sompylasar\/followers","organizations_url":"https:\/\/api.github.com\/users\/sompylasar\/orgs"}},{"index":14,"author_association":"NONE","body":"Alsi please excuse me if I sound too harsh, I have no time to write in proper very polite English here but I'd like to convey the point.","created_at":"2019-01-03T21:51:51.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/15518#issuecomment-451289113","id":451289113,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/15518","node_id":"MDEyOklzc3VlQ29tbWVudDQ1MTI4OTExMw==","updated_at":"2019-01-03T21:51:51.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/451289113","user":{"following_url":"https:\/\/api.github.com\/users\/sompylasar\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/sompylasar\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/498274?v=4","url":"https:\/\/api.github.com\/users\/sompylasar","gists_url":"https:\/\/api.github.com\/users\/sompylasar\/gists{\/gist_id}","html_url":"https:\/\/github.com\/sompylasar","subscriptions_url":"https:\/\/api.github.com\/users\/sompylasar\/subscriptions","node_id":"MDQ6VXNlcjQ5ODI3NA==","repos_url":"https:\/\/api.github.com\/users\/sompylasar\/repos","received_events_url":"https:\/\/api.github.com\/users\/sompylasar\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/sompylasar\/starred{\/owner}{\/repo}","site_admin":false,"login":"sompylasar","type":"User","id":498274,"followers_url":"https:\/\/api.github.com\/users\/sompylasar\/followers","organizations_url":"https:\/\/api.github.com\/users\/sompylasar\/orgs"}},{"index":15,"author_association":"COLLABORATOR","body":"> I don't really care what is a part of the PR and what's not, I'm only concerned with the ultimate vision. \r\n\r\nPart of the reason issues like #9562 have been so unproductive for so long is that they've tried to discuss too many changes at once, and that leads to a lot of bikeshedding. This PR is a step in the right direction, and a good start. I'm not opposed to having the `module` entry point directly to the source tree, but it's not an urgent question for this PR. Want to open a new issue, or a PR for that matter?\r\n\r\n> Yes, it's the recommended practice to compile down to ES5 for publishing and consuming without compilation\/bundling, and this is what the regular UMD entry point of THREE provides (or should provide).\r\n\r\nRecommended where, by whom, and why? I don't see this in [rollup docs](https:\/\/github.com\/rollup\/rollup\/wiki\/pkg.module#wait-it-just-means-import-and-export--not-other-future-javascript-features), and the idea that UMD should be transpiled and ES modules should not doesn't seem obvious to me. Not disagreeing, but more examples or evidence would be helpful.\r\n\r\n","created_at":"2019-01-03T21:59:29.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/15518#issuecomment-451291039","id":451291039,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/15518","node_id":"MDEyOklzc3VlQ29tbWVudDQ1MTI5MTAzOQ==","updated_at":"2019-01-03T21:59:29.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/451291039","user":{"following_url":"https:\/\/api.github.com\/users\/donmccurdy\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/donmccurdy\/events{\/privacy}","avatar_url":"https:\/\/avatars3.githubusercontent.com\/u\/1848368?v=4","url":"https:\/\/api.github.com\/users\/donmccurdy","gists_url":"https:\/\/api.github.com\/users\/donmccurdy\/gists{\/gist_id}","html_url":"https:\/\/github.com\/donmccurdy","subscriptions_url":"https:\/\/api.github.com\/users\/donmccurdy\/subscriptions","node_id":"MDQ6VXNlcjE4NDgzNjg=","repos_url":"https:\/\/api.github.com\/users\/donmccurdy\/repos","received_events_url":"https:\/\/api.github.com\/users\/donmccurdy\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/donmccurdy\/starred{\/owner}{\/repo}","site_admin":false,"login":"donmccurdy","type":"User","id":1848368,"followers_url":"https:\/\/api.github.com\/users\/donmccurdy\/followers","organizations_url":"https:\/\/api.github.com\/users\/donmccurdy\/orgs"}},{"index":16,"author_association":"OWNER","body":"> What's the rationale for generating ES modules from the existing files, rather than the other way around? Do you prefer that, or is it just a transitional step? The reverse seemed easier to me \u2014 Rollup can automate it \u2014 but either way.\r\n\r\nThere is no rationale. I just knew how to do it that way. A PR showing how to do it the other way around would be very enlightening for me \ud83d\ude07","created_at":"2019-01-03T22:07:28.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/15518#issuecomment-451292928","id":451292928,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/15518","node_id":"MDEyOklzc3VlQ29tbWVudDQ1MTI5MjkyOA==","updated_at":"2019-01-03T22:07:28.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/451292928","user":{"following_url":"https:\/\/api.github.com\/users\/mrdoob\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/mrdoob\/events{\/privacy}","avatar_url":"https:\/\/avatars0.githubusercontent.com\/u\/97088?v=4","url":"https:\/\/api.github.com\/users\/mrdoob","gists_url":"https:\/\/api.github.com\/users\/mrdoob\/gists{\/gist_id}","html_url":"https:\/\/github.com\/mrdoob","subscriptions_url":"https:\/\/api.github.com\/users\/mrdoob\/subscriptions","node_id":"MDQ6VXNlcjk3MDg4","repos_url":"https:\/\/api.github.com\/users\/mrdoob\/repos","received_events_url":"https:\/\/api.github.com\/users\/mrdoob\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/mrdoob\/starred{\/owner}{\/repo}","site_admin":false,"login":"mrdoob","type":"User","id":97088,"followers_url":"https:\/\/api.github.com\/users\/mrdoob\/followers","organizations_url":"https:\/\/api.github.com\/users\/mrdoob\/orgs"}},{"index":17,"author_association":"OWNER","body":"> If code is going to be promoted from `examples` to `addons` then it might make sense to document what constitutes an \"addon\" vs an \"example\" (for the sake of users and contributors). What should be people expecting from a script in the addons folder vs one in the examples folder?\r\n\r\nGood food for thought...","created_at":"2019-01-03T22:15:26.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/15518#issuecomment-451294832","id":451294832,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/15518","node_id":"MDEyOklzc3VlQ29tbWVudDQ1MTI5NDgzMg==","updated_at":"2019-01-03T22:15:26.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/451294832","user":{"following_url":"https:\/\/api.github.com\/users\/mrdoob\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/mrdoob\/events{\/privacy}","avatar_url":"https:\/\/avatars0.githubusercontent.com\/u\/97088?v=4","url":"https:\/\/api.github.com\/users\/mrdoob","gists_url":"https:\/\/api.github.com\/users\/mrdoob\/gists{\/gist_id}","html_url":"https:\/\/github.com\/mrdoob","subscriptions_url":"https:\/\/api.github.com\/users\/mrdoob\/subscriptions","node_id":"MDQ6VXNlcjk3MDg4","repos_url":"https:\/\/api.github.com\/users\/mrdoob\/repos","received_events_url":"https:\/\/api.github.com\/users\/mrdoob\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/mrdoob\/starred{\/owner}{\/repo}","site_admin":false,"login":"mrdoob","type":"User","id":97088,"followers_url":"https:\/\/api.github.com\/users\/mrdoob\/followers","organizations_url":"https:\/\/api.github.com\/users\/mrdoob\/orgs"}},{"index":18,"author_association":"NONE","body":"> Part of the reason issues like #9562 have been so unproductive for so long is that they've tried to discuss too many changes at once, and that leads to a lot of bikeshedding. This PR is a step in the right direction, and a good start.\r\n\r\nI suggest we start with a design\/vision document first. Code PRs are good when you know what to do and why. This PR seems raw and rushed, but it's already merged. This may be a good way to develop a game, but I doubt this is a good way to develop a library. Consider looking at the React team development practices. For example, they've recently introduced an RFC workflow which starts with a document PR and discussion rather than a code PR.\r\n\r\n> Recommended where, by whom, and why?\r\n\r\nLet me take this back in the way I postulated, I don't have any particular evidence of recommendation, but it's a practice that I've been observing in npm. ","created_at":"2019-01-03T22:15:33.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/15518#issuecomment-451294868","id":451294868,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/15518","node_id":"MDEyOklzc3VlQ29tbWVudDQ1MTI5NDg2OA==","updated_at":"2019-01-03T22:15:33.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/451294868","user":{"following_url":"https:\/\/api.github.com\/users\/sompylasar\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/sompylasar\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/498274?v=4","url":"https:\/\/api.github.com\/users\/sompylasar","gists_url":"https:\/\/api.github.com\/users\/sompylasar\/gists{\/gist_id}","html_url":"https:\/\/github.com\/sompylasar","subscriptions_url":"https:\/\/api.github.com\/users\/sompylasar\/subscriptions","node_id":"MDQ6VXNlcjQ5ODI3NA==","repos_url":"https:\/\/api.github.com\/users\/sompylasar\/repos","received_events_url":"https:\/\/api.github.com\/users\/sompylasar\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/sompylasar\/starred{\/owner}{\/repo}","site_admin":false,"login":"sompylasar","type":"User","id":498274,"followers_url":"https:\/\/api.github.com\/users\/sompylasar\/followers","organizations_url":"https:\/\/api.github.com\/users\/sompylasar\/orgs"}},{"index":19,"author_association":"OWNER","body":"> I suggest we start with a design\/vision document first.\r\n\r\nThe more we work on this problem the clearer it's going to be. It's hard for me to design things without getting my hands dirty. (That's the whole point of this PR)","created_at":"2019-01-03T22:17:36.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/15518#issuecomment-451295308","id":451295308,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/15518","node_id":"MDEyOklzc3VlQ29tbWVudDQ1MTI5NTMwOA==","updated_at":"2019-01-03T22:18:02.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/451295308","user":{"following_url":"https:\/\/api.github.com\/users\/mrdoob\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/mrdoob\/events{\/privacy}","avatar_url":"https:\/\/avatars0.githubusercontent.com\/u\/97088?v=4","url":"https:\/\/api.github.com\/users\/mrdoob","gists_url":"https:\/\/api.github.com\/users\/mrdoob\/gists{\/gist_id}","html_url":"https:\/\/github.com\/mrdoob","subscriptions_url":"https:\/\/api.github.com\/users\/mrdoob\/subscriptions","node_id":"MDQ6VXNlcjk3MDg4","repos_url":"https:\/\/api.github.com\/users\/mrdoob\/repos","received_events_url":"https:\/\/api.github.com\/users\/mrdoob\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/mrdoob\/starred{\/owner}{\/repo}","site_admin":false,"login":"mrdoob","type":"User","id":97088,"followers_url":"https:\/\/api.github.com\/users\/mrdoob\/followers","organizations_url":"https:\/\/api.github.com\/users\/mrdoob\/orgs"}},{"index":20,"author_association":"COLLABORATOR","body":"My PR https:\/\/github.com\/mrdoob\/three.js\/pull\/13544 includes a script to go the other way, or @gkjohnson did [something similar too](https:\/\/github.com\/gkjohnson\/convert-three-examples-to-imports\/blob\/master\/rollup.example-imports-to-umd.config.js). But both of us cheated by using `import * as THREE` in the modules, so your script might be a better starting point to get the ES modules up and running actually. \ud83d\ude05","created_at":"2019-01-03T22:17:47.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/15518#issuecomment-451295339","id":451295339,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/15518","node_id":"MDEyOklzc3VlQ29tbWVudDQ1MTI5NTMzOQ==","updated_at":"2019-01-03T22:17:47.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/451295339","user":{"following_url":"https:\/\/api.github.com\/users\/donmccurdy\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/donmccurdy\/events{\/privacy}","avatar_url":"https:\/\/avatars3.githubusercontent.com\/u\/1848368?v=4","url":"https:\/\/api.github.com\/users\/donmccurdy","gists_url":"https:\/\/api.github.com\/users\/donmccurdy\/gists{\/gist_id}","html_url":"https:\/\/github.com\/donmccurdy","subscriptions_url":"https:\/\/api.github.com\/users\/donmccurdy\/subscriptions","node_id":"MDQ6VXNlcjE4NDgzNjg=","repos_url":"https:\/\/api.github.com\/users\/donmccurdy\/repos","received_events_url":"https:\/\/api.github.com\/users\/donmccurdy\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/donmccurdy\/starred{\/owner}{\/repo}","site_admin":false,"login":"donmccurdy","type":"User","id":1848368,"followers_url":"https:\/\/api.github.com\/users\/donmccurdy\/followers","organizations_url":"https:\/\/api.github.com\/users\/donmccurdy\/orgs"}},{"index":21,"author_association":"NONE","body":"> There is no rationale. I just knew how to do it that way. A PR showing how to do it the other way around would be very enlightening for me \r\n\r\nThis comment in particular is an evidence that the main maintainer (and looks like one of the few decision makers here) has not evaluated all the possible (or at least several) ways of doing something before doing it, but rushed to merge the changes without giving the community time to discuss and improve on the proposed solution.\r\n\r\n","created_at":"2019-01-03T22:18:47.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/15518#issuecomment-451295562","id":451295562,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/15518","node_id":"MDEyOklzc3VlQ29tbWVudDQ1MTI5NTU2Mg==","updated_at":"2019-01-03T22:18:47.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/451295562","user":{"following_url":"https:\/\/api.github.com\/users\/sompylasar\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/sompylasar\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/498274?v=4","url":"https:\/\/api.github.com\/users\/sompylasar","gists_url":"https:\/\/api.github.com\/users\/sompylasar\/gists{\/gist_id}","html_url":"https:\/\/github.com\/sompylasar","subscriptions_url":"https:\/\/api.github.com\/users\/sompylasar\/subscriptions","node_id":"MDQ6VXNlcjQ5ODI3NA==","repos_url":"https:\/\/api.github.com\/users\/sompylasar\/repos","received_events_url":"https:\/\/api.github.com\/users\/sompylasar\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/sompylasar\/starred{\/owner}{\/repo}","site_admin":false,"login":"sompylasar","type":"User","id":498274,"followers_url":"https:\/\/api.github.com\/users\/sompylasar\/followers","organizations_url":"https:\/\/api.github.com\/users\/sompylasar\/orgs"}},{"index":22,"author_association":"NONE","body":"> , so your script might be a better starting point to get the ES modules up and running actually.\r\n\r\nUnfortunately, the MVP \"up and running\" approach doesn't always work, especially if you design a public API (that is, the way the library can be consumed from a variety of programs). You have to have a design, a vision, a goal clearly defined and agreed upon.","created_at":"2019-01-03T22:23:58.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/15518#issuecomment-451296770","id":451296770,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/15518","node_id":"MDEyOklzc3VlQ29tbWVudDQ1MTI5Njc3MA==","updated_at":"2019-01-03T22:23:58.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/451296770","user":{"following_url":"https:\/\/api.github.com\/users\/sompylasar\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/sompylasar\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/498274?v=4","url":"https:\/\/api.github.com\/users\/sompylasar","gists_url":"https:\/\/api.github.com\/users\/sompylasar\/gists{\/gist_id}","html_url":"https:\/\/github.com\/sompylasar","subscriptions_url":"https:\/\/api.github.com\/users\/sompylasar\/subscriptions","node_id":"MDQ6VXNlcjQ5ODI3NA==","repos_url":"https:\/\/api.github.com\/users\/sompylasar\/repos","received_events_url":"https:\/\/api.github.com\/users\/sompylasar\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/sompylasar\/starred{\/owner}{\/repo}","site_admin":false,"login":"sompylasar","type":"User","id":498274,"followers_url":"https:\/\/api.github.com\/users\/sompylasar\/followers","organizations_url":"https:\/\/api.github.com\/users\/sompylasar\/orgs"}},{"index":23,"author_association":"CONTRIBUTOR","body":"@mrdoob my previous PR includes a [rollup config that does just that](https:\/\/github.com\/mrdoob\/three.js\/blob\/77e94850e835e4d5eb14baa0177e7221fcc2b7ad\/rollup.example-imports-to-umd.config.js) (though I know that PR was huge :X).\r\n\r\nHere's what the config might look like for something like `OrbitControls`:\r\n\r\n```js\r\n{\r\n\r\n\tinput: inputPath,\r\n\ttreeshake: false,\r\n\texternal: p => p !== inputPath,\r\n\toutput: {\r\n\r\n\t\tformat: 'umd',\r\n\t\tname: 'THREE',\r\n\t\tfile: outputPath,\r\n\r\n\t\tglobals: () => 'THREE',\r\n\t\textend: true,\r\n\r\n\t\tbanner:\r\n\t\t\t'\/**\\n' +\r\n\t\t\t' * Generated from OrbitControls module\\n' +\r\n\t\t\t' **\/\\n'\r\n\t}\r\n}\r\n```\r\n\r\nThis will generate a UMD file that extends the global THREE object so it's backwards compatible with way the example files scripts work now. I'm happy to make a PR with the changes if you point me in the right direction for how you'd like things organized.\r\n\r\n> But both of us cheated by using import * as THREE in the modules\r\n\r\nHeh, it's true. But I would think that could be worked around.\r\n\r\n> Good food for thought...\r\n\r\n> The more we work on this problem the clearer it's going to be. It's hard for me to design things without getting my hands dirty.\r\n\r\nAny thoughts on what the best venue for this type of discussion would be? Maybe we need a quick design document that PRs \/ suggestions can be made into to avoid the massive discussions that have happened in the past?","created_at":"2019-01-03T22:24:03.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/15518#issuecomment-451296786","id":451296786,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/15518","node_id":"MDEyOklzc3VlQ29tbWVudDQ1MTI5Njc4Ng==","updated_at":"2019-01-03T22:24:03.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/451296786","user":{"following_url":"https:\/\/api.github.com\/users\/gkjohnson\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/gkjohnson\/events{\/privacy}","avatar_url":"https:\/\/avatars0.githubusercontent.com\/u\/734200?v=4","url":"https:\/\/api.github.com\/users\/gkjohnson","gists_url":"https:\/\/api.github.com\/users\/gkjohnson\/gists{\/gist_id}","html_url":"https:\/\/github.com\/gkjohnson","subscriptions_url":"https:\/\/api.github.com\/users\/gkjohnson\/subscriptions","node_id":"MDQ6VXNlcjczNDIwMA==","repos_url":"https:\/\/api.github.com\/users\/gkjohnson\/repos","received_events_url":"https:\/\/api.github.com\/users\/gkjohnson\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/gkjohnson\/starred{\/owner}{\/repo}","site_admin":false,"login":"gkjohnson","type":"User","id":734200,"followers_url":"https:\/\/api.github.com\/users\/gkjohnson\/followers","organizations_url":"https:\/\/api.github.com\/users\/gkjohnson\/orgs"}},{"index":24,"author_association":"NONE","body":"> Any thoughts on what the best venue for this type of discussion would be? Maybe we need a quick design document that PRs \/ suggestions can be made into to avoid the massive discussions that have happened in the past?\r\n\r\nYes, consider RFC. https:\/\/reactjs.org\/blog\/2017\/12\/07\/introducing-the-react-rfc-process.html","created_at":"2019-01-03T22:25:48.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/15518#issuecomment-451297194","id":451297194,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/15518","node_id":"MDEyOklzc3VlQ29tbWVudDQ1MTI5NzE5NA==","updated_at":"2019-01-03T22:25:48.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/451297194","user":{"following_url":"https:\/\/api.github.com\/users\/sompylasar\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/sompylasar\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/498274?v=4","url":"https:\/\/api.github.com\/users\/sompylasar","gists_url":"https:\/\/api.github.com\/users\/sompylasar\/gists{\/gist_id}","html_url":"https:\/\/github.com\/sompylasar","subscriptions_url":"https:\/\/api.github.com\/users\/sompylasar\/subscriptions","node_id":"MDQ6VXNlcjQ5ODI3NA==","repos_url":"https:\/\/api.github.com\/users\/sompylasar\/repos","received_events_url":"https:\/\/api.github.com\/users\/sompylasar\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/sompylasar\/starred{\/owner}{\/repo}","site_admin":false,"login":"sompylasar","type":"User","id":498274,"followers_url":"https:\/\/api.github.com\/users\/sompylasar\/followers","organizations_url":"https:\/\/api.github.com\/users\/sompylasar\/orgs"}},{"index":25,"author_association":"OWNER","body":"@donmccurdy \r\n\r\n> It would be helpful if someone could confirm that this snippet...\r\n>\r\n> ```js\r\n> import { Scene } from 'three';\r\n> import { GLTFLoader } from 'three\/examples\/jsm\/loaders\/GLTFLoader';\r\n>\r\n> var loader = new GLTFLoader();\r\n> loader.load('foo.glb', (gltf) => {\r\n>  if (gltf.scene.constructor === Scene) {\r\n>    console.log('success');\r\n>  } else {\r\n>    console.error('THREE.Scene has redundant definitions!');\r\n>  }\r\n> });\r\n> ```\r\n\r\nThe way I tested `GLTFLoader` was by importing it like this in [webgl_loader_gltf](https:\/\/github.com\/mrdoob\/three.js\/blob\/dev\/examples\/webgl_loader_gltf.html):\r\n\r\n```html\r\n<script type=\"module\">\r\n \r\n\timport { GLTFLoader } from \".\/jsm\/loaders\/GLTFLoader.js\";\r\n```\r\n\r\nAnd then instantiate without the namespace:\r\n\r\n```js\r\n\tvar loader = new GLTFLoader();\r\n```\r\n\r\nIt did not loaded the helmet (displayed a cube instead, maybe because of draco?) but at least the example didn't crash \ud83d\ude1b","created_at":"2019-01-03T22:28:57.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/15518#issuecomment-451297925","id":451297925,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/15518","node_id":"MDEyOklzc3VlQ29tbWVudDQ1MTI5NzkyNQ==","updated_at":"2019-01-03T22:28:57.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/451297925","user":{"following_url":"https:\/\/api.github.com\/users\/mrdoob\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/mrdoob\/events{\/privacy}","avatar_url":"https:\/\/avatars0.githubusercontent.com\/u\/97088?v=4","url":"https:\/\/api.github.com\/users\/mrdoob","gists_url":"https:\/\/api.github.com\/users\/mrdoob\/gists{\/gist_id}","html_url":"https:\/\/github.com\/mrdoob","subscriptions_url":"https:\/\/api.github.com\/users\/mrdoob\/subscriptions","node_id":"MDQ6VXNlcjk3MDg4","repos_url":"https:\/\/api.github.com\/users\/mrdoob\/repos","received_events_url":"https:\/\/api.github.com\/users\/mrdoob\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/mrdoob\/starred{\/owner}{\/repo}","site_admin":false,"login":"mrdoob","type":"User","id":97088,"followers_url":"https:\/\/api.github.com\/users\/mrdoob\/followers","organizations_url":"https:\/\/api.github.com\/users\/mrdoob\/orgs"}},{"index":26,"author_association":"OWNER","body":"> @mrdoob my previous PR includes a [rollup config that does just that](https:\/\/github.com\/mrdoob\/three.js\/blob\/77e94850e835e4d5eb14baa0177e7221fcc2b7ad\/rollup.example-imports-to-umd.config.js) (though I know that PR was huge :X).\r\n\r\nYeah, huge PRs take too long to review and they get lost in between tons of easy to review PRs. So yeah, better to do small PRs and go from there.\r\n\r\n> Any thoughts on what the best venue for this type of discussion would be? Maybe we need a quick design document that PRs \/ suggestions can be made into to avoid the massive discussions that have happened in the past?\r\n\r\nI think the next steps will be to decide whether to convert from ESM to UMD or the other way around. Then converting more classes (but avoid converting everything for the sake of converting everything).\r\n\r\nAs per avoiding massive discussions... the trick is to ignore people that clearly love arguing more than solving \ud83e\udd13","created_at":"2019-01-03T22:38:26.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/15518#issuecomment-451300171","id":451300171,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/15518","node_id":"MDEyOklzc3VlQ29tbWVudDQ1MTMwMDE3MQ==","updated_at":"2019-01-03T22:38:47.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/451300171","user":{"following_url":"https:\/\/api.github.com\/users\/mrdoob\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/mrdoob\/events{\/privacy}","avatar_url":"https:\/\/avatars0.githubusercontent.com\/u\/97088?v=4","url":"https:\/\/api.github.com\/users\/mrdoob","gists_url":"https:\/\/api.github.com\/users\/mrdoob\/gists{\/gist_id}","html_url":"https:\/\/github.com\/mrdoob","subscriptions_url":"https:\/\/api.github.com\/users\/mrdoob\/subscriptions","node_id":"MDQ6VXNlcjk3MDg4","repos_url":"https:\/\/api.github.com\/users\/mrdoob\/repos","received_events_url":"https:\/\/api.github.com\/users\/mrdoob\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/mrdoob\/starred{\/owner}{\/repo}","site_admin":false,"login":"mrdoob","type":"User","id":97088,"followers_url":"https:\/\/api.github.com\/users\/mrdoob\/followers","organizations_url":"https:\/\/api.github.com\/users\/mrdoob\/orgs"}},{"index":27,"author_association":"CONTRIBUTOR","body":"> It did not loaded the helmet (displayed a cube instead, maybe because of draco?) but at least the example didn't crash \ud83d\ude1b\r\n\r\nIt might be because THREE is being loaded and used globally while the `GLTFLoader` is using the module build. I'm not sure how much luck we'll have mixing and matching the module and umd variants but I've been able to get the GLTFLoader working in my experiments. FWIW [here's versions of the examples using modules](https:\/\/rawgit.com\/gkjohnson\/three.js\/examples-to-imports\/examples\/index.html?q=gltf#webgl_loader_gltf_module) (some are still not working and need more massaging).\r\n\r\n> I think the next steps will be to decide whether to convert from ESM to UMD or the other way around.\r\n\r\nI think ESM -> UMD is definitely the way to go. I think any script built to transform the existing THREE examples to ESM is going to require a lot of maintenance or customization due to the nature of the current structure of the examples. ESM is much more predictable and can be easily processed into UMD using other tools which are maintained for that specific purpose (rollup!). So once our UMD -> ESM script works (however hacky), it only has to work once and then the transform back can be handled by existing, well-maintained tooling.\r\n\r\n> but avoid converting everything for the sake of converting everything\r\n\r\nHeh, lesson learned :) If we can agree on a transformation process \/ target directory I'm happy to start moving files over piece-meal.","created_at":"2019-01-03T22:51:05.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/15518#issuecomment-451303189","id":451303189,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/15518","node_id":"MDEyOklzc3VlQ29tbWVudDQ1MTMwMzE4OQ==","updated_at":"2019-01-03T22:51:05.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/451303189","user":{"following_url":"https:\/\/api.github.com\/users\/gkjohnson\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/gkjohnson\/events{\/privacy}","avatar_url":"https:\/\/avatars0.githubusercontent.com\/u\/734200?v=4","url":"https:\/\/api.github.com\/users\/gkjohnson","gists_url":"https:\/\/api.github.com\/users\/gkjohnson\/gists{\/gist_id}","html_url":"https:\/\/github.com\/gkjohnson","subscriptions_url":"https:\/\/api.github.com\/users\/gkjohnson\/subscriptions","node_id":"MDQ6VXNlcjczNDIwMA==","repos_url":"https:\/\/api.github.com\/users\/gkjohnson\/repos","received_events_url":"https:\/\/api.github.com\/users\/gkjohnson\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/gkjohnson\/starred{\/owner}{\/repo}","site_admin":false,"login":"gkjohnson","type":"User","id":734200,"followers_url":"https:\/\/api.github.com\/users\/gkjohnson\/followers","organizations_url":"https:\/\/api.github.com\/users\/gkjohnson\/orgs"}},{"index":28,"author_association":"CONTRIBUTOR","body":"> I think the next steps will be to decide whether to convert from ESM to UMD...\r\n\r\nI will strongly advocate using ESM as the source - that is the whole point of having ESM at the first place - it makes the source code nice, tidy and modular :)\r\n\r\nI agree with @sompylasar this merge is a little sloppy but at least we have moved after years of bikeshedding. Everything will be alright!","created_at":"2019-01-03T22:53:06.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/15518#issuecomment-451303674","id":451303674,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/15518","node_id":"MDEyOklzc3VlQ29tbWVudDQ1MTMwMzY3NA==","updated_at":"2019-01-03T22:53:06.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/451303674","user":{"following_url":"https:\/\/api.github.com\/users\/arodic\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/arodic\/events{\/privacy}","avatar_url":"https:\/\/avatars1.githubusercontent.com\/u\/708984?v=4","url":"https:\/\/api.github.com\/users\/arodic","gists_url":"https:\/\/api.github.com\/users\/arodic\/gists{\/gist_id}","html_url":"https:\/\/github.com\/arodic","subscriptions_url":"https:\/\/api.github.com\/users\/arodic\/subscriptions","node_id":"MDQ6VXNlcjcwODk4NA==","repos_url":"https:\/\/api.github.com\/users\/arodic\/repos","received_events_url":"https:\/\/api.github.com\/users\/arodic\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/arodic\/starred{\/owner}{\/repo}","site_admin":false,"login":"arodic","type":"User","id":708984,"followers_url":"https:\/\/api.github.com\/users\/arodic\/followers","organizations_url":"https:\/\/api.github.com\/users\/arodic\/orgs"}},{"index":29,"author_association":"COLLABORATOR","body":"> ...but rushed to merge the changes without giving the community time to discuss and improve on the proposed solution.\r\n\r\nPlease assume good intent and consideration. \ud83d\ude42 There has been an abundance of community discussion over several years, and more than a little bikeshedding. That the discussion didn't result in clear consensus isn't ideal, and in retrospect focusing comments around an evolving doc or RFC probably would have helped, but this PR takes a step toward addressing the problems raised without locking us into any particular long-term path \u2014 ES modules are clearly needed. The implementation of an internal build script is easy to change.\r\n\r\n> I think the next steps will be to decide whether to convert from ESM to UMD or the other way around.\r\n\r\nSome addons, like `examples\/js\/curves`, `examples\/js\/effects`, and `examples\/js\/nodes`, involve more than one file, and ideally could be imported from a single entrypoint, like:\r\n\r\n```js\r\nimport { NURBSCurve,  NURBSSurface } from 'three\/examples\/jsm\/curves\/';\r\n```\r\n\r\nThis is also a good step toward publishing additional npm packages, e.g. `@threejs\/curves`, if that's a direction we want to go later. This seems easier going ES->UMD; I'm not sure how this case would be handled in the other direction. \ud83e\udd14","created_at":"2019-01-03T22:57:56.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/15518#issuecomment-451304738","id":451304738,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/15518","node_id":"MDEyOklzc3VlQ29tbWVudDQ1MTMwNDczOA==","updated_at":"2019-01-03T22:58:47.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/451304738","user":{"following_url":"https:\/\/api.github.com\/users\/donmccurdy\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/donmccurdy\/events{\/privacy}","avatar_url":"https:\/\/avatars3.githubusercontent.com\/u\/1848368?v=4","url":"https:\/\/api.github.com\/users\/donmccurdy","gists_url":"https:\/\/api.github.com\/users\/donmccurdy\/gists{\/gist_id}","html_url":"https:\/\/github.com\/donmccurdy","subscriptions_url":"https:\/\/api.github.com\/users\/donmccurdy\/subscriptions","node_id":"MDQ6VXNlcjE4NDgzNjg=","repos_url":"https:\/\/api.github.com\/users\/donmccurdy\/repos","received_events_url":"https:\/\/api.github.com\/users\/donmccurdy\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/donmccurdy\/starred{\/owner}{\/repo}","site_admin":false,"login":"donmccurdy","type":"User","id":1848368,"followers_url":"https:\/\/api.github.com\/users\/donmccurdy\/followers","organizations_url":"https:\/\/api.github.com\/users\/donmccurdy\/orgs"}}]}