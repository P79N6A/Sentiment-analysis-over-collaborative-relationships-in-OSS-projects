{"schema": {"fields":[{"type":"integer","name":"index"},{"type":"string","name":"author_association"},{"type":"string","name":"body"},{"type":"datetime","name":"created_at"},{"type":"string","name":"html_url"},{"type":"integer","name":"id"},{"type":"string","name":"issue_url"},{"type":"string","name":"node_id"},{"type":"datetime","name":"updated_at"},{"type":"string","name":"url"},{"type":"string","name":"user"}],"pandas_version":"0.20.0","primaryKey":["index"]}, "data": [{"index":0,"author_association":"COLLABORATOR","body":"I think I would structure the code like this:\r\n```js\r\nfunction isBinary( data ) {\r\n\r\n\tvar expect, face_size, n_faces, reader;\r\n\treader = new DataView( data );\r\n\tface_size = ( 32 \/ 8 * 3 ) + ( ( 32 \/ 8 * 3 ) * 3 ) + ( 16 \/ 8 );\r\n\tn_faces = reader.getUint32( 80, true );\r\n\texpect = 80 + ( 32 \/ 8 ) + ( n_faces * face_size );\r\n\r\n\tif ( expect === reader.byteLength ) {\r\n\r\n\t\treturn true;\r\n\r\n\t}\r\n\r\n\t\/\/ An ASCII STL data must begin with 'solid ' as the first six bytes.\r\n\t\/\/ However, ASCII STLs lacking the SPACE after the 'd' are known to be\r\n\t\/\/ plentiful. So, check the first 5 bytes for 'solid'.\r\n\r\n\t\/\/ Several encodings, such as UTF-8, precede the text with up to 5 bytes:\r\n\t\/\/ https:\/\/en.wikipedia.org\/wiki\/Byte_order_mark#Byte_order_marks_by_encoding\r\n\t\/\/ Search for \"solid\" to start anywhere after those prefixes.\r\n\r\n        \/\/ US-ASCII ordinal values for 's', 'o', 'l', 'i', 'd'\r\n\r\n\tvar solid = [ 115, 111, 108, 105, 100 ]; \r\n\r\n\tfor ( var off = 0; off < 5; off ++ ) {\r\n\r\n\t\t\/\/ If first 5 bytes from the offset correspond \"solid\", declare it to be an ASCII STL\r\n\r\n\t\tif ( match( solid, reader, off ) ) return false;\r\n\r\n\r\n\t}\r\n\r\n\t\/\/ binary\r\n\r\n\treturn true;\r\n\r\n}\r\n\r\nfunction match( solid, reader, offset ) {\r\n\r\n\tfor ( var i = 0; i < 5; i ++ ) {\r\n\r\n\t\tif ( solid[ i ] !== reader.getUint8( offset + i, false ) ) return false;\r\n\r\n\t}\r\n\r\n\treturn true;\r\n\r\n}\r\n```\r\nAdding a new function `match()` makes the code more readable.","created_at":"2018-07-22T13:24:25.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/14522#issuecomment-406866384","id":406866384,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/14522","node_id":"MDEyOklzc3VlQ29tbWVudDQwNjg2NjM4NA==","updated_at":"2018-07-22T13:24:25.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/406866384","user":{"following_url":"https:\/\/api.github.com\/users\/Mugen87\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/Mugen87\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/12612165?v=4","url":"https:\/\/api.github.com\/users\/Mugen87","gists_url":"https:\/\/api.github.com\/users\/Mugen87\/gists{\/gist_id}","html_url":"https:\/\/github.com\/Mugen87","subscriptions_url":"https:\/\/api.github.com\/users\/Mugen87\/subscriptions","node_id":"MDQ6VXNlcjEyNjEyMTY1","repos_url":"https:\/\/api.github.com\/users\/Mugen87\/repos","received_events_url":"https:\/\/api.github.com\/users\/Mugen87\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/Mugen87\/starred{\/owner}{\/repo}","site_admin":false,"login":"Mugen87","type":"User","id":12612165,"followers_url":"https:\/\/api.github.com\/users\/Mugen87\/followers","organizations_url":"https:\/\/api.github.com\/users\/Mugen87\/orgs"}},{"index":1,"author_association":"CONTRIBUTOR","body":"@Mugen87 Thank you for refactoring. \r\nIndeed i thought about writing as your structure, but tried to limit the change to a minimum.\r\nEither way is ok.","created_at":"2018-07-22T18:16:49.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/14522#issuecomment-406886208","id":406886208,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/14522","node_id":"MDEyOklzc3VlQ29tbWVudDQwNjg4NjIwOA==","updated_at":"2018-07-22T18:16:49.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/406886208","user":{"following_url":"https:\/\/api.github.com\/users\/erasta\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/erasta\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/7118772?v=4","url":"https:\/\/api.github.com\/users\/erasta","gists_url":"https:\/\/api.github.com\/users\/erasta\/gists{\/gist_id}","html_url":"https:\/\/github.com\/erasta","subscriptions_url":"https:\/\/api.github.com\/users\/erasta\/subscriptions","node_id":"MDQ6VXNlcjcxMTg3NzI=","repos_url":"https:\/\/api.github.com\/users\/erasta\/repos","received_events_url":"https:\/\/api.github.com\/users\/erasta\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/erasta\/starred{\/owner}{\/repo}","site_admin":false,"login":"erasta","type":"User","id":7118772,"followers_url":"https:\/\/api.github.com\/users\/erasta\/followers","organizations_url":"https:\/\/api.github.com\/users\/erasta\/orgs"}},{"index":2,"author_association":"COLLABORATOR","body":"I see. In this case I would prefer readability. Can you apply the refactoring to your PR?","created_at":"2018-07-23T08:16:03.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/14522#issuecomment-406977187","id":406977187,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/14522","node_id":"MDEyOklzc3VlQ29tbWVudDQwNjk3NzE4Nw==","updated_at":"2018-07-23T08:16:03.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/406977187","user":{"following_url":"https:\/\/api.github.com\/users\/Mugen87\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/Mugen87\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/12612165?v=4","url":"https:\/\/api.github.com\/users\/Mugen87","gists_url":"https:\/\/api.github.com\/users\/Mugen87\/gists{\/gist_id}","html_url":"https:\/\/github.com\/Mugen87","subscriptions_url":"https:\/\/api.github.com\/users\/Mugen87\/subscriptions","node_id":"MDQ6VXNlcjEyNjEyMTY1","repos_url":"https:\/\/api.github.com\/users\/Mugen87\/repos","received_events_url":"https:\/\/api.github.com\/users\/Mugen87\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/Mugen87\/starred{\/owner}{\/repo}","site_admin":false,"login":"Mugen87","type":"User","id":12612165,"followers_url":"https:\/\/api.github.com\/users\/Mugen87\/followers","organizations_url":"https:\/\/api.github.com\/users\/Mugen87\/orgs"}},{"index":3,"author_association":"CONTRIBUTOR","body":"@Mugen87 great. done.","created_at":"2018-07-23T12:58:58.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/14522#issuecomment-407049123","id":407049123,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/14522","node_id":"MDEyOklzc3VlQ29tbWVudDQwNzA0OTEyMw==","updated_at":"2018-07-23T12:58:58.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/407049123","user":{"following_url":"https:\/\/api.github.com\/users\/erasta\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/erasta\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/7118772?v=4","url":"https:\/\/api.github.com\/users\/erasta","gists_url":"https:\/\/api.github.com\/users\/erasta\/gists{\/gist_id}","html_url":"https:\/\/github.com\/erasta","subscriptions_url":"https:\/\/api.github.com\/users\/erasta\/subscriptions","node_id":"MDQ6VXNlcjcxMTg3NzI=","repos_url":"https:\/\/api.github.com\/users\/erasta\/repos","received_events_url":"https:\/\/api.github.com\/users\/erasta\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/erasta\/starred{\/owner}{\/repo}","site_admin":false,"login":"erasta","type":"User","id":7118772,"followers_url":"https:\/\/api.github.com\/users\/erasta\/followers","organizations_url":"https:\/\/api.github.com\/users\/erasta\/orgs"}},{"index":4,"author_association":"COLLABORATOR","body":"Nice! \ud83d\udc4d ","created_at":"2018-07-23T15:49:39.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/14522#issuecomment-407105901","id":407105901,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/14522","node_id":"MDEyOklzc3VlQ29tbWVudDQwNzEwNTkwMQ==","updated_at":"2018-07-23T15:49:39.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/407105901","user":{"following_url":"https:\/\/api.github.com\/users\/Mugen87\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/Mugen87\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/12612165?v=4","url":"https:\/\/api.github.com\/users\/Mugen87","gists_url":"https:\/\/api.github.com\/users\/Mugen87\/gists{\/gist_id}","html_url":"https:\/\/github.com\/Mugen87","subscriptions_url":"https:\/\/api.github.com\/users\/Mugen87\/subscriptions","node_id":"MDQ6VXNlcjEyNjEyMTY1","repos_url":"https:\/\/api.github.com\/users\/Mugen87\/repos","received_events_url":"https:\/\/api.github.com\/users\/Mugen87\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/Mugen87\/starred{\/owner}{\/repo}","site_admin":false,"login":"Mugen87","type":"User","id":12612165,"followers_url":"https:\/\/api.github.com\/users\/Mugen87\/followers","organizations_url":"https:\/\/api.github.com\/users\/Mugen87\/orgs"}},{"index":5,"author_association":"OWNER","body":"Thanks!","created_at":"2018-07-25T11:11:38.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/14522#issuecomment-407719027","id":407719027,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/14522","node_id":"MDEyOklzc3VlQ29tbWVudDQwNzcxOTAyNw==","updated_at":"2018-07-25T11:11:38.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/407719027","user":{"following_url":"https:\/\/api.github.com\/users\/mrdoob\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/mrdoob\/events{\/privacy}","avatar_url":"https:\/\/avatars0.githubusercontent.com\/u\/97088?v=4","url":"https:\/\/api.github.com\/users\/mrdoob","gists_url":"https:\/\/api.github.com\/users\/mrdoob\/gists{\/gist_id}","html_url":"https:\/\/github.com\/mrdoob","subscriptions_url":"https:\/\/api.github.com\/users\/mrdoob\/subscriptions","node_id":"MDQ6VXNlcjk3MDg4","repos_url":"https:\/\/api.github.com\/users\/mrdoob\/repos","received_events_url":"https:\/\/api.github.com\/users\/mrdoob\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/mrdoob\/starred{\/owner}{\/repo}","site_admin":false,"login":"mrdoob","type":"User","id":97088,"followers_url":"https:\/\/api.github.com\/users\/mrdoob\/followers","organizations_url":"https:\/\/api.github.com\/users\/mrdoob\/orgs"}}]}