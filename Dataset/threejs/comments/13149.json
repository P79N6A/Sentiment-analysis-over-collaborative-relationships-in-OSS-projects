{"schema": {"fields":[{"type":"integer","name":"index"},{"type":"string","name":"author_association"},{"type":"string","name":"body"},{"type":"datetime","name":"created_at"},{"type":"string","name":"html_url"},{"type":"integer","name":"id"},{"type":"string","name":"issue_url"},{"type":"string","name":"node_id"},{"type":"datetime","name":"updated_at"},{"type":"string","name":"url"},{"type":"string","name":"user"}],"pandas_version":"0.20.0","primaryKey":["index"]}, "data": [{"index":0,"author_association":"COLLABORATOR","body":"@bhouston The ultimate goal here is to make the renderer material-agnostic. The approach is to make the materials node-based. @sunag is having a go at this. This PR is a first step.\r\n\r\nI do not see a problem with this PR, since it can be easily reverted if there is a problem, and new files can always be renamed. Your thoughts?","created_at":"2018-01-22T04:36:25.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/13149#issuecomment-359323083","id":359323083,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/13149","node_id":"MDEyOklzc3VlQ29tbWVudDM1OTMyMzA4Mw==","updated_at":"2018-01-22T04:36:25.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/359323083","user":{"following_url":"https:\/\/api.github.com\/users\/WestLangley\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/WestLangley\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/1000017?v=4","url":"https:\/\/api.github.com\/users\/WestLangley","gists_url":"https:\/\/api.github.com\/users\/WestLangley\/gists{\/gist_id}","html_url":"https:\/\/github.com\/WestLangley","subscriptions_url":"https:\/\/api.github.com\/users\/WestLangley\/subscriptions","node_id":"MDQ6VXNlcjEwMDAwMTc=","repos_url":"https:\/\/api.github.com\/users\/WestLangley\/repos","received_events_url":"https:\/\/api.github.com\/users\/WestLangley\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/WestLangley\/starred{\/owner}{\/repo}","site_admin":false,"login":"WestLangley","type":"User","id":1000017,"followers_url":"https:\/\/api.github.com\/users\/WestLangley\/followers","organizations_url":"https:\/\/api.github.com\/users\/WestLangley\/orgs"}},{"index":1,"author_association":"CONTRIBUTOR","body":"Thoughts?","created_at":"2018-01-27T03:16:39.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/13149#issuecomment-360955831","id":360955831,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/13149","node_id":"MDEyOklzc3VlQ29tbWVudDM2MDk1NTgzMQ==","updated_at":"2018-01-27T03:16:39.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/360955831","user":{"following_url":"https:\/\/api.github.com\/users\/sunag\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/sunag\/events{\/privacy}","avatar_url":"https:\/\/avatars0.githubusercontent.com\/u\/502810?v=4","url":"https:\/\/api.github.com\/users\/sunag","gists_url":"https:\/\/api.github.com\/users\/sunag\/gists{\/gist_id}","html_url":"https:\/\/github.com\/sunag","subscriptions_url":"https:\/\/api.github.com\/users\/sunag\/subscriptions","node_id":"MDQ6VXNlcjUwMjgxMA==","repos_url":"https:\/\/api.github.com\/users\/sunag\/repos","received_events_url":"https:\/\/api.github.com\/users\/sunag\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/sunag\/starred{\/owner}{\/repo}","site_admin":false,"login":"sunag","type":"User","id":502810,"followers_url":"https:\/\/api.github.com\/users\/sunag\/followers","organizations_url":"https:\/\/api.github.com\/users\/sunag\/orgs"}},{"index":2,"author_association":"CONTRIBUTOR","body":"I am of the opinion that the node material should always use either phong or physical\/standard as a base.  The nodes should just be used for dynamically filling in the colors into the slots already provided by phong\/physical\/standard.\r\n\r\nThus what I would do is to separate out the fulfilling of the material structure to either be fixed function or use the node-based material.  Thus I wouldn't change the phong or the physical light templates, but rather the stuff just before them.\r\n\r\nI think you do not want to change BRDFs (e.g. phong\/physical), rather just the parameters to them.","created_at":"2018-01-29T14:17:43.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/13149#issuecomment-361258624","id":361258624,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/13149","node_id":"MDEyOklzc3VlQ29tbWVudDM2MTI1ODYyNA==","updated_at":"2018-01-29T14:17:43.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/361258624","user":{"following_url":"https:\/\/api.github.com\/users\/bhouston\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/bhouston\/events{\/privacy}","avatar_url":"https:\/\/avatars3.githubusercontent.com\/u\/588541?v=4","url":"https:\/\/api.github.com\/users\/bhouston","gists_url":"https:\/\/api.github.com\/users\/bhouston\/gists{\/gist_id}","html_url":"https:\/\/github.com\/bhouston","subscriptions_url":"https:\/\/api.github.com\/users\/bhouston\/subscriptions","node_id":"MDQ6VXNlcjU4ODU0MQ==","repos_url":"https:\/\/api.github.com\/users\/bhouston\/repos","received_events_url":"https:\/\/api.github.com\/users\/bhouston\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/bhouston\/starred{\/owner}{\/repo}","site_admin":false,"login":"bhouston","type":"User","id":588541,"followers_url":"https:\/\/api.github.com\/users\/bhouston\/followers","organizations_url":"https:\/\/api.github.com\/users\/bhouston\/orgs"}},{"index":3,"author_association":"CONTRIBUTOR","body":"> I think you do not want to change BRDFs (e.g. phong\/physical), rather just the parameters to them.\r\n\r\nThe idea is the same. The problem is that `WebGLRenderer` uses material properties for example `mtl.envMap` to add `varys` and `uniforms` and this is incompatible.\r\n\r\nAll `USE_`... definitions must be done automatically with nodes. This is already integrated part in `NodeMaterial`\r\nhttps:\/\/github.com\/mrdoob\/three.js\/blob\/949690710f25127869a60a3762b638feb0c60c0c\/src\/renderers\/webgl\/WebGLProgram.js#L337\r\n\r\nIt is accordingly non `light_template` (light shader system) should mix some slot input of a parameterized material, for example `USE_ENV`. but a empty area to add whatever you wish, e.g: `env map`, `light probe` and others custom environments nodes... The current `NodeMaterial ` already works this way.\r\n\r\nAfter the node-based be the current material system we can remove `lights_maps_fragment` and modify `lights_physical_pars_fragment` but keep the `lights_fragment` and `lights_apply_fragment` and all BRDFs code.\r\n\r\nIt is necessary to convert all others materials to node-based in core: `MeshDistanceMaterial`, `MeshDepthMaterial`, `MeshNormalMaterial`...\r\n\r\nAll `refreshUniforms` by some exception such as `refreshUniformsFog` and use of slots of parameterized materials to add `varys` must be removed to avoid holes.\r\nhttps:\/\/github.com\/mrdoob\/three.js\/blob\/1b1806eb83cb783bbe62b6b1db9aab92b1db1056\/src\/renderers\/WebGLRenderer.js#L1792\r\n\r\nhttps:\/\/github.com\/mrdoob\/three.js\/blob\/1b1806eb83cb783bbe62b6b1db9aab92b1db1056\/src\/renderers\/WebGLRenderer.js#L1679\r\n\r\nOf all changes this PR is less impacting.","created_at":"2018-01-29T16:48:14.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/13149#issuecomment-361308484","id":361308484,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/13149","node_id":"MDEyOklzc3VlQ29tbWVudDM2MTMwODQ4NA==","updated_at":"2018-01-29T20:08:00.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/361308484","user":{"following_url":"https:\/\/api.github.com\/users\/sunag\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/sunag\/events{\/privacy}","avatar_url":"https:\/\/avatars0.githubusercontent.com\/u\/502810?v=4","url":"https:\/\/api.github.com\/users\/sunag","gists_url":"https:\/\/api.github.com\/users\/sunag\/gists{\/gist_id}","html_url":"https:\/\/github.com\/sunag","subscriptions_url":"https:\/\/api.github.com\/users\/sunag\/subscriptions","node_id":"MDQ6VXNlcjUwMjgxMA==","repos_url":"https:\/\/api.github.com\/users\/sunag\/repos","received_events_url":"https:\/\/api.github.com\/users\/sunag\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/sunag\/starred{\/owner}{\/repo}","site_admin":false,"login":"sunag","type":"User","id":502810,"followers_url":"https:\/\/api.github.com\/users\/sunag\/followers","organizations_url":"https:\/\/api.github.com\/users\/sunag\/orgs"}},{"index":4,"author_association":"CONTRIBUTOR","body":"This is not definitive but I think it will be like this:\r\n\r\nFile | Change\r\n------------ | -------------\r\nalphamap_fragment.glsl | Remove - build in NodeMaterial\r\nalphamap_pars_fragment.glsl | Remove - build in NodeMaterial\r\nalphatest_fragment.glsl | Remove - build in NodeMaterial\r\naomap_fragment.glsl | Removed - Code added in CustomShaderNode\r\nbegin_vertex.glsl | Keep\r\nbeginnormal_vertex.glsl | Keep\r\nbsdfs.glsl | Keep\r\nbumpmap_pars_fragment.glsl | Convert to node\r\nclipping_planes_fragment.glsl | Keep\r\nclipping_planes_pars_fragment.glsl | Keep\r\nclipping_planes_pars_vertex.glsl | Keep\r\nclipping_planes_vertex.glsl | Keep\r\ncolor_fragment.glsl | Remove - build in NodeMaterial\r\ncolor_pars_fragment.glsl | Remove - build in NodeMaterial\r\ncolor_vertex.glsl | Remove - build in NodeMaterial\r\ncommon.glsl | Keep\r\ncube_uv_reflection_fragment.glsl | Keep with changes in renderer or convert to node\r\ndefaultnormal_vertex.glsl | Keep\r\ndisplacementmap_pars_vertex.glsl | Remove - build in NodeMaterial\r\ndisplacementmap_vertex.glsl | Remove - build in NodeMaterial\r\ndisplacementmap_pars_vertex.glsl | Remove - build in NodeMaterial\r\ndisplacementmap_vertex.glsl |  Remove - build in NodeMaterial\r\ndithering_fragment.glsl |  Keep\r\ndithering_pars_fragment.glsl |  Keep\r\nemissivemap_fragment.glsl |  Remove - build in NodeMaterial\r\nemissivemap_pars_fragment.glsl |  Remove - build in NodeMaterial\r\nencodings_fragment.glsl |  Keep\r\nencodings_pars_fragment.glsl | Keep\r\nenvmap_fragment.glsl |  Remove - build in NodeMaterial\r\nenvmap_pars_vertex.glsl |  Remove - build in NodeMaterial\r\nenvmap_vertex.glsl |  Remove - build in NodeMaterial\r\nfog_fragment.glsl |  Keep\r\nfog_pars_fragment.glsl |  Keep\r\nfog_pars_vertex.glsl |  Keep\r\nfog_vertex.glsl |  Keep\r\nfog_fragment.glsl |  Keep\r\ngradientmap_pars_fragment.glsl |  Remove - build in NodeMaterial\r\nlightmap_fragment.glsl |  Remove - build in NodeMaterial\r\nlightmap_pars_fragment.glsl |  Remove - build in NodeMaterial\r\nlights_pars.glsl | ** **Keep with changes, this PR**\r\nlights_phong_fragment.glsl |  Keep\r\nlights_phong_pars_fragment.glsl |  Keep\r\nlights_physical_fragment.glsl |  Keep\r\nlights_physical_pars_fragment.glsl | Keep\r\nlights_template.glsl | ** **Keep with changes, this PR**\r\nlogdepthbuf_fragment.glsl | Keep\r\nlogdepthbuf_pars_fragment.glsl | Keep\r\nlogdepthbuf_pars_vertex.glsl | Keep\r\nlogdepthbuf_vertex.glsl | Keep\r\nmap_fragment.glsl | Remove - build in NodeMaterial\r\nmap_particle_fragment.glsl | Remove - build in NodeMaterial\r\nmap_particle_pars_fragment.glsl | Remove - build in NodeMaterial\r\nmetalnessmap_fragment.glsl | Remove - build in NodeMaterial\r\nmetalnessmap_pars_fragment.glsl | Remove - build in NodeMaterial\r\nmorphnormal_vertex.glsl | Keep\r\nmorphtarget_pars_vertex.glsl | Keep\r\nmorphtarget_vertex.glsl | Keep\r\nnormal_fragment.glsl | Keep\r\nnormalmap_pars_fragment.glsl | Convert to node\r\npacking.glsl | Keep\r\npremultiplied_alpha_fragment.glsl | Keep\r\nproject_vertex.glsl | Keep\r\nroughnessmap_fragment.glsl | Remove - build in NodeMaterial\r\nroughnessmap_pars_fragment.glsl | Remove - build in NodeMaterial\r\nshadowmap_pars_fragment.glsl | Keep\r\nshadowmap_pars_vertex.glsl | Keep\r\nshadowmap_vertex.glsl | Keep\r\nshadowmask_pars_fragment.glsl | Keep\r\nskinbase_vertex.glsl | Keep\r\nskinning_pars_vertex.glsl | Keep\r\nskinning_vertex.glsl | Keep\r\nskinnormal_vertex.glsl | Keep\r\nspecularmap_fragment.glsl | Remove - build in NodeMaterial\r\nspecularmap_pars_fragment.glsl | Remove - build in NodeMaterial\r\nspecularmap_fragment.glsl | Remove - build in NodeMaterial\r\ntonemapping_fragment.glsl | Keep\r\ntonemapping_pars_fragment.glsl | Keep \t \t\r\nuv2_pars_fragment.glsl | Remove - build in NodeMaterial\r\nuv2_pars_vertex.glsl | Remove - build in NodeMaterial\r\nuv2_vertex.glsl | Remove - build in NodeMaterial\r\nuv_pars_fragment.glsl | Remove - build in NodeMaterial\r\nuv_pars_vertex.glsl| Remove - build in NodeMaterial\r\nworldpos_vertex.glsl | Keep with changes\r\n\r\n","created_at":"2018-01-29T17:58:16.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/13149#issuecomment-361330646","id":361330646,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/13149","node_id":"MDEyOklzc3VlQ29tbWVudDM2MTMzMDY0Ng==","updated_at":"2018-01-29T22:40:35.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/361330646","user":{"following_url":"https:\/\/api.github.com\/users\/sunag\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/sunag\/events{\/privacy}","avatar_url":"https:\/\/avatars0.githubusercontent.com\/u\/502810?v=4","url":"https:\/\/api.github.com\/users\/sunag","gists_url":"https:\/\/api.github.com\/users\/sunag\/gists{\/gist_id}","html_url":"https:\/\/github.com\/sunag","subscriptions_url":"https:\/\/api.github.com\/users\/sunag\/subscriptions","node_id":"MDQ6VXNlcjUwMjgxMA==","repos_url":"https:\/\/api.github.com\/users\/sunag\/repos","received_events_url":"https:\/\/api.github.com\/users\/sunag\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/sunag\/starred{\/owner}{\/repo}","site_admin":false,"login":"sunag","type":"User","id":502810,"followers_url":"https:\/\/api.github.com\/users\/sunag\/followers","organizations_url":"https:\/\/api.github.com\/users\/sunag\/orgs"}},{"index":5,"author_association":"COLLABORATOR","body":"@sunag Major changes like this will not be merged until @mrdoob is ready to do so, and that can take some time. So, another approach you can consider is to just add an example that shows how to create `MeshStandardNodeMaterial` and `MeshStandardNodeMaterialExtended`, a modified version of the same material. This will not require any changes to the core library, but can serve as a first step... Just a thought...","created_at":"2018-01-29T22:52:50.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/13149#issuecomment-361414973","id":361414973,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/13149","node_id":"MDEyOklzc3VlQ29tbWVudDM2MTQxNDk3Mw==","updated_at":"2018-01-29T22:52:50.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/361414973","user":{"following_url":"https:\/\/api.github.com\/users\/WestLangley\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/WestLangley\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/1000017?v=4","url":"https:\/\/api.github.com\/users\/WestLangley","gists_url":"https:\/\/api.github.com\/users\/WestLangley\/gists{\/gist_id}","html_url":"https:\/\/github.com\/WestLangley","subscriptions_url":"https:\/\/api.github.com\/users\/WestLangley\/subscriptions","node_id":"MDQ6VXNlcjEwMDAwMTc=","repos_url":"https:\/\/api.github.com\/users\/WestLangley\/repos","received_events_url":"https:\/\/api.github.com\/users\/WestLangley\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/WestLangley\/starred{\/owner}{\/repo}","site_admin":false,"login":"WestLangley","type":"User","id":1000017,"followers_url":"https:\/\/api.github.com\/users\/WestLangley\/followers","organizations_url":"https:\/\/api.github.com\/users\/WestLangley\/orgs"}},{"index":6,"author_association":"CONTRIBUTOR","body":"@WestLangley Yeah! but anyway this change will be necessary otherwise I will have to rewrite a lot of code.","created_at":"2018-01-29T23:06:35.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/13149#issuecomment-361418202","id":361418202,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/13149","node_id":"MDEyOklzc3VlQ29tbWVudDM2MTQxODIwMg==","updated_at":"2018-01-29T23:06:35.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/361418202","user":{"following_url":"https:\/\/api.github.com\/users\/sunag\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/sunag\/events{\/privacy}","avatar_url":"https:\/\/avatars0.githubusercontent.com\/u\/502810?v=4","url":"https:\/\/api.github.com\/users\/sunag","gists_url":"https:\/\/api.github.com\/users\/sunag\/gists{\/gist_id}","html_url":"https:\/\/github.com\/sunag","subscriptions_url":"https:\/\/api.github.com\/users\/sunag\/subscriptions","node_id":"MDQ6VXNlcjUwMjgxMA==","repos_url":"https:\/\/api.github.com\/users\/sunag\/repos","received_events_url":"https:\/\/api.github.com\/users\/sunag\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/sunag\/starred{\/owner}{\/repo}","site_admin":false,"login":"sunag","type":"User","id":502810,"followers_url":"https:\/\/api.github.com\/users\/sunag\/followers","organizations_url":"https:\/\/api.github.com\/users\/sunag\/orgs"}},{"index":7,"author_association":"CONTRIBUTOR","body":"@WestLangley @bhouston @mrdoob I did not any change in behavior only in `webgl_materials_nodes` example but I fix this in other PR.","created_at":"2018-01-29T23:34:13.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/13149#issuecomment-361424199","id":361424199,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/13149","node_id":"MDEyOklzc3VlQ29tbWVudDM2MTQyNDE5OQ==","updated_at":"2018-01-29T23:34:13.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/361424199","user":{"following_url":"https:\/\/api.github.com\/users\/sunag\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/sunag\/events{\/privacy}","avatar_url":"https:\/\/avatars0.githubusercontent.com\/u\/502810?v=4","url":"https:\/\/api.github.com\/users\/sunag","gists_url":"https:\/\/api.github.com\/users\/sunag\/gists{\/gist_id}","html_url":"https:\/\/github.com\/sunag","subscriptions_url":"https:\/\/api.github.com\/users\/sunag\/subscriptions","node_id":"MDQ6VXNlcjUwMjgxMA==","repos_url":"https:\/\/api.github.com\/users\/sunag\/repos","received_events_url":"https:\/\/api.github.com\/users\/sunag\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/sunag\/starred{\/owner}{\/repo}","site_admin":false,"login":"sunag","type":"User","id":502810,"followers_url":"https:\/\/api.github.com\/users\/sunag\/followers","organizations_url":"https:\/\/api.github.com\/users\/sunag\/orgs"}},{"index":8,"author_association":"CONTRIBUTOR","body":"or even here if you wish?","created_at":"2018-01-29T23:37:11.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/13149#issuecomment-361424798","id":361424798,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/13149","node_id":"MDEyOklzc3VlQ29tbWVudDM2MTQyNDc5OA==","updated_at":"2018-01-29T23:37:11.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/361424798","user":{"following_url":"https:\/\/api.github.com\/users\/sunag\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/sunag\/events{\/privacy}","avatar_url":"https:\/\/avatars0.githubusercontent.com\/u\/502810?v=4","url":"https:\/\/api.github.com\/users\/sunag","gists_url":"https:\/\/api.github.com\/users\/sunag\/gists{\/gist_id}","html_url":"https:\/\/github.com\/sunag","subscriptions_url":"https:\/\/api.github.com\/users\/sunag\/subscriptions","node_id":"MDQ6VXNlcjUwMjgxMA==","repos_url":"https:\/\/api.github.com\/users\/sunag\/repos","received_events_url":"https:\/\/api.github.com\/users\/sunag\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/sunag\/starred{\/owner}{\/repo}","site_admin":false,"login":"sunag","type":"User","id":502810,"followers_url":"https:\/\/api.github.com\/users\/sunag\/followers","organizations_url":"https:\/\/api.github.com\/users\/sunag\/orgs"}},{"index":9,"author_association":"CONTRIBUTOR","body":"> So, another approach you can consider is to just add an example that shows how to create MeshStandardNodeMaterial and MeshStandardNodeMaterialExtended, a modified version of the same material. This will not require any changes to the core library, but can serve as a first step... \r\n\r\nThe reason I write a lot of code is related with this:\r\n\r\nhttps:\/\/github.com\/mrdoob\/three.js\/blob\/35a26f178c523514673d992da1aece23c1cfca6e\/src\/renderers\/webgl\/WebGLPrograms.js#L141\r\n\r\nThis PR fix the \"duplicated\" use of `USE_ENVMAP` in `lights_template` and `lights_pars` for nodes and could reuse the native code with node-material proxy, e.g: `MeshStandardNodeMaterial` using the sames `properties names` of the current materials.\r\n\r\nIn this example:\r\n\r\nhttps:\/\/github.com\/mrdoob\/three.js\/blob\/eb15d8160d22720d1ee9f3a500b2fc80b373f6c7\/examples\/webgl_materials_nodes.html#L371\r\n\r\nAdd this line code:\r\n```javascript\r\nmtl.envMap = getTexture( \"decalDiffuse\" );\r\n```\r\nThis crash the shader because add `USE_ENVMAP`  automatically if the `prop` `envMap` is used\r\n","created_at":"2018-01-30T00:23:55.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/13149#issuecomment-361433708","id":361433708,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/13149","node_id":"MDEyOklzc3VlQ29tbWVudDM2MTQzMzcwOA==","updated_at":"2018-01-30T16:06:01.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/361433708","user":{"following_url":"https:\/\/api.github.com\/users\/sunag\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/sunag\/events{\/privacy}","avatar_url":"https:\/\/avatars0.githubusercontent.com\/u\/502810?v=4","url":"https:\/\/api.github.com\/users\/sunag","gists_url":"https:\/\/api.github.com\/users\/sunag\/gists{\/gist_id}","html_url":"https:\/\/github.com\/sunag","subscriptions_url":"https:\/\/api.github.com\/users\/sunag\/subscriptions","node_id":"MDQ6VXNlcjUwMjgxMA==","repos_url":"https:\/\/api.github.com\/users\/sunag\/repos","received_events_url":"https:\/\/api.github.com\/users\/sunag\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/sunag\/starred{\/owner}{\/repo}","site_admin":false,"login":"sunag","type":"User","id":502810,"followers_url":"https:\/\/api.github.com\/users\/sunag\/followers","organizations_url":"https:\/\/api.github.com\/users\/sunag\/orgs"}},{"index":10,"author_association":"CONTRIBUTOR","body":"What do you think? I can make a new PR or do you have some other idea?","created_at":"2018-02-07T21:24:43.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/13149#issuecomment-363915625","id":363915625,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/13149","node_id":"MDEyOklzc3VlQ29tbWVudDM2MzkxNTYyNQ==","updated_at":"2018-02-07T21:24:43.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/363915625","user":{"following_url":"https:\/\/api.github.com\/users\/sunag\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/sunag\/events{\/privacy}","avatar_url":"https:\/\/avatars0.githubusercontent.com\/u\/502810?v=4","url":"https:\/\/api.github.com\/users\/sunag","gists_url":"https:\/\/api.github.com\/users\/sunag\/gists{\/gist_id}","html_url":"https:\/\/github.com\/sunag","subscriptions_url":"https:\/\/api.github.com\/users\/sunag\/subscriptions","node_id":"MDQ6VXNlcjUwMjgxMA==","repos_url":"https:\/\/api.github.com\/users\/sunag\/repos","received_events_url":"https:\/\/api.github.com\/users\/sunag\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/sunag\/starred{\/owner}{\/repo}","site_admin":false,"login":"sunag","type":"User","id":502810,"followers_url":"https:\/\/api.github.com\/users\/sunag\/followers","organizations_url":"https:\/\/api.github.com\/users\/sunag\/orgs"}},{"index":11,"author_association":"COLLABORATOR","body":"Sorry, I do not have any further suggestions at this time...","created_at":"2018-02-07T22:10:21.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/13149#issuecomment-363928045","id":363928045,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/13149","node_id":"MDEyOklzc3VlQ29tbWVudDM2MzkyODA0NQ==","updated_at":"2018-02-07T22:10:21.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/363928045","user":{"following_url":"https:\/\/api.github.com\/users\/WestLangley\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/WestLangley\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/1000017?v=4","url":"https:\/\/api.github.com\/users\/WestLangley","gists_url":"https:\/\/api.github.com\/users\/WestLangley\/gists{\/gist_id}","html_url":"https:\/\/github.com\/WestLangley","subscriptions_url":"https:\/\/api.github.com\/users\/WestLangley\/subscriptions","node_id":"MDQ6VXNlcjEwMDAwMTc=","repos_url":"https:\/\/api.github.com\/users\/WestLangley\/repos","received_events_url":"https:\/\/api.github.com\/users\/WestLangley\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/WestLangley\/starred{\/owner}{\/repo}","site_admin":false,"login":"WestLangley","type":"User","id":1000017,"followers_url":"https:\/\/api.github.com\/users\/WestLangley\/followers","organizations_url":"https:\/\/api.github.com\/users\/WestLangley\/orgs"}},{"index":12,"author_association":"CONTRIBUTOR","body":"I do support node materials being in core and replacing our current system as long as the root nodes are true BRDFs.  So if this is on the way to that goal, I support it.  @sunag has been a three.js contributor for a while and produces great code so I would trust him here.  I know how hard it is to get major changes accepted into Three.JS even when they are good ones, one has to fight for them.","created_at":"2018-02-08T14:01:14.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/13149#issuecomment-364119764","id":364119764,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/13149","node_id":"MDEyOklzc3VlQ29tbWVudDM2NDExOTc2NA==","updated_at":"2018-02-08T14:01:14.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/364119764","user":{"following_url":"https:\/\/api.github.com\/users\/bhouston\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/bhouston\/events{\/privacy}","avatar_url":"https:\/\/avatars3.githubusercontent.com\/u\/588541?v=4","url":"https:\/\/api.github.com\/users\/bhouston","gists_url":"https:\/\/api.github.com\/users\/bhouston\/gists{\/gist_id}","html_url":"https:\/\/github.com\/bhouston","subscriptions_url":"https:\/\/api.github.com\/users\/bhouston\/subscriptions","node_id":"MDQ6VXNlcjU4ODU0MQ==","repos_url":"https:\/\/api.github.com\/users\/bhouston\/repos","received_events_url":"https:\/\/api.github.com\/users\/bhouston\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/bhouston\/starred{\/owner}{\/repo}","site_admin":false,"login":"bhouston","type":"User","id":588541,"followers_url":"https:\/\/api.github.com\/users\/bhouston\/followers","organizations_url":"https:\/\/api.github.com\/users\/bhouston\/orgs"}},{"index":13,"author_association":"CONTRIBUTOR","body":"@WestLangley @bhouston Thank you very much for the answers and support. \r\nI created a new PR https:\/\/github.com\/mrdoob\/three.js\/pull\/13277 more simplified and fix conflicts of this PR.\r\n\r\nIn parallel I am already converting NodeMaterial to ES6:\r\nhttps:\/\/github.com\/sunag\/three.js\/tree\/90dev-nodes\/src\/nodes","created_at":"2018-02-08T16:10:59.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/13149#issuecomment-364161313","id":364161313,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/13149","node_id":"MDEyOklzc3VlQ29tbWVudDM2NDE2MTMxMw==","updated_at":"2018-02-08T16:10:59.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/364161313","user":{"following_url":"https:\/\/api.github.com\/users\/sunag\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/sunag\/events{\/privacy}","avatar_url":"https:\/\/avatars0.githubusercontent.com\/u\/502810?v=4","url":"https:\/\/api.github.com\/users\/sunag","gists_url":"https:\/\/api.github.com\/users\/sunag\/gists{\/gist_id}","html_url":"https:\/\/github.com\/sunag","subscriptions_url":"https:\/\/api.github.com\/users\/sunag\/subscriptions","node_id":"MDQ6VXNlcjUwMjgxMA==","repos_url":"https:\/\/api.github.com\/users\/sunag\/repos","received_events_url":"https:\/\/api.github.com\/users\/sunag\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/sunag\/starred{\/owner}{\/repo}","site_admin":false,"login":"sunag","type":"User","id":502810,"followers_url":"https:\/\/api.github.com\/users\/sunag\/followers","organizations_url":"https:\/\/api.github.com\/users\/sunag\/orgs"}}]}