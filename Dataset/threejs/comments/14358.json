{"schema": {"fields":[{"type":"integer","name":"index"},{"type":"string","name":"author_association"},{"type":"string","name":"body"},{"type":"datetime","name":"created_at"},{"type":"string","name":"html_url"},{"type":"integer","name":"id"},{"type":"string","name":"issue_url"},{"type":"string","name":"node_id"},{"type":"datetime","name":"updated_at"},{"type":"string","name":"url"},{"type":"string","name":"user"}],"pandas_version":"0.20.0","primaryKey":["index"]}, "data": [{"index":0,"author_association":"COLLABORATOR","body":"> In the end, I think making .drawRange not linear at it is right now would make it more powerful and versatile.\r\n\r\nBut this would also make the implementation more complex. Not just the in context of rendering but also in other areas like raycasting for meshes (which supports `.drawRange`). At least for now, I vote to keep the code like it is and fix other open issues in context of `.drawRange`. For example, raycasting against lines or points still don't consider `.drawRange` (#8479).","created_at":"2018-06-24T15:34:24.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/14358#issuecomment-399765278","id":399765278,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/14358","node_id":"MDEyOklzc3VlQ29tbWVudDM5OTc2NTI3OA==","updated_at":"2018-06-24T16:03:16.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/399765278","user":{"following_url":"https:\/\/api.github.com\/users\/Mugen87\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/Mugen87\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/12612165?v=4","url":"https:\/\/api.github.com\/users\/Mugen87","gists_url":"https:\/\/api.github.com\/users\/Mugen87\/gists{\/gist_id}","html_url":"https:\/\/github.com\/Mugen87","subscriptions_url":"https:\/\/api.github.com\/users\/Mugen87\/subscriptions","node_id":"MDQ6VXNlcjEyNjEyMTY1","repos_url":"https:\/\/api.github.com\/users\/Mugen87\/repos","received_events_url":"https:\/\/api.github.com\/users\/Mugen87\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/Mugen87\/starred{\/owner}{\/repo}","site_admin":false,"login":"Mugen87","type":"User","id":12612165,"followers_url":"https:\/\/api.github.com\/users\/Mugen87\/followers","organizations_url":"https:\/\/api.github.com\/users\/Mugen87\/orgs"}},{"index":1,"author_association":"NONE","body":"> At least for now, I vote to keep the code like it is and fix other open issues in context of .drawRange. For example, raycasting against lines or points still don't consider .drawRange at all (#8479).\r\n\r\n\r\nI agree it make sense to fix those issues beforehand. \r\n","created_at":"2018-06-24T16:07:05.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/14358#issuecomment-399767405","id":399767405,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/14358","node_id":"MDEyOklzc3VlQ29tbWVudDM5OTc2NzQwNQ==","updated_at":"2018-06-24T16:43:41.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/399767405","user":{"following_url":"https:\/\/api.github.com\/users\/zaykho\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/zaykho\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/6943022?v=4","url":"https:\/\/api.github.com\/users\/zaykho","gists_url":"https:\/\/api.github.com\/users\/zaykho\/gists{\/gist_id}","html_url":"https:\/\/github.com\/zaykho","subscriptions_url":"https:\/\/api.github.com\/users\/zaykho\/subscriptions","node_id":"MDQ6VXNlcjY5NDMwMjI=","repos_url":"https:\/\/api.github.com\/users\/zaykho\/repos","received_events_url":"https:\/\/api.github.com\/users\/zaykho\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/zaykho\/starred{\/owner}{\/repo}","site_admin":false,"login":"zaykho","type":"User","id":6943022,"followers_url":"https:\/\/api.github.com\/users\/zaykho\/followers","organizations_url":"https:\/\/api.github.com\/users\/zaykho\/orgs"}},{"index":2,"author_association":"COLLABORATOR","body":"@zaykho Any chances you provide a PR with your original suggestion (`drawRange` with multiple entries)? This will make it easier to understand the impact\/consequences of such a change.","created_at":"2018-06-24T17:45:10.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/14358#issuecomment-399774084","id":399774084,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/14358","node_id":"MDEyOklzc3VlQ29tbWVudDM5OTc3NDA4NA==","updated_at":"2018-06-24T17:45:10.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/399774084","user":{"following_url":"https:\/\/api.github.com\/users\/Mugen87\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/Mugen87\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/12612165?v=4","url":"https:\/\/api.github.com\/users\/Mugen87","gists_url":"https:\/\/api.github.com\/users\/Mugen87\/gists{\/gist_id}","html_url":"https:\/\/github.com\/Mugen87","subscriptions_url":"https:\/\/api.github.com\/users\/Mugen87\/subscriptions","node_id":"MDQ6VXNlcjEyNjEyMTY1","repos_url":"https:\/\/api.github.com\/users\/Mugen87\/repos","received_events_url":"https:\/\/api.github.com\/users\/Mugen87\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/Mugen87\/starred{\/owner}{\/repo}","site_admin":false,"login":"Mugen87","type":"User","id":12612165,"followers_url":"https:\/\/api.github.com\/users\/Mugen87\/followers","organizations_url":"https:\/\/api.github.com\/users\/Mugen87\/orgs"}},{"index":3,"author_association":"NONE","body":"@Mugen87 I'm actually doing some test with it right now. I soon as I get a working\/stable version I will post it.","created_at":"2018-06-24T18:00:32.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/14358#issuecomment-399775143","id":399775143,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/14358","node_id":"MDEyOklzc3VlQ29tbWVudDM5OTc3NTE0Mw==","updated_at":"2018-06-24T18:00:49.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/399775143","user":{"following_url":"https:\/\/api.github.com\/users\/zaykho\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/zaykho\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/6943022?v=4","url":"https:\/\/api.github.com\/users\/zaykho","gists_url":"https:\/\/api.github.com\/users\/zaykho\/gists{\/gist_id}","html_url":"https:\/\/github.com\/zaykho","subscriptions_url":"https:\/\/api.github.com\/users\/zaykho\/subscriptions","node_id":"MDQ6VXNlcjY5NDMwMjI=","repos_url":"https:\/\/api.github.com\/users\/zaykho\/repos","received_events_url":"https:\/\/api.github.com\/users\/zaykho\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/zaykho\/starred{\/owner}{\/repo}","site_admin":false,"login":"zaykho","type":"User","id":6943022,"followers_url":"https:\/\/api.github.com\/users\/zaykho\/followers","organizations_url":"https:\/\/api.github.com\/users\/zaykho\/orgs"}},{"index":4,"author_association":"COLLABORATOR","body":"@zaykho Why can't you use `groups` in your app, instead of `drawRange`?\r\n```javascript\r\nvar mesh = new THREE.Mesh( geometry, [ material ] );\r\n````","created_at":"2018-06-24T23:43:03.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/14358#issuecomment-399798426","id":399798426,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/14358","node_id":"MDEyOklzc3VlQ29tbWVudDM5OTc5ODQyNg==","updated_at":"2018-06-24T23:43:03.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/399798426","user":{"following_url":"https:\/\/api.github.com\/users\/WestLangley\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/WestLangley\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/1000017?v=4","url":"https:\/\/api.github.com\/users\/WestLangley","gists_url":"https:\/\/api.github.com\/users\/WestLangley\/gists{\/gist_id}","html_url":"https:\/\/github.com\/WestLangley","subscriptions_url":"https:\/\/api.github.com\/users\/WestLangley\/subscriptions","node_id":"MDQ6VXNlcjEwMDAwMTc=","repos_url":"https:\/\/api.github.com\/users\/WestLangley\/repos","received_events_url":"https:\/\/api.github.com\/users\/WestLangley\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/WestLangley\/starred{\/owner}{\/repo}","site_admin":false,"login":"WestLangley","type":"User","id":1000017,"followers_url":"https:\/\/api.github.com\/users\/WestLangley\/followers","organizations_url":"https:\/\/api.github.com\/users\/WestLangley\/orgs"}},{"index":5,"author_association":"NONE","body":"@WestLangley Because I use  a `.ShaderMaterial` with a texture atlas (40 subtextures).\r\n\r\nBut even if I was making `groups`, I wouldn't be able to manually manage what being rendered or not (since `groups` only affect material isn't it ?) ?","created_at":"2018-06-25T07:42:24.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/14358#issuecomment-399861531","id":399861531,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/14358","node_id":"MDEyOklzc3VlQ29tbWVudDM5OTg2MTUzMQ==","updated_at":"2018-06-25T07:42:24.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/399861531","user":{"following_url":"https:\/\/api.github.com\/users\/zaykho\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/zaykho\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/6943022?v=4","url":"https:\/\/api.github.com\/users\/zaykho","gists_url":"https:\/\/api.github.com\/users\/zaykho\/gists{\/gist_id}","html_url":"https:\/\/github.com\/zaykho","subscriptions_url":"https:\/\/api.github.com\/users\/zaykho\/subscriptions","node_id":"MDQ6VXNlcjY5NDMwMjI=","repos_url":"https:\/\/api.github.com\/users\/zaykho\/repos","received_events_url":"https:\/\/api.github.com\/users\/zaykho\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/zaykho\/starred{\/owner}{\/repo}","site_admin":false,"login":"zaykho","type":"User","id":6943022,"followers_url":"https:\/\/api.github.com\/users\/zaykho\/followers","organizations_url":"https:\/\/api.github.com\/users\/zaykho\/orgs"}},{"index":6,"author_association":"NONE","body":"@Mugen87  ok so for the moment, I end up with this line of code for rendering multiple entries of `.drawRange` : \r\n\r\n```\t\t\r\nfunction render( start, count, start_2, count_2 ) {\r\n\r\n\t\t\tgl.drawArrays( mode, start, count );\r\n\t\t\tgl.drawArrays( mode, start_2, count_2  );\r\n\r\n\t\t\tinfo.update( count + count_2, mode );\r\n\r\n\t\t}\r\n```\r\n\r\nObliviously, I have set the `start_2`  `count_2` earlier in the code (for testing purpose, I made it hardcoded) , but before going further, I'm trying to find a way to avoid throwing multiple gl.drawArrays for each entries. \r\n\r\nIf I can't find a better way, I will just provide the whole code change with a PR ( and of course, not make it hardcoded ).","created_at":"2018-06-25T10:19:40.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/14358#issuecomment-399903776","id":399903776,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/14358","node_id":"MDEyOklzc3VlQ29tbWVudDM5OTkwMzc3Ng==","updated_at":"2018-06-25T10:20:50.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/399903776","user":{"following_url":"https:\/\/api.github.com\/users\/zaykho\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/zaykho\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/6943022?v=4","url":"https:\/\/api.github.com\/users\/zaykho","gists_url":"https:\/\/api.github.com\/users\/zaykho\/gists{\/gist_id}","html_url":"https:\/\/github.com\/zaykho","subscriptions_url":"https:\/\/api.github.com\/users\/zaykho\/subscriptions","node_id":"MDQ6VXNlcjY5NDMwMjI=","repos_url":"https:\/\/api.github.com\/users\/zaykho\/repos","received_events_url":"https:\/\/api.github.com\/users\/zaykho\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/zaykho\/starred{\/owner}{\/repo}","site_admin":false,"login":"zaykho","type":"User","id":6943022,"followers_url":"https:\/\/api.github.com\/users\/zaykho\/followers","organizations_url":"https:\/\/api.github.com\/users\/zaykho\/orgs"}},{"index":7,"author_association":"NONE","body":"Well, there is : [`glMultiDrawArrays\u200b`](https:\/\/www.khronos.org\/registry\/OpenGL-Refpages\/gl2.1\/xhtml\/glMultiDrawElements.xml)\r\n\r\nhttp:\/\/programming4.us\/multimedia\/8302.aspx\r\n\r\nBut it's unfortunately not available for webgl.\r\n","created_at":"2018-06-25T12:14:13.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/14358#issuecomment-399930306","id":399930306,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/14358","node_id":"MDEyOklzc3VlQ29tbWVudDM5OTkzMDMwNg==","updated_at":"2018-06-25T12:14:13.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/399930306","user":{"following_url":"https:\/\/api.github.com\/users\/zaykho\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/zaykho\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/6943022?v=4","url":"https:\/\/api.github.com\/users\/zaykho","gists_url":"https:\/\/api.github.com\/users\/zaykho\/gists{\/gist_id}","html_url":"https:\/\/github.com\/zaykho","subscriptions_url":"https:\/\/api.github.com\/users\/zaykho\/subscriptions","node_id":"MDQ6VXNlcjY5NDMwMjI=","repos_url":"https:\/\/api.github.com\/users\/zaykho\/repos","received_events_url":"https:\/\/api.github.com\/users\/zaykho\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/zaykho\/starred{\/owner}{\/repo}","site_admin":false,"login":"zaykho","type":"User","id":6943022,"followers_url":"https:\/\/api.github.com\/users\/zaykho\/followers","organizations_url":"https:\/\/api.github.com\/users\/zaykho\/orgs"}},{"index":8,"author_association":"CONTRIBUTOR","body":"My 2 satoshis:\r\n* Having multiple draw ranges runs risk of having a sub-par performance. Perhaps efficiency should be considered early on. Here's my suggestion on this matter:\r\n  * Don't remove entries, instead use invalidation flag, if it is set - renderer will ignore the entry. Like so : [start_0, count_0, flag_0, start_1, count_1, flag_1, ... , start_n, count_n, flag_n]. \r\n  * Restrict entries to be sorted - sorting is quite CPU intensive because as a minimum you have to scan through the list\r\n  * Restrict entries to be non-overlapping (touching is okay, but no overlapping kids!) - overlaps would need to be resolved otherwise, which is also at least linear cost.\r\n* wrapper around access to draw ranges to make it easy to:\r\n  * add new range\r\n  * remove a range\r\n  * update existing range\r\n","created_at":"2018-06-26T08:56:37.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/14358#issuecomment-400233778","id":400233778,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/14358","node_id":"MDEyOklzc3VlQ29tbWVudDQwMDIzMzc3OA==","updated_at":"2018-06-26T08:56:37.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/400233778","user":{"following_url":"https:\/\/api.github.com\/users\/Usnul\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/Usnul\/events{\/privacy}","avatar_url":"https:\/\/avatars0.githubusercontent.com\/u\/5939063?v=4","url":"https:\/\/api.github.com\/users\/Usnul","gists_url":"https:\/\/api.github.com\/users\/Usnul\/gists{\/gist_id}","html_url":"https:\/\/github.com\/Usnul","subscriptions_url":"https:\/\/api.github.com\/users\/Usnul\/subscriptions","node_id":"MDQ6VXNlcjU5MzkwNjM=","repos_url":"https:\/\/api.github.com\/users\/Usnul\/repos","received_events_url":"https:\/\/api.github.com\/users\/Usnul\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/Usnul\/starred{\/owner}{\/repo}","site_admin":false,"login":"Usnul","type":"User","id":5939063,"followers_url":"https:\/\/api.github.com\/users\/Usnul\/followers","organizations_url":"https:\/\/api.github.com\/users\/Usnul\/orgs"}},{"index":9,"author_association":"COLLABORATOR","body":"@zaykho Have you tried @WestLangley's suggestion using groups?","created_at":"2018-06-26T09:10:14.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/14358#issuecomment-400237915","id":400237915,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/14358","node_id":"MDEyOklzc3VlQ29tbWVudDQwMDIzNzkxNQ==","updated_at":"2018-06-26T09:10:14.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/400237915","user":{"following_url":"https:\/\/api.github.com\/users\/Mugen87\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/Mugen87\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/12612165?v=4","url":"https:\/\/api.github.com\/users\/Mugen87","gists_url":"https:\/\/api.github.com\/users\/Mugen87\/gists{\/gist_id}","html_url":"https:\/\/github.com\/Mugen87","subscriptions_url":"https:\/\/api.github.com\/users\/Mugen87\/subscriptions","node_id":"MDQ6VXNlcjEyNjEyMTY1","repos_url":"https:\/\/api.github.com\/users\/Mugen87\/repos","received_events_url":"https:\/\/api.github.com\/users\/Mugen87\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/Mugen87\/starred{\/owner}{\/repo}","site_admin":false,"login":"Mugen87","type":"User","id":12612165,"followers_url":"https:\/\/api.github.com\/users\/Mugen87\/followers","organizations_url":"https:\/\/api.github.com\/users\/Mugen87\/orgs"}},{"index":10,"author_association":"NONE","body":"@Mugen87 I already tested groups earlier when doing some research and the result wasn't satisfying : \r\n\r\n- I use a `shaderMaterial` for the whole mesh with a texture atlas ( 40 sub texture in it).\r\n- Using groups will require to have multiple materials, and so on, multiples drawcalls, something I want to avoid at all cost.\r\n- There is no way to prevent some groups to be rendered, since `groups` doesn't have a `visibility` option. ( unless I did miss a feature ? )\r\n\r\n\r\n@Usnul Well I have a somewhat \"ok\" version running right now (more a proof of concept).\r\nAt the same time, I agree with everything you said, so I will try to optimize it if I can't find another solution than making a loop of `gl.drawArrays()`.\r\n\r\n**Here the changes I made:** \r\n\r\n**L 11103 :** \r\n```this.drawRange = { start: 0, count: Infinity };```\r\n```\r\nthis.drawRange = [];\r\nthis.drawRange.push( { start: 0, count: Infinity, index: 0 } );\r\n```\r\n\r\n**L 11192 :** \r\n```\r\n\t\tsetDrawRange: function ( start, count ) {\r\n\r\n\t\t\tthis.drawRange.start = start;\r\n\t\t\tthis.drawRange.count = count;\r\n\r\n\t\t},\r\n```\r\n```\r\n\t\tsetDrawRange: function ( start, count, index ) {\r\n\t\t\t\r\n\t\t\tif ( this.drawRange[index] === undefined ) {\r\n\t\t\t\t\r\n\t\t\t\tthis.drawRange.push( { start: start, count: count, index: index } );\r\n\r\n\t\t\t\t\r\n\t\t\t\t} else {\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.drawRange[index].start = start;\r\n\t\t\t\t\tthis.drawRange[index].count = count;\r\n\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\r\n\t\t},\r\n```\r\n**L 12188 :** \r\n```\t\t\t\r\n\t\t\tthis.drawRange.start = source.drawRange.start;\r\n\t\t\tthis.drawRange.count = source.drawRange.count;\r\n\r\n```\r\n```\r\n\t\t\tthis.drawRange.start = source.drawRange.start;\r\n\t\t\tthis.drawRange.count = source.drawRange.count;\r\n\t\t\tthis.drawRange.index = source.drawRange.index;\r\n```\r\n\r\n**L 14641 :** \r\n```\r\n\t\tfunction render( start, count ) {\r\n\r\n\t\t\tgl.drawArrays( mode, start, count );\r\n\r\n\t\t\tinfo.update( count, mode );\r\n\r\n\t\t}\r\n```\r\n```\r\n\t\tfunction render( start, count, length ) {\r\n\t\t\t\r\n\t\t\tvar max_count = 0;\r\n\t\t\r\n\t\t\tif ( length >= 2 ) {\r\n\t\t\t\t\r\n\t\t\t\tfor (var i = 0; i < length; i ++) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tgl.drawArrays( mode, start[i], count[i] );\r\n\t\t\t\t\t\r\n\t\t\t\t\tmax_count += count[i];\r\n\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t} else {\r\n\r\n\t\t\t\tgl.drawArrays( mode, start[0], count[0] );\r\n\t\t\t\t\r\n\t\t\t\tmax_count = count[0];\r\n\r\n\t\t\t}\t\t\r\n\t\t\r\n\r\n\t\t\tinfo.update( max_count, mode );\r\n\r\n\t\t}\r\n```\r\n\r\n**L 22387 :** \r\n```\r\n\t\t\tvar rangeStart = geometry.drawRange.start * rangeFactor;\r\n\t\t\tvar rangeCount = geometry.drawRange.count * rangeFactor;\r\n\r\n\t\t\tvar groupStart = group !== null ? group.start * rangeFactor : 0;\r\n\t\t\tvar groupCount = group !== null ? group.count * rangeFactor : Infinity;\r\n\r\n\t\t\tvar drawStart = Math.max( rangeStart, groupStart );\r\n\t\t\tvar drawEnd = Math.min( dataCount, rangeStart + rangeCount, groupStart + groupCount ) - 1;\r\n\r\n\t\t\tvar drawCount = Math.max( 0, drawEnd - drawStart + 1 );\r\n\r\n\t\t\tif ( drawCount === 0 ) return;\r\n```\r\n```\r\n\t\t\tvar rangeStart = [];\r\n\t\t\tvar rangeCount = [];\r\n\t\t\tvar drawStart = [];\r\n\t\t\tvar drawEnd = [];\r\n\t\t\tvar drawCount = [];\r\n\t\t\tvar rangeLength = geometry.drawRange.length;\t\r\n\r\n\t\t\tvar groupStart = group !== null ? group.start * rangeFactor : 0;\r\n\t\t\tvar groupCount = group !== null ? group.count * rangeFactor : Infinity;\r\n\t\t\t\r\n\t\t\tfor (var i = 0; i < rangeLength; i ++) {\r\n\t\t\t\t\r\n\t\t\t\trangeStart[i] = geometry.drawRange[i].start * rangeFactor;\r\n\t\t\t\trangeCount[i] = geometry.drawRange[i].count * rangeFactor;\r\n\t\t\t\t\r\n\t\t\t\tdrawStart[i] = Math.max( rangeStart[i], groupStart );\r\n\t\t\t\tdrawEnd[i] = Math.min( dataCount, rangeStart[i] + rangeCount[i], groupStart + groupCount ) - 1;\r\n\t\t\t\tdrawCount[i] = Math.max( 0, drawEnd[i] - drawStart[i] + 1 );\r\n\t\t\t\t\r\n\t\t\t\t}\r\n\r\n\t\t\t\r\n\t\t\tif ( drawCount[0] === 0 ) return;\r\n```\r\n\r\n**L 22468 :** \r\n```\r\n\t\t\t\trenderer.render( drawStart, drawCount );\r\n```\r\n```\r\n\t\t\t\trenderer.render( drawStart, drawCount, rangeLength );\r\n```\r\n\r\n**_Sorry, I'm not used with Github._ : [**\r\n\r\n\r\n\r\nThen I use this code to add\/modify the `drawRange ` in the fly : \r\n```\r\n\/\/ { start: 1200, count: 300, index: 1 }\r\n\r\nmesh.geometry.setDrawRange( 0, 300, 0 );\r\nmesh.geometry.setDrawRange( 1200, 300, 1 );\r\n```\r\nI simply use `splice` to remove an entry :\r\n`mesh.geometry.drawRange.splice(1, 1);`\r\n\r\n![drawrange](https:\/\/user-images.githubusercontent.com\/6943022\/41910123-09127cca-7949-11e8-9811-dab5cf0bc882.png)\r\n\r\n\r\nStill, I think doing doing a loop of `gl.drawArrays()` is everything but a good idea......","created_at":"2018-06-26T11:53:19.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/14358#issuecomment-400279838","id":400279838,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/14358","node_id":"MDEyOklzc3VlQ29tbWVudDQwMDI3OTgzOA==","updated_at":"2018-06-26T12:10:26.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/400279838","user":{"following_url":"https:\/\/api.github.com\/users\/zaykho\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/zaykho\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/6943022?v=4","url":"https:\/\/api.github.com\/users\/zaykho","gists_url":"https:\/\/api.github.com\/users\/zaykho\/gists{\/gist_id}","html_url":"https:\/\/github.com\/zaykho","subscriptions_url":"https:\/\/api.github.com\/users\/zaykho\/subscriptions","node_id":"MDQ6VXNlcjY5NDMwMjI=","repos_url":"https:\/\/api.github.com\/users\/zaykho\/repos","received_events_url":"https:\/\/api.github.com\/users\/zaykho\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/zaykho\/starred{\/owner}{\/repo}","site_admin":false,"login":"zaykho","type":"User","id":6943022,"followers_url":"https:\/\/api.github.com\/users\/zaykho\/followers","organizations_url":"https:\/\/api.github.com\/users\/zaykho\/orgs"}},{"index":11,"author_association":"COLLABORATOR","body":"> Using groups will require to have multiple materials, and so on, multiples drawcalls, something I want to avoid at all cost.\r\n\r\nWhen using multiple sets of `drawRange`, you also end up with multiple draw calls. Besides, it's not necessary to create multiple materials. You just push a single material multiples times into an array so it matches the group count.","created_at":"2018-06-26T12:03:13.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/14358#issuecomment-400282372","id":400282372,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/14358","node_id":"MDEyOklzc3VlQ29tbWVudDQwMDI4MjM3Mg==","updated_at":"2018-06-26T12:03:13.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/400282372","user":{"following_url":"https:\/\/api.github.com\/users\/Mugen87\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/Mugen87\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/12612165?v=4","url":"https:\/\/api.github.com\/users\/Mugen87","gists_url":"https:\/\/api.github.com\/users\/Mugen87\/gists{\/gist_id}","html_url":"https:\/\/github.com\/Mugen87","subscriptions_url":"https:\/\/api.github.com\/users\/Mugen87\/subscriptions","node_id":"MDQ6VXNlcjEyNjEyMTY1","repos_url":"https:\/\/api.github.com\/users\/Mugen87\/repos","received_events_url":"https:\/\/api.github.com\/users\/Mugen87\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/Mugen87\/starred{\/owner}{\/repo}","site_admin":false,"login":"Mugen87","type":"User","id":12612165,"followers_url":"https:\/\/api.github.com\/users\/Mugen87\/followers","organizations_url":"https:\/\/api.github.com\/users\/Mugen87\/orgs"}},{"index":12,"author_association":"NONE","body":"> When using multiple sets of drawRange, you also end up with multiple draw calls. Besides, it's not necessary to create multiple materials. You just push a single material multiples times into an array so it matches the group count.\r\n\r\nBut then, how can I tell what groups should be rendered or not ?","created_at":"2018-06-26T12:14:49.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/14358#issuecomment-400285659","id":400285659,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/14358","node_id":"MDEyOklzc3VlQ29tbWVudDQwMDI4NTY1OQ==","updated_at":"2018-06-26T12:14:49.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/400285659","user":{"following_url":"https:\/\/api.github.com\/users\/zaykho\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/zaykho\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/6943022?v=4","url":"https:\/\/api.github.com\/users\/zaykho","gists_url":"https:\/\/api.github.com\/users\/zaykho\/gists{\/gist_id}","html_url":"https:\/\/github.com\/zaykho","subscriptions_url":"https:\/\/api.github.com\/users\/zaykho\/subscriptions","node_id":"MDQ6VXNlcjY5NDMwMjI=","repos_url":"https:\/\/api.github.com\/users\/zaykho\/repos","received_events_url":"https:\/\/api.github.com\/users\/zaykho\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/zaykho\/starred{\/owner}{\/repo}","site_admin":false,"login":"zaykho","type":"User","id":6943022,"followers_url":"https:\/\/api.github.com\/users\/zaykho\/followers","organizations_url":"https:\/\/api.github.com\/users\/zaykho\/orgs"}},{"index":13,"author_association":"COLLABORATOR","body":"You could store all groups in a custom data structure (maybe within `BufferGeometry.userData`) and define per frame via `BufferGeometry.addGroup()` the groups that should be rendered. You can use `BufferGeometry.clearCroups()` to reset the group data. I have not tested this workflow but just give it a try.","created_at":"2018-06-26T14:21:34.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/14358#issuecomment-400327009","id":400327009,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/14358","node_id":"MDEyOklzc3VlQ29tbWVudDQwMDMyNzAwOQ==","updated_at":"2018-06-26T14:22:46.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/400327009","user":{"following_url":"https:\/\/api.github.com\/users\/Mugen87\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/Mugen87\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/12612165?v=4","url":"https:\/\/api.github.com\/users\/Mugen87","gists_url":"https:\/\/api.github.com\/users\/Mugen87\/gists{\/gist_id}","html_url":"https:\/\/github.com\/Mugen87","subscriptions_url":"https:\/\/api.github.com\/users\/Mugen87\/subscriptions","node_id":"MDQ6VXNlcjEyNjEyMTY1","repos_url":"https:\/\/api.github.com\/users\/Mugen87\/repos","received_events_url":"https:\/\/api.github.com\/users\/Mugen87\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/Mugen87\/starred{\/owner}{\/repo}","site_admin":false,"login":"Mugen87","type":"User","id":12612165,"followers_url":"https:\/\/api.github.com\/users\/Mugen87\/followers","organizations_url":"https:\/\/api.github.com\/users\/Mugen87\/orgs"}},{"index":14,"author_association":"NONE","body":"> You could store all groups in a custom data structure (maybe within BufferGeometry.userData) and define per frame via BufferGeometry.addGroup() the groups that should be rendered. You can use BufferGeometry.clearCroups() to reset the group data. I have not tested this workflow but just give it a try.\r\n\r\nInteresting, I will try this out. Thank you.","created_at":"2018-06-26T14:55:32.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/14358#issuecomment-400339739","id":400339739,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/14358","node_id":"MDEyOklzc3VlQ29tbWVudDQwMDMzOTczOQ==","updated_at":"2018-06-26T14:55:32.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/400339739","user":{"following_url":"https:\/\/api.github.com\/users\/zaykho\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/zaykho\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/6943022?v=4","url":"https:\/\/api.github.com\/users\/zaykho","gists_url":"https:\/\/api.github.com\/users\/zaykho\/gists{\/gist_id}","html_url":"https:\/\/github.com\/zaykho","subscriptions_url":"https:\/\/api.github.com\/users\/zaykho\/subscriptions","node_id":"MDQ6VXNlcjY5NDMwMjI=","repos_url":"https:\/\/api.github.com\/users\/zaykho\/repos","received_events_url":"https:\/\/api.github.com\/users\/zaykho\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/zaykho\/starred{\/owner}{\/repo}","site_admin":false,"login":"zaykho","type":"User","id":6943022,"followers_url":"https:\/\/api.github.com\/users\/zaykho\/followers","organizations_url":"https:\/\/api.github.com\/users\/zaykho\/orgs"}},{"index":15,"author_association":"COLLABORATOR","body":"Closing for now.","created_at":"2018-07-03T16:10:33.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/14358#issuecomment-402211089","id":402211089,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/14358","node_id":"MDEyOklzc3VlQ29tbWVudDQwMjIxMTA4OQ==","updated_at":"2018-07-03T16:10:33.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/402211089","user":{"following_url":"https:\/\/api.github.com\/users\/Mugen87\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/Mugen87\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/12612165?v=4","url":"https:\/\/api.github.com\/users\/Mugen87","gists_url":"https:\/\/api.github.com\/users\/Mugen87\/gists{\/gist_id}","html_url":"https:\/\/github.com\/Mugen87","subscriptions_url":"https:\/\/api.github.com\/users\/Mugen87\/subscriptions","node_id":"MDQ6VXNlcjEyNjEyMTY1","repos_url":"https:\/\/api.github.com\/users\/Mugen87\/repos","received_events_url":"https:\/\/api.github.com\/users\/Mugen87\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/Mugen87\/starred{\/owner}{\/repo}","site_admin":false,"login":"Mugen87","type":"User","id":12612165,"followers_url":"https:\/\/api.github.com\/users\/Mugen87\/followers","organizations_url":"https:\/\/api.github.com\/users\/Mugen87\/orgs"}}]}