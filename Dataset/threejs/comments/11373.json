{"schema": {"fields":[{"type":"integer","name":"index"},{"type":"string","name":"author_association"},{"type":"string","name":"body"},{"type":"datetime","name":"created_at"},{"type":"string","name":"html_url"},{"type":"integer","name":"id"},{"type":"string","name":"issue_url"},{"type":"string","name":"node_id"},{"type":"datetime","name":"updated_at"},{"type":"string","name":"url"},{"type":"string","name":"user"}],"pandas_version":"0.20.0","primaryKey":["index"]}, "data": [{"index":0,"author_association":"OWNER","body":"Could you share a test .blend file?","created_at":"2017-05-23T01:55:31.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/11373#issuecomment-303268075","id":303268075,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/11373","node_id":"MDEyOklzc3VlQ29tbWVudDMwMzI2ODA3NQ==","updated_at":"2017-05-23T01:55:31.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/303268075","user":{"following_url":"https:\/\/api.github.com\/users\/mrdoob\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/mrdoob\/events{\/privacy}","avatar_url":"https:\/\/avatars0.githubusercontent.com\/u\/97088?v=4","url":"https:\/\/api.github.com\/users\/mrdoob","gists_url":"https:\/\/api.github.com\/users\/mrdoob\/gists{\/gist_id}","html_url":"https:\/\/github.com\/mrdoob","subscriptions_url":"https:\/\/api.github.com\/users\/mrdoob\/subscriptions","node_id":"MDQ6VXNlcjk3MDg4","repos_url":"https:\/\/api.github.com\/users\/mrdoob\/repos","received_events_url":"https:\/\/api.github.com\/users\/mrdoob\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/mrdoob\/starred{\/owner}{\/repo}","site_admin":false,"login":"mrdoob","type":"User","id":97088,"followers_url":"https:\/\/api.github.com\/users\/mrdoob\/followers","organizations_url":"https:\/\/api.github.com\/users\/mrdoob\/orgs"}},{"index":1,"author_association":"CONTRIBUTOR","body":"***Edit \r\nOnce I applied loc,rot,scale, exported as geometry instead of buffergeom,  things started to work somewhat better**(See edit 2) in the editor for the test scene, although the floor plane was invisible with 'skinning' enabled on it, and the animated objects seem to be in the correct place. I need to make two materials it seems, because skinning is not liked when there are no bones attached to the objects using the materials. I may end up uploading the original scene I'm having troubles with to see if anyone can help me figure out what I'm doing wrong.. \r\n**Edit 2:\r\n I forgot applying location puts the origin to the center of the scene. so once I selected everything, put origin to center of mass (control+alt+shift+c with everything selected) the animated objects again move to near origin, and there's some nifty screen tearing going on as well.\r\n\r\n(https:\/\/github.com\/mrdoob\/three.js\/files\/1027677\/multi_armature_test_scene.zip)\r\nThis is hopefully the new test files if I didn't screw up uploading somehow.\r\n***\/edit\r\n\r\napologies for the delay in response.\r\nthis is a small scene with a single material and texture with a few primitives, two armatures, two rest poses and two animations embedded, along with the json output from io_three\r\n**Removed old file *** \r\n\r\n\r\nI think it's got flipped normals on floor, but that's my fault for sure. I didn't spend much time making it, but it sure highlights this issue I think when loading it into the three\/editor.\r\n![test_screen_shot](https:\/\/cloud.githubusercontent.com\/assets\/76805\/26430835\/8fc7ec1c-40ad-11e7-85af-4f80b535e6e4.png)\r\n","created_at":"2017-05-25T00:20:09.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/11373#issuecomment-303888307","id":303888307,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/11373","node_id":"MDEyOklzc3VlQ29tbWVudDMwMzg4ODMwNw==","updated_at":"2017-05-25T01:12:27.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/303888307","user":{"following_url":"https:\/\/api.github.com\/users\/centerionware\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/centerionware\/events{\/privacy}","avatar_url":"https:\/\/avatars3.githubusercontent.com\/u\/76805?v=4","url":"https:\/\/api.github.com\/users\/centerionware","gists_url":"https:\/\/api.github.com\/users\/centerionware\/gists{\/gist_id}","html_url":"https:\/\/github.com\/centerionware","subscriptions_url":"https:\/\/api.github.com\/users\/centerionware\/subscriptions","node_id":"MDQ6VXNlcjc2ODA1","repos_url":"https:\/\/api.github.com\/users\/centerionware\/repos","received_events_url":"https:\/\/api.github.com\/users\/centerionware\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/centerionware\/starred{\/owner}{\/repo}","site_admin":false,"login":"centerionware","type":"User","id":76805,"followers_url":"https:\/\/api.github.com\/users\/centerionware\/followers","organizations_url":"https:\/\/api.github.com\/users\/centerionware\/orgs"}},{"index":2,"author_association":"CONTRIBUTOR","body":"better test. Fixed normal on floor, saved export settings with geometry vs buffer. the bones seem to be in the right places according to the threejs editor, with the mesh near zero. I think somehow they need to be flipped - The bones should be near zero with the mesh at the global position, since the bones are the children of the mesh it make sense. In blender it's the other way around, with the mesh and bones both being siblings and children of the armature .\r\n[multi_armature_test_scene.zip](https:\/\/github.com\/mrdoob\/three.js\/files\/1027712\/multi_armature_test_scene.zip)\r\n\r\n\r\nis: {\r\nthree.object.position = blender.(object.location-armature.location)\r\nthree. bone.position = bone_position\r\n}\r\n\r\nshould be: {\r\nthree.object.position = blender.object.location\r\nthree.bone.position = blender.(armature.location-bone.location)\r\n}","created_at":"2017-05-25T01:37:37.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/11373#issuecomment-303898456","id":303898456,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/11373","node_id":"MDEyOklzc3VlQ29tbWVudDMwMzg5ODQ1Ng==","updated_at":"2017-05-25T01:42:15.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/303898456","user":{"following_url":"https:\/\/api.github.com\/users\/centerionware\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/centerionware\/events{\/privacy}","avatar_url":"https:\/\/avatars3.githubusercontent.com\/u\/76805?v=4","url":"https:\/\/api.github.com\/users\/centerionware","gists_url":"https:\/\/api.github.com\/users\/centerionware\/gists{\/gist_id}","html_url":"https:\/\/github.com\/centerionware","subscriptions_url":"https:\/\/api.github.com\/users\/centerionware\/subscriptions","node_id":"MDQ6VXNlcjc2ODA1","repos_url":"https:\/\/api.github.com\/users\/centerionware\/repos","received_events_url":"https:\/\/api.github.com\/users\/centerionware\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/centerionware\/starred{\/owner}{\/repo}","site_admin":false,"login":"centerionware","type":"User","id":76805,"followers_url":"https:\/\/api.github.com\/users\/centerionware\/followers","organizations_url":"https:\/\/api.github.com\/users\/centerionware\/orgs"}},{"index":3,"author_association":"CONTRIBUTOR","body":"I _finally_ got it exporting and loading. \r\nI had to apply location (control+a) on just the armatures, leaving everything else. Then the positions of the objects are close to the same as the other objects exported into three, with the Y and Z flipped and X needing negation. So in my THREE.ObjectLoader() callback I added:\r\n```javascript\r\n            if(obj.children.length > 0) {\r\n                var has_bone = false;\r\n                for(var i = 0; i < obj.children.length; i++)\r\n                    if(obj.children[i] instanceof THREE.Bone)\r\n                        has_bone = true;\r\n\r\n                if(has_bone) {\r\n                    var oy = obj.position.y;\r\n                    obj.position.y = obj.position.z;\r\n                    obj.position.z = oy;\r\n                    obj.position.x *= -1;\r\n                }\r\n            }\r\n```\r\nAnd now they're all loading up into what appears to be the same places as every other object from threejs. If I do obj.rotateZ(3.14); after all is said and done, the textures all line up too. I suspect things are a mathematical mirror from blender in ways. (on the sphere, X in blender is 10 for example, and -10 when loading into threejs, but that i think is a seperate issue.)","created_at":"2017-05-25T04:58:18.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/11373#issuecomment-303922630","id":303922630,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/11373","node_id":"MDEyOklzc3VlQ29tbWVudDMwMzkyMjYzMA==","updated_at":"2017-05-25T05:43:40.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/303922630","user":{"following_url":"https:\/\/api.github.com\/users\/centerionware\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/centerionware\/events{\/privacy}","avatar_url":"https:\/\/avatars3.githubusercontent.com\/u\/76805?v=4","url":"https:\/\/api.github.com\/users\/centerionware","gists_url":"https:\/\/api.github.com\/users\/centerionware\/gists{\/gist_id}","html_url":"https:\/\/github.com\/centerionware","subscriptions_url":"https:\/\/api.github.com\/users\/centerionware\/subscriptions","node_id":"MDQ6VXNlcjc2ODA1","repos_url":"https:\/\/api.github.com\/users\/centerionware\/repos","received_events_url":"https:\/\/api.github.com\/users\/centerionware\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/centerionware\/starred{\/owner}{\/repo}","site_admin":false,"login":"centerionware","type":"User","id":76805,"followers_url":"https:\/\/api.github.com\/users\/centerionware\/followers","organizations_url":"https:\/\/api.github.com\/users\/centerionware\/orgs"}},{"index":4,"author_association":"CONTRIBUTOR","body":"Turns out the 'solution' above fixes everything if I only use location and scale keyframes in the poses. if I add any rotation things rotate around the wrong spot. The plane animation in the test above uses some rotation and gets stretched out. I went and added a third animated object, a cylinder with one bone that spins around Z offset on the X axis from the center of the scene, it rotates around a point that appears to be 2X away from the center.\r\n[multi_armature_test_scene.zip](https:\/\/github.com\/mrdoob\/three.js\/files\/1030211\/multi_armature_test_scene.zip)\r\n","created_at":"2017-05-25T20:57:49.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/11373#issuecomment-304122490","id":304122490,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/11373","node_id":"MDEyOklzc3VlQ29tbWVudDMwNDEyMjQ5MA==","updated_at":"2017-05-25T20:57:49.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/304122490","user":{"following_url":"https:\/\/api.github.com\/users\/centerionware\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/centerionware\/events{\/privacy}","avatar_url":"https:\/\/avatars3.githubusercontent.com\/u\/76805?v=4","url":"https:\/\/api.github.com\/users\/centerionware","gists_url":"https:\/\/api.github.com\/users\/centerionware\/gists{\/gist_id}","html_url":"https:\/\/github.com\/centerionware","subscriptions_url":"https:\/\/api.github.com\/users\/centerionware\/subscriptions","node_id":"MDQ6VXNlcjc2ODA1","repos_url":"https:\/\/api.github.com\/users\/centerionware\/repos","received_events_url":"https:\/\/api.github.com\/users\/centerionware\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/centerionware\/starred{\/owner}{\/repo}","site_admin":false,"login":"centerionware","type":"User","id":76805,"followers_url":"https:\/\/api.github.com\/users\/centerionware\/followers","organizations_url":"https:\/\/api.github.com\/users\/centerionware\/orgs"}},{"index":5,"author_association":"CONTRIBUTOR","body":"I was able to get all the animations in the test scene running - only using 'apply location' on the armatures with everything else in the scene set to 'origin to geometry'.  This method involves processing the output json and putting it through a fairly small function that modifies all the animation keys and the bone positions from the matrix on the objects.. I don't think it will hurt anything if all objects have had their locations applied because the matrix would then be 0,0,0, resulting in some additions and subtractions of zero so not changing anything. it may be able to run on all currently working stuff while fixing this issue if it's placed somewhere in the object loader before everything is parsed. Basically\r\n\r\n```javascript\r\nfunction start_json_fixin(json_str) {\r\n    var out = JSON.parse(json_str);\r\n    debugger;\r\n    for (var i = 0; i < out.object.children.length; i++) {\r\n        for (var j = 0; j < out.geometries.length; j++) {\r\n            if (out.geometries[j].uuid == out.object.children[i].geometry) {\r\n                var matrix = out.object.children[i].matrix;\r\n                for (var k = 0; k < out.geometries[j].data.bones.length; k++) {\r\n                    var ijk = out.geometries[j].data.bones[k];\r\n                    ijk.pos[0] -= matrix[12];\r\n                    ijk.pos[1] -= matrix[14];\r\n                    ijk.pos[2] += matrix[13];\r\n                }\r\n                for (var k = 0; k < out.geometries[j].data.animations.length; k++) {\r\n                    for (var m = 0; m < out.geometries[j].data.animations[k].hierarchy.length; m++) {\r\n                        for (var l = 0; l < out.geometries[j].data.animations[k].hierarchy[m].keys.length; l++) {\r\n                            var ijkl = out.geometries[j].data.animations[k].hierarchy[m].keys[l];\r\n                            ijkl.pos[0] -= matrix[12];\r\n                            ijkl.pos[1] -= matrix[14];\r\n                            ijkl.pos[2] += matrix[13];\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    $(\"#outputJson\").text(JSON.stringify(out));\r\n}\r\n\r\n\r\n```\r\n\r\n\r\n","created_at":"2017-05-26T01:00:18.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/11373#issuecomment-304163338","id":304163338,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/11373","node_id":"MDEyOklzc3VlQ29tbWVudDMwNDE2MzMzOA==","updated_at":"2017-05-26T01:00:18.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/304163338","user":{"following_url":"https:\/\/api.github.com\/users\/centerionware\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/centerionware\/events{\/privacy}","avatar_url":"https:\/\/avatars3.githubusercontent.com\/u\/76805?v=4","url":"https:\/\/api.github.com\/users\/centerionware","gists_url":"https:\/\/api.github.com\/users\/centerionware\/gists{\/gist_id}","html_url":"https:\/\/github.com\/centerionware","subscriptions_url":"https:\/\/api.github.com\/users\/centerionware\/subscriptions","node_id":"MDQ6VXNlcjc2ODA1","repos_url":"https:\/\/api.github.com\/users\/centerionware\/repos","received_events_url":"https:\/\/api.github.com\/users\/centerionware\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/centerionware\/starred{\/owner}{\/repo}","site_admin":false,"login":"centerionware","type":"User","id":76805,"followers_url":"https:\/\/api.github.com\/users\/centerionware\/followers","organizations_url":"https:\/\/api.github.com\/users\/centerionware\/orgs"}},{"index":6,"author_association":"COLLABORATOR","body":"The JSON Blender exporter has been removed with `R93` (#14117). \r\n\r\nAlso see: https:\/\/threejs.org\/docs\/#manual\/introduction\/Loading-3D-models","created_at":"2018-05-31T09:08:49.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/11373#issuecomment-393466436","id":393466436,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/11373","node_id":"MDEyOklzc3VlQ29tbWVudDM5MzQ2NjQzNg==","updated_at":"2018-05-31T09:08:49.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/393466436","user":{"following_url":"https:\/\/api.github.com\/users\/Mugen87\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/Mugen87\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/12612165?v=4","url":"https:\/\/api.github.com\/users\/Mugen87","gists_url":"https:\/\/api.github.com\/users\/Mugen87\/gists{\/gist_id}","html_url":"https:\/\/github.com\/Mugen87","subscriptions_url":"https:\/\/api.github.com\/users\/Mugen87\/subscriptions","node_id":"MDQ6VXNlcjEyNjEyMTY1","repos_url":"https:\/\/api.github.com\/users\/Mugen87\/repos","received_events_url":"https:\/\/api.github.com\/users\/Mugen87\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/Mugen87\/starred{\/owner}{\/repo}","site_admin":false,"login":"Mugen87","type":"User","id":12612165,"followers_url":"https:\/\/api.github.com\/users\/Mugen87\/followers","organizations_url":"https:\/\/api.github.com\/users\/Mugen87\/orgs"}}]}