{"schema": {"fields":[{"type":"integer","name":"index"},{"type":"string","name":"author_association"},{"type":"string","name":"body"},{"type":"datetime","name":"created_at"},{"type":"string","name":"html_url"},{"type":"integer","name":"id"},{"type":"string","name":"issue_url"},{"type":"string","name":"node_id"},{"type":"datetime","name":"updated_at"},{"type":"string","name":"url"},{"type":"string","name":"user"}],"pandas_version":"0.20.0","primaryKey":["index"]}, "data": [{"index":0,"author_association":"COLLABORATOR","body":"When you export a file, what results do you get on:\r\n\r\n- http:\/\/gltf-viewer.donmccurdy.com\/\r\n- http:\/\/sandbox.babylonjs.com\/\r\n- http:\/\/github.khronos.org\/glTF-Validator\/\r\n\r\nTHREE.GLTFExporter can provide `.gltf` or `.glb` with embedded resources, but can't hand back multiple files. If the exported model passes validation, but UnityGLTF just can't handle embedded resources, I think you'll need to file a bug on UnityGLTF. It may be that it allows embedded `.glb` but expects `.gltf` to have a `.bin` file.\r\n\r\nIf you just need a quick workflow fix, https:\/\/github.com\/AnalyticalGraphicsInc\/gltf-pipeline can re-pack glTF files in whatever format you need. Use the `-s` option to split an embedded file into external `.bin` and textures.","created_at":"2018-10-26T16:40:14.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/15139#issuecomment-433469910","id":433469910,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/15139","node_id":"MDEyOklzc3VlQ29tbWVudDQzMzQ2OTkxMA==","updated_at":"2018-10-26T16:40:31.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/433469910","user":{"following_url":"https:\/\/api.github.com\/users\/donmccurdy\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/donmccurdy\/events{\/privacy}","avatar_url":"https:\/\/avatars3.githubusercontent.com\/u\/1848368?v=4","url":"https:\/\/api.github.com\/users\/donmccurdy","gists_url":"https:\/\/api.github.com\/users\/donmccurdy\/gists{\/gist_id}","html_url":"https:\/\/github.com\/donmccurdy","subscriptions_url":"https:\/\/api.github.com\/users\/donmccurdy\/subscriptions","node_id":"MDQ6VXNlcjE4NDgzNjg=","repos_url":"https:\/\/api.github.com\/users\/donmccurdy\/repos","received_events_url":"https:\/\/api.github.com\/users\/donmccurdy\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/donmccurdy\/starred{\/owner}{\/repo}","site_admin":false,"login":"donmccurdy","type":"User","id":1848368,"followers_url":"https:\/\/api.github.com\/users\/donmccurdy\/followers","organizations_url":"https:\/\/api.github.com\/users\/donmccurdy\/orgs"}},{"index":1,"author_association":"NONE","body":"Thank you very much for your suggestions!\r\n\r\nI've done some tests with 3 types of exports:\r\n1. An export with bin file\r\n2. An export without bin file and embedded media\r\n3. An export without bin file and textures not embedded.\r\n\r\n@ http:\/\/gltf-viewer.donmccurdy.com\/:\r\n1. not working (THREE.GLTFLoader: Unexpected light type, \"3\".)\r\n2. working\r\n3. not working (missing textures error)\r\n\r\n@ http:\/\/sandbox.babylonjs.com\/:\r\n1. working\r\n2. working\r\n3. not working (Failed to execute 'open' on 'XMLHttpRequest': Invalid URL)\r\n\r\n@ http:\/\/github.khronos.org\/glTF-Validator\/:\r\n1. valid\r\n2. valid\r\n3. valid, but two warnings (both related to the texture)\r\n\r\nIt seems that the THREE.Exporter used the path of the texture generated while exporting:\r\n`\"resources\": [\r\n            {\r\n                \"pointer\": \"\/buffers\/0\",\r\n                \"mimeType\": \"application\/gltf-buffer\",\r\n                \"storage\": \"data-uri\",\r\n                \"byteLength\": 1021824\r\n            },\r\n            {\r\n                \"pointer\": \"\/images\/0\",\r\n                \"mimeType\": null,\r\n                \"storage\": \"external\",\r\n                \"uri\": \"blob:http:\/\/localhost:3000\/cd85cb0d-20fd-4971-92ab-96f4e0f30a67\"\r\n            },\r\n            {\r\n                \"pointer\": \"\/images\/1\",\r\n                \"mimeType\": null,\r\n                \"storage\": \"external\",\r\n                \"uri\": \"blob:http:\/\/localhost:3000\/023039f7-bb54-40f2-a9f2-99d4debcb0bb\"\r\n            }\r\n        ],`\r\n\r\nSo it seems there is something wrong with my workflow. \r\nI'm using Three.js to set the texture maps. I'm working with blobs to make shure it all feels responsive. Then I export the scene with the Threejs r97 GLTF exporter version. \r\n\r\nI've retried exporting with the [Three js Editor](https:\/\/threejs.org\/editor\/), This GLTF is loaded (with emedded media), however, Metallness and Roughness maps are not included.\r\nAlso, the file here is notably smaller in size. Is there some compression going on in the editor?\r\n\r\nLastly, I've changed the map from blob to a base64 string. It didn't change anything.\r\n\r\nThank you also for the gltf-pipeline suggestion, maybe this would be a good way to implement draco compression?","created_at":"2018-10-29T14:28:33.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/15139#issuecomment-433930814","id":433930814,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/15139","node_id":"MDEyOklzc3VlQ29tbWVudDQzMzkzMDgxNA==","updated_at":"2018-10-29T14:28:33.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/433930814","user":{"following_url":"https:\/\/api.github.com\/users\/MaartenBreeedveld\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/MaartenBreeedveld\/events{\/privacy}","avatar_url":"https:\/\/avatars3.githubusercontent.com\/u\/23651802?v=4","url":"https:\/\/api.github.com\/users\/MaartenBreeedveld","gists_url":"https:\/\/api.github.com\/users\/MaartenBreeedveld\/gists{\/gist_id}","html_url":"https:\/\/github.com\/MaartenBreeedveld","subscriptions_url":"https:\/\/api.github.com\/users\/MaartenBreeedveld\/subscriptions","node_id":"MDQ6VXNlcjIzNjUxODAy","repos_url":"https:\/\/api.github.com\/users\/MaartenBreeedveld\/repos","received_events_url":"https:\/\/api.github.com\/users\/MaartenBreeedveld\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/MaartenBreeedveld\/starred{\/owner}{\/repo}","site_admin":false,"login":"MaartenBreeedveld","type":"User","id":23651802,"followers_url":"https:\/\/api.github.com\/users\/MaartenBreeedveld\/followers","organizations_url":"https:\/\/api.github.com\/users\/MaartenBreeedveld\/orgs"}},{"index":2,"author_association":"OWNER","body":"> Also, the file here is notably smaller in size. Is there some compression going on in the editor?\r\n\r\nhttps:\/\/github.com\/mrdoob\/three.js\/blob\/dev\/editor\/js\/Menubar.File.js#L214-L222","created_at":"2018-10-29T21:35:32.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/15139#issuecomment-434089446","id":434089446,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/15139","node_id":"MDEyOklzc3VlQ29tbWVudDQzNDA4OTQ0Ng==","updated_at":"2018-10-29T21:35:32.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/434089446","user":{"following_url":"https:\/\/api.github.com\/users\/mrdoob\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/mrdoob\/events{\/privacy}","avatar_url":"https:\/\/avatars0.githubusercontent.com\/u\/97088?v=4","url":"https:\/\/api.github.com\/users\/mrdoob","gists_url":"https:\/\/api.github.com\/users\/mrdoob\/gists{\/gist_id}","html_url":"https:\/\/github.com\/mrdoob","subscriptions_url":"https:\/\/api.github.com\/users\/mrdoob\/subscriptions","node_id":"MDQ6VXNlcjk3MDg4","repos_url":"https:\/\/api.github.com\/users\/mrdoob\/repos","received_events_url":"https:\/\/api.github.com\/users\/mrdoob\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/mrdoob\/starred{\/owner}{\/repo}","site_admin":false,"login":"mrdoob","type":"User","id":97088,"followers_url":"https:\/\/api.github.com\/users\/mrdoob\/followers","organizations_url":"https:\/\/api.github.com\/users\/mrdoob\/orgs"}},{"index":3,"author_association":"NONE","body":"@mrdoob \r\nThe highlighted part belongs to the .glb export:\r\n`saveArrayBuffer( result, 'scene.glb' );`\r\n\r\nAfter one-on-one comparison of the exports of the Three js Editor and my own environment. I've found out that the base64 string in the editor file is a jpg file. My file was a png file. this occurred here in the gltf file:\r\n`\"images\": [\r\n  {\r\n    \"mimeType\": \"image\/jpeg\",\r\n    \"uri\": \"data:image\/jpeg;base64,\/9j\/4AAQSkZJ... \"\r\n  }\r\n],`\r\n\r\nI guess it's noteworthy that the difference in a single .png or .jpg texture is about **6x the filesize**.\r\n\r\nAlso, I've figured out how to fix the initial problem:\r\n> it allways fails with a NulleReferenceException.\r\n\r\nIt seemed my THREE.Mesh objects had no valid userData, so adding this small piece of code (I'm not using the userData currently) resolves my initial error:\r\n`group.userData = {};\r\n group.traverse((child) => {\r\n    if (child instanceof THREE.Mesh) {\r\n      child.userData = {};\r\n    }\r\n });`\r\n\r\nThis issue can be closed. Thank you all for helping!\r\n","created_at":"2018-10-30T12:37:59.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/15139#issuecomment-434283812","id":434283812,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/15139","node_id":"MDEyOklzc3VlQ29tbWVudDQzNDI4MzgxMg==","updated_at":"2018-10-30T12:37:59.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/434283812","user":{"following_url":"https:\/\/api.github.com\/users\/MaartenBreeedveld\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/MaartenBreeedveld\/events{\/privacy}","avatar_url":"https:\/\/avatars3.githubusercontent.com\/u\/23651802?v=4","url":"https:\/\/api.github.com\/users\/MaartenBreeedveld","gists_url":"https:\/\/api.github.com\/users\/MaartenBreeedveld\/gists{\/gist_id}","html_url":"https:\/\/github.com\/MaartenBreeedveld","subscriptions_url":"https:\/\/api.github.com\/users\/MaartenBreeedveld\/subscriptions","node_id":"MDQ6VXNlcjIzNjUxODAy","repos_url":"https:\/\/api.github.com\/users\/MaartenBreeedveld\/repos","received_events_url":"https:\/\/api.github.com\/users\/MaartenBreeedveld\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/MaartenBreeedveld\/starred{\/owner}{\/repo}","site_admin":false,"login":"MaartenBreeedveld","type":"User","id":23651802,"followers_url":"https:\/\/api.github.com\/users\/MaartenBreeedveld\/followers","organizations_url":"https:\/\/api.github.com\/users\/MaartenBreeedveld\/orgs"}},{"index":4,"author_association":"COLLABORATOR","body":"> 1. An export with bin file ... not working (THREE.GLTFLoader: Unexpected light type, \"3\".)\r\n\r\nIt sounds like this asset has come through an old version of the BabylonJS 3DS Max exporter? It had a bug, but if you update the exporter to the latest version, it should fix this error.\r\n\r\n> 3. An export without bin file and textures not embedded. ...     not working (missing textures error)\r\n\r\nThis export setting is kind of useless unless your textures happen to be externally hosted on a CDN. I think we'll probably want to remove it at some point.\r\n\r\n> It seemed my THREE.Mesh objects had no valid userData, so [setting userData to empty objects] resolves my initial error:\r\n\r\nI'm not sure I understand this ... what userData was there before that you're overwriting?\r\n\r\n> Thank you also for the gltf-pipeline suggestion, maybe this would be a good way to implement draco compression?\r\n\r\nIt's a good way to add compression too, yes. :)\r\n\r\nAnyway, glad things are working now!","created_at":"2018-10-30T15:15:02.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/15139#issuecomment-434341777","id":434341777,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/15139","node_id":"MDEyOklzc3VlQ29tbWVudDQzNDM0MTc3Nw==","updated_at":"2018-10-30T15:15:02.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/434341777","user":{"following_url":"https:\/\/api.github.com\/users\/donmccurdy\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/donmccurdy\/events{\/privacy}","avatar_url":"https:\/\/avatars3.githubusercontent.com\/u\/1848368?v=4","url":"https:\/\/api.github.com\/users\/donmccurdy","gists_url":"https:\/\/api.github.com\/users\/donmccurdy\/gists{\/gist_id}","html_url":"https:\/\/github.com\/donmccurdy","subscriptions_url":"https:\/\/api.github.com\/users\/donmccurdy\/subscriptions","node_id":"MDQ6VXNlcjE4NDgzNjg=","repos_url":"https:\/\/api.github.com\/users\/donmccurdy\/repos","received_events_url":"https:\/\/api.github.com\/users\/donmccurdy\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/donmccurdy\/starred{\/owner}{\/repo}","site_admin":false,"login":"donmccurdy","type":"User","id":1848368,"followers_url":"https:\/\/api.github.com\/users\/donmccurdy\/followers","organizations_url":"https:\/\/api.github.com\/users\/donmccurdy\/orgs"}}]}