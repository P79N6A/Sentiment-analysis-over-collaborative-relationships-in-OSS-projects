{"schema": {"fields":[{"type":"integer","name":"index"},{"type":"string","name":"author_association"},{"type":"string","name":"body"},{"type":"datetime","name":"created_at"},{"type":"string","name":"html_url"},{"type":"integer","name":"id"},{"type":"string","name":"issue_url"},{"type":"string","name":"node_id"},{"type":"datetime","name":"updated_at"},{"type":"string","name":"url"},{"type":"string","name":"user"}],"pandas_version":"0.20.0","primaryKey":["index"]}, "data": [{"index":0,"author_association":"CONTRIBUTOR","body":"Isolated benchmark scripts\r\n```\r\nvar N = 1e+6, i, edge = [ 0, 0 ], edge1, edge2;\r\n\r\nconsole.time('Math.min\/Math.max sort');\r\nfor (i = 0; i < N; ++i) {\r\n  edge1 = Math.random();\r\n  edge2 = Math.random();\r\n\r\n  edge[0] = Math.min(edge1, edge2);\r\n  edge[1] = Math.max(edge1, edge2);\r\n}\r\nconsole.timeEnd('Math.min\/Math.max sort');\r\n\r\nconsole.time('Array#sort');\r\nfor (i = 0; i < N; ++i) {\r\n  edge[0] = Math.random();\r\n  edge[1] = Math.random();\r\n  edge.sort(sortFunction);\r\n}\r\nconsole.timeEnd('Array#sort');\r\n\r\nfunction sortFunction(a, b) { return a - b; }\r\n```\r\n\r\n```\r\nvar N = 1e+6, i, edge = [ 0, 0 ], res;\r\n\r\nconsole.time('string concatenation');\r\nfor (i = 0; i < N; ++i) {\r\n  edge[0] = Math.random();\r\n  edge[1] = Math.random();\r\n\r\n  res = edge[0] + ',' + edge[1];\r\n}\r\nconsole.timeEnd('string concatenation');\r\n\r\nconsole.time('Array#toString');\r\nfor (i = 0; i < N; ++i) {\r\n  edge[0] = Math.random();\r\n  edge[1] = Math.random();\r\n\r\n  res = edge.toString();\r\n}\r\nconsole.timeEnd('Array#toString');\r\n```\r\n\r\nResults\r\n\r\n```\r\nChrome 56.0.2924.87 (64-bit)\r\n\r\nMath.min\/Math.max sort: 70.840ms\r\nArray#sort: 424.434ms\r\n\r\nstring concatenation: 948.347ms\r\nArray#toString: 1169.138ms\r\n\r\nnode.js v6.10.0\r\n\r\nMath.min\/Math.max sort: 24.565ms\r\nArray#sort: 263.109ms\r\n\r\nstring concatenation: 575.347ms\r\nArray#toString: 812.026ms\r\n\r\nFirefox 52.0 (64-bit)\r\n\r\nMath.min\/Math.max sort: 9.59ms\r\nArray#sort: 304.54ms\r\n\r\nstring concatenation: 483.18ms\r\nArray#toString: 586.13ms\r\n```","created_at":"2017-03-21T15:45:29.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/11043#issuecomment-288121348","id":288121348,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/11043","node_id":"MDEyOklzc3VlQ29tbWVudDI4ODEyMTM0OA==","updated_at":"2017-03-22T12:16:09.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/288121348","user":{"following_url":"https:\/\/api.github.com\/users\/alemures\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/alemures\/events{\/privacy}","avatar_url":"https:\/\/avatars1.githubusercontent.com\/u\/6663906?v=4","url":"https:\/\/api.github.com\/users\/alemures","gists_url":"https:\/\/api.github.com\/users\/alemures\/gists{\/gist_id}","html_url":"https:\/\/github.com\/alemures","subscriptions_url":"https:\/\/api.github.com\/users\/alemures\/subscriptions","node_id":"MDQ6VXNlcjY2NjM5MDY=","repos_url":"https:\/\/api.github.com\/users\/alemures\/repos","received_events_url":"https:\/\/api.github.com\/users\/alemures\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/alemures\/starred{\/owner}{\/repo}","site_admin":false,"login":"alemures","type":"User","id":6663906,"followers_url":"https:\/\/api.github.com\/users\/alemures\/followers","organizations_url":"https:\/\/api.github.com\/users\/alemures\/orgs"}},{"index":1,"author_association":"CONTRIBUTOR","body":"Teapot benchmark script\r\n```\r\nvar geometry = new THREE.TeapotBufferGeometry(50 \/* size *\/, 25 \/* segments *\/);\r\nconsole.time('teapot geometry');\r\ngeometry = new THREE.WireframeGeometry(geometry);\r\nconsole.timeEnd('teapot geometry');\r\n```\r\nResults\r\n```\r\nChrome 56.0.2924.87 (64-bit) \r\n\r\nteapot geometry: 287.498ms\r\nteapot geometry PR: 204.705ms\r\n\r\nFirefox 52.0 (64-bit)\r\n\r\nteapot geometry: 180.56ms\r\nteapot geometry PR: 140.97ms\r\n```","created_at":"2017-03-21T16:03:24.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/11043#issuecomment-288127449","id":288127449,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/11043","node_id":"MDEyOklzc3VlQ29tbWVudDI4ODEyNzQ0OQ==","updated_at":"2017-03-21T16:03:24.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/288127449","user":{"following_url":"https:\/\/api.github.com\/users\/alemures\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/alemures\/events{\/privacy}","avatar_url":"https:\/\/avatars1.githubusercontent.com\/u\/6663906?v=4","url":"https:\/\/api.github.com\/users\/alemures","gists_url":"https:\/\/api.github.com\/users\/alemures\/gists{\/gist_id}","html_url":"https:\/\/github.com\/alemures","subscriptions_url":"https:\/\/api.github.com\/users\/alemures\/subscriptions","node_id":"MDQ6VXNlcjY2NjM5MDY=","repos_url":"https:\/\/api.github.com\/users\/alemures\/repos","received_events_url":"https:\/\/api.github.com\/users\/alemures\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/alemures\/starred{\/owner}{\/repo}","site_admin":false,"login":"alemures","type":"User","id":6663906,"followers_url":"https:\/\/api.github.com\/users\/alemures\/followers","organizations_url":"https:\/\/api.github.com\/users\/alemures\/orgs"}},{"index":2,"author_association":"OWNER","body":"Looks good!","created_at":"2017-03-21T16:03:53.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/11043#issuecomment-288127614","id":288127614,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/11043","node_id":"MDEyOklzc3VlQ29tbWVudDI4ODEyNzYxNA==","updated_at":"2017-03-21T16:03:53.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/288127614","user":{"following_url":"https:\/\/api.github.com\/users\/mrdoob\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/mrdoob\/events{\/privacy}","avatar_url":"https:\/\/avatars0.githubusercontent.com\/u\/97088?v=4","url":"https:\/\/api.github.com\/users\/mrdoob","gists_url":"https:\/\/api.github.com\/users\/mrdoob\/gists{\/gist_id}","html_url":"https:\/\/github.com\/mrdoob","subscriptions_url":"https:\/\/api.github.com\/users\/mrdoob\/subscriptions","node_id":"MDQ6VXNlcjk3MDg4","repos_url":"https:\/\/api.github.com\/users\/mrdoob\/repos","received_events_url":"https:\/\/api.github.com\/users\/mrdoob\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/mrdoob\/starred{\/owner}{\/repo}","site_admin":false,"login":"mrdoob","type":"User","id":97088,"followers_url":"https:\/\/api.github.com\/users\/mrdoob\/followers","organizations_url":"https:\/\/api.github.com\/users\/mrdoob\/orgs"}},{"index":3,"author_association":"OWNER","body":"Thanks!","created_at":"2017-03-21T16:04:05.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/11043#issuecomment-288127668","id":288127668,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/11043","node_id":"MDEyOklzc3VlQ29tbWVudDI4ODEyNzY2OA==","updated_at":"2017-03-21T16:04:05.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/288127668","user":{"following_url":"https:\/\/api.github.com\/users\/mrdoob\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/mrdoob\/events{\/privacy}","avatar_url":"https:\/\/avatars0.githubusercontent.com\/u\/97088?v=4","url":"https:\/\/api.github.com\/users\/mrdoob","gists_url":"https:\/\/api.github.com\/users\/mrdoob\/gists{\/gist_id}","html_url":"https:\/\/github.com\/mrdoob","subscriptions_url":"https:\/\/api.github.com\/users\/mrdoob\/subscriptions","node_id":"MDQ6VXNlcjk3MDg4","repos_url":"https:\/\/api.github.com\/users\/mrdoob\/repos","received_events_url":"https:\/\/api.github.com\/users\/mrdoob\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/mrdoob\/starred{\/owner}{\/repo}","site_admin":false,"login":"mrdoob","type":"User","id":97088,"followers_url":"https:\/\/api.github.com\/users\/mrdoob\/followers","organizations_url":"https:\/\/api.github.com\/users\/mrdoob\/orgs"}},{"index":4,"author_association":"CONTRIBUTOR","body":"Seems, that such things could be even faster using this pattern (but tested only in Chrome so far):\r\n```\r\nsmaller = edge1 < edge2 ? edge1 : edge2;  \r\nlarger = edge1 < edge2 ? edge2 : edge1;\r\nresult = smaller + ',' + larger ;\r\n```\r\n\r\n1. simple comparisons (instead of Math.min\/max) are sufficient for pairs of numbers \r\n2. faster access to interim results which are stored not in an array, but in separate variables \r\n\r\n@alemures Perhaps you could test this version, too?","created_at":"2017-03-21T17:21:26.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/11043#issuecomment-288153286","id":288153286,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/11043","node_id":"MDEyOklzc3VlQ29tbWVudDI4ODE1MzI4Ng==","updated_at":"2017-03-21T17:21:26.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/288153286","user":{"following_url":"https:\/\/api.github.com\/users\/jostschmithals\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/jostschmithals\/events{\/privacy}","avatar_url":"https:\/\/avatars1.githubusercontent.com\/u\/5700294?v=4","url":"https:\/\/api.github.com\/users\/jostschmithals","gists_url":"https:\/\/api.github.com\/users\/jostschmithals\/gists{\/gist_id}","html_url":"https:\/\/github.com\/jostschmithals","subscriptions_url":"https:\/\/api.github.com\/users\/jostschmithals\/subscriptions","node_id":"MDQ6VXNlcjU3MDAyOTQ=","repos_url":"https:\/\/api.github.com\/users\/jostschmithals\/repos","received_events_url":"https:\/\/api.github.com\/users\/jostschmithals\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/jostschmithals\/starred{\/owner}{\/repo}","site_admin":false,"login":"jostschmithals","type":"User","id":5700294,"followers_url":"https:\/\/api.github.com\/users\/jostschmithals\/followers","organizations_url":"https:\/\/api.github.com\/users\/jostschmithals\/orgs"}},{"index":5,"author_association":"CONTRIBUTOR","body":"Hi @jostschmithals , I tested this other version (also using is...else) before and I could not get any consistent performance improvement. Also having the values in the array \"edge\" of two elements makes a lot of sense in terms of readability.\r\n\r\nThese are the results:\r\n```\r\nFirefox\r\n\r\nMath.min\/Math.max sort: 9.8ms\r\nternary conditional: 14.87ms\r\n\r\nChrome\r\n\r\nMath.min\/Math.max sort: 89.111ms\r\nternary conditional: 85.542ms\r\n\r\nNode.js\r\n\r\nMath.min\/Math.max sort: 24.502ms\r\nternary conditional: 23.029ms\r\n```\r\n\r\nBenchmark:\r\n```\r\nvar N = 1e+6, i, edge = [ 0, 0 ], edge1, edge2, smaller, larger;\r\n\r\nconsole.time('Math.min\/Math.max sort');\r\nfor (i = 0; i < N; ++i) {\r\n  edge1 = Math.random();\r\n  edge2 = Math.random();\r\n  edge[0] = Math.min(edge1, edge2);\r\n  edge[1] = Math.max(edge1, edge2);\r\n}\r\nconsole.timeEnd('Math.min\/Math.max sort');\r\n\r\nconsole.time('ternary conditional');\r\nfor (i = 0; i < N; ++i) {\r\n  edge1 = Math.random();\r\n  edge2 = Math.random();\r\n  smaller = edge1 < edge2 ? edge1 : edge2;  \r\n  larger = edge1 < edge2 ? edge2 : edge1;\r\n}\r\nconsole.timeEnd('ternary conditional');\r\n```","created_at":"2017-03-21T17:50:00.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/11043#issuecomment-288162794","id":288162794,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/11043","node_id":"MDEyOklzc3VlQ29tbWVudDI4ODE2Mjc5NA==","updated_at":"2017-03-21T17:50:00.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/288162794","user":{"following_url":"https:\/\/api.github.com\/users\/alemures\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/alemures\/events{\/privacy}","avatar_url":"https:\/\/avatars1.githubusercontent.com\/u\/6663906?v=4","url":"https:\/\/api.github.com\/users\/alemures","gists_url":"https:\/\/api.github.com\/users\/alemures\/gists{\/gist_id}","html_url":"https:\/\/github.com\/alemures","subscriptions_url":"https:\/\/api.github.com\/users\/alemures\/subscriptions","node_id":"MDQ6VXNlcjY2NjM5MDY=","repos_url":"https:\/\/api.github.com\/users\/alemures\/repos","received_events_url":"https:\/\/api.github.com\/users\/alemures\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/alemures\/starred{\/owner}{\/repo}","site_admin":false,"login":"alemures","type":"User","id":6663906,"followers_url":"https:\/\/api.github.com\/users\/alemures\/followers","organizations_url":"https:\/\/api.github.com\/users\/alemures\/orgs"}},{"index":6,"author_association":"CONTRIBUTOR","body":"@alemures Thank you for checking this! On my machine (testing with N=1e+8 because of high statistical scattering otherwise) the time differences on Chrome were much clearer (for instance reliably ca. 2 : 5 using variables instead of an array). \r\n\r\nBut indeed: Firefox seems to handle the things completely different (but faster in total). So it isn\u2019t it worth to think about that further. \r\n\r\nAnyway: the reward for the great improvement is yours ;)","created_at":"2017-03-21T20:05:32.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/11043#issuecomment-288201715","id":288201715,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/11043","node_id":"MDEyOklzc3VlQ29tbWVudDI4ODIwMTcxNQ==","updated_at":"2017-03-21T20:05:32.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/288201715","user":{"following_url":"https:\/\/api.github.com\/users\/jostschmithals\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/jostschmithals\/events{\/privacy}","avatar_url":"https:\/\/avatars1.githubusercontent.com\/u\/5700294?v=4","url":"https:\/\/api.github.com\/users\/jostschmithals","gists_url":"https:\/\/api.github.com\/users\/jostschmithals\/gists{\/gist_id}","html_url":"https:\/\/github.com\/jostschmithals","subscriptions_url":"https:\/\/api.github.com\/users\/jostschmithals\/subscriptions","node_id":"MDQ6VXNlcjU3MDAyOTQ=","repos_url":"https:\/\/api.github.com\/users\/jostschmithals\/repos","received_events_url":"https:\/\/api.github.com\/users\/jostschmithals\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/jostschmithals\/starred{\/owner}{\/repo}","site_admin":false,"login":"jostschmithals","type":"User","id":5700294,"followers_url":"https:\/\/api.github.com\/users\/jostschmithals\/followers","organizations_url":"https:\/\/api.github.com\/users\/jostschmithals\/orgs"}},{"index":7,"author_association":"CONTRIBUTOR","body":"@alemures the concatenation benchmark is side effect free and uses the same inputs in each loop iteration, the browser seems to be optimizing away the concatenation which is the reason for such radical difference. Function call is harder to optimize away, so toString() is probably executed 10^6 times.\r\n\r\nIf you save the results of concatenation and use different inputs in each iteration, the difference is smaller, but concatenation is still faster: https:\/\/jsfiddle.net\/dcufv76d\/1\/","created_at":"2017-03-21T20:53:13.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/11043#issuecomment-288215019","id":288215019,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/11043","node_id":"MDEyOklzc3VlQ29tbWVudDI4ODIxNTAxOQ==","updated_at":"2017-03-21T20:53:13.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/288215019","user":{"following_url":"https:\/\/api.github.com\/users\/wrr\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/wrr\/events{\/privacy}","avatar_url":"https:\/\/avatars1.githubusercontent.com\/u\/1032408?v=4","url":"https:\/\/api.github.com\/users\/wrr","gists_url":"https:\/\/api.github.com\/users\/wrr\/gists{\/gist_id}","html_url":"https:\/\/github.com\/wrr","subscriptions_url":"https:\/\/api.github.com\/users\/wrr\/subscriptions","node_id":"MDQ6VXNlcjEwMzI0MDg=","repos_url":"https:\/\/api.github.com\/users\/wrr\/repos","received_events_url":"https:\/\/api.github.com\/users\/wrr\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/wrr\/starred{\/owner}{\/repo}","site_admin":false,"login":"wrr","type":"User","id":1032408,"followers_url":"https:\/\/api.github.com\/users\/wrr\/followers","organizations_url":"https:\/\/api.github.com\/users\/wrr\/orgs"}},{"index":8,"author_association":"CONTRIBUTOR","body":"Thanks for the advice @wrr , I have updated the isolated benchmarks and results so it now represents better the results from the Teapot benchmark.\r\n\r\nAlso @jostschmithals I ran the isolated benchmarks yesterday in Microsoft browsers (IE and Edge) and it seems they perform better using your solution with conditionals. I didn't see any regression running the Teapot benchmark in these browsers but I will look into it just it case.","created_at":"2017-03-22T12:28:32.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/11043#issuecomment-288383619","id":288383619,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/11043","node_id":"MDEyOklzc3VlQ29tbWVudDI4ODM4MzYxOQ==","updated_at":"2017-03-22T12:29:27.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/288383619","user":{"following_url":"https:\/\/api.github.com\/users\/alemures\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/alemures\/events{\/privacy}","avatar_url":"https:\/\/avatars1.githubusercontent.com\/u\/6663906?v=4","url":"https:\/\/api.github.com\/users\/alemures","gists_url":"https:\/\/api.github.com\/users\/alemures\/gists{\/gist_id}","html_url":"https:\/\/github.com\/alemures","subscriptions_url":"https:\/\/api.github.com\/users\/alemures\/subscriptions","node_id":"MDQ6VXNlcjY2NjM5MDY=","repos_url":"https:\/\/api.github.com\/users\/alemures\/repos","received_events_url":"https:\/\/api.github.com\/users\/alemures\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/alemures\/starred{\/owner}{\/repo}","site_admin":false,"login":"alemures","type":"User","id":6663906,"followers_url":"https:\/\/api.github.com\/users\/alemures\/followers","organizations_url":"https:\/\/api.github.com\/users\/alemures\/orgs"}}]}