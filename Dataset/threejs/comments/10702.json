{"schema": {"fields":[{"type":"integer","name":"index"},{"type":"string","name":"author_association"},{"type":"string","name":"body"},{"type":"datetime","name":"created_at"},{"type":"string","name":"html_url"},{"type":"integer","name":"id"},{"type":"string","name":"issue_url"},{"type":"string","name":"node_id"},{"type":"datetime","name":"updated_at"},{"type":"string","name":"url"},{"type":"string","name":"user"}],"pandas_version":"0.20.0","primaryKey":["index"]}, "data": [{"index":0,"author_association":"OWNER","body":"Maybe it would be better to have a setting in the library that makes `Matrix4` use `Float64Array` instead of `Float32Array`?","created_at":"2017-02-02T17:53:23.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/10702#issuecomment-277031423","id":277031423,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/10702","node_id":"MDEyOklzc3VlQ29tbWVudDI3NzAzMTQyMw==","updated_at":"2017-02-02T17:53:23.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/277031423","user":{"following_url":"https:\/\/api.github.com\/users\/mrdoob\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/mrdoob\/events{\/privacy}","avatar_url":"https:\/\/avatars0.githubusercontent.com\/u\/97088?v=4","url":"https:\/\/api.github.com\/users\/mrdoob","gists_url":"https:\/\/api.github.com\/users\/mrdoob\/gists{\/gist_id}","html_url":"https:\/\/github.com\/mrdoob","subscriptions_url":"https:\/\/api.github.com\/users\/mrdoob\/subscriptions","node_id":"MDQ6VXNlcjk3MDg4","repos_url":"https:\/\/api.github.com\/users\/mrdoob\/repos","received_events_url":"https:\/\/api.github.com\/users\/mrdoob\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/mrdoob\/starred{\/owner}{\/repo}","site_admin":false,"login":"mrdoob","type":"User","id":97088,"followers_url":"https:\/\/api.github.com\/users\/mrdoob\/followers","organizations_url":"https:\/\/api.github.com\/users\/mrdoob\/orgs"}},{"index":1,"author_association":"COLLABORATOR","body":"Perhaps the user can change the scale of world units from meters to kilometers, for example, to avoid large world-unit values.","created_at":"2017-02-02T18:08:43.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/10702#issuecomment-277035414","id":277035414,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/10702","node_id":"MDEyOklzc3VlQ29tbWVudDI3NzAzNTQxNA==","updated_at":"2017-02-02T18:08:43.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/277035414","user":{"following_url":"https:\/\/api.github.com\/users\/WestLangley\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/WestLangley\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/1000017?v=4","url":"https:\/\/api.github.com\/users\/WestLangley","gists_url":"https:\/\/api.github.com\/users\/WestLangley\/gists{\/gist_id}","html_url":"https:\/\/github.com\/WestLangley","subscriptions_url":"https:\/\/api.github.com\/users\/WestLangley\/subscriptions","node_id":"MDQ6VXNlcjEwMDAwMTc=","repos_url":"https:\/\/api.github.com\/users\/WestLangley\/repos","received_events_url":"https:\/\/api.github.com\/users\/WestLangley\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/WestLangley\/starred{\/owner}{\/repo}","site_admin":false,"login":"WestLangley","type":"User","id":1000017,"followers_url":"https:\/\/api.github.com\/users\/WestLangley\/followers","organizations_url":"https:\/\/api.github.com\/users\/WestLangley\/orgs"}},{"index":2,"author_association":"CONTRIBUTOR","body":"Thanks for the suggestions. \r\nI don't think using a Float64Array would solve anything, as it would need to be converted to a Float32Array before pushing to GL.\r\n\r\nAnd changing scales doesn't accomplish anything. Going to kilometers would make the numbers 1000 times smaller in absolute size, but the accuracy requirements would increase by 1000x. Only double precision values in the elements will do the trick.\r\n\r\nIf I can get rid of the Float32Array creation on each upload (by creating a \"static\" float32 array that I would copy to before uploading?), would this then become an acceptable pull request? or is more work needed, e.g. make this consistent between all uniforms, or perhaps make it a feature you must enable. Then there's the possibility that something like this would break client apps (e.g. someone accessing the elements directly).\r\n\r\nJust trying to get a handle on the amount of work involved and probability of getting a request like this accepted before putting in significant amount of work on this...","created_at":"2017-02-03T12:32:25.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/10702#issuecomment-277236521","id":277236521,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/10702","node_id":"MDEyOklzc3VlQ29tbWVudDI3NzIzNjUyMQ==","updated_at":"2017-02-03T12:33:40.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/277236521","user":{"following_url":"https:\/\/api.github.com\/users\/foijord\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/foijord\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/1118749?v=4","url":"https:\/\/api.github.com\/users\/foijord","gists_url":"https:\/\/api.github.com\/users\/foijord\/gists{\/gist_id}","html_url":"https:\/\/github.com\/foijord","subscriptions_url":"https:\/\/api.github.com\/users\/foijord\/subscriptions","node_id":"MDQ6VXNlcjExMTg3NDk=","repos_url":"https:\/\/api.github.com\/users\/foijord\/repos","received_events_url":"https:\/\/api.github.com\/users\/foijord\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/foijord\/starred{\/owner}{\/repo}","site_admin":false,"login":"foijord","type":"User","id":1118749,"followers_url":"https:\/\/api.github.com\/users\/foijord\/followers","organizations_url":"https:\/\/api.github.com\/users\/foijord\/orgs"}},{"index":3,"author_association":"COLLABORATOR","body":"Can you provide a simple live example to demonstrate the issue? (Not your entire project.)","created_at":"2017-02-03T17:01:50.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/10702#issuecomment-277302687","id":277302687,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/10702","node_id":"MDEyOklzc3VlQ29tbWVudDI3NzMwMjY4Nw==","updated_at":"2017-02-03T17:01:50.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/277302687","user":{"following_url":"https:\/\/api.github.com\/users\/WestLangley\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/WestLangley\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/1000017?v=4","url":"https:\/\/api.github.com\/users\/WestLangley","gists_url":"https:\/\/api.github.com\/users\/WestLangley\/gists{\/gist_id}","html_url":"https:\/\/github.com\/WestLangley","subscriptions_url":"https:\/\/api.github.com\/users\/WestLangley\/subscriptions","node_id":"MDQ6VXNlcjEwMDAwMTc=","repos_url":"https:\/\/api.github.com\/users\/WestLangley\/repos","received_events_url":"https:\/\/api.github.com\/users\/WestLangley\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/WestLangley\/starred{\/owner}{\/repo}","site_admin":false,"login":"WestLangley","type":"User","id":1000017,"followers_url":"https:\/\/api.github.com\/users\/WestLangley\/followers","organizations_url":"https:\/\/api.github.com\/users\/WestLangley\/orgs"}},{"index":4,"author_association":"CONTRIBUTOR","body":"Alright, I'll provide an example.","created_at":"2017-02-06T08:02:03.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/10702#issuecomment-277609065","id":277609065,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/10702","node_id":"MDEyOklzc3VlQ29tbWVudDI3NzYwOTA2NQ==","updated_at":"2017-02-06T08:02:03.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/277609065","user":{"following_url":"https:\/\/api.github.com\/users\/foijord\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/foijord\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/1118749?v=4","url":"https:\/\/api.github.com\/users\/foijord","gists_url":"https:\/\/api.github.com\/users\/foijord\/gists{\/gist_id}","html_url":"https:\/\/github.com\/foijord","subscriptions_url":"https:\/\/api.github.com\/users\/foijord\/subscriptions","node_id":"MDQ6VXNlcjExMTg3NDk=","repos_url":"https:\/\/api.github.com\/users\/foijord\/repos","received_events_url":"https:\/\/api.github.com\/users\/foijord\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/foijord\/starred{\/owner}{\/repo}","site_admin":false,"login":"foijord","type":"User","id":1118749,"followers_url":"https:\/\/api.github.com\/users\/foijord\/followers","organizations_url":"https:\/\/api.github.com\/users\/foijord\/orgs"}},{"index":5,"author_association":"CONTRIBUTOR","body":"I've hacked the 'webgl_interactive_cubes.html' example to show the issue. If you run this example now, you should see something like this: \r\n![image](https:\/\/cloud.githubusercontent.com\/assets\/1118749\/22645695\/94c45320-ec68-11e6-8ddd-e2ccad4e0816.png)\r\nThe cubes are laid out edge to edge, made smaller and placed at an offset from the origin.\r\n\r\nNow, undo my double-precision Matrix4 fix: git checkout 6c88bb3 build\/\r\nand you should see something this:\r\n![image](https:\/\/cloud.githubusercontent.com\/assets\/1118749\/22645664\/6eb5fed6-ec68-11e6-8a41-9ee2b5155df5.png)\r\nNotice the cracks between some of the cubes, and that they overlap some places. This is due to rounding errors from the float32 values in the Matrix4. \r\n\r\nSo if we keep the model and view matrices in double precision, the large values from the offset in the model matrix is canceled out by the large offset in the view matrix and the resulting model-view matrix doesn't contain large values any longer and can safely be converted to float32 and uploaded to the GPU.\r\n\r\nThis, together with the awesome logarithmic depth buffer feature, allows us to draw extremely large scenes, way beyond planetary-scale.","created_at":"2017-02-06T11:41:14.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/10702#issuecomment-277658175","id":277658175,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/10702","node_id":"MDEyOklzc3VlQ29tbWVudDI3NzY1ODE3NQ==","updated_at":"2017-02-06T11:41:14.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/277658175","user":{"following_url":"https:\/\/api.github.com\/users\/foijord\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/foijord\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/1118749?v=4","url":"https:\/\/api.github.com\/users\/foijord","gists_url":"https:\/\/api.github.com\/users\/foijord\/gists{\/gist_id}","html_url":"https:\/\/github.com\/foijord","subscriptions_url":"https:\/\/api.github.com\/users\/foijord\/subscriptions","node_id":"MDQ6VXNlcjExMTg3NDk=","repos_url":"https:\/\/api.github.com\/users\/foijord\/repos","received_events_url":"https:\/\/api.github.com\/users\/foijord\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/foijord\/starred{\/owner}{\/repo}","site_admin":false,"login":"foijord","type":"User","id":1118749,"followers_url":"https:\/\/api.github.com\/users\/foijord\/followers","organizations_url":"https:\/\/api.github.com\/users\/foijord\/orgs"}},{"index":6,"author_association":"OWNER","body":"https:\/\/jsfiddle.net\/memba5L2\/\r\nhttps:\/\/jsfiddle.net\/vtvt25z7\/","created_at":"2017-02-06T12:30:37.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/10702#issuecomment-277667588","id":277667588,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/10702","node_id":"MDEyOklzc3VlQ29tbWVudDI3NzY2NzU4OA==","updated_at":"2017-02-06T12:39:33.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/277667588","user":{"following_url":"https:\/\/api.github.com\/users\/mrdoob\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/mrdoob\/events{\/privacy}","avatar_url":"https:\/\/avatars0.githubusercontent.com\/u\/97088?v=4","url":"https:\/\/api.github.com\/users\/mrdoob","gists_url":"https:\/\/api.github.com\/users\/mrdoob\/gists{\/gist_id}","html_url":"https:\/\/github.com\/mrdoob","subscriptions_url":"https:\/\/api.github.com\/users\/mrdoob\/subscriptions","node_id":"MDQ6VXNlcjk3MDg4","repos_url":"https:\/\/api.github.com\/users\/mrdoob\/repos","received_events_url":"https:\/\/api.github.com\/users\/mrdoob\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/mrdoob\/starred{\/owner}{\/repo}","site_admin":false,"login":"mrdoob","type":"User","id":97088,"followers_url":"https:\/\/api.github.com\/users\/mrdoob\/followers","organizations_url":"https:\/\/api.github.com\/users\/mrdoob\/orgs"}},{"index":7,"author_association":"OWNER","body":"This actually sounds pretty good to me. I wonder what are the performance implications though.","created_at":"2017-02-06T12:35:54.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/10702#issuecomment-277668571","id":277668571,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/10702","node_id":"MDEyOklzc3VlQ29tbWVudDI3NzY2ODU3MQ==","updated_at":"2017-02-06T13:32:40.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/277668571","user":{"following_url":"https:\/\/api.github.com\/users\/mrdoob\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/mrdoob\/events{\/privacy}","avatar_url":"https:\/\/avatars0.githubusercontent.com\/u\/97088?v=4","url":"https:\/\/api.github.com\/users\/mrdoob","gists_url":"https:\/\/api.github.com\/users\/mrdoob\/gists{\/gist_id}","html_url":"https:\/\/github.com\/mrdoob","subscriptions_url":"https:\/\/api.github.com\/users\/mrdoob\/subscriptions","node_id":"MDQ6VXNlcjk3MDg4","repos_url":"https:\/\/api.github.com\/users\/mrdoob\/repos","received_events_url":"https:\/\/api.github.com\/users\/mrdoob\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/mrdoob\/starred{\/owner}{\/repo}","site_admin":false,"login":"mrdoob","type":"User","id":97088,"followers_url":"https:\/\/api.github.com\/users\/mrdoob\/followers","organizations_url":"https:\/\/api.github.com\/users\/mrdoob\/orgs"}},{"index":8,"author_association":"OWNER","body":"\/cc @bhouston ","created_at":"2017-02-06T12:42:28.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/10702#issuecomment-277669781","id":277669781,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/10702","node_id":"MDEyOklzc3VlQ29tbWVudDI3NzY2OTc4MQ==","updated_at":"2017-02-06T12:42:28.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/277669781","user":{"following_url":"https:\/\/api.github.com\/users\/mrdoob\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/mrdoob\/events{\/privacy}","avatar_url":"https:\/\/avatars0.githubusercontent.com\/u\/97088?v=4","url":"https:\/\/api.github.com\/users\/mrdoob","gists_url":"https:\/\/api.github.com\/users\/mrdoob\/gists{\/gist_id}","html_url":"https:\/\/github.com\/mrdoob","subscriptions_url":"https:\/\/api.github.com\/users\/mrdoob\/subscriptions","node_id":"MDQ6VXNlcjk3MDg4","repos_url":"https:\/\/api.github.com\/users\/mrdoob\/repos","received_events_url":"https:\/\/api.github.com\/users\/mrdoob\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/mrdoob\/starred{\/owner}{\/repo}","site_admin":false,"login":"mrdoob","type":"User","id":97088,"followers_url":"https:\/\/api.github.com\/users\/mrdoob\/followers","organizations_url":"https:\/\/api.github.com\/users\/mrdoob\/orgs"}},{"index":9,"author_association":"CONTRIBUTOR","body":"This is a strange issue that will arise when you want precision away from the origin with fp32 matrices.  This issue is present in UE4 and Unity 3D and nearly every other game engine.\r\n\r\nThe cost to switching to doubles for Matrix4 is not worth it because it will slow down everyone else for a special case situation.\r\n\r\nMy suggestion would be either to create a special Matrix4D that you can convert to a Matrix4 - that is likely easy.  Maybe contribute it to ```examples\/js```?\r\n\r\nOr you can do transforms to bring the things you care about to near the origin when they are going to be displayed on screen: http:\/\/answers.unity3d.com\/questions\/54739\/any-solution-for-extreamly-large-gameworlds-single.html\r\n\r\nI guess I do not want to move ThreeJS towards double precision because of this issue, but you do not have to do what I suggest.","created_at":"2017-02-06T13:31:03.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/10702#issuecomment-277680966","id":277680966,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/10702","node_id":"MDEyOklzc3VlQ29tbWVudDI3NzY4MDk2Ng==","updated_at":"2017-02-06T13:31:03.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/277680966","user":{"following_url":"https:\/\/api.github.com\/users\/bhouston\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/bhouston\/events{\/privacy}","avatar_url":"https:\/\/avatars3.githubusercontent.com\/u\/588541?v=4","url":"https:\/\/api.github.com\/users\/bhouston","gists_url":"https:\/\/api.github.com\/users\/bhouston\/gists{\/gist_id}","html_url":"https:\/\/github.com\/bhouston","subscriptions_url":"https:\/\/api.github.com\/users\/bhouston\/subscriptions","node_id":"MDQ6VXNlcjU4ODU0MQ==","repos_url":"https:\/\/api.github.com\/users\/bhouston\/repos","received_events_url":"https:\/\/api.github.com\/users\/bhouston\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/bhouston\/starred{\/owner}{\/repo}","site_admin":false,"login":"bhouston","type":"User","id":588541,"followers_url":"https:\/\/api.github.com\/users\/bhouston\/followers","organizations_url":"https:\/\/api.github.com\/users\/bhouston\/orgs"}},{"index":10,"author_association":"CONTRIBUTOR","body":"More details of UE4:\r\n\r\nhttps:\/\/forums.unrealengine.com\/showthread.php?109922-What-happened-to-the-quot-large-world-coordinate-system-quot-feature-the-highest-voted-in-the-roadmap\r\n\r\nAlthough maybe a feature somewhere to switch ThreeJS to double precision for those that need it?  This way you get your precision while others do not have to pay for the speed penalty.  Double is a lot slower than Single.  I understand that many mobile phones are currently horribly slow with doubles - but I do not have hard numbers.","created_at":"2017-02-06T13:34:15.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/10702#issuecomment-277681853","id":277681853,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/10702","node_id":"MDEyOklzc3VlQ29tbWVudDI3NzY4MTg1Mw==","updated_at":"2017-02-06T13:34:15.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/277681853","user":{"following_url":"https:\/\/api.github.com\/users\/bhouston\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/bhouston\/events{\/privacy}","avatar_url":"https:\/\/avatars3.githubusercontent.com\/u\/588541?v=4","url":"https:\/\/api.github.com\/users\/bhouston","gists_url":"https:\/\/api.github.com\/users\/bhouston\/gists{\/gist_id}","html_url":"https:\/\/github.com\/bhouston","subscriptions_url":"https:\/\/api.github.com\/users\/bhouston\/subscriptions","node_id":"MDQ6VXNlcjU4ODU0MQ==","repos_url":"https:\/\/api.github.com\/users\/bhouston\/repos","received_events_url":"https:\/\/api.github.com\/users\/bhouston\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/bhouston\/starred{\/owner}{\/repo}","site_admin":false,"login":"bhouston","type":"User","id":588541,"followers_url":"https:\/\/api.github.com\/users\/bhouston\/followers","organizations_url":"https:\/\/api.github.com\/users\/bhouston\/orgs"}},{"index":11,"author_association":"CONTRIBUTOR","body":"I'm questioning the assumption this change would slow things down. All Matrix operations are in double-precision already, and so is probably almost all of THREE.js. Take matrix multiplication for example, where the values in the float32 array are copied into temporary double-precision numbers before they are multiplied\/added up and then stored back in the 32 bit float array. This involves a conversion from float32 to float64 and back. My suggested change would simply get rid of this conversion, nothing else would change. Might even be faster!","created_at":"2017-02-06T13:58:55.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/10702#issuecomment-277688497","id":277688497,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/10702","node_id":"MDEyOklzc3VlQ29tbWVudDI3NzY4ODQ5Nw==","updated_at":"2017-02-06T13:58:55.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/277688497","user":{"following_url":"https:\/\/api.github.com\/users\/foijord\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/foijord\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/1118749?v=4","url":"https:\/\/api.github.com\/users\/foijord","gists_url":"https:\/\/api.github.com\/users\/foijord\/gists{\/gist_id}","html_url":"https:\/\/github.com\/foijord","subscriptions_url":"https:\/\/api.github.com\/users\/foijord\/subscriptions","node_id":"MDQ6VXNlcjExMTg3NDk=","repos_url":"https:\/\/api.github.com\/users\/foijord\/repos","received_events_url":"https:\/\/api.github.com\/users\/foijord\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/foijord\/starred{\/owner}{\/repo}","site_admin":false,"login":"foijord","type":"User","id":1118749,"followers_url":"https:\/\/api.github.com\/users\/foijord\/followers","organizations_url":"https:\/\/api.github.com\/users\/foijord\/orgs"}},{"index":12,"author_association":"CONTRIBUTOR","body":"> Take matrix multiplication for example, where the values in the float32 array are copied into temporary double-precision numbers before they are multiplied\/added up and then stored back in the 32 bit float array.\r\n\r\nWe will have to convert to fp32 on upload.  I am okay to try this change.  I would love to see some benchmarks to show that this is actually faster.  If it is, I think that would be amazing.\r\n\r\nI just checked and it seems that fp64 performance on mobile is actually incredibly good -- I figured it would be horrible, but I guess I am wrong?  http:\/\/www.anandtech.com\/show\/6971\/exploring-the-floating-point-performance-of-modern-arm-processors","created_at":"2017-02-06T14:07:55.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/10702#issuecomment-277691083","id":277691083,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/10702","node_id":"MDEyOklzc3VlQ29tbWVudDI3NzY5MTA4Mw==","updated_at":"2017-02-06T14:07:55.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/277691083","user":{"following_url":"https:\/\/api.github.com\/users\/bhouston\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/bhouston\/events{\/privacy}","avatar_url":"https:\/\/avatars3.githubusercontent.com\/u\/588541?v=4","url":"https:\/\/api.github.com\/users\/bhouston","gists_url":"https:\/\/api.github.com\/users\/bhouston\/gists{\/gist_id}","html_url":"https:\/\/github.com\/bhouston","subscriptions_url":"https:\/\/api.github.com\/users\/bhouston\/subscriptions","node_id":"MDQ6VXNlcjU4ODU0MQ==","repos_url":"https:\/\/api.github.com\/users\/bhouston\/repos","received_events_url":"https:\/\/api.github.com\/users\/bhouston\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/bhouston\/starred{\/owner}{\/repo}","site_admin":false,"login":"bhouston","type":"User","id":588541,"followers_url":"https:\/\/api.github.com\/users\/bhouston\/followers","organizations_url":"https:\/\/api.github.com\/users\/bhouston\/orgs"}},{"index":13,"author_association":"CONTRIBUTOR","body":"I do know that the matrix multiplies when rendering can be a significant cost in ThreeJS for complex scene graphs.  So if we can make matrix multiplication faster, that would be a great contribution in general.","created_at":"2017-02-06T14:10:08.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/10702#issuecomment-277691712","id":277691712,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/10702","node_id":"MDEyOklzc3VlQ29tbWVudDI3NzY5MTcxMg==","updated_at":"2017-02-06T14:10:08.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/277691712","user":{"following_url":"https:\/\/api.github.com\/users\/bhouston\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/bhouston\/events{\/privacy}","avatar_url":"https:\/\/avatars3.githubusercontent.com\/u\/588541?v=4","url":"https:\/\/api.github.com\/users\/bhouston","gists_url":"https:\/\/api.github.com\/users\/bhouston\/gists{\/gist_id}","html_url":"https:\/\/github.com\/bhouston","subscriptions_url":"https:\/\/api.github.com\/users\/bhouston\/subscriptions","node_id":"MDQ6VXNlcjU4ODU0MQ==","repos_url":"https:\/\/api.github.com\/users\/bhouston\/repos","received_events_url":"https:\/\/api.github.com\/users\/bhouston\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/bhouston\/starred{\/owner}{\/repo}","site_admin":false,"login":"bhouston","type":"User","id":588541,"followers_url":"https:\/\/api.github.com\/users\/bhouston\/followers","organizations_url":"https:\/\/api.github.com\/users\/bhouston\/orgs"}},{"index":14,"author_association":"CONTRIBUTOR","body":"OK, let me know if I should try to test the performance of this, or make further changes before it can be accepted.","created_at":"2017-02-06T14:29:38.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/10702#issuecomment-277697868","id":277697868,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/10702","node_id":"MDEyOklzc3VlQ29tbWVudDI3NzY5Nzg2OA==","updated_at":"2017-02-06T14:29:38.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/277697868","user":{"following_url":"https:\/\/api.github.com\/users\/foijord\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/foijord\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/1118749?v=4","url":"https:\/\/api.github.com\/users\/foijord","gists_url":"https:\/\/api.github.com\/users\/foijord\/gists{\/gist_id}","html_url":"https:\/\/github.com\/foijord","subscriptions_url":"https:\/\/api.github.com\/users\/foijord\/subscriptions","node_id":"MDQ6VXNlcjExMTg3NDk=","repos_url":"https:\/\/api.github.com\/users\/foijord\/repos","received_events_url":"https:\/\/api.github.com\/users\/foijord\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/foijord\/starred{\/owner}{\/repo}","site_admin":false,"login":"foijord","type":"User","id":1118749,"followers_url":"https:\/\/api.github.com\/users\/foijord\/followers","organizations_url":"https:\/\/api.github.com\/users\/foijord\/orgs"}},{"index":15,"author_association":"OWNER","body":"I think we just have to meassure these two:\r\n\r\nhttps:\/\/rawgit.com\/mrdoob\/three.js\/dev\/examples\/webgl_performance.html\r\nhttps:\/\/rawgit.com\/foijord\/three.js\/double-precision-uniforms\/examples\/webgl_performance.html\r\n\r\n(~58fps vs ~38fps here)","created_at":"2017-02-06T21:09:28.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/10702#issuecomment-277814160","id":277814160,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/10702","node_id":"MDEyOklzc3VlQ29tbWVudDI3NzgxNDE2MA==","updated_at":"2017-02-06T21:10:46.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/277814160","user":{"following_url":"https:\/\/api.github.com\/users\/mrdoob\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/mrdoob\/events{\/privacy}","avatar_url":"https:\/\/avatars0.githubusercontent.com\/u\/97088?v=4","url":"https:\/\/api.github.com\/users\/mrdoob","gists_url":"https:\/\/api.github.com\/users\/mrdoob\/gists{\/gist_id}","html_url":"https:\/\/github.com\/mrdoob","subscriptions_url":"https:\/\/api.github.com\/users\/mrdoob\/subscriptions","node_id":"MDQ6VXNlcjk3MDg4","repos_url":"https:\/\/api.github.com\/users\/mrdoob\/repos","received_events_url":"https:\/\/api.github.com\/users\/mrdoob\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/mrdoob\/starred{\/owner}{\/repo}","site_admin":false,"login":"mrdoob","type":"User","id":97088,"followers_url":"https:\/\/api.github.com\/users\/mrdoob\/followers","organizations_url":"https:\/\/api.github.com\/users\/mrdoob\/orgs"}},{"index":16,"author_association":"CONTRIBUTOR","body":"I'm surprised by the difference in fps you are seeing. On my end, there's no such difference. I'm on Windows 7, Chrome 56.0.2924.87 (64-bit), Quadro K6000, so completely CPU bound. I'm curious to know what you're running on.\r\n\r\nI noticed that the perf example has varying fps based on camera position, and the monkeys are placed out randomly within a box, something that could perhaps make it less repetable. So i've removed the camera movement, and placed the monkeys on a regular grid to get more consistent results. I also added more monkeys to get the fps down from 60. I get about 55 fps on both of these. \r\n\r\nhacked version using vanilla three.js:\r\nhttps:\/\/rawgit.com\/foijord\/three.js\/dev\/examples\/webgl_performance.html\r\n\r\nhacked version using double-precision fix for Matrix4\r\nhttps:\/\/rawgit.com\/foijord\/three.js\/double-precision-uniforms\/examples\/webgl_performance.html\r\n\r\nWhat's your performance on these updated versions?","created_at":"2017-02-07T09:21:06.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/10702#issuecomment-277943395","id":277943395,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/10702","node_id":"MDEyOklzc3VlQ29tbWVudDI3Nzk0MzM5NQ==","updated_at":"2017-02-07T09:21:06.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/277943395","user":{"following_url":"https:\/\/api.github.com\/users\/foijord\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/foijord\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/1118749?v=4","url":"https:\/\/api.github.com\/users\/foijord","gists_url":"https:\/\/api.github.com\/users\/foijord\/gists{\/gist_id}","html_url":"https:\/\/github.com\/foijord","subscriptions_url":"https:\/\/api.github.com\/users\/foijord\/subscriptions","node_id":"MDQ6VXNlcjExMTg3NDk=","repos_url":"https:\/\/api.github.com\/users\/foijord\/repos","received_events_url":"https:\/\/api.github.com\/users\/foijord\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/foijord\/starred{\/owner}{\/repo}","site_admin":false,"login":"foijord","type":"User","id":1118749,"followers_url":"https:\/\/api.github.com\/users\/foijord\/followers","organizations_url":"https:\/\/api.github.com\/users\/foijord\/orgs"}},{"index":17,"author_association":"CONTRIBUTOR","body":"I profiled this on a Qualcomm 820 \/ Adreno 530 with an HD screen and I get 22fps on both versions.  Which is nice. :)\r\n\r\nOn iPad Air 2 I get 12fps with the old and 11fps the new double Matrix4 - which is pretty close.\r\n\r\nMy desktop runs at 60fps on both versions so I can not see a difference.","created_at":"2017-02-07T13:33:43.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/10702#issuecomment-278000649","id":278000649,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/10702","node_id":"MDEyOklzc3VlQ29tbWVudDI3ODAwMDY0OQ==","updated_at":"2017-02-07T13:33:55.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/278000649","user":{"following_url":"https:\/\/api.github.com\/users\/bhouston\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/bhouston\/events{\/privacy}","avatar_url":"https:\/\/avatars3.githubusercontent.com\/u\/588541?v=4","url":"https:\/\/api.github.com\/users\/bhouston","gists_url":"https:\/\/api.github.com\/users\/bhouston\/gists{\/gist_id}","html_url":"https:\/\/github.com\/bhouston","subscriptions_url":"https:\/\/api.github.com\/users\/bhouston\/subscriptions","node_id":"MDQ6VXNlcjU4ODU0MQ==","repos_url":"https:\/\/api.github.com\/users\/bhouston\/repos","received_events_url":"https:\/\/api.github.com\/users\/bhouston\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/bhouston\/starred{\/owner}{\/repo}","site_admin":false,"login":"bhouston","type":"User","id":588541,"followers_url":"https:\/\/api.github.com\/users\/bhouston\/followers","organizations_url":"https:\/\/api.github.com\/users\/bhouston\/orgs"}},{"index":18,"author_association":"CONTRIBUTOR","body":"Added more monkeys, I'm down to about 30 fps now, both versions.","created_at":"2017-02-07T13:43:20.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/10702#issuecomment-278003012","id":278003012,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/10702","node_id":"MDEyOklzc3VlQ29tbWVudDI3ODAwMzAxMg==","updated_at":"2017-02-07T13:43:20.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/278003012","user":{"following_url":"https:\/\/api.github.com\/users\/foijord\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/foijord\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/1118749?v=4","url":"https:\/\/api.github.com\/users\/foijord","gists_url":"https:\/\/api.github.com\/users\/foijord\/gists{\/gist_id}","html_url":"https:\/\/github.com\/foijord","subscriptions_url":"https:\/\/api.github.com\/users\/foijord\/subscriptions","node_id":"MDQ6VXNlcjExMTg3NDk=","repos_url":"https:\/\/api.github.com\/users\/foijord\/repos","received_events_url":"https:\/\/api.github.com\/users\/foijord\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/foijord\/starred{\/owner}{\/repo}","site_admin":false,"login":"foijord","type":"User","id":1118749,"followers_url":"https:\/\/api.github.com\/users\/foijord\/followers","organizations_url":"https:\/\/api.github.com\/users\/foijord\/orgs"}},{"index":19,"author_association":"CONTRIBUTOR","body":"On my desktop I am getting results where the double-precision-uniforms (which is not an accurate branch name, but whatever) is getting about 3-4fps more than the plain version (57fps versus 54fps.)  The test is pretty variable and changes its fps on refreshes of the page, but the double-precision-uniforms branch seems to be consistently faster.  I've refreshed about 8 times each and there is a difference here - I assume it isn't side effect of something else...","created_at":"2017-02-07T14:16:54.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/10702#issuecomment-278012005","id":278012005,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/10702","node_id":"MDEyOklzc3VlQ29tbWVudDI3ODAxMjAwNQ==","updated_at":"2017-02-07T14:17:09.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/278012005","user":{"following_url":"https:\/\/api.github.com\/users\/bhouston\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/bhouston\/events{\/privacy}","avatar_url":"https:\/\/avatars3.githubusercontent.com\/u\/588541?v=4","url":"https:\/\/api.github.com\/users\/bhouston","gists_url":"https:\/\/api.github.com\/users\/bhouston\/gists{\/gist_id}","html_url":"https:\/\/github.com\/bhouston","subscriptions_url":"https:\/\/api.github.com\/users\/bhouston\/subscriptions","node_id":"MDQ6VXNlcjU4ODU0MQ==","repos_url":"https:\/\/api.github.com\/users\/bhouston\/repos","received_events_url":"https:\/\/api.github.com\/users\/bhouston\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/bhouston\/starred{\/owner}{\/repo}","site_admin":false,"login":"bhouston","type":"User","id":588541,"followers_url":"https:\/\/api.github.com\/users\/bhouston\/followers","organizations_url":"https:\/\/api.github.com\/users\/bhouston\/orgs"}},{"index":20,"author_association":"CONTRIBUTOR","body":"I've updated the matrix multiplication method in the double-precision-uniforms branch. I think I got the fps up slightly by avoiding some copying, at the cost of code clarity. Perhaps this would help with performance on that iPad as well?","created_at":"2017-02-08T09:42:41.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/10702#issuecomment-278279362","id":278279362,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/10702","node_id":"MDEyOklzc3VlQ29tbWVudDI3ODI3OTM2Mg==","updated_at":"2017-02-08T09:42:41.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/278279362","user":{"following_url":"https:\/\/api.github.com\/users\/foijord\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/foijord\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/1118749?v=4","url":"https:\/\/api.github.com\/users\/foijord","gists_url":"https:\/\/api.github.com\/users\/foijord\/gists{\/gist_id}","html_url":"https:\/\/github.com\/foijord","subscriptions_url":"https:\/\/api.github.com\/users\/foijord\/subscriptions","node_id":"MDQ6VXNlcjExMTg3NDk=","repos_url":"https:\/\/api.github.com\/users\/foijord\/repos","received_events_url":"https:\/\/api.github.com\/users\/foijord\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/foijord\/starred{\/owner}{\/repo}","site_admin":false,"login":"foijord","type":"User","id":1118749,"followers_url":"https:\/\/api.github.com\/users\/foijord\/followers","organizations_url":"https:\/\/api.github.com\/users\/foijord\/orgs"}},{"index":21,"author_association":"CONTRIBUTOR","body":"@foijord The technique you implemented to avoid copying would have also likely kept all the values as floats in the Float32Array branch, thus that would have been an effective performance optimization as well.  \r\n\r\nI have tried that style of optimization elsewhere, keeping everything in an array and it generally works well.  I am not sure if it is because it avoids copies or that works because it allows for the compiler to leave everything as Float32 rather than converting up to Float64.","created_at":"2017-02-08T13:15:32.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/10702#issuecomment-278325710","id":278325710,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/10702","node_id":"MDEyOklzc3VlQ29tbWVudDI3ODMyNTcxMA==","updated_at":"2017-02-08T13:15:32.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/278325710","user":{"following_url":"https:\/\/api.github.com\/users\/bhouston\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/bhouston\/events{\/privacy}","avatar_url":"https:\/\/avatars3.githubusercontent.com\/u\/588541?v=4","url":"https:\/\/api.github.com\/users\/bhouston","gists_url":"https:\/\/api.github.com\/users\/bhouston\/gists{\/gist_id}","html_url":"https:\/\/github.com\/bhouston","subscriptions_url":"https:\/\/api.github.com\/users\/bhouston\/subscriptions","node_id":"MDQ6VXNlcjU4ODU0MQ==","repos_url":"https:\/\/api.github.com\/users\/bhouston\/repos","received_events_url":"https:\/\/api.github.com\/users\/bhouston\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/bhouston\/starred{\/owner}{\/repo}","site_admin":false,"login":"bhouston","type":"User","id":588541,"followers_url":"https:\/\/api.github.com\/users\/bhouston\/followers","organizations_url":"https:\/\/api.github.com\/users\/bhouston\/orgs"}},{"index":22,"author_association":"CONTRIBUTOR","body":"I noticed just now that multiplyMatrices is called with 'this' as argument a couple of places (multiply and premultiply), so copying is needed in those cases. Added a fix to address that, which may or may not negate any performance gains.","created_at":"2017-02-08T13:19:37.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/10702#issuecomment-278326574","id":278326574,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/10702","node_id":"MDEyOklzc3VlQ29tbWVudDI3ODMyNjU3NA==","updated_at":"2017-02-08T13:33:32.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/278326574","user":{"following_url":"https:\/\/api.github.com\/users\/foijord\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/foijord\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/1118749?v=4","url":"https:\/\/api.github.com\/users\/foijord","gists_url":"https:\/\/api.github.com\/users\/foijord\/gists{\/gist_id}","html_url":"https:\/\/github.com\/foijord","subscriptions_url":"https:\/\/api.github.com\/users\/foijord\/subscriptions","node_id":"MDQ6VXNlcjExMTg3NDk=","repos_url":"https:\/\/api.github.com\/users\/foijord\/repos","received_events_url":"https:\/\/api.github.com\/users\/foijord\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/foijord\/starred{\/owner}{\/repo}","site_admin":false,"login":"foijord","type":"User","id":1118749,"followers_url":"https:\/\/api.github.com\/users\/foijord\/followers","organizations_url":"https:\/\/api.github.com\/users\/foijord\/orgs"}},{"index":23,"author_association":"OWNER","body":"> @foijord The technique you implemented to avoid copying would have also likely kept all the values as floats in the Float32Array branch, thus that would have been an effective performance optimization as well.  \r\n\r\nAww... Too good to be true...\r\n\r\n![screen shot 2017-02-08 at 23 26 48](https:\/\/cloud.githubusercontent.com\/assets\/97088\/22773331\/724a3a86-ee56-11e6-82e0-00d13d1cc69a.png)\r\n\r\n![screen shot 2017-02-08 at 23 27 01](https:\/\/cloud.githubusercontent.com\/assets\/97088\/22773338\/7a0facba-ee56-11e6-998e-61992a07fc03.png)\r\n","created_at":"2017-02-09T07:29:49.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/10702#issuecomment-278567338","id":278567338,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/10702","node_id":"MDEyOklzc3VlQ29tbWVudDI3ODU2NzMzOA==","updated_at":"2017-02-09T07:29:49.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/278567338","user":{"following_url":"https:\/\/api.github.com\/users\/mrdoob\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/mrdoob\/events{\/privacy}","avatar_url":"https:\/\/avatars0.githubusercontent.com\/u\/97088?v=4","url":"https:\/\/api.github.com\/users\/mrdoob","gists_url":"https:\/\/api.github.com\/users\/mrdoob\/gists{\/gist_id}","html_url":"https:\/\/github.com\/mrdoob","subscriptions_url":"https:\/\/api.github.com\/users\/mrdoob\/subscriptions","node_id":"MDQ6VXNlcjk3MDg4","repos_url":"https:\/\/api.github.com\/users\/mrdoob\/repos","received_events_url":"https:\/\/api.github.com\/users\/mrdoob\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/mrdoob\/starred{\/owner}{\/repo}","site_admin":false,"login":"mrdoob","type":"User","id":97088,"followers_url":"https:\/\/api.github.com\/users\/mrdoob\/followers","organizations_url":"https:\/\/api.github.com\/users\/mrdoob\/orgs"}},{"index":24,"author_association":"CONTRIBUTOR","body":"@mrdoob  wrote: \"Aww... Too good to be true...\"\r\n\r\nYou do not have to copy the two source arrays as you did.  Just create one Float32Array temp for the result of the multiply and copy that into the result.  Thus you have one less Float32Array copy.  If the numbers hold it is faster than the many temporaries.","created_at":"2017-02-09T07:38:27.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/10702#issuecomment-278568703","id":278568703,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/10702","node_id":"MDEyOklzc3VlQ29tbWVudDI3ODU2ODcwMw==","updated_at":"2017-02-09T07:38:27.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/278568703","user":{"following_url":"https:\/\/api.github.com\/users\/bhouston\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/bhouston\/events{\/privacy}","avatar_url":"https:\/\/avatars3.githubusercontent.com\/u\/588541?v=4","url":"https:\/\/api.github.com\/users\/bhouston","gists_url":"https:\/\/api.github.com\/users\/bhouston\/gists{\/gist_id}","html_url":"https:\/\/github.com\/bhouston","subscriptions_url":"https:\/\/api.github.com\/users\/bhouston\/subscriptions","node_id":"MDQ6VXNlcjU4ODU0MQ==","repos_url":"https:\/\/api.github.com\/users\/bhouston\/repos","received_events_url":"https:\/\/api.github.com\/users\/bhouston\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/bhouston\/starred{\/owner}{\/repo}","site_admin":false,"login":"bhouston","type":"User","id":588541,"followers_url":"https:\/\/api.github.com\/users\/bhouston\/followers","organizations_url":"https:\/\/api.github.com\/users\/bhouston\/orgs"}},{"index":25,"author_association":"CONTRIBUTOR","body":"If I remove one copy, the total time of your second version is 271ms, which is quite a bit less than ~400ms of the top version. ","created_at":"2017-02-09T07:41:23.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/10702#issuecomment-278569182","id":278569182,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/10702","node_id":"MDEyOklzc3VlQ29tbWVudDI3ODU2OTE4Mg==","updated_at":"2017-02-09T07:41:23.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/278569182","user":{"following_url":"https:\/\/api.github.com\/users\/bhouston\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/bhouston\/events{\/privacy}","avatar_url":"https:\/\/avatars3.githubusercontent.com\/u\/588541?v=4","url":"https:\/\/api.github.com\/users\/bhouston","gists_url":"https:\/\/api.github.com\/users\/bhouston\/gists{\/gist_id}","html_url":"https:\/\/github.com\/bhouston","subscriptions_url":"https:\/\/api.github.com\/users\/bhouston\/subscriptions","node_id":"MDQ6VXNlcjU4ODU0MQ==","repos_url":"https:\/\/api.github.com\/users\/bhouston\/repos","received_events_url":"https:\/\/api.github.com\/users\/bhouston\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/bhouston\/starred{\/owner}{\/repo}","site_admin":false,"login":"bhouston","type":"User","id":588541,"followers_url":"https:\/\/api.github.com\/users\/bhouston\/followers","organizations_url":"https:\/\/api.github.com\/users\/bhouston\/orgs"}},{"index":26,"author_association":"OWNER","body":"![screen shot 2017-02-08 at 23 52 49](https:\/\/cloud.githubusercontent.com\/assets\/97088\/22773982\/c4e99478-ee59-11e6-9b18-311bd7b9a676.png)\r\n\r\nYeah, caching seems to still be faster.\r\n","created_at":"2017-02-09T07:53:32.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/10702#issuecomment-278571159","id":278571159,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/10702","node_id":"MDEyOklzc3VlQ29tbWVudDI3ODU3MTE1OQ==","updated_at":"2017-02-09T07:53:32.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/278571159","user":{"following_url":"https:\/\/api.github.com\/users\/mrdoob\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/mrdoob\/events{\/privacy}","avatar_url":"https:\/\/avatars0.githubusercontent.com\/u\/97088?v=4","url":"https:\/\/api.github.com\/users\/mrdoob","gists_url":"https:\/\/api.github.com\/users\/mrdoob\/gists{\/gist_id}","html_url":"https:\/\/github.com\/mrdoob","subscriptions_url":"https:\/\/api.github.com\/users\/mrdoob\/subscriptions","node_id":"MDQ6VXNlcjk3MDg4","repos_url":"https:\/\/api.github.com\/users\/mrdoob\/repos","received_events_url":"https:\/\/api.github.com\/users\/mrdoob\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/mrdoob\/starred{\/owner}{\/repo}","site_admin":false,"login":"mrdoob","type":"User","id":97088,"followers_url":"https:\/\/api.github.com\/users\/mrdoob\/followers","organizations_url":"https:\/\/api.github.com\/users\/mrdoob\/orgs"}},{"index":27,"author_association":"OWNER","body":"Hmm... \r\n\r\n![screen shot 2017-02-08 at 23 58 05](https:\/\/cloud.githubusercontent.com\/assets\/97088\/22774160\/ae591138-ee5a-11e6-93c6-e37ef5eb982d.png)\r\n\r\n@foijord do you mind trying this?\r\n\r\n```js\r\nmultiplyMatrices: ( function () {\r\n\r\n\tvar te = [ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ];\r\n\r\n\treturn function ( a, b ) {\r\n\r\n\t\tvar ae = a.elements;\r\n\t\tvar be = b.elements;\r\n\r\n\t\tte[ 0 ] = ae[ 0 ] * be[ 0 ] + ae[ 4 ] * be[ 1 ] + ae[ 8 ] * be[ 2 ] + ae[ 12 ] * be[ 3 ];\r\n\t\tte[ 4 ] = ae[ 0 ] * be[ 4 ] + ae[ 4 ] * be[ 5 ] + ae[ 8 ] * be[ 6 ] + ae[ 12 ] * be[ 7 ];\r\n\t\tte[ 8 ] = ae[ 0 ] * be[ 8 ] + ae[ 4 ] * be[ 9 ] + ae[ 8 ] * be[ 10 ] + ae[ 12 ] * be[ 11 ];\r\n\t\tte[ 12 ] = ae[ 0 ] * be[ 12 ] + ae[ 4 ] * be[ 13 ] + ae[ 8 ] * be[ 14 ] + ae[ 12 ] * be[ 15 ];\r\n\r\n\t\tte[ 1 ] = ae[ 1 ] * be[ 0 ] + ae[ 5 ] * be[ 1 ] + ae[ 9 ] * be[ 2 ] + ae[ 13 ] * be[ 3 ];\r\n\t\tte[ 5 ] = ae[ 1 ] * be[ 4 ] + ae[ 5 ] * be[ 5 ] + ae[ 9 ] * be[ 6 ] + ae[ 13 ] * be[ 7 ];\r\n\t\tte[ 9 ] = ae[ 1 ] * be[ 8 ] + ae[ 5 ] * be[ 9 ] + ae[ 9 ] * be[ 10 ] + ae[ 13 ] * be[ 11 ];\r\n\t\tte[ 13 ] = ae[ 1 ] * be[ 12 ] + ae[ 5 ] * be[ 13 ] + ae[ 9 ] * be[ 14 ] + ae[ 13 ] * be[ 15 ];\r\n\r\n\t\tte[ 2 ] = ae[ 2 ] * be[ 0 ] + ae[ 6 ] * be[ 1 ] + ae[ 10 ] * be[ 2 ] + ae[ 14 ] * be[ 3 ];\r\n\t\tte[ 6 ] = ae[ 2 ] * be[ 4 ] + ae[ 6 ] * be[ 5 ] + ae[ 10 ] * be[ 6 ] + ae[ 14 ] * be[ 7 ];\r\n\t\tte[ 10 ] = ae[ 2 ] * be[ 8 ] + ae[ 6 ] * be[ 9 ] + ae[ 10 ] * be[ 10 ] + ae[ 14 ] * be[ 11 ];\r\n\t\tte[ 14 ] = ae[ 2 ] * be[ 12 ] + ae[ 6 ] * be[ 13 ] + ae[ 10 ] * be[ 14 ] + ae[ 14 ] * be[ 15 ];\r\n\r\n\t\tte[ 3 ] = ae[ 3 ] * be[ 0 ] + ae[ 7 ] * be[ 1 ] + ae[ 11 ] * be[ 2 ] + ae[ 15 ] * be[ 3 ];\r\n\t\tte[ 7 ] = ae[ 3 ] * be[ 4 ] + ae[ 7 ] * be[ 5 ] + ae[ 11 ] * be[ 6 ] + ae[ 15 ] * be[ 7 ];\r\n\t\tte[ 11 ] = ae[ 3 ] * be[ 8 ] + ae[ 7 ] * be[ 9 ] + ae[ 11 ] * be[ 10 ] + ae[ 15 ] * be[ 11 ];\r\n\t\tte[ 15 ] = ae[ 3 ] * be[ 12 ] + ae[ 7 ] * be[ 13 ] + ae[ 11 ] * be[ 14 ] + ae[ 15 ] * be[ 15 ];\r\n\r\n\t\tthis.elements = te.slice();\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n} )(),\r\n```","created_at":"2017-02-09T08:04:37.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/10702#issuecomment-278573048","id":278573048,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/10702","node_id":"MDEyOklzc3VlQ29tbWVudDI3ODU3MzA0OA==","updated_at":"2017-02-09T08:04:37.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/278573048","user":{"following_url":"https:\/\/api.github.com\/users\/mrdoob\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/mrdoob\/events{\/privacy}","avatar_url":"https:\/\/avatars0.githubusercontent.com\/u\/97088?v=4","url":"https:\/\/api.github.com\/users\/mrdoob","gists_url":"https:\/\/api.github.com\/users\/mrdoob\/gists{\/gist_id}","html_url":"https:\/\/github.com\/mrdoob","subscriptions_url":"https:\/\/api.github.com\/users\/mrdoob\/subscriptions","node_id":"MDQ6VXNlcjk3MDg4","repos_url":"https:\/\/api.github.com\/users\/mrdoob\/repos","received_events_url":"https:\/\/api.github.com\/users\/mrdoob\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/mrdoob\/starred{\/owner}{\/repo}","site_admin":false,"login":"mrdoob","type":"User","id":97088,"followers_url":"https:\/\/api.github.com\/users\/mrdoob\/followers","organizations_url":"https:\/\/api.github.com\/users\/mrdoob\/orgs"}},{"index":28,"author_association":"OWNER","body":"Or maybe...\r\n\r\n```js\r\nmultiplyMatrices: ( function () {\r\n\r\n\tvar e = [ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ];\r\n\r\n\treturn function ( a, b ) {\r\n\r\n\t\tvar ae = a.elements;\r\n\t\tvar be = b.elements;\r\n\t\tvar te = this.elements;\r\n\r\n\t\te[ 0 ] = ae[ 0 ] * be[ 0 ] + ae[ 4 ] * be[ 1 ] + ae[ 8 ] * be[ 2 ] + ae[ 12 ] * be[ 3 ];\r\n\t\te[ 4 ] = ae[ 0 ] * be[ 4 ] + ae[ 4 ] * be[ 5 ] + ae[ 8 ] * be[ 6 ] + ae[ 12 ] * be[ 7 ];\r\n\t\te[ 8 ] = ae[ 0 ] * be[ 8 ] + ae[ 4 ] * be[ 9 ] + ae[ 8 ] * be[ 10 ] + ae[ 12 ] * be[ 11 ];\r\n\t\te[ 12 ] = ae[ 0 ] * be[ 12 ] + ae[ 4 ] * be[ 13 ] + ae[ 8 ] * be[ 14 ] + ae[ 12 ] * be[ 15 ];\r\n\r\n\t\te[ 1 ] = ae[ 1 ] * be[ 0 ] + ae[ 5 ] * be[ 1 ] + ae[ 9 ] * be[ 2 ] + ae[ 13 ] * be[ 3 ];\r\n\t\te[ 5 ] = ae[ 1 ] * be[ 4 ] + ae[ 5 ] * be[ 5 ] + ae[ 9 ] * be[ 6 ] + ae[ 13 ] * be[ 7 ];\r\n\t\te[ 9 ] = ae[ 1 ] * be[ 8 ] + ae[ 5 ] * be[ 9 ] + ae[ 9 ] * be[ 10 ] + ae[ 13 ] * be[ 11 ];\r\n\t\te[ 13 ] = ae[ 1 ] * be[ 12 ] + ae[ 5 ] * be[ 13 ] + ae[ 9 ] * be[ 14 ] + ae[ 13 ] * be[ 15 ];\r\n\r\n\t\te[ 2 ] = ae[ 2 ] * be[ 0 ] + ae[ 6 ] * be[ 1 ] + ae[ 10 ] * be[ 2 ] + ae[ 14 ] * be[ 3 ];\r\n\t\te[ 6 ] = ae[ 2 ] * be[ 4 ] + ae[ 6 ] * be[ 5 ] + ae[ 10 ] * be[ 6 ] + ae[ 14 ] * be[ 7 ];\r\n\t\te[ 10 ] = ae[ 2 ] * be[ 8 ] + ae[ 6 ] * be[ 9 ] + ae[ 10 ] * be[ 10 ] + ae[ 14 ] * be[ 11 ];\r\n\t\te[ 14 ] = ae[ 2 ] * be[ 12 ] + ae[ 6 ] * be[ 13 ] + ae[ 10 ] * be[ 14 ] + ae[ 14 ] * be[ 15 ];\r\n\r\n\t\te[ 3 ] = ae[ 3 ] * be[ 0 ] + ae[ 7 ] * be[ 1 ] + ae[ 11 ] * be[ 2 ] + ae[ 15 ] * be[ 3 ];\r\n\t\te[ 7 ] = ae[ 3 ] * be[ 4 ] + ae[ 7 ] * be[ 5 ] + ae[ 11 ] * be[ 6 ] + ae[ 15 ] * be[ 7 ];\r\n\t\te[ 11 ] = ae[ 3 ] * be[ 8 ] + ae[ 7 ] * be[ 9 ] + ae[ 11 ] * be[ 10 ] + ae[ 15 ] * be[ 11 ];\r\n\t\te[ 15 ] = ae[ 3 ] * be[ 12 ] + ae[ 7 ] * be[ 13 ] + ae[ 11 ] * be[ 14 ] + ae[ 15 ] * be[ 15 ];\r\n\r\n\t\tfor ( var i = 0; i < 16; i ++ ) te[ i ] = e[ i ];\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n} )(),","created_at":"2017-02-09T08:12:31.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/10702#issuecomment-278574447","id":278574447,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/10702","node_id":"MDEyOklzc3VlQ29tbWVudDI3ODU3NDQ0Nw==","updated_at":"2017-02-09T08:12:31.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/278574447","user":{"following_url":"https:\/\/api.github.com\/users\/mrdoob\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/mrdoob\/events{\/privacy}","avatar_url":"https:\/\/avatars0.githubusercontent.com\/u\/97088?v=4","url":"https:\/\/api.github.com\/users\/mrdoob","gists_url":"https:\/\/api.github.com\/users\/mrdoob\/gists{\/gist_id}","html_url":"https:\/\/github.com\/mrdoob","subscriptions_url":"https:\/\/api.github.com\/users\/mrdoob\/subscriptions","node_id":"MDQ6VXNlcjk3MDg4","repos_url":"https:\/\/api.github.com\/users\/mrdoob\/repos","received_events_url":"https:\/\/api.github.com\/users\/mrdoob\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/mrdoob\/starred{\/owner}{\/repo}","site_admin":false,"login":"mrdoob","type":"User","id":97088,"followers_url":"https:\/\/api.github.com\/users\/mrdoob\/followers","organizations_url":"https:\/\/api.github.com\/users\/mrdoob\/orgs"}},{"index":29,"author_association":"OWNER","body":"But, I bet the original `multiplyMatrices` code works the best for the `Array` approach.","created_at":"2017-02-09T08:15:54.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/10702#issuecomment-278575058","id":278575058,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/10702","node_id":"MDEyOklzc3VlQ29tbWVudDI3ODU3NTA1OA==","updated_at":"2017-02-09T08:19:03.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/278575058","user":{"following_url":"https:\/\/api.github.com\/users\/mrdoob\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/mrdoob\/events{\/privacy}","avatar_url":"https:\/\/avatars0.githubusercontent.com\/u\/97088?v=4","url":"https:\/\/api.github.com\/users\/mrdoob","gists_url":"https:\/\/api.github.com\/users\/mrdoob\/gists{\/gist_id}","html_url":"https:\/\/github.com\/mrdoob","subscriptions_url":"https:\/\/api.github.com\/users\/mrdoob\/subscriptions","node_id":"MDQ6VXNlcjk3MDg4","repos_url":"https:\/\/api.github.com\/users\/mrdoob\/repos","received_events_url":"https:\/\/api.github.com\/users\/mrdoob\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/mrdoob\/starred{\/owner}{\/repo}","site_admin":false,"login":"mrdoob","type":"User","id":97088,"followers_url":"https:\/\/api.github.com\/users\/mrdoob\/followers","organizations_url":"https:\/\/api.github.com\/users\/mrdoob\/orgs"}}]}