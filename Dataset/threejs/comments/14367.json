{"schema": {"fields":[{"type":"integer","name":"index"},{"type":"string","name":"author_association"},{"type":"string","name":"body"},{"type":"datetime","name":"created_at"},{"type":"string","name":"html_url"},{"type":"integer","name":"id"},{"type":"string","name":"issue_url"},{"type":"string","name":"node_id"},{"type":"datetime","name":"updated_at"},{"type":"string","name":"url"},{"type":"string","name":"user"}],"pandas_version":"0.20.0","primaryKey":["index"]}, "data": [{"index":0,"author_association":"OWNER","body":"Just want to double check... `GLTFLoader` is producing buffergeometries that have `geometry.index` pointing to a `attribute` that is `undefined`?\r\n\r\n","created_at":"2018-06-26T07:18:38.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/14367#issuecomment-400205622","id":400205622,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/14367","node_id":"MDEyOklzc3VlQ29tbWVudDQwMDIwNTYyMg==","updated_at":"2018-06-26T07:18:38.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/400205622","user":{"following_url":"https:\/\/api.github.com\/users\/mrdoob\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/mrdoob\/events{\/privacy}","avatar_url":"https:\/\/avatars0.githubusercontent.com\/u\/97088?v=4","url":"https:\/\/api.github.com\/users\/mrdoob","gists_url":"https:\/\/api.github.com\/users\/mrdoob\/gists{\/gist_id}","html_url":"https:\/\/github.com\/mrdoob","subscriptions_url":"https:\/\/api.github.com\/users\/mrdoob\/subscriptions","node_id":"MDQ6VXNlcjk3MDg4","repos_url":"https:\/\/api.github.com\/users\/mrdoob\/repos","received_events_url":"https:\/\/api.github.com\/users\/mrdoob\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/mrdoob\/starred{\/owner}{\/repo}","site_admin":false,"login":"mrdoob","type":"User","id":97088,"followers_url":"https:\/\/api.github.com\/users\/mrdoob\/followers","organizations_url":"https:\/\/api.github.com\/users\/mrdoob\/orgs"}},{"index":1,"author_association":"OWNER","body":"\/cc @donmccurdy @takahirox ","created_at":"2018-06-26T07:19:25.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/14367#issuecomment-400205825","id":400205825,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/14367","node_id":"MDEyOklzc3VlQ29tbWVudDQwMDIwNTgyNQ==","updated_at":"2018-06-26T07:19:25.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/400205825","user":{"following_url":"https:\/\/api.github.com\/users\/mrdoob\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/mrdoob\/events{\/privacy}","avatar_url":"https:\/\/avatars0.githubusercontent.com\/u\/97088?v=4","url":"https:\/\/api.github.com\/users\/mrdoob","gists_url":"https:\/\/api.github.com\/users\/mrdoob\/gists{\/gist_id}","html_url":"https:\/\/github.com\/mrdoob","subscriptions_url":"https:\/\/api.github.com\/users\/mrdoob\/subscriptions","node_id":"MDQ6VXNlcjk3MDg4","repos_url":"https:\/\/api.github.com\/users\/mrdoob\/repos","received_events_url":"https:\/\/api.github.com\/users\/mrdoob\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/mrdoob\/starred{\/owner}{\/repo}","site_admin":false,"login":"mrdoob","type":"User","id":97088,"followers_url":"https:\/\/api.github.com\/users\/mrdoob\/followers","organizations_url":"https:\/\/api.github.com\/users\/mrdoob\/orgs"}},{"index":2,"author_association":"NONE","body":"Hi @mrdoob this could very well be possible, and seems to be what causes the error. A simple undefined check fixes this, and the models load absolutely fine. What's strange, is that this bug does not occur just by loading the GLTF models themselves, I must additionally create a standard Plane mesh before the error occurs.","created_at":"2018-06-26T07:30:49.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/14367#issuecomment-400208866","id":400208866,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/14367","node_id":"MDEyOklzc3VlQ29tbWVudDQwMDIwODg2Ng==","updated_at":"2018-06-26T07:30:49.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/400208866","user":{"following_url":"https:\/\/api.github.com\/users\/kurozael\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/kurozael\/events{\/privacy}","avatar_url":"https:\/\/avatars1.githubusercontent.com\/u\/486972?v=4","url":"https:\/\/api.github.com\/users\/kurozael","gists_url":"https:\/\/api.github.com\/users\/kurozael\/gists{\/gist_id}","html_url":"https:\/\/github.com\/kurozael","subscriptions_url":"https:\/\/api.github.com\/users\/kurozael\/subscriptions","node_id":"MDQ6VXNlcjQ4Njk3Mg==","repos_url":"https:\/\/api.github.com\/users\/kurozael\/repos","received_events_url":"https:\/\/api.github.com\/users\/kurozael\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/kurozael\/starred{\/owner}{\/repo}","site_admin":false,"login":"kurozael","type":"User","id":486972,"followers_url":"https:\/\/api.github.com\/users\/kurozael\/followers","organizations_url":"https:\/\/api.github.com\/users\/kurozael\/orgs"}},{"index":3,"author_association":"OWNER","body":"> What's strange, is that this bug does not occur just by loading the GLTF models themselves, I must additionally create a standard Plane mesh before the error occurs.\r\n\r\nOh! I would prefer to understand exactly what is happening before blindly adding a undefined check...","created_at":"2018-06-26T08:10:01.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/14367#issuecomment-400219736","id":400219736,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/14367","node_id":"MDEyOklzc3VlQ29tbWVudDQwMDIxOTczNg==","updated_at":"2018-06-26T08:10:01.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/400219736","user":{"following_url":"https:\/\/api.github.com\/users\/mrdoob\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/mrdoob\/events{\/privacy}","avatar_url":"https:\/\/avatars0.githubusercontent.com\/u\/97088?v=4","url":"https:\/\/api.github.com\/users\/mrdoob","gists_url":"https:\/\/api.github.com\/users\/mrdoob\/gists{\/gist_id}","html_url":"https:\/\/github.com\/mrdoob","subscriptions_url":"https:\/\/api.github.com\/users\/mrdoob\/subscriptions","node_id":"MDQ6VXNlcjk3MDg4","repos_url":"https:\/\/api.github.com\/users\/mrdoob\/repos","received_events_url":"https:\/\/api.github.com\/users\/mrdoob\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/mrdoob\/starred{\/owner}{\/repo}","site_admin":false,"login":"mrdoob","type":"User","id":97088,"followers_url":"https:\/\/api.github.com\/users\/mrdoob\/followers","organizations_url":"https:\/\/api.github.com\/users\/mrdoob\/orgs"}},{"index":4,"author_association":"NONE","body":"I understand your concern @mrdoob, and I can assure you that my code is not changing anything to undefined. So whilst I am not sure how this is happening when the GLTF model is loaded and another standard mesh is created purely with Three.js, this simple undefined check does fix it without any other symptoms.\r\n\r\nPlease feel free to investigate the \"why\", but in the mean time if this fix could be implemented with _at least_ a warning instead of an error that would be great!\r\n\r\nIf you want to investigate further, whilst I couldn't create a JSFiddle demonstrating the bug, the project files at https:\/\/github.com\/mrdoob\/three.js\/files\/1372366\/test.zip do demonstrate the problem and should be relatively easy for you to debug.","created_at":"2018-06-26T09:22:21.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/14367#issuecomment-400241456","id":400241456,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/14367","node_id":"MDEyOklzc3VlQ29tbWVudDQwMDI0MTQ1Ng==","updated_at":"2018-06-26T09:22:29.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/400241456","user":{"following_url":"https:\/\/api.github.com\/users\/kurozael\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/kurozael\/events{\/privacy}","avatar_url":"https:\/\/avatars1.githubusercontent.com\/u\/486972?v=4","url":"https:\/\/api.github.com\/users\/kurozael","gists_url":"https:\/\/api.github.com\/users\/kurozael\/gists{\/gist_id}","html_url":"https:\/\/github.com\/kurozael","subscriptions_url":"https:\/\/api.github.com\/users\/kurozael\/subscriptions","node_id":"MDQ6VXNlcjQ4Njk3Mg==","repos_url":"https:\/\/api.github.com\/users\/kurozael\/repos","received_events_url":"https:\/\/api.github.com\/users\/kurozael\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/kurozael\/starred{\/owner}{\/repo}","site_admin":false,"login":"kurozael","type":"User","id":486972,"followers_url":"https:\/\/api.github.com\/users\/kurozael\/followers","organizations_url":"https:\/\/api.github.com\/users\/kurozael\/orgs"}},{"index":5,"author_association":"OWNER","body":"@donmccurdy @takahirox any ideas guys?","created_at":"2018-06-27T11:33:31.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/14367#issuecomment-400640677","id":400640677,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/14367","node_id":"MDEyOklzc3VlQ29tbWVudDQwMDY0MDY3Nw==","updated_at":"2018-06-27T11:33:31.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/400640677","user":{"following_url":"https:\/\/api.github.com\/users\/mrdoob\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/mrdoob\/events{\/privacy}","avatar_url":"https:\/\/avatars0.githubusercontent.com\/u\/97088?v=4","url":"https:\/\/api.github.com\/users\/mrdoob","gists_url":"https:\/\/api.github.com\/users\/mrdoob\/gists{\/gist_id}","html_url":"https:\/\/github.com\/mrdoob","subscriptions_url":"https:\/\/api.github.com\/users\/mrdoob\/subscriptions","node_id":"MDQ6VXNlcjk3MDg4","repos_url":"https:\/\/api.github.com\/users\/mrdoob\/repos","received_events_url":"https:\/\/api.github.com\/users\/mrdoob\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/mrdoob\/starred{\/owner}{\/repo}","site_admin":false,"login":"mrdoob","type":"User","id":97088,"followers_url":"https:\/\/api.github.com\/users\/mrdoob\/followers","organizations_url":"https:\/\/api.github.com\/users\/mrdoob\/orgs"}},{"index":6,"author_association":"COLLABORATOR","body":"Sorry, I've been a bit busy. I'll look into soon.","created_at":"2018-06-27T11:55:00.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/14367#issuecomment-400645601","id":400645601,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/14367","node_id":"MDEyOklzc3VlQ29tbWVudDQwMDY0NTYwMQ==","updated_at":"2018-06-27T11:55:00.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/400645601","user":{"following_url":"https:\/\/api.github.com\/users\/takahirox\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/takahirox\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/7637832?v=4","url":"https:\/\/api.github.com\/users\/takahirox","gists_url":"https:\/\/api.github.com\/users\/takahirox\/gists{\/gist_id}","html_url":"https:\/\/github.com\/takahirox","subscriptions_url":"https:\/\/api.github.com\/users\/takahirox\/subscriptions","node_id":"MDQ6VXNlcjc2Mzc4MzI=","repos_url":"https:\/\/api.github.com\/users\/takahirox\/repos","received_events_url":"https:\/\/api.github.com\/users\/takahirox\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/takahirox\/starred{\/owner}{\/repo}","site_admin":false,"login":"takahirox","type":"User","id":7637832,"followers_url":"https:\/\/api.github.com\/users\/takahirox\/followers","organizations_url":"https:\/\/api.github.com\/users\/takahirox\/orgs"}},{"index":7,"author_association":"COLLABORATOR","body":"I can't see a problem with that model, even after adding a mesh with a PlaneGeometry to the scene. The model contains 86 meshes, all with `geometry.index` defined. We'll need a JSFiddle showing the issue I think, otherwise I don't see a reason to merge a check looking specifically for one of many invalid things `geometry.index` could be set to.","created_at":"2018-06-27T14:29:33.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/14367#issuecomment-400692903","id":400692903,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/14367","node_id":"MDEyOklzc3VlQ29tbWVudDQwMDY5MjkwMw==","updated_at":"2018-06-27T14:29:33.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/400692903","user":{"following_url":"https:\/\/api.github.com\/users\/donmccurdy\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/donmccurdy\/events{\/privacy}","avatar_url":"https:\/\/avatars3.githubusercontent.com\/u\/1848368?v=4","url":"https:\/\/api.github.com\/users\/donmccurdy","gists_url":"https:\/\/api.github.com\/users\/donmccurdy\/gists{\/gist_id}","html_url":"https:\/\/github.com\/donmccurdy","subscriptions_url":"https:\/\/api.github.com\/users\/donmccurdy\/subscriptions","node_id":"MDQ6VXNlcjE4NDgzNjg=","repos_url":"https:\/\/api.github.com\/users\/donmccurdy\/repos","received_events_url":"https:\/\/api.github.com\/users\/donmccurdy\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/donmccurdy\/starred{\/owner}{\/repo}","site_admin":false,"login":"donmccurdy","type":"User","id":1848368,"followers_url":"https:\/\/api.github.com\/users\/donmccurdy\/followers","organizations_url":"https:\/\/api.github.com\/users\/donmccurdy\/orgs"}},{"index":8,"author_association":"NONE","body":"Hi @donmccurdy,\r\n\r\nWell, this issue has happened to at least 2 of your users... if a simple undefined check fixes it, I don't see the harm in implementing this fix and at the very least just throwing up a warning if it isn't defined.\r\n\r\nThis issue is definitely occurring for me, I'm unable to get it to occur with JSFiddle, but that doesn't mean it isn't happening. I'm happy to provide a video recording of the error occurring if that helps. It's going to be a lot of trouble for us to continue using Three.js for our project if we have to manually apply this fix every time we update.\r\n\r\nPlease let me know any other way I can help to demonstrate the problem to you, if that's what it takes to get this check merged in. It's very important to us as we are very excited about the prospect of using Three.js for our upcoming project.\r\n\r\nMany thanks!","created_at":"2018-06-27T14:36:31.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/14367#issuecomment-400695732","id":400695732,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/14367","node_id":"MDEyOklzc3VlQ29tbWVudDQwMDY5NTczMg==","updated_at":"2018-06-27T14:42:55.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/400695732","user":{"following_url":"https:\/\/api.github.com\/users\/kurozael\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/kurozael\/events{\/privacy}","avatar_url":"https:\/\/avatars1.githubusercontent.com\/u\/486972?v=4","url":"https:\/\/api.github.com\/users\/kurozael","gists_url":"https:\/\/api.github.com\/users\/kurozael\/gists{\/gist_id}","html_url":"https:\/\/github.com\/kurozael","subscriptions_url":"https:\/\/api.github.com\/users\/kurozael\/subscriptions","node_id":"MDQ6VXNlcjQ4Njk3Mg==","repos_url":"https:\/\/api.github.com\/users\/kurozael\/repos","received_events_url":"https:\/\/api.github.com\/users\/kurozael\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/kurozael\/starred{\/owner}{\/repo}","site_admin":false,"login":"kurozael","type":"User","id":486972,"followers_url":"https:\/\/api.github.com\/users\/kurozael\/followers","organizations_url":"https:\/\/api.github.com\/users\/kurozael\/orgs"}},{"index":9,"author_association":"OWNER","body":"> Well, this issue has happened to at least 2 of your users... if a simple undefined check fixes it, I don't see the harm in implementing this fix and at the very least just throwing up a warning if it isn't defined.\r\n\r\nI'm sorry, we can't just add checks just in case. If we did that kind of things the code would be much harder to read and understand.\r\n\r\n> This issue is definitely occurring for me, I'm unable to get it to occur with JSFiddle, but that doesn't mean it isn't happening.\r\n\r\nIf you can't reproduce with JSFiddle it may be a bug in your own code.\r\n\r\n> I'm happy to provide a video recording of the error occurring if that helps. \r\n\r\nAnything helps.","created_at":"2018-06-27T14:51:53.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/14367#issuecomment-400701473","id":400701473,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/14367","node_id":"MDEyOklzc3VlQ29tbWVudDQwMDcwMTQ3Mw==","updated_at":"2018-06-27T14:51:53.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/400701473","user":{"following_url":"https:\/\/api.github.com\/users\/mrdoob\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/mrdoob\/events{\/privacy}","avatar_url":"https:\/\/avatars0.githubusercontent.com\/u\/97088?v=4","url":"https:\/\/api.github.com\/users\/mrdoob","gists_url":"https:\/\/api.github.com\/users\/mrdoob\/gists{\/gist_id}","html_url":"https:\/\/github.com\/mrdoob","subscriptions_url":"https:\/\/api.github.com\/users\/mrdoob\/subscriptions","node_id":"MDQ6VXNlcjk3MDg4","repos_url":"https:\/\/api.github.com\/users\/mrdoob\/repos","received_events_url":"https:\/\/api.github.com\/users\/mrdoob\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/mrdoob\/starred{\/owner}{\/repo}","site_admin":false,"login":"mrdoob","type":"User","id":97088,"followers_url":"https:\/\/api.github.com\/users\/mrdoob\/followers","organizations_url":"https:\/\/api.github.com\/users\/mrdoob\/orgs"}},{"index":10,"author_association":"NONE","body":"I will try to get a video of it tomorrow at work, I don't think it's a bug in my own code because but it might be environmental. For example the original reporter of this bug included his project and it was producing the error for him, similarly the error produces on my machine with the same code I tried putting into JSFiddle. This is on Chrome.\r\n\r\nJust to be clear, everything works fine with GLTF loading, _until_ I add this code...\r\n\r\n```\r\n        let brandingTexture = textureLoader.load(\".\/table\/switch.png\");\r\n        let geometry = new THREE.PlaneGeometry(300, 300);\r\n        let material = new THREE.MeshBasicMaterial({\r\n            map: brandingTexture,\r\n            side: THREE.DoubleSide,\r\n            transparent: true\r\n        });\r\n        let plane = new THREE.Mesh(geometry, material);\r\n\r\n        this.threeLayer.scene3D.add(plane);\r\n```\r\n\r\nThe GLTF model is also added to \"this.threeLayer.scene3D\". For some reason having both causes that error to occur, I can have one or the other, but both at the same time doesn't work.\r\n\r\nSo I don't see how my code could be causing the bug.\r\n\r\nI can also tell you from my logging that I iterate through every single BufferGeometry that gets loaded and they all have `index` set to a BufferAttribute whether or not the Plane is created. So somehow, even though `index` is always set to a valid attribute, the error is still occuring. This is because of this line:\r\n\r\n`attribute = attributes.get( index );`\r\n\r\nThe attributes (WebGLAttributes) `get` method is returning undefined for the index, _even though_ the index is a valid BufferAttribute. **This implies to me that for some reason WebGLAttributes.get is not returning the right value sometimes.** But how this is dependent on whether or not a Plane is created, absolutely baffles me.\r\n\r\nIt would seem to me that you guys are far more likely to be able to investigate this with good measure than I am, seeing as how this is your code base :)\r\n\r\nThanks again!\r\n\r\n**Edit: Where do the attributes even get added to the WebGLAttributes.buffers WeakMap for the renderer?**","created_at":"2018-06-28T12:05:18.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/14367#issuecomment-401012039","id":401012039,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/14367","node_id":"MDEyOklzc3VlQ29tbWVudDQwMTAxMjAzOQ==","updated_at":"2018-06-28T13:05:35.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/401012039","user":{"following_url":"https:\/\/api.github.com\/users\/kurozael\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/kurozael\/events{\/privacy}","avatar_url":"https:\/\/avatars1.githubusercontent.com\/u\/486972?v=4","url":"https:\/\/api.github.com\/users\/kurozael","gists_url":"https:\/\/api.github.com\/users\/kurozael\/gists{\/gist_id}","html_url":"https:\/\/github.com\/kurozael","subscriptions_url":"https:\/\/api.github.com\/users\/kurozael\/subscriptions","node_id":"MDQ6VXNlcjQ4Njk3Mg==","repos_url":"https:\/\/api.github.com\/users\/kurozael\/repos","received_events_url":"https:\/\/api.github.com\/users\/kurozael\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/kurozael\/starred{\/owner}{\/repo}","site_admin":false,"login":"kurozael","type":"User","id":486972,"followers_url":"https:\/\/api.github.com\/users\/kurozael\/followers","organizations_url":"https:\/\/api.github.com\/users\/kurozael\/orgs"}},{"index":11,"author_association":"OWNER","body":"@kurozael any chance you can create a jsfiddle?","created_at":"2018-07-02T10:41:30.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/14367#issuecomment-401760756","id":401760756,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/14367","node_id":"MDEyOklzc3VlQ29tbWVudDQwMTc2MDc1Ng==","updated_at":"2018-07-02T10:41:30.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/401760756","user":{"following_url":"https:\/\/api.github.com\/users\/mrdoob\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/mrdoob\/events{\/privacy}","avatar_url":"https:\/\/avatars0.githubusercontent.com\/u\/97088?v=4","url":"https:\/\/api.github.com\/users\/mrdoob","gists_url":"https:\/\/api.github.com\/users\/mrdoob\/gists{\/gist_id}","html_url":"https:\/\/github.com\/mrdoob","subscriptions_url":"https:\/\/api.github.com\/users\/mrdoob\/subscriptions","node_id":"MDQ6VXNlcjk3MDg4","repos_url":"https:\/\/api.github.com\/users\/mrdoob\/repos","received_events_url":"https:\/\/api.github.com\/users\/mrdoob\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/mrdoob\/starred{\/owner}{\/repo}","site_admin":false,"login":"mrdoob","type":"User","id":97088,"followers_url":"https:\/\/api.github.com\/users\/mrdoob\/followers","organizations_url":"https:\/\/api.github.com\/users\/mrdoob\/orgs"}},{"index":12,"author_association":"NONE","body":"Hi @mrdoob,\r\n\r\nI created a JSFiddle, however the issue does not manifest itself there. What I cannot explain, and maybe you guys can help, is why even when .index is set to valid BufferAttribute values, sometimes the WebGLAttributes.get method can return undefined when passed in a value that is valid. \r\n\r\nLeads me to believe that in some circumstances, the WebGLAttributes are not properly updated or in sync. It would be good practice to throw in a check to ensure that the returned value is not undefined, at the very least, to prevent this bug from occuring.\r\n\r\nI appreciate that you are unable to reproduce it, but my team is unable to use Three.js to complete our project while this bug persists and it is a serious blocker for us. We can use a patched version, but this will present problems for us down the line.\r\n\r\n**Edit: I've updated my local to use the newly release r94 and the bug no longer occurs. Very strange.**","created_at":"2018-07-02T12:23:14.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/14367#issuecomment-401786644","id":401786644,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/14367","node_id":"MDEyOklzc3VlQ29tbWVudDQwMTc4NjY0NA==","updated_at":"2018-07-02T12:53:23.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/401786644","user":{"following_url":"https:\/\/api.github.com\/users\/kurozael\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/kurozael\/events{\/privacy}","avatar_url":"https:\/\/avatars1.githubusercontent.com\/u\/486972?v=4","url":"https:\/\/api.github.com\/users\/kurozael","gists_url":"https:\/\/api.github.com\/users\/kurozael\/gists{\/gist_id}","html_url":"https:\/\/github.com\/kurozael","subscriptions_url":"https:\/\/api.github.com\/users\/kurozael\/subscriptions","node_id":"MDQ6VXNlcjQ4Njk3Mg==","repos_url":"https:\/\/api.github.com\/users\/kurozael\/repos","received_events_url":"https:\/\/api.github.com\/users\/kurozael\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/kurozael\/starred{\/owner}{\/repo}","site_admin":false,"login":"kurozael","type":"User","id":486972,"followers_url":"https:\/\/api.github.com\/users\/kurozael\/followers","organizations_url":"https:\/\/api.github.com\/users\/kurozael\/orgs"}},{"index":13,"author_association":"OWNER","body":"> Edit: I've updated my local to use the newly release r94 and the bug no longer occurs. Very strange.\r\n\r\nI see... Should this be closed then?","created_at":"2018-07-02T14:02:05.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/14367#issuecomment-401815058","id":401815058,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/14367","node_id":"MDEyOklzc3VlQ29tbWVudDQwMTgxNTA1OA==","updated_at":"2018-07-02T14:02:05.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/401815058","user":{"following_url":"https:\/\/api.github.com\/users\/mrdoob\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/mrdoob\/events{\/privacy}","avatar_url":"https:\/\/avatars0.githubusercontent.com\/u\/97088?v=4","url":"https:\/\/api.github.com\/users\/mrdoob","gists_url":"https:\/\/api.github.com\/users\/mrdoob\/gists{\/gist_id}","html_url":"https:\/\/github.com\/mrdoob","subscriptions_url":"https:\/\/api.github.com\/users\/mrdoob\/subscriptions","node_id":"MDQ6VXNlcjk3MDg4","repos_url":"https:\/\/api.github.com\/users\/mrdoob\/repos","received_events_url":"https:\/\/api.github.com\/users\/mrdoob\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/mrdoob\/starred{\/owner}{\/repo}","site_admin":false,"login":"mrdoob","type":"User","id":97088,"followers_url":"https:\/\/api.github.com\/users\/mrdoob\/followers","organizations_url":"https:\/\/api.github.com\/users\/mrdoob\/orgs"}},{"index":14,"author_association":"NONE","body":"Sure @mrdoob, if the issue comes up again in a future version we can re-evaluate it. Thanks!","created_at":"2018-07-02T14:23:30.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/14367#issuecomment-401822332","id":401822332,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/14367","node_id":"MDEyOklzc3VlQ29tbWVudDQwMTgyMjMzMg==","updated_at":"2018-07-02T14:23:30.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/401822332","user":{"following_url":"https:\/\/api.github.com\/users\/kurozael\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/kurozael\/events{\/privacy}","avatar_url":"https:\/\/avatars1.githubusercontent.com\/u\/486972?v=4","url":"https:\/\/api.github.com\/users\/kurozael","gists_url":"https:\/\/api.github.com\/users\/kurozael\/gists{\/gist_id}","html_url":"https:\/\/github.com\/kurozael","subscriptions_url":"https:\/\/api.github.com\/users\/kurozael\/subscriptions","node_id":"MDQ6VXNlcjQ4Njk3Mg==","repos_url":"https:\/\/api.github.com\/users\/kurozael\/repos","received_events_url":"https:\/\/api.github.com\/users\/kurozael\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/kurozael\/starred{\/owner}{\/repo}","site_admin":false,"login":"kurozael","type":"User","id":486972,"followers_url":"https:\/\/api.github.com\/users\/kurozael\/followers","organizations_url":"https:\/\/api.github.com\/users\/kurozael\/orgs"}},{"index":15,"author_association":"NONE","body":"I am having the same problem with R97 (attributes.get returning undefined). \r\nAdditionally I have behavior where one mesh uses the geometry of another. \r\nI have three basic meshes:\r\n```\r\n    const vis = new THREE.Object3D();\r\n    vis.add(new THREE.Mesh(\r\n      new THREE.BoxGeometry(50, 30, 30),\r\n      new THREE.MeshBasicMaterial({ color: \"red\", wireframe: true }),\r\n    ));\r\n    const vis2 = new THREE.Object3D();\r\n    vis2.add(new THREE.Mesh(\r\n      new THREE.SphereGeometry(14),\r\n      new THREE.MeshBasicMaterial({ color: \"blue\", wireframe: true }),\r\n    ));\r\n    this.node.add(vis);\r\n    this.node.add(vis2);\r\n    const vis2 = new THREE.Object3D();\r\n    vis2.userData = {a: 1};\r\n    vis2.add(new THREE.Mesh(\r\n       new THREE.BoxGeometry(140, 20, 20),\r\n       new THREE.MeshBasicMaterial({ color: \"yellow\", wireframe: true }),\r\n    ));\r\n    object2.add(vis2);\r\n    return object2;\r\n```\r\nI made a [video of the behaviour](https:\/\/youtu.be\/BfZgp2XkbRQ)\r\nThe blue sphere is rendered correctly. The yellow boxes are never rendered with their own geometry, depending on camera position (I am using OrbitControls) they are either not visible or rendered with the red meshes geometry. I also noticed once that changing visible to false then true on an object that it changed its geometry.\r\nI very thoroughly checked my full scene tree, every object got the right geometry there.\r\nIt looks to me like attributes.get may in some situations return the wrong attribute.\r\nUnfortunately this is part of quite a huge React app and I was not able to isolate the problem into a small fiddle.\r\n","created_at":"2018-10-18T08:35:25.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/14367#issuecomment-430923710","id":430923710,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/14367","node_id":"MDEyOklzc3VlQ29tbWVudDQzMDkyMzcxMA==","updated_at":"2018-10-18T08:35:25.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/430923710","user":{"following_url":"https:\/\/api.github.com\/users\/DerKorb\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/DerKorb\/events{\/privacy}","avatar_url":"https:\/\/avatars3.githubusercontent.com\/u\/2011423?v=4","url":"https:\/\/api.github.com\/users\/DerKorb","gists_url":"https:\/\/api.github.com\/users\/DerKorb\/gists{\/gist_id}","html_url":"https:\/\/github.com\/DerKorb","subscriptions_url":"https:\/\/api.github.com\/users\/DerKorb\/subscriptions","node_id":"MDQ6VXNlcjIwMTE0MjM=","repos_url":"https:\/\/api.github.com\/users\/DerKorb\/repos","received_events_url":"https:\/\/api.github.com\/users\/DerKorb\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/DerKorb\/starred{\/owner}{\/repo}","site_admin":false,"login":"DerKorb","type":"User","id":2011423,"followers_url":"https:\/\/api.github.com\/users\/DerKorb\/followers","organizations_url":"https:\/\/api.github.com\/users\/DerKorb\/orgs"}},{"index":16,"author_association":"NONE","body":"I made a [second video](https:\/\/youtu.be\/gdkS5tO6JUA) to show more camera movement \/ culling? related behaviour.","created_at":"2018-10-18T09:12:45.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/14367#issuecomment-430935408","id":430935408,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/14367","node_id":"MDEyOklzc3VlQ29tbWVudDQzMDkzNTQwOA==","updated_at":"2018-10-18T09:12:45.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/430935408","user":{"following_url":"https:\/\/api.github.com\/users\/DerKorb\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/DerKorb\/events{\/privacy}","avatar_url":"https:\/\/avatars3.githubusercontent.com\/u\/2011423?v=4","url":"https:\/\/api.github.com\/users\/DerKorb","gists_url":"https:\/\/api.github.com\/users\/DerKorb\/gists{\/gist_id}","html_url":"https:\/\/github.com\/DerKorb","subscriptions_url":"https:\/\/api.github.com\/users\/DerKorb\/subscriptions","node_id":"MDQ6VXNlcjIwMTE0MjM=","repos_url":"https:\/\/api.github.com\/users\/DerKorb\/repos","received_events_url":"https:\/\/api.github.com\/users\/DerKorb\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/DerKorb\/starred{\/owner}{\/repo}","site_admin":false,"login":"DerKorb","type":"User","id":2011423,"followers_url":"https:\/\/api.github.com\/users\/DerKorb\/followers","organizations_url":"https:\/\/api.github.com\/users\/DerKorb\/orgs"}},{"index":17,"author_association":"NONE","body":"Also I just noticed getting this error: \r\n`[.WebGL-0x56206ada00d0]GL ERROR :GL_INVALID_OPERATION : glDrawElements: attempt to access out of range vertices in attribute 0`","created_at":"2018-10-18T09:22:18.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/14367#issuecomment-430938446","id":430938446,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/14367","node_id":"MDEyOklzc3VlQ29tbWVudDQzMDkzODQ0Ng==","updated_at":"2018-10-18T09:22:18.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/430938446","user":{"following_url":"https:\/\/api.github.com\/users\/DerKorb\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/DerKorb\/events{\/privacy}","avatar_url":"https:\/\/avatars3.githubusercontent.com\/u\/2011423?v=4","url":"https:\/\/api.github.com\/users\/DerKorb","gists_url":"https:\/\/api.github.com\/users\/DerKorb\/gists{\/gist_id}","html_url":"https:\/\/github.com\/DerKorb","subscriptions_url":"https:\/\/api.github.com\/users\/DerKorb\/subscriptions","node_id":"MDQ6VXNlcjIwMTE0MjM=","repos_url":"https:\/\/api.github.com\/users\/DerKorb\/repos","received_events_url":"https:\/\/api.github.com\/users\/DerKorb\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/DerKorb\/starred{\/owner}{\/repo}","site_admin":false,"login":"DerKorb","type":"User","id":2011423,"followers_url":"https:\/\/api.github.com\/users\/DerKorb\/followers","organizations_url":"https:\/\/api.github.com\/users\/DerKorb\/orgs"}},{"index":18,"author_association":"COLLABORATOR","body":"@DerKorb Please try to isolate the issue in a [live example](https:\/\/jsfiddle.net\/f2Lommf5\/) for debugging. Besides, I think it's better if you open a new issue which is focused on the view-dependent rendering problem.\r\n\r\nYour code seems a bit confusing to me. You declare `vis2` two times although it's a constant. This should actually produce a syntax error (`Identifier 'vis2' has already been declared`).","created_at":"2018-10-18T12:44:23.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/14367#issuecomment-430994075","id":430994075,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/14367","node_id":"MDEyOklzc3VlQ29tbWVudDQzMDk5NDA3NQ==","updated_at":"2018-10-18T12:45:15.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/430994075","user":{"following_url":"https:\/\/api.github.com\/users\/Mugen87\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/Mugen87\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/12612165?v=4","url":"https:\/\/api.github.com\/users\/Mugen87","gists_url":"https:\/\/api.github.com\/users\/Mugen87\/gists{\/gist_id}","html_url":"https:\/\/github.com\/Mugen87","subscriptions_url":"https:\/\/api.github.com\/users\/Mugen87\/subscriptions","node_id":"MDQ6VXNlcjEyNjEyMTY1","repos_url":"https:\/\/api.github.com\/users\/Mugen87\/repos","received_events_url":"https:\/\/api.github.com\/users\/Mugen87\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/Mugen87\/starred{\/owner}{\/repo}","site_admin":false,"login":"Mugen87","type":"User","id":12612165,"followers_url":"https:\/\/api.github.com\/users\/Mugen87\/followers","organizations_url":"https:\/\/api.github.com\/users\/Mugen87\/orgs"}},{"index":19,"author_association":"NONE","body":"You are right, i just pasted the second vis object into the same block. In my original code I had it in two different places. \r\n\r\nI found the reason for all the problems. I am using webpack to load some of my code from a custom npm module. Now when I imported THREE once in the module code and once in my app, webpack did create two instances of THREE. Without deep knowledge of THREE I assume both instances did have their own WebGL Context\/Handle\/whatever. So when I handed over geometries that had been allocated in one context to the renderer from the second context, attributes.get would somehow either get undefined or a reference to some random other geometry created in the same context as the renderer.","created_at":"2018-10-18T13:04:23.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/14367#issuecomment-431000235","id":431000235,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/14367","node_id":"MDEyOklzc3VlQ29tbWVudDQzMTAwMDIzNQ==","updated_at":"2018-10-18T13:04:23.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/431000235","user":{"following_url":"https:\/\/api.github.com\/users\/DerKorb\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/DerKorb\/events{\/privacy}","avatar_url":"https:\/\/avatars3.githubusercontent.com\/u\/2011423?v=4","url":"https:\/\/api.github.com\/users\/DerKorb","gists_url":"https:\/\/api.github.com\/users\/DerKorb\/gists{\/gist_id}","html_url":"https:\/\/github.com\/DerKorb","subscriptions_url":"https:\/\/api.github.com\/users\/DerKorb\/subscriptions","node_id":"MDQ6VXNlcjIwMTE0MjM=","repos_url":"https:\/\/api.github.com\/users\/DerKorb\/repos","received_events_url":"https:\/\/api.github.com\/users\/DerKorb\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/DerKorb\/starred{\/owner}{\/repo}","site_admin":false,"login":"DerKorb","type":"User","id":2011423,"followers_url":"https:\/\/api.github.com\/users\/DerKorb\/followers","organizations_url":"https:\/\/api.github.com\/users\/DerKorb\/orgs"}},{"index":20,"author_association":"NONE","body":"@DerKorb Thanks for sharing your fix -- just saved me some time on similar behavior!","created_at":"2019-01-09T23:25:59.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/pull\/14367#issuecomment-452908099","id":452908099,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/14367","node_id":"MDEyOklzc3VlQ29tbWVudDQ1MjkwODA5OQ==","updated_at":"2019-01-09T23:25:59.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/452908099","user":{"following_url":"https:\/\/api.github.com\/users\/malcolmwhite\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/malcolmwhite\/events{\/privacy}","avatar_url":"https:\/\/avatars3.githubusercontent.com\/u\/7061124?v=4","url":"https:\/\/api.github.com\/users\/malcolmwhite","gists_url":"https:\/\/api.github.com\/users\/malcolmwhite\/gists{\/gist_id}","html_url":"https:\/\/github.com\/malcolmwhite","subscriptions_url":"https:\/\/api.github.com\/users\/malcolmwhite\/subscriptions","node_id":"MDQ6VXNlcjcwNjExMjQ=","repos_url":"https:\/\/api.github.com\/users\/malcolmwhite\/repos","received_events_url":"https:\/\/api.github.com\/users\/malcolmwhite\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/malcolmwhite\/starred{\/owner}{\/repo}","site_admin":false,"login":"malcolmwhite","type":"User","id":7061124,"followers_url":"https:\/\/api.github.com\/users\/malcolmwhite\/followers","organizations_url":"https:\/\/api.github.com\/users\/malcolmwhite\/orgs"}}]}