{"schema": {"fields":[{"type":"integer","name":"index"},{"type":"string","name":"author_association"},{"type":"string","name":"body"},{"type":"datetime","name":"created_at"},{"type":"string","name":"html_url"},{"type":"integer","name":"id"},{"type":"string","name":"issue_url"},{"type":"string","name":"node_id"},{"type":"datetime","name":"updated_at"},{"type":"string","name":"url"},{"type":"string","name":"user"}],"pandas_version":"0.20.0","primaryKey":["index"]}, "data": [{"index":0,"author_association":"COLLABORATOR","body":"The following version of `Mesh .updateMorphTargets()` should solve the problem. Unfortunately, at least `MMDLoader` won't work with this change. `MMDLoader` assigns to its `BufferGeometry` output also `.morphTargets` which is actually a property of `Geometry`. I think `MMDLoader` does this because the name of a morph target animation sequence can't be saved in `morphAttributes`. But i'm not 100% sure about this. Didn't have time to debug `MMDLoader` so far. The only thing i can say is that the following example has problems with this change: https:\/\/threejs.org\/examples\/webgl_loader_mmd_pose.html\r\n\r\n```javascript\r\nupdateMorphTargets: function () {\r\n\r\n\tvar geometry = this.geometry;\r\n\r\n\tif ( geometry.isBufferGeometry ) {\r\n\r\n\t\tvar morphAttributes = geometry.morphAttributes;\r\n\t\tvar keys = Object.keys( morphAttributes );\r\n\r\n\t\tif ( keys.length > 0 ) {\r\n\r\n\t\t\tvar morphAttribute = morphAttributes[ keys[ 0 ] ];\r\n\r\n\t\t\tif ( morphAttribute !== undefined ) {\r\n\r\n\t\t\t\tthis.morphTargetInfluences = [];\r\n\r\n\t\t\t\tfor ( var i = 0, l = morphAttribute.length; i < l; i ++ ) {\r\n\r\n\t\t\t\t\tthis.morphTargetInfluences.push( 0 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t} else {\r\n\r\n\t\tvar morphTargets = geometry.morphTargets;\r\n\r\n\t\tif ( morphTargets !== undefined && morphTargets.length > 0 ) {\r\n\r\n\t\t\tthis.morphTargetInfluences = [];\r\n\t\t\tthis.morphTargetDictionary = {};\r\n\r\n\t\t\tfor ( var m = 0, ml = morphTargets.length; m < ml; m ++ ) {\r\n\r\n\t\t\t\tthis.morphTargetInfluences.push( 0 );\r\n\t\t\t\tthis.morphTargetDictionary[ morphTargets[ m ].name ] = m;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n},\r\n```  ","created_at":"2017-05-04T13:34:49.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/11277#issuecomment-299186530","id":299186530,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/11277","node_id":"MDEyOklzc3VlQ29tbWVudDI5OTE4NjUzMA==","updated_at":"2017-05-04T13:37:23.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/299186530","user":{"following_url":"https:\/\/api.github.com\/users\/Mugen87\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/Mugen87\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/12612165?v=4","url":"https:\/\/api.github.com\/users\/Mugen87","gists_url":"https:\/\/api.github.com\/users\/Mugen87\/gists{\/gist_id}","html_url":"https:\/\/github.com\/Mugen87","subscriptions_url":"https:\/\/api.github.com\/users\/Mugen87\/subscriptions","node_id":"MDQ6VXNlcjEyNjEyMTY1","repos_url":"https:\/\/api.github.com\/users\/Mugen87\/repos","received_events_url":"https:\/\/api.github.com\/users\/Mugen87\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/Mugen87\/starred{\/owner}{\/repo}","site_admin":false,"login":"Mugen87","type":"User","id":12612165,"followers_url":"https:\/\/api.github.com\/users\/Mugen87\/followers","organizations_url":"https:\/\/api.github.com\/users\/Mugen87\/orgs"}},{"index":1,"author_association":"COLLABORATOR","body":"It looks to me as if MMDLoader is using a similar hack - it's essentially doing\r\n\r\n```js\r\n bufferGeometry.morphTargets = [];\r\n bufferGeometry.morphTargets.push( morph.name );\r\n```\r\nhttps:\/\/github.com\/mrdoob\/three.js\/blob\/dev\/examples\/js\/loaders\/MMDLoader.js#L861, where ```params``` is ```morph.name```\r\n\r\nThe problem (or at least one problem!)  is that these names are then used to create the ```mesh.morphTargetDictionary```, which ```webgl_loader_mmd_pose``` then loops over to create it's morph controls. So you example code above would need to be updated to create the ```mesh.morphTargetDictionary``` as well.\r\n\r\nWhich would be easily solved if ```BufferAttribute``` had a ```.name``` property, but at the moment it doesn't. Should we add the property? ","created_at":"2017-05-05T02:57:56.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/11277#issuecomment-299359144","id":299359144,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/11277","node_id":"MDEyOklzc3VlQ29tbWVudDI5OTM1OTE0NA==","updated_at":"2017-05-05T02:57:56.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/299359144","user":{"following_url":"https:\/\/api.github.com\/users\/looeee\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/looeee\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/5307958?v=4","url":"https:\/\/api.github.com\/users\/looeee","gists_url":"https:\/\/api.github.com\/users\/looeee\/gists{\/gist_id}","html_url":"https:\/\/github.com\/looeee","subscriptions_url":"https:\/\/api.github.com\/users\/looeee\/subscriptions","node_id":"MDQ6VXNlcjUzMDc5NTg=","repos_url":"https:\/\/api.github.com\/users\/looeee\/repos","received_events_url":"https:\/\/api.github.com\/users\/looeee\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/looeee\/starred{\/owner}{\/repo}","site_admin":false,"login":"looeee","type":"User","id":5307958,"followers_url":"https:\/\/api.github.com\/users\/looeee\/followers","organizations_url":"https:\/\/api.github.com\/users\/looeee\/orgs"}},{"index":2,"author_association":"COLLABORATOR","body":"> So you example code above would need to be updated to create the mesh.morphTargetDictionary as well.\r\n\r\nCorrect!\r\n\r\n> Which would be easily solved if BufferAttribute had a .name property, but at the moment it doesn't. Should we add the property?\r\n\r\nI like the idea because we won't break stuff and it's easy to implement.\r\n\r\n@mrdoob, @WestLangley What's your opinion about this? ","created_at":"2017-05-05T06:53:17.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/11277#issuecomment-299395347","id":299395347,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/11277","node_id":"MDEyOklzc3VlQ29tbWVudDI5OTM5NTM0Nw==","updated_at":"2017-05-05T11:31:03.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/299395347","user":{"following_url":"https:\/\/api.github.com\/users\/Mugen87\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/Mugen87\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/12612165?v=4","url":"https:\/\/api.github.com\/users\/Mugen87","gists_url":"https:\/\/api.github.com\/users\/Mugen87\/gists{\/gist_id}","html_url":"https:\/\/github.com\/Mugen87","subscriptions_url":"https:\/\/api.github.com\/users\/Mugen87\/subscriptions","node_id":"MDQ6VXNlcjEyNjEyMTY1","repos_url":"https:\/\/api.github.com\/users\/Mugen87\/repos","received_events_url":"https:\/\/api.github.com\/users\/Mugen87\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/Mugen87\/starred{\/owner}{\/repo}","site_admin":false,"login":"Mugen87","type":"User","id":12612165,"followers_url":"https:\/\/api.github.com\/users\/Mugen87\/followers","organizations_url":"https:\/\/api.github.com\/users\/Mugen87\/orgs"}},{"index":3,"author_association":"COLLABORATOR","body":"I've created a PR so we can better see the changes...","created_at":"2017-05-05T09:21:09.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/11277#issuecomment-299419854","id":299419854,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/11277","node_id":"MDEyOklzc3VlQ29tbWVudDI5OTQxOTg1NA==","updated_at":"2017-05-05T09:21:09.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/299419854","user":{"following_url":"https:\/\/api.github.com\/users\/Mugen87\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/Mugen87\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/12612165?v=4","url":"https:\/\/api.github.com\/users\/Mugen87","gists_url":"https:\/\/api.github.com\/users\/Mugen87\/gists{\/gist_id}","html_url":"https:\/\/github.com\/Mugen87","subscriptions_url":"https:\/\/api.github.com\/users\/Mugen87\/subscriptions","node_id":"MDQ6VXNlcjEyNjEyMTY1","repos_url":"https:\/\/api.github.com\/users\/Mugen87\/repos","received_events_url":"https:\/\/api.github.com\/users\/Mugen87\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/Mugen87\/starred{\/owner}{\/repo}","site_admin":false,"login":"Mugen87","type":"User","id":12612165,"followers_url":"https:\/\/api.github.com\/users\/Mugen87\/followers","organizations_url":"https:\/\/api.github.com\/users\/Mugen87\/orgs"}},{"index":4,"author_association":"COLLABORATOR","body":"@looeee With the new PR the creation of a morph attribute looks like this:\r\n```javascript\r\nconst morphAttribute = new THREE.BufferAttribute( morphPositions, 3 );\r\nmorphAttribute.name = 'base'; \/\/ optional, .morphTargetDictionary will always be created with default names\r\ngeometry.morphAttributes.position.push( morphAttribute );\r\n```","created_at":"2017-05-05T09:24:48.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/11277#issuecomment-299420508","id":299420508,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/11277","node_id":"MDEyOklzc3VlQ29tbWVudDI5OTQyMDUwOA==","updated_at":"2017-05-05T09:48:11.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/299420508","user":{"following_url":"https:\/\/api.github.com\/users\/Mugen87\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/Mugen87\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/12612165?v=4","url":"https:\/\/api.github.com\/users\/Mugen87","gists_url":"https:\/\/api.github.com\/users\/Mugen87\/gists{\/gist_id}","html_url":"https:\/\/github.com\/Mugen87","subscriptions_url":"https:\/\/api.github.com\/users\/Mugen87\/subscriptions","node_id":"MDQ6VXNlcjEyNjEyMTY1","repos_url":"https:\/\/api.github.com\/users\/Mugen87\/repos","received_events_url":"https:\/\/api.github.com\/users\/Mugen87\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/Mugen87\/starred{\/owner}{\/repo}","site_admin":false,"login":"Mugen87","type":"User","id":12612165,"followers_url":"https:\/\/api.github.com\/users\/Mugen87\/followers","organizations_url":"https:\/\/api.github.com\/users\/Mugen87\/orgs"}},{"index":5,"author_association":"COLLABORATOR","body":"Sweet! \ud83d\ude01 ","created_at":"2017-05-06T06:22:44.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/11277#issuecomment-299619244","id":299619244,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/11277","node_id":"MDEyOklzc3VlQ29tbWVudDI5OTYxOTI0NA==","updated_at":"2017-05-06T06:22:44.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/299619244","user":{"following_url":"https:\/\/api.github.com\/users\/looeee\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/looeee\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/5307958?v=4","url":"https:\/\/api.github.com\/users\/looeee","gists_url":"https:\/\/api.github.com\/users\/looeee\/gists{\/gist_id}","html_url":"https:\/\/github.com\/looeee","subscriptions_url":"https:\/\/api.github.com\/users\/looeee\/subscriptions","node_id":"MDQ6VXNlcjUzMDc5NTg=","repos_url":"https:\/\/api.github.com\/users\/looeee\/repos","received_events_url":"https:\/\/api.github.com\/users\/looeee\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/looeee\/starred{\/owner}{\/repo}","site_admin":false,"login":"looeee","type":"User","id":5307958,"followers_url":"https:\/\/api.github.com\/users\/looeee\/followers","organizations_url":"https:\/\/api.github.com\/users\/looeee\/orgs"}}]}