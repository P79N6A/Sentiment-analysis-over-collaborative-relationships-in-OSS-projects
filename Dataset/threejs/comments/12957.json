{"schema": {"fields":[{"type":"integer","name":"index"},{"type":"string","name":"author_association"},{"type":"string","name":"body"},{"type":"datetime","name":"created_at"},{"type":"string","name":"html_url"},{"type":"integer","name":"id"},{"type":"string","name":"issue_url"},{"type":"string","name":"node_id"},{"type":"datetime","name":"updated_at"},{"type":"string","name":"url"},{"type":"string","name":"user"}],"pandas_version":"0.20.0","primaryKey":["index"]}, "data": [{"index":0,"author_association":"CONTRIBUTOR","body":"It certainly triggers _something_, judging by the performance graph. The same results with a current Firefox, btw.\r\n\r\nDefault:\r\n![normal](https:\/\/user-images.githubusercontent.com\/4936897\/34325479-f08961e2-e892-11e7-9665-d2bf32a143ea.png)\r\n\r\nAfter switching to string (note all the orange boxes, it's always garbage collection ~1MB in size)\r\n![minor GC](https:\/\/user-images.githubusercontent.com\/4936897\/34325494-41c11690-e893-11e7-9395-dcae718a7d0c.png)\r\n","created_at":"2017-12-24T09:34:25.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/12957#issuecomment-353774910","id":353774910,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/12957","node_id":"MDEyOklzc3VlQ29tbWVudDM1Mzc3NDkxMA==","updated_at":"2017-12-24T09:34:25.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/353774910","user":{"following_url":"https:\/\/api.github.com\/users\/moraxy\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/moraxy\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/4936897?v=4","url":"https:\/\/api.github.com\/users\/moraxy","gists_url":"https:\/\/api.github.com\/users\/moraxy\/gists{\/gist_id}","html_url":"https:\/\/github.com\/moraxy","subscriptions_url":"https:\/\/api.github.com\/users\/moraxy\/subscriptions","node_id":"MDQ6VXNlcjQ5MzY4OTc=","repos_url":"https:\/\/api.github.com\/users\/moraxy\/repos","received_events_url":"https:\/\/api.github.com\/users\/moraxy\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/moraxy\/starred{\/owner}{\/repo}","site_admin":false,"login":"moraxy","type":"User","id":4936897,"followers_url":"https:\/\/api.github.com\/users\/moraxy\/followers","organizations_url":"https:\/\/api.github.com\/users\/moraxy\/orgs"}},{"index":1,"author_association":"NONE","body":"https:\/\/github.com\/mrdoob\/three.js\/pull\/12960 I have a simple solution up to force parse into float.","created_at":"2017-12-24T21:00:59.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/12957#issuecomment-353802977","id":353802977,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/12957","node_id":"MDEyOklzc3VlQ29tbWVudDM1MzgwMjk3Nw==","updated_at":"2017-12-24T21:00:59.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/353802977","user":{"following_url":"https:\/\/api.github.com\/users\/mrupley\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/mrupley\/events{\/privacy}","avatar_url":"https:\/\/avatars3.githubusercontent.com\/u\/4227281?v=4","url":"https:\/\/api.github.com\/users\/mrupley","gists_url":"https:\/\/api.github.com\/users\/mrupley\/gists{\/gist_id}","html_url":"https:\/\/github.com\/mrupley","subscriptions_url":"https:\/\/api.github.com\/users\/mrupley\/subscriptions","node_id":"MDQ6VXNlcjQyMjcyODE=","repos_url":"https:\/\/api.github.com\/users\/mrupley\/repos","received_events_url":"https:\/\/api.github.com\/users\/mrupley\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/mrupley\/starred{\/owner}{\/repo}","site_admin":false,"login":"mrupley","type":"User","id":4227281,"followers_url":"https:\/\/api.github.com\/users\/mrupley\/followers","organizations_url":"https:\/\/api.github.com\/users\/mrupley\/orgs"}},{"index":2,"author_association":"NONE","body":"But why would a vector3 that has nothing to do the actual logic of the example destroy all performance? Very strange.","created_at":"2017-12-24T21:12:11.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/12957#issuecomment-353803302","id":353803302,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/12957","node_id":"MDEyOklzc3VlQ29tbWVudDM1MzgwMzMwMg==","updated_at":"2017-12-24T21:12:11.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/353803302","user":{"following_url":"https:\/\/api.github.com\/users\/elunty\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/elunty\/events{\/privacy}","avatar_url":"https:\/\/avatars0.githubusercontent.com\/u\/1414366?v=4","url":"https:\/\/api.github.com\/users\/elunty","gists_url":"https:\/\/api.github.com\/users\/elunty\/gists{\/gist_id}","html_url":"https:\/\/github.com\/elunty","subscriptions_url":"https:\/\/api.github.com\/users\/elunty\/subscriptions","node_id":"MDQ6VXNlcjE0MTQzNjY=","repos_url":"https:\/\/api.github.com\/users\/elunty\/repos","received_events_url":"https:\/\/api.github.com\/users\/elunty\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/elunty\/starred{\/owner}{\/repo}","site_admin":false,"login":"elunty","type":"User","id":1414366,"followers_url":"https:\/\/api.github.com\/users\/elunty\/followers","organizations_url":"https:\/\/api.github.com\/users\/elunty\/orgs"}},{"index":3,"author_association":"NONE","body":"It will need investigation, but it may have to do with the number of calculations performed by ray tracing on a vector and a potential casting of the string into a float many times. ","created_at":"2017-12-24T22:29:21.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/12957#issuecomment-353805694","id":353805694,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/12957","node_id":"MDEyOklzc3VlQ29tbWVudDM1MzgwNTY5NA==","updated_at":"2017-12-24T22:29:21.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/353805694","user":{"following_url":"https:\/\/api.github.com\/users\/mrupley\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/mrupley\/events{\/privacy}","avatar_url":"https:\/\/avatars3.githubusercontent.com\/u\/4227281?v=4","url":"https:\/\/api.github.com\/users\/mrupley","gists_url":"https:\/\/api.github.com\/users\/mrupley\/gists{\/gist_id}","html_url":"https:\/\/github.com\/mrupley","subscriptions_url":"https:\/\/api.github.com\/users\/mrupley\/subscriptions","node_id":"MDQ6VXNlcjQyMjcyODE=","repos_url":"https:\/\/api.github.com\/users\/mrupley\/repos","received_events_url":"https:\/\/api.github.com\/users\/mrupley\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/mrupley\/starred{\/owner}{\/repo}","site_admin":false,"login":"mrupley","type":"User","id":4227281,"followers_url":"https:\/\/api.github.com\/users\/mrupley\/followers","organizations_url":"https:\/\/api.github.com\/users\/mrupley\/orgs"}},{"index":4,"author_association":"NONE","body":"But we don't pass that vector in the raycaster at all. It's on its own doing nothing","created_at":"2017-12-24T23:17:23.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/12957#issuecomment-353807067","id":353807067,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/12957","node_id":"MDEyOklzc3VlQ29tbWVudDM1MzgwNzA2Nw==","updated_at":"2017-12-24T23:17:23.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/353807067","user":{"following_url":"https:\/\/api.github.com\/users\/elunty\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/elunty\/events{\/privacy}","avatar_url":"https:\/\/avatars0.githubusercontent.com\/u\/1414366?v=4","url":"https:\/\/api.github.com\/users\/elunty","gists_url":"https:\/\/api.github.com\/users\/elunty\/gists{\/gist_id}","html_url":"https:\/\/github.com\/elunty","subscriptions_url":"https:\/\/api.github.com\/users\/elunty\/subscriptions","node_id":"MDQ6VXNlcjE0MTQzNjY=","repos_url":"https:\/\/api.github.com\/users\/elunty\/repos","received_events_url":"https:\/\/api.github.com\/users\/elunty\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/elunty\/starred{\/owner}{\/repo}","site_admin":false,"login":"elunty","type":"User","id":1414366,"followers_url":"https:\/\/api.github.com\/users\/elunty\/followers","organizations_url":"https:\/\/api.github.com\/users\/elunty\/orgs"}},{"index":5,"author_association":"CONTRIBUTOR","body":"Passing in a string value converted Vector3-related code to be polymorphic rather than monomorphic:\r\n\r\nhttps:\/\/github.com\/davidmarkclements\/v8-perf#polymorphic-vs-monomorphic-code\r\n\r\n[V8 and modern JS engines in general have something called hidden classes](https:\/\/github.com\/v8\/v8\/wiki\/Design%20Elements#fast-property-access), which allow for optimizations as if JS were statically-typed.\r\n\r\nFor example, if you had this code (does nothing in particular):\r\n\r\n```js\r\nconst vector = new THREE.Vector3(1, 2, 3);\r\nvector.x += 5;\r\nvector.multiplyScalar(2);\r\n\r\nconst matrix = new THREE.Matrix4();\r\nvector.applyMatrix4(matrix);\r\n```\r\n\r\nThen Chrome\/V8 can reasonably assume that all of the Vector3 values are numeric and can execute the code as if this was the case:\r\n\r\n```typescript\r\nclass Vector3 {\r\n  x: number;\r\n  y: number;\r\n  z: number;\r\n}\r\n```\r\n\r\nWhen you set a property of a Vector3 instance to a string, V8 creates a new hidden class, and the existing optimizations are weakened:\r\n\r\n```typescript\r\nclass Vector3WithXAsAString {\r\n  x: string;\r\n  y: number;\r\n  z: number;\r\n}\r\n```\r\n\r\nThe code-paths are updated to handle this class. Simplified, V8 ends up having to do something like this for method calls, property accesses, etc.:\r\n\r\n```js\r\nif (vector is Vector3) {\r\n  \/\/ use optimized version\r\n} else if (vector3 is Vector3WithXAsAString) {\r\n  \/\/ use slow version\r\n}\r\n```","created_at":"2017-12-25T01:45:16.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/12957#issuecomment-353813682","id":353813682,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/12957","node_id":"MDEyOklzc3VlQ29tbWVudDM1MzgxMzY4Mg==","updated_at":"2017-12-25T01:45:16.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/353813682","user":{"following_url":"https:\/\/api.github.com\/users\/razh\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/razh\/events{\/privacy}","avatar_url":"https:\/\/avatars0.githubusercontent.com\/u\/240770?v=4","url":"https:\/\/api.github.com\/users\/razh","gists_url":"https:\/\/api.github.com\/users\/razh\/gists{\/gist_id}","html_url":"https:\/\/github.com\/razh","subscriptions_url":"https:\/\/api.github.com\/users\/razh\/subscriptions","node_id":"MDQ6VXNlcjI0MDc3MA==","repos_url":"https:\/\/api.github.com\/users\/razh\/repos","received_events_url":"https:\/\/api.github.com\/users\/razh\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/razh\/starred{\/owner}{\/repo}","site_admin":false,"login":"razh","type":"User","id":240770,"followers_url":"https:\/\/api.github.com\/users\/razh\/followers","organizations_url":"https:\/\/api.github.com\/users\/razh\/orgs"}},{"index":6,"author_association":"COLLABORATOR","body":"@razh - your second link comes with the heading:\r\n\r\n\"Disclaimer: A lot of the information on this page is not accurate anymore.\" \r\n\r\nNonetheless, this is a very interesting point and certainly looks like a reasonable explanation. ","created_at":"2017-12-25T01:54:26.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/12957#issuecomment-353814368","id":353814368,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/12957","node_id":"MDEyOklzc3VlQ29tbWVudDM1MzgxNDM2OA==","updated_at":"2017-12-25T01:54:26.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/353814368","user":{"following_url":"https:\/\/api.github.com\/users\/looeee\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/looeee\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/5307958?v=4","url":"https:\/\/api.github.com\/users\/looeee","gists_url":"https:\/\/api.github.com\/users\/looeee\/gists{\/gist_id}","html_url":"https:\/\/github.com\/looeee","subscriptions_url":"https:\/\/api.github.com\/users\/looeee\/subscriptions","node_id":"MDQ6VXNlcjUzMDc5NTg=","repos_url":"https:\/\/api.github.com\/users\/looeee\/repos","received_events_url":"https:\/\/api.github.com\/users\/looeee\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/looeee\/starred{\/owner}{\/repo}","site_admin":false,"login":"looeee","type":"User","id":5307958,"followers_url":"https:\/\/api.github.com\/users\/looeee\/followers","organizations_url":"https:\/\/api.github.com\/users\/looeee\/orgs"}},{"index":7,"author_association":"NONE","body":"Yeah very interesting.. wasn't aware optimization like that occurs behind the scenes.","created_at":"2017-12-25T01:58:25.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/12957#issuecomment-353814640","id":353814640,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/12957","node_id":"MDEyOklzc3VlQ29tbWVudDM1MzgxNDY0MA==","updated_at":"2017-12-25T01:58:25.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/353814640","user":{"following_url":"https:\/\/api.github.com\/users\/elunty\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/elunty\/events{\/privacy}","avatar_url":"https:\/\/avatars0.githubusercontent.com\/u\/1414366?v=4","url":"https:\/\/api.github.com\/users\/elunty","gists_url":"https:\/\/api.github.com\/users\/elunty\/gists{\/gist_id}","html_url":"https:\/\/github.com\/elunty","subscriptions_url":"https:\/\/api.github.com\/users\/elunty\/subscriptions","node_id":"MDQ6VXNlcjE0MTQzNjY=","repos_url":"https:\/\/api.github.com\/users\/elunty\/repos","received_events_url":"https:\/\/api.github.com\/users\/elunty\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/elunty\/starred{\/owner}{\/repo}","site_admin":false,"login":"elunty","type":"User","id":1414366,"followers_url":"https:\/\/api.github.com\/users\/elunty\/followers","organizations_url":"https:\/\/api.github.com\/users\/elunty\/orgs"}},{"index":8,"author_association":"COLLABORATOR","body":"Closing, since this is not an issue in the library. User have to ensure correct parameterization and type usage in their code. ","created_at":"2017-12-25T10:49:14.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/12957#issuecomment-353860257","id":353860257,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/12957","node_id":"MDEyOklzc3VlQ29tbWVudDM1Mzg2MDI1Nw==","updated_at":"2017-12-25T10:49:53.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/353860257","user":{"following_url":"https:\/\/api.github.com\/users\/Mugen87\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/Mugen87\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/12612165?v=4","url":"https:\/\/api.github.com\/users\/Mugen87","gists_url":"https:\/\/api.github.com\/users\/Mugen87\/gists{\/gist_id}","html_url":"https:\/\/github.com\/Mugen87","subscriptions_url":"https:\/\/api.github.com\/users\/Mugen87\/subscriptions","node_id":"MDQ6VXNlcjEyNjEyMTY1","repos_url":"https:\/\/api.github.com\/users\/Mugen87\/repos","received_events_url":"https:\/\/api.github.com\/users\/Mugen87\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/Mugen87\/starred{\/owner}{\/repo}","site_admin":false,"login":"Mugen87","type":"User","id":12612165,"followers_url":"https:\/\/api.github.com\/users\/Mugen87\/followers","organizations_url":"https:\/\/api.github.com\/users\/Mugen87\/orgs"}}]}