{"schema": {"fields":[{"type":"integer","name":"index"},{"type":"string","name":"author_association"},{"type":"string","name":"body"},{"type":"datetime","name":"created_at"},{"type":"string","name":"html_url"},{"type":"integer","name":"id"},{"type":"string","name":"issue_url"},{"type":"string","name":"node_id"},{"type":"datetime","name":"updated_at"},{"type":"string","name":"url"},{"type":"string","name":"user"}],"pandas_version":"0.20.0","primaryKey":["index"]}, "data": [{"index":0,"author_association":"NONE","body":"Here is my R function `quaternion2matrix`:\r\n\r\n```\r\n#' @description Quaternion to rotation matrix\r\n#' @details http:\/\/www.euclideanspace.com\/maths\/geometry\/rotations\/conversions\/quaternionToMatrix\/index.htm\r\nquaternion2matrix <- function(q){\r\n  rbind(\r\n    c(1 - 2*q[3]^2 - 2*q[4]^2, 2*q[2]*q[3] - 2*q[4]*q[1], 2*q[2]*q[4] + 2*q[3]*q[1]),\r\n    c(2*q[2]*q[3] + 2*q[4]*q[1], 1 - 2*q[2]^2 - 2*q[4]^2, 2*q[3]*q[4] - 2*q[2]*q[1]),\r\n    c(2*q[2]*q[4] - 2*q[3]*q[1], 2*q[3]*q[4] + 2*q[2]*q[1], 1 - 2*q[2]^2 - 2*q[3]^2)\r\n  )\r\n}\r\n```\r\nI have quickly compared with your `Matrix4.js`, and this does not look the same.\r\n","created_at":"2018-11-23T16:41:13.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/15309#issuecomment-441283421","id":441283421,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/15309","node_id":"MDEyOklzc3VlQ29tbWVudDQ0MTI4MzQyMQ==","updated_at":"2018-11-23T16:41:13.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/441283421","user":{"following_url":"https:\/\/api.github.com\/users\/stla\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/stla\/events{\/privacy}","avatar_url":"https:\/\/avatars3.githubusercontent.com\/u\/4466543?v=4","url":"https:\/\/api.github.com\/users\/stla","gists_url":"https:\/\/api.github.com\/users\/stla\/gists{\/gist_id}","html_url":"https:\/\/github.com\/stla","subscriptions_url":"https:\/\/api.github.com\/users\/stla\/subscriptions","node_id":"MDQ6VXNlcjQ0NjY1NDM=","repos_url":"https:\/\/api.github.com\/users\/stla\/repos","received_events_url":"https:\/\/api.github.com\/users\/stla\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/stla\/starred{\/owner}{\/repo}","site_admin":false,"login":"stla","type":"User","id":4466543,"followers_url":"https:\/\/api.github.com\/users\/stla\/followers","organizations_url":"https:\/\/api.github.com\/users\/stla\/orgs"}},{"index":1,"author_association":"NONE","body":"The Javascript version:\r\n\r\n```\r\n        function quaternion2matrix(q) {\r\n            return new THREE.Matrix4().set(\r\n                1 - 2 * q.z ** 2 - 2 * q.w ** 2, 2 * q.y * q.z - 2 * q.w * q.x, 2 * q.y * q.w + 2 * q.z * q.x, 0,\r\n                2 * q.y * q.z + 2 * q.w * q.x, 1 - 2 * q.y ** 2 - 2 * q.w ** 2, 2 * q.z * q.w - 2 * q.y * q.x, 0,\r\n                2 * q.y * q.w - 2 * q.z * q.x, 2 * q.z * q.w + 2 * q.y * q.x, 1 - 2 * q.y ** 2 - 2 * q.z ** 2, 0,\r\n                0, 0, 0, 1\r\n            )\r\n        }\r\n```\r\nTested and it works :-)\r\n\r\nBTW, it would be nice to have a function like `getRotation` in three.js.","created_at":"2018-11-23T16:50:42.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/15309#issuecomment-441285162","id":441285162,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/15309","node_id":"MDEyOklzc3VlQ29tbWVudDQ0MTI4NTE2Mg==","updated_at":"2018-11-23T16:50:42.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/441285162","user":{"following_url":"https:\/\/api.github.com\/users\/stla\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/stla\/events{\/privacy}","avatar_url":"https:\/\/avatars3.githubusercontent.com\/u\/4466543?v=4","url":"https:\/\/api.github.com\/users\/stla","gists_url":"https:\/\/api.github.com\/users\/stla\/gists{\/gist_id}","html_url":"https:\/\/github.com\/stla","subscriptions_url":"https:\/\/api.github.com\/users\/stla\/subscriptions","node_id":"MDQ6VXNlcjQ0NjY1NDM=","repos_url":"https:\/\/api.github.com\/users\/stla\/repos","received_events_url":"https:\/\/api.github.com\/users\/stla\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/stla\/starred{\/owner}{\/repo}","site_admin":false,"login":"stla","type":"User","id":4466543,"followers_url":"https:\/\/api.github.com\/users\/stla\/followers","organizations_url":"https:\/\/api.github.com\/users\/stla\/orgs"}},{"index":2,"author_association":"COLLABORATOR","body":">var quat = new THREE.Quaternion().set(c \/ ma2, W.x, W.y, W.z);\r\n\r\nTo start, it appears to me you have the arguments in the incorrect order.\r\n","created_at":"2018-11-23T17:04:50.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/15309#issuecomment-441287739","id":441287739,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/15309","node_id":"MDEyOklzc3VlQ29tbWVudDQ0MTI4NzczOQ==","updated_at":"2018-11-23T17:04:50.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/441287739","user":{"following_url":"https:\/\/api.github.com\/users\/WestLangley\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/WestLangley\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/1000017?v=4","url":"https:\/\/api.github.com\/users\/WestLangley","gists_url":"https:\/\/api.github.com\/users\/WestLangley\/gists{\/gist_id}","html_url":"https:\/\/github.com\/WestLangley","subscriptions_url":"https:\/\/api.github.com\/users\/WestLangley\/subscriptions","node_id":"MDQ6VXNlcjEwMDAwMTc=","repos_url":"https:\/\/api.github.com\/users\/WestLangley\/repos","received_events_url":"https:\/\/api.github.com\/users\/WestLangley\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/WestLangley\/starred{\/owner}{\/repo}","site_admin":false,"login":"WestLangley","type":"User","id":1000017,"followers_url":"https:\/\/api.github.com\/users\/WestLangley\/followers","organizations_url":"https:\/\/api.github.com\/users\/WestLangley\/orgs"}},{"index":3,"author_association":"NONE","body":"No. `quat` is correct, it is the same in R and in Javascript. This is the conversion to the matrix which is wrong in three.js.","created_at":"2018-11-23T17:07:12.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/15309#issuecomment-441288158","id":441288158,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/15309","node_id":"MDEyOklzc3VlQ29tbWVudDQ0MTI4ODE1OA==","updated_at":"2018-11-23T17:07:12.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/441288158","user":{"following_url":"https:\/\/api.github.com\/users\/stla\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/stla\/events{\/privacy}","avatar_url":"https:\/\/avatars3.githubusercontent.com\/u\/4466543?v=4","url":"https:\/\/api.github.com\/users\/stla","gists_url":"https:\/\/api.github.com\/users\/stla\/gists{\/gist_id}","html_url":"https:\/\/github.com\/stla","subscriptions_url":"https:\/\/api.github.com\/users\/stla\/subscriptions","node_id":"MDQ6VXNlcjQ0NjY1NDM=","repos_url":"https:\/\/api.github.com\/users\/stla\/repos","received_events_url":"https:\/\/api.github.com\/users\/stla\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/stla\/starred{\/owner}{\/repo}","site_admin":false,"login":"stla","type":"User","id":4466543,"followers_url":"https:\/\/api.github.com\/users\/stla\/followers","organizations_url":"https:\/\/api.github.com\/users\/stla\/orgs"}},{"index":4,"author_association":"NONE","body":"And `setFromRotationMatrix` is consistent with `makeRotationFromQuaternion`, hence this function is wrong too.\r\nI have look at `Quaternion.js` and I think the error is here: you have to replace each\r\n\r\n```\r\nthis._w = a\r\nthis._x = b\r\nthis._y = c\r\nthis._z = d\r\n```\r\nwith\r\n\r\n```\r\nthis._x = a\r\nthis._y = b\r\nthis._z = c\r\nthis._w = d\r\n```\r\n","created_at":"2018-11-23T17:29:51.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/15309#issuecomment-441291709","id":441291709,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/15309","node_id":"MDEyOklzc3VlQ29tbWVudDQ0MTI5MTcwOQ==","updated_at":"2018-11-23T17:29:51.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/441291709","user":{"following_url":"https:\/\/api.github.com\/users\/stla\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/stla\/events{\/privacy}","avatar_url":"https:\/\/avatars3.githubusercontent.com\/u\/4466543?v=4","url":"https:\/\/api.github.com\/users\/stla","gists_url":"https:\/\/api.github.com\/users\/stla\/gists{\/gist_id}","html_url":"https:\/\/github.com\/stla","subscriptions_url":"https:\/\/api.github.com\/users\/stla\/subscriptions","node_id":"MDQ6VXNlcjQ0NjY1NDM=","repos_url":"https:\/\/api.github.com\/users\/stla\/repos","received_events_url":"https:\/\/api.github.com\/users\/stla\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/stla\/starred{\/owner}{\/repo}","site_admin":false,"login":"stla","type":"User","id":4466543,"followers_url":"https:\/\/api.github.com\/users\/stla\/followers","organizations_url":"https:\/\/api.github.com\/users\/stla\/orgs"}},{"index":5,"author_association":"NONE","body":"Wait, I see what you meant... My quaternions in R and the three.js quaternions do not use the same order, perhaps. I check...","created_at":"2018-11-23T17:32:45.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/15309#issuecomment-441292166","id":441292166,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/15309","node_id":"MDEyOklzc3VlQ29tbWVudDQ0MTI5MjE2Ng==","updated_at":"2018-11-23T17:32:45.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/441292166","user":{"following_url":"https:\/\/api.github.com\/users\/stla\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/stla\/events{\/privacy}","avatar_url":"https:\/\/avatars3.githubusercontent.com\/u\/4466543?v=4","url":"https:\/\/api.github.com\/users\/stla","gists_url":"https:\/\/api.github.com\/users\/stla\/gists{\/gist_id}","html_url":"https:\/\/github.com\/stla","subscriptions_url":"https:\/\/api.github.com\/users\/stla\/subscriptions","node_id":"MDQ6VXNlcjQ0NjY1NDM=","repos_url":"https:\/\/api.github.com\/users\/stla\/repos","received_events_url":"https:\/\/api.github.com\/users\/stla\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/stla\/starred{\/owner}{\/repo}","site_admin":false,"login":"stla","type":"User","id":4466543,"followers_url":"https:\/\/api.github.com\/users\/stla\/followers","organizations_url":"https:\/\/api.github.com\/users\/stla\/orgs"}},{"index":6,"author_association":"NONE","body":"Yeah, that's right. The order is not the same and you were right, in three.js we have to do:\r\n`var quat = new THREE.Quaternion().set(W.x, W.y, W.z, c \/ ma2);`\r\nAnd everything works fine!\r\nSorry!","created_at":"2018-11-23T17:36:45.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/15309#issuecomment-441292785","id":441292785,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/15309","node_id":"MDEyOklzc3VlQ29tbWVudDQ0MTI5Mjc4NQ==","updated_at":"2018-11-23T17:36:45.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/441292785","user":{"following_url":"https:\/\/api.github.com\/users\/stla\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/stla\/events{\/privacy}","avatar_url":"https:\/\/avatars3.githubusercontent.com\/u\/4466543?v=4","url":"https:\/\/api.github.com\/users\/stla","gists_url":"https:\/\/api.github.com\/users\/stla\/gists{\/gist_id}","html_url":"https:\/\/github.com\/stla","subscriptions_url":"https:\/\/api.github.com\/users\/stla\/subscriptions","node_id":"MDQ6VXNlcjQ0NjY1NDM=","repos_url":"https:\/\/api.github.com\/users\/stla\/repos","received_events_url":"https:\/\/api.github.com\/users\/stla\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/stla\/starred{\/owner}{\/repo}","site_admin":false,"login":"stla","type":"User","id":4466543,"followers_url":"https:\/\/api.github.com\/users\/stla\/followers","organizations_url":"https:\/\/api.github.com\/users\/stla\/orgs"}}]}