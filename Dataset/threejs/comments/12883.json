{"schema": {"fields":[{"type":"integer","name":"index"},{"type":"string","name":"author_association"},{"type":"string","name":"body"},{"type":"datetime","name":"created_at"},{"type":"string","name":"html_url"},{"type":"integer","name":"id"},{"type":"string","name":"issue_url"},{"type":"string","name":"node_id"},{"type":"datetime","name":"updated_at"},{"type":"string","name":"url"},{"type":"string","name":"user"}],"pandas_version":"0.20.0","primaryKey":["index"]}, "data": [{"index":0,"author_association":"COLLABORATOR","body":"It is not clear to me what you are referring to...\r\n\r\nAre you aware that the highlights on the walls are specular highlights, and have nothing to do with the mirror?\r\n\r\nChange the wall material to `MeshLambertMaterial` and\/or reduce the intensity of  the spotlight.","created_at":"2017-12-14T21:20:16.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/12883#issuecomment-351839149","id":351839149,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/12883","node_id":"MDEyOklzc3VlQ29tbWVudDM1MTgzOTE0OQ==","updated_at":"2017-12-14T21:20:16.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/351839149","user":{"following_url":"https:\/\/api.github.com\/users\/WestLangley\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/WestLangley\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/1000017?v=4","url":"https:\/\/api.github.com\/users\/WestLangley","gists_url":"https:\/\/api.github.com\/users\/WestLangley\/gists{\/gist_id}","html_url":"https:\/\/github.com\/WestLangley","subscriptions_url":"https:\/\/api.github.com\/users\/WestLangley\/subscriptions","node_id":"MDQ6VXNlcjEwMDAwMTc=","repos_url":"https:\/\/api.github.com\/users\/WestLangley\/repos","received_events_url":"https:\/\/api.github.com\/users\/WestLangley\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/WestLangley\/starred{\/owner}{\/repo}","site_admin":false,"login":"WestLangley","type":"User","id":1000017,"followers_url":"https:\/\/api.github.com\/users\/WestLangley\/followers","organizations_url":"https:\/\/api.github.com\/users\/WestLangley\/orgs"}},{"index":1,"author_association":"NONE","body":"I am referring to the sudden transition in the lighting on the walls as you rotate the view. Do you not see change as you rotate at the point where you are looking at the back of the mirror (and thus has no need to render the mirror texture)?","created_at":"2017-12-14T21:28:38.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/12883#issuecomment-351841189","id":351841189,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/12883","node_id":"MDEyOklzc3VlQ29tbWVudDM1MTg0MTE4OQ==","updated_at":"2017-12-14T21:28:38.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/351841189","user":{"following_url":"https:\/\/api.github.com\/users\/ChrisDenham\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/ChrisDenham\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/2325443?v=4","url":"https:\/\/api.github.com\/users\/ChrisDenham","gists_url":"https:\/\/api.github.com\/users\/ChrisDenham\/gists{\/gist_id}","html_url":"https:\/\/github.com\/ChrisDenham","subscriptions_url":"https:\/\/api.github.com\/users\/ChrisDenham\/subscriptions","node_id":"MDQ6VXNlcjIzMjU0NDM=","repos_url":"https:\/\/api.github.com\/users\/ChrisDenham\/repos","received_events_url":"https:\/\/api.github.com\/users\/ChrisDenham\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/ChrisDenham\/starred{\/owner}{\/repo}","site_admin":false,"login":"ChrisDenham","type":"User","id":2325443,"followers_url":"https:\/\/api.github.com\/users\/ChrisDenham\/followers","organizations_url":"https:\/\/api.github.com\/users\/ChrisDenham\/orgs"}},{"index":2,"author_association":"NONE","body":"btw. yes, i agree the lighting on the walls should not be affected by the mirror.... but in this case it does. That\u2019s the problem... the lighting on the walls looks incorrect when camera is facing the mirror.","created_at":"2017-12-14T21:52:10.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/12883#issuecomment-351847078","id":351847078,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/12883","node_id":"MDEyOklzc3VlQ29tbWVudDM1MTg0NzA3OA==","updated_at":"2017-12-14T21:52:10.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/351847078","user":{"following_url":"https:\/\/api.github.com\/users\/ChrisDenham\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/ChrisDenham\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/2325443?v=4","url":"https:\/\/api.github.com\/users\/ChrisDenham","gists_url":"https:\/\/api.github.com\/users\/ChrisDenham\/gists{\/gist_id}","html_url":"https:\/\/github.com\/ChrisDenham","subscriptions_url":"https:\/\/api.github.com\/users\/ChrisDenham\/subscriptions","node_id":"MDQ6VXNlcjIzMjU0NDM=","repos_url":"https:\/\/api.github.com\/users\/ChrisDenham\/repos","received_events_url":"https:\/\/api.github.com\/users\/ChrisDenham\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/ChrisDenham\/starred{\/owner}{\/repo}","site_admin":false,"login":"ChrisDenham","type":"User","id":2325443,"followers_url":"https:\/\/api.github.com\/users\/ChrisDenham\/followers","organizations_url":"https:\/\/api.github.com\/users\/ChrisDenham\/orgs"}},{"index":3,"author_association":"COLLABORATOR","body":"OK, I see that.\r\n\r\nHere is the pattern you are implementing:\r\n```javascript\r\nscene.add( mirror );\r\nrenderer.render( scene, camera );\r\ncreateMirrorTest(); \/\/ this function adds lights\r\n```\r\n\r\nYou are changing the number of lights after the first render, so you need to recompile the mirror's shader.\r\n```javascript\r\nmirror.material.needsUpdate = true; \/\/ you need to add this line\r\n```\r\n\r\nupdated fiddle: https:\/\/jsfiddle.net\/9zLhq9Lf\/2\/\r\n","created_at":"2017-12-14T21:54:12.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/12883#issuecomment-351847582","id":351847582,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/12883","node_id":"MDEyOklzc3VlQ29tbWVudDM1MTg0NzU4Mg==","updated_at":"2017-12-14T21:54:12.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/351847582","user":{"following_url":"https:\/\/api.github.com\/users\/WestLangley\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/WestLangley\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/1000017?v=4","url":"https:\/\/api.github.com\/users\/WestLangley","gists_url":"https:\/\/api.github.com\/users\/WestLangley\/gists{\/gist_id}","html_url":"https:\/\/github.com\/WestLangley","subscriptions_url":"https:\/\/api.github.com\/users\/WestLangley\/subscriptions","node_id":"MDQ6VXNlcjEwMDAwMTc=","repos_url":"https:\/\/api.github.com\/users\/WestLangley\/repos","received_events_url":"https:\/\/api.github.com\/users\/WestLangley\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/WestLangley\/starred{\/owner}{\/repo}","site_admin":false,"login":"WestLangley","type":"User","id":1000017,"followers_url":"https:\/\/api.github.com\/users\/WestLangley\/followers","organizations_url":"https:\/\/api.github.com\/users\/WestLangley\/orgs"}},{"index":4,"author_association":"NONE","body":"Ah ha. Thanks very much. I didn't know that I had to force update of materials when i add lights. In general, do i need to force update of all the materials used in a scene if I add a light after a material is first rendered?","created_at":"2017-12-14T22:05:40.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/12883#issuecomment-351850356","id":351850356,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/12883","node_id":"MDEyOklzc3VlQ29tbWVudDM1MTg1MDM1Ng==","updated_at":"2017-12-14T22:05:40.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/351850356","user":{"following_url":"https:\/\/api.github.com\/users\/ChrisDenham\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/ChrisDenham\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/2325443?v=4","url":"https:\/\/api.github.com\/users\/ChrisDenham","gists_url":"https:\/\/api.github.com\/users\/ChrisDenham\/gists{\/gist_id}","html_url":"https:\/\/github.com\/ChrisDenham","subscriptions_url":"https:\/\/api.github.com\/users\/ChrisDenham\/subscriptions","node_id":"MDQ6VXNlcjIzMjU0NDM=","repos_url":"https:\/\/api.github.com\/users\/ChrisDenham\/repos","received_events_url":"https:\/\/api.github.com\/users\/ChrisDenham\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/ChrisDenham\/starred{\/owner}{\/repo}","site_admin":false,"login":"ChrisDenham","type":"User","id":2325443,"followers_url":"https:\/\/api.github.com\/users\/ChrisDenham\/followers","organizations_url":"https:\/\/api.github.com\/users\/ChrisDenham\/orgs"}},{"index":5,"author_association":"COLLABORATOR","body":"Yes. See the Materials section in [How to Update Things](https:\/\/threejs.org\/docs\/#manual\/introduction\/How-to-update-things) in the docs.","created_at":"2017-12-14T22:35:31.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/12883#issuecomment-351857189","id":351857189,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/12883","node_id":"MDEyOklzc3VlQ29tbWVudDM1MTg1NzE4OQ==","updated_at":"2017-12-14T22:35:31.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/351857189","user":{"following_url":"https:\/\/api.github.com\/users\/WestLangley\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/WestLangley\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/1000017?v=4","url":"https:\/\/api.github.com\/users\/WestLangley","gists_url":"https:\/\/api.github.com\/users\/WestLangley\/gists{\/gist_id}","html_url":"https:\/\/github.com\/WestLangley","subscriptions_url":"https:\/\/api.github.com\/users\/WestLangley\/subscriptions","node_id":"MDQ6VXNlcjEwMDAwMTc=","repos_url":"https:\/\/api.github.com\/users\/WestLangley\/repos","received_events_url":"https:\/\/api.github.com\/users\/WestLangley\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/WestLangley\/starred{\/owner}{\/repo}","site_admin":false,"login":"WestLangley","type":"User","id":1000017,"followers_url":"https:\/\/api.github.com\/users\/WestLangley\/followers","organizations_url":"https:\/\/api.github.com\/users\/WestLangley\/orgs"}},{"index":6,"author_association":"NONE","body":"Thanks again. Apologies for posting what turned out to be a newbie question into the issue tracker. ","created_at":"2017-12-14T22:44:28.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/12883#issuecomment-351858994","id":351858994,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/12883","node_id":"MDEyOklzc3VlQ29tbWVudDM1MTg1ODk5NA==","updated_at":"2017-12-14T22:44:28.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/351858994","user":{"following_url":"https:\/\/api.github.com\/users\/ChrisDenham\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/ChrisDenham\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/2325443?v=4","url":"https:\/\/api.github.com\/users\/ChrisDenham","gists_url":"https:\/\/api.github.com\/users\/ChrisDenham\/gists{\/gist_id}","html_url":"https:\/\/github.com\/ChrisDenham","subscriptions_url":"https:\/\/api.github.com\/users\/ChrisDenham\/subscriptions","node_id":"MDQ6VXNlcjIzMjU0NDM=","repos_url":"https:\/\/api.github.com\/users\/ChrisDenham\/repos","received_events_url":"https:\/\/api.github.com\/users\/ChrisDenham\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/ChrisDenham\/starred{\/owner}{\/repo}","site_admin":false,"login":"ChrisDenham","type":"User","id":2325443,"followers_url":"https:\/\/api.github.com\/users\/ChrisDenham\/followers","organizations_url":"https:\/\/api.github.com\/users\/ChrisDenham\/orgs"}},{"index":7,"author_association":"NONE","body":"@WestLangley  I'm still having trouble with this. When I change the starting camera view so that it is facing the back of the mirror, your call to  `mirror.material.needsUpdate = true;`  seems to no longer fix the problem. I updated the starting view from your fiddle here: https:\/\/jsfiddle.net\/cmd4\/9zLhq9Lf\/3\/\r\nAs you can see, the problem persists in this fiddle, but I can't see how to fix it.\r\n","created_at":"2017-12-15T14:35:37.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/12883#issuecomment-352020630","id":352020630,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/12883","node_id":"MDEyOklzc3VlQ29tbWVudDM1MjAyMDYzMA==","updated_at":"2017-12-15T14:35:37.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/352020630","user":{"following_url":"https:\/\/api.github.com\/users\/ChrisDenham\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/ChrisDenham\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/2325443?v=4","url":"https:\/\/api.github.com\/users\/ChrisDenham","gists_url":"https:\/\/api.github.com\/users\/ChrisDenham\/gists{\/gist_id}","html_url":"https:\/\/github.com\/ChrisDenham","subscriptions_url":"https:\/\/api.github.com\/users\/ChrisDenham\/subscriptions","node_id":"MDQ6VXNlcjIzMjU0NDM=","repos_url":"https:\/\/api.github.com\/users\/ChrisDenham\/repos","received_events_url":"https:\/\/api.github.com\/users\/ChrisDenham\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/ChrisDenham\/starred{\/owner}{\/repo}","site_admin":false,"login":"ChrisDenham","type":"User","id":2325443,"followers_url":"https:\/\/api.github.com\/users\/ChrisDenham\/followers","organizations_url":"https:\/\/api.github.com\/users\/ChrisDenham\/orgs"}},{"index":8,"author_association":"NONE","body":"In case it helps diagnose what's going on, I noticed that I can work around the problem if I comment out the line in Reflector.js that prevents it rendering to texture when the plane is facing away from the camera:\r\nhttps:\/\/github.com\/mrdoob\/three.js\/blob\/6d9c1f752f3d2e371cfd05dc637dd990e035d9e2\/examples\/js\/objects\/Reflector.js#L90\r\n","created_at":"2017-12-15T18:13:33.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/12883#issuecomment-352074674","id":352074674,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/12883","node_id":"MDEyOklzc3VlQ29tbWVudDM1MjA3NDY3NA==","updated_at":"2017-12-15T18:14:39.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/352074674","user":{"following_url":"https:\/\/api.github.com\/users\/ChrisDenham\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/ChrisDenham\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/2325443?v=4","url":"https:\/\/api.github.com\/users\/ChrisDenham","gists_url":"https:\/\/api.github.com\/users\/ChrisDenham\/gists{\/gist_id}","html_url":"https:\/\/github.com\/ChrisDenham","subscriptions_url":"https:\/\/api.github.com\/users\/ChrisDenham\/subscriptions","node_id":"MDQ6VXNlcjIzMjU0NDM=","repos_url":"https:\/\/api.github.com\/users\/ChrisDenham\/repos","received_events_url":"https:\/\/api.github.com\/users\/ChrisDenham\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/ChrisDenham\/starred{\/owner}{\/repo}","site_admin":false,"login":"ChrisDenham","type":"User","id":2325443,"followers_url":"https:\/\/api.github.com\/users\/ChrisDenham\/followers","organizations_url":"https:\/\/api.github.com\/users\/ChrisDenham\/orgs"}},{"index":9,"author_association":"COLLABORATOR","body":"OK, then this is a more fundamental issue. Thank you for pursuing this.\r\n\r\nLighting problems occur if the mirror is not in the camera view when the mirror is added to the scene.\r\n\r\nThis bug can be reproduced in `webgl_mirror.html` by initializing the camera position like so\r\n```javascript\r\ncamera.position.set( 0, 75, - 160 );\r\n```\r\nand then rotating the camera until all mirrors are in view.\r\n\r\n\/ping @Mugen87 @mrdoob \r\n","created_at":"2017-12-15T18:16:25.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/12883#issuecomment-352075271","id":352075271,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/12883","node_id":"MDEyOklzc3VlQ29tbWVudDM1MjA3NTI3MQ==","updated_at":"2017-12-15T18:16:25.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/352075271","user":{"following_url":"https:\/\/api.github.com\/users\/WestLangley\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/WestLangley\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/1000017?v=4","url":"https:\/\/api.github.com\/users\/WestLangley","gists_url":"https:\/\/api.github.com\/users\/WestLangley\/gists{\/gist_id}","html_url":"https:\/\/github.com\/WestLangley","subscriptions_url":"https:\/\/api.github.com\/users\/WestLangley\/subscriptions","node_id":"MDQ6VXNlcjEwMDAwMTc=","repos_url":"https:\/\/api.github.com\/users\/WestLangley\/repos","received_events_url":"https:\/\/api.github.com\/users\/WestLangley\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/WestLangley\/starred{\/owner}{\/repo}","site_admin":false,"login":"WestLangley","type":"User","id":1000017,"followers_url":"https:\/\/api.github.com\/users\/WestLangley\/followers","organizations_url":"https:\/\/api.github.com\/users\/WestLangley\/orgs"}},{"index":10,"author_association":"COLLABORATOR","body":"Um, i wonder how the reflector's material can influence the lighting of the entire scene \ud83e\udd14? \r\n\r\nFor some reasons, the lights seem to be reflected along the reflection plane. It's easy to see this when you set the camera in `webgl_mirror.html` to this value.\r\n```javascript\r\ncamera.position.set( 0, - 75 , 160 );\r\n```\r\nBesides, comment out the addition of the vertical mirror.\r\n```javascript\r\n\/\/ scene.add( verticalMirror );\r\n```","created_at":"2017-12-15T20:32:38.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/12883#issuecomment-352104842","id":352104842,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/12883","node_id":"MDEyOklzc3VlQ29tbWVudDM1MjEwNDg0Mg==","updated_at":"2017-12-15T20:32:56.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/352104842","user":{"following_url":"https:\/\/api.github.com\/users\/Mugen87\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/Mugen87\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/12612165?v=4","url":"https:\/\/api.github.com\/users\/Mugen87","gists_url":"https:\/\/api.github.com\/users\/Mugen87\/gists{\/gist_id}","html_url":"https:\/\/github.com\/Mugen87","subscriptions_url":"https:\/\/api.github.com\/users\/Mugen87\/subscriptions","node_id":"MDQ6VXNlcjEyNjEyMTY1","repos_url":"https:\/\/api.github.com\/users\/Mugen87\/repos","received_events_url":"https:\/\/api.github.com\/users\/Mugen87\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/Mugen87\/starred{\/owner}{\/repo}","site_admin":false,"login":"Mugen87","type":"User","id":12612165,"followers_url":"https:\/\/api.github.com\/users\/Mugen87\/followers","organizations_url":"https:\/\/api.github.com\/users\/Mugen87\/orgs"}},{"index":11,"author_association":"NONE","body":"Could the issue be related to light position uniform setup in the code I referred to in my first comment? If lights are positioned in camera space, it made me wonder if for some reason the light position was using the position for the wrong camera?\r\nhttps:\/\/github.com\/mrdoob\/three.js\/blob\/14ed22d5b5422f11738016cef85d70927117851f\/src\/renderers\/webgl\/WebGLLights.js#L262\r\nThis is just a guess based on how the light position seeming to shift when the mirror texture is rendered.","created_at":"2017-12-15T22:55:26.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/12883#issuecomment-352132309","id":352132309,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/12883","node_id":"MDEyOklzc3VlQ29tbWVudDM1MjEzMjMwOQ==","updated_at":"2017-12-15T22:55:26.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/352132309","user":{"following_url":"https:\/\/api.github.com\/users\/ChrisDenham\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/ChrisDenham\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/2325443?v=4","url":"https:\/\/api.github.com\/users\/ChrisDenham","gists_url":"https:\/\/api.github.com\/users\/ChrisDenham\/gists{\/gist_id}","html_url":"https:\/\/github.com\/ChrisDenham","subscriptions_url":"https:\/\/api.github.com\/users\/ChrisDenham\/subscriptions","node_id":"MDQ6VXNlcjIzMjU0NDM=","repos_url":"https:\/\/api.github.com\/users\/ChrisDenham\/repos","received_events_url":"https:\/\/api.github.com\/users\/ChrisDenham\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/ChrisDenham\/starred{\/owner}{\/repo}","site_admin":false,"login":"ChrisDenham","type":"User","id":2325443,"followers_url":"https:\/\/api.github.com\/users\/ChrisDenham\/followers","organizations_url":"https:\/\/api.github.com\/users\/ChrisDenham\/orgs"}},{"index":12,"author_association":"COLLABORATOR","body":"Oh dear, i think i've found the issue :unamused:\r\n\r\nThe problem is the setup of light uniforms in `WebGLRenderer`:\r\n\r\nhttps:\/\/github.com\/mrdoob\/three.js\/blob\/b50726ac9ddc361111e636c009bc32019c225b1f\/src\/renderers\/WebGLRenderer.js#L1141\r\n\r\nThe setup of lights is done once per frame. But when a reflector is rendered, it overwrites the lights setup because it executes a rendering of the scene in `onBeforeRender()`. The problem is now that this setup is not reverted. So depending on the order of the reflector in the render list, subsequent objects are rendered with the wrong light setup. Or to be more precise, with the wrong view matrix (the one of the reflector's virtual camera).\r\n\r\nI think we have to find a way to restore the light setup after possible changes in `onBeforeRender()`.","created_at":"2017-12-16T15:14:20.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/12883#issuecomment-352189399","id":352189399,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/12883","node_id":"MDEyOklzc3VlQ29tbWVudDM1MjE4OTM5OQ==","updated_at":"2017-12-16T16:38:27.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/352189399","user":{"following_url":"https:\/\/api.github.com\/users\/Mugen87\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/Mugen87\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/12612165?v=4","url":"https:\/\/api.github.com\/users\/Mugen87","gists_url":"https:\/\/api.github.com\/users\/Mugen87\/gists{\/gist_id}","html_url":"https:\/\/github.com\/Mugen87","subscriptions_url":"https:\/\/api.github.com\/users\/Mugen87\/subscriptions","node_id":"MDQ6VXNlcjEyNjEyMTY1","repos_url":"https:\/\/api.github.com\/users\/Mugen87\/repos","received_events_url":"https:\/\/api.github.com\/users\/Mugen87\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/Mugen87\/starred{\/owner}{\/repo}","site_admin":false,"login":"Mugen87","type":"User","id":12612165,"followers_url":"https:\/\/api.github.com\/users\/Mugen87\/followers","organizations_url":"https:\/\/api.github.com\/users\/Mugen87\/orgs"}},{"index":13,"author_association":"COLLABORATOR","body":"One possible workaround: Set the `.renderOrder` of a reflector to a high value.\r\n\r\nhttps:\/\/jsfiddle.net\/9zLhq9Lf\/4\/\r\n\r\nBut we definitely need a conceptual solution for this bug.","created_at":"2017-12-16T15:35:38.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/12883#issuecomment-352190682","id":352190682,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/12883","node_id":"MDEyOklzc3VlQ29tbWVudDM1MjE5MDY4Mg==","updated_at":"2017-12-16T15:40:08.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/352190682","user":{"following_url":"https:\/\/api.github.com\/users\/Mugen87\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/Mugen87\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/12612165?v=4","url":"https:\/\/api.github.com\/users\/Mugen87","gists_url":"https:\/\/api.github.com\/users\/Mugen87\/gists{\/gist_id}","html_url":"https:\/\/github.com\/Mugen87","subscriptions_url":"https:\/\/api.github.com\/users\/Mugen87\/subscriptions","node_id":"MDQ6VXNlcjEyNjEyMTY1","repos_url":"https:\/\/api.github.com\/users\/Mugen87\/repos","received_events_url":"https:\/\/api.github.com\/users\/Mugen87\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/Mugen87\/starred{\/owner}{\/repo}","site_admin":false,"login":"Mugen87","type":"User","id":12612165,"followers_url":"https:\/\/api.github.com\/users\/Mugen87\/followers","organizations_url":"https:\/\/api.github.com\/users\/Mugen87\/orgs"}},{"index":14,"author_association":"NONE","body":"ooo.. interesting. so presumably the problem could affect anything where onbeforerender is used to render from a different camera position? \r\nThanks for the renderOrder workaround for the meantime. ","created_at":"2017-12-16T15:49:10.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/12883#issuecomment-352191485","id":352191485,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/12883","node_id":"MDEyOklzc3VlQ29tbWVudDM1MjE5MTQ4NQ==","updated_at":"2017-12-16T15:49:10.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/352191485","user":{"following_url":"https:\/\/api.github.com\/users\/ChrisDenham\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/ChrisDenham\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/2325443?v=4","url":"https:\/\/api.github.com\/users\/ChrisDenham","gists_url":"https:\/\/api.github.com\/users\/ChrisDenham\/gists{\/gist_id}","html_url":"https:\/\/github.com\/ChrisDenham","subscriptions_url":"https:\/\/api.github.com\/users\/ChrisDenham\/subscriptions","node_id":"MDQ6VXNlcjIzMjU0NDM=","repos_url":"https:\/\/api.github.com\/users\/ChrisDenham\/repos","received_events_url":"https:\/\/api.github.com\/users\/ChrisDenham\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/ChrisDenham\/starred{\/owner}{\/repo}","site_admin":false,"login":"ChrisDenham","type":"User","id":2325443,"followers_url":"https:\/\/api.github.com\/users\/ChrisDenham\/followers","organizations_url":"https:\/\/api.github.com\/users\/ChrisDenham\/orgs"}},{"index":15,"author_association":"COLLABORATOR","body":"> so presumably the problem could affect anything where onbeforerender is used to render from a different camera position?\r\n\r\nYes, unfortunately. This makes the problem even more critical...","created_at":"2017-12-16T15:56:13.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/12883#issuecomment-352191935","id":352191935,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/12883","node_id":"MDEyOklzc3VlQ29tbWVudDM1MjE5MTkzNQ==","updated_at":"2017-12-16T16:14:40.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/352191935","user":{"following_url":"https:\/\/api.github.com\/users\/Mugen87\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/Mugen87\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/12612165?v=4","url":"https:\/\/api.github.com\/users\/Mugen87","gists_url":"https:\/\/api.github.com\/users\/Mugen87\/gists{\/gist_id}","html_url":"https:\/\/github.com\/Mugen87","subscriptions_url":"https:\/\/api.github.com\/users\/Mugen87\/subscriptions","node_id":"MDQ6VXNlcjEyNjEyMTY1","repos_url":"https:\/\/api.github.com\/users\/Mugen87\/repos","received_events_url":"https:\/\/api.github.com\/users\/Mugen87\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/Mugen87\/starred{\/owner}{\/repo}","site_admin":false,"login":"Mugen87","type":"User","id":12612165,"followers_url":"https:\/\/api.github.com\/users\/Mugen87\/followers","organizations_url":"https:\/\/api.github.com\/users\/Mugen87\/orgs"}},{"index":16,"author_association":"COLLABORATOR","body":"I've created a basic PR that solves the problem. Not the best solution but at least straightforward.\r\n\r\nAn other solution: Set `renderOrder` in `Reflector` to something like `Infinity` so it's always at the end of the render list. But this seems very hacky...","created_at":"2017-12-16T22:29:53.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/12883#issuecomment-352216474","id":352216474,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/12883","node_id":"MDEyOklzc3VlQ29tbWVudDM1MjIxNjQ3NA==","updated_at":"2017-12-16T22:31:51.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/352216474","user":{"following_url":"https:\/\/api.github.com\/users\/Mugen87\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/Mugen87\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/12612165?v=4","url":"https:\/\/api.github.com\/users\/Mugen87","gists_url":"https:\/\/api.github.com\/users\/Mugen87\/gists{\/gist_id}","html_url":"https:\/\/github.com\/Mugen87","subscriptions_url":"https:\/\/api.github.com\/users\/Mugen87\/subscriptions","node_id":"MDQ6VXNlcjEyNjEyMTY1","repos_url":"https:\/\/api.github.com\/users\/Mugen87\/repos","received_events_url":"https:\/\/api.github.com\/users\/Mugen87\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/Mugen87\/starred{\/owner}{\/repo}","site_admin":false,"login":"Mugen87","type":"User","id":12612165,"followers_url":"https:\/\/api.github.com\/users\/Mugen87\/followers","organizations_url":"https:\/\/api.github.com\/users\/Mugen87\/orgs"}},{"index":17,"author_association":"NONE","body":"Cool.. will try the PR change monday. Btw. just wondered if adding a call to a new function in WebGLRenderer risked breaking things for other renderer types that don\u2019t implement that function? Does it need to check if the function exists before calling? Not an issue for me... I just thought it worth mentioning as it popped into my head when looking at your PR. ","created_at":"2017-12-16T23:02:09.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/12883#issuecomment-352217921","id":352217921,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/12883","node_id":"MDEyOklzc3VlQ29tbWVudDM1MjIxNzkyMQ==","updated_at":"2017-12-16T23:02:09.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/352217921","user":{"following_url":"https:\/\/api.github.com\/users\/ChrisDenham\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/ChrisDenham\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/2325443?v=4","url":"https:\/\/api.github.com\/users\/ChrisDenham","gists_url":"https:\/\/api.github.com\/users\/ChrisDenham\/gists{\/gist_id}","html_url":"https:\/\/github.com\/ChrisDenham","subscriptions_url":"https:\/\/api.github.com\/users\/ChrisDenham\/subscriptions","node_id":"MDQ6VXNlcjIzMjU0NDM=","repos_url":"https:\/\/api.github.com\/users\/ChrisDenham\/repos","received_events_url":"https:\/\/api.github.com\/users\/ChrisDenham\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/ChrisDenham\/starred{\/owner}{\/repo}","site_admin":false,"login":"ChrisDenham","type":"User","id":2325443,"followers_url":"https:\/\/api.github.com\/users\/ChrisDenham\/followers","organizations_url":"https:\/\/api.github.com\/users\/ChrisDenham\/orgs"}},{"index":18,"author_association":"COLLABORATOR","body":">  Btw. just wondered if adding a call to a new function in WebGLRenderer risked breaking things for other renderer types that don\u2019t implement that function? \r\n\r\nThat should be no problem. The PR introduces a new method that won't affect existing code. But one thing is important:\r\n\r\nThe version (or release) of `Reflector` and `three.js` itself (so the core) should always match. So using a current `Reflector` but an old `three.js` version is no good approach. This is also true for the loaders and all other entities of the `examples` directory.","created_at":"2017-12-17T10:21:46.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/12883#issuecomment-352245385","id":352245385,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/12883","node_id":"MDEyOklzc3VlQ29tbWVudDM1MjI0NTM4NQ==","updated_at":"2017-12-17T10:23:19.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/352245385","user":{"following_url":"https:\/\/api.github.com\/users\/Mugen87\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/Mugen87\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/12612165?v=4","url":"https:\/\/api.github.com\/users\/Mugen87","gists_url":"https:\/\/api.github.com\/users\/Mugen87\/gists{\/gist_id}","html_url":"https:\/\/github.com\/Mugen87","subscriptions_url":"https:\/\/api.github.com\/users\/Mugen87\/subscriptions","node_id":"MDQ6VXNlcjEyNjEyMTY1","repos_url":"https:\/\/api.github.com\/users\/Mugen87\/repos","received_events_url":"https:\/\/api.github.com\/users\/Mugen87\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/Mugen87\/starred{\/owner}{\/repo}","site_admin":false,"login":"Mugen87","type":"User","id":12612165,"followers_url":"https:\/\/api.github.com\/users\/Mugen87\/followers","organizations_url":"https:\/\/api.github.com\/users\/Mugen87\/orgs"}},{"index":19,"author_association":"NONE","body":"@Mugen87  I just tried your PR. Looks good to me. Thanks. Another supplementary question though: Presumably the PR only fixes Reflector, but couldn't the issue potentially affect anything that uses `onbeforerender` to render another camera position?  i.e. do we need a more general fix?","created_at":"2017-12-18T10:27:17.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/12883#issuecomment-352386165","id":352386165,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/12883","node_id":"MDEyOklzc3VlQ29tbWVudDM1MjM4NjE2NQ==","updated_at":"2017-12-18T10:27:17.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/352386165","user":{"following_url":"https:\/\/api.github.com\/users\/ChrisDenham\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/ChrisDenham\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/2325443?v=4","url":"https:\/\/api.github.com\/users\/ChrisDenham","gists_url":"https:\/\/api.github.com\/users\/ChrisDenham\/gists{\/gist_id}","html_url":"https:\/\/github.com\/ChrisDenham","subscriptions_url":"https:\/\/api.github.com\/users\/ChrisDenham\/subscriptions","node_id":"MDQ6VXNlcjIzMjU0NDM=","repos_url":"https:\/\/api.github.com\/users\/ChrisDenham\/repos","received_events_url":"https:\/\/api.github.com\/users\/ChrisDenham\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/ChrisDenham\/starred{\/owner}{\/repo}","site_admin":false,"login":"ChrisDenham","type":"User","id":2325443,"followers_url":"https:\/\/api.github.com\/users\/ChrisDenham\/followers","organizations_url":"https:\/\/api.github.com\/users\/ChrisDenham\/orgs"}},{"index":20,"author_association":"COLLABORATOR","body":"> but couldn't the issue potentially affect anything that uses onbeforerender to render another camera position? i.e. do we need a more general fix?\r\n\r\nYes, right now it is necessary to call `.updateLights()` after each call of `.render()`. A general solution requires some refactoring so nested calls of `.render()` don't overwrite state information. But let's wait how @mrdoob evaluates this issue. Maybe there is an obvious solution that i've missed so far.","created_at":"2017-12-18T10:57:06.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/12883#issuecomment-352393221","id":352393221,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/12883","node_id":"MDEyOklzc3VlQ29tbWVudDM1MjM5MzIyMQ==","updated_at":"2017-12-18T10:57:06.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/352393221","user":{"following_url":"https:\/\/api.github.com\/users\/Mugen87\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/Mugen87\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/12612165?v=4","url":"https:\/\/api.github.com\/users\/Mugen87","gists_url":"https:\/\/api.github.com\/users\/Mugen87\/gists{\/gist_id}","html_url":"https:\/\/github.com\/Mugen87","subscriptions_url":"https:\/\/api.github.com\/users\/Mugen87\/subscriptions","node_id":"MDQ6VXNlcjEyNjEyMTY1","repos_url":"https:\/\/api.github.com\/users\/Mugen87\/repos","received_events_url":"https:\/\/api.github.com\/users\/Mugen87\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/Mugen87\/starred{\/owner}{\/repo}","site_admin":false,"login":"Mugen87","type":"User","id":12612165,"followers_url":"https:\/\/api.github.com\/users\/Mugen87\/followers","organizations_url":"https:\/\/api.github.com\/users\/Mugen87\/orgs"}},{"index":21,"author_association":"OWNER","body":"https:\/\/jsfiddle.net\/9zLhq9Lf\/6\/\r\n","created_at":"2018-02-06T05:15:19.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/12883#issuecomment-363313396","id":363313396,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/12883","node_id":"MDEyOklzc3VlQ29tbWVudDM2MzMxMzM5Ng==","updated_at":"2018-02-06T05:15:19.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/363313396","user":{"following_url":"https:\/\/api.github.com\/users\/mrdoob\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/mrdoob\/events{\/privacy}","avatar_url":"https:\/\/avatars0.githubusercontent.com\/u\/97088?v=4","url":"https:\/\/api.github.com\/users\/mrdoob","gists_url":"https:\/\/api.github.com\/users\/mrdoob\/gists{\/gist_id}","html_url":"https:\/\/github.com\/mrdoob","subscriptions_url":"https:\/\/api.github.com\/users\/mrdoob\/subscriptions","node_id":"MDQ6VXNlcjk3MDg4","repos_url":"https:\/\/api.github.com\/users\/mrdoob\/repos","received_events_url":"https:\/\/api.github.com\/users\/mrdoob\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/mrdoob\/starred{\/owner}{\/repo}","site_admin":false,"login":"mrdoob","type":"User","id":97088,"followers_url":"https:\/\/api.github.com\/users\/mrdoob\/followers","organizations_url":"https:\/\/api.github.com\/users\/mrdoob\/orgs"}},{"index":22,"author_association":"NONE","body":"Just for info: I can confirm that updating to r90 fixed the problems I was having with `Reflector` in my application.  Thank you! :-)","created_at":"2018-02-15T10:42:24.000Z","html_url":"https:\/\/github.com\/mrdoob\/three.js\/issues\/12883#issuecomment-365889449","id":365889449,"issue_url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/12883","node_id":"MDEyOklzc3VlQ29tbWVudDM2NTg4OTQ0OQ==","updated_at":"2018-02-15T10:42:24.000Z","url":"https:\/\/api.github.com\/repos\/mrdoob\/three.js\/issues\/comments\/365889449","user":{"following_url":"https:\/\/api.github.com\/users\/ChrisDenham\/following{\/other_user}","events_url":"https:\/\/api.github.com\/users\/ChrisDenham\/events{\/privacy}","avatar_url":"https:\/\/avatars2.githubusercontent.com\/u\/2325443?v=4","url":"https:\/\/api.github.com\/users\/ChrisDenham","gists_url":"https:\/\/api.github.com\/users\/ChrisDenham\/gists{\/gist_id}","html_url":"https:\/\/github.com\/ChrisDenham","subscriptions_url":"https:\/\/api.github.com\/users\/ChrisDenham\/subscriptions","node_id":"MDQ6VXNlcjIzMjU0NDM=","repos_url":"https:\/\/api.github.com\/users\/ChrisDenham\/repos","received_events_url":"https:\/\/api.github.com\/users\/ChrisDenham\/received_events","gravatar_id":"","starred_url":"https:\/\/api.github.com\/users\/ChrisDenham\/starred{\/owner}{\/repo}","site_admin":false,"login":"ChrisDenham","type":"User","id":2325443,"followers_url":"https:\/\/api.github.com\/users\/ChrisDenham\/followers","organizations_url":"https:\/\/api.github.com\/users\/ChrisDenham\/orgs"}}]}