[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/373800077",
    "html_url": "https://github.com/grpc/grpc/issues/14257#issuecomment-373800077",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14257",
    "id": 373800077,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MzgwMDA3Nw==",
    "user": {
      "login": "adelez",
      "id": 14932100,
      "node_id": "MDQ6VXNlcjE0OTMyMTAw",
      "avatar_url": "https://avatars3.githubusercontent.com/u/14932100?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/adelez",
      "html_url": "https://github.com/adelez",
      "followers_url": "https://api.github.com/users/adelez/followers",
      "following_url": "https://api.github.com/users/adelez/following{/other_user}",
      "gists_url": "https://api.github.com/users/adelez/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/adelez/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/adelez/subscriptions",
      "organizations_url": "https://api.github.com/users/adelez/orgs",
      "repos_url": "https://api.github.com/users/adelez/repos",
      "events_url": "https://api.github.com/users/adelez/events{/privacy}",
      "received_events_url": "https://api.github.com/users/adelez/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-16T18:13:07Z",
    "updated_at": "2018-03-16T18:13:07Z",
    "author_association": "CONTRIBUTOR",
    "body": "https://source.cloud.google.com/results/invocations/4527ecf2-f7b3-434e-9102-b75e1ce1df5c/targets/%2F%2Ftest%2Fcpp%2Fqps:qps_openloop_test@poller%3Depoll1/log"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/387963210",
    "html_url": "https://github.com/grpc/grpc/issues/14257#issuecomment-387963210",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14257",
    "id": 387963210,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4Nzk2MzIxMA==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-10T06:18:19Z",
    "updated_at": "2018-05-10T06:18:19Z",
    "author_association": "CONTRIBUTOR",
    "body": "This still seems to be happening. @vjpai please take a look (or reassign to someone who can) and update this thread."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/390372169",
    "html_url": "https://github.com/grpc/grpc/issues/14257#issuecomment-390372169",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14257",
    "id": 390372169,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MDM3MjE2OQ==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-19T02:29:30Z",
    "updated_at": "2018-05-19T02:29:30Z",
    "author_association": "CONTRIBUTOR",
    "body": "based on the error log this is an actual data race (not detected by older TSAN version we run on Kokoro) that needs immediate attention.\r\n\r\nhttps://source.cloud.google.com/results/invocations/58e439f3-e691-4754-9ca2-24afb80fdae8/targets/%2F%2Ftest%2Fcpp%2Fqps:qps_openloop_test@poller%3Depoll1/log\r\n\r\n@yashykt   @ncteisen   @sreecha   @yang-g  can any of you take over this issue?\r\n\r\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/391536448",
    "html_url": "https://github.com/grpc/grpc/issues/14257#issuecomment-391536448",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14257",
    "id": 391536448,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MTUzNjQ0OA==",
    "user": {
      "login": "ncteisen",
      "id": 6148140,
      "node_id": "MDQ6VXNlcjYxNDgxNDA=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/6148140?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ncteisen",
      "html_url": "https://github.com/ncteisen",
      "followers_url": "https://api.github.com/users/ncteisen/followers",
      "following_url": "https://api.github.com/users/ncteisen/following{/other_user}",
      "gists_url": "https://api.github.com/users/ncteisen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ncteisen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ncteisen/subscriptions",
      "organizations_url": "https://api.github.com/users/ncteisen/orgs",
      "repos_url": "https://api.github.com/users/ncteisen/repos",
      "events_url": "https://api.github.com/users/ncteisen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ncteisen/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-23T23:35:38Z",
    "updated_at": "2018-05-23T23:35:38Z",
    "author_association": "CONTRIBUTOR",
    "body": "Ok, I just stared digging. Will shoot for regular updates.\r\n\r\nThe root problem is a race when multiple threads call https://github.com/grpc/grpc/blob/515908ba3196d057a8465a146f667b9e6c2ad9f2/include/grpcpp/impl/codegen/proto_utils.h#L52\r\n\r\nThat functions actually updates an internal member of the protobuf message under the hood, so it makes sense this would race.\r\n\r\nThe thing is we have been doing this for a while. The call to that functions was added in #3480, which optimized serialization of small protos directly into one slice. The call must exist if we want to use `SerializeWithCachedSizesToArray`, and the actual value, `byte_size`, is used for another optimization added in #13315.\r\n\r\nQuestions:\r\n- why is this not being caught by our test sweep of the QPS scenarios? Do we not run them with TSAN? I don't see why this would be specific problem to the unit test versions."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/391537937",
    "html_url": "https://github.com/grpc/grpc/issues/14257#issuecomment-391537937",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14257",
    "id": 391537937,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MTUzNzkzNw==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-23T23:41:11Z",
    "updated_at": "2018-05-23T23:41:11Z",
    "author_association": "CONTRIBUTOR",
    "body": "@ncteisen  we do run with TSAN on kokoro, but until very recently (see https://github.com/grpc/grpc/pull/15499) we have been using an older clang version (3.8 I think), while remote bazel execution uses clang 7. Another reason is that the timings of different execution environments may be different."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/391538891",
    "html_url": "https://github.com/grpc/grpc/issues/14257#issuecomment-391538891",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14257",
    "id": 391538891,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MTUzODg5MQ==",
    "user": {
      "login": "ncteisen",
      "id": 6148140,
      "node_id": "MDQ6VXNlcjYxNDgxNDA=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/6148140?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ncteisen",
      "html_url": "https://github.com/ncteisen",
      "followers_url": "https://api.github.com/users/ncteisen/followers",
      "following_url": "https://api.github.com/users/ncteisen/following{/other_user}",
      "gists_url": "https://api.github.com/users/ncteisen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ncteisen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ncteisen/subscriptions",
      "organizations_url": "https://api.github.com/users/ncteisen/orgs",
      "repos_url": "https://api.github.com/users/ncteisen/repos",
      "events_url": "https://api.github.com/users/ncteisen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ncteisen/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-23T23:46:41Z",
    "updated_at": "2018-05-23T23:46:41Z",
    "author_association": "CONTRIBUTOR",
    "body": "For remote bazel do we run the sweep of QPS driver scenarios? Or have those not yet been migrated, because I would assume that they would fail in the same way"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/391539558",
    "html_url": "https://github.com/grpc/grpc/issues/14257#issuecomment-391539558",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14257",
    "id": 391539558,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MTUzOTU1OA==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-23T23:50:30Z",
    "updated_at": "2018-05-23T23:50:40Z",
    "author_association": "CONTRIBUTOR",
    "body": "@ncteisen  AFAIK  `json_run_localhost` scenarios are not running on remote bazel."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/391929635",
    "html_url": "https://github.com/grpc/grpc/issues/14257#issuecomment-391929635",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14257",
    "id": 391929635,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MTkyOTYzNQ==",
    "user": {
      "login": "ncteisen",
      "id": 6148140,
      "node_id": "MDQ6VXNlcjYxNDgxNDA=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/6148140?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ncteisen",
      "html_url": "https://github.com/ncteisen",
      "followers_url": "https://api.github.com/users/ncteisen/followers",
      "following_url": "https://api.github.com/users/ncteisen/following{/other_user}",
      "gists_url": "https://api.github.com/users/ncteisen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ncteisen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ncteisen/subscriptions",
      "organizations_url": "https://api.github.com/users/ncteisen/orgs",
      "repos_url": "https://api.github.com/users/ncteisen/repos",
      "events_url": "https://api.github.com/users/ncteisen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ncteisen/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-25T03:19:14Z",
    "updated_at": "2018-05-25T03:23:20Z",
    "author_association": "CONTRIBUTOR",
    "body": "I just did a revert of #3480 and #13315 and #14366, but then the data race just occurred on this line: https://github.com/grpc/grpc/blob/515908ba3196d057a8465a146f667b9e6c2ad9f2/include/grpcpp/impl/codegen/proto_utils.h#L64\r\n\r\nMight need to loop the protobuf team in about this, to see if it is ok to call these functions on the same proto object from multiple threads... It is a strange use case, but it makes sense in the case of a benchmark that is using the same canonical request proto, but serializing each time to get realistic data\r\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/391930051",
    "html_url": "https://github.com/grpc/grpc/issues/14257#issuecomment-391930051",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14257",
    "id": 391930051,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MTkzMDA1MQ==",
    "user": {
      "login": "ncteisen",
      "id": 6148140,
      "node_id": "MDQ6VXNlcjYxNDgxNDA=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/6148140?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ncteisen",
      "html_url": "https://github.com/ncteisen",
      "followers_url": "https://api.github.com/users/ncteisen/followers",
      "following_url": "https://api.github.com/users/ncteisen/following{/other_user}",
      "gists_url": "https://api.github.com/users/ncteisen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ncteisen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ncteisen/subscriptions",
      "organizations_url": "https://api.github.com/users/ncteisen/orgs",
      "repos_url": "https://api.github.com/users/ncteisen/repos",
      "events_url": "https://api.github.com/users/ncteisen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ncteisen/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-25T03:22:30Z",
    "updated_at": "2018-05-25T03:24:31Z",
    "author_association": "CONTRIBUTOR",
    "body": "Some googling has lead me to google/protobuf#2169\r\n\r\n🤔🤔🤔 "
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/391931230",
    "html_url": "https://github.com/grpc/grpc/issues/14257#issuecomment-391931230",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14257",
    "id": 391931230,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MTkzMTIzMA==",
    "user": {
      "login": "ncteisen",
      "id": 6148140,
      "node_id": "MDQ6VXNlcjYxNDgxNDA=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/6148140?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ncteisen",
      "html_url": "https://github.com/ncteisen",
      "followers_url": "https://api.github.com/users/ncteisen/followers",
      "following_url": "https://api.github.com/users/ncteisen/following{/other_user}",
      "gists_url": "https://api.github.com/users/ncteisen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ncteisen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ncteisen/subscriptions",
      "organizations_url": "https://api.github.com/users/ncteisen/orgs",
      "repos_url": "https://api.github.com/users/ncteisen/repos",
      "events_url": "https://api.github.com/users/ncteisen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ncteisen/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-25T03:32:04Z",
    "updated_at": "2018-05-25T03:32:04Z",
    "author_association": "CONTRIBUTOR",
    "body": "Looks like we have also already seen this in #8174, and fixed it in #8188"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/391932224",
    "html_url": "https://github.com/grpc/grpc/issues/14257#issuecomment-391932224",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14257",
    "id": 391932224,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MTkzMjIyNA==",
    "user": {
      "login": "ncteisen",
      "id": 6148140,
      "node_id": "MDQ6VXNlcjYxNDgxNDA=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/6148140?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ncteisen",
      "html_url": "https://github.com/ncteisen",
      "followers_url": "https://api.github.com/users/ncteisen/followers",
      "following_url": "https://api.github.com/users/ncteisen/following{/other_user}",
      "gists_url": "https://api.github.com/users/ncteisen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ncteisen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ncteisen/subscriptions",
      "organizations_url": "https://api.github.com/users/ncteisen/orgs",
      "repos_url": "https://api.github.com/users/ncteisen/repos",
      "events_url": "https://api.github.com/users/ncteisen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ncteisen/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-25T03:40:22Z",
    "updated_at": "2018-05-25T03:40:22Z",
    "author_association": "CONTRIBUTOR",
    "body": "Do the suppressions work differently in bazel? Because we have this suppressed here https://github.com/grpc/grpc/blob/515908ba3196d057a8465a146f667b9e6c2ad9f2/tools/tsan_suppressions.txt#L11\r\n\r\nAnd it did not help to add it here https://github.com/grpc/grpc/blob/515908ba3196d057a8465a146f667b9e6c2ad9f2/build.yaml#L5482"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/392123008",
    "html_url": "https://github.com/grpc/grpc/issues/14257#issuecomment-392123008",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14257",
    "id": 392123008,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MjEyMzAwOA==",
    "user": {
      "login": "adelez",
      "id": 14932100,
      "node_id": "MDQ6VXNlcjE0OTMyMTAw",
      "avatar_url": "https://avatars3.githubusercontent.com/u/14932100?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/adelez",
      "html_url": "https://github.com/adelez",
      "followers_url": "https://api.github.com/users/adelez/followers",
      "following_url": "https://api.github.com/users/adelez/following{/other_user}",
      "gists_url": "https://api.github.com/users/adelez/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/adelez/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/adelez/subscriptions",
      "organizations_url": "https://api.github.com/users/adelez/orgs",
      "repos_url": "https://api.github.com/users/adelez/repos",
      "events_url": "https://api.github.com/users/adelez/events{/privacy}",
      "received_events_url": "https://api.github.com/users/adelez/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-25T17:12:32Z",
    "updated_at": "2018-05-25T17:12:32Z",
    "author_association": "CONTRIBUTOR",
    "body": "Suppression is not applied to bazel builds. If it needs to be suppressed, I'll try it with bazel. "
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/393077868",
    "html_url": "https://github.com/grpc/grpc/issues/14257#issuecomment-393077868",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14257",
    "id": 393077868,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MzA3Nzg2OA==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-30T08:34:53Z",
    "updated_at": "2018-05-30T08:34:53Z",
    "author_association": "CONTRIBUTOR",
    "body": "to update on what was discussed offline: looks like we are setting  tsan_suppressions.txt   here: https://github.com/grpc/grpc/blob/3fd27cea762fef9d860dd9b0dd4b183ffb1dd245/tools/bazel.rc#L35\r\n\r\nwe need to investigate if/why that setting are not honored by remote bazel runs."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/394535072",
    "html_url": "https://github.com/grpc/grpc/issues/14257#issuecomment-394535072",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14257",
    "id": 394535072,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NDUzNTA3Mg==",
    "user": {
      "login": "ncteisen",
      "id": 6148140,
      "node_id": "MDQ6VXNlcjYxNDgxNDA=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/6148140?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ncteisen",
      "html_url": "https://github.com/ncteisen",
      "followers_url": "https://api.github.com/users/ncteisen/followers",
      "following_url": "https://api.github.com/users/ncteisen/following{/other_user}",
      "gists_url": "https://api.github.com/users/ncteisen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ncteisen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ncteisen/subscriptions",
      "organizations_url": "https://api.github.com/users/ncteisen/orgs",
      "repos_url": "https://api.github.com/users/ncteisen/repos",
      "events_url": "https://api.github.com/users/ncteisen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ncteisen/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-04T23:45:55Z",
    "updated_at": "2018-06-04T23:45:55Z",
    "author_association": "CONTRIBUTOR",
    "body": "I have looked into this a bit further.\r\n\r\nrunning: \r\n```\r\nmake qps_openloop_test\r\nbins/tsan/qps_openloop_test\r\n```\r\n\r\nWill fail with the TSAN error. \r\n\r\nBut if I run:\r\n```\r\nTSAN_OPTIONS=\"suppressions=/usr/local/google/home/ncteisen/Desktop/grpc/tools/tsan_suppressions.txt\" bins/tsan/qps_openloop_test\r\n```\r\n\r\nSo this is a problem with the way we feed the binary the suppression file.\r\n\r\nSomething here:\r\nhttps://github.com/grpc/grpc/blob/70ce9e21df4f6a18fbcfbb2103d1e89987125f4a/build.yaml#L5580"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/394535665",
    "html_url": "https://github.com/grpc/grpc/issues/14257#issuecomment-394535665",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14257",
    "id": 394535665,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NDUzNTY2NQ==",
    "user": {
      "login": "dgquintas",
      "id": 120217,
      "node_id": "MDQ6VXNlcjEyMDIxNw==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/120217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dgquintas",
      "html_url": "https://github.com/dgquintas",
      "followers_url": "https://api.github.com/users/dgquintas/followers",
      "following_url": "https://api.github.com/users/dgquintas/following{/other_user}",
      "gists_url": "https://api.github.com/users/dgquintas/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dgquintas/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dgquintas/subscriptions",
      "organizations_url": "https://api.github.com/users/dgquintas/orgs",
      "repos_url": "https://api.github.com/users/dgquintas/repos",
      "events_url": "https://api.github.com/users/dgquintas/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dgquintas/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-04T23:49:17Z",
    "updated_at": "2018-06-04T23:50:03Z",
    "author_association": "NONE",
    "body": "I believe we rely on `run_tests.py` to setup the environment from the values in the build.yaml file. That explains why running it \"manually\" doesn't automatically pick up the suppressions."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/394536689",
    "html_url": "https://github.com/grpc/grpc/issues/14257#issuecomment-394536689",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14257",
    "id": 394536689,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NDUzNjY4OQ==",
    "user": {
      "login": "ncteisen",
      "id": 6148140,
      "node_id": "MDQ6VXNlcjYxNDgxNDA=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/6148140?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ncteisen",
      "html_url": "https://github.com/ncteisen",
      "followers_url": "https://api.github.com/users/ncteisen/followers",
      "following_url": "https://api.github.com/users/ncteisen/following{/other_user}",
      "gists_url": "https://api.github.com/users/ncteisen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ncteisen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ncteisen/subscriptions",
      "organizations_url": "https://api.github.com/users/ncteisen/orgs",
      "repos_url": "https://api.github.com/users/ncteisen/repos",
      "events_url": "https://api.github.com/users/ncteisen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ncteisen/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-04T23:56:08Z",
    "updated_at": "2018-06-04T23:56:08Z",
    "author_association": "CONTRIBUTOR",
    "body": "Ahh yeah, I see that environ var gets passed to the generated tests.json. And this does work when I use run_tests.py to invoke. So this is an issue in how bazel picks up the suppresion file"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/394541796",
    "html_url": "https://github.com/grpc/grpc/issues/14257#issuecomment-394541796",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14257",
    "id": 394541796,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NDU0MTc5Ng==",
    "user": {
      "login": "ncteisen",
      "id": 6148140,
      "node_id": "MDQ6VXNlcjYxNDgxNDA=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/6148140?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ncteisen",
      "html_url": "https://github.com/ncteisen",
      "followers_url": "https://api.github.com/users/ncteisen/followers",
      "following_url": "https://api.github.com/users/ncteisen/following{/other_user}",
      "gists_url": "https://api.github.com/users/ncteisen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ncteisen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ncteisen/subscriptions",
      "organizations_url": "https://api.github.com/users/ncteisen/orgs",
      "repos_url": "https://api.github.com/users/ncteisen/repos",
      "events_url": "https://api.github.com/users/ncteisen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ncteisen/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-05T00:27:46Z",
    "updated_at": "2018-06-05T00:27:46Z",
    "author_association": "CONTRIBUTOR",
    "body": "```\r\nbazel test //test/cpp/qps:qps_openloop_test\r\n```\r\n\r\nAlso passes for me. I am running clang 4.0\r\n\r\nI can't even figure out how to get clang 7... I don't see it listed on the [download page](http://releases.llvm.org/download.html)"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/394794268",
    "html_url": "https://github.com/grpc/grpc/issues/14257#issuecomment-394794268",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14257",
    "id": 394794268,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NDc5NDI2OA==",
    "user": {
      "login": "adelez",
      "id": 14932100,
      "node_id": "MDQ6VXNlcjE0OTMyMTAw",
      "avatar_url": "https://avatars3.githubusercontent.com/u/14932100?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/adelez",
      "html_url": "https://github.com/adelez",
      "followers_url": "https://api.github.com/users/adelez/followers",
      "following_url": "https://api.github.com/users/adelez/following{/other_user}",
      "gists_url": "https://api.github.com/users/adelez/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/adelez/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/adelez/subscriptions",
      "organizations_url": "https://api.github.com/users/adelez/orgs",
      "repos_url": "https://api.github.com/users/adelez/repos",
      "events_url": "https://api.github.com/users/adelez/events{/privacy}",
      "received_events_url": "https://api.github.com/users/adelez/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-05T17:28:53Z",
    "updated_at": "2018-06-05T17:28:53Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thank you for the investigation. I think I have a fix. "
  }
]
