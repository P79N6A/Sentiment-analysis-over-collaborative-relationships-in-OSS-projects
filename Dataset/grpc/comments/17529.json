[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/447980117",
    "html_url": "https://github.com/grpc/grpc/pull/17529#issuecomment-447980117",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/17529",
    "id": 447980117,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0Nzk4MDExNw==",
    "user": {
      "login": "grpc-testing",
      "id": 28024233,
      "node_id": "MDQ6VXNlcjI4MDI0MjMz",
      "avatar_url": "https://avatars1.githubusercontent.com/u/28024233?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-testing",
      "html_url": "https://github.com/grpc-testing",
      "followers_url": "https://api.github.com/users/grpc-testing/followers",
      "following_url": "https://api.github.com/users/grpc-testing/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-testing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-testing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-testing/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-testing/orgs",
      "repos_url": "https://api.github.com/users/grpc-testing/repos",
      "events_url": "https://api.github.com/users/grpc-testing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-testing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-17T20:04:48Z",
    "updated_at": "2018-12-17T20:04:48Z",
    "author_association": "NONE",
    "body": "```\n****************************************************************\n\nlibgrpc.so\n\n     VM SIZE                                                                                            FILE SIZE\n ++++++++++++++ GROWING                                                                              ++++++++++++++\n  +0.0%    +244 [None]                                                                               +6.82Ki  +0.1%\n      +0.0%    +180 [Unmapped]                                                                           +6.82Ki  +0.1%\n      [NEW]     +40 grpc_core::(anonymous namespace)::g_start_resolving_queue_mu                               0  [ = ]\n      +1.4%     +16 [None]                                                                                     0  [ = ]\n      [NEW]      +8 grpc_core::(anonymous namespace)::g_start_resolving_queue_head                             0  [ = ]\n   +13%    +620 src/core/ext/filters/client_channel/resolver/dns/c_ares/dns_resolver_ares.cc            +620   +13%\n      [NEW]    +536 grpc_core::(anonymous namespace)::AresDnsResolver::ContinueStartResolvingLocked         +536  [NEW]\n      [NEW]    +259 grpc_core::(anonymous namespace)::AresDnsResolver::EnterStartResolvingQueueLocked       +259  [NEW]\n      +8.7%     +56 grpc_core::(anonymous namespace)::AresDnsResolverFactory::CreateResolver(grpc_core::     +56  +8.7%\n      +5.4%     +16 grpc_resolver_dns_ares_init                                                              +16  +5.4%\n       +16%     +12 grpc_resolver_dns_ares_shutdown                                                          +12   +16%\n      +5.8%      +8 [Unmapped]                                                                                +8  +5.8%\n\n  +0.1%    +864 TOTAL                                                                                +7.42Ki  +0.1%\n\n\n****************************************************************\n\nlibgrpc++.so\n\n     VM SIZE        FILE SIZE\n ++++++++++++++  ++++++++++++++\n\n  [ = ]       0        0  [ = ]\n\n\n\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/447982730",
    "html_url": "https://github.com/grpc/grpc/pull/17529#issuecomment-447982730",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/17529",
    "id": 447982730,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0Nzk4MjczMA==",
    "user": {
      "login": "grpc-testing",
      "id": 28024233,
      "node_id": "MDQ6VXNlcjI4MDI0MjMz",
      "avatar_url": "https://avatars1.githubusercontent.com/u/28024233?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-testing",
      "html_url": "https://github.com/grpc-testing",
      "followers_url": "https://api.github.com/users/grpc-testing/followers",
      "following_url": "https://api.github.com/users/grpc-testing/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-testing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-testing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-testing/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-testing/orgs",
      "repos_url": "https://api.github.com/users/grpc-testing/repos",
      "events_url": "https://api.github.com/users/grpc-testing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-testing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-17T20:13:09Z",
    "updated_at": "2018-12-17T20:13:09Z",
    "author_association": "NONE",
    "body": "```\n[trickle] No significant performance differences\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/447984853",
    "html_url": "https://github.com/grpc/grpc/pull/17529#issuecomment-447984853",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/17529",
    "id": 447984853,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0Nzk4NDg1Mw==",
    "user": {
      "login": "markdroth",
      "id": 18664614,
      "node_id": "MDQ6VXNlcjE4NjY0NjE0",
      "avatar_url": "https://avatars2.githubusercontent.com/u/18664614?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/markdroth",
      "html_url": "https://github.com/markdroth",
      "followers_url": "https://api.github.com/users/markdroth/followers",
      "following_url": "https://api.github.com/users/markdroth/following{/other_user}",
      "gists_url": "https://api.github.com/users/markdroth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/markdroth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/markdroth/subscriptions",
      "organizations_url": "https://api.github.com/users/markdroth/orgs",
      "repos_url": "https://api.github.com/users/markdroth/repos",
      "events_url": "https://api.github.com/users/markdroth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/markdroth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-17T20:20:13Z",
    "updated_at": "2018-12-17T20:20:13Z",
    "author_association": "MEMBER",
    "body": "Channels are supposed to be independent of each other.  I don't think it makes sense to tie them together this way.\r\n\r\nThe two flame graphs you linked to seem to imply that the issue is not related to the executor threads at all, because the executor threads look like they're taking up about the same percentage of the flame graph in both cases.  The difference seems to be that while the native resolver is offloading a lot of its work to the resolver thread, the c-ares resolver is doing that work directly in the `grpc_wave_3` thread, thus reducing parallelism.  So it looks like the problem is really related to this one specific test.\r\n\r\nIf the problem is only exhibiting itself in one particular test and it can be solved by increasing the number of executor threads or increasing the timeouts in that test, then I think that's a much better solution."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/447993091",
    "html_url": "https://github.com/grpc/grpc/pull/17529#issuecomment-447993091",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/17529",
    "id": 447993091,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0Nzk5MzA5MQ==",
    "user": {
      "login": "grpc-testing",
      "id": 28024233,
      "node_id": "MDQ6VXNlcjI4MDI0MjMz",
      "avatar_url": "https://avatars1.githubusercontent.com/u/28024233?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-testing",
      "html_url": "https://github.com/grpc-testing",
      "followers_url": "https://api.github.com/users/grpc-testing/followers",
      "following_url": "https://api.github.com/users/grpc-testing/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-testing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-testing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-testing/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-testing/orgs",
      "repos_url": "https://api.github.com/users/grpc-testing/repos",
      "events_url": "https://api.github.com/users/grpc-testing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-testing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-17T20:47:10Z",
    "updated_at": "2018-12-17T20:47:10Z",
    "author_association": "NONE",
    "body": "```\nObjective-C binary sizes\n*****************STATIC******************\n  New size                      Old size\n 2,026,850      Total (=)      2,026,850\n\n No significant differences in binary sizes\n\n***************FRAMEWORKS****************\n  New size                      Old size\n11,325,194      Total (>)     11,325,185\n\n No significant differences in binary sizes\n\n\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/447996175",
    "html_url": "https://github.com/grpc/grpc/pull/17529#issuecomment-447996175",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/17529",
    "id": 447996175,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0Nzk5NjE3NQ==",
    "user": {
      "login": "grpc-testing",
      "id": 28024233,
      "node_id": "MDQ6VXNlcjI4MDI0MjMz",
      "avatar_url": "https://avatars1.githubusercontent.com/u/28024233?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-testing",
      "html_url": "https://github.com/grpc-testing",
      "followers_url": "https://api.github.com/users/grpc-testing/followers",
      "following_url": "https://api.github.com/users/grpc-testing/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-testing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-testing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-testing/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-testing/orgs",
      "repos_url": "https://api.github.com/users/grpc-testing/repos",
      "events_url": "https://api.github.com/users/grpc-testing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-testing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-17T20:57:54Z",
    "updated_at": "2018-12-17T20:57:54Z",
    "author_association": "NONE",
    "body": "```\n[microbenchmarks] No significant performance differences\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/448034316",
    "html_url": "https://github.com/grpc/grpc/pull/17529#issuecomment-448034316",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/17529",
    "id": 448034316,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0ODAzNDMxNg==",
    "user": {
      "login": "apolcyn",
      "id": 9566254,
      "node_id": "MDQ6VXNlcjk1NjYyNTQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9566254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apolcyn",
      "html_url": "https://github.com/apolcyn",
      "followers_url": "https://api.github.com/users/apolcyn/followers",
      "following_url": "https://api.github.com/users/apolcyn/following{/other_user}",
      "gists_url": "https://api.github.com/users/apolcyn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apolcyn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apolcyn/subscriptions",
      "organizations_url": "https://api.github.com/users/apolcyn/orgs",
      "repos_url": "https://api.github.com/users/apolcyn/repos",
      "events_url": "https://api.github.com/users/apolcyn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apolcyn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-17T23:12:12Z",
    "updated_at": "2018-12-17T23:12:12Z",
    "author_association": "CONTRIBUTOR",
    "body": "Test test flake can indeed be dealt with by increasing the test timeout. \r\n\r\nI left it out but there's also an issue with the benchmarks that this change fixes:\r\n\r\n```\r\nbazel --bazelrc=tools/remote_build/manual.bazelrc test --config=tsan //test/cpp/qps:json_run_localhost_cpp_protobuf_async_unary_75Kqps_600channel_60Krpcs_300Breq_50Bresp@poller=<any poller>\r\n```\r\n\r\nfails to because workers fail to connect all channels within a 10 second timeout almost every time (workers use the watch connectivity state API to do so), when ran under c-ares before this change, but passes after this change - the timeout could also be increased here, potentially, but taking a closer look at that test first"
  }
]
