[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/397541652",
    "html_url": "https://github.com/grpc/grpc/pull/15780#issuecomment-397541652",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15780",
    "id": 397541652,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NzU0MTY1Mg==",
    "user": {
      "login": "grpc-testing",
      "id": 28024233,
      "node_id": "MDQ6VXNlcjI4MDI0MjMz",
      "avatar_url": "https://avatars1.githubusercontent.com/u/28024233?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-testing",
      "html_url": "https://github.com/grpc-testing",
      "followers_url": "https://api.github.com/users/grpc-testing/followers",
      "following_url": "https://api.github.com/users/grpc-testing/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-testing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-testing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-testing/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-testing/orgs",
      "repos_url": "https://api.github.com/users/grpc-testing/repos",
      "events_url": "https://api.github.com/users/grpc-testing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-testing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-15T07:46:23Z",
    "updated_at": "2018-06-15T07:46:23Z",
    "author_association": "NONE",
    "body": "```\n****************************************************************\n\nlibgrpc.so\n\n     VM SIZE                                                                                          FILE SIZE\n ++++++++++++++ GROWING                                                                            ++++++++++++++\n  +0.9% +6.23Ki [None]                                                                             +33.2Ki  +0.4%\n      +1.0% +6.12Ki [Unmapped]                                                                         +33.1Ki  +0.4%\n      [NEW]     +80 vtable for grpc_core::GrpcPolledFdPosix                                                +80  [NEW]\n      +3.0%     +32 [None]                                                                                   0  [ = ]\n  [NEW] +2.19Ki src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver.cc     +2.19Ki  [NEW]\n      [NEW] +1.02Ki grpc_ares_notify_on_event_locked                                                   +1.02Ki  [NEW]\n      [NEW]    +368 grpc_ares_ev_driver_create_locked                                                     +368  [NEW]\n      [NEW]    +171 grpc_ares_ev_driver_unref                                                             +171  [NEW]\n      [NEW]    +159 on_readable_locked                                                                    +159  [NEW]\n      [NEW]    +139 on_writable_locked                                                                    +139  [NEW]\n      [NEW]    +128 fd_node_shutdown_locked(fd_node*, char const*) [clone .isra.1] [clone .part.2]        +128  [NEW]\n      [NEW]     +79 grpc_ares_ev_driver_shutdown_locked                                                    +79  [NEW]\n      [NEW]     +61 [Unmapped]                                                                             +61  [NEW]\n      [NEW]     +49 grpc_ares_ev_driver_ref                                                                +49  [NEW]\n      [NEW]     +25 grpc_ares_ev_driver_start_locked                                                       +25  [NEW]\n      [NEW]      +9 grpc_ares_ev_driver_destroy_locked                                                      +9  [NEW]\n      [NEW]      +5 grpc_core::GrpcPolledFd::~GrpcPolledFd                                                  +5  [NEW]\n      [NEW]      +4 grpc_ares_ev_driver_get_channel_locked                                                  +4  [NEW]\n      [NEW]      +2 grpc_core::GrpcPolledFd::~GrpcPolledFd                                                  +2  [NEW]\n\n -------------- SHRINKING                                                                          --------------\n -79.7% -1.81Ki src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix. -1.81Ki -79.7%\n      [DEL] -1.05Ki grpc_ares_notify_on_event_locked                                                   -1.05Ki  [DEL]\n      [DEL]    -368 grpc_ares_ev_driver_create_locked                                                     -368  [DEL]\n      [DEL]    -210 on_readable_locked                                                                    -210  [DEL]\n      [DEL]    -171 grpc_ares_ev_driver_unref                                                             -171  [DEL]\n      [DEL]    -131 on_writable_locked                                                                    -131  [DEL]\n      [DEL]    -116 fd_node_shutdown_locked(fd_node*, char const*) [clone .isra.1] [clone .part.2]        -116  [DEL]\n     -93.5%     -86 [Unmapped]                                                                             -86 -93.5%\n      [DEL]     -79 grpc_ares_ev_driver_shutdown_locked                                                    -79  [DEL]\n      [DEL]     -49 grpc_ares_ev_driver_ref                                                                -49  [DEL]\n      [DEL]     -25 grpc_ares_ev_driver_start_locked                                                       -25  [DEL]\n      [DEL]      -9 grpc_ares_ev_driver_destroy_locked                                                      -9  [DEL]\n      [DEL]      -4 grpc_ares_ev_driver_get_channel_locked                                                  -4  [DEL]\n\n  +0.5% +6.60Ki TOTAL                                                                              +33.6Ki  +0.4%\n\n\n****************************************************************\n\nlibgrpc++.so\n\n     VM SIZE        FILE SIZE\n ++++++++++++++  ++++++++++++++\n\n  [ = ]       0        0  [ = ]\n\n\n\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/397543381",
    "html_url": "https://github.com/grpc/grpc/pull/15780#issuecomment-397543381",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15780",
    "id": 397543381,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NzU0MzM4MQ==",
    "user": {
      "login": "grpc-testing",
      "id": 28024233,
      "node_id": "MDQ6VXNlcjI4MDI0MjMz",
      "avatar_url": "https://avatars1.githubusercontent.com/u/28024233?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-testing",
      "html_url": "https://github.com/grpc-testing",
      "followers_url": "https://api.github.com/users/grpc-testing/followers",
      "following_url": "https://api.github.com/users/grpc-testing/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-testing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-testing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-testing/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-testing/orgs",
      "repos_url": "https://api.github.com/users/grpc-testing/repos",
      "events_url": "https://api.github.com/users/grpc-testing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-testing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-15T07:53:44Z",
    "updated_at": "2018-06-15T07:53:44Z",
    "author_association": "NONE",
    "body": "```\n[trickle] No significant performance differences\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/397553785",
    "html_url": "https://github.com/grpc/grpc/pull/15780#issuecomment-397553785",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15780",
    "id": 397553785,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NzU1Mzc4NQ==",
    "user": {
      "login": "grpc-testing",
      "id": 28024233,
      "node_id": "MDQ6VXNlcjI4MDI0MjMz",
      "avatar_url": "https://avatars1.githubusercontent.com/u/28024233?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-testing",
      "html_url": "https://github.com/grpc-testing",
      "followers_url": "https://api.github.com/users/grpc-testing/followers",
      "following_url": "https://api.github.com/users/grpc-testing/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-testing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-testing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-testing/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-testing/orgs",
      "repos_url": "https://api.github.com/users/grpc-testing/repos",
      "events_url": "https://api.github.com/users/grpc-testing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-testing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-15T08:38:34Z",
    "updated_at": "2018-06-15T08:38:34Z",
    "author_association": "NONE",
    "body": "```\n[microbenchmarks] No significant performance differences\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/397649317",
    "html_url": "https://github.com/grpc/grpc/pull/15780#issuecomment-397649317",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15780",
    "id": 397649317,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NzY0OTMxNw==",
    "user": {
      "login": "markdroth",
      "id": 18664614,
      "node_id": "MDQ6VXNlcjE4NjY0NjE0",
      "avatar_url": "https://avatars2.githubusercontent.com/u/18664614?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/markdroth",
      "html_url": "https://github.com/markdroth",
      "followers_url": "https://api.github.com/users/markdroth/followers",
      "following_url": "https://api.github.com/users/markdroth/following{/other_user}",
      "gists_url": "https://api.github.com/users/markdroth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/markdroth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/markdroth/subscriptions",
      "organizations_url": "https://api.github.com/users/markdroth/orgs",
      "repos_url": "https://api.github.com/users/markdroth/repos",
      "events_url": "https://api.github.com/users/markdroth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/markdroth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-15T15:00:19Z",
    "updated_at": "2018-06-15T15:00:19Z",
    "author_association": "MEMBER",
    "body": "This looks pretty good!  All my comments are minor.\n\n---\n\nReviewed 16 of 16 files at r1.\nReview status: all files reviewed, 5 unresolved discussions (waiting on @apolcyn, @dgquintas, and @AspirinSJL)\n\n---\n\n*[src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver.h, line 26 at r1](https://reviewable.io/reviews/grpc/grpc/15780#-LF2umhlAbxtXODoQlUj:-LF2umhlAbxtXODoQlUk:b-xti6tx) ([raw file](https://github.com/grpc/grpc/blob/1679f959125f0f88c70f81b6f2743e132546350d/src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver.h#L26)):*\n> ```objc\n> #include <ares.h>\n> #include \"src/core/lib/gprpp/abstract.h\"\n> #include \"src/core/lib/gprpp/inlined_vector.h\"\n> ```\n\nDoesn't look like these three includes are actually needed.\n\n---\n\n*[src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver.h, line 83 at r1](https://reviewable.io/reviews/grpc/grpc/15780#-LF2uWWP0OWq8S88abWe:-LF2uWWP0OWq8S88abWf:b498nag) ([raw file](https://github.com/grpc/grpc/blob/1679f959125f0f88c70f81b6f2743e132546350d/src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver.h#L83)):*\n> ```objc\n> \n> /* Creates a new wrapped fd for the current platform */\n> GrpcPolledFd* NewGrpcPolledFdForCurrentPlatformLocked(\n> ```\n\nSince there will be only one implementation of these functions built on any given platform, I don't think we need `ForCurrentPlatform` as part of their names.\n\n---\n\n*[src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc, line 43 at r1](https://reviewable.io/reviews/grpc/grpc/15780#-LF2uuQM4MR8bJd9z79P:-LF2uuQM4MR8bJd9z79Q:b-meon2h) ([raw file](https://github.com/grpc/grpc/blob/1679f959125f0f88c70f81b6f2743e132546350d/src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc#L43)):*\n> ```cpp\n> class GrpcPolledFdPosix : public GrpcPolledFd {\n>  public:\n>   GrpcPolledFdPosix(ares_socket_t as, grpc_closure* read_closure,\n> ```\n\nInstead of passing in the read and write closures and requiring that the caller use the same ones each time, how about instead just having the caller pass the closure to `RegisterForOnReadableLocked()` and `RegisterForOnWriteableLocked()`?\n\n---\n\n*[src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc, line 46 at r1](https://reviewable.io/reviews/grpc/grpc/15780#-LF2sr-FEzfyvWhD4dmb:-LF2sr-FEzfyvWhD4dmc:bya6ka4) ([raw file](https://github.com/grpc/grpc/blob/1679f959125f0f88c70f81b6f2743e132546350d/src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc#L46)):*\n> ```cpp\n>                     grpc_closure* write_closure,\n>                     grpc_pollset_set* driver_pollset_set) {\n>     as_ = as;\n> ```\n\nFor the fields that we're initializing via simple assignments, we can do that via an initializer list instead of doing it in the body.\n\n---\n\n*[src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc, line 78 at r1](https://reviewable.io/reviews/grpc/grpc/15780#-LF2vDEZCuaEh0kwQJsO:-LF2vDEZCuaEh0kwQJsP:b-easjjd) ([raw file](https://github.com/grpc/grpc/blob/1679f959125f0f88c70f81b6f2743e132546350d/src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc#L78)):*\n> ```cpp\n> \n>   void ShutdownLocked(grpc_error* error) override {\n>     grpc_fd_shutdown(fd_, error);\n> ```\n\nDon't we still want to check that we have not previously been shut down, like the current implementation does?\n\n---\n\n\n*Comments from [Reviewable](https://reviewable.io/reviews/grpc/grpc/15780#-:-LF2xSyh5kossYDNQbc9:bdh11en)*\n<!-- Sent from Reviewable.io -->\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/397695683",
    "html_url": "https://github.com/grpc/grpc/pull/15780#issuecomment-397695683",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15780",
    "id": 397695683,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NzY5NTY4Mw==",
    "user": {
      "login": "grpc-testing",
      "id": 28024233,
      "node_id": "MDQ6VXNlcjI4MDI0MjMz",
      "avatar_url": "https://avatars1.githubusercontent.com/u/28024233?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-testing",
      "html_url": "https://github.com/grpc-testing",
      "followers_url": "https://api.github.com/users/grpc-testing/followers",
      "following_url": "https://api.github.com/users/grpc-testing/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-testing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-testing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-testing/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-testing/orgs",
      "repos_url": "https://api.github.com/users/grpc-testing/repos",
      "events_url": "https://api.github.com/users/grpc-testing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-testing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-15T17:50:16Z",
    "updated_at": "2018-06-15T17:50:16Z",
    "author_association": "NONE",
    "body": "```\n****************************************************************\n\nlibgrpc.so\n\n     VM SIZE                                                                                          FILE SIZE\n ++++++++++++++ GROWING                                                                            ++++++++++++++\n  +0.9% +6.15Ki [None]                                                                             +32.7Ki  +0.4%\n      +0.9% +6.04Ki [Unmapped]                                                                         +32.6Ki  +0.4%\n      [NEW]     +80 vtable for grpc_core::GrpcPolledFdPosix                                                +80  [NEW]\n      +3.0%     +32 [None]                                                                                   0  [ = ]\n  [NEW] +2.19Ki src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver.cc     +2.19Ki  [NEW]\n      [NEW] +1.03Ki grpc_ares_notify_on_event_locked                                                   +1.03Ki  [NEW]\n      [NEW]    +368 grpc_ares_ev_driver_create_locked                                                     +368  [NEW]\n      [NEW]    +171 grpc_ares_ev_driver_unref                                                             +171  [NEW]\n      [NEW]    +159 on_readable_locked                                                                    +159  [NEW]\n      [NEW]    +139 on_writable_locked                                                                    +139  [NEW]\n      [NEW]    +128 fd_node_shutdown_locked(fd_node*, char const*) [clone .isra.1] [clone .part.2]        +128  [NEW]\n      [NEW]     +79 grpc_ares_ev_driver_shutdown_locked                                                    +79  [NEW]\n      [NEW]     +49 [Unmapped]                                                                             +49  [NEW]\n      [NEW]     +49 grpc_ares_ev_driver_ref                                                                +49  [NEW]\n      [NEW]     +25 grpc_ares_ev_driver_start_locked                                                       +25  [NEW]\n      [NEW]      +9 grpc_ares_ev_driver_destroy_locked                                                      +9  [NEW]\n      [NEW]      +9 grpc_core::GrpcPolledFd::~GrpcPolledFd                                                  +9  [NEW]\n      [NEW]      +4 grpc_ares_ev_driver_get_channel_locked                                                  +4  [NEW]\n      [NEW]      +2 grpc_core::GrpcPolledFd::~GrpcPolledFd                                                  +2  [NEW]\n\n -------------- SHRINKING                                                                          --------------\n -84.7% -1.93Ki src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix. -1.93Ki -84.7%\n      [DEL] -1.05Ki grpc_ares_notify_on_event_locked                                                   -1.05Ki  [DEL]\n      [DEL]    -368 grpc_ares_ev_driver_create_locked                                                     -368  [DEL]\n      [DEL]    -210 on_readable_locked                                                                    -210  [DEL]\n      [DEL]    -171 grpc_ares_ev_driver_unref                                                             -171  [DEL]\n      [DEL]    -131 on_writable_locked                                                                    -131  [DEL]\n      [DEL]    -116 fd_node_shutdown_locked(fd_node*, char const*) [clone .isra.1] [clone .part.2]        -116  [DEL]\n     -87.0%     -80 [Unmapped]                                                                             -80 -87.0%\n      [DEL]     -79 grpc_ares_ev_driver_shutdown_locked                                                    -79  [DEL]\n      [DEL]     -49 grpc_ares_ev_driver_ref                                                                -49  [DEL]\n      [DEL]     -25 grpc_ares_ev_driver_start_locked                                                       -25  [DEL]\n      [DEL]      -9 grpc_ares_ev_driver_destroy_locked                                                      -9  [DEL]\n      [DEL]      -4 grpc_ares_ev_driver_get_channel_locked                                                  -4  [DEL]\n\n  +0.5% +6.41Ki TOTAL                                                                              +33.0Ki  +0.4%\n\n\n****************************************************************\n\nlibgrpc++.so\n\n     VM SIZE        FILE SIZE\n ++++++++++++++  ++++++++++++++\n\n  [ = ]       0        0  [ = ]\n\n\n\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/397696380",
    "html_url": "https://github.com/grpc/grpc/pull/15780#issuecomment-397696380",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15780",
    "id": 397696380,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NzY5NjM4MA==",
    "user": {
      "login": "apolcyn",
      "id": 9566254,
      "node_id": "MDQ6VXNlcjk1NjYyNTQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9566254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apolcyn",
      "html_url": "https://github.com/apolcyn",
      "followers_url": "https://api.github.com/users/apolcyn/followers",
      "following_url": "https://api.github.com/users/apolcyn/following{/other_user}",
      "gists_url": "https://api.github.com/users/apolcyn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apolcyn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apolcyn/subscriptions",
      "organizations_url": "https://api.github.com/users/apolcyn/orgs",
      "repos_url": "https://api.github.com/users/apolcyn/repos",
      "events_url": "https://api.github.com/users/apolcyn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apolcyn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-15T17:52:30Z",
    "updated_at": "2018-06-15T17:52:30Z",
    "author_association": "CONTRIBUTOR",
    "body": "\n\n\n\nReview status: 13 of 16 files reviewed, 5 unresolved discussions (waiting on @markdroth, @apolcyn, @dgquintas, and @AspirinSJL)\n\n---\n\n*[src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver.h, line 26 at r1](https://reviewable.io/reviews/grpc/grpc/15780#-LF2umhlAbxtXODoQlUj:-LF3Y_TJ55DxfQsCvc32:b-896fix) ([raw file](https://github.com/grpc/grpc/blob/1679f959125f0f88c70f81b6f2743e132546350d/src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver.h#L26)):*\n<details><summary><i>Previously, markdroth (Mark D. Roth) wrote…</i></summary><blockquote>\n\nDoesn't look like these three includes are actually needed.\n</blockquote></details>\n\nDone.\n\n---\n\n*[src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver.h, line 83 at r1](https://reviewable.io/reviews/grpc/grpc/15780#-LF2uWWP0OWq8S88abWe:-LF3YaXgESSoKwk-lEdM:b-896fix) ([raw file](https://github.com/grpc/grpc/blob/1679f959125f0f88c70f81b6f2743e132546350d/src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver.h#L83)):*\n<details><summary><i>Previously, markdroth (Mark D. Roth) wrote…</i></summary><blockquote>\n\nSince there will be only one implementation of these functions built on any given platform, I don't think we need `ForCurrentPlatform` as part of their names.\n</blockquote></details>\n\nDone.\n\n---\n\n*[src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc, line 43 at r1](https://reviewable.io/reviews/grpc/grpc/15780#-LF2uuQM4MR8bJd9z79P:-LF3YbgV-MsJMcUoITcu:balicwg) ([raw file](https://github.com/grpc/grpc/blob/1679f959125f0f88c70f81b6f2743e132546350d/src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc#L43)):*\n<details><summary><i>Previously, markdroth (Mark D. Roth) wrote…</i></summary><blockquote>\n\nInstead of passing in the read and write closures and requiring that the caller use the same ones each time, how about instead just having the caller pass the closure to `RegisterForOnReadableLocked()` and `RegisterForOnWriteableLocked()`?\n</blockquote></details>\n\nDone. Yeah, I originally did this because on Windows, the read and write closures won't be simply passed through and will need to be saved somewhere for later, but I think it makes sense to accommodate that only on Windows, where it's needed.\n\n---\n\n*[src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc, line 46 at r1](https://reviewable.io/reviews/grpc/grpc/15780#-LF2sr-FEzfyvWhD4dmb:-LF3Z8LO-k2N0e4gS0Bc:b-896fix) ([raw file](https://github.com/grpc/grpc/blob/1679f959125f0f88c70f81b6f2743e132546350d/src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc#L46)):*\n<details><summary><i>Previously, markdroth (Mark D. Roth) wrote…</i></summary><blockquote>\n\nFor the fields that we're initializing via simple assignments, we can do that via an initializer list instead of doing it in the body.\n</blockquote></details>\n\nDone.\n\n---\n\n*[src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc, line 78 at r1](https://reviewable.io/reviews/grpc/grpc/15780#-LF2vDEZCuaEh0kwQJsO:-LF3Z9AY6inCee3Cg5qT:b-wau7w9) ([raw file](https://github.com/grpc/grpc/blob/1679f959125f0f88c70f81b6f2743e132546350d/src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc#L78)):*\n<details><summary><i>Previously, markdroth (Mark D. Roth) wrote…</i></summary><blockquote>\n\nDon't we still want to check that we have not previously been shut down, like the current implementation does?\n</blockquote></details>\n\nThe check is still there in `grpc_ares_ev_driver.cc` (within the `fd_node_shutdown_locked` function).\n\nI tried to make this \"called once and only once\" invariant a part of `GrpcPolledFd::ShutdownLocked` API, but on the other hand this PR does add some indirection around this.... what do you think?\n\n---\n\n\n*Comments from [Reviewable](https://reviewable.io/reviews/grpc/grpc/15780)*\n<!-- Sent from Reviewable.io -->\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/397697808",
    "html_url": "https://github.com/grpc/grpc/pull/15780#issuecomment-397697808",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15780",
    "id": 397697808,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NzY5NzgwOA==",
    "user": {
      "login": "grpc-testing",
      "id": 28024233,
      "node_id": "MDQ6VXNlcjI4MDI0MjMz",
      "avatar_url": "https://avatars1.githubusercontent.com/u/28024233?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-testing",
      "html_url": "https://github.com/grpc-testing",
      "followers_url": "https://api.github.com/users/grpc-testing/followers",
      "following_url": "https://api.github.com/users/grpc-testing/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-testing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-testing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-testing/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-testing/orgs",
      "repos_url": "https://api.github.com/users/grpc-testing/repos",
      "events_url": "https://api.github.com/users/grpc-testing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-testing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-15T17:57:22Z",
    "updated_at": "2018-06-15T17:57:22Z",
    "author_association": "NONE",
    "body": "```\n[trickle] No significant performance differences\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/397704634",
    "html_url": "https://github.com/grpc/grpc/pull/15780#issuecomment-397704634",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15780",
    "id": 397704634,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NzcwNDYzNA==",
    "user": {
      "login": "markdroth",
      "id": 18664614,
      "node_id": "MDQ6VXNlcjE4NjY0NjE0",
      "avatar_url": "https://avatars2.githubusercontent.com/u/18664614?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/markdroth",
      "html_url": "https://github.com/markdroth",
      "followers_url": "https://api.github.com/users/markdroth/followers",
      "following_url": "https://api.github.com/users/markdroth/following{/other_user}",
      "gists_url": "https://api.github.com/users/markdroth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/markdroth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/markdroth/subscriptions",
      "organizations_url": "https://api.github.com/users/markdroth/orgs",
      "repos_url": "https://api.github.com/users/markdroth/repos",
      "events_url": "https://api.github.com/users/markdroth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/markdroth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-15T18:23:57Z",
    "updated_at": "2018-06-15T18:23:57Z",
    "author_association": "MEMBER",
    "body": "Looks great!\n\n---\n\nReviewed 3 of 3 files at r2.\nReview status: :shipit: complete! all files reviewed, all discussions resolved (waiting on @dgquintas and @AspirinSJL)\n\n---\n\n*[src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc, line 78 at r1](https://reviewable.io/reviews/grpc/grpc/15780#-LF2vDEZCuaEh0kwQJsO:-LF3fw-hBXJoVuhtZjHa:bbdf6e1) ([raw file](https://github.com/grpc/grpc/blob/1679f959125f0f88c70f81b6f2743e132546350d/src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc#L78)):*\n<details><summary><i>Previously, apolcyn wrote…</i></summary><blockquote>\n\nThe check is still there in `grpc_ares_ev_driver.cc` (within the `fd_node_shutdown_locked` function).\n\nI tried to make this \"called once and only once\" invariant a part of `GrpcPolledFd::ShutdownLocked` API, but on the other hand this PR does add some indirection around this.... what do you think?\n</blockquote></details>\n\nSorry, this was some confusion on my part.  I think you're right, this looks like the right approach.\n\n---\n\n\n*Comments from [Reviewable](https://reviewable.io/reviews/grpc/grpc/15780#-:-LF3g65y-QHsXYY4nMij:b9bkkp1)*\n<!-- Sent from Reviewable.io -->\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/397709243",
    "html_url": "https://github.com/grpc/grpc/pull/15780#issuecomment-397709243",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15780",
    "id": 397709243,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NzcwOTI0Mw==",
    "user": {
      "login": "grpc-testing",
      "id": 28024233,
      "node_id": "MDQ6VXNlcjI4MDI0MjMz",
      "avatar_url": "https://avatars1.githubusercontent.com/u/28024233?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-testing",
      "html_url": "https://github.com/grpc-testing",
      "followers_url": "https://api.github.com/users/grpc-testing/followers",
      "following_url": "https://api.github.com/users/grpc-testing/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-testing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-testing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-testing/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-testing/orgs",
      "repos_url": "https://api.github.com/users/grpc-testing/repos",
      "events_url": "https://api.github.com/users/grpc-testing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-testing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-15T18:42:02Z",
    "updated_at": "2018-06-15T18:42:02Z",
    "author_association": "NONE",
    "body": "```\n[microbenchmarks] No significant performance differences\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/397730799",
    "html_url": "https://github.com/grpc/grpc/pull/15780#issuecomment-397730799",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15780",
    "id": 397730799,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NzczMDc5OQ==",
    "user": {
      "login": "apolcyn",
      "id": 9566254,
      "node_id": "MDQ6VXNlcjk1NjYyNTQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9566254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apolcyn",
      "html_url": "https://github.com/apolcyn",
      "followers_url": "https://api.github.com/users/apolcyn/followers",
      "following_url": "https://api.github.com/users/apolcyn/following{/other_user}",
      "gists_url": "https://api.github.com/users/apolcyn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apolcyn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apolcyn/subscriptions",
      "organizations_url": "https://api.github.com/users/apolcyn/orgs",
      "repos_url": "https://api.github.com/users/apolcyn/repos",
      "events_url": "https://api.github.com/users/apolcyn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apolcyn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-15T20:17:03Z",
    "updated_at": "2018-06-15T20:17:03Z",
    "author_association": "CONTRIBUTOR",
    "body": "squashing down"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/397731513",
    "html_url": "https://github.com/grpc/grpc/pull/15780#issuecomment-397731513",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15780",
    "id": 397731513,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NzczMTUxMw==",
    "user": {
      "login": "grpc-testing",
      "id": 28024233,
      "node_id": "MDQ6VXNlcjI4MDI0MjMz",
      "avatar_url": "https://avatars1.githubusercontent.com/u/28024233?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-testing",
      "html_url": "https://github.com/grpc-testing",
      "followers_url": "https://api.github.com/users/grpc-testing/followers",
      "following_url": "https://api.github.com/users/grpc-testing/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-testing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-testing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-testing/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-testing/orgs",
      "repos_url": "https://api.github.com/users/grpc-testing/repos",
      "events_url": "https://api.github.com/users/grpc-testing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-testing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-15T20:20:15Z",
    "updated_at": "2018-06-15T20:20:15Z",
    "author_association": "NONE",
    "body": "```\n****************************************************************\n\nlibgrpc.so\n\n     VM SIZE                                                                                          FILE SIZE\n ++++++++++++++ GROWING                                                                            ++++++++++++++\n  +0.9% +6.15Ki [None]                                                                             +32.7Ki  +0.4%\n      +0.9% +6.04Ki [Unmapped]                                                                         +32.6Ki  +0.4%\n      [NEW]     +80 vtable for grpc_core::GrpcPolledFdPosix                                                +80  [NEW]\n      +3.0%     +32 [None]                                                                                   0  [ = ]\n  [NEW] +2.19Ki src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver.cc     +2.19Ki  [NEW]\n      [NEW] +1.03Ki grpc_ares_notify_on_event_locked                                                   +1.03Ki  [NEW]\n      [NEW]    +368 grpc_ares_ev_driver_create_locked                                                     +368  [NEW]\n      [NEW]    +171 grpc_ares_ev_driver_unref                                                             +171  [NEW]\n      [NEW]    +159 on_readable_locked                                                                    +159  [NEW]\n      [NEW]    +139 on_writable_locked                                                                    +139  [NEW]\n      [NEW]    +128 fd_node_shutdown_locked(fd_node*, char const*) [clone .isra.1] [clone .part.2]        +128  [NEW]\n      [NEW]     +79 grpc_ares_ev_driver_shutdown_locked                                                    +79  [NEW]\n      [NEW]     +49 [Unmapped]                                                                             +49  [NEW]\n      [NEW]     +49 grpc_ares_ev_driver_ref                                                                +49  [NEW]\n      [NEW]     +25 grpc_ares_ev_driver_start_locked                                                       +25  [NEW]\n      [NEW]      +9 grpc_ares_ev_driver_destroy_locked                                                      +9  [NEW]\n      [NEW]      +9 grpc_core::GrpcPolledFd::~GrpcPolledFd                                                  +9  [NEW]\n      [NEW]      +4 grpc_ares_ev_driver_get_channel_locked                                                  +4  [NEW]\n      [NEW]      +2 grpc_core::GrpcPolledFd::~GrpcPolledFd                                                  +2  [NEW]\n\n -------------- SHRINKING                                                                          --------------\n -84.7% -1.93Ki src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix. -1.93Ki -84.7%\n      [DEL] -1.05Ki grpc_ares_notify_on_event_locked                                                   -1.05Ki  [DEL]\n      [DEL]    -368 grpc_ares_ev_driver_create_locked                                                     -368  [DEL]\n      [DEL]    -210 on_readable_locked                                                                    -210  [DEL]\n      [DEL]    -171 grpc_ares_ev_driver_unref                                                             -171  [DEL]\n      [DEL]    -131 on_writable_locked                                                                    -131  [DEL]\n      [DEL]    -116 fd_node_shutdown_locked(fd_node*, char const*) [clone .isra.1] [clone .part.2]        -116  [DEL]\n     -87.0%     -80 [Unmapped]                                                                             -80 -87.0%\n      [DEL]     -79 grpc_ares_ev_driver_shutdown_locked                                                    -79  [DEL]\n      [DEL]     -49 grpc_ares_ev_driver_ref                                                                -49  [DEL]\n      [DEL]     -25 grpc_ares_ev_driver_start_locked                                                       -25  [DEL]\n      [DEL]      -9 grpc_ares_ev_driver_destroy_locked                                                      -9  [DEL]\n      [DEL]      -4 grpc_ares_ev_driver_get_channel_locked                                                  -4  [DEL]\n\n  +0.5% +6.41Ki TOTAL                                                                              +33.0Ki  +0.4%\n\n\n****************************************************************\n\nlibgrpc++.so\n\n     VM SIZE        FILE SIZE\n ++++++++++++++  ++++++++++++++\n\n  [ = ]       0        0  [ = ]\n\n\n\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/397733134",
    "html_url": "https://github.com/grpc/grpc/pull/15780#issuecomment-397733134",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15780",
    "id": 397733134,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NzczMzEzNA==",
    "user": {
      "login": "grpc-testing",
      "id": 28024233,
      "node_id": "MDQ6VXNlcjI4MDI0MjMz",
      "avatar_url": "https://avatars1.githubusercontent.com/u/28024233?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-testing",
      "html_url": "https://github.com/grpc-testing",
      "followers_url": "https://api.github.com/users/grpc-testing/followers",
      "following_url": "https://api.github.com/users/grpc-testing/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-testing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-testing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-testing/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-testing/orgs",
      "repos_url": "https://api.github.com/users/grpc-testing/repos",
      "events_url": "https://api.github.com/users/grpc-testing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-testing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-15T20:27:41Z",
    "updated_at": "2018-06-15T20:27:41Z",
    "author_association": "NONE",
    "body": "```\n[trickle] No significant performance differences\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/397743505",
    "html_url": "https://github.com/grpc/grpc/pull/15780#issuecomment-397743505",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15780",
    "id": 397743505,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5Nzc0MzUwNQ==",
    "user": {
      "login": "grpc-testing",
      "id": 28024233,
      "node_id": "MDQ6VXNlcjI4MDI0MjMz",
      "avatar_url": "https://avatars1.githubusercontent.com/u/28024233?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-testing",
      "html_url": "https://github.com/grpc-testing",
      "followers_url": "https://api.github.com/users/grpc-testing/followers",
      "following_url": "https://api.github.com/users/grpc-testing/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-testing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-testing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-testing/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-testing/orgs",
      "repos_url": "https://api.github.com/users/grpc-testing/repos",
      "events_url": "https://api.github.com/users/grpc-testing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-testing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-15T21:11:45Z",
    "updated_at": "2018-06-15T21:11:45Z",
    "author_association": "NONE",
    "body": "```\n[microbenchmarks] No significant performance differences\n```"
  }
]
