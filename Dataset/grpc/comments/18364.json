[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/474951356",
    "html_url": "https://github.com/grpc/grpc/issues/18364#issuecomment-474951356",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/18364",
    "id": 474951356,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NDk1MTM1Ng==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-20T17:41:13Z",
    "updated_at": "2019-03-20T17:41:13Z",
    "author_association": "CONTRIBUTOR",
    "body": "Can you provide a snippet that reproduces the problem? This looks like it could be wrong use of API."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/475074351",
    "html_url": "https://github.com/grpc/grpc/issues/18364#issuecomment-475074351",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/18364",
    "id": 475074351,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NTA3NDM1MQ==",
    "user": {
      "login": "rmstar",
      "id": 2873805,
      "node_id": "MDQ6VXNlcjI4NzM4MDU=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/2873805?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rmstar",
      "html_url": "https://github.com/rmstar",
      "followers_url": "https://api.github.com/users/rmstar/followers",
      "following_url": "https://api.github.com/users/rmstar/following{/other_user}",
      "gists_url": "https://api.github.com/users/rmstar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rmstar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rmstar/subscriptions",
      "organizations_url": "https://api.github.com/users/rmstar/orgs",
      "repos_url": "https://api.github.com/users/rmstar/repos",
      "events_url": "https://api.github.com/users/rmstar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rmstar/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-21T00:06:38Z",
    "updated_at": "2019-03-21T00:06:38Z",
    "author_association": "CONTRIBUTOR",
    "body": "Yes, this could be caused by incorrect API usage. `GRPC_CALL_ERROR_TOO_MANY_OPERATIONS`  is likely returned from [here](https://github.com/grpc/grpc/blob/v1.18.0/src/core/lib/surface/call.cc#L1550). Maybe you're trying to send `GRPC_OP_SEND_INITIAL_METADATA` more than once on the same call? \r\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/475189193",
    "html_url": "https://github.com/grpc/grpc/issues/18364#issuecomment-475189193",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/18364",
    "id": 475189193,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NTE4OTE5Mw==",
    "user": {
      "login": "clausjoergensen",
      "id": 233721,
      "node_id": "MDQ6VXNlcjIzMzcyMQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/233721?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/clausjoergensen",
      "html_url": "https://github.com/clausjoergensen",
      "followers_url": "https://api.github.com/users/clausjoergensen/followers",
      "following_url": "https://api.github.com/users/clausjoergensen/following{/other_user}",
      "gists_url": "https://api.github.com/users/clausjoergensen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/clausjoergensen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/clausjoergensen/subscriptions",
      "organizations_url": "https://api.github.com/users/clausjoergensen/orgs",
      "repos_url": "https://api.github.com/users/clausjoergensen/repos",
      "events_url": "https://api.github.com/users/clausjoergensen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/clausjoergensen/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-21T11:08:41Z",
    "updated_at": "2019-03-21T11:09:03Z",
    "author_association": "NONE",
    "body": "We managed to get a proper symbolicated crash for the full stack now:\r\n\r\n```\r\nThread 8 name:\r\n--\r\nThread 8 Crashed:\r\n0   grpc                          \t0x0000000106b145dc grpc_validate_header_key_is_legal(grpc_slice) + 673244 (validate_metadata.cc:69)\r\n1   grpc                          \t0x0000000106a83140 prepare_application_metadata(grpc_call*, int, grpc_metadata*, int, int, grpc_metadata*, int) + 78144 (call.cc:891)\r\n2   grpc                          \t0x0000000106a83140 prepare_application_metadata(grpc_call*, int, grpc_metadata*, int, int, grpc_metadata*, int) + 78144 (call.cc:891)\r\n3   grpc                          \t0x0000000106a8298c call_start_batch(grpc_call*, grpc_op const*, unsigned long, void*, int) + 76172 (call.cc:1589)\r\n4   grpc                          \t0x0000000106a82210 grpc_call_start_batch + 74256 (call.cc:1908)\r\n5   GRPCClient                    \t0x00000001062a1070 -[GRPCWrappedCall startBatchWithOperations:errorHandler:] + 53360 (GRPCWrappedCall.m:288)\r\n6   GRPCClient                    \t0x000000010629c4a0 -[GRPCCall sendHeaders:] + 33952 (GRPCCall.m:327)\r\n7   GRPCClient                    \t0x000000010629d1b4 -[GRPCCall startCallWithWriteable:] + 37300 (GRPCCall.m:468)\r\n8   GRPCClient                    \t0x000000010629d36c -[GRPCCall startWithWriteable:] + 37740 (GRPCCall.m:506)\r\n9   ProtoRPC                      \t0x00000001067f13d0 -[ProtoRPC startWithWriteable:] + 21456 (ProtoRPC.m:109)\r\n```\r\n\r\nThe code triggering the start call is (slightly simplified) as follows:\r\n\r\n```\r\nlet service = MyService(host: \"service.company.com\") // gRPC generated class\r\nlet pipeWriter = GRXBufferedPipe()\r\nlet subscription = service.rpcToSubscribe(withRequestsWriter: pipeWriter, eventHandler: onEvent)\r\nsubscription.start()\r\n```\r\n\r\nWe still can't reproduce the issue locally, but we have 100k+ crashes in production, with no clear reason as to why (device and OS versions differs)"
  }
]
