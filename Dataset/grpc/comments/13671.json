[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/349871584",
    "html_url": "https://github.com/grpc/grpc/pull/13671#issuecomment-349871584",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13671",
    "id": 349871584,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0OTg3MTU4NA==",
    "user": {
      "login": "grpc-testing",
      "id": 28024233,
      "node_id": "MDQ6VXNlcjI4MDI0MjMz",
      "avatar_url": "https://avatars1.githubusercontent.com/u/28024233?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-testing",
      "html_url": "https://github.com/grpc-testing",
      "followers_url": "https://api.github.com/users/grpc-testing/followers",
      "following_url": "https://api.github.com/users/grpc-testing/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-testing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-testing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-testing/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-testing/orgs",
      "repos_url": "https://api.github.com/users/grpc-testing/repos",
      "events_url": "https://api.github.com/users/grpc-testing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-testing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-07T06:01:00Z",
    "updated_at": "2017-12-07T06:01:00Z",
    "author_association": "NONE",
    "body": "```\n****************************************************************\n\nlibgrpc.so\n\n     VM SIZE                                                                                            FILE SIZE\n ++++++++++++++ GROWING                                                                              ++++++++++++++\n  +0.0%    +248 [None]                                                                               +6.27Ki  +0.1%\n  +3.5%    +528 src/core/ext/filters/client_channel/lb_policy/grpclb/grpclb.cc                          +528  +3.5%\n      [NEW] +1.57Ki rr_handover_locked(grpc_exec_ctx*, glb_lb_policy*) [clone .part.12]                  +1.57Ki  [NEW]\n      [NEW] +1.28Ki query_for_backends_locked(grpc_exec_ctx*, glb_lb_policy*) [clone .part.10]           +1.28Ki  [NEW]\n      [NEW]    +834 build_lb_channel_args(grpc_exec_ctx*, grpc_lb_addresses const*, grpc_fake_resolver_r    +834  [NEW]\n      [NEW]    +303 update_lb_connectivity_status_locked                                                    +303  [NEW]\n      +146%    +175 glb_rr_connectivity_changed_locked                                                      +175  +146%\n      +9.7%     +96 glb_create                                                                               +96  +9.7%\n      [NEW]     +88 on_reresolution_requested_locked                                                         +88  [NEW]\n      [NEW]     +66 check_reresolution_need(grpc_exec_ctx*, glb_lb_policy*) [clone .part.5]                  +66  [NEW]\n       +12%     +53 lb_on_server_status_received_locked                                                      +53   +12%\n      +3.4%     +46 lb_on_response_received_locked                                                           +46  +3.4%\n      +9.8%     +38 [Unmapped]                                                                               +38  +9.8%\n      +6.4%     +34 glb_shutdown_locked                                                                      +34  +6.4%\n  +0.8%     +48 src/core/ext/filters/client_channel/lb_policy/round_robin/round_robin.cc                 +48  +0.8%\n      +2.9%     +53 rr_connectivity_changed_locked                                                           +53  +2.9%\n\n  +0.1%    +824 TOTAL                                                                                +6.84Ki  +0.1%\n\n\n****************************************************************\n\nlibgrpc++.so\n\n     VM SIZE        FILE SIZE\n ++++++++++++++  ++++++++++++++\n\n  [ = ]       0        0  [ = ]\n\n\n\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/349871765",
    "html_url": "https://github.com/grpc/grpc/pull/13671#issuecomment-349871765",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13671",
    "id": 349871765,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0OTg3MTc2NQ==",
    "user": {
      "login": "grpc-testing",
      "id": 28024233,
      "node_id": "MDQ6VXNlcjI4MDI0MjMz",
      "avatar_url": "https://avatars1.githubusercontent.com/u/28024233?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-testing",
      "html_url": "https://github.com/grpc-testing",
      "followers_url": "https://api.github.com/users/grpc-testing/followers",
      "following_url": "https://api.github.com/users/grpc-testing/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-testing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-testing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-testing/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-testing/orgs",
      "repos_url": "https://api.github.com/users/grpc-testing/repos",
      "events_url": "https://api.github.com/users/grpc-testing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-testing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-07T06:02:14Z",
    "updated_at": "2017-12-07T06:02:14Z",
    "author_association": "NONE",
    "body": "```\n****************************************************************\n\nlibgrpc.so\n\n     VM SIZE                                                                                            FILE SIZE\n ++++++++++++++ GROWING                                                                              ++++++++++++++\n  +0.0%    +248 [None]                                                                               +6.27Ki  +0.1%\n  +3.5%    +528 src/core/ext/filters/client_channel/lb_policy/grpclb/grpclb.cc                          +528  +3.5%\n      [NEW] +1.57Ki rr_handover_locked(grpc_exec_ctx*, glb_lb_policy*) [clone .part.12]                  +1.57Ki  [NEW]\n      [NEW] +1.28Ki query_for_backends_locked(grpc_exec_ctx*, glb_lb_policy*) [clone .part.10]           +1.28Ki  [NEW]\n      [NEW]    +834 build_lb_channel_args(grpc_exec_ctx*, grpc_lb_addresses const*, grpc_fake_resolver_r    +834  [NEW]\n      [NEW]    +303 update_lb_connectivity_status_locked                                                    +303  [NEW]\n      +146%    +175 glb_rr_connectivity_changed_locked                                                      +175  +146%\n      +9.7%     +96 glb_create                                                                               +96  +9.7%\n      [NEW]     +88 on_reresolution_requested_locked                                                         +88  [NEW]\n      [NEW]     +66 check_reresolution_need(grpc_exec_ctx*, glb_lb_policy*) [clone .part.5]                  +66  [NEW]\n       +12%     +53 lb_on_server_status_received_locked                                                      +53   +12%\n      +3.4%     +46 lb_on_response_received_locked                                                           +46  +3.4%\n      +9.8%     +38 [Unmapped]                                                                               +38  +9.8%\n      +6.4%     +34 glb_shutdown_locked                                                                      +34  +6.4%\n  +0.8%     +48 src/core/ext/filters/client_channel/lb_policy/round_robin/round_robin.cc                 +48  +0.8%\n      +2.9%     +53 rr_connectivity_changed_locked                                                           +53  +2.9%\n\n  +0.1%    +824 TOTAL                                                                                +6.84Ki  +0.1%\n\n\n****************************************************************\n\nlibgrpc++.so\n\n     VM SIZE        FILE SIZE\n ++++++++++++++  ++++++++++++++\n\n  [ = ]       0        0  [ = ]\n\n\n\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/349873510",
    "html_url": "https://github.com/grpc/grpc/pull/13671#issuecomment-349873510",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13671",
    "id": 349873510,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0OTg3MzUxMA==",
    "user": {
      "login": "grpc-testing",
      "id": 28024233,
      "node_id": "MDQ6VXNlcjI4MDI0MjMz",
      "avatar_url": "https://avatars1.githubusercontent.com/u/28024233?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-testing",
      "html_url": "https://github.com/grpc-testing",
      "followers_url": "https://api.github.com/users/grpc-testing/followers",
      "following_url": "https://api.github.com/users/grpc-testing/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-testing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-testing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-testing/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-testing/orgs",
      "repos_url": "https://api.github.com/users/grpc-testing/repos",
      "events_url": "https://api.github.com/users/grpc-testing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-testing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-07T06:13:59Z",
    "updated_at": "2017-12-07T06:13:59Z",
    "author_association": "NONE",
    "body": "```\n[trickle] No significant performance differences\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/349873670",
    "html_url": "https://github.com/grpc/grpc/pull/13671#issuecomment-349873670",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13671",
    "id": 349873670,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0OTg3MzY3MA==",
    "user": {
      "login": "grpc-testing",
      "id": 28024233,
      "node_id": "MDQ6VXNlcjI4MDI0MjMz",
      "avatar_url": "https://avatars1.githubusercontent.com/u/28024233?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-testing",
      "html_url": "https://github.com/grpc-testing",
      "followers_url": "https://api.github.com/users/grpc-testing/followers",
      "following_url": "https://api.github.com/users/grpc-testing/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-testing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-testing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-testing/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-testing/orgs",
      "repos_url": "https://api.github.com/users/grpc-testing/repos",
      "events_url": "https://api.github.com/users/grpc-testing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-testing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-07T06:15:04Z",
    "updated_at": "2017-12-07T06:15:04Z",
    "author_association": "NONE",
    "body": "```\n[trickle] No significant performance differences\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/349879424",
    "html_url": "https://github.com/grpc/grpc/pull/13671#issuecomment-349879424",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13671",
    "id": 349879424,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0OTg3OTQyNA==",
    "user": {
      "login": "grpc-testing",
      "id": 28024233,
      "node_id": "MDQ6VXNlcjI4MDI0MjMz",
      "avatar_url": "https://avatars1.githubusercontent.com/u/28024233?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-testing",
      "html_url": "https://github.com/grpc-testing",
      "followers_url": "https://api.github.com/users/grpc-testing/followers",
      "following_url": "https://api.github.com/users/grpc-testing/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-testing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-testing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-testing/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-testing/orgs",
      "repos_url": "https://api.github.com/users/grpc-testing/repos",
      "events_url": "https://api.github.com/users/grpc-testing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-testing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-07T06:51:50Z",
    "updated_at": "2017-12-07T06:51:50Z",
    "author_association": "NONE",
    "body": "```\n[microbenchmarks] No significant performance differences\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/349879663",
    "html_url": "https://github.com/grpc/grpc/pull/13671#issuecomment-349879663",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13671",
    "id": 349879663,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0OTg3OTY2Mw==",
    "user": {
      "login": "grpc-testing",
      "id": 28024233,
      "node_id": "MDQ6VXNlcjI4MDI0MjMz",
      "avatar_url": "https://avatars1.githubusercontent.com/u/28024233?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-testing",
      "html_url": "https://github.com/grpc-testing",
      "followers_url": "https://api.github.com/users/grpc-testing/followers",
      "following_url": "https://api.github.com/users/grpc-testing/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-testing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-testing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-testing/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-testing/orgs",
      "repos_url": "https://api.github.com/users/grpc-testing/repos",
      "events_url": "https://api.github.com/users/grpc-testing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-testing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-07T06:53:31Z",
    "updated_at": "2017-12-07T06:53:31Z",
    "author_association": "NONE",
    "body": "```\n[microbenchmarks] No significant performance differences\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/350024522",
    "html_url": "https://github.com/grpc/grpc/pull/13671#issuecomment-350024522",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13671",
    "id": 350024522,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MDAyNDUyMg==",
    "user": {
      "login": "markdroth",
      "id": 18664614,
      "node_id": "MDQ6VXNlcjE4NjY0NjE0",
      "avatar_url": "https://avatars2.githubusercontent.com/u/18664614?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/markdroth",
      "html_url": "https://github.com/markdroth",
      "followers_url": "https://api.github.com/users/markdroth/followers",
      "following_url": "https://api.github.com/users/markdroth/following{/other_user}",
      "gists_url": "https://api.github.com/users/markdroth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/markdroth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/markdroth/subscriptions",
      "organizations_url": "https://api.github.com/users/markdroth/orgs",
      "repos_url": "https://api.github.com/users/markdroth/repos",
      "events_url": "https://api.github.com/users/markdroth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/markdroth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-07T16:42:20Z",
    "updated_at": "2017-12-07T16:42:20Z",
    "author_association": "MEMBER",
    "body": "This looks really good!  In particular, I think you've done a good job checking for all of the various edge cases involved in handling the timeouts and the race conditions for the timer callback.\n\nMy comments are mostly nits or structural improvements that are tangentially related to the new functionality.  However, we will need to add a test for the new functionality before we can merge.\n\nPlease let me know if you have any questions about any of this.  Thanks!\n\n---\n\nReviewed 3 of 3 files at r1.\nReview status: all files reviewed at latest revision, 8 unresolved discussions, some commit checks failed.\n\n---\n\n*[include/grpc/impl/codegen/grpc_types.h, line 299 at r1](https://reviewable.io:443/reviews/grpc/grpc/13671#-L-lkVh3S6Ygd88YJVPK:-L-l_0hOAzu1mP97f9os:b-ca30c8) ([raw file](https://github.com/grpc/grpc/blob/3644b1aaf0a6b25a1336c7cb140fce106fad5fb3/include/grpc/impl/codegen/grpc_types.h#L299)):*\n> ```objc\n>    If 0, fallback will never be used. */\n> #define GRPC_ARG_GRPCLB_FALLBACK_TIMEOUT_MS \"grpc.grpclb_fallback_timeout_ms\"\n> /* Timeout in milliseconds to confirm that we have lost contact with all the\n> ```\n\nPlease also document the default if this argument is not specified.\n\n---\n\n*[src/core/ext/filters/client_channel/lb_policy/grpclb/grpclb.cc, line 447 at r1](https://reviewable.io:443/reviews/grpc/grpc/13671#-L-lnpWoN9QlFS66D8lO:-L-lnpWoN9QlFS66D8lP:b-itjbss) ([raw file](https://github.com/grpc/grpc/blob/3644b1aaf0a6b25a1336c7cb140fce106fad5fb3/src/core/ext/filters/client_channel/lb_policy/grpclb/grpclb.cc#L447)):*\n> ```cpp\n> \n> /* Keeps track and reacts to changes in connectivity of the RR instance */\n> struct rr_connectivity_data {\n> ```\n\nI suspect that this struct is not needed anymore.  @dgquintas can confirm this, but I think the original reason for allocating a new struct whenever we instantiate a new RR policy is that we used to have a lot of cases where we unreffed and then recreated the RR policy, which meant that there could be connectivity state callbacks for multiple RR policies in flight at the same time, and each one needed its own state.  But between David's change to add update functionality to LB policies and your change to allow LB policies to request reresolution instead of shutting down, I don't think we have any more cases where we'll unref and recreate the RR policy.  So I think the elements from this struct can be moved directly into `glb_lb_policy`.\n\n---\n\n*[src/core/ext/filters/client_channel/lb_policy/grpclb/grpclb.cc, line 874 at r1](https://reviewable.io:443/reviews/grpc/grpc/13671#-L-lkq-9ycbAlYx9szuv:-L-lkq-9ycbAlYx9szuw:bbzj3ai) ([raw file](https://github.com/grpc/grpc/blob/3644b1aaf0a6b25a1336c7cb140fce106fad5fb3/src/core/ext/filters/client_channel/lb_policy/grpclb/grpclb.cc#L874)):*\n> ```cpp\n> }\n> \n> static void check_reresolution_need(grpc_exec_ctx* exec_ctx,\n> ```\n\nSuggest calling this something like `maybe_start_reresolution_timer()`.\n\n---\n\n*[src/core/ext/filters/client_channel/lb_policy/grpclb/grpclb.cc, line 1052 at r1](https://reviewable.io:443/reviews/grpc/grpc/13671#-L-lkzZyh7aVqZE4A4M0:-L-lkzZyh7aVqZE4A4M1:b-qkythe) ([raw file](https://github.com/grpc/grpc/blob/3644b1aaf0a6b25a1336c7cb140fce106fad5fb3/src/core/ext/filters/client_channel/lb_policy/grpclb/grpclb.cc#L1052)):*\n> ```cpp\n>     glb_policy->reresolution_timer_active = false;\n>   }\n> ```\n\nNit: Please remove blank lines within functions, both here and below.\n\n---\n\n*[src/core/ext/filters/client_channel/lb_policy/grpclb/grpclb.cc, line 1671 at r1](https://reviewable.io:443/reviews/grpc/grpc/13671#-L-llfNsTEVfGt2pEtwb:-L-llfNsTEVfGt2pEtwc:b-rv6bou) ([raw file](https://github.com/grpc/grpc/blob/3644b1aaf0a6b25a1336c7cb140fce106fad5fb3/src/core/ext/filters/client_channel/lb_policy/grpclb/grpclb.cc#L1671)):*\n> ```cpp\n>         /* update serverlist */\n>         if (serverlist->num_servers > 0) {\n>           glb_policy->lost_lb_connection = false;\n> ```\n\nLet's move this new code down to line 1704, since that's where we've actually set the new serverlist.\n\n---\n\n*[src/core/ext/filters/client_channel/lb_policy/grpclb/grpclb.cc, line 1869 at r1](https://reviewable.io:443/reviews/grpc/grpc/13671#-L-lmMvof658CAvN8A-m:-L-lmMvof658CAvN8A-n:b8jph7d) ([raw file](https://github.com/grpc/grpc/blob/3644b1aaf0a6b25a1336c7cb140fce106fad5fb3/src/core/ext/filters/client_channel/lb_policy/grpclb/grpclb.cc#L1869)):*\n>   if (glb_policy->lost_lb_connection &&\n>       glb_policy->rr_state != GRPC_CHANNEL_READY) {\n>     if (!glb_policy->shutting_down && error == GRPC_ERROR_NONE) {\n\nCan combine both of these conditionals into one.\n\n---\n\n*[src/core/ext/filters/client_channel/lb_policy/grpclb/grpclb.cc, line 1933 at r1](https://reviewable.io:443/reviews/grpc/grpc/13671#-L-lmcrnpSh4CJo7Iw-c:-L-lmcrnpSh4CJo7Iw-d:b-mt3um4) ([raw file](https://github.com/grpc/grpc/blob/3644b1aaf0a6b25a1336c7cb140fce106fad5fb3/src/core/ext/filters/client_channel/lb_policy/grpclb/grpclb.cc#L1933)):*\n> ```cpp\n> }\n> \n> static void glb_set_reresolve_closure_locked(\n> ```\n\nI think this function is now essentially the same as in the other two LB policies, so we can probably remove this method from the LB policy vtable and implement it just once in the base class.\n\n---\n\n*[src/core/ext/filters/client_channel/lb_policy/round_robin/round_robin.cc, line 364 at r1](https://reviewable.io:443/reviews/grpc/grpc/13671#-L-ljLOuSOsUKRJ0UiDR:-L-ljLOuSOsUKRJ0UiDS:bunwcmp) ([raw file](https://github.com/grpc/grpc/blob/3644b1aaf0a6b25a1336c7cb140fce106fad5fb3/src/core/ext/filters/client_channel/lb_policy/round_robin/round_robin.cc#L364)):*\n> ```cpp\n>    *\n>    * 3) RULE: ALL subchannels are SHUTDOWN =>\n>    *          if can't re-resolve, policy is TRANSIENT_FAILURE\n> ```\n\nI don't think it's necessary to change the RR policy in this PR.  Instead, we can just have the grpclb code check for either TRANSIENT_FAILURE or IDLE.\n\n---\n\n\n*Comments from [Reviewable](https://reviewable.io:443/reviews/grpc/grpc/13671#-:-L-lqF-V7Sp6eYCdFP-Y:b-ojyynh)*\n<!-- Sent from Reviewable.io -->\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/350113603",
    "html_url": "https://github.com/grpc/grpc/pull/13671#issuecomment-350113603",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13671",
    "id": 350113603,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MDExMzYwMw==",
    "user": {
      "login": "AspirinSJL",
      "id": 3314176,
      "node_id": "MDQ6VXNlcjMzMTQxNzY=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/3314176?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AspirinSJL",
      "html_url": "https://github.com/AspirinSJL",
      "followers_url": "https://api.github.com/users/AspirinSJL/followers",
      "following_url": "https://api.github.com/users/AspirinSJL/following{/other_user}",
      "gists_url": "https://api.github.com/users/AspirinSJL/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AspirinSJL/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AspirinSJL/subscriptions",
      "organizations_url": "https://api.github.com/users/AspirinSJL/orgs",
      "repos_url": "https://api.github.com/users/AspirinSJL/repos",
      "events_url": "https://api.github.com/users/AspirinSJL/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AspirinSJL/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-07T22:26:15Z",
    "updated_at": "2017-12-07T22:26:15Z",
    "author_association": "MEMBER",
    "body": "Thanks for reviewing! I'm still adding the test in grpclb_end2end_test.\n\n---\n\nReview status: all files reviewed at latest revision, 8 unresolved discussions, some commit checks failed.\n\n---\n\n*[include/grpc/impl/codegen/grpc_types.h, line 299 at r1](https://reviewable.io:443/reviews/grpc/grpc/13671#-L-lkVh3S6Ygd88YJVPK:-L-mIKxB91NGLht42jkk:bj3l0vn) ([raw file](https://github.com/grpc/grpc/blob/3644b1aaf0a6b25a1336c7cb140fce106fad5fb3/include/grpc/impl/codegen/grpc_types.h#L299)):*\n<details><summary><i>Previously, markdroth (Mark D. Roth) wrote…</i></summary><blockquote>\n\nPlease also document the default if this argument is not specified.\n</blockquote></details>\n\nDone.\n\n(Fallback counterpart is added.)\n\n---\n\n*[src/core/ext/filters/client_channel/lb_policy/grpclb/grpclb.cc, line 447 at r1](https://reviewable.io:443/reviews/grpc/grpc/13671#-L-lnpWoN9QlFS66D8lO:-L-n0UKrATc90LrBonok:brzpg7a) ([raw file](https://github.com/grpc/grpc/blob/3644b1aaf0a6b25a1336c7cb140fce106fad5fb3/src/core/ext/filters/client_channel/lb_policy/grpclb/grpclb.cc#L447)):*\n<details><summary><i>Previously, markdroth (Mark D. Roth) wrote…</i></summary><blockquote>\n\nI suspect that this struct is not needed anymore.  @dgquintas can confirm this, but I think the original reason for allocating a new struct whenever we instantiate a new RR policy is that we used to have a lot of cases where we unreffed and then recreated the RR policy, which meant that there could be connectivity state callbacks for multiple RR policies in flight at the same time, and each one needed its own state.  But between David's change to add update functionality to LB policies and your change to allow LB policies to request reresolution instead of shutting down, I don't think we have any more cases where we'll unref and recreate the RR policy.  So I think the elements from this struct can be moved directly into `glb_lb_policy`.\n</blockquote></details>\n\nDone.\n\nAlso, should we actually cancel the notification closure somehow? The previous code didn't cancel it. I tried to cancel it in `glb_shutdown()`, but I got a `Closure already scheduled` error so I guess that's not the right way to cancel it.\n\n---\n\n*[src/core/ext/filters/client_channel/lb_policy/grpclb/grpclb.cc, line 874 at r1](https://reviewable.io:443/reviews/grpc/grpc/13671#-L-lkq-9ycbAlYx9szuv:-L-mJLGVe4UmpkydoY8k:b-896fix) ([raw file](https://github.com/grpc/grpc/blob/3644b1aaf0a6b25a1336c7cb140fce106fad5fb3/src/core/ext/filters/client_channel/lb_policy/grpclb/grpclb.cc#L874)):*\n<details><summary><i>Previously, markdroth (Mark D. Roth) wrote…</i></summary><blockquote>\n\nSuggest calling this something like `maybe_start_reresolution_timer()`.\n</blockquote></details>\n\nDone.\n\n---\n\n*[src/core/ext/filters/client_channel/lb_policy/grpclb/grpclb.cc, line 1052 at r1](https://reviewable.io:443/reviews/grpc/grpc/13671#-L-lkzZyh7aVqZE4A4M0:-L-mNdvG8j7olCd1DScN:b-g90fql) ([raw file](https://github.com/grpc/grpc/blob/3644b1aaf0a6b25a1336c7cb140fce106fad5fb3/src/core/ext/filters/client_channel/lb_policy/grpclb/grpclb.cc#L1052)):*\n<details><summary><i>Previously, markdroth (Mark D. Roth) wrote…</i></summary><blockquote>\n\nNit: Please remove blank lines within functions, both here and below.\n</blockquote></details>\n\nLooks like this file has been using many blanks in functions. Also the blank line here is preexisting. Should I remove all the blank lines in this function? \n\n---\n\n*[src/core/ext/filters/client_channel/lb_policy/grpclb/grpclb.cc, line 1671 at r1](https://reviewable.io:443/reviews/grpc/grpc/13671#-L-llfNsTEVfGt2pEtwb:-L-mLIav5IqM_eFbjZGU:b-896fix) ([raw file](https://github.com/grpc/grpc/blob/3644b1aaf0a6b25a1336c7cb140fce106fad5fb3/src/core/ext/filters/client_channel/lb_policy/grpclb/grpclb.cc#L1671)):*\n<details><summary><i>Previously, markdroth (Mark D. Roth) wrote…</i></summary><blockquote>\n\nLet's move this new code down to line 1704, since that's where we've actually set the new serverlist.\n</blockquote></details>\n\nDone.\n\n---\n\n*[src/core/ext/filters/client_channel/lb_policy/grpclb/grpclb.cc, line 1869 at r1](https://reviewable.io:443/reviews/grpc/grpc/13671#-L-lmMvof658CAvN8A-m:-L-mLdcpLKyjFP-lOPo_:bj3l0vn) ([raw file](https://github.com/grpc/grpc/blob/3644b1aaf0a6b25a1336c7cb140fce106fad5fb3/src/core/ext/filters/client_channel/lb_policy/grpclb/grpclb.cc#L1869)):*\n<details><summary><i>Previously, markdroth (Mark D. Roth) wrote…</i></summary><blockquote>\n\n>   if (glb_policy->lost_lb_connection &&\n>       glb_policy->rr_state != GRPC_CHANNEL_READY) {\n>     if (!glb_policy->shutting_down && error == GRPC_ERROR_NONE) {\n\nCan combine both of these conditionals into one.\n</blockquote></details>\n\nDone.\n\n(Fallback counterpart is added.)\n\n---\n\n*[src/core/ext/filters/client_channel/lb_policy/grpclb/grpclb.cc, line 1933 at r1](https://reviewable.io:443/reviews/grpc/grpc/13671#-L-lmcrnpSh4CJo7Iw-c:-L-mOhAZaiL8PZ38IeVC:bhyk2q) ([raw file](https://github.com/grpc/grpc/blob/3644b1aaf0a6b25a1336c7cb140fce106fad5fb3/src/core/ext/filters/client_channel/lb_policy/grpclb/grpclb.cc#L1933)):*\n<details><summary><i>Previously, markdroth (Mark D. Roth) wrote…</i></summary><blockquote>\n\nI think this function is now essentially the same as in the other two LB policies, so we can probably remove this method from the LB policy vtable and implement it just once in the base class.\n</blockquote></details>\n\nYes, except that we are still using shutting_down from each derived policy. \n\nI think checking that we are not shutting down is useful, I proposed to move it into the base policy class. Actually I think some other members (e.g., started_picking) are also common, maybe we should move them too.\n\nBut then it's a little more verbose to check `glb_policy->base.shutting_down` in about 15 locations. I'm fine with that verbosity, which can be simplified when we use native inheritance in the future. \n\n---\n\n*[src/core/ext/filters/client_channel/lb_policy/round_robin/round_robin.cc, line 364 at r1](https://reviewable.io:443/reviews/grpc/grpc/13671#-L-ljLOuSOsUKRJ0UiDR:-L-mrQSFoTCKlayUe2iz:b-9eyefh) ([raw file](https://github.com/grpc/grpc/blob/3644b1aaf0a6b25a1336c7cb140fce106fad5fb3/src/core/ext/filters/client_channel/lb_policy/round_robin/round_robin.cc#L364)):*\n<details><summary><i>Previously, markdroth (Mark D. Roth) wrote…</i></summary><blockquote>\n\nI don't think it's necessary to change the RR policy in this PR.  Instead, we can just have the grpclb code check for either TRANSIENT_FAILURE or IDLE.\n</blockquote></details>\n\nDone.\n\nI though this will cause unnecessary re-resolution when the LB connection fails before it starts picking. But after a second thought, it seems impossible because we make LB call after we start picking.\n\n---\n\n\n*Comments from [Reviewable](https://reviewable.io:443/reviews/grpc/grpc/13671#-:-L-mHVWk7OyeddDpv8c6:bd07prc)*\n<!-- Sent from Reviewable.io -->\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/350114854",
    "html_url": "https://github.com/grpc/grpc/pull/13671#issuecomment-350114854",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13671",
    "id": 350114854,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MDExNDg1NA==",
    "user": {
      "login": "grpc-testing",
      "id": 28024233,
      "node_id": "MDQ6VXNlcjI4MDI0MjMz",
      "avatar_url": "https://avatars1.githubusercontent.com/u/28024233?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-testing",
      "html_url": "https://github.com/grpc-testing",
      "followers_url": "https://api.github.com/users/grpc-testing/followers",
      "following_url": "https://api.github.com/users/grpc-testing/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-testing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-testing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-testing/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-testing/orgs",
      "repos_url": "https://api.github.com/users/grpc-testing/repos",
      "events_url": "https://api.github.com/users/grpc-testing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-testing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-07T22:31:34Z",
    "updated_at": "2017-12-07T22:31:34Z",
    "author_association": "NONE",
    "body": "```\n****************************************************************\n\nlibgrpc.so\n\n     VM SIZE                                                                                            FILE SIZE\n ++++++++++++++ GROWING                                                                              ++++++++++++++\n  +2.0%    +304 src/core/ext/filters/client_channel/lb_policy/grpclb/grpclb.cc                          +304  +2.0%\n      [NEW]    +303 update_lb_connectivity_status_locked                                                    +303  [NEW]\n      [NEW]    +210 extract_backend_addresses_locked(grpc_exec_ctx*, grpc_lb_addresses const*) [clone .i    +210  [NEW]\n       +14%    +136 glb_create                                                                              +136   +14%\n      [NEW]    +114 maybe_start_reresolution_timer                                                          +114  [NEW]\n      [NEW]     +80 on_reresolution_requested_locked                                                         +80  [NEW]\n       +61%     +73 glb_rr_connectivity_changed_locked                                                       +73   +61%\n       +14%     +53 [Unmapped]                                                                               +53   +14%\n      +3.6%     +48 lb_on_response_received_locked                                                           +48  +3.6%\n      +5.3%     +34 glb_shutdown_locked                                                                      +34  +5.3%\n      +3.7%     +16 lb_on_server_status_received_locked                                                      +16  +3.7%\n   +14%     +96 src/core/ext/filters/client_channel/lb_policy.cc                                         +96   +14%\n      [NEW]    +112 grpc_lb_policy_set_reresolve_closure                                                    +112  [NEW]\n\n -------------- SHRINKING                                                                            --------------\n  [ = ]       0 [None]                                                                               -1.73Ki  -0.0%\n      -9.1%      -8 glb_lb_policy_vtable                                                                      -8  -9.1%\n      -9.1%      -8 pick_first_lb_policy_vtable                                                               -8  -9.1%\n      -9.1%      -8 round_robin_lb_policy_vtable                                                              -8  -9.1%\n  -2.2%    -112 src/core/ext/filters/client_channel/lb_policy/pick_first/pick_first.cc                  -112  -2.2%\n      [DEL]    -132 start_picking_locked(grpc_exec_ctx*, pick_first_lb_policy*) [clone .isra.1]             -132  [DEL]\n      [DEL]    -112 pf_set_reresolve_closure_locked                                                         -112  [DEL]\n      [DEL]     -97 destroy_unselected_subchannels_locked(grpc_exec_ctx*, pick_first_lb_policy*) [clone      -97  [DEL]\n  -1.9%    -112 src/core/ext/filters/client_channel/lb_policy/round_robin/round_robin.cc                -112  -1.9%\n      [DEL]    -114 start_picking_locked(grpc_exec_ctx*, round_robin_lb_policy*) [clone .isra.1]            -114  [DEL]\n      [DEL]    -112 rr_set_reresolve_closure_locked                                                         -112  [DEL]\n\n  +0.0%    +176 TOTAL                                                                                -1.56Ki  -0.0%\n\n\n****************************************************************\n\nlibgrpc++.so\n\n     VM SIZE        FILE SIZE\n ++++++++++++++  ++++++++++++++\n\n  [ = ]       0        0  [ = ]\n\n\n\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/350117621",
    "html_url": "https://github.com/grpc/grpc/pull/13671#issuecomment-350117621",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13671",
    "id": 350117621,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MDExNzYyMQ==",
    "user": {
      "login": "grpc-testing",
      "id": 28024233,
      "node_id": "MDQ6VXNlcjI4MDI0MjMz",
      "avatar_url": "https://avatars1.githubusercontent.com/u/28024233?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-testing",
      "html_url": "https://github.com/grpc-testing",
      "followers_url": "https://api.github.com/users/grpc-testing/followers",
      "following_url": "https://api.github.com/users/grpc-testing/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-testing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-testing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-testing/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-testing/orgs",
      "repos_url": "https://api.github.com/users/grpc-testing/repos",
      "events_url": "https://api.github.com/users/grpc-testing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-testing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-07T22:44:22Z",
    "updated_at": "2017-12-07T22:44:22Z",
    "author_association": "NONE",
    "body": "```\n[trickle] No significant performance differences\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/350125499",
    "html_url": "https://github.com/grpc/grpc/pull/13671#issuecomment-350125499",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13671",
    "id": 350125499,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MDEyNTQ5OQ==",
    "user": {
      "login": "grpc-testing",
      "id": 28024233,
      "node_id": "MDQ6VXNlcjI4MDI0MjMz",
      "avatar_url": "https://avatars1.githubusercontent.com/u/28024233?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-testing",
      "html_url": "https://github.com/grpc-testing",
      "followers_url": "https://api.github.com/users/grpc-testing/followers",
      "following_url": "https://api.github.com/users/grpc-testing/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-testing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-testing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-testing/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-testing/orgs",
      "repos_url": "https://api.github.com/users/grpc-testing/repos",
      "events_url": "https://api.github.com/users/grpc-testing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-testing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-07T23:23:11Z",
    "updated_at": "2017-12-07T23:23:11Z",
    "author_association": "NONE",
    "body": "```\n[microbenchmarks] Performance differences noted:\nBenchmark                       cpu_time    real_time\n------------------------------  ----------  -----------\nBM_ErrorGetStatus<SimpleError>  +8%         +8%\nBM_MetadataRefUnrefExternal     -20%        -20%\nBM_MetadataRefUnrefStatic       -20%        -20%\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/350309289",
    "html_url": "https://github.com/grpc/grpc/pull/13671#issuecomment-350309289",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13671",
    "id": 350309289,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MDMwOTI4OQ==",
    "user": {
      "login": "markdroth",
      "id": 18664614,
      "node_id": "MDQ6VXNlcjE4NjY0NjE0",
      "avatar_url": "https://avatars2.githubusercontent.com/u/18664614?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/markdroth",
      "html_url": "https://github.com/markdroth",
      "followers_url": "https://api.github.com/users/markdroth/followers",
      "following_url": "https://api.github.com/users/markdroth/following{/other_user}",
      "gists_url": "https://api.github.com/users/markdroth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/markdroth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/markdroth/subscriptions",
      "organizations_url": "https://api.github.com/users/markdroth/orgs",
      "repos_url": "https://api.github.com/users/markdroth/repos",
      "events_url": "https://api.github.com/users/markdroth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/markdroth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-08T16:38:00Z",
    "updated_at": "2017-12-08T16:38:00Z",
    "author_association": "MEMBER",
    "body": "\n\n\n\nReviewed 7 of 7 files at r2.\nReview status: all files reviewed at latest revision, 5 unresolved discussions, some commit checks failed.\n\n---\n\n*[src/core/ext/filters/client_channel/lb_policy.h, line 209 at r2](https://reviewable.io:443/reviews/grpc/grpc/13671#-L-qtl83IE7-NZdgKGav:-L-qtl83IE7-NZdgKGaw:bs0noub) ([raw file](https://github.com/grpc/grpc/blob/d34a0ef98f473c374c786ca28a7e577c4fb18b83/src/core/ext/filters/client_channel/lb_policy.h#L209)):*\n> ```objc\n> \n> /** Set the re-resolution closure to \\a request_reresolution. */\n> void grpc_lb_policy_set_reresolve_closure(grpc_lb_policy* policy,\n> ```\n\nThis should still have the `_locked` suffix, because it still runs in the combiner.\n\n---\n\n*[src/core/ext/filters/client_channel/lb_policy/grpclb/grpclb.cc, line 447 at r1](https://reviewable.io:443/reviews/grpc/grpc/13671#-L-lnpWoN9QlFS66D8lO:-L-quE0bNqdk91e7OoF1:b-wah6vt) ([raw file](https://github.com/grpc/grpc/blob/3644b1aaf0a6b25a1336c7cb140fce106fad5fb3/src/core/ext/filters/client_channel/lb_policy/grpclb/grpclb.cc#L447)):*\n<details><summary><i>Previously, AspirinSJL (Juanli Shen) wrote…</i></summary><blockquote>\n\nDone.\n\nAlso, should we actually cancel the notification closure somehow? The previous code didn't cancel it. I tried to cancel it in `glb_shutdown()`, but I got a `Closure already scheduled` error so I guess that's not the right way to cancel it.\n</blockquote></details>\n\nNo, we shouldn't need to cancel it.  When we unref the RR policy, that will cause it to go into state SHUTDOWN, and the pending notification callback will be returned telling us that that's happened.\n\n---\n\n*[src/core/ext/filters/client_channel/lb_policy/grpclb/grpclb.cc, line 1052 at r1](https://reviewable.io:443/reviews/grpc/grpc/13671#-L-lkzZyh7aVqZE4A4M0:-L-qvDIVBmt2VAPdM2Qa:bq878yk) ([raw file](https://github.com/grpc/grpc/blob/3644b1aaf0a6b25a1336c7cb140fce106fad5fb3/src/core/ext/filters/client_channel/lb_policy/grpclb/grpclb.cc#L1052)):*\n<details><summary><i>Previously, AspirinSJL (Juanli Shen) wrote…</i></summary><blockquote>\n\nLooks like this file has been using many blanks in functions. Also the blank line here is preexisting. Should I remove all the blank lines in this function? \n</blockquote></details>\n\nLet's do this opportunistically.  When you're working on a function anyway, if it has them, go ahead and remove them -- especially if you might be tempted to add more with your new code.\n\n---\n\n*[src/core/ext/filters/client_channel/lb_policy/grpclb/grpclb.cc, line 1933 at r1](https://reviewable.io:443/reviews/grpc/grpc/13671#-L-lmcrnpSh4CJo7Iw-c:-L-qvsSPEbydB-EF41P3:b7y40r0) ([raw file](https://github.com/grpc/grpc/blob/3644b1aaf0a6b25a1336c7cb140fce106fad5fb3/src/core/ext/filters/client_channel/lb_policy/grpclb/grpclb.cc#L1933)):*\n<details><summary><i>Previously, AspirinSJL (Juanli Shen) wrote…</i></summary><blockquote>\n\nYes, except that we are still using shutting_down from each derived policy. \n\nI think checking that we are not shutting down is useful, I proposed to move it into the base policy class. Actually I think some other members (e.g., started_picking) are also common, maybe we should move them too.\n\nBut then it's a little more verbose to check `glb_policy->base.shutting_down` in about 15 locations. I'm fine with that verbosity, which can be simplified when we use native inheritance in the future. \n\n</blockquote></details>\n\nI'd prefer not to move `shutting_down` to the base class, for two reasons.\n\nFirst, the shutdown code is too deeply embedded in the logic of each implementation.  I think it's generally a bad idea to have too much interaction between superclasses and subclasses, because it splits up the logic between them and makes it hard to follow.  In fact, the C++ style guide [discourages implementation inheritance](https://google.github.io/styleguide/cppguide.html#Inheritance) for exactly this reason.\n\nSecond, although all of our implementations currently use a simple bool to indicate shutting down, I could imagine other implementations that do something different.  I don't think it makes sense to tie ourselves to this one particular implementation.\n\nSo, here are the alternatives I see, in decreasing order of preference:\n\n- Leave this method in the base class, but drop the assertion about `shutting_down`, so that that field does not need to be moved to the base class.\n\n- Leave the method in the subclasses, even though they all basically have the same implementation.\n\n- Move the method to the base class but add a new vtable method that returns whether the LB policy is shutting down, and use that method to access the subclass's `shutting_down` value from the base class.\n\n---\n\n*[src/core/ext/filters/client_channel/lb_policy/grpclb/grpclb.cc, line 883 at r2](https://reviewable.io:443/reviews/grpc/grpc/13671#-L-qv-Kr0KptzhEe5AcQ:-L-qv-Kr0KptzhEe5AcR:bfbcs62) ([raw file](https://github.com/grpc/grpc/blob/d34a0ef98f473c374c786ca28a7e577c4fb18b83/src/core/ext/filters/client_channel/lb_policy/grpclb/grpclb.cc#L883)):*\n>   if (glb_policy->rr_state == GRPC_CHANNEL_TRANSIENT_FAILURE ||\n>       glb_policy->rr_state == GRPC_CHANNEL_IDLE) {\n\nCould just call `maybe_start_reresolution_timer()` unconditionally here, since the code in that function already checks this condition.\n\n---\n\n\n*Comments from [Reviewable](https://reviewable.io:443/reviews/grpc/grpc/13671)*\n<!-- Sent from Reviewable.io -->\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/350912555",
    "html_url": "https://github.com/grpc/grpc/pull/13671#issuecomment-350912555",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13671",
    "id": 350912555,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MDkxMjU1NQ==",
    "user": {
      "login": "grpc-testing",
      "id": 28024233,
      "node_id": "MDQ6VXNlcjI4MDI0MjMz",
      "avatar_url": "https://avatars1.githubusercontent.com/u/28024233?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-testing",
      "html_url": "https://github.com/grpc-testing",
      "followers_url": "https://api.github.com/users/grpc-testing/followers",
      "following_url": "https://api.github.com/users/grpc-testing/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-testing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-testing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-testing/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-testing/orgs",
      "repos_url": "https://api.github.com/users/grpc-testing/repos",
      "events_url": "https://api.github.com/users/grpc-testing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-testing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-12T01:14:07Z",
    "updated_at": "2017-12-12T01:14:07Z",
    "author_association": "NONE",
    "body": "```\n****************************************************************\n\nlibgrpc.so\n\n     VM SIZE                                                                                            FILE SIZE\n ++++++++++++++ GROWING                                                                              ++++++++++++++\n  +1.6% +3.12Ki [Other]                                                                              +3.12Ki  +1.6%\n  +5.0%    +736 src/core/ext/filters/client_channel/lb_policy/grpclb/grpclb.cc                          +736  +5.0%\n      [NEW] +1.60Ki rr_handover_locked(grpc_exec_ctx*, glb_lb_policy*) [clone .part.10]                  +1.60Ki  [NEW]\n      +348% +1.41Ki [Other]                                                                              +1.41Ki  +348%\n      [NEW] +1.37Ki lb_on_response_received_locked                                                       +1.37Ki  [NEW]\n      [NEW] +1.28Ki query_for_backends_locked(grpc_exec_ctx*, glb_lb_policy*) [clone .part.8]            +1.28Ki  [NEW]\n      [NEW] +1.10Ki glb_create                                                                           +1.10Ki  [NEW]\n      [NEW]    +834 build_lb_channel_args(grpc_exec_ctx*, grpc_lb_addresses const*, grpc_fake_resolver_r    +834  [NEW]\n      [NEW]    +745 glb_update_locked                                                                       +745  [NEW]\n      [NEW]    +743 glb_pick_locked                                                                         +743  [NEW]\n      [NEW]    +725 pick_from_internal_rr_locked                                                            +725  [NEW]\n      [NEW]    +675 glb_shutdown_locked                                                                     +675  [NEW]\n      [NEW]    +616 send_client_load_report_locked                                                          +616  [NEW]\n      [NEW]    +460 wrapped_rr_closure                                                                      +460  [NEW]\n      [NEW]    +446 lb_on_server_status_received_locked                                                     +446  [NEW]\n      [NEW]    +385 maybe_restart_lb_call                                                                   +385  [NEW]\n      [NEW]    +321 glb_cancel_pick_locked                                                                  +321  [NEW]\n      [NEW]    +316 glb_cancel_picks_locked                                                                 +316  [NEW]\n      [NEW]    +313 glb_lb_channel_on_connectivity_changed_cb                                               +313  [NEW]\n      [NEW]    +303 update_lb_connectivity_status_locked                                                    +303  [NEW]\n      [NEW]    +241 glb_destroy                                                                             +241  [NEW]\n      [NEW]    +235 glb_ping_one_locked                                                                     +235  [NEW]\n      [NEW]    +210 extract_backend_addresses_locked(grpc_exec_ctx*, grpc_lb_addresses const*) [clone .i    +210  [NEW]\n  +4.2%    +592 src/core/ext/filters/client_channel/client_channel.cc                                   +592  +4.2%\n      [NEW] +2.81Ki on_resolver_result_changed_locked                                                    +2.81Ki  [NEW]\n      +533% +1.40Ki [Other]                                                                              +1.40Ki  +533%\n      [NEW]    +984 cc_init_channel_elem                                                                    +984  [NEW]\n      [NEW]    +962 pick_done_locked                                                                        +962  [NEW]\n      [NEW]    +810 start_transport_op_locked                                                               +810  [NEW]\n      [NEW]    +754 pick_callback_start_locked                                                              +754  [NEW]\n      [NEW]    +752 cc_start_transport_stream_op_batch                                                      +752  [NEW]\n      [NEW]    +611 pick_after_resolver_result_done_locked                                                  +611  [NEW]\n      [NEW]    +496 watch_connectivity_state_locked                                                         +496  [NEW]\n      [NEW]    +407 cc_destroy_call_elem                                                                    +407  [NEW]\n      [NEW]    +365 on_external_watch_complete_locked                                                       +365  [NEW]\n      [NEW]    +347 start_pick_locked                                                                       +347  [NEW]\n      [NEW]    +321 waiting_for_pick_batches_fail(grpc_exec_ctx*, grpc_call_element*, grpc_error*) [clon    +321  [NEW]\n      [NEW]    +297 cc_destroy_channel_elem                                                                 +297  [NEW]\n      [NEW]    +237 cc_init_call_elem                                                                       +237  [NEW]\n      [NEW]    +231 pick_after_resolver_result_cancel_locked                                                +231  [NEW]\n      [NEW]    +230 pick_after_resolver_result_start_locked                                                 +230  [NEW]\n      [NEW]    +192 set_channel_connectivity_state_locked                                                   +192  [NEW]\n      [NEW]    +188 on_lb_policy_state_changed_locked                                                       +188  [NEW]\n      [NEW]    +184 pick_callback_done_locked                                                               +184  [NEW]\n      [NEW]    +180 grpc_client_channel_watch_connectivity_state                                            +180  [NEW]\n  +1.4%    +469 src/core/ext/transport/chttp2/transport/chttp2_transport.cc                             +469  +1.4%\n     +14e2% +9.13Ki [Other]                                                                              +9.13Ki +14e2%\n      [NEW] +3.45Ki grpc_create_chttp2_transport                                                         +3.45Ki  [NEW]\n      [NEW] +3.41Ki perform_stream_op_locked                                                             +3.41Ki  [NEW]\n      [NEW] +2.37Ki grpc_chttp2_cancel_stream                                                            +2.37Ki  [NEW]\n      [NEW] +1.31Ki grpc_chttp2_mark_stream_closed                                                       +1.31Ki  [NEW]\n      [NEW]   +1018 read_action_locked                                                                     +1018  [NEW]\n      [NEW]   +1004 grpc_chttp2_initiate_write                                                             +1004  [NEW]\n      [NEW]    +987 grpc_chttp2_maybe_complete_recv_message                                                 +987  [NEW]\n      [NEW]    +899 destroy_stream_locked                                                                   +899  [NEW]\n      [NEW]    +743 incoming_byte_stream_next_locked                                                        +743  [NEW]\n      [NEW]    +736 close_transport_locked                                                                  +736  [NEW]\n      [NEW]    +690 maybe_start_some_streams                                                                +690  [NEW]\n      [NEW]    +682 grpc_chttp2_complete_closure_step                                                       +682  [NEW]\n      [NEW]    +637 write_action_begin_locked                                                               +637  [NEW]\n      [NEW]    +618 grpc_chttp2_maybe_complete_recv_trailing_metadata                                       +618  [NEW]\n      [NEW]    +594 incoming_byte_stream_pull                                                               +594  [NEW]\n      [NEW]    +588 grpc_chttp2_unref_transport                                                             +588  [NEW]\n      [NEW]    +495 grpc_chttp2_fake_status                                                                 +495  [NEW]\n      [NEW]    +439 write_action_end_locked                                                                 +439  [NEW]\n      [NEW]    +414 continue_fetching_send_locked                                                           +414  [NEW]\n      [NEW]    +382 try_http_parsing(grpc_exec_ctx*, grpc_chttp2_transport*) [clone .isra.6]                +382  [NEW]\n  +2.1%    +256 src/core/lib/iomgr/ev_poll_posix.cc                                                     +256  +2.1%\n      [NEW] +2.80Ki pollset_work                                                                         +2.80Ki  [NEW]\n      [NEW]    +636 pollset_kick_ext                                                                        +636  [NEW]\n      [NEW]    +508 fd_end_poll                                                                             +508  [NEW]\n      +129%    +395 [Other]                                                                                 +395  +129%\n      [NEW]    +377 notify_on_locked                                                                        +377  [NEW]\n      [NEW]    +356 fd_orphan                                                                               +356  [NEW]\n      [NEW]    +242 pollset_set_add_pollset                                                                 +242  [NEW]\n      [NEW]    +232 pollset_set_destroy                                                                     +232  [NEW]\n      [NEW]    +231 pollset_shutdown                                                                        +231  [NEW]\n      [NEW]    +226 pollset_set_add_pollset_set                                                             +226  [NEW]\n      [NEW]    +222 pollset_set_add_fd                                                                      +222  [NEW]\n      [NEW]    +219 pollset_set_del_pollset                                                                 +219  [NEW]\n      [NEW]    +196 pollset_destroy                                                                         +196  [NEW]\n      [NEW]    +194 pollset_add_fd                                                                          +194  [NEW]\n      [NEW]    +183 pollset_set_del_fd                                                                      +183  [NEW]\n      [NEW]    +158 finish_shutdown                                                                         +158  [NEW]\n      [NEW]    +145 init_result(poll_args*) [clone .constprop.14]                                           +145  [NEW]\n      [NEW]    +125 fd_shutdown                                                                             +125  [NEW]\n      [NEW]    +124 unref_by(grpc_fd*, int) [clone .constprop.16]                                           +124  [NEW]\n      [NEW]    +122 pollset_set_del_pollset_set                                                             +122  [NEW]\n      [NEW]    +115 set_ready_locked                                                                        +115  [NEW]\n  +3.2%    +232 src/core/lib/iomgr/tcp_posix.cc                                                         +232  +3.2%\n      [NEW]   +1012 tcp_do_read                                                                            +1012  [NEW]\n      [NEW]    +983 tcp_flush                                                                               +983  [NEW]\n      [NEW]    +774 grpc_tcp_create                                                                         +774  [NEW]\n      [NEW]    +671 tcp_handle_read                                                                         +671  [NEW]\n      [NEW]    +636 tcp_write                                                                               +636  [NEW]\n      [NEW]    +551 notify_on_write                                                                         +551  [NEW]\n      [NEW]    +549 run_poller                                                                              +549  [NEW]\n      [NEW]    +394 tcp_drop_uncovered_then_handle_write                                                    +394  [NEW]\n      [NEW]    +384 call_read_cb                                                                            +384  [NEW]\n      [NEW]    +174 tcp_read                                                                                +174  [NEW]\n      [NEW]    +158 tcp_read_allocation_done                                                                +158  [NEW]\n      [NEW]    +134 drop_uncovered(grpc_exec_ctx*, grpc_tcp*) [clone .isra.4]                               +134  [NEW]\n      [NEW]    +132 grpc_tcp_destroy_and_release_fd                                                         +132  [NEW]\n      [NEW]    +121 tcp_unref                                                                               +121  [NEW]\n      [NEW]    +119 notify_on_read                                                                          +119  [NEW]\n      [NEW]     +82 done_poller                                                                              +82  [NEW]\n      [NEW]     +49 tcp_destroy                                                                              +49  [NEW]\n      [NEW]     +42 tcp_shutdown                                                                             +42  [NEW]\n      [NEW]     +15 [Other]                                                                                  +15  [NEW]\n      [NEW]     +15 tcp_add_to_pollset                                                                       +15  [NEW]\n      [NEW]     +15 tcp_add_to_pollset_set                                                                   +15  [NEW]\n  +3.9%    +224 src/core/ext/filters/client_channel/subchannel.cc                                       +224  +3.9%\n      [NEW] +1.13Ki grpc_subchannel_create                                                               +1.13Ki  [NEW]\n      [NEW]    +855 subchannel_connected                                                                    +855  [NEW]\n      [NEW]    +361 maybe_start_connecting_locked                                                           +361  [NEW]\n      [NEW]    +325 grpc_connected_subchannel_create_call                                                   +325  [NEW]\n      [NEW]    +315 grpc_subchannel_notify_on_state_change                                                  +315  [NEW]\n      [NEW]    +315 on_alarm                                                                                +315  [NEW]\n      [NEW]    +302 grpc_subchannel_unref                                                                   +302  [NEW]\n      [NEW]    +228 grpc_get_subchannel_address_arg                                                         +228  [NEW]\n      [NEW]    +186 on_external_state_watcher_done                                                          +186  [NEW]\n      [NEW]    +169 subchannel_on_child_state_changed                                                       +169  [NEW]\n      [NEW]    +136 continue_connect_locked                                                                 +136  [NEW]\n      [NEW]    +112 subchannel_destroy                                                                      +112  [NEW]\n      [NEW]    +102 grpc_subchannel_weak_unref                                                              +102  [NEW]\n      [NEW]     +93 grpc_connected_subchannel_notify_on_state_change                                         +93  [NEW]\n      [NEW]     +92 subchannel_call_destroy                                                                  +92  [NEW]\n      [NEW]     +86 grpc_subchannel_call_process_op                                                          +86  [NEW]\n      [NEW]     +74 grpc_connected_subchannel_ping                                                           +74  [NEW]\n      [NEW]     +46 grpc_connected_subchannel_process_transport_op                                           +46  [NEW]\n      [NEW]     +18 connection_destroy                                                                       +18  [NEW]\n      [NEW]      +9 grpc_subchannel_call_unref                                                                +9  [NEW]\n      [NEW]      +5 [Other]                                                                                   +5  [NEW]\n  +7.6%    +213 src/core/lib/http/httpcli.cc                                                            +213  +7.6%\n      [NEW]    +607 internal_request_begin                                                                  +607  [NEW]\n      [NEW]    +591 next_address                                                                            +591  [NEW]\n      [NEW]    +293 grpc_httpcli_post                                                                       +293  [NEW]\n      [NEW]    +275 on_read                                                                                 +275  [NEW]\n      [NEW]    +267 grpc_httpcli_get                                                                        +267  [NEW]\n      [NEW]    +261 finish                                                                                  +261  [NEW]\n      [NEW]    +243 on_handshake_done                                                                       +243  [NEW]\n      [NEW]    +128 on_connected                                                                            +128  [NEW]\n      [NEW]     +74 done_write                                                                               +74  [NEW]\n      [NEW]     +66 on_resolved                                                                              +66  [NEW]\n      [NEW]     +55 closure_impl::closure_wrapper                                                            +55  [NEW]\n      [NEW]     +15 grpc_httpcli_set_override                                                                +15  [NEW]\n       +17%     +14 [Unmapped]                                                                               +14   +17%\n      [NEW]      +8 grpc_httpcli_context_destroy                                                              +8  [NEW]\n      [NEW]      +3 plaintext_handshake                                                                       +3  [NEW]\n  +5.4%    +208 src/core/lib/security/transport/secure_endpoint.cc                                      +208  +5.4%\n      [NEW] +1.25Ki endpoint_write                                                                       +1.25Ki  [NEW]\n      [NEW] +1.17Ki on_read                                                                              +1.17Ki  [NEW]\n      [NEW]    +274 call_read_cb                                                                            +274  [NEW]\n      [NEW]    +182 destroy                                                                                 +182  [NEW]\n      [NEW]    +176 endpoint_read                                                                           +176  [NEW]\n      [NEW]     +57 endpoint_destroy                                                                         +57  [NEW]\n      [NEW]      +9 endpoint_shutdown                                                                         +9  [NEW]\n      [NEW]      +9 endpoint_add_to_pollset                                                                   +9  [NEW]\n      [NEW]      +9 endpoint_add_to_pollset_set                                                               +9  [NEW]\n      [NEW]      +9 endpoint_delete_from_pollset_set                                                          +9  [NEW]\n      +3.9%      +4 [Unmapped]                                                                                +4  +3.9%\n  +7.6%    +192 src/core/ext/filters/client_channel/http_connect_handshaker.cc                          +192  +7.6%\n      [NEW]    +849 http_connect_handshaker_do_handshake                                                    +849  [NEW]\n      [NEW]    +788 on_read_done                                                                            +788  [NEW]\n      [NEW]    +293 handshake_failed_locked                                                                 +293  [NEW]\n      [NEW]    +219 handshaker_factory_add_handshakers                                                      +219  [NEW]\n      [NEW]    +154 http_connect_handshaker_shutdown                                                        +154  [NEW]\n      [NEW]    +147 on_write_done                                                                           +147  [NEW]\n      [NEW]    +134 http_connect_handshaker_unref                                                           +134  [NEW]\n      [NEW]      +5 http_connect_handshaker_destroy                                                           +5  [NEW]\n      [NEW]      +2 handshaker_factory_destroy                                                                +2  [NEW]\n      +1.0%      +1 [Unmapped]                                                                                +1  +1.0%\n  +3.6%    +176 src/core/ext/filters/http/client/http_client_filter.cc                                  +176  +3.6%\n      [NEW] +1.71Ki hc_start_transport_stream_op_batch                                                   +1.71Ki  [NEW]\n      [NEW] +1.54Ki init_channel_elem                                                                    +1.54Ki  [NEW]\n      [NEW]    +870 client_filter_incoming_metadata(grpc_exec_ctx*, grpc_call_element*, grpc_metadata_ba    +870  [NEW]\n      [NEW]    +172 pull_slice_from_send_message                                                            +172  [NEW]\n      [NEW]    +136 init_call_elem                                                                          +136  [NEW]\n      [NEW]    +114 on_send_message_next_done                                                               +114  [NEW]\n      [NEW]     +97 recv_initial_metadata_ready                                                              +97  [NEW]\n      [NEW]     +97 recv_trailing_metadata_on_complete                                                       +97  [NEW]\n      [NEW]     +84 send_message_on_complete                                                                 +84  [NEW]\n      [NEW]     +13 destroy_channel_elem                                                                     +13  [NEW]\n      [NEW]      +2 destroy_call_elem                                                                         +2  [NEW]\n  +7.2%    +175 src/core/ext/transport/chttp2/server/chttp2_server.cc                                   +175  +7.2%\n      [NEW]   +1015 grpc_chttp2_server_add_port                                                            +1015  [NEW]\n      [NEW]    +516 on_handshake_done                                                                       +516  [NEW]\n      [NEW]    +350 on_accept                                                                               +350  [NEW]\n      [NEW]    +207 tcp_server_shutdown_complete                                                            +207  [NEW]\n      [NEW]    +162 on_timeout                                                                              +162  [NEW]\n      [NEW]     +83 server_destroy_listener                                                                  +83  [NEW]\n      [NEW]     +80 server_start_listener                                                                    +80  [NEW]\n      [NEW]     +71 server_connection_state_unref                                                            +71  [NEW]\n      [NEW]     +51 on_receive_settings                                                                      +51  [NEW]\n       +42%     +19 [Unmapped]                                                                               +19   +42%\n  +3.8%    +172 src/core/lib/iomgr/udp_server.cc                                                        +172  +3.8%\n      [NEW]    +840 grpc_udp_server_add_port                                                                +840  [NEW]\n      [NEW]    +410 deactivated_all_ports                                                                   +410  [NEW]\n      [NEW]    +391 add_socket_to_server(grpc_udp_server*, int, grpc_resolved_address const*, bool (*)(g    +391  [NEW]\n      [NEW]    +369 grpc_udp_server_destroy                                                                 +369  [NEW]\n      [NEW]    +338 grpc_udp_server_start                                                                   +338  [NEW]\n      [NEW]    +254 on_read                                                                                 +254  [NEW]\n      [NEW]    +211 do_write                                                                                +211  [NEW]\n      [NEW]    +204 do_read                                                                                 +204  [NEW]\n      [NEW]    +157 on_write                                                                                +157  [NEW]\n      [NEW]    +154 shutdown_fd                                                                             +154  [NEW]\n      [NEW]    +128 finish_shutdown                                                                         +128  [NEW]\n      [NEW]     +86 destroyed_port                                                                           +86  [NEW]\n      [NEW]     +71 fd_notify_on_write_wrapper                                                               +71  [NEW]\n      [NEW]      +2 dummy_cb                                                                                  +2  [NEW]\n  +5.2%    +172 src/core/lib/security/transport/client_auth_filter.cc                                   +172  +5.2%\n      [NEW]    +921 auth_start_transport_stream_op_batch                                                    +921  [NEW]\n      [NEW]    +802 on_host_checked                                                                         +802  [NEW]\n      [NEW]    +519 on_credentials_metadata                                                                 +519  [NEW]\n      [NEW]    +319 init_channel_elem                                                                       +319  [NEW]\n      [NEW]    +122 destroy_call_elem                                                                       +122  [NEW]\n      [NEW]     +66 cancel_check_call_host                                                                   +66  [NEW]\n      [NEW]     +62 cancel_get_request_metadata                                                              +62  [NEW]\n      [NEW]     +28 destroy_channel_elem                                                                     +28  [NEW]\n       +36%     +25 [Unmapped]                                                                               +25   +36%\n      [NEW]     +21 init_call_elem                                                                           +21  [NEW]\n      [NEW]      +9 set_pollset_or_pollset_set                                                                +9  [NEW]\n  +4.8%    +160 src/core/ext/filters/client_channel/resolver/dns/c_ares/dns_resolver_ares.cc            +160  +4.8%\n      [NEW] +1.64Ki dns_ares_on_resolved_locked                                                          +1.64Ki  [NEW]\n      [NEW]    +358 dns_factory_create_resolver                                                             +358  [NEW]\n      [NEW]    +247 dns_ares_shutdown_locked                                                                +247  [NEW]\n      [NEW]    +196 dns_ares_next_locked                                                                    +196  [NEW]\n      [NEW]    +182 dns_ares_start_resolving_locked                                                         +182  [NEW]\n      [NEW]    +169 dns_ares_maybe_finish_next_locked                                                       +169  [NEW]\n      [NEW]    +125 dns_ares_destroy                                                                        +125  [NEW]\n      [NEW]     +64 dns_ares_on_retry_timer_locked                                                           +64  [NEW]\n      [NEW]     +57 dns_ares_channel_saw_error_locked                                                        +57  [NEW]\n      +9.2%     +11 [Unmapped]                                                                               +11  +9.2%\n  +5.0%    +160 src/core/ext/transport/chttp2/transport/frame_data.cc                                   +160  +5.0%\n      [NEW] +2.11Ki grpc_deframe_unprocessed_incoming_frames                                             +2.11Ki  [NEW]\n      [NEW]    +481 grpc_chttp2_data_parser_parse                                                           +481  [NEW]\n      [NEW]    +152 grpc_chttp2_data_parser_destroy                                                         +152  [NEW]\n       +26%     +10 [Unmapped]                                                                               +10   +26%\n  +3.9%    +160 src/core/lib/security/transport/security_handshaker.cc                                  +160  +3.9%\n      [NEW]    +702 on_peer_checked                                                                         +702  [NEW]\n      [NEW]    +467 on_handshake_next_done_locked                                                           +467  [NEW]\n      [NEW]    +407 move_read_buffer_into_handshake_buffer                                                  +407  [NEW]\n      [NEW]    +341 security_handshake_failed_locked                                                        +341  [NEW]\n      [NEW]    +274 on_handshake_data_sent_to_peer                                                          +274  [NEW]\n      [NEW]    +260 grpc_security_handshaker_create                                                         +260  [NEW]\n      [NEW]    +248 on_handshake_data_received_from_peer                                                    +248  [NEW]\n      [NEW]    +188 check_peer_locked                                                                       +188  [NEW]\n      [NEW]    +171 fail_handshaker_do_handshake                                                            +171  [NEW]\n      [NEW]    +167 security_handshaker_unref                                                               +167  [NEW]\n      [NEW]    +161 do_handshaker_next_locked                                                               +161  [NEW]\n      [NEW]    +154 security_handshaker_shutdown                                                            +154  [NEW]\n      [NEW]    +144 security_handshaker_do_handshake                                                        +144  [NEW]\n      [NEW]     +40 client_handshaker_factory_add_handshakers                                                +40  [NEW]\n      [NEW]     +40 server_handshaker_factory_add_handshakers                                                +40  [NEW]\n      [NEW]      +8 fail_handshaker_destroy                                                                   +8  [NEW]\n      [NEW]      +8 fail_handshaker_shutdown                                                                  +8  [NEW]\n      [NEW]      +5 security_handshaker_destroy                                                               +5  [NEW]\n      [NEW]      +2 handshaker_factory_destroy                                                                +2  [NEW]\n  +3.0%    +144 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_wrapper.cc            +144  +3.0%\n      [NEW] +1.50Ki grpc_dns_lookup_ares_impl                                                            +1.50Ki  [NEW]\n      [NEW]    +373 on_dns_lookup_done_cb                                                                   +373  [NEW]\n      [NEW]    +239 grpc_ares_request_unref                                                                 +239  [NEW]\n      [NEW]    +133 grpc_resolve_address_ares_impl                                                          +133  [NEW]\n      [NEW]     +33 grpc_cancel_ares_request                                                                 +33  [NEW]\n       +29%     +21 [Unmapped]                                                                               +21   +29%\n  +8.8%    +144 src/core/ext/transport/chttp2/client/chttp2_connector.cc                                +144  +8.8%\n      [NEW]    +555 connected                                                                               +555  [NEW]\n      [NEW]    +503 on_handshake_done                                                                       +503  [NEW]\n      [NEW]    +414 chttp2_connector_connect                                                                +414  [NEW]\n      [NEW]    +133 chttp2_connector_shutdown                                                               +133  [NEW]\n      [NEW]     +72 chttp2_connector_unref                                                                   +72  [NEW]\n       +20%      +7 [Unmapped]                                                                                +7   +20%\n  +1.5%    +136 src/core/lib/security/transport/security_connector.cc                                   +136  +1.5%\n      [NEW]    +666 grpc_ssl_channel_security_connector_create                                              +666  [NEW]\n      [NEW]    +537 fake_check_peer(grpc_exec_ctx*, grpc_security_connector*, tsi_peer, grpc_auth_contex    +537  [NEW]\n      [NEW]    +526 fake_channel_check_peer                                                                 +526  [NEW]\n      [NEW]    +524 grpc_ssl_server_security_connector_create                                               +524  [NEW]\n      [NEW]    +215 grpc_security_connector_check_peer                                                      +215  [NEW]\n      [NEW]    +202 ssl_channel_check_call_host                                                             +202  [NEW]\n      [NEW]    +190 ssl_channel_add_handshakers                                                             +190  [NEW]\n      [NEW]    +176 ssl_server_add_handshakers                                                              +176  [NEW]\n      [NEW]    +166 grpc_channel_security_connector_check_call_host                                         +166  [NEW]\n      [NEW]    +122 ssl_channel_check_peer                                                                  +122  [NEW]\n      [NEW]    +107 ssl_server_check_peer                                                                   +107  [NEW]\n      [NEW]     +92 ssl_channel_destroy                                                                      +92  [NEW]\n      [NEW]     +68 grpc_security_connector_unref                                                            +68  [NEW]\n      [NEW]     +53 [Other]                                                                                  +53  [NEW]\n      [NEW]     +52 fake_channel_add_handshakers                                                             +52  [NEW]\n      [NEW]     +49 fake_server_add_handshakers                                                              +49  [NEW]\n      [NEW]     +40 fake_channel_destroy                                                                     +40  [NEW]\n      [NEW]     +39 ssl_server_destroy                                                                       +39  [NEW]\n      [NEW]     +24 grpc_channel_security_connector_cancel_check_call_host                                   +24  [NEW]\n      [NEW]     +20 fake_server_check_peer                                                                   +20  [NEW]\n      [NEW]     +18 grpc_server_security_connector_add_handshakers                                           +18  [NEW]\n   +20%    +130 src/core/ext/filters/client_channel/lb_policy.cc                                        +130   +20%\n      [NEW]    +178 grpc_lb_policy_try_reresolve                                                            +178  [NEW]\n      [NEW]    +120 grpc_lb_policy_unref                                                                    +120  [NEW]\n      [NEW]    +112 grpc_lb_policy_set_reresolve_closure                                                    +112  [NEW]\n      [NEW]     +65 grpc_lb_policy_weak_unref                                                                +65  [NEW]\n      [NEW]     +35 shutdown_locked                                                                          +35  [NEW]\n      [NEW]      +6 grpc_lb_policy_pick_locked                                                                +6  [NEW]\n      [NEW]      +6 grpc_lb_policy_update_locked                                                              +6  [NEW]\n      [NEW]      +6 grpc_lb_policy_ping_one_locked                                                            +6  [NEW]\n      [NEW]      +6 grpc_lb_policy_exit_idle_locked                                                           +6  [NEW]\n      [NEW]      +6 grpc_lb_policy_cancel_pick_locked                                                         +6  [NEW]\n      [NEW]      +6 grpc_lb_policy_cancel_picks_locked                                                        +6  [NEW]\n      [NEW]      +6 grpc_lb_policy_check_connectivity_locked                                                  +6  [NEW]\n      [NEW]      +6 grpc_lb_policy_notify_on_state_change_locked                                              +6  [NEW]\n\n -------------- SHRINKING                                                                            --------------\n  -3.4% -1.79Ki [Other]                                                                              -1.79Ki  -3.4%\n -11.2%    -943 src/core/lib/surface/completion_queue.cc                                                -943 -11.2%\n      [DEL]    -576 cq_end_op_for_next                                                                      -576  [DEL]\n      [DEL]    -528 cq_end_op_for_pluck                                                                     -528  [DEL]\n      [DEL]    -392 non_polling_poller_work                                                                 -392  [DEL]\n      [DEL]    -294 ExecCtxPluck::CheckReadyToFinish                                                        -294  [DEL]\n      [DEL]    -179 [Other]                                                                                 -179  [DEL]\n     -14.0%    -160 cq_next                                                                                 -160 -14.0%\n      [DEL]    -159 ExecCtxNext::CheckReadyToFinish                                                         -159  [DEL]\n     -11.6%    -158 cq_pluck                                                                                -158 -11.6%\n      [DEL]    -156 cq_finish_shutdown_pluck                                                                -156  [DEL]\n      [DEL]    -145 cq_finish_shutdown_next                                                                 -145  [DEL]\n     -30.6%    -135 cq_event_queue_pop                                                                      -135 -30.6%\n     -44.4%    -122 grpc_completion_queue_shutdown                                                          -122 -44.4%\n      [DEL]    -121 non_polling_poller_shutdown                                                             -121  [DEL]\n     -25.1%    -108 grpc_completion_queue_create_internal                                                   -108 -25.1%\n     -24.5%    -106 grpc_completion_queue_thread_local_cache_flush                                          -106 -24.5%\n     -39.9%    -105 grpc_completion_queue_destroy                                                           -105 -39.9%\n      [DEL]     -74 cq_shutdown_next                                                                         -74  [DEL]\n      [DEL]     -74 cq_shutdown_pluck                                                                        -74  [DEL]\n      [DEL]     -60 non_polling_poller_kick                                                                  -60  [DEL]\n      [DEL]     -56 grpc_cq_internal_unref                                                                   -56  [DEL]\n      [DEL]     -56 ExecCtxNext::~ExecCtxNext                                                                -56  [DEL]\n -17.4%    -830 src/core/lib/debug/stats_data.cc                                                        -830 -17.4%\n      [DEL]    -363 grpc_stats_inc_tcp_read_size                                                            -363  [DEL]\n      [DEL]    -363 grpc_stats_inc_tcp_read_offer                                                           -363  [DEL]\n      [DEL]    -363 grpc_stats_inc_tcp_write_size                                                           -363  [DEL]\n      [DEL]    -363 grpc_stats_inc_server_cqs_checked                                                       -363  [DEL]\n      [DEL]    -363 grpc_stats_inc_tcp_write_iov_size                                                       -363  [DEL]\n      [DEL]    -363 grpc_stats_inc_http2_send_message_size                                                  -363  [DEL]\n      [DEL]    -363 grpc_stats_inc_tcp_read_offer_iov_size                                                  -363  [DEL]\n      [DEL]    -363 grpc_stats_inc_http2_send_flowctl_per_write                                             -363  [DEL]\n      [DEL]    -363 grpc_stats_inc_http2_send_message_per_write                                             -363  [DEL]\n      [DEL]    -363 grpc_stats_inc_http2_send_initial_metadata_per_write                                    -363  [DEL]\n      [DEL]    -363 grpc_stats_inc_http2_send_trailing_metadata_per_write                                   -363  [DEL]\n      [DEL]    -360 grpc_stats_inc_poll_events_returned                                                     -360  [DEL]\n      [DEL]    -342 grpc_stats_inc_call_initial_size                                                        -342  [DEL]\n     -45.6%     -31 [Unmapped]                                                                               -31 -45.6%\n  -8.7%    -480 src/core/lib/surface/channel.cc                                                         -480  -8.7%\n      [DEL] -1.48Ki grpc_channel_create_with_builder                                                     -1.48Ki  [DEL]\n      [DEL]    -422 grpc_channel_create_call_internal                                                       -422  [DEL]\n      [DEL]    -348 grpc_channel_create_pollset_set_call                                                    -348  [DEL]\n      [DEL]    -206 grpc_channel_get_reffed_status_elem                                                     -206  [DEL]\n     -19.0%    -128 grpc_channel_register_call                                                              -128 -19.0%\n     -32.3%    -122 grpc_channel_destroy                                                                    -122 -32.3%\n     -20.1%    -120 grpc_channel_create_call                                                                -120 -20.1%\n      [DEL]    -115 grpc_channel_create                                                                     -115  [DEL]\n      [DEL]    -115 destroy_channel                                                                         -115  [DEL]\n     -48.3%    -111 grpc_channel_get_info                                                                   -111 -48.3%\n     -21.5%    -105 grpc_channel_create_registered_call                                                     -105 -21.5%\n     -32.5%     -41 [Unmapped]                                                                               -41 -32.5%\n      [DEL]      -9 grpc_channel_internal_unref                                                               -9  [DEL]\n  -3.5%    -480 src/core/lib/surface/server.cc                                                          -480  -3.5%\n     -34.4% -1.14Ki [Other]                                                                              -1.14Ki -34.4%\n      [DEL] -1.13Ki grpc_server_setup_transport                                                          -1.13Ki  [DEL]\n      [DEL]    -818 got_initial_metadata                                                                    -818  [DEL]\n      [DEL]    -607 maybe_finish_shutdown                                                                   -607  [DEL]\n      [DEL]    -601 publish_call(grpc_server*, call_data*, unsigned long, requested_call*) [clone .isra.    -601  [DEL]\n      [DEL]    -578 publish_new_rpc                                                                         -578  [DEL]\n      [DEL]    -550 server_on_recv_initial_metadata                                                         -550  [DEL]\n      [DEL]    -511 queue_call_request                                                                      -511  [DEL]\n      [DEL]    -431 channel_broadcaster_shutdown                                                            -431  [DEL]\n      [DEL]    -402 channel_connectivity_changed                                                            -402  [DEL]\n      [DEL]    -305 finish_start_new_rpc                                                                    -305  [DEL]\n      [DEL]    -286 accept_stream                                                                           -286  [DEL]\n      [DEL]    -269 server_unref                                                                            -269  [DEL]\n      [DEL]    -229 destroy_channel_elem                                                                    -229  [DEL]\n      [DEL]    -185 init_channel_elem                                                                       -185  [DEL]\n      [DEL]    -162 destroy_call_elem                                                                       -162  [DEL]\n     -21.2%    -152 grpc_server_request_registered_call                                                     -152 -21.2%\n      [DEL]    -147 init_call_elem                                                                          -147  [DEL]\n      [DEL]    -146 request_matcher_kill_requests(grpc_server*, request_matcher*, grpc_error*) [clone .i    -146  [DEL]\n     -23.0%    -142 grpc_server_request_call                                                                -142 -23.0%\n      [DEL]    -141 kill_pending_work_locked                                                                -141  [DEL]\n -51.5%    -464 src/core/lib/iomgr/fork_posix.cc                                                        -464 -51.5%\n      [DEL]    -234 grpc_postfork_child                                                                     -234  [DEL]\n     -97.8%    -221 grpc_postfork_parent                                                                    -221 -97.8%\n     -32.3%    -133 grpc_prefork                                                                            -133 -32.3%\n -30.0%    -320 src/core/lib/surface/alarm.cc                                                           -320 -30.0%\n      [DEL]    -242 alarm_unref(grpc_alarm*) [clone .part.3]                                                -242  [DEL]\n     -34.7%    -120 grpc_alarm_set                                                                          -120 -34.7%\n     -52.2%    -109 grpc_alarm_cancel                                                                       -109 -52.2%\n      [DEL]     -59 alarm_cb                                                                                 -59  [DEL]\n      [DEL]     -25 alarm_end_completion                                                                     -25  [DEL]\n  -8.7%    -288 src/core/lib/security/credentials/google_default/google_default_credentials.cc          -288  -8.7%\n      [DEL] -1.07Ki create_default_creds_from_path                                                       -1.07Ki  [DEL]\n      [DEL]    -204 on_compute_engine_detection_http_response                                               -204  [DEL]\n     -11.9%    -192 grpc_google_default_credentials_create                                                  -192 -11.9%\n     -40.7%    -118 grpc_flush_cached_google_default_credentials                                            -118 -40.7%\n     -14.9%     -10 [Unmapped]                                                                               -10 -14.9%\n      [DEL]      -5 destroy_pollset                                                                           -5  [DEL]\n  -9.8%    -256 src/core/lib/iomgr/combiner.cc                                                          -256  -9.8%\n      [DEL]   -1012 grpc_combiner_continue_exec_ctx                                                        -1012  [DEL]\n      [DEL]    -392 combiner_exec                                                                           -392  [DEL]\n      [DEL]    -362 combiner_finally_exec                                                                   -362  [DEL]\n      [DEL]    -170 queue_offload                                                                           -170  [DEL]\n      [DEL]    -124 really_destroy                                                                          -124  [DEL]\n      [DEL]    -116 grpc_combiner_unref                                                                     -116  [DEL]\n      [DEL]     -66 offload                                                                                  -66  [DEL]\n      [DEL]     -24 enqueue_finally                                                                          -24  [DEL]\n     -25.0%     -23 [Unmapped]                                                                               -23 -25.0%\n  -2.7%    -256 src/core/lib/iomgr/ev_epoll1_linux.cc                                                   -256  -2.7%\n      [DEL] -3.30Ki pollset_work                                                                         -3.30Ki  [DEL]\n      [DEL] -2.32Ki pollset_kick                                                                         -2.32Ki  [DEL]\n      [DEL]    -597 check_neighborhood_for_available_poller(pollset_neighborhood*) [clone .isra.7]          -597  [DEL]\n      [DEL]    -520 pollset_shutdown                                                                        -520  [DEL]\n      [DEL]    -330 fd_orphan                                                                               -330  [DEL]\n      [DEL]    -172 pollset_destroy                                                                         -172  [DEL]\n      [DEL]     -94 fd_shutdown_internal                                                                     -94  [DEL]\n      [DEL]     -60 pollset_maybe_finish_shutdown                                                            -60  [DEL]\n     -13.4%     -37 [Unmapped]                                                                               -37 -13.4%\n      [DEL]      -9 fd_notify_on_read                                                                         -9  [DEL]\n      [DEL]      -9 fd_notify_on_write                                                                        -9  [DEL]\n      [DEL]      -5 fd_get_read_notifier_pollset                                                              -5  [DEL]\n      [DEL]      -4 fd_shutdown                                                                               -4  [DEL]\n      [DEL]      -2 [Other]                                                                                   -2  [DEL]\n      [DEL]      -2 pollset_add_fd                                                                            -2  [DEL]\n      [DEL]      -2 pollset_set_add_fd                                                                        -2  [DEL]\n      [DEL]      -2 pollset_set_del_fd                                                                        -2  [DEL]\n      [DEL]      -2 pollset_set_destroy                                                                       -2  [DEL]\n      [DEL]      -2 pollset_set_add_pollset                                                                   -2  [DEL]\n      [DEL]      -2 pollset_set_del_pollset                                                                   -2  [DEL]\n      [DEL]      -2 pollset_set_add_pollset_set                                                               -2  [DEL]\n  -8.1%    -256 src/core/lib/security/context/security_context.cc                                       -256  -8.1%\n     -30.0%    -133 grpc_call_set_credentials                                                               -133 -30.0%\n     -46.4%    -122 grpc_client_security_context_destroy                                                    -122 -46.4%\n      [DEL]      -5 auth_context_pointer_arg_destroy                                                          -5  [DEL]\n      -2.3%      -4 [Unmapped]                                                                                -4  -2.3%\n -21.6%    -256 src/core/lib/surface/byte_buffer_reader.cc                                              -256 -21.6%\n     -25.8%    -128 grpc_byte_buffer_reader_readall                                                         -128 -25.8%\n     -27.6%    -121 grpc_byte_buffer_reader_init                                                            -121 -27.6%\n     -22.6%      -7 [Unmapped]                                                                                -7 -22.6%\n  -8.2%    -240 src/core/lib/iomgr/executor.cc                                                          -240  -8.2%\n      [DEL] -1.27Ki executor_push                                                                        -1.27Ki  [DEL]\n      [DEL]    -567 grpc_executor_set_threading                                                             -567  [DEL]\n      [DEL]    -166 run_closures(grpc_closure_list) [clone .isra.4]                                         -166  [DEL]\n     -21.3%    -144 executor_thread                                                                         -144 -21.3%\n      [DEL]     -21 grpc_executor_init                                                                       -21  [DEL]\n      [DEL]     -10 executor_push_short                                                                      -10  [DEL]\n      [DEL]      -7 grpc_executor_shutdown                                                                    -7  [DEL]\n      [DEL]      -7 executor_push_long                                                                        -7  [DEL]\n      -1.2%      -1 [Unmapped]                                                                                -1  -1.2%\n -13.4%    -240 src/core/lib/iomgr/resolve_address_posix.cc                                             -240 -13.4%\n     -18.5%    -274 blocking_resolve_address_impl                                                           -274 -18.5%\n      [DEL]    -165 resolve_address_impl                                                                    -165  [DEL]\n      [DEL]     -90 do_request_thread                                                                        -90  [DEL]\n  -9.7%    -240 src/core/lib/iomgr/timer_manager.cc                                                     -240  -9.7%\n     -11.5%    -136 timer_thread                                                                            -136 -11.5%\n     -46.7%    -105 grpc_timer_manager_tick                                                                 -105 -46.7%\n  -9.7%    -224 src/core/lib/security/credentials/credentials.cc                                        -224  -9.7%\n     -41.2%    -105 grpc_call_credentials_release                                                           -105 -41.2%\n     -41.2%    -105 grpc_channel_credentials_release                                                        -105 -41.2%\n     -41.2%    -105 grpc_server_credentials_release                                                         -105 -41.2%\n      [DEL]     -99 grpc_channel_credentials_create_security_connector                                       -99  [DEL]\n      [DEL]     -75 grpc_server_credentials_unref                                                            -75  [DEL]\n      [DEL]     -69 grpc_server_credentials_create_security_connector                                        -69  [DEL]\n      [DEL]     -51 grpc_call_credentials_unref                                                              -51  [DEL]\n      [DEL]     -51 grpc_channel_credentials_unref                                                           -51  [DEL]\n      [DEL]     -30 grpc_credentials_metadata_request_destroy                                                -30  [DEL]\n      [DEL]     -30 grpc_call_credentials_get_request_metadata                                               -30  [DEL]\n      [DEL]     -26 grpc_call_credentials_cancel_get_request_metadata                                        -26  [DEL]\n      [DEL]      -5 credentials_pointer_arg_destroy                                                           -5  [DEL]\n      [DEL]      -5 server_credentials_pointer_arg_destroy                                                    -5  [DEL]\n -14.1%    -201 src/core/lib/iomgr/iomgr.cc                                                             -201 -14.1%\n      [DEL]    -836 grpc_iomgr_shutdown                                                                     -836  [DEL]\n      [DEL]    -272 grpc_iomgr_init                                                                         -272  [DEL]\n      [DEL]     -87 dump_objects(char const*) [clone .constprop.3]                                           -87  [DEL]\n      [DEL]      -5 grpc_iomgr_start                                                                          -5  [DEL]\n  -9.0%    -192 src/core/lib/compression/stream_compression_gzip.cc                                     -192  -9.0%\n     -11.6%    -184 gzip_flate                                                                              -184 -11.6%\n     -20.0%      -8 [Unmapped]                                                                                -8 -20.0%\n  -4.2%    -181 src/core/lib/slice/slice_buffer.cc                                                      -181  -4.2%\n     -51.4%    -107 grpc_slice_buffer_destroy                                                               -107 -51.4%\n     -51.4%    -107 grpc_slice_buffer_reset_and_unref                                                       -107 -51.4%\n      [DEL]     -88 grpc_slice_buffer_reset_and_unref_internal                                               -88  [DEL]\n      [DEL]     -34 grpc_slice_buffer_destroy_internal                                                       -34  [DEL]\n -12.4%    -160 src/core/lib/surface/init.cc                                                            -160 -12.4%\n     -24.3%    -102 grpc_shutdown                                                                           -102 -24.3%\n      [DEL]     -56 grpc_core::ExecCtx::~ExecCtx                                                             -56  [DEL]\n      [DEL]     -53 grpc_core::ExecCtx::~ExecCtx                                                             -53  [DEL]\n     -58.8%     -30 [Unmapped]                                                                               -30 -58.8%\n      [DEL]      -9 append_filter                                                                             -9  [DEL]\n      [DEL]      -9 prepend_filter                                                                            -9  [DEL]\n      [DEL]      -3 grpc_core::ExecCtx::CheckReadyToFinish                                                    -3  [DEL]\n -21.2%    -139 src/core/ext/transport/chttp2/client/insecure/channel_create_posix.cc                   -139 -21.2%\n     -21.2%    -139 grpc_insecure_channel_create_from_fd                                                    -139 -21.2%\n\n -+-+-+-+-+-+-+ MIXED                                                                                +-+-+-+-+-+-+-\n  +1.5% +8.79Ki [None]                                                                               -55.4Ki  -1.0%\n      [NEW]    +192 init_transport(grpc_exec_ctx*, grpc_chttp2_transport*, grpc_channel_args const*, grp    +192  [NEW]\n      [NEW]     +60 CSWTCH.2                                                                                 +60  [NEW]\n      [NEW]     +32 grpc_lb_policy_grpclb_build_lb_channel_args(grpc_exec_ctx*, grpc_slice_hash_table*,      +32  [NEW]\n      [NEW]     +32 parse_lithdr_incidx_v(grpc_exec_ctx*, grpc_chttp2_hpack_parser*, unsigned char const     +32  [NEW]\n      [NEW]     +32 parse_lithdr_notidx_v(grpc_exec_ctx*, grpc_chttp2_hpack_parser*, unsigned char const     +32  [NEW]\n      [NEW]     +32 parse_lithdr_nvridx_v(grpc_exec_ctx*, grpc_chttp2_hpack_parser*, unsigned char const     +32  [NEW]\n      [NEW]     +24 parse_lithdr_incidx_x(grpc_exec_ctx*, grpc_chttp2_hpack_parser*, unsigned char const     +24  [NEW]\n      [NEW]     +24 parse_lithdr_notidx_x(grpc_exec_ctx*, grpc_chttp2_hpack_parser*, unsigned char const     +24  [NEW]\n      [NEW]     +24 parse_lithdr_nvridx_x(grpc_exec_ctx*, grpc_chttp2_hpack_parser*, unsigned char const     +24  [NEW]\n      [NEW]     +16 grpc_lb_subchannel_list_create(grpc_exec_ctx*, grpc_lb_policy*, grpc_core::TraceFlag     +16  [NEW]\n      [NEW]     +16 parse_lithdr_incidx(grpc_exec_ctx*, grpc_chttp2_hpack_parser*, unsigned char const*,     +16  [NEW]\n      [NEW]     +16 parse_lithdr_notidx(grpc_exec_ctx*, grpc_chttp2_hpack_parser*, unsigned char const*,     +16  [NEW]\n      [NEW]     +16 parse_lithdr_nvridx(grpc_exec_ctx*, grpc_chttp2_hpack_parser*, unsigned char const*,     +16  [NEW]\n      [NEW]     +16 dns_ares_on_resolved_locked(grpc_exec_ctx*, void*, grpc_error*)::args_to_remove            0  [ = ]\n      [NEW]      +8 grpc_subchannel_create(grpc_exec_ctx*, grpc_connector*, grpc_subchannel_args const*)      +8  [NEW]\n      [NEW]      +8 grpc_lb_policy_grpclb_create_lb_channel(grpc_exec_ctx*, char const*, grpc_client_cha      +8  [NEW]\n      [NEW]      +8 glb_create(grpc_exec_ctx*, grpc_lb_policy_factory*, grpc_lb_policy_args*)::args_to_r      +8  [NEW]\n      [NEW]      +8 parse_max_tbl_size_x(grpc_exec_ctx*, grpc_chttp2_hpack_parser*, unsigned char const*      +8  [NEW]\n      [NEW]      +8 lb_policy_args_create(grpc_exec_ctx*, glb_lb_policy*)::keys_to_remove                     +8  [NEW]\n      [NEW]      +8 parse_indexed_field_x(grpc_exec_ctx*, grpc_chttp2_hpack_parser*, unsigned char const      +8  [NEW]\n      [DEL]    -192 init_transport(grpc_chttp2_transport*, grpc_channel_args const*, grpc_endpoint*, boo    -192  [DEL]\n      [DEL]     -60 CSWTCH.3                                                                                 -60  [DEL]\n     -41.2%     -56 [Other]                                                                                  -56 -41.2%\n      [DEL]     -40 vtable for ExecCtxNext                                                                   -40  [DEL]\n      [DEL]     -40 vtable for ExecCtxPluck                                                                  -40  [DEL]\n      [DEL]     -40 vtable for grpc_core::ExecCtx                                                            -40  [DEL]\n      -2.6%     -32 [None]                                                                                     0  [ = ]\n      [DEL]     -32 grpc_lb_policy_grpclb_build_lb_channel_args(grpc_slice_hash_table*, grpc_fake_resolv     -32  [DEL]\n      [DEL]     -32 parse_lithdr_incidx_v(grpc_chttp2_hpack_parser*, unsigned char const*, unsigned char     -32  [DEL]\n      [DEL]     -32 parse_lithdr_notidx_v(grpc_chttp2_hpack_parser*, unsigned char const*, unsigned char     -32  [DEL]\n      [DEL]     -32 parse_lithdr_nvridx_v(grpc_chttp2_hpack_parser*, unsigned char const*, unsigned char     -32  [DEL]\n      [DEL]     -24 parse_lithdr_incidx_x(grpc_chttp2_hpack_parser*, unsigned char const*, unsigned char     -24  [DEL]\n      [DEL]     -24 parse_lithdr_notidx_x(grpc_chttp2_hpack_parser*, unsigned char const*, unsigned char     -24  [DEL]\n      [DEL]     -24 parse_lithdr_nvridx_x(grpc_chttp2_hpack_parser*, unsigned char const*, unsigned char     -24  [DEL]\n      [DEL]     -16 grpc_lb_subchannel_list_create(grpc_lb_policy*, grpc_core::TraceFlag*, grpc_lb_addre     -16  [DEL]\n      [DEL]     -16 parse_lithdr_incidx(grpc_chttp2_hpack_parser*, unsigned char const*, unsigned char c     -16  [DEL]\n      [DEL]     -16 parse_lithdr_notidx(grpc_chttp2_hpack_parser*, unsigned char const*, unsigned char c     -16  [DEL]\n      [DEL]     -16 parse_lithdr_nvridx(grpc_chttp2_hpack_parser*, unsigned char const*, unsigned char c     -16  [DEL]\n      [DEL]     -16 dns_ares_on_resolved_locked(void*, grpc_error*)::args_to_remove                            0  [ = ]\n      -9.1%      -8 glb_lb_policy_vtable                                                                      -8  -9.1%\n      -9.1%      -8 pick_first_lb_policy_vtable                                                               -8  -9.1%\n\n  +0.7% +8.38Ki TOTAL                                                                                -55.8Ki  -0.9%\n\n\n****************************************************************\n\nlibgrpc++.so\n\n     VM SIZE                                                                                            FILE SIZE\n ++++++++++++++ GROWING                                                                              ++++++++++++++\n   +11% +1.37Ki src/cpp/client/generic_stub.cc                                                       +1.37Ki   +11%\n      +305% +1.60Ki grpc::internal::CallOpSet<grpc::internal::CallOpRecvInitialMetadata, grpc::internal: +1.60Ki  +305%\n      +174% +1.58Ki grpc::internal::CallOpSet<grpc::internal::CallOpRecvInitialMetadata, grpc::internal: +1.58Ki  +174%\n      [NEW]    +194 void std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >    +194  [NEW]\n  +2.6%     +16 src/cpp/common/channel_filter.cc                                                         +16  +2.6%\n      [NEW]    +270 grpc::MetadataBatch::AddMetadata                                                        +270  [NEW]\n      [NEW]     +97 grpc::internal::(anonymous namespace)::MaybeAddFilter                                    +97  [NEW]\n      [NEW]     +14 grpc::ChannelData::StartTransportOp                                                      +14  [NEW]\n      [NEW]     +14 grpc::ChannelData::GetInfo                                                               +14  [NEW]\n      [NEW]     +14 grpc::CallData::SetPollsetOrPollsetSet                                                   +14  [NEW]\n      [NEW]     +14 grpc::CallData::StartTransportStreamOpBatch                                              +14  [NEW]\n      [NEW]      +3 grpc::ChannelData::Init                                                                   +3  [NEW]\n      [NEW]      +3 grpc::CallData::Init                                                                      +3  [NEW]\n      [NEW]      +2 grpc::ChannelData::Destroy                                                                +2  [NEW]\n      [NEW]      +2 grpc::CallData::Destroy                                                                   +2  [NEW]\n\n -------------- SHRINKING                                                                            --------------\n  -6.0%    -336 src/cpp/common/channel_arguments.cc                                                     -336  -6.0%\n      [DEL]    -194 void std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >    -194  [DEL]\n     -14.6%    -118 grpc::ChannelArguments::SetSocketMutator                                                -118 -14.6%\n     -31.5%    -112 grpc::ChannelArguments::~ChannelArguments                                               -112 -31.5%\n      [DEL]     -56 grpc_core::ExecCtx::~ExecCtx                                                             -56  [DEL]\n      [DEL]     -53 grpc_core::ExecCtx::~ExecCtx                                                             -53  [DEL]\n      [DEL]      -3 grpc_core::ExecCtx::CheckReadyToFinish                                                    -3  [DEL]\n      [DEL]      -2 grpc::ChannelArguments::PointerVtableMembers::Destroy                                     -2  [DEL]\n  -1.7%     -64 src/cpp/client/client_context.cc                                                         -64  -1.7%\n      -6.4%     -32 grpc::ClientContext::ClientContext                                                       -32  -6.4%\n      -3.9%     -32 grpc::ClientContext::~ClientContext                                                      -32  -3.9%\n\n -+-+-+-+-+-+-+ MIXED                                                                                +-+-+-+-+-+-+-\n  -0.5%   -1022 [None]                                                                               +7.49Ki  +0.2%\n      [DEL]     -40 vtable for grpc_core::ExecCtx                                                            -40  [DEL]\n      [DEL]     -21 typeinfo name for grpc_core::ExecCtx                                                     -21  [DEL]\n     -13.1%     -16 [None]                                                                                     0  [ = ]\n      [DEL]     -16 typeinfo for grpc_core::ExecCtx                                                          -16  [DEL]\n\n  [ = ]       0 TOTAL                                                                                +8.49Ki  +0.2%\n\n\n\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/350913929",
    "html_url": "https://github.com/grpc/grpc/pull/13671#issuecomment-350913929",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13671",
    "id": 350913929,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MDkxMzkyOQ==",
    "user": {
      "login": "AspirinSJL",
      "id": 3314176,
      "node_id": "MDQ6VXNlcjMzMTQxNzY=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/3314176?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AspirinSJL",
      "html_url": "https://github.com/AspirinSJL",
      "followers_url": "https://api.github.com/users/AspirinSJL/followers",
      "following_url": "https://api.github.com/users/AspirinSJL/following{/other_user}",
      "gists_url": "https://api.github.com/users/AspirinSJL/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AspirinSJL/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AspirinSJL/subscriptions",
      "organizations_url": "https://api.github.com/users/AspirinSJL/orgs",
      "repos_url": "https://api.github.com/users/AspirinSJL/repos",
      "events_url": "https://api.github.com/users/AspirinSJL/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AspirinSJL/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-12T01:21:42Z",
    "updated_at": "2017-12-12T01:21:42Z",
    "author_association": "MEMBER",
    "body": "I've spent 2 days on this timer bug but I haven't understood why it happens. To reproduce it, run `GRPC_VERBOSITY=DEBUG GRPC_TRACE=timer,glb,round_robin tools/run_tests/run_tests.py -l c++ -r \"grpclb_end.*Reresolve\" -c asan -S -n inf` and wait for about 15s. A full sample log is [here](https://gist.github.com/AspirinSJL/dafeef56c6c1cd5fa5d21d142bd39aef). The error message says I'm adding a dulicate timer. While debugging it, one thing I can't understand is that the timer will sometimes  fire immediately rather than after the timeout. I am thinking that maybe I'm using the timer wrongly or something behind the timer may be wrong. @sreecha any idea?\r\n\r\n```\r\n11 17:06:02.579113253  243527 grpclb.cc:1766]             [grpclb 0x61a00000f680] Status from LB server received. Status = 0, Details = '', (call: 0x62a000030220), error '\"No Error\"'\r\nI1211 17:06:02.579131002  243527 grpclb.cc:870]              before init re-re timer\r\nD1211 17:06:02.579142890  243527 timer_generic.cc:341]       TIMER 0x61a00000fa88: SET 1134 now 134 call 0x61a00000f930[0x9815b0]\r\nD1211 17:06:02.579156296  243527 timer_generic.cc:377]         timer (0x61a00000fa88) .. add to shard 0 with queue_deadline_cap=1004 => is_first_timer=false\r\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx Timer 0x61a00000fa88 should fire after 1000 ms.\r\n\r\nI1211 17:06:02.579166838  243527 grpclb.cc:873]              after init re-re timer\r\nD1211 17:06:02.579180604  243527 grpclb.cc:1325]             [grpclb 0x61a00000f680] Connection to LB server lost...\r\nD1211 17:06:02.579192986  243527 grpclb.cc:1329]             [grpclb 0x61a00000f680] ... retry_timer_active in 1444ms.\r\nD1211 17:06:02.579203913  243527 timer_generic.cc:341]       TIMER 0x61a00000fa28: SET 1578 now 134 call 0x61a00000f890[0x98d390]\r\nD1211 17:06:02.579219826  243527 timer_generic.cc:377]         timer (0x61a00000fa28) .. add to shard 0 with queue_deadline_cap=1004 => is_first_timer=false\r\nI1211 17:06:02.579233495  243527 grpclb.cc:1857]             beginning of re-re cb\r\nI1211 17:06:02.579243354  243527 grpclb.cc:1869]             end of re-re cb\r\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx But the associated closure is invoked within 0.1 ms.\r\n\r\nD1211 17:06:02.579257860  243527 round_robin.cc:412]         [RR 0x60c00000ac00] connectivity changed for subchannel 0x616000005a80, subchannel_list 0x60800000e1a0: prev_state=IDLE new_state=CONNECTING p->base.shutting_down=0 sd->subchannel_list->shutting_down=0 error=\"No Error\"\r\nD1211 17:06:02.579274608  243527 subchannel_list.cc:62]      [round_robin 0x60c00000ac00] subchannel list 0x60800000e1a0 index 0 of 1 (subchannel 0x616000005a80): requesting connectivity change notification\r\nI1211 17:06:02.579292312  243527 grpclb.cc:643]              [grpclb 0x61a00000f680] Setting grpclb's state to CONNECTING from new RR policy 0x60c00000ac00 state.\r\nD1211 17:06:02.579340820  243527 timer_generic.cc:429]       TIMER 0x612000042c70: CANCEL pending=true\r\nE1211 17:06:02.579351332  243527 timer_generic.cc:168]       ** Removed timer (0x612000042c70)\r\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/350914223",
    "html_url": "https://github.com/grpc/grpc/pull/13671#issuecomment-350914223",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13671",
    "id": 350914223,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MDkxNDIyMw==",
    "user": {
      "login": "sreecha",
      "id": 2754995,
      "node_id": "MDQ6VXNlcjI3NTQ5OTU=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/2754995?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sreecha",
      "html_url": "https://github.com/sreecha",
      "followers_url": "https://api.github.com/users/sreecha/followers",
      "following_url": "https://api.github.com/users/sreecha/following{/other_user}",
      "gists_url": "https://api.github.com/users/sreecha/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sreecha/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sreecha/subscriptions",
      "organizations_url": "https://api.github.com/users/sreecha/orgs",
      "repos_url": "https://api.github.com/users/sreecha/repos",
      "events_url": "https://api.github.com/users/sreecha/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sreecha/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-12T01:23:30Z",
    "updated_at": "2017-12-12T01:23:30Z",
    "author_association": "CONTRIBUTOR",
    "body": "@AspirinSJL - yes, will take a look once you resolve the merge conflicts and update the PR."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/350914438",
    "html_url": "https://github.com/grpc/grpc/pull/13671#issuecomment-350914438",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13671",
    "id": 350914438,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MDkxNDQzOA==",
    "user": {
      "login": "grpc-testing",
      "id": 28024233,
      "node_id": "MDQ6VXNlcjI4MDI0MjMz",
      "avatar_url": "https://avatars1.githubusercontent.com/u/28024233?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-testing",
      "html_url": "https://github.com/grpc-testing",
      "followers_url": "https://api.github.com/users/grpc-testing/followers",
      "following_url": "https://api.github.com/users/grpc-testing/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-testing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-testing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-testing/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-testing/orgs",
      "repos_url": "https://api.github.com/users/grpc-testing/repos",
      "events_url": "https://api.github.com/users/grpc-testing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-testing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-12T01:24:40Z",
    "updated_at": "2017-12-12T01:24:40Z",
    "author_association": "NONE",
    "body": "```\n[trickle] No significant performance differences\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/350921637",
    "html_url": "https://github.com/grpc/grpc/pull/13671#issuecomment-350921637",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13671",
    "id": 350921637,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MDkyMTYzNw==",
    "user": {
      "login": "grpc-testing",
      "id": 28024233,
      "node_id": "MDQ6VXNlcjI4MDI0MjMz",
      "avatar_url": "https://avatars1.githubusercontent.com/u/28024233?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-testing",
      "html_url": "https://github.com/grpc-testing",
      "followers_url": "https://api.github.com/users/grpc-testing/followers",
      "following_url": "https://api.github.com/users/grpc-testing/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-testing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-testing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-testing/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-testing/orgs",
      "repos_url": "https://api.github.com/users/grpc-testing/repos",
      "events_url": "https://api.github.com/users/grpc-testing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-testing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-12T02:06:38Z",
    "updated_at": "2017-12-12T02:06:38Z",
    "author_association": "NONE",
    "body": "```\n[microbenchmarks] Performance differences noted:\nBenchmark                    allocs_per_iteration    atm_cas_per_iteration    cpu_time    real_time\n---------------------------  ----------------------  -----------------------  ----------  -----------\nBM_ClosureSched2OnExecCtx                                                     -6%         -6%\nBM_ErrorCreateAndSetStatus                                                    +17%        +17%\nBM_ErrorCreateAndSetStrLoop                                                   +76%        +76%\nBM_ErrorCreateFromStatic                                                      +14%        +14%\nBM_ErrorUnrefNone                                                             -5%         -5%\nBM_LameChannelCallCreateCpp  -60%                    -5%                      -20%        -20%\nBM_NoOpExecCtx                                                                +9%         +9%\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/350922024",
    "html_url": "https://github.com/grpc/grpc/pull/13671#issuecomment-350922024",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13671",
    "id": 350922024,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MDkyMjAyNA==",
    "user": {
      "login": "AspirinSJL",
      "id": 3314176,
      "node_id": "MDQ6VXNlcjMzMTQxNzY=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/3314176?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AspirinSJL",
      "html_url": "https://github.com/AspirinSJL",
      "followers_url": "https://api.github.com/users/AspirinSJL/followers",
      "following_url": "https://api.github.com/users/AspirinSJL/following{/other_user}",
      "gists_url": "https://api.github.com/users/AspirinSJL/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AspirinSJL/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AspirinSJL/subscriptions",
      "organizations_url": "https://api.github.com/users/AspirinSJL/orgs",
      "repos_url": "https://api.github.com/users/AspirinSJL/repos",
      "events_url": "https://api.github.com/users/AspirinSJL/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AspirinSJL/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-12T02:09:17Z",
    "updated_at": "2017-12-12T02:09:17Z",
    "author_association": "MEMBER",
    "body": "\n\n\n\nReview status: 5 of 9 files reviewed at latest revision, 4 unresolved discussions, some commit checks failed.\n\n---\n\n*[src/core/ext/filters/client_channel/lb_policy.h, line 209 at r2](https://reviewable.io:443/reviews/grpc/grpc/13671#-L-qtl83IE7-NZdgKGav:-L07LG93znlul0d-0IrJ:b-896fix) ([raw file](https://github.com/grpc/grpc/blob/d34a0ef98f473c374c786ca28a7e577c4fb18b83/src/core/ext/filters/client_channel/lb_policy.h#L209)):*\n<details><summary><i>Previously, markdroth (Mark D. Roth) wrote…</i></summary><blockquote>\n\nThis should still have the `_locked` suffix, because it still runs in the combiner.\n</blockquote></details>\n\nDone.\n\n---\n\n*[src/core/ext/filters/client_channel/lb_policy/grpclb/grpclb.cc, line 1052 at r1](https://reviewable.io:443/reviews/grpc/grpc/13671#-L-lkzZyh7aVqZE4A4M0:-L07Oms7bJSDmyur3d5h:bs7wumx) ([raw file](https://github.com/grpc/grpc/blob/3644b1aaf0a6b25a1336c7cb140fce106fad5fb3/src/core/ext/filters/client_channel/lb_policy/grpclb/grpclb.cc#L1052)):*\n<details><summary><i>Previously, markdroth (Mark D. Roth) wrote…</i></summary><blockquote>\n\nLet's do this opportunistically.  When you're working on a function anyway, if it has them, go ahead and remove them -- especially if you might be tempted to add more with your new code.\n</blockquote></details>\n\nDone. \n\n---\n\n*[src/core/ext/filters/client_channel/lb_policy/grpclb/grpclb.cc, line 1933 at r1](https://reviewable.io:443/reviews/grpc/grpc/13671#-L-lmcrnpSh4CJo7Iw-c:-L07TUd47IG5FmOaph9R:b-i0c7fd) ([raw file](https://github.com/grpc/grpc/blob/3644b1aaf0a6b25a1336c7cb140fce106fad5fb3/src/core/ext/filters/client_channel/lb_policy/grpclb/grpclb.cc#L1933)):*\n<details><summary><i>Previously, markdroth (Mark D. Roth) wrote…</i></summary><blockquote>\n\nI'd prefer not to move `shutting_down` to the base class, for two reasons.\n\nFirst, the shutdown code is too deeply embedded in the logic of each implementation.  I think it's generally a bad idea to have too much interaction between superclasses and subclasses, because it splits up the logic between them and makes it hard to follow.  In fact, the C++ style guide [discourages implementation inheritance](https://google.github.io/styleguide/cppguide.html#Inheritance) for exactly this reason.\n\nSecond, although all of our implementations currently use a simple bool to indicate shutting down, I could imagine other implementations that do something different.  I don't think it makes sense to tie ourselves to this one particular implementation.\n\nSo, here are the alternatives I see, in decreasing order of preference:\n\n- Leave this method in the base class, but drop the assertion about `shutting_down`, so that that field does not need to be moved to the base class.\n\n- Leave the method in the subclasses, even though they all basically have the same implementation.\n\n- Move the method to the base class but add a new vtable method that returns whether the LB policy is shutting down, and use that method to access the subclass's `shutting_down` value from the base class.\n</blockquote></details>\n\nDone. I choose solution 2. I think we should keep the assertion, even though we have some duplicate code.\n\n---\n\n*[src/core/ext/filters/client_channel/lb_policy/grpclb/grpclb.cc, line 883 at r2](https://reviewable.io:443/reviews/grpc/grpc/13671#-L-qv-Kr0KptzhEe5AcQ:-L07OaetS_VOINkuSBYB:b-896fix) ([raw file](https://github.com/grpc/grpc/blob/d34a0ef98f473c374c786ca28a7e577c4fb18b83/src/core/ext/filters/client_channel/lb_policy/grpclb/grpclb.cc#L883)):*\n<details><summary><i>Previously, markdroth (Mark D. Roth) wrote…</i></summary><blockquote>\n\n>   if (glb_policy->rr_state == GRPC_CHANNEL_TRANSIENT_FAILURE ||\n>       glb_policy->rr_state == GRPC_CHANNEL_IDLE) {\n\nCould just call `maybe_start_reresolution_timer()` unconditionally here, since the code in that function already checks this condition.\n</blockquote></details>\n\nDone.\n\n---\n\n\n*Comments from [Reviewable](https://reviewable.io:443/reviews/grpc/grpc/13671)*\n<!-- Sent from Reviewable.io -->\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/350925178",
    "html_url": "https://github.com/grpc/grpc/pull/13671#issuecomment-350925178",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13671",
    "id": 350925178,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MDkyNTE3OA==",
    "user": {
      "login": "grpc-testing",
      "id": 28024233,
      "node_id": "MDQ6VXNlcjI4MDI0MjMz",
      "avatar_url": "https://avatars1.githubusercontent.com/u/28024233?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-testing",
      "html_url": "https://github.com/grpc-testing",
      "followers_url": "https://api.github.com/users/grpc-testing/followers",
      "following_url": "https://api.github.com/users/grpc-testing/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-testing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-testing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-testing/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-testing/orgs",
      "repos_url": "https://api.github.com/users/grpc-testing/repos",
      "events_url": "https://api.github.com/users/grpc-testing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-testing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-12T02:29:11Z",
    "updated_at": "2017-12-12T02:29:11Z",
    "author_association": "NONE",
    "body": "```\n****************************************************************\n\nlibgrpc.so\n\n     VM SIZE                                                                      FILE SIZE\n ++++++++++++++ GROWING                                                        ++++++++++++++\n  +0.1%    +403 [None]                                                         +5.03Ki  +0.1%\n  +4.5%    +672 src/core/ext/filters/client_channel/lb_policy/grpclb/grpclb.cc    +672  +4.5%\n      [NEW]    +303 update_lb_connectivity_status_locked                              +303  [NEW]\n      [NEW]    +193 maybe_start_reresolution_timer                                    +193  [NEW]\n      [NEW]    +147 on_reresolution_requested_locked                                  +147  [NEW]\n       +14%    +136 glb_create                                                        +136   +14%\n       +16%     +95 glb_shutdown_locked                                                +95   +16%\n       +75%     +89 glb_rr_connectivity_changed_locked                                 +89   +75%\n      +5.9%     +77 lb_on_response_received_locked                                     +77  +5.9%\n      +4.6%     +19 [Unmapped]                                                         +19  +4.6%\n      +3.9%     +16 lb_on_server_status_received_locked                                +16  +3.9%\n\n -------------- SHRINKING                                                      --------------\n  -0.5%      -3 src/core/ext/filters/client_channel/lb_policy.cc                    -3  -0.5%\n      -1.7%      -3 grpc_lb_policy_try_reresolve                                        -3  -1.7%\n\n  +0.1% +1.05Ki TOTAL                                                          +5.68Ki  +0.1%\n\n\n****************************************************************\n\nlibgrpc++.so\n\n     VM SIZE        FILE SIZE\n ++++++++++++++  ++++++++++++++\n\n  [ = ]       0        0  [ = ]\n\n\n\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/350927212",
    "html_url": "https://github.com/grpc/grpc/pull/13671#issuecomment-350927212",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13671",
    "id": 350927212,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MDkyNzIxMg==",
    "user": {
      "login": "grpc-testing",
      "id": 28024233,
      "node_id": "MDQ6VXNlcjI4MDI0MjMz",
      "avatar_url": "https://avatars1.githubusercontent.com/u/28024233?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-testing",
      "html_url": "https://github.com/grpc-testing",
      "followers_url": "https://api.github.com/users/grpc-testing/followers",
      "following_url": "https://api.github.com/users/grpc-testing/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-testing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-testing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-testing/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-testing/orgs",
      "repos_url": "https://api.github.com/users/grpc-testing/repos",
      "events_url": "https://api.github.com/users/grpc-testing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-testing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-12T02:41:53Z",
    "updated_at": "2017-12-12T02:41:53Z",
    "author_association": "NONE",
    "body": "```\n[trickle] No significant performance differences\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/350933353",
    "html_url": "https://github.com/grpc/grpc/pull/13671#issuecomment-350933353",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13671",
    "id": 350933353,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MDkzMzM1Mw==",
    "user": {
      "login": "grpc-testing",
      "id": 28024233,
      "node_id": "MDQ6VXNlcjI4MDI0MjMz",
      "avatar_url": "https://avatars1.githubusercontent.com/u/28024233?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-testing",
      "html_url": "https://github.com/grpc-testing",
      "followers_url": "https://api.github.com/users/grpc-testing/followers",
      "following_url": "https://api.github.com/users/grpc-testing/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-testing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-testing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-testing/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-testing/orgs",
      "repos_url": "https://api.github.com/users/grpc-testing/repos",
      "events_url": "https://api.github.com/users/grpc-testing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-testing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-12T03:20:41Z",
    "updated_at": "2017-12-12T03:20:41Z",
    "author_association": "NONE",
    "body": "```\n[microbenchmarks] No significant performance differences\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/351106914",
    "html_url": "https://github.com/grpc/grpc/pull/13671#issuecomment-351106914",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13671",
    "id": 351106914,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MTEwNjkxNA==",
    "user": {
      "login": "markdroth",
      "id": 18664614,
      "node_id": "MDQ6VXNlcjE4NjY0NjE0",
      "avatar_url": "https://avatars2.githubusercontent.com/u/18664614?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/markdroth",
      "html_url": "https://github.com/markdroth",
      "followers_url": "https://api.github.com/users/markdroth/followers",
      "following_url": "https://api.github.com/users/markdroth/following{/other_user}",
      "gists_url": "https://api.github.com/users/markdroth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/markdroth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/markdroth/subscriptions",
      "organizations_url": "https://api.github.com/users/markdroth/orgs",
      "repos_url": "https://api.github.com/users/markdroth/repos",
      "events_url": "https://api.github.com/users/markdroth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/markdroth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-12T16:33:20Z",
    "updated_at": "2017-12-12T16:33:20Z",
    "author_association": "MEMBER",
    "body": "\n\n\n\nReviewed 6 of 9 files at r5.\nReview status: all files reviewed at latest revision, 7 unresolved discussions, some commit checks failed.\n\n---\n\n*[src/core/ext/filters/client_channel/lb_policy/grpclb/grpclb.cc, line 899 at r5](https://reviewable.io:443/reviews/grpc/grpc/13671#-L0AWstlvSWjVscw1UB_:-L0AWstlvSWjVscw1UBa:bywqjdf) ([raw file](https://github.com/grpc/grpc/blob/3f2b4df1f1aced68be39e8c88ff3458b3f4172b6/src/core/ext/filters/client_channel/lb_policy/grpclb/grpclb.cc#L899)):*\n> ```cpp\n>   }\n>   GPR_ASSERT(glb_policy->rr_state != GRPC_CHANNEL_SHUTDOWN);\n>   maybe_start_reresolution_timer(glb_policy);\n> ```\n\nSuggest moving this down to an `else` clause after the `if` block on the next line.\n\n---\n\n*[src/core/ext/filters/client_channel/lb_policy/grpclb/grpclb.cc, line 904 at r5](https://reviewable.io:443/reviews/grpc/grpc/13671#-L0AVv7VOuQPXw_tcZzL:-L0AVv7VOuQPXw_tcZzM:bdm63ak) ([raw file](https://github.com/grpc/grpc/blob/3f2b4df1f1aced68be39e8c88ff3458b3f4172b6/src/core/ext/filters/client_channel/lb_policy/grpclb/grpclb.cc#L904)):*\n> ```cpp\n>     gpr_log(GPR_INFO, \"before cancelling re-re timer\");\n>     grpc_timer_cancel(&glb_policy->reresolution_timer);\n>     glb_policy->reresolution_timer_active = false;\n> ```\n\nI suspect this is the cause of the timer bug you're trying to track down: We should not be setting `reresolution_timer_active` to false outside of the timer callback itself, because even once we call `grpc_timer_cancel()`, the callback could still be pending, and we can't reuse the `grpc_closure` object until the callback has actually been executed.\n\nI think this line should be removed.\n\n---\n\n*[src/core/ext/filters/client_channel/lb_policy/grpclb/grpclb.cc, line 1046 at r5](https://reviewable.io:443/reviews/grpc/grpc/13671#-L0AW7_uAhbfjDWw8Qkd:-L0AW7_uAhbfjDWw8Qke:brhumzt) ([raw file](https://github.com/grpc/grpc/blob/3f2b4df1f1aced68be39e8c88ff3458b3f4172b6/src/core/ext/filters/client_channel/lb_policy/grpclb/grpclb.cc#L1046)):*\n> ```cpp\n>     gpr_log(GPR_INFO, \"before cancelling re-re timer\");\n>     grpc_timer_cancel(&glb_policy->reresolution_timer);\n>     glb_policy->reresolution_timer_active = false;\n> ```\n\nSame here.\n\n---\n\n*[src/core/ext/filters/client_channel/lb_policy/grpclb/grpclb.cc, line 1679 at r5](https://reviewable.io:443/reviews/grpc/grpc/13671#-L0AWHpi6PrESl8wsXGB:-L0AWHpi6PrESl8wsXGC:brhumzt) ([raw file](https://github.com/grpc/grpc/blob/3f2b4df1f1aced68be39e8c88ff3458b3f4172b6/src/core/ext/filters/client_channel/lb_policy/grpclb/grpclb.cc#L1679)):*\n> ```cpp\n>               gpr_log(GPR_INFO, \"before cancelling re-re timer\");\n>               grpc_timer_cancel(&glb_policy->reresolution_timer);\n>               glb_policy->reresolution_timer_active = false;\n> ```\n\nSame here.\n\n---\n\n*[src/core/lib/iomgr/timer_generic.cc, line 168 at r5](https://reviewable.io:443/reviews/grpc/grpc/13671#-L0AUIod5D7ASsDw_tai:-L0AUIod5D7ASsDw_taj:bjqx0fe) ([raw file](https://github.com/grpc/grpc/blob/3f2b4df1f1aced68be39e8c88ff3458b3f4172b6/src/core/lib/iomgr/timer_generic.cc#L168)):*\n> ```cpp\n>     abort();\n>   } else {\n>     gpr_log(GPR_ERROR, \"** Removed timer (%p)\", t);\n> ```\n\nI assume this was added just for debugging purposes.  Please make sure to revert the changes to this file before this PR gets merged.\n\n---\n\n*[test/cpp/end2end/grpclb_end2end_test.cc, line 1141 at r5](https://reviewable.io:443/reviews/grpc/grpc/13671#-L0AYCzwFa337Pvs_DW9:-L0AYCzwFa337Pvs_DWA:b5ijizc) ([raw file](https://github.com/grpc/grpc/blob/3f2b4df1f1aced68be39e8c88ff3458b3f4172b6/test/cpp/end2end/grpclb_end2end_test.cc#L1141)):*\n> ```cpp\n>   addresses.emplace_back(AddressData{balancer_servers_[1].port_, true, \"\"});\n>   gpr_log(GPR_INFO, \"========= ABOUT TO UPDATE 1 ==========\");\n>   SetNextResolution(addresses);\n> ```\n\nThe goal of this test is to check the new functionality being added in this PR, which is that the grpclb policy will request reresolution.  However, if we're explicitly telling the fake resolver to return new data here, then this test doesn't actually cover that new functionality, because it would return the new data even if the grpclb policy did not request reresolution.\n\nI think that in order to test this, we need a way to set the fake resolver's `results_upon_error` member without setting its `next_results` member.  This will probably require adding a new method to `grpc_fake_resolver_response_generator`.\n\n---\n\n*[test/cpp/end2end/grpclb_end2end_test.cc, line 1171 at r5](https://reviewable.io:443/reviews/grpc/grpc/13671#-L0AY0TqFczdb4CP7sbC:-L0AY0TqFczdb4CP7sbD:b900g5v) ([raw file](https://github.com/grpc/grpc/blob/3f2b4df1f1aced68be39e8c88ff3458b3f4172b6/test/cpp/end2end/grpclb_end2end_test.cc#L1171)):*\n>   // Check LB policy name for the channel.\n>   EXPECT_EQ(\"grpclb\", channel_->GetLoadBalancingPolicyName());\n\nThis isn't necessary; it's already covered in various tests above.\n\n---\n\n\n*Comments from [Reviewable](https://reviewable.io:443/reviews/grpc/grpc/13671)*\n<!-- Sent from Reviewable.io -->\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/351538732",
    "html_url": "https://github.com/grpc/grpc/pull/13671#issuecomment-351538732",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13671",
    "id": 351538732,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MTUzODczMg==",
    "user": {
      "login": "AspirinSJL",
      "id": 3314176,
      "node_id": "MDQ6VXNlcjMzMTQxNzY=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/3314176?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AspirinSJL",
      "html_url": "https://github.com/AspirinSJL",
      "followers_url": "https://api.github.com/users/AspirinSJL/followers",
      "following_url": "https://api.github.com/users/AspirinSJL/following{/other_user}",
      "gists_url": "https://api.github.com/users/AspirinSJL/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AspirinSJL/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AspirinSJL/subscriptions",
      "organizations_url": "https://api.github.com/users/AspirinSJL/orgs",
      "repos_url": "https://api.github.com/users/AspirinSJL/repos",
      "events_url": "https://api.github.com/users/AspirinSJL/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AspirinSJL/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-13T21:59:42Z",
    "updated_at": "2017-12-13T21:59:42Z",
    "author_association": "MEMBER",
    "body": "\n\n\n\nReview status: all files reviewed at latest revision, 7 unresolved discussions, some commit checks failed.\n\n---\n\n*[src/core/ext/filters/client_channel/lb_policy/grpclb/grpclb.cc, line 899 at r5](https://reviewable.io:443/reviews/grpc/grpc/13671#-L0AWstlvSWjVscw1UB_:-L0Ap4qwT-rhR3Qz7J0v:b-896fix) ([raw file](https://github.com/grpc/grpc/blob/3f2b4df1f1aced68be39e8c88ff3458b3f4172b6/src/core/ext/filters/client_channel/lb_policy/grpclb/grpclb.cc#L899)):*\n<details><summary><i>Previously, markdroth (Mark D. Roth) wrote…</i></summary><blockquote>\n\nSuggest moving this down to an `else` clause after the `if` block on the next line.\n</blockquote></details>\n\nDone.\n\n---\n\n*[src/core/ext/filters/client_channel/lb_policy/grpclb/grpclb.cc, line 904 at r5](https://reviewable.io:443/reviews/grpc/grpc/13671#-L0AVv7VOuQPXw_tcZzL:-L0AvTCog8npIdfd16fR:bvljawa) ([raw file](https://github.com/grpc/grpc/blob/3f2b4df1f1aced68be39e8c88ff3458b3f4172b6/src/core/ext/filters/client_channel/lb_policy/grpclb/grpclb.cc#L904)):*\n<details><summary><i>Previously, markdroth (Mark D. Roth) wrote…</i></summary><blockquote>\n\nI suspect this is the cause of the timer bug you're trying to track down: We should not be setting `reresolution_timer_active` to false outside of the timer callback itself, because even once we call `grpc_timer_cancel()`, the callback could still be pending, and we can't reuse the `grpc_closure` object until the callback has actually been executed.\n\nI think this line should be removed.\n</blockquote></details>\n\nRight, this is the cause. Thanks! I will also delete the unnecessary `\n  glb_policy->retry_timer_active = false;` and `glb_policy->fallback_timer_active = false;`.\n\n---\n\n*[src/core/ext/filters/client_channel/lb_policy/grpclb/grpclb.cc, line 1046 at r5](https://reviewable.io:443/reviews/grpc/grpc/13671#-L0AW7_uAhbfjDWw8Qkd:-L0CGqkeYUk6UuwjrvFC:b-896fix) ([raw file](https://github.com/grpc/grpc/blob/3f2b4df1f1aced68be39e8c88ff3458b3f4172b6/src/core/ext/filters/client_channel/lb_policy/grpclb/grpclb.cc#L1046)):*\n<details><summary><i>Previously, markdroth (Mark D. Roth) wrote…</i></summary><blockquote>\n\nSame here.\n</blockquote></details>\n\nDone.\n\n---\n\n*[src/core/ext/filters/client_channel/lb_policy/grpclb/grpclb.cc, line 1679 at r5](https://reviewable.io:443/reviews/grpc/grpc/13671#-L0AWHpi6PrESl8wsXGB:-L0CGuQG4F3F-ISU189I:b-896fix) ([raw file](https://github.com/grpc/grpc/blob/3f2b4df1f1aced68be39e8c88ff3458b3f4172b6/src/core/ext/filters/client_channel/lb_policy/grpclb/grpclb.cc#L1679)):*\n<details><summary><i>Previously, markdroth (Mark D. Roth) wrote…</i></summary><blockquote>\n\nSame here.\n</blockquote></details>\n\nDone.\n\n---\n\n*[src/core/lib/iomgr/timer_generic.cc, line 168 at r5](https://reviewable.io:443/reviews/grpc/grpc/13671#-L0AUIod5D7ASsDw_tai:-L0AoLCi0mS6moiLZowd:b1xt89i) ([raw file](https://github.com/grpc/grpc/blob/3f2b4df1f1aced68be39e8c88ff3458b3f4172b6/src/core/lib/iomgr/timer_generic.cc#L168)):*\n<details><summary><i>Previously, markdroth (Mark D. Roth) wrote…</i></summary><blockquote>\n\nI assume this was added just for debugging purposes.  Please make sure to revert the changes to this file before this PR gets merged.\n</blockquote></details>\n\nYes, it's in the temp-logging commit. I will revert it before merging.\n\n---\n\n*[test/cpp/end2end/grpclb_end2end_test.cc, line 1141 at r5](https://reviewable.io:443/reviews/grpc/grpc/13671#-L0AYCzwFa337Pvs_DW9:-L0GsdnXncdkfkC4jcvr:b-4yj4k4) ([raw file](https://github.com/grpc/grpc/blob/3f2b4df1f1aced68be39e8c88ff3458b3f4172b6/test/cpp/end2end/grpclb_end2end_test.cc#L1141)):*\n<details><summary><i>Previously, markdroth (Mark D. Roth) wrote…</i></summary><blockquote>\n\nThe goal of this test is to check the new functionality being added in this PR, which is that the grpclb policy will request reresolution.  However, if we're explicitly telling the fake resolver to return new data here, then this test doesn't actually cover that new functionality, because it would return the new data even if the grpclb policy did not request reresolution.\n\nI think that in order to test this, we need a way to set the fake resolver's `results_upon_error` member without setting its `next_results` member.  This will probably require adding a new method to `grpc_fake_resolver_response_generator`.\n</blockquote></details>\n\nDone.\n\nAlso, I changed `grpc_fake_resolver_response_generator_set_response()` to synchronously set the normal response, because I don't see any reason to do it in an async way.  \n\n---\n\n*[test/cpp/end2end/grpclb_end2end_test.cc, line 1171 at r5](https://reviewable.io:443/reviews/grpc/grpc/13671#-L0AY0TqFczdb4CP7sbC:-L0CHP9qeYwx-2kQvBw1:b-i0esrr) ([raw file](https://github.com/grpc/grpc/blob/3f2b4df1f1aced68be39e8c88ff3458b3f4172b6/test/cpp/end2end/grpclb_end2end_test.cc#L1171)):*\n<details><summary><i>Previously, markdroth (Mark D. Roth) wrote…</i></summary><blockquote>\n\n>   // Check LB policy name for the channel.\n>   EXPECT_EQ(\"grpclb\", channel_->GetLoadBalancingPolicyName());\n\nThis isn't necessary; it's already covered in various tests above.\n</blockquote></details>\n\nDone. So only keeping one (Vanilla) is enough? I guess so because we will use grpclb as long as there is any balancer address, which is true for every test here. I am removing all of those except the Vanilla one.\n\n---\n\n\n*Comments from [Reviewable](https://reviewable.io:443/reviews/grpc/grpc/13671)*\n<!-- Sent from Reviewable.io -->\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/351539437",
    "html_url": "https://github.com/grpc/grpc/pull/13671#issuecomment-351539437",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13671",
    "id": 351539437,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MTUzOTQzNw==",
    "user": {
      "login": "grpc-testing",
      "id": 28024233,
      "node_id": "MDQ6VXNlcjI4MDI0MjMz",
      "avatar_url": "https://avatars1.githubusercontent.com/u/28024233?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-testing",
      "html_url": "https://github.com/grpc-testing",
      "followers_url": "https://api.github.com/users/grpc-testing/followers",
      "following_url": "https://api.github.com/users/grpc-testing/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-testing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-testing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-testing/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-testing/orgs",
      "repos_url": "https://api.github.com/users/grpc-testing/repos",
      "events_url": "https://api.github.com/users/grpc-testing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-testing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-13T22:02:14Z",
    "updated_at": "2017-12-13T22:02:14Z",
    "author_association": "NONE",
    "body": "```\n****************************************************************\n\nlibgrpc.so\n\n     VM SIZE                                                                          FILE SIZE\n ++++++++++++++ GROWING                                                            ++++++++++++++\n  +2.4%    +352 src/core/ext/filters/client_channel/lb_policy/grpclb/grpclb.cc        +352  +2.4%\n      [NEW]    +303 update_lb_connectivity_status_locked                                  +303  [NEW]\n       +14%    +136 glb_create                                                            +136   +14%\n      [NEW]    +131 maybe_start_reresolution_timer                                        +131  [NEW]\n      [NEW]     +72 on_reresolution_requested_locked                                       +72  [NEW]\n       +48%     +57 glb_rr_connectivity_changed_locked                                     +57   +48%\n      +1.7%     +22 lb_on_response_received_locked                                         +22  +1.7%\n      +3.9%     +16 lb_on_server_status_received_locked                                    +16  +3.9%\n      +3.1%     +13 [Unmapped]                                                             +13  +3.1%\n      +2.0%     +12 glb_shutdown_locked                                                    +12  +2.0%\n\n -------------- SHRINKING                                                          --------------\n  -1.3%     -16 src/core/ext/filters/client_channel/resolver/fake/fake_resolver.cc     -16  -1.3%\n      [DEL]    -138 grpc_fake_resolver_response_generator_set_response                    -138  [DEL]\n      [DEL]     -90 set_response_closure_fn                                                -90  [DEL]\n      -3.7%      -8 [Unmapped]                                                              -8  -3.7%\n  -0.5%      -3 src/core/ext/filters/client_channel/lb_policy.cc                        -3  -0.5%\n      -1.7%      -3 grpc_lb_policy_try_reresolve                                            -3  -1.7%\n\n -+-+-+-+-+-+-+ MIXED                                                              +-+-+-+-+-+-+-\n  +0.0%    +187 [None]                                                                -117  -0.0%\n\n  +0.0%    +520 TOTAL                                                                 +216  +0.0%\n\n\n****************************************************************\n\nlibgrpc++.so\n\n     VM SIZE        FILE SIZE\n ++++++++++++++  ++++++++++++++\n\n  [ = ]       0        0  [ = ]\n\n\n\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/351540415",
    "html_url": "https://github.com/grpc/grpc/pull/13671#issuecomment-351540415",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13671",
    "id": 351540415,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MTU0MDQxNQ==",
    "user": {
      "login": "grpc-testing",
      "id": 28024233,
      "node_id": "MDQ6VXNlcjI4MDI0MjMz",
      "avatar_url": "https://avatars1.githubusercontent.com/u/28024233?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-testing",
      "html_url": "https://github.com/grpc-testing",
      "followers_url": "https://api.github.com/users/grpc-testing/followers",
      "following_url": "https://api.github.com/users/grpc-testing/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-testing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-testing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-testing/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-testing/orgs",
      "repos_url": "https://api.github.com/users/grpc-testing/repos",
      "events_url": "https://api.github.com/users/grpc-testing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-testing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-13T22:06:06Z",
    "updated_at": "2017-12-13T22:06:06Z",
    "author_association": "NONE",
    "body": "```\n****************************************************************\n\nlibgrpc.so\n\n     VM SIZE                                                                          FILE SIZE\n ++++++++++++++ GROWING                                                            ++++++++++++++\n  +2.4%    +352 src/core/ext/filters/client_channel/lb_policy/grpclb/grpclb.cc        +352  +2.4%\n      [NEW]    +303 update_lb_connectivity_status_locked                                  +303  [NEW]\n       +14%    +136 glb_create                                                            +136   +14%\n      [NEW]    +131 maybe_start_reresolution_timer                                        +131  [NEW]\n      [NEW]     +72 on_reresolution_requested_locked                                       +72  [NEW]\n       +48%     +57 glb_rr_connectivity_changed_locked                                     +57   +48%\n      +1.7%     +22 lb_on_response_received_locked                                         +22  +1.7%\n      +3.9%     +16 lb_on_server_status_received_locked                                    +16  +3.9%\n      +3.1%     +13 [Unmapped]                                                             +13  +3.1%\n      +2.0%     +12 glb_shutdown_locked                                                    +12  +2.0%\n\n -------------- SHRINKING                                                          --------------\n  -1.3%     -16 src/core/ext/filters/client_channel/resolver/fake/fake_resolver.cc     -16  -1.3%\n      [DEL]    -138 grpc_fake_resolver_response_generator_set_response                    -138  [DEL]\n      [DEL]     -90 set_response_closure_fn                                                -90  [DEL]\n      -3.7%      -8 [Unmapped]                                                              -8  -3.7%\n  -0.5%      -3 src/core/ext/filters/client_channel/lb_policy.cc                        -3  -0.5%\n      -1.7%      -3 grpc_lb_policy_try_reresolve                                            -3  -1.7%\n\n -+-+-+-+-+-+-+ MIXED                                                              +-+-+-+-+-+-+-\n  +0.0%    +187 [None]                                                                -117  -0.0%\n\n  +0.0%    +520 TOTAL                                                                 +216  +0.0%\n\n\n****************************************************************\n\nlibgrpc++.so\n\n     VM SIZE        FILE SIZE\n ++++++++++++++  ++++++++++++++\n\n  [ = ]       0        0  [ = ]\n\n\n\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/351540992",
    "html_url": "https://github.com/grpc/grpc/pull/13671#issuecomment-351540992",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13671",
    "id": 351540992,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MTU0MDk5Mg==",
    "user": {
      "login": "grpc-testing",
      "id": 28024233,
      "node_id": "MDQ6VXNlcjI4MDI0MjMz",
      "avatar_url": "https://avatars1.githubusercontent.com/u/28024233?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-testing",
      "html_url": "https://github.com/grpc-testing",
      "followers_url": "https://api.github.com/users/grpc-testing/followers",
      "following_url": "https://api.github.com/users/grpc-testing/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-testing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-testing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-testing/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-testing/orgs",
      "repos_url": "https://api.github.com/users/grpc-testing/repos",
      "events_url": "https://api.github.com/users/grpc-testing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-testing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-13T22:08:26Z",
    "updated_at": "2017-12-13T22:08:26Z",
    "author_association": "NONE",
    "body": "```\n****************************************************************\n\nlibgrpc.so\n\n     VM SIZE                                                                          FILE SIZE\n ++++++++++++++ GROWING                                                            ++++++++++++++\n  +2.4%    +352 src/core/ext/filters/client_channel/lb_policy/grpclb/grpclb.cc        +352  +2.4%\n      [NEW]    +303 update_lb_connectivity_status_locked                                  +303  [NEW]\n       +14%    +136 glb_create                                                            +136   +14%\n      [NEW]    +131 maybe_start_reresolution_timer                                        +131  [NEW]\n      [NEW]     +72 on_reresolution_requested_locked                                       +72  [NEW]\n       +48%     +57 glb_rr_connectivity_changed_locked                                     +57   +48%\n      +1.7%     +22 lb_on_response_received_locked                                         +22  +1.7%\n      +3.9%     +16 lb_on_server_status_received_locked                                    +16  +3.9%\n      +3.1%     +13 [Unmapped]                                                             +13  +3.1%\n      +2.0%     +12 glb_shutdown_locked                                                    +12  +2.0%\n\n -------------- SHRINKING                                                          --------------\n  -1.3%     -16 src/core/ext/filters/client_channel/resolver/fake/fake_resolver.cc     -16  -1.3%\n      [DEL]    -138 grpc_fake_resolver_response_generator_set_response                    -138  [DEL]\n      [DEL]     -90 set_response_closure_fn                                                -90  [DEL]\n      -3.7%      -8 [Unmapped]                                                              -8  -3.7%\n  -0.5%      -3 src/core/ext/filters/client_channel/lb_policy.cc                        -3  -0.5%\n      -1.7%      -3 grpc_lb_policy_try_reresolve                                            -3  -1.7%\n\n -+-+-+-+-+-+-+ MIXED                                                              +-+-+-+-+-+-+-\n  +0.0%    +187 [None]                                                                -117  -0.0%\n\n  +0.0%    +520 TOTAL                                                                 +216  +0.0%\n\n\n****************************************************************\n\nlibgrpc++.so\n\n     VM SIZE        FILE SIZE\n ++++++++++++++  ++++++++++++++\n\n  [ = ]       0        0  [ = ]\n\n\n\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/351542402",
    "html_url": "https://github.com/grpc/grpc/pull/13671#issuecomment-351542402",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13671",
    "id": 351542402,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MTU0MjQwMg==",
    "user": {
      "login": "grpc-testing",
      "id": 28024233,
      "node_id": "MDQ6VXNlcjI4MDI0MjMz",
      "avatar_url": "https://avatars1.githubusercontent.com/u/28024233?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-testing",
      "html_url": "https://github.com/grpc-testing",
      "followers_url": "https://api.github.com/users/grpc-testing/followers",
      "following_url": "https://api.github.com/users/grpc-testing/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-testing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-testing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-testing/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-testing/orgs",
      "repos_url": "https://api.github.com/users/grpc-testing/repos",
      "events_url": "https://api.github.com/users/grpc-testing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-testing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-13T22:14:15Z",
    "updated_at": "2017-12-13T22:14:15Z",
    "author_association": "NONE",
    "body": "```\n[trickle] No significant performance differences\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/351543246",
    "html_url": "https://github.com/grpc/grpc/pull/13671#issuecomment-351543246",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13671",
    "id": 351543246,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MTU0MzI0Ng==",
    "user": {
      "login": "grpc-testing",
      "id": 28024233,
      "node_id": "MDQ6VXNlcjI4MDI0MjMz",
      "avatar_url": "https://avatars1.githubusercontent.com/u/28024233?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-testing",
      "html_url": "https://github.com/grpc-testing",
      "followers_url": "https://api.github.com/users/grpc-testing/followers",
      "following_url": "https://api.github.com/users/grpc-testing/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-testing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-testing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-testing/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-testing/orgs",
      "repos_url": "https://api.github.com/users/grpc-testing/repos",
      "events_url": "https://api.github.com/users/grpc-testing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-testing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-13T22:18:00Z",
    "updated_at": "2017-12-13T22:18:00Z",
    "author_association": "NONE",
    "body": "```\n[trickle] No significant performance differences\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/351543351",
    "html_url": "https://github.com/grpc/grpc/pull/13671#issuecomment-351543351",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13671",
    "id": 351543351,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MTU0MzM1MQ==",
    "user": {
      "login": "grpc-testing",
      "id": 28024233,
      "node_id": "MDQ6VXNlcjI4MDI0MjMz",
      "avatar_url": "https://avatars1.githubusercontent.com/u/28024233?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-testing",
      "html_url": "https://github.com/grpc-testing",
      "followers_url": "https://api.github.com/users/grpc-testing/followers",
      "following_url": "https://api.github.com/users/grpc-testing/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-testing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-testing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-testing/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-testing/orgs",
      "repos_url": "https://api.github.com/users/grpc-testing/repos",
      "events_url": "https://api.github.com/users/grpc-testing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-testing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-13T22:18:30Z",
    "updated_at": "2017-12-13T22:18:30Z",
    "author_association": "NONE",
    "body": "```\n[trickle] No significant performance differences\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/351550886",
    "html_url": "https://github.com/grpc/grpc/pull/13671#issuecomment-351550886",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13671",
    "id": 351550886,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MTU1MDg4Ng==",
    "user": {
      "login": "grpc-testing",
      "id": 28024233,
      "node_id": "MDQ6VXNlcjI4MDI0MjMz",
      "avatar_url": "https://avatars1.githubusercontent.com/u/28024233?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-testing",
      "html_url": "https://github.com/grpc-testing",
      "followers_url": "https://api.github.com/users/grpc-testing/followers",
      "following_url": "https://api.github.com/users/grpc-testing/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-testing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-testing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-testing/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-testing/orgs",
      "repos_url": "https://api.github.com/users/grpc-testing/repos",
      "events_url": "https://api.github.com/users/grpc-testing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-testing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-13T22:51:12Z",
    "updated_at": "2017-12-13T22:51:12Z",
    "author_association": "NONE",
    "body": "```\n****************************************************************\n\nlibgrpc.so\n\n     VM SIZE                                                                          FILE SIZE\n ++++++++++++++ GROWING                                                            ++++++++++++++\n  +2.4%    +352 src/core/ext/filters/client_channel/lb_policy/grpclb/grpclb.cc        +352  +2.4%\n      [NEW]    +303 update_lb_connectivity_status_locked                                  +303  [NEW]\n       +14%    +136 glb_create                                                            +136   +14%\n      [NEW]    +131 maybe_start_reresolution_timer                                        +131  [NEW]\n      [NEW]     +72 on_reresolution_requested_locked                                       +72  [NEW]\n       +48%     +57 glb_rr_connectivity_changed_locked                                     +57   +48%\n      +1.7%     +22 lb_on_response_received_locked                                         +22  +1.7%\n      +3.9%     +16 lb_on_server_status_received_locked                                    +16  +3.9%\n      +3.1%     +13 [Unmapped]                                                             +13  +3.1%\n      +2.0%     +12 glb_shutdown_locked                                                    +12  +2.0%\n\n -------------- SHRINKING                                                          --------------\n  -1.3%     -16 src/core/ext/filters/client_channel/resolver/fake/fake_resolver.cc     -16  -1.3%\n      [DEL]    -138 grpc_fake_resolver_response_generator_set_response                    -138  [DEL]\n      [DEL]     -90 set_response_closure_fn                                                -90  [DEL]\n      -3.7%      -8 [Unmapped]                                                              -8  -3.7%\n  -0.5%      -3 src/core/ext/filters/client_channel/lb_policy.cc                        -3  -0.5%\n      -1.7%      -3 grpc_lb_policy_try_reresolve                                            -3  -1.7%\n\n -+-+-+-+-+-+-+ MIXED                                                              +-+-+-+-+-+-+-\n  +0.0%    +187 [None]                                                                -117  -0.0%\n\n  +0.0%    +520 TOTAL                                                                 +216  +0.0%\n\n\n****************************************************************\n\nlibgrpc++.so\n\n     VM SIZE        FILE SIZE\n ++++++++++++++  ++++++++++++++\n\n  [ = ]       0        0  [ = ]\n\n\n\n```"
  }
]
