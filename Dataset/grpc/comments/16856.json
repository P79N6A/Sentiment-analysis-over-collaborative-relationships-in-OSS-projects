[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/450967501",
    "html_url": "https://github.com/grpc/grpc/issues/16856#issuecomment-450967501",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/16856",
    "id": 450967501,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MDk2NzUwMQ==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-02T19:56:30Z",
    "updated_at": "2019-01-02T19:56:30Z",
    "author_association": "CONTRIBUTOR",
    "body": "I'm not sure if we wan't to fragment the installation to support both values of `gRPC_BUILD_CODEGEN` (it adds extra complexity). What is the motivation for building with gRPC_BUILD_CODEGEN=OFF?"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/450969021",
    "html_url": "https://github.com/grpc/grpc/issues/16856#issuecomment-450969021",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/16856",
    "id": 450969021,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MDk2OTAyMQ==",
    "user": {
      "login": "sagamusix",
      "id": 875883,
      "node_id": "MDQ6VXNlcjg3NTg4Mw==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/875883?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sagamusix",
      "html_url": "https://github.com/sagamusix",
      "followers_url": "https://api.github.com/users/sagamusix/followers",
      "following_url": "https://api.github.com/users/sagamusix/following{/other_user}",
      "gists_url": "https://api.github.com/users/sagamusix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sagamusix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sagamusix/subscriptions",
      "organizations_url": "https://api.github.com/users/sagamusix/orgs",
      "repos_url": "https://api.github.com/users/sagamusix/repos",
      "events_url": "https://api.github.com/users/sagamusix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sagamusix/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-02T20:02:15Z",
    "updated_at": "2019-01-02T20:02:15Z",
    "author_association": "NONE",
    "body": "From what I remember, without `gRPC_BUILD_CODEGEN=OFF`, various targets don't (or didn't at the time this was reported) compile when cross-compiling e.g. for iOS arm64 on Darwin x64."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/466823717",
    "html_url": "https://github.com/grpc/grpc/issues/16856#issuecomment-466823717",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/16856",
    "id": 466823717,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2NjgyMzcxNw==",
    "user": {
      "login": "JonasVautherin",
      "id": 2606672,
      "node_id": "MDQ6VXNlcjI2MDY2NzI=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/2606672?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JonasVautherin",
      "html_url": "https://github.com/JonasVautherin",
      "followers_url": "https://api.github.com/users/JonasVautherin/followers",
      "following_url": "https://api.github.com/users/JonasVautherin/following{/other_user}",
      "gists_url": "https://api.github.com/users/JonasVautherin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JonasVautherin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JonasVautherin/subscriptions",
      "organizations_url": "https://api.github.com/users/JonasVautherin/orgs",
      "repos_url": "https://api.github.com/users/JonasVautherin/repos",
      "events_url": "https://api.github.com/users/JonasVautherin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JonasVautherin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-24T22:23:24Z",
    "updated_at": "2019-02-24T22:23:24Z",
    "author_association": "CONTRIBUTOR",
    "body": "> I'm not sure if we wan't to fragment the installation to support both values of `gRPC_BUILD_CODEGEN`\r\n\r\nI still need `gRPC_BUILD_CODEGEN=OFF` at least for Android (I can confirm that for iOS if you want).\r\n\r\nBut anyway I believe this is a bug: `gRPC_BUILD_CODEGEN=OFF` disable some builds, but not the corresponding installs.\r\n\r\n> From what I remember, without `gRPC_BUILD_CODEGEN=OFF`, various targets don't (or didn't at the time this was reported) compile when cross-compiling e.g. for iOS arm64 on Darwin x64.\r\n\r\nYes, and Android as well, as far as I remember (it was around a year ago). I believe the idea was that Android/iOS don't really need to generate the code (i.e. the code is cross-compiled from a system that builds the codegen plugins). So it is valid to disable `gRPC_BUILD_CODEGEN` in those cases. That's my use-case at least."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/471029320",
    "html_url": "https://github.com/grpc/grpc/issues/16856#issuecomment-471029320",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/16856",
    "id": 471029320,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3MTAyOTMyMA==",
    "user": {
      "login": "JonasVautherin",
      "id": 2606672,
      "node_id": "MDQ6VXNlcjI2MDY2NzI=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/2606672?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JonasVautherin",
      "html_url": "https://github.com/JonasVautherin",
      "followers_url": "https://api.github.com/users/JonasVautherin/followers",
      "following_url": "https://api.github.com/users/JonasVautherin/following{/other_user}",
      "gists_url": "https://api.github.com/users/JonasVautherin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JonasVautherin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JonasVautherin/subscriptions",
      "organizations_url": "https://api.github.com/users/JonasVautherin/orgs",
      "repos_url": "https://api.github.com/users/JonasVautherin/repos",
      "events_url": "https://api.github.com/users/JonasVautherin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JonasVautherin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-08T18:31:07Z",
    "updated_at": "2019-03-08T18:31:07Z",
    "author_association": "CONTRIBUTOR",
    "body": "After investigation, what I can see is that in CMakeLists.txt.template, [`<%def name=\"cc_library(lib)\">`](https://github.com/grpc/grpc/blob/master/templates/CMakeLists.txt.template#L373) conditionally sets [`if (gRPC_BUILD_CODEGEN)`](https://github.com/grpc/grpc/blob/master/templates/CMakeLists.txt.template#L375) and [`endif (gRPC_BUILD_CODEGEN)`](https://github.com/grpc/grpc/blob/master/templates/CMakeLists.txt.template#L471).\r\n\r\nHowever, [in the places where `cc_library(...)` is used](https://github.com/grpc/grpc/blob/master/templates/CMakeLists.txt.template#L327-L341), it is [sometimes](https://github.com/grpc/grpc/blob/master/templates/CMakeLists.txt.template#L334) [used](https://github.com/grpc/grpc/blob/master/templates/CMakeLists.txt.template#L339) in conjunction with `cc_install(...)`. Consequently, it seems to me like `cc_install(...)` should also conditionally disable `gRPC_BUILD_CODEGEN`.\r\n\r\nI am proposing a fix in #18151."
  }
]
