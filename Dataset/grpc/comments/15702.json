[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/396350021",
    "html_url": "https://github.com/grpc/grpc/issues/15702#issuecomment-396350021",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15702",
    "id": 396350021,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NjM1MDAyMQ==",
    "user": {
      "login": "ncteisen",
      "id": 6148140,
      "node_id": "MDQ6VXNlcjYxNDgxNDA=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/6148140?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ncteisen",
      "html_url": "https://github.com/ncteisen",
      "followers_url": "https://api.github.com/users/ncteisen/followers",
      "following_url": "https://api.github.com/users/ncteisen/following{/other_user}",
      "gists_url": "https://api.github.com/users/ncteisen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ncteisen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ncteisen/subscriptions",
      "organizations_url": "https://api.github.com/users/ncteisen/orgs",
      "repos_url": "https://api.github.com/users/ncteisen/repos",
      "events_url": "https://api.github.com/users/ncteisen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ncteisen/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-11T18:59:40Z",
    "updated_at": "2018-06-11T18:59:40Z",
    "author_association": "CONTRIBUTOR",
    "body": "Can you provide a reproduction for this bug? Perhaps by adding to our C++ end2end suite?"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/396791302",
    "html_url": "https://github.com/grpc/grpc/issues/15702#issuecomment-396791302",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15702",
    "id": 396791302,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5Njc5MTMwMg==",
    "user": {
      "login": "fancl20",
      "id": 1303431,
      "node_id": "MDQ6VXNlcjEzMDM0MzE=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1303431?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fancl20",
      "html_url": "https://github.com/fancl20",
      "followers_url": "https://api.github.com/users/fancl20/followers",
      "following_url": "https://api.github.com/users/fancl20/following{/other_user}",
      "gists_url": "https://api.github.com/users/fancl20/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fancl20/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fancl20/subscriptions",
      "organizations_url": "https://api.github.com/users/fancl20/orgs",
      "repos_url": "https://api.github.com/users/fancl20/repos",
      "events_url": "https://api.github.com/users/fancl20/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fancl20/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-13T02:13:17Z",
    "updated_at": "2018-06-13T12:33:12Z",
    "author_association": "NONE",
    "body": "Trigger this seems similar to unplug the network cable. Maybe the network/connection goes down before/after sending the cancel op? Still trying to find out the problem.\r\n\r\n**UPDATE:**\r\n\r\nDeadline set to 200ms later and request blocked 10s.\r\n```\r\nD0612 21:41:24.352468220   37591 stream_lists.cc:69]         0x2884000[5785][cli]: pop from writable\r\nD0612 21:41:24.352472404   37591 writing.cc:400]             W:0x2884000 CLIENT[5785] im-(sent,send)=(0,1) announce=5\r\nD0612 21:41:24.352550726   37591 flow_control.cc:108]        0x2887af8[5785][cli] | s updt sent | trw:                       3939400, ttw:            4195084 -> 4195089, taw:                       4196824, srw:                       4194304, slw:                       4194309, saw:                       4194304\r\nD0612 21:41:24.352558285   37591 flow_control.cc:108]        0x2887af8[5785][cli] |   data sent | trw:            3939400 -> 3939271, ttw:                       4195089, taw:                       4196824, srw:            4194304 -> 4194175, slw:                       4194309, saw:                       4194309\r\nD0612 21:41:24.352570350   37591 stream_lists.cc:123]        0x2884000[5785][cli]: add to writing\r\n```\r\nAnd after writing coredump, connection reset by peer triggered.\r\n```\r\nD0612 21:41:34.151627847   38144 stream_lists.cc:69]         0x2884000[5785][cli]: pop from writing\r\n``` \r\nSo it may related to tcp write buffer filled and write blocked. Does call blocked until sending cancel op success?\r\n\r\nMaybe similar to https://github.com/grpc/grpc-go/pull/1498/files\r\n\r\n**UPDATE2:**\r\n\r\nEven set GRPC_ARG_KEEPALIVE_TIME_MS (100ms)  and GRPC_ARG_KEEPALIVE_TIMEOUT_MS (50ms) didn't avoid request hung 10s."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/397026280",
    "html_url": "https://github.com/grpc/grpc/issues/15702#issuecomment-397026280",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15702",
    "id": 397026280,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NzAyNjI4MA==",
    "user": {
      "login": "ncteisen",
      "id": 6148140,
      "node_id": "MDQ6VXNlcjYxNDgxNDA=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/6148140?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ncteisen",
      "html_url": "https://github.com/ncteisen",
      "followers_url": "https://api.github.com/users/ncteisen/followers",
      "following_url": "https://api.github.com/users/ncteisen/following{/other_user}",
      "gists_url": "https://api.github.com/users/ncteisen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ncteisen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ncteisen/subscriptions",
      "organizations_url": "https://api.github.com/users/ncteisen/orgs",
      "repos_url": "https://api.github.com/users/ncteisen/repos",
      "events_url": "https://api.github.com/users/ncteisen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ncteisen/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-13T17:48:07Z",
    "updated_at": "2018-06-13T17:48:07Z",
    "author_association": "CONTRIBUTOR",
    "body": "Can you try running and setting GRPC_CLIENT_CHANNEL_BACKUP_POLL_INTERVAL_MS? See https://github.com/grpc/grpc/blob/master/doc/environment_variables.md for more details on that"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/397208721",
    "html_url": "https://github.com/grpc/grpc/issues/15702#issuecomment-397208721",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15702",
    "id": 397208721,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NzIwODcyMQ==",
    "user": {
      "login": "fancl20",
      "id": 1303431,
      "node_id": "MDQ6VXNlcjEzMDM0MzE=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1303431?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fancl20",
      "html_url": "https://github.com/fancl20",
      "followers_url": "https://api.github.com/users/fancl20/followers",
      "following_url": "https://api.github.com/users/fancl20/following{/other_user}",
      "gists_url": "https://api.github.com/users/fancl20/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fancl20/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fancl20/subscriptions",
      "organizations_url": "https://api.github.com/users/fancl20/orgs",
      "repos_url": "https://api.github.com/users/fancl20/repos",
      "events_url": "https://api.github.com/users/fancl20/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fancl20/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-14T08:07:11Z",
    "updated_at": "2018-06-14T08:07:53Z",
    "author_association": "NONE",
    "body": "GRPC_CLIENT_CHANNEL_BACKUP_POLL_INTERVAL_MS seems to work. The bug still can't stable reproduced so I am not sure it works."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/397313583",
    "html_url": "https://github.com/grpc/grpc/issues/15702#issuecomment-397313583",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15702",
    "id": 397313583,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NzMxMzU4Mw==",
    "user": {
      "login": "ncteisen",
      "id": 6148140,
      "node_id": "MDQ6VXNlcjYxNDgxNDA=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/6148140?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ncteisen",
      "html_url": "https://github.com/ncteisen",
      "followers_url": "https://api.github.com/users/ncteisen/followers",
      "following_url": "https://api.github.com/users/ncteisen/following{/other_user}",
      "gists_url": "https://api.github.com/users/ncteisen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ncteisen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ncteisen/subscriptions",
      "organizations_url": "https://api.github.com/users/ncteisen/orgs",
      "repos_url": "https://api.github.com/users/ncteisen/repos",
      "events_url": "https://api.github.com/users/ncteisen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ncteisen/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-14T14:21:24Z",
    "updated_at": "2018-06-14T14:21:24Z",
    "author_association": "CONTRIBUTOR",
    "body": "Sounds good, I will close for now. \r\n\r\nThis solution obviously has a race condition (if a server restarts, and then client makes another RPC before the backup poll occurs). This is something that will eventually be fixed by [transparent retries](https://github.com/grpc/proposal/blob/master/A6-client-retries.md#transparent-retries)"
  }
]
