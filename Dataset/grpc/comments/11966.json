[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/329620030",
    "html_url": "https://github.com/grpc/grpc/issues/11966#issuecomment-329620030",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11966",
    "id": 329620030,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyOTYyMDAzMA==",
    "user": {
      "login": "nathanielmanistaatgoogle",
      "id": 10131044,
      "node_id": "MDQ6VXNlcjEwMTMxMDQ0",
      "avatar_url": "https://avatars0.githubusercontent.com/u/10131044?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nathanielmanistaatgoogle",
      "html_url": "https://github.com/nathanielmanistaatgoogle",
      "followers_url": "https://api.github.com/users/nathanielmanistaatgoogle/followers",
      "following_url": "https://api.github.com/users/nathanielmanistaatgoogle/following{/other_user}",
      "gists_url": "https://api.github.com/users/nathanielmanistaatgoogle/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nathanielmanistaatgoogle/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nathanielmanistaatgoogle/subscriptions",
      "organizations_url": "https://api.github.com/users/nathanielmanistaatgoogle/orgs",
      "repos_url": "https://api.github.com/users/nathanielmanistaatgoogle/repos",
      "events_url": "https://api.github.com/users/nathanielmanistaatgoogle/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nathanielmanistaatgoogle/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-14T21:55:55Z",
    "updated_at": "2017-09-14T21:55:55Z",
    "author_association": "MEMBER",
    "body": "Thank you for the report. A flow control bug would be both very surprising and very concerning.\r\n\r\nAre you able to reproduce the problem with [our recent metadata leak fix](https://github.com/grpc/grpc/pull/12466) patched in?\r\n\r\nIf you run with the `GRPC_TRACE=all` and `GRPC_VERBOSITY=DEBUG` environment variables are you able to draw any further insights into what might be happening?"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/329922550",
    "html_url": "https://github.com/grpc/grpc/issues/11966#issuecomment-329922550",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11966",
    "id": 329922550,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyOTkyMjU1MA==",
    "user": {
      "login": "wjackson",
      "id": 315342,
      "node_id": "MDQ6VXNlcjMxNTM0Mg==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/315342?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wjackson",
      "html_url": "https://github.com/wjackson",
      "followers_url": "https://api.github.com/users/wjackson/followers",
      "following_url": "https://api.github.com/users/wjackson/following{/other_user}",
      "gists_url": "https://api.github.com/users/wjackson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wjackson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wjackson/subscriptions",
      "organizations_url": "https://api.github.com/users/wjackson/orgs",
      "repos_url": "https://api.github.com/users/wjackson/repos",
      "events_url": "https://api.github.com/users/wjackson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wjackson/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-15T22:59:26Z",
    "updated_at": "2017-09-19T23:14:32Z",
    "author_association": "CONTRIBUTOR",
    "body": "Sadly #12466 didn't fix this issue. I may have found the problem commit though.\r\n\r\nI created the test below and bisected. That identified this commit: f036076 *Fix flow control problem*.  I verified that if I revert that on the v1.4.x branch the problem goes away. \r\n\r\nI don't think I have enough context to try to fix `chttp2_transport.c` in it's current form so hopefully someone else can have a look.\r\n\r\nHere's the test I used for bisecting:\r\n\r\n```python\r\nimport sys\r\nfrom concurrent import futures\r\nimport time\r\nimport grpc\r\nimport route_guide_pb2\r\nimport route_guide_pb2_grpc\r\n\r\nsent_count = 0\r\nrecv_count = 0\r\n\r\nclass RouteGuideServicer(route_guide_pb2_grpc.RouteGuideServicer):\r\n    def RouteChat(self, request_iterator, context):\r\n        global sent_count\r\n        while True:\r\n            yield route_guide_pb2.RouteNote(\r\n                message = \"X\" * (32*1024),\r\n            )\r\n            sent_count += 1\r\n\r\ndef server():\r\n    server = grpc.server(futures.ThreadPoolExecutor(max_workers=10))\r\n    route_guide_pb2_grpc.add_RouteGuideServicer_to_server(\r\n            RouteGuideServicer(), server)\r\n    server.add_insecure_port('[::]:50051')\r\n    server.start()\r\n    return server\r\n\r\ndef run_client():\r\n    global recv_count\r\n    channel = grpc.insecure_channel('localhost:50051')\r\n    stub = route_guide_pb2_grpc.RouteGuideStub(channel)\r\n\r\n    for response in stub.RouteChat(iter(())):\r\n        recv_count += 1\r\n\r\n        # if not fail and we get to 20 then success!\r\n        if recv_count > 20:\r\n            sys.exit(0)\r\n\r\n        # if spread b/w sent and recv get's too big then fail\r\n        spread = sent_count - recv_count\r\n        if spread > 10:\r\n            sys.exit(1)\r\n\r\n        time.sleep(.001)\r\n\r\nif __name__ == '__main__':\r\n    s = server()\r\n    time.sleep(.1)\r\n    run_client()"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/330213696",
    "html_url": "https://github.com/grpc/grpc/issues/11966#issuecomment-330213696",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11966",
    "id": 330213696,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMDIxMzY5Ng==",
    "user": {
      "login": "ncteisen",
      "id": 6148140,
      "node_id": "MDQ6VXNlcjYxNDgxNDA=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/6148140?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ncteisen",
      "html_url": "https://github.com/ncteisen",
      "followers_url": "https://api.github.com/users/ncteisen/followers",
      "following_url": "https://api.github.com/users/ncteisen/following{/other_user}",
      "gists_url": "https://api.github.com/users/ncteisen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ncteisen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ncteisen/subscriptions",
      "organizations_url": "https://api.github.com/users/ncteisen/orgs",
      "repos_url": "https://api.github.com/users/ncteisen/repos",
      "events_url": "https://api.github.com/users/ncteisen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ncteisen/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-18T13:06:28Z",
    "updated_at": "2017-09-18T13:06:28Z",
    "author_association": "CONTRIBUTOR",
    "body": "Does the problem exist at HEAD? There was a big flow control re write\nrecently (see here <https://github.com/grpc/grpc/pull/11720>)\n\nOn Fri, Sep 15, 2017 at 6:59 PM, Whitney Jackson <notifications@github.com>\nwrote:\n\n> Sadly #12466 <https://github.com/grpc/grpc/pull/12466> didn't fix this\n> issue. I may have found the problem commit though.\n>\n> I created the test below and bisected. That identified this commit:\n> f036076\n> <https://github.com/grpc/grpc/commit/f03607658a00f63e16363433466b6675efb4ca46> *Fix\n> flow control problem*. I verified that if I revert that on the v1.4.x\n> branch the problem goes away.\n>\n> I don't think I have enough context to try to fix chttp2_transport.c in\n> it's current form so hopefully someone else can have a look.\n>\n> Here's the test I used for bisecting:\n>\n> from __future__ import print_functionimport sysfrom concurrent import futuresimport timeimport threadingimport grpcimport route_guide_pb2import route_guide_pb2_grpc\n> _ONE_DAY_IN_SECONDS = 60 * 60 * 24\n>\n> sent_count = 0\n> recv_count = 0\n> class RouteGuideServicer(route_guide_pb2_grpc.RouteGuideServicer):\n>     def RouteChat(self, request_iterator, context):\n>         global sent_count\n>         while True:\n>             yield route_guide_pb2.RouteNote(\n>                 message = \"X\" * (32*1024),\n>             )\n>             sent_count += 1\n> def serve():\n>     server = grpc.server(futures.ThreadPoolExecutor(max_workers=10))\n>     route_guide_pb2_grpc.add_RouteGuideServicer_to_server(\n>             RouteGuideServicer(), server)\n>     server.add_insecure_port('[::]:50051')\n>     server.start()\n>     try:\n>         while True:\n>             time.sleep(_ONE_DAY_IN_SECONDS)\n>     except KeyboardInterrupt:\n>         server.stop(0)\n> def run_client():\n>     global recv_count\n>     channel = grpc.insecure_channel('localhost:50051')\n>     stub = route_guide_pb2_grpc.RouteGuideStub(channel)\n>\n>     req = route_guide_pb2.RouteNote(message=\"msg\")\n>     for response in stub.RouteChat(iter([req])):\n>         recv_count += 1\n>\n>         # if we get to 20 without failing then success!\n>         if recv_count > 20:\n>             sys.exit(0)\n>\n>         # if spread b/w sent an recv get's too big then fail\n>         spread = sent_count - recv_count\n>         if spread > 10:\n>             sys.exit(1)\n>\n>         time.sleep(.001)\n> if __name__ == '__main__':\n>     server_t = threading.Thread(target=serve)\n>     server_t.daemon = True\n>     server_t.start()\n>     time.sleep(.1)\n>     run_client()`\n>\n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/grpc/grpc/issues/11966#issuecomment-329922550>, or mute\n> the thread\n> <https://github.com/notifications/unsubscribe-auth/AF3QLJc3zCr5A5G9JwPqjglWE9lXjO69ks5siwFsgaJpZM4OmIBR>\n> .\n>\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/330268980",
    "html_url": "https://github.com/grpc/grpc/issues/11966#issuecomment-330268980",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11966",
    "id": 330268980,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMDI2ODk4MA==",
    "user": {
      "login": "wjackson",
      "id": 315342,
      "node_id": "MDQ6VXNlcjMxNTM0Mg==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/315342?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wjackson",
      "html_url": "https://github.com/wjackson",
      "followers_url": "https://api.github.com/users/wjackson/followers",
      "following_url": "https://api.github.com/users/wjackson/following{/other_user}",
      "gists_url": "https://api.github.com/users/wjackson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wjackson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wjackson/subscriptions",
      "organizations_url": "https://api.github.com/users/wjackson/orgs",
      "repos_url": "https://api.github.com/users/wjackson/repos",
      "events_url": "https://api.github.com/users/wjackson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wjackson/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-18T15:58:07Z",
    "updated_at": "2017-09-18T15:58:07Z",
    "author_association": "CONTRIBUTOR",
    "body": "Yep. I continue to see the problem post #11720.\r\n\r\nShould be easy to replicate using the example code I posted. As @nathanielmanistaatgoogle mentioned, a flow control bug would be pretty surprising (especially one that's existed since 1.4.0) so I'm curious to know if this is reproducible by devs that work on the flow control part of this project."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/330600392",
    "html_url": "https://github.com/grpc/grpc/issues/11966#issuecomment-330600392",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11966",
    "id": 330600392,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMDYwMDM5Mg==",
    "user": {
      "login": "nathanielmanistaatgoogle",
      "id": 10131044,
      "node_id": "MDQ6VXNlcjEwMTMxMDQ0",
      "avatar_url": "https://avatars0.githubusercontent.com/u/10131044?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nathanielmanistaatgoogle",
      "html_url": "https://github.com/nathanielmanistaatgoogle",
      "followers_url": "https://api.github.com/users/nathanielmanistaatgoogle/followers",
      "following_url": "https://api.github.com/users/nathanielmanistaatgoogle/following{/other_user}",
      "gists_url": "https://api.github.com/users/nathanielmanistaatgoogle/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nathanielmanistaatgoogle/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nathanielmanistaatgoogle/subscriptions",
      "organizations_url": "https://api.github.com/users/nathanielmanistaatgoogle/orgs",
      "repos_url": "https://api.github.com/users/nathanielmanistaatgoogle/repos",
      "events_url": "https://api.github.com/users/nathanielmanistaatgoogle/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nathanielmanistaatgoogle/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-19T16:44:44Z",
    "updated_at": "2017-09-19T16:44:44Z",
    "author_association": "MEMBER",
    "body": "Thank you for the investigation, @wjackson!\r\n\r\nMinor simplification: why instantiate a request message at all? Why not just pass `iter(())` in your RPC invocation?\r\n\r\nWhat's clear to me is that there absolutely is a defect because one side of an RPC shouldn't be able to so easily OOM the other side. What's not yet clear to me is that your demonstration has awareness of how large the flow control window is - there _is_ such a window, and it does allow the service-side application _some_ freedom to get ahead of the client. Can your reproduction code make judgements like \"the flow control window must have been no more than `<integer>` bytes at the start of the RPC but now appears to have grown to at least `<integer>` bytes\"?\r\n\r\n@muxi: what do you make of @wjackson's indication that the defect seems to have been introduced in [f03607658a00f63e16363433466b6675efb4ca46](https://github.com/grpc/grpc/commit/f03607658a00f63e16363433466b6675efb4ca46)?"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/330601361",
    "html_url": "https://github.com/grpc/grpc/issues/11966#issuecomment-330601361",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11966",
    "id": 330601361,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMDYwMTM2MQ==",
    "user": {
      "login": "nathanielmanistaatgoogle",
      "id": 10131044,
      "node_id": "MDQ6VXNlcjEwMTMxMDQ0",
      "avatar_url": "https://avatars0.githubusercontent.com/u/10131044?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nathanielmanistaatgoogle",
      "html_url": "https://github.com/nathanielmanistaatgoogle",
      "followers_url": "https://api.github.com/users/nathanielmanistaatgoogle/followers",
      "following_url": "https://api.github.com/users/nathanielmanistaatgoogle/following{/other_user}",
      "gists_url": "https://api.github.com/users/nathanielmanistaatgoogle/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nathanielmanistaatgoogle/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nathanielmanistaatgoogle/subscriptions",
      "organizations_url": "https://api.github.com/users/nathanielmanistaatgoogle/orgs",
      "repos_url": "https://api.github.com/users/nathanielmanistaatgoogle/repos",
      "events_url": "https://api.github.com/users/nathanielmanistaatgoogle/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nathanielmanistaatgoogle/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-19T16:47:56Z",
    "updated_at": "2017-09-19T16:47:56Z",
    "author_association": "MEMBER",
    "body": "@wjackson: have you yet tried patching in [pull request 12636](https://github.com/grpc/grpc/pull/12636)?\r\n\r\n@ctiller: should @wjackson have any expectation that [pull request 12636](https://github.com/grpc/grpc/pull/12636) contains a fix for this issue?"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/330602461",
    "html_url": "https://github.com/grpc/grpc/issues/11966#issuecomment-330602461",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11966",
    "id": 330602461,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMDYwMjQ2MQ==",
    "user": {
      "login": "nathanielmanistaatgoogle",
      "id": 10131044,
      "node_id": "MDQ6VXNlcjEwMTMxMDQ0",
      "avatar_url": "https://avatars0.githubusercontent.com/u/10131044?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nathanielmanistaatgoogle",
      "html_url": "https://github.com/nathanielmanistaatgoogle",
      "followers_url": "https://api.github.com/users/nathanielmanistaatgoogle/followers",
      "following_url": "https://api.github.com/users/nathanielmanistaatgoogle/following{/other_user}",
      "gists_url": "https://api.github.com/users/nathanielmanistaatgoogle/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nathanielmanistaatgoogle/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nathanielmanistaatgoogle/subscriptions",
      "organizations_url": "https://api.github.com/users/nathanielmanistaatgoogle/orgs",
      "repos_url": "https://api.github.com/users/nathanielmanistaatgoogle/repos",
      "events_url": "https://api.github.com/users/nathanielmanistaatgoogle/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nathanielmanistaatgoogle/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-19T16:51:44Z",
    "updated_at": "2017-09-19T16:51:44Z",
    "author_association": "MEMBER",
    "body": "@wjackson: is the flow control window size settable with a channel argument? If so, have you tried setting it explicitly?"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/330697414",
    "html_url": "https://github.com/grpc/grpc/issues/11966#issuecomment-330697414",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11966",
    "id": 330697414,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMDY5NzQxNA==",
    "user": {
      "login": "wjackson",
      "id": 315342,
      "node_id": "MDQ6VXNlcjMxNTM0Mg==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/315342?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wjackson",
      "html_url": "https://github.com/wjackson",
      "followers_url": "https://api.github.com/users/wjackson/followers",
      "following_url": "https://api.github.com/users/wjackson/following{/other_user}",
      "gists_url": "https://api.github.com/users/wjackson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wjackson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wjackson/subscriptions",
      "organizations_url": "https://api.github.com/users/wjackson/orgs",
      "repos_url": "https://api.github.com/users/wjackson/repos",
      "events_url": "https://api.github.com/users/wjackson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wjackson/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-19T22:59:25Z",
    "updated_at": "2017-09-19T22:59:25Z",
    "author_association": "CONTRIBUTOR",
    "body": "@nathanielmanistaatgoogle no luck with pull request #12636 :("
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/330700086",
    "html_url": "https://github.com/grpc/grpc/issues/11966#issuecomment-330700086",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11966",
    "id": 330700086,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMDcwMDA4Ng==",
    "user": {
      "login": "muxi",
      "id": 1054404,
      "node_id": "MDQ6VXNlcjEwNTQ0MDQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1054404?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/muxi",
      "html_url": "https://github.com/muxi",
      "followers_url": "https://api.github.com/users/muxi/followers",
      "following_url": "https://api.github.com/users/muxi/following{/other_user}",
      "gists_url": "https://api.github.com/users/muxi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/muxi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/muxi/subscriptions",
      "organizations_url": "https://api.github.com/users/muxi/orgs",
      "repos_url": "https://api.github.com/users/muxi/repos",
      "events_url": "https://api.github.com/users/muxi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/muxi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-19T23:15:31Z",
    "updated_at": "2017-09-19T23:15:31Z",
    "author_association": "MEMBER",
    "body": "Interesting. The changes in that commit is supposed to make a narrower throttle instead of allowing more data to be sent. I am curious how that made more server data flow."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/330711521",
    "html_url": "https://github.com/grpc/grpc/issues/11966#issuecomment-330711521",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11966",
    "id": 330711521,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMDcxMTUyMQ==",
    "user": {
      "login": "ncteisen",
      "id": 6148140,
      "node_id": "MDQ6VXNlcjYxNDgxNDA=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/6148140?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ncteisen",
      "html_url": "https://github.com/ncteisen",
      "followers_url": "https://api.github.com/users/ncteisen/followers",
      "following_url": "https://api.github.com/users/ncteisen/following{/other_user}",
      "gists_url": "https://api.github.com/users/ncteisen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ncteisen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ncteisen/subscriptions",
      "organizations_url": "https://api.github.com/users/ncteisen/orgs",
      "repos_url": "https://api.github.com/users/ncteisen/repos",
      "events_url": "https://api.github.com/users/ncteisen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ncteisen/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-20T00:33:42Z",
    "updated_at": "2017-09-20T00:33:42Z",
    "author_association": "CONTRIBUTOR",
    "body": "Muxi, your commit would allow more data to be sent I think, since it is\ncalling incoming_byte_stream_update_flow_control less restrictively (IIRC\nit was fixing the issue that the gRPC specific header was not being counted\nfor the client's flow control, thus stalling out and deadlocking\neventually).\n\nThe logic changed a bit since my overhaul. As soon as I return to the\noffice (away for the rest of the week on a recruiting trip), I plan to\nreproduce the issue with a c end2end test, and then fix it.\n\nOn Tue, Sep 19, 2017 at 7:15 PM, Muxi Yan <notifications@github.com> wrote:\n\n> Interesting. The changes in that commit is supposed to make a narrower\n> throttle instead of allowing more data to be sent. I am curious how that\n> made more server data flow.\n>\n> â€”\n> You are receiving this because you were assigned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/grpc/grpc/issues/11966#issuecomment-330700086>, or mute\n> the thread\n> <https://github.com/notifications/unsubscribe-auth/AF3QLG1xvgC8Q4GD9oTfq3yB2bQK_jt_ks5skEssgaJpZM4OmIBR>\n> .\n>\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/330713116",
    "html_url": "https://github.com/grpc/grpc/issues/11966#issuecomment-330713116",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11966",
    "id": 330713116,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMDcxMzExNg==",
    "user": {
      "login": "muxi",
      "id": 1054404,
      "node_id": "MDQ6VXNlcjEwNTQ0MDQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1054404?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/muxi",
      "html_url": "https://github.com/muxi",
      "followers_url": "https://api.github.com/users/muxi/followers",
      "following_url": "https://api.github.com/users/muxi/following{/other_user}",
      "gists_url": "https://api.github.com/users/muxi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/muxi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/muxi/subscriptions",
      "organizations_url": "https://api.github.com/users/muxi/orgs",
      "repos_url": "https://api.github.com/users/muxi/repos",
      "events_url": "https://api.github.com/users/muxi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/muxi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-20T00:45:59Z",
    "updated_at": "2017-09-20T00:45:59Z",
    "author_association": "MEMBER",
    "body": "Thanks Noah. Let me know when you start with this and we can debug this together."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/349390690",
    "html_url": "https://github.com/grpc/grpc/issues/11966#issuecomment-349390690",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11966",
    "id": 349390690,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0OTM5MDY5MA==",
    "user": {
      "login": "wjackson",
      "id": 315342,
      "node_id": "MDQ6VXNlcjMxNTM0Mg==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/315342?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wjackson",
      "html_url": "https://github.com/wjackson",
      "followers_url": "https://api.github.com/users/wjackson/followers",
      "following_url": "https://api.github.com/users/wjackson/following{/other_user}",
      "gists_url": "https://api.github.com/users/wjackson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wjackson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wjackson/subscriptions",
      "organizations_url": "https://api.github.com/users/wjackson/orgs",
      "repos_url": "https://api.github.com/users/wjackson/repos",
      "events_url": "https://api.github.com/users/wjackson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wjackson/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-05T18:09:34Z",
    "updated_at": "2017-12-05T18:09:34Z",
    "author_association": "CONTRIBUTOR",
    "body": "Fyi, I just tested this on v1.8.0-pre2 and the problem is still there."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/358477953",
    "html_url": "https://github.com/grpc/grpc/issues/11966#issuecomment-358477953",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11966",
    "id": 358477953,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1ODQ3Nzk1Mw==",
    "user": {
      "login": "nathanielmanistaatgoogle",
      "id": 10131044,
      "node_id": "MDQ6VXNlcjEwMTMxMDQ0",
      "avatar_url": "https://avatars0.githubusercontent.com/u/10131044?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nathanielmanistaatgoogle",
      "html_url": "https://github.com/nathanielmanistaatgoogle",
      "followers_url": "https://api.github.com/users/nathanielmanistaatgoogle/followers",
      "following_url": "https://api.github.com/users/nathanielmanistaatgoogle/following{/other_user}",
      "gists_url": "https://api.github.com/users/nathanielmanistaatgoogle/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nathanielmanistaatgoogle/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nathanielmanistaatgoogle/subscriptions",
      "organizations_url": "https://api.github.com/users/nathanielmanistaatgoogle/orgs",
      "repos_url": "https://api.github.com/users/nathanielmanistaatgoogle/repos",
      "events_url": "https://api.github.com/users/nathanielmanistaatgoogle/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nathanielmanistaatgoogle/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-17T22:58:11Z",
    "updated_at": "2018-01-17T22:58:11Z",
    "author_association": "MEMBER",
    "body": "@wjackson: are you able to express your defect reproduction in the form of a failing unit test added to the codebase in a pull request? It sounds like the problem you're having is still present but I'd like to see something much more like a smoking gun. It would be very interesting if you were able to show us something like a failing assertion statement that clearly identifies exactly what happened (message pulled from stream source? message delivered to stream sink?) that should not have happened."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/359077465",
    "html_url": "https://github.com/grpc/grpc/issues/11966#issuecomment-359077465",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11966",
    "id": 359077465,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1OTA3NzQ2NQ==",
    "user": {
      "login": "wjackson",
      "id": 315342,
      "node_id": "MDQ6VXNlcjMxNTM0Mg==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/315342?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wjackson",
      "html_url": "https://github.com/wjackson",
      "followers_url": "https://api.github.com/users/wjackson/followers",
      "following_url": "https://api.github.com/users/wjackson/following{/other_user}",
      "gists_url": "https://api.github.com/users/wjackson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wjackson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wjackson/subscriptions",
      "organizations_url": "https://api.github.com/users/wjackson/orgs",
      "repos_url": "https://api.github.com/users/wjackson/repos",
      "events_url": "https://api.github.com/users/wjackson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wjackson/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-19T20:16:14Z",
    "updated_at": "2018-01-19T20:16:14Z",
    "author_association": "CONTRIBUTOR",
    "body": "@nathanielmanistaatgoogle: I'd be up for working on that but I'd rather not spend the time unless that's something that really would be helpful. And I'm a little skeptical that the form of the example code is the blocker to a fix here.\r\n\r\nI'm guessing my understanding of the issue is just wrong because if the situation really is as bleak as the example code suggests I would think you'd be getting lots of loud complaints. So it'd be nice to get some feedback before diving into the project of writing low-level unit tests to exercise the bug:\r\n\r\n- Does the example code not successfully demonstrate the problem for you?\r\n- Do all slow-subscribers not leak like crazy?\r\n- Is the slow-subscriber case super rare or unimportant for some reason?\r\n- Is there a reason why my example code is a slow-subscriber-special-case and not a slow-subscriber-general-case?\r\n- Have devs worked on this but then been blocked because they don't have a low-level unit test showing the problem?"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/377569243",
    "html_url": "https://github.com/grpc/grpc/issues/11966#issuecomment-377569243",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11966",
    "id": 377569243,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3NzU2OTI0Mw==",
    "user": {
      "login": "srini100",
      "id": 35056280,
      "node_id": "MDQ6VXNlcjM1MDU2Mjgw",
      "avatar_url": "https://avatars2.githubusercontent.com/u/35056280?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/srini100",
      "html_url": "https://github.com/srini100",
      "followers_url": "https://api.github.com/users/srini100/followers",
      "following_url": "https://api.github.com/users/srini100/following{/other_user}",
      "gists_url": "https://api.github.com/users/srini100/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/srini100/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/srini100/subscriptions",
      "organizations_url": "https://api.github.com/users/srini100/orgs",
      "repos_url": "https://api.github.com/users/srini100/repos",
      "events_url": "https://api.github.com/users/srini100/events{/privacy}",
      "received_events_url": "https://api.github.com/users/srini100/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-30T16:55:00Z",
    "updated_at": "2018-03-30T16:55:00Z",
    "author_association": "CONTRIBUTOR",
    "body": "Looks like same as #12383. This should now be fixed with #14747. Closing this issue."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/377580818",
    "html_url": "https://github.com/grpc/grpc/issues/11966#issuecomment-377580818",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11966",
    "id": 377580818,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3NzU4MDgxOA==",
    "user": {
      "login": "wjackson",
      "id": 315342,
      "node_id": "MDQ6VXNlcjMxNTM0Mg==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/315342?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wjackson",
      "html_url": "https://github.com/wjackson",
      "followers_url": "https://api.github.com/users/wjackson/followers",
      "following_url": "https://api.github.com/users/wjackson/following{/other_user}",
      "gists_url": "https://api.github.com/users/wjackson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wjackson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wjackson/subscriptions",
      "organizations_url": "https://api.github.com/users/wjackson/orgs",
      "repos_url": "https://api.github.com/users/wjackson/repos",
      "events_url": "https://api.github.com/users/wjackson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wjackson/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-30T17:47:35Z",
    "updated_at": "2018-03-30T17:47:35Z",
    "author_association": "CONTRIBUTOR",
    "body": "I just tested. Yes this seems to fix the issue. Thanks!"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/377586396",
    "html_url": "https://github.com/grpc/grpc/issues/11966#issuecomment-377586396",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11966",
    "id": 377586396,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3NzU4NjM5Ng==",
    "user": {
      "login": "srini100",
      "id": 35056280,
      "node_id": "MDQ6VXNlcjM1MDU2Mjgw",
      "avatar_url": "https://avatars2.githubusercontent.com/u/35056280?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/srini100",
      "html_url": "https://github.com/srini100",
      "followers_url": "https://api.github.com/users/srini100/followers",
      "following_url": "https://api.github.com/users/srini100/following{/other_user}",
      "gists_url": "https://api.github.com/users/srini100/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/srini100/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/srini100/subscriptions",
      "organizations_url": "https://api.github.com/users/srini100/orgs",
      "repos_url": "https://api.github.com/users/srini100/repos",
      "events_url": "https://api.github.com/users/srini100/events{/privacy}",
      "received_events_url": "https://api.github.com/users/srini100/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-30T18:11:18Z",
    "updated_at": "2018-03-30T18:11:18Z",
    "author_association": "CONTRIBUTOR",
    "body": "@wjackson  Thanks for testing and apologies for dropping this on the floor for so long."
  }
]
