[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/386351434",
    "html_url": "https://github.com/grpc/grpc/issues/15261#issuecomment-386351434",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15261",
    "id": 386351434,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4NjM1MTQzNA==",
    "user": {
      "login": "nathanielmanistaatgoogle",
      "id": 10131044,
      "node_id": "MDQ6VXNlcjEwMTMxMDQ0",
      "avatar_url": "https://avatars0.githubusercontent.com/u/10131044?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nathanielmanistaatgoogle",
      "html_url": "https://github.com/nathanielmanistaatgoogle",
      "followers_url": "https://api.github.com/users/nathanielmanistaatgoogle/followers",
      "following_url": "https://api.github.com/users/nathanielmanistaatgoogle/following{/other_user}",
      "gists_url": "https://api.github.com/users/nathanielmanistaatgoogle/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nathanielmanistaatgoogle/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nathanielmanistaatgoogle/subscriptions",
      "organizations_url": "https://api.github.com/users/nathanielmanistaatgoogle/orgs",
      "repos_url": "https://api.github.com/users/nathanielmanistaatgoogle/repos",
      "events_url": "https://api.github.com/users/nathanielmanistaatgoogle/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nathanielmanistaatgoogle/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-03T16:16:37Z",
    "updated_at": "2018-05-03T16:16:37Z",
    "author_association": "MEMBER",
    "body": "@jiangtaoli2016, @jboeuf: what do we know about the (potential) causes of `Handshake failed with fatal error SSL_ERROR_SSL: error:1000007d:SSL routines:OPENSSL_internal:CERTIFICATE_VERIFY_FAILED`?"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/386359829",
    "html_url": "https://github.com/grpc/grpc/issues/15261#issuecomment-386359829",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15261",
    "id": 386359829,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4NjM1OTgyOQ==",
    "user": {
      "login": "jiangtaoli2016",
      "id": 19913700,
      "node_id": "MDQ6VXNlcjE5OTEzNzAw",
      "avatar_url": "https://avatars2.githubusercontent.com/u/19913700?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jiangtaoli2016",
      "html_url": "https://github.com/jiangtaoli2016",
      "followers_url": "https://api.github.com/users/jiangtaoli2016/followers",
      "following_url": "https://api.github.com/users/jiangtaoli2016/following{/other_user}",
      "gists_url": "https://api.github.com/users/jiangtaoli2016/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jiangtaoli2016/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jiangtaoli2016/subscriptions",
      "organizations_url": "https://api.github.com/users/jiangtaoli2016/orgs",
      "repos_url": "https://api.github.com/users/jiangtaoli2016/repos",
      "events_url": "https://api.github.com/users/jiangtaoli2016/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jiangtaoli2016/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-03T16:44:21Z",
    "updated_at": "2018-05-03T16:44:21Z",
    "author_association": "CONTRIBUTOR",
    "body": "This error occurs during SSL handshake. It looks like SSL library has trouble verifying the certificate. In this scenario, a python gRPC client tries to connect to Google cloud API and the error comes from the client side? "
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/386614367",
    "html_url": "https://github.com/grpc/grpc/issues/15261#issuecomment-386614367",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15261",
    "id": 386614367,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4NjYxNDM2Nw==",
    "user": {
      "login": "tab1293",
      "id": 4233126,
      "node_id": "MDQ6VXNlcjQyMzMxMjY=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/4233126?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tab1293",
      "html_url": "https://github.com/tab1293",
      "followers_url": "https://api.github.com/users/tab1293/followers",
      "following_url": "https://api.github.com/users/tab1293/following{/other_user}",
      "gists_url": "https://api.github.com/users/tab1293/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tab1293/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tab1293/subscriptions",
      "organizations_url": "https://api.github.com/users/tab1293/orgs",
      "repos_url": "https://api.github.com/users/tab1293/repos",
      "events_url": "https://api.github.com/users/tab1293/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tab1293/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-04T14:13:09Z",
    "updated_at": "2018-05-04T14:13:09Z",
    "author_association": "NONE",
    "body": "@jiangtaoli2016 yes that is correct"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/386644157",
    "html_url": "https://github.com/grpc/grpc/issues/15261#issuecomment-386644157",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15261",
    "id": 386644157,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4NjY0NDE1Nw==",
    "user": {
      "login": "jiangtaoli2016",
      "id": 19913700,
      "node_id": "MDQ6VXNlcjE5OTEzNzAw",
      "avatar_url": "https://avatars2.githubusercontent.com/u/19913700?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jiangtaoli2016",
      "html_url": "https://github.com/jiangtaoli2016",
      "followers_url": "https://api.github.com/users/jiangtaoli2016/followers",
      "following_url": "https://api.github.com/users/jiangtaoli2016/following{/other_user}",
      "gists_url": "https://api.github.com/users/jiangtaoli2016/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jiangtaoli2016/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jiangtaoli2016/subscriptions",
      "organizations_url": "https://api.github.com/users/jiangtaoli2016/orgs",
      "repos_url": "https://api.github.com/users/jiangtaoli2016/repos",
      "events_url": "https://api.github.com/users/jiangtaoli2016/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jiangtaoli2016/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-04T15:51:25Z",
    "updated_at": "2018-05-04T15:51:25Z",
    "author_association": "CONTRIBUTOR",
    "body": "When client connects to Google Cloud API, it uses SSL + OAuth. It is not mutual authentication. The failure happens when client has trouble verifying Google API's certificates. It looks that pem root certs are not set correctly. Did you use default pem root certs or provide your own root certs file with environment variable?"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/386658092",
    "html_url": "https://github.com/grpc/grpc/issues/15261#issuecomment-386658092",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15261",
    "id": 386658092,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4NjY1ODA5Mg==",
    "user": {
      "login": "tab1293",
      "id": 4233126,
      "node_id": "MDQ6VXNlcjQyMzMxMjY=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/4233126?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tab1293",
      "html_url": "https://github.com/tab1293",
      "followers_url": "https://api.github.com/users/tab1293/followers",
      "following_url": "https://api.github.com/users/tab1293/following{/other_user}",
      "gists_url": "https://api.github.com/users/tab1293/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tab1293/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tab1293/subscriptions",
      "organizations_url": "https://api.github.com/users/tab1293/orgs",
      "repos_url": "https://api.github.com/users/tab1293/repos",
      "events_url": "https://api.github.com/users/tab1293/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tab1293/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-04T16:37:50Z",
    "updated_at": "2018-05-04T16:38:50Z",
    "author_association": "NONE",
    "body": "So in the original issue that @jonparrott linked to, the reporter was trying to run `transcribe_streaming_mic.py` which I'm assuming connects to Google Cloud API with SSL + OAuth. \r\n\r\nIn my case, I am using certificates signed by a DigiCert intermediate CA. I am not setting root certs with an environment variable. When I use a golang gRPC client with my service, the TLS authentication works fine. It seems to just be an issue with the Python client. My system is able to verify the certificate as seen below:\r\n\r\n```\r\n$ echo QUIT | openssl s_client -showcerts -connect starlord.cloud.vimeo.com:8012 | openssl x509 -noout -text\r\ndepth=2 C = US, O = DigiCert Inc, OU = www.digicert.com, CN = DigiCert Global Root CA\r\nverify return:1\r\ndepth=1 C = US, O = DigiCert Inc, CN = DigiCert SHA2 Secure Server CA\r\nverify return:1\r\ndepth=0 C = US, ST = New York, L = New York, O = \"Vimeo, Inc.\", CN = *.cloud.vimeo.com\r\nverify return:1\r\nDONE\r\n```\r\n\r\nOne strange thing to comment is that I had to stop using LibreSSL on my system to get verification to work. I am now using OpenSSL 1.0.2o. The LibreSSL issue seemed to be related to this: https://github.com/libressl-portable/portable/issues/80\r\n\r\nMaybe the gRPC python client is facing similar issues not being able to follow the certificate chain?"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/389387315",
    "html_url": "https://github.com/grpc/grpc/issues/15261#issuecomment-389387315",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15261",
    "id": 389387315,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4OTM4NzMxNQ==",
    "user": {
      "login": "jiangtaoli2016",
      "id": 19913700,
      "node_id": "MDQ6VXNlcjE5OTEzNzAw",
      "avatar_url": "https://avatars2.githubusercontent.com/u/19913700?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jiangtaoli2016",
      "html_url": "https://github.com/jiangtaoli2016",
      "followers_url": "https://api.github.com/users/jiangtaoli2016/followers",
      "following_url": "https://api.github.com/users/jiangtaoli2016/following{/other_user}",
      "gists_url": "https://api.github.com/users/jiangtaoli2016/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jiangtaoli2016/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jiangtaoli2016/subscriptions",
      "organizations_url": "https://api.github.com/users/jiangtaoli2016/orgs",
      "repos_url": "https://api.github.com/users/jiangtaoli2016/repos",
      "events_url": "https://api.github.com/users/jiangtaoli2016/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jiangtaoli2016/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-16T04:00:42Z",
    "updated_at": "2018-05-16T04:00:42Z",
    "author_association": "CONTRIBUTOR",
    "body": "@tab1293 Can you uninstall openssl (libssl-dev), in this case boringssl will be used. See whether it works again?\r\n\r\nAlso try to pass your system root cert as environment var. In MacOS, try\r\n`export GRPC_DEFAULT_SSL_ROOTS_FILE_PATH_ENV_VAR=/etc/ssl/cert.pem`\r\n\r\nThe error message shows an underlying error from OpenSSL. It could be many reasons: OpenSSL ctx in wrong state, handshake bytes from peer corrupted, or server certificates cannot be verified. "
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/389396732",
    "html_url": "https://github.com/grpc/grpc/issues/15261#issuecomment-389396732",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15261",
    "id": 389396732,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4OTM5NjczMg==",
    "user": {
      "login": "jiangtaoli2016",
      "id": 19913700,
      "node_id": "MDQ6VXNlcjE5OTEzNzAw",
      "avatar_url": "https://avatars2.githubusercontent.com/u/19913700?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jiangtaoli2016",
      "html_url": "https://github.com/jiangtaoli2016",
      "followers_url": "https://api.github.com/users/jiangtaoli2016/followers",
      "following_url": "https://api.github.com/users/jiangtaoli2016/following{/other_user}",
      "gists_url": "https://api.github.com/users/jiangtaoli2016/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jiangtaoli2016/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jiangtaoli2016/subscriptions",
      "organizations_url": "https://api.github.com/users/jiangtaoli2016/orgs",
      "repos_url": "https://api.github.com/users/jiangtaoli2016/repos",
      "events_url": "https://api.github.com/users/jiangtaoli2016/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jiangtaoli2016/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-16T05:15:01Z",
    "updated_at": "2018-05-16T05:15:01Z",
    "author_association": "CONTRIBUTOR",
    "body": "@theacodes  @tab1293  Is your cert ECDSA or RSA?\r\nIf ECDSA, we need to pass a env_var to enable ECDSA as SSL cipher list. "
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/395814382",
    "html_url": "https://github.com/grpc/grpc/issues/15261#issuecomment-395814382",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15261",
    "id": 395814382,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NTgxNDM4Mg==",
    "user": {
      "login": "tab1293",
      "id": 4233126,
      "node_id": "MDQ6VXNlcjQyMzMxMjY=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/4233126?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tab1293",
      "html_url": "https://github.com/tab1293",
      "followers_url": "https://api.github.com/users/tab1293/followers",
      "following_url": "https://api.github.com/users/tab1293/following{/other_user}",
      "gists_url": "https://api.github.com/users/tab1293/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tab1293/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tab1293/subscriptions",
      "organizations_url": "https://api.github.com/users/tab1293/orgs",
      "repos_url": "https://api.github.com/users/tab1293/repos",
      "events_url": "https://api.github.com/users/tab1293/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tab1293/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-08T16:26:26Z",
    "updated_at": "2018-06-08T16:26:26Z",
    "author_association": "NONE",
    "body": "@jiangtaoli2016 Sorry for the delayed response but I am still experiencing issues here. What is the recommended way to uninstall openssl and what should I reinstall? \r\n\r\nI tried `export GRPC_DEFAULT_SSL_ROOTS_FILE_PATH_ENV_VAR=/etc/ssl/cert.pem` with my cert in MacOS but it didn't make a difference. \r\n\r\nAlso the cert is RSA. "
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/401967280",
    "html_url": "https://github.com/grpc/grpc/issues/15261#issuecomment-401967280",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15261",
    "id": 401967280,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwMTk2NzI4MA==",
    "user": {
      "login": "jiangtaoli2016",
      "id": 19913700,
      "node_id": "MDQ6VXNlcjE5OTEzNzAw",
      "avatar_url": "https://avatars2.githubusercontent.com/u/19913700?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jiangtaoli2016",
      "html_url": "https://github.com/jiangtaoli2016",
      "followers_url": "https://api.github.com/users/jiangtaoli2016/followers",
      "following_url": "https://api.github.com/users/jiangtaoli2016/following{/other_user}",
      "gists_url": "https://api.github.com/users/jiangtaoli2016/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jiangtaoli2016/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jiangtaoli2016/subscriptions",
      "organizations_url": "https://api.github.com/users/jiangtaoli2016/orgs",
      "repos_url": "https://api.github.com/users/jiangtaoli2016/repos",
      "events_url": "https://api.github.com/users/jiangtaoli2016/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jiangtaoli2016/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-02T23:27:37Z",
    "updated_at": "2018-07-02T23:27:37Z",
    "author_association": "CONTRIBUTOR",
    "body": "@tab1293  You can uninstall system openssl library using \r\n`sudo apt-get remove libssl-dev`"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/416530526",
    "html_url": "https://github.com/grpc/grpc/issues/15261#issuecomment-416530526",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15261",
    "id": 416530526,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxNjUzMDUyNg==",
    "user": {
      "login": "mushtaque87",
      "id": 1650870,
      "node_id": "MDQ6VXNlcjE2NTA4NzA=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/1650870?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mushtaque87",
      "html_url": "https://github.com/mushtaque87",
      "followers_url": "https://api.github.com/users/mushtaque87/followers",
      "following_url": "https://api.github.com/users/mushtaque87/following{/other_user}",
      "gists_url": "https://api.github.com/users/mushtaque87/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mushtaque87/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mushtaque87/subscriptions",
      "organizations_url": "https://api.github.com/users/mushtaque87/orgs",
      "repos_url": "https://api.github.com/users/mushtaque87/repos",
      "events_url": "https://api.github.com/users/mushtaque87/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mushtaque87/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-28T10:18:31Z",
    "updated_at": "2018-08-28T10:18:31Z",
    "author_association": "NONE",
    "body": "Took the latest  \r\n pod 'SwiftGRPC' \r\n pod 'SwiftProtobuf'\r\nversion using pod update and it got fixed .\r\n\r\nInstalling BoringSSL 10.0.6 (was 10.0.5 and source changed to `https://github.com/CocoaPods/Specs.git` from `https://github.com/cocoapods/specs.git`)\r\nInstalling SwiftGRPC 0.5.1 (was 0.4.3 and source changed to `https://github.com/CocoaPods/Specs.git` from `https://github.com/cocoapods/specs.git`)\r\nInstalling gRPC-Core 1.12.0 (was 1.11.0 and source changed to `https://github.com/CocoaPods/Specs.git` from `https://github.com/cocoapods/specs.git`)\r\nInstalling Realm 3.7.6 (was 3.7.4 and source changed to `https://github.com/CocoaPods/Specs.git` from `https://github.com/cocoapods/specs.git`)\r\nInstalling RealmSwift 3.7.6 (was 3.7.4 and source changed to `https://github.com/CocoaPods/Specs.git` from `https://github.com/cocoapods/specs.git`)\r\n\r\nThen all i need was create the session/service with my certificate.\r\n\r\nlet certPath = Bundle.main.url(forResource: \"XYZ\", withExtension: \"pem\")!\r\n        let certificate = try! String(contentsOf: certPath)\r\n        service = Pronounce_PronounceServiceClient(address: Constants.ServerApi.grpcBaseUrl, certificates: certificate)"
  }
]
