[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/244136180",
    "html_url": "https://github.com/grpc/grpc/issues/7951#issuecomment-244136180",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/7951",
    "id": 244136180,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0NDEzNjE4MA==",
    "user": {
      "login": "blowmage",
      "id": 730,
      "node_id": "MDQ6VXNlcjczMA==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/blowmage",
      "html_url": "https://github.com/blowmage",
      "followers_url": "https://api.github.com/users/blowmage/followers",
      "following_url": "https://api.github.com/users/blowmage/following{/other_user}",
      "gists_url": "https://api.github.com/users/blowmage/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/blowmage/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/blowmage/subscriptions",
      "organizations_url": "https://api.github.com/users/blowmage/orgs",
      "repos_url": "https://api.github.com/users/blowmage/repos",
      "events_url": "https://api.github.com/users/blowmage/events{/privacy}",
      "received_events_url": "https://api.github.com/users/blowmage/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-09-01T16:33:29Z",
    "updated_at": "2016-09-01T16:33:29Z",
    "author_association": "CONTRIBUTOR",
    "body": "After some trial and error, it appears that forked processed can only use a GRPC client if the client is 1) created in the forked process, and 2) the main process has not created a GRPC client. As soon as the main process creates a GRPC client all processes forked after that will hang when calling the client.\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/244137078",
    "html_url": "https://github.com/grpc/grpc/issues/7951#issuecomment-244137078",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/7951",
    "id": 244137078,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0NDEzNzA3OA==",
    "user": {
      "login": "murgatroid99",
      "id": 961599,
      "node_id": "MDQ6VXNlcjk2MTU5OQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/961599?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/murgatroid99",
      "html_url": "https://github.com/murgatroid99",
      "followers_url": "https://api.github.com/users/murgatroid99/followers",
      "following_url": "https://api.github.com/users/murgatroid99/following{/other_user}",
      "gists_url": "https://api.github.com/users/murgatroid99/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/murgatroid99/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/murgatroid99/subscriptions",
      "organizations_url": "https://api.github.com/users/murgatroid99/orgs",
      "repos_url": "https://api.github.com/users/murgatroid99/repos",
      "events_url": "https://api.github.com/users/murgatroid99/events{/privacy}",
      "received_events_url": "https://api.github.com/users/murgatroid99/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-09-01T16:36:35Z",
    "updated_at": "2016-09-01T16:36:35Z",
    "author_association": "MEMBER",
    "body": "The primary problem here is importing grpc in the main process before forking. Currently, forking after initializing grpc is not supported, as I mentioned in that other issue.\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/244139527",
    "html_url": "https://github.com/grpc/grpc/issues/7951#issuecomment-244139527",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/7951",
    "id": 244139527,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0NDEzOTUyNw==",
    "user": {
      "login": "blowmage",
      "id": 730,
      "node_id": "MDQ6VXNlcjczMA==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/blowmage",
      "html_url": "https://github.com/blowmage",
      "followers_url": "https://api.github.com/users/blowmage/followers",
      "following_url": "https://api.github.com/users/blowmage/following{/other_user}",
      "gists_url": "https://api.github.com/users/blowmage/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/blowmage/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/blowmage/subscriptions",
      "organizations_url": "https://api.github.com/users/blowmage/orgs",
      "repos_url": "https://api.github.com/users/blowmage/repos",
      "events_url": "https://api.github.com/users/blowmage/events{/privacy}",
      "received_events_url": "https://api.github.com/users/blowmage/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-09-01T16:45:30Z",
    "updated_at": "2016-09-01T16:45:30Z",
    "author_association": "CONTRIBUTOR",
    "body": "Is there an ETA for when this will be fixed?\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/244148409",
    "html_url": "https://github.com/grpc/grpc/issues/7951#issuecomment-244148409",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/7951",
    "id": 244148409,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0NDE0ODQwOQ==",
    "user": {
      "login": "murgatroid99",
      "id": 961599,
      "node_id": "MDQ6VXNlcjk2MTU5OQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/961599?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/murgatroid99",
      "html_url": "https://github.com/murgatroid99",
      "followers_url": "https://api.github.com/users/murgatroid99/followers",
      "following_url": "https://api.github.com/users/murgatroid99/following{/other_user}",
      "gists_url": "https://api.github.com/users/murgatroid99/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/murgatroid99/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/murgatroid99/subscriptions",
      "organizations_url": "https://api.github.com/users/murgatroid99/orgs",
      "repos_url": "https://api.github.com/users/murgatroid99/repos",
      "events_url": "https://api.github.com/users/murgatroid99/events{/privacy}",
      "received_events_url": "https://api.github.com/users/murgatroid99/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-09-01T17:17:40Z",
    "updated_at": "2016-09-01T17:17:40Z",
    "author_association": "MEMBER",
    "body": "Unfortunately, it would be a lot of work to change this, and I don't expect it to happen any time soon. For now, your best bet is to just not fork after loading grpc.\n\nCC @ctiller \n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/244179628",
    "html_url": "https://github.com/grpc/grpc/issues/7951#issuecomment-244179628",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/7951",
    "id": 244179628,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0NDE3OTYyOA==",
    "user": {
      "login": "blowmage",
      "id": 730,
      "node_id": "MDQ6VXNlcjczMA==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/blowmage",
      "html_url": "https://github.com/blowmage",
      "followers_url": "https://api.github.com/users/blowmage/followers",
      "following_url": "https://api.github.com/users/blowmage/following{/other_user}",
      "gists_url": "https://api.github.com/users/blowmage/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/blowmage/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/blowmage/subscriptions",
      "organizations_url": "https://api.github.com/users/blowmage/orgs",
      "repos_url": "https://api.github.com/users/blowmage/repos",
      "events_url": "https://api.github.com/users/blowmage/events{/privacy}",
      "received_events_url": "https://api.github.com/users/blowmage/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-09-01T19:05:30Z",
    "updated_at": "2016-09-01T19:05:30Z",
    "author_association": "CONTRIBUTOR",
    "body": "As I understand it there are several smaller issues that are all converging in this behavior.\n1. A GRPC client object hangs when called from a process it was not created in. Or, a new GRPC client object created on a process other than the process that first called `require \"grpc\"` will also hang. Would it be possible to not hang in these situations and perhaps raise a more helpful error? Perhaps track the PID that GRPC was initialized on and check that on all future calls?\n2. The GRPC library is initialized when `require \"grpc\"` is called, and not when a GRPC client object is first created. The `google-cloud-ruby` library can be very careful about when it requires GRPC, but it cannot ensure that outside code has not also also required GRPC. This means we might get GRPC initialized on the wrong process with no way to correct. Would it be possible to delay the GRPC initialization until it is actually needed? Separating it from the require?\n3. Would it be possible to allow objects like CallCredentials to be created without the GRPC initializing? So perhaps a CallCredential object could be created in the main process and shared with all the ClientStub objects created in the forked processes?\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/244187397",
    "html_url": "https://github.com/grpc/grpc/issues/7951#issuecomment-244187397",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/7951",
    "id": 244187397,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0NDE4NzM5Nw==",
    "user": {
      "login": "murgatroid99",
      "id": 961599,
      "node_id": "MDQ6VXNlcjk2MTU5OQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/961599?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/murgatroid99",
      "html_url": "https://github.com/murgatroid99",
      "followers_url": "https://api.github.com/users/murgatroid99/followers",
      "following_url": "https://api.github.com/users/murgatroid99/following{/other_user}",
      "gists_url": "https://api.github.com/users/murgatroid99/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/murgatroid99/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/murgatroid99/subscriptions",
      "organizations_url": "https://api.github.com/users/murgatroid99/orgs",
      "repos_url": "https://api.github.com/users/murgatroid99/repos",
      "events_url": "https://api.github.com/users/murgatroid99/events{/privacy}",
      "received_events_url": "https://api.github.com/users/murgatroid99/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-09-01T19:34:09Z",
    "updated_at": "2016-09-01T19:34:09Z",
    "author_association": "MEMBER",
    "body": "I know that Python currently initializes the grpc core lazily. \n\n@nathanielmanistaatgoogle @soltanmm Did you encounter any pitfalls we should know about when implementing that for Python?\n\n@ctiller Should I assume that every surface API requires `grpc_init` to have been called?\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/244227764",
    "html_url": "https://github.com/grpc/grpc/issues/7951#issuecomment-244227764",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/7951",
    "id": 244227764,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0NDIyNzc2NA==",
    "user": {
      "login": "blowmage",
      "id": 730,
      "node_id": "MDQ6VXNlcjczMA==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/blowmage",
      "html_url": "https://github.com/blowmage",
      "followers_url": "https://api.github.com/users/blowmage/followers",
      "following_url": "https://api.github.com/users/blowmage/following{/other_user}",
      "gists_url": "https://api.github.com/users/blowmage/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/blowmage/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/blowmage/subscriptions",
      "organizations_url": "https://api.github.com/users/blowmage/orgs",
      "repos_url": "https://api.github.com/users/blowmage/repos",
      "events_url": "https://api.github.com/users/blowmage/events{/privacy}",
      "received_events_url": "https://api.github.com/users/blowmage/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-09-01T22:08:04Z",
    "updated_at": "2016-09-01T22:08:04Z",
    "author_association": "CONTRIBUTOR",
    "body": "@murgatroid99 Can you share what precisely is causing the problem with forked processes? Is it some shared state or IO? If so, where?\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/244228493",
    "html_url": "https://github.com/grpc/grpc/issues/7951#issuecomment-244228493",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/7951",
    "id": 244228493,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0NDIyODQ5Mw==",
    "user": {
      "login": "murgatroid99",
      "id": 961599,
      "node_id": "MDQ6VXNlcjk2MTU5OQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/961599?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/murgatroid99",
      "html_url": "https://github.com/murgatroid99",
      "followers_url": "https://api.github.com/users/murgatroid99/followers",
      "following_url": "https://api.github.com/users/murgatroid99/following{/other_user}",
      "gists_url": "https://api.github.com/users/murgatroid99/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/murgatroid99/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/murgatroid99/subscriptions",
      "organizations_url": "https://api.github.com/users/murgatroid99/orgs",
      "repos_url": "https://api.github.com/users/murgatroid99/repos",
      "events_url": "https://api.github.com/users/murgatroid99/events{/privacy}",
      "received_events_url": "https://api.github.com/users/murgatroid99/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-09-01T22:11:14Z",
    "updated_at": "2016-09-01T22:11:14Z",
    "author_association": "MEMBER",
    "body": "As far as I understand, the primary problem is the eventfds that the C core uses to manage events. When you fork they are getting copied to the subprocess, but they should be different for different processes.\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/244231491",
    "html_url": "https://github.com/grpc/grpc/issues/7951#issuecomment-244231491",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/7951",
    "id": 244231491,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0NDIzMTQ5MQ==",
    "user": {
      "login": "zenspider",
      "id": 9832,
      "node_id": "MDQ6VXNlcjk4MzI=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/9832?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zenspider",
      "html_url": "https://github.com/zenspider",
      "followers_url": "https://api.github.com/users/zenspider/followers",
      "following_url": "https://api.github.com/users/zenspider/following{/other_user}",
      "gists_url": "https://api.github.com/users/zenspider/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zenspider/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zenspider/subscriptions",
      "organizations_url": "https://api.github.com/users/zenspider/orgs",
      "repos_url": "https://api.github.com/users/zenspider/repos",
      "events_url": "https://api.github.com/users/zenspider/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zenspider/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-09-01T22:25:38Z",
    "updated_at": "2016-09-01T22:25:38Z",
    "author_association": "NONE",
    "body": "@murgatroid99 is that via one of the `*_once_init` functions?\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/260811550",
    "html_url": "https://github.com/grpc/grpc/issues/7951#issuecomment-260811550",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/7951",
    "id": 260811550,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MDgxMTU1MA==",
    "user": {
      "login": "soltanmm-google",
      "id": 21180148,
      "node_id": "MDQ6VXNlcjIxMTgwMTQ4",
      "avatar_url": "https://avatars2.githubusercontent.com/u/21180148?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/soltanmm-google",
      "html_url": "https://github.com/soltanmm-google",
      "followers_url": "https://api.github.com/users/soltanmm-google/followers",
      "following_url": "https://api.github.com/users/soltanmm-google/following{/other_user}",
      "gists_url": "https://api.github.com/users/soltanmm-google/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/soltanmm-google/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/soltanmm-google/subscriptions",
      "organizations_url": "https://api.github.com/users/soltanmm-google/orgs",
      "repos_url": "https://api.github.com/users/soltanmm-google/repos",
      "events_url": "https://api.github.com/users/soltanmm-google/events{/privacy}",
      "received_events_url": "https://api.github.com/users/soltanmm-google/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-11-16T00:07:46Z",
    "updated_at": "2016-11-16T00:07:46Z",
    "author_association": "CONTRIBUTOR",
    "body": "Forking processes and using gRPC across processes is not supported behavior due to very low-level resource issues. Short of having a way to introspect the kernel resources we're using and micromanaging them from some wrapped call to `fork` in a system-dependent way (which... just... no, heck no) this isn't tractable.\n\nEither delay your use of gRPC until you've forked from fresh processes (similar to Python 3's use of a zygote process), or don't expect things to work after a fork.\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/260816284",
    "html_url": "https://github.com/grpc/grpc/issues/7951#issuecomment-260816284",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/7951",
    "id": 260816284,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MDgxNjI4NA==",
    "user": {
      "login": "zenspider",
      "id": 9832,
      "node_id": "MDQ6VXNlcjk4MzI=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/9832?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zenspider",
      "html_url": "https://github.com/zenspider",
      "followers_url": "https://api.github.com/users/zenspider/followers",
      "following_url": "https://api.github.com/users/zenspider/following{/other_user}",
      "gists_url": "https://api.github.com/users/zenspider/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zenspider/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zenspider/subscriptions",
      "organizations_url": "https://api.github.com/users/zenspider/orgs",
      "repos_url": "https://api.github.com/users/zenspider/repos",
      "events_url": "https://api.github.com/users/zenspider/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zenspider/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-11-16T00:34:24Z",
    "updated_at": "2016-11-16T00:34:24Z",
    "author_association": "NONE",
    "body": "Providing a hook to be run on fork is not an unreasonable way to go. Unicorn and pretty much all other popular web servers I know of do such a thing so that forked clients can clean up or reset IOs and the like.\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/261660585",
    "html_url": "https://github.com/grpc/grpc/issues/7951#issuecomment-261660585",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/7951",
    "id": 261660585,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MTY2MDU4NQ==",
    "user": {
      "login": "zenspider",
      "id": 9832,
      "node_id": "MDQ6VXNlcjk4MzI=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/9832?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zenspider",
      "html_url": "https://github.com/zenspider",
      "followers_url": "https://api.github.com/users/zenspider/followers",
      "following_url": "https://api.github.com/users/zenspider/following{/other_user}",
      "gists_url": "https://api.github.com/users/zenspider/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zenspider/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zenspider/subscriptions",
      "organizations_url": "https://api.github.com/users/zenspider/orgs",
      "repos_url": "https://api.github.com/users/zenspider/repos",
      "events_url": "https://api.github.com/users/zenspider/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zenspider/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-11-18T22:37:47Z",
    "updated_at": "2016-11-18T22:37:47Z",
    "author_association": "NONE",
    "body": "You must also work on AMP. Good job working with your users.\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/266633854",
    "html_url": "https://github.com/grpc/grpc/issues/7951#issuecomment-266633854",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/7951",
    "id": 266633854,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2NjYzMzg1NA==",
    "user": {
      "login": "soltanmm-google",
      "id": 21180148,
      "node_id": "MDQ6VXNlcjIxMTgwMTQ4",
      "avatar_url": "https://avatars2.githubusercontent.com/u/21180148?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/soltanmm-google",
      "html_url": "https://github.com/soltanmm-google",
      "followers_url": "https://api.github.com/users/soltanmm-google/followers",
      "following_url": "https://api.github.com/users/soltanmm-google/following{/other_user}",
      "gists_url": "https://api.github.com/users/soltanmm-google/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/soltanmm-google/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/soltanmm-google/subscriptions",
      "organizations_url": "https://api.github.com/users/soltanmm-google/orgs",
      "repos_url": "https://api.github.com/users/soltanmm-google/repos",
      "events_url": "https://api.github.com/users/soltanmm-google/events{/privacy}",
      "received_events_url": "https://api.github.com/users/soltanmm-google/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-12-13T03:52:33Z",
    "updated_at": "2016-12-13T03:59:52Z",
    "author_association": "CONTRIBUTOR",
    "body": "@zenspider ~I understand that you're frustrated, but we need to start with a clarification.~\r\n\r\n~My understanding of how Unicorn works is by being the spawn manager. The 'hooks' you referred to are for Unicorn to call when *Unicorn* decides to fork. This is fundamentally different from gRPC being aware of what to do when the *user* (or some other library above it) forks. Unicorn has the option of using zygotes. We don't, because that's one layer above an RPC framework. That places the responsibility of keeping fresh zygotes on the user.~\r\n\r\n~And even if that understanding is wrong (which it might be - I've only now read Unicorn docs), requiring that gRPC manage forks would be outside the design parameters, and forking is not inherently blocked by gRPC's design, since you can always just spin up a zygote at the start of your program and request forks off that before running gRPC code.~\r\n\r\n~EDIT: having said that, who knows - it looks like there's some motion to allow for clean-up.~\r\n\r\nEDIT EDIT: Ah, I misread your earlier comment."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/266658535",
    "html_url": "https://github.com/grpc/grpc/issues/7951#issuecomment-266658535",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/7951",
    "id": 266658535,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2NjY1ODUzNQ==",
    "user": {
      "login": "hsaliak",
      "id": 150108,
      "node_id": "MDQ6VXNlcjE1MDEwOA==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/150108?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hsaliak",
      "html_url": "https://github.com/hsaliak",
      "followers_url": "https://api.github.com/users/hsaliak/followers",
      "following_url": "https://api.github.com/users/hsaliak/following{/other_user}",
      "gists_url": "https://api.github.com/users/hsaliak/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hsaliak/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hsaliak/subscriptions",
      "organizations_url": "https://api.github.com/users/hsaliak/orgs",
      "repos_url": "https://api.github.com/users/hsaliak/repos",
      "events_url": "https://api.github.com/users/hsaliak/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hsaliak/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-12-13T06:32:19Z",
    "updated_at": "2016-12-13T06:32:19Z",
    "author_association": "MEMBER",
    "body": "I am reopening this issue. \r\n\r\n@blowmage , @zenspider there was a bulk triage about a month ago and I think this issue was flagged for closing at that point. \r\nClearly there's an unaddressed need here, and we need to come up with an answer - it may not be any different than what we already state due to the points already made. However, since this has come up in the context of some other wrapped language implementations as well, it's worth evaluating more closely.."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/266669866",
    "html_url": "https://github.com/grpc/grpc/issues/7951#issuecomment-266669866",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/7951",
    "id": 266669866,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2NjY2OTg2Ng==",
    "user": {
      "login": "blowmage",
      "id": 730,
      "node_id": "MDQ6VXNlcjczMA==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/blowmage",
      "html_url": "https://github.com/blowmage",
      "followers_url": "https://api.github.com/users/blowmage/followers",
      "following_url": "https://api.github.com/users/blowmage/following{/other_user}",
      "gists_url": "https://api.github.com/users/blowmage/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/blowmage/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/blowmage/subscriptions",
      "organizations_url": "https://api.github.com/users/blowmage/orgs",
      "repos_url": "https://api.github.com/users/blowmage/repos",
      "events_url": "https://api.github.com/users/blowmage/events{/privacy}",
      "received_events_url": "https://api.github.com/users/blowmage/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-12-13T07:50:26Z",
    "updated_at": "2016-12-13T07:50:26Z",
    "author_association": "CONTRIBUTOR",
    "body": "Fantastic. Thanks!"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/313287555",
    "html_url": "https://github.com/grpc/grpc/issues/7951#issuecomment-313287555",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/7951",
    "id": 313287555,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxMzI4NzU1NQ==",
    "user": {
      "login": "tonobo",
      "id": 6775896,
      "node_id": "MDQ6VXNlcjY3NzU4OTY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/6775896?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tonobo",
      "html_url": "https://github.com/tonobo",
      "followers_url": "https://api.github.com/users/tonobo/followers",
      "following_url": "https://api.github.com/users/tonobo/following{/other_user}",
      "gists_url": "https://api.github.com/users/tonobo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tonobo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tonobo/subscriptions",
      "organizations_url": "https://api.github.com/users/tonobo/orgs",
      "repos_url": "https://api.github.com/users/tonobo/repos",
      "events_url": "https://api.github.com/users/tonobo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tonobo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-07-06T03:46:23Z",
    "updated_at": "2017-07-06T03:46:23Z",
    "author_association": "NONE",
    "body": "Grpc is quite not usable without forking. Are there any possibilities to just seralize the stubs and push them by using a curl library?"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/333655744",
    "html_url": "https://github.com/grpc/grpc/issues/7951#issuecomment-333655744",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/7951",
    "id": 333655744,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMzY1NTc0NA==",
    "user": {
      "login": "bobbytables",
      "id": 521627,
      "node_id": "MDQ6VXNlcjUyMTYyNw==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/521627?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bobbytables",
      "html_url": "https://github.com/bobbytables",
      "followers_url": "https://api.github.com/users/bobbytables/followers",
      "following_url": "https://api.github.com/users/bobbytables/following{/other_user}",
      "gists_url": "https://api.github.com/users/bobbytables/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bobbytables/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bobbytables/subscriptions",
      "organizations_url": "https://api.github.com/users/bobbytables/orgs",
      "repos_url": "https://api.github.com/users/bobbytables/repos",
      "events_url": "https://api.github.com/users/bobbytables/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bobbytables/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-02T20:30:41Z",
    "updated_at": "2017-10-02T20:30:41Z",
    "author_association": "NONE",
    "body": "For the time being can we just have an exception raised or something? This is difficult to debug without that."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/335998583",
    "html_url": "https://github.com/grpc/grpc/issues/7951#issuecomment-335998583",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/7951",
    "id": 335998583,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzNTk5ODU4Mw==",
    "user": {
      "login": "ebenoist",
      "id": 1656713,
      "node_id": "MDQ6VXNlcjE2NTY3MTM=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1656713?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ebenoist",
      "html_url": "https://github.com/ebenoist",
      "followers_url": "https://api.github.com/users/ebenoist/followers",
      "following_url": "https://api.github.com/users/ebenoist/following{/other_user}",
      "gists_url": "https://api.github.com/users/ebenoist/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ebenoist/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ebenoist/subscriptions",
      "organizations_url": "https://api.github.com/users/ebenoist/orgs",
      "repos_url": "https://api.github.com/users/ebenoist/repos",
      "events_url": "https://api.github.com/users/ebenoist/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ebenoist/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-12T02:03:03Z",
    "updated_at": "2017-10-12T02:03:03Z",
    "author_association": "NONE",
    "body": "For those looking for a quick fix, setting up your client in an `after_fork` works great.\r\n\r\n```Ruby\r\n# unicorn_config.rb\r\nrequire './party_pb'\r\nrequire './party_services_pb'\r\n\r\nworker_processes 4\r\nlisten 8080, :tcp_nopush => true\r\ntimeout 30\r\npreload_app true\r\n\r\ncheck_client_connection false\r\n\r\nafter_fork do |server, worker|\r\n  $client = Party::Stub.new(\r\n    \"localhost:3000\",\r\n    :this_channel_is_insecure\r\n  )\r\nend\r\n```\r\n\r\n```Ruby\r\n# app.rb\r\nrequire 'sinatra/base'\r\n\r\nclass App < Sinatra::Base\r\n  get '/' do\r\n    resp = $client.party_hard(User.new({ name: \"gRPC\" }))\r\n    puts resp.msg\r\n  end\r\nend\r\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/378769807",
    "html_url": "https://github.com/grpc/grpc/issues/7951#issuecomment-378769807",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/7951",
    "id": 378769807,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3ODc2OTgwNw==",
    "user": {
      "login": "ebenoist",
      "id": 1656713,
      "node_id": "MDQ6VXNlcjE2NTY3MTM=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1656713?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ebenoist",
      "html_url": "https://github.com/ebenoist",
      "followers_url": "https://api.github.com/users/ebenoist/followers",
      "following_url": "https://api.github.com/users/ebenoist/following{/other_user}",
      "gists_url": "https://api.github.com/users/ebenoist/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ebenoist/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ebenoist/subscriptions",
      "organizations_url": "https://api.github.com/users/ebenoist/orgs",
      "repos_url": "https://api.github.com/users/ebenoist/repos",
      "events_url": "https://api.github.com/users/ebenoist/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ebenoist/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-04T22:51:51Z",
    "updated_at": "2018-04-04T22:51:51Z",
    "author_association": "NONE",
    "body": "Would changing this wait to something less than infinite, or something configurable be possible in this case? To @bobbytables point, this is a footgun in the library that is sometimes difficult to catch before hitting a production environment.\r\n\r\n```C\r\n  // ext/grpc/rb_channel.c\r\n  while (!op->op.api_callback_args.called_back) {\r\n    gpr_cv_wait(&global_connection_polling_cv, &global_connection_polling_mu,\r\n                gpr_inf_future(GPR_CLOCK_REALTIME));\r\n  }\r\n```"
  }
]
