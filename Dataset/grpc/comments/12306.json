[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/325471495",
    "html_url": "https://github.com/grpc/grpc/pull/12306#issuecomment-325471495",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/12306",
    "id": 325471495,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNTQ3MTQ5NQ==",
    "user": {
      "login": "grpc-kokoro",
      "id": 12722905,
      "node_id": "MDQ6VXNlcjEyNzIyOTA1",
      "avatar_url": "https://avatars3.githubusercontent.com/u/12722905?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-kokoro",
      "html_url": "https://github.com/grpc-kokoro",
      "followers_url": "https://api.github.com/users/grpc-kokoro/followers",
      "following_url": "https://api.github.com/users/grpc-kokoro/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-kokoro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-kokoro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-kokoro/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-kokoro/orgs",
      "repos_url": "https://api.github.com/users/grpc-kokoro/repos",
      "events_url": "https://api.github.com/users/grpc-kokoro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-kokoro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-28T20:28:49Z",
    "updated_at": "2017-08-28T20:28:49Z",
    "author_association": "NONE",
    "body": "```\n[trickle] No significant performance differences\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/325480866",
    "html_url": "https://github.com/grpc/grpc/pull/12306#issuecomment-325480866",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/12306",
    "id": 325480866,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNTQ4MDg2Ng==",
    "user": {
      "login": "grpc-kokoro",
      "id": 12722905,
      "node_id": "MDQ6VXNlcjEyNzIyOTA1",
      "avatar_url": "https://avatars3.githubusercontent.com/u/12722905?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-kokoro",
      "html_url": "https://github.com/grpc-kokoro",
      "followers_url": "https://api.github.com/users/grpc-kokoro/followers",
      "following_url": "https://api.github.com/users/grpc-kokoro/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-kokoro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-kokoro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-kokoro/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-kokoro/orgs",
      "repos_url": "https://api.github.com/users/grpc-kokoro/repos",
      "events_url": "https://api.github.com/users/grpc-kokoro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-kokoro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-28T21:03:27Z",
    "updated_at": "2017-08-28T21:03:27Z",
    "author_association": "NONE",
    "body": "```\n[microbenchmarks] Performance differences noted:\nBenchmark                                                                                 atm_add_per_iteration    atm_cas_per_iteration    cpu_time    real_time\n----------------------------------------------------------------------------------------  -----------------------  -----------------------  ----------  -----------\nBM_PumpStreamServerToClient<InProcessCHTTP2>/16M                                                                                            -6%         -6%\nBM_StreamingPingPongWithCoalescingApi<InProcessCHTTP2, NoOpMutator, NoOpMutator>/16M/2/1                                                    -6%         -6%\nBM_TransportStreamSend/128M                                                               -99%                     -98%                     -99%        -99%\nBM_TransportStreamSend/16M                                                                -99%                     -88%                     -99%        -99%\nBM_TransportStreamSend/256k                                                               -73%                                              -74%        -74%\nBM_TransportStreamSend/2M                                                                 -95%                     -50%                     -96%        -96%\nBM_TransportStreamSend/32k                                                                -33%                                              -26%        -26%\nBM_TransportStreamSend/4k                                                                 -14%\nBM_TransportStreamSend/512                                                                -14%\nBM_TransportStreamSend/64                                                                 -14%\nBM_UnaryPingPong<InProcessCHTTP2, NoOpMutator, NoOpMutator>/0/16M                                                  -28%                     -41%        -41%\nBM_UnaryPingPong<MinInProcessCHTTP2, NoOpMutator, NoOpMutator>/0/16M                                               -29%                     -32%        -33%\nBM_UnaryPingPong<MinInProcessCHTTP2, NoOpMutator, NoOpMutator>/2M/0                                                -5%\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/325721012",
    "html_url": "https://github.com/grpc/grpc/pull/12306#issuecomment-325721012",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/12306",
    "id": 325721012,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNTcyMTAxMg==",
    "user": {
      "login": "kpayson64",
      "id": 18316330,
      "node_id": "MDQ6VXNlcjE4MzE2MzMw",
      "avatar_url": "https://avatars2.githubusercontent.com/u/18316330?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kpayson64",
      "html_url": "https://github.com/kpayson64",
      "followers_url": "https://api.github.com/users/kpayson64/followers",
      "following_url": "https://api.github.com/users/kpayson64/following{/other_user}",
      "gists_url": "https://api.github.com/users/kpayson64/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kpayson64/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kpayson64/subscriptions",
      "organizations_url": "https://api.github.com/users/kpayson64/orgs",
      "repos_url": "https://api.github.com/users/kpayson64/repos",
      "events_url": "https://api.github.com/users/kpayson64/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kpayson64/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-29T16:34:42Z",
    "updated_at": "2017-08-29T16:34:42Z",
    "author_association": "CONTRIBUTOR",
    "body": "I've switched up the implementation a bit to address memory leaks."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/325725061",
    "html_url": "https://github.com/grpc/grpc/pull/12306#issuecomment-325725061",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/12306",
    "id": 325725061,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNTcyNTA2MQ==",
    "user": {
      "login": "grpc-kokoro",
      "id": 12722905,
      "node_id": "MDQ6VXNlcjEyNzIyOTA1",
      "avatar_url": "https://avatars3.githubusercontent.com/u/12722905?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-kokoro",
      "html_url": "https://github.com/grpc-kokoro",
      "followers_url": "https://api.github.com/users/grpc-kokoro/followers",
      "following_url": "https://api.github.com/users/grpc-kokoro/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-kokoro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-kokoro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-kokoro/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-kokoro/orgs",
      "repos_url": "https://api.github.com/users/grpc-kokoro/repos",
      "events_url": "https://api.github.com/users/grpc-kokoro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-kokoro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-29T16:49:10Z",
    "updated_at": "2017-08-29T16:49:10Z",
    "author_association": "NONE",
    "body": "```\n[trickle] No significant performance differences\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/325734768",
    "html_url": "https://github.com/grpc/grpc/pull/12306#issuecomment-325734768",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/12306",
    "id": 325734768,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNTczNDc2OA==",
    "user": {
      "login": "grpc-kokoro",
      "id": 12722905,
      "node_id": "MDQ6VXNlcjEyNzIyOTA1",
      "avatar_url": "https://avatars3.githubusercontent.com/u/12722905?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-kokoro",
      "html_url": "https://github.com/grpc-kokoro",
      "followers_url": "https://api.github.com/users/grpc-kokoro/followers",
      "following_url": "https://api.github.com/users/grpc-kokoro/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-kokoro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-kokoro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-kokoro/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-kokoro/orgs",
      "repos_url": "https://api.github.com/users/grpc-kokoro/repos",
      "events_url": "https://api.github.com/users/grpc-kokoro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-kokoro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-29T17:23:25Z",
    "updated_at": "2017-08-29T17:23:25Z",
    "author_association": "NONE",
    "body": "```\n[microbenchmarks] Performance differences noted:\nBenchmark                                                                               atm_add_per_iteration    atm_cas_per_iteration    cpu_time    locks_per_iteration    nows_per_iteration    real_time\n--------------------------------------------------------------------------------------  -----------------------  -----------------------  ----------  ---------------------  --------------------  -----------\nBM_PumpStreamClientToServer<InProcess>/128M                                                                                               +10%                                                     +9%\nBM_PumpStreamClientToServer<InProcess>/256k                                                                                               +23%                                                     +24%\nBM_PumpStreamClientToServer<InProcess>/32k                                                                                                +20%                                                     +20%\nBM_PumpStreamServerToClient<InProcess>/128M                                                                                               +7%                                                      +7%\nBM_PumpStreamServerToClient<InProcess>/2M                                                                                                 +9%                                                      +7%\nBM_PumpStreamServerToClient<InProcess>/32k                                                                                                +22%                                                     +23%\nBM_PumpStreamServerToClient<InProcessCHTTP2>/256k                                                                                                                                                  +4%\nBM_PumpStreamServerToClient<InProcessCHTTP2>/32k                                                                                          +10%                                                     +9%\nBM_PumpStreamServerToClient<TCP>/128M                                                                                                     +10%                                                     +9%\nBM_PumpStreamServerToClient<UDS>/2M                                                                                                       +7%                                                      +7%\nBM_SliceFromStatic                                                                                                                        +15%                                                     +15%\nBM_StreamingPingPong<InProcess, NoOpMutator, NoOpMutator>/128M/2                                                                          +4%                                                      +4%\nBM_StreamingPingPong<InProcess, NoOpMutator, NoOpMutator>/16M/2                                                                           +7%                                                      +6%\nBM_StreamingPingPong<TCP, NoOpMutator, NoOpMutator>/16M/2                                                                                 +11%                                                     +11%\nBM_StreamingPingPongMsgs<MinTCP, NoOpMutator, NoOpMutator>/128M                                                                           +4%                                                      +4%\nBM_StreamingPingPongMsgs<TCP, NoOpMutator, NoOpMutator>/128M                                                                              +4%                                                      +4%\nBM_StreamingPingPongWithCoalescingApi<InProcess, NoOpMutator, NoOpMutator>/128M/1/0                                                       +7%                                                      +7%\nBM_StreamingPingPongWithCoalescingApi<InProcess, NoOpMutator, NoOpMutator>/128M/1/1                                                                                          +5%\nBM_StreamingPingPongWithCoalescingApi<InProcess, NoOpMutator, NoOpMutator>/128M/2/1                                                       +4%                                                      +4%\nBM_StreamingPingPongWithCoalescingApi<MinInProcess, NoOpMutator, NoOpMutator>/128M/1/0                                                    +4%                                                      +4%\nBM_StreamingPingPongWithCoalescingApi<MinInProcess, NoOpMutator, NoOpMutator>/128M/1/1                                                                                       +4%\nBM_StreamingPingPongWithCoalescingApi<MinInProcess, NoOpMutator, NoOpMutator>/128M/2/0                                                    +6%                                                      +6%\nBM_StreamingPingPongWithCoalescingApi<MinInProcess, NoOpMutator, NoOpMutator>/128M/2/1                                                    +6%                                                      +6%\nBM_StreamingPingPongWithCoalescingApi<MinInProcess, NoOpMutator, NoOpMutator>/16M/1/1                                                     +10%                                                     +10%\nBM_TransportStreamSend/128M                                                             -99%                     -98%                     -99%                                                     -99%\nBM_TransportStreamSend/16M                                                              -99%                     -88%                     -99%                                                     -99%\nBM_TransportStreamSend/256k                                                             -73%                                              -76%                                                     -76%\nBM_TransportStreamSend/2M                                                               -95%                     -50%                     -96%                                                     -96%\nBM_TransportStreamSend/32k                                                              -33%                                              -29%                                                     -29%\nBM_TransportStreamSend/4k                                                               -14%\nBM_TransportStreamSend/512                                                              -14%\nBM_TransportStreamSend/64                                                               -14%\nBM_UnaryPingPong<InProcessCHTTP2, NoOpMutator, NoOpMutator>/0/16M                                                -18%                     -24%        -4%                                          -25%\nBM_UnaryPingPong<MinInProcess, NoOpMutator, NoOpMutator>/0/16M                                                   +9%\nBM_UnaryPingPong<MinInProcess, NoOpMutator, NoOpMutator>/0/2M                                                    +7%\nBM_UnaryPingPong<MinInProcessCHTTP2, NoOpMutator, NoOpMutator>/0/16M                                             -16%                     -20%                                                     -21%\nBM_UnaryPingPong<TCP, NoOpMutator, NoOpMutator>/128M/0                                                                                    +5%                                                      +5%\nBM_UnaryPingPong<TCP, NoOpMutator, NoOpMutator>/128M/128M                                                                                                                                          +4%\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/325750017",
    "html_url": "https://github.com/grpc/grpc/pull/12306#issuecomment-325750017",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/12306",
    "id": 325750017,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNTc1MDAxNw==",
    "user": {
      "login": "ctiller",
      "id": 10120821,
      "node_id": "MDQ6VXNlcjEwMTIwODIx",
      "avatar_url": "https://avatars3.githubusercontent.com/u/10120821?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ctiller",
      "html_url": "https://github.com/ctiller",
      "followers_url": "https://api.github.com/users/ctiller/followers",
      "following_url": "https://api.github.com/users/ctiller/following{/other_user}",
      "gists_url": "https://api.github.com/users/ctiller/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ctiller/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ctiller/subscriptions",
      "organizations_url": "https://api.github.com/users/ctiller/orgs",
      "repos_url": "https://api.github.com/users/ctiller/repos",
      "events_url": "https://api.github.com/users/ctiller/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ctiller/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-29T18:17:52Z",
    "updated_at": "2017-08-29T18:17:52Z",
    "author_association": "MEMBER",
    "body": "If the transport stream op batch structure owns the payload, I'd expect to see some cleanup code in grpc_transport_stream_op_batch_finish_with_failure."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/325754862",
    "html_url": "https://github.com/grpc/grpc/pull/12306#issuecomment-325754862",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/12306",
    "id": 325754862,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNTc1NDg2Mg==",
    "user": {
      "login": "kpayson64",
      "id": 18316330,
      "node_id": "MDQ6VXNlcjE4MzE2MzMw",
      "avatar_url": "https://avatars2.githubusercontent.com/u/18316330?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kpayson64",
      "html_url": "https://github.com/kpayson64",
      "followers_url": "https://api.github.com/users/kpayson64/followers",
      "following_url": "https://api.github.com/users/kpayson64/following{/other_user}",
      "gists_url": "https://api.github.com/users/kpayson64/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kpayson64/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kpayson64/subscriptions",
      "organizations_url": "https://api.github.com/users/kpayson64/orgs",
      "repos_url": "https://api.github.com/users/kpayson64/repos",
      "events_url": "https://api.github.com/users/kpayson64/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kpayson64/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-29T18:33:47Z",
    "updated_at": "2017-08-29T18:33:47Z",
    "author_association": "CONTRIBUTOR",
    "body": "@ctiller \r\nMore specifically, I've changed ```grpc_slice_buffer_stream``` to take ownership of the slices in the backing stream.  As long as we are calling ```grpc_buffer_stream_destroy``` at the end of the transport stream ops, the memory gets freed.  (I've confirmed the \"early free\" behavior)."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/325774565",
    "html_url": "https://github.com/grpc/grpc/pull/12306#issuecomment-325774565",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/12306",
    "id": 325774565,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNTc3NDU2NQ==",
    "user": {
      "login": "grpc-kokoro",
      "id": 12722905,
      "node_id": "MDQ6VXNlcjEyNzIyOTA1",
      "avatar_url": "https://avatars3.githubusercontent.com/u/12722905?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-kokoro",
      "html_url": "https://github.com/grpc-kokoro",
      "followers_url": "https://api.github.com/users/grpc-kokoro/followers",
      "following_url": "https://api.github.com/users/grpc-kokoro/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-kokoro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-kokoro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-kokoro/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-kokoro/orgs",
      "repos_url": "https://api.github.com/users/grpc-kokoro/repos",
      "events_url": "https://api.github.com/users/grpc-kokoro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-kokoro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-29T19:33:50Z",
    "updated_at": "2017-08-29T19:33:50Z",
    "author_association": "NONE",
    "body": "```\n[trickle] No significant performance differences\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/325777382",
    "html_url": "https://github.com/grpc/grpc/pull/12306#issuecomment-325777382",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/12306",
    "id": 325777382,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNTc3NzM4Mg==",
    "user": {
      "login": "grpc-kokoro",
      "id": 12722905,
      "node_id": "MDQ6VXNlcjEyNzIyOTA1",
      "avatar_url": "https://avatars3.githubusercontent.com/u/12722905?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-kokoro",
      "html_url": "https://github.com/grpc-kokoro",
      "followers_url": "https://api.github.com/users/grpc-kokoro/followers",
      "following_url": "https://api.github.com/users/grpc-kokoro/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-kokoro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-kokoro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-kokoro/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-kokoro/orgs",
      "repos_url": "https://api.github.com/users/grpc-kokoro/repos",
      "events_url": "https://api.github.com/users/grpc-kokoro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-kokoro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-29T19:41:01Z",
    "updated_at": "2017-08-29T19:41:01Z",
    "author_association": "NONE",
    "body": "```\n[microbenchmarks] Performance differences noted:\nBenchmark                                                                                  atm_add_per_iteration    atm_cas_per_iteration    cpu_time    locks_per_iteration    real_time\n-----------------------------------------------------------------------------------------  -----------------------  -----------------------  ----------  ---------------------  -----------\nBM_PumpStreamClientToServer<InProcessCHTTP2>/16M                                                                                             -4%\nBM_SliceFromStatic                                                                                                                           +8%                                +7%\nBM_StreamingPingPongWithCoalescingApi<InProcessCHTTP2, NoOpMutator, NoOpMutator>/128M/2/0                                                    -9%                                -9%\nBM_TransportStreamSend/128M                                                                -99%                     -98%                     -99%                               -99%\nBM_TransportStreamSend/16M                                                                 -99%                     -88%                     -99%                               -99%\nBM_TransportStreamSend/256k                                                                -73%                                              -75%                               -75%\nBM_TransportStreamSend/2M                                                                  -95%                     -50%                     -96%                               -96%\nBM_TransportStreamSend/32k                                                                 -33%                                              -23%                               -23%\nBM_TransportStreamSend/4k                                                                  -14%\nBM_TransportStreamSend/512                                                                 -14%\nBM_TransportStreamSend/64                                                                  -14%\nBM_UnaryPingPong<InProcessCHTTP2, NoOpMutator, NoOpMutator>/0/16M                                                   -26%                     -35%                               -35%\nBM_UnaryPingPong<MinInProcessCHTTP2, NoOpMutator, NoOpMutator>/0/16M                                                -34%                     -31%        -4%                    -31%\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/325814143",
    "html_url": "https://github.com/grpc/grpc/pull/12306#issuecomment-325814143",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/12306",
    "id": 325814143,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNTgxNDE0Mw==",
    "user": {
      "login": "markdroth",
      "id": 18664614,
      "node_id": "MDQ6VXNlcjE4NjY0NjE0",
      "avatar_url": "https://avatars2.githubusercontent.com/u/18664614?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/markdroth",
      "html_url": "https://github.com/markdroth",
      "followers_url": "https://api.github.com/users/markdroth/followers",
      "following_url": "https://api.github.com/users/markdroth/following{/other_user}",
      "gists_url": "https://api.github.com/users/markdroth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/markdroth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/markdroth/subscriptions",
      "organizations_url": "https://api.github.com/users/markdroth/orgs",
      "repos_url": "https://api.github.com/users/markdroth/repos",
      "events_url": "https://api.github.com/users/markdroth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/markdroth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-29T21:47:25Z",
    "updated_at": "2017-08-29T21:47:25Z",
    "author_association": "MEMBER",
    "body": "Please add a comment documenting the semantics somewhere around here:\r\n\r\nhttps://github.com/grpc/grpc/blob/master/include/grpc/impl/codegen/grpc_types.h#L514"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/326049548",
    "html_url": "https://github.com/grpc/grpc/pull/12306#issuecomment-326049548",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/12306",
    "id": 326049548,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNjA0OTU0OA==",
    "user": {
      "login": "grpc-kokoro",
      "id": 12722905,
      "node_id": "MDQ6VXNlcjEyNzIyOTA1",
      "avatar_url": "https://avatars3.githubusercontent.com/u/12722905?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-kokoro",
      "html_url": "https://github.com/grpc-kokoro",
      "followers_url": "https://api.github.com/users/grpc-kokoro/followers",
      "following_url": "https://api.github.com/users/grpc-kokoro/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-kokoro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-kokoro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-kokoro/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-kokoro/orgs",
      "repos_url": "https://api.github.com/users/grpc-kokoro/repos",
      "events_url": "https://api.github.com/users/grpc-kokoro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-kokoro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-30T16:43:18Z",
    "updated_at": "2017-08-30T16:43:18Z",
    "author_association": "NONE",
    "body": "```\n[microbenchmarks] Performance differences noted:\nBenchmark                                                                                     atm_add_per_iteration    atm_cas_per_iteration    cpu_time    locks_per_iteration    real_time\n--------------------------------------------------------------------------------------------  -----------------------  -----------------------  ----------  ---------------------  -----------\nBM_StreamingPingPong<InProcessCHTTP2, NoOpMutator, NoOpMutator>/128M/2                                                                          -5%                                -5%\nBM_StreamingPingPongMsgs<MinInProcess, NoOpMutator, NoOpMutator>/32k                                                                            +10%                               +9%\nBM_StreamingPingPongMsgs<MinInProcessCHTTP2, NoOpMutator, NoOpMutator>/32k                                                                      +9%                                +8%\nBM_StreamingPingPongWithCoalescingApi<InProcessCHTTP2, NoOpMutator, NoOpMutator>/128M/2/0                                                       -5%                                -4%\nBM_StreamingPingPongWithCoalescingApi<MinInProcess, NoOpMutator, NoOpMutator>/32k/1/0                                                           +8%                                +8%\nBM_StreamingPingPongWithCoalescingApi<MinInProcessCHTTP2, NoOpMutator, NoOpMutator>/128M/2/0                                                    -6%                                -6%\nBM_StreamingPingPongWithCoalescingApi<MinInProcessCHTTP2, NoOpMutator, NoOpMutator>/128M/2/1                                                    -4%                                -4%\nBM_TransportStreamSend/128M                                                                   -99%                     -98%                     -99%                               -99%\nBM_TransportStreamSend/16M                                                                    -99%                     -88%                     -99%                               -99%\nBM_TransportStreamSend/256k                                                                   -73%                                              -75%                               -75%\nBM_TransportStreamSend/2M                                                                     -95%                     -50%                     -96%                               -96%\nBM_TransportStreamSend/32k                                                                    -33%                                              -28%                               -28%\nBM_TransportStreamSend/4k                                                                     -14%\nBM_TransportStreamSend/512                                                                    -14%\nBM_TransportStreamSend/64                                                                     -14%                                              -8%                                -8%\nBM_UnaryPingPong<InProcessCHTTP2, NoOpMutator, NoOpMutator>/0/16M                                                      -30%                     -35%                               -34%\nBM_UnaryPingPong<InProcessCHTTP2, NoOpMutator, NoOpMutator>/2M/0                                                       -12%\nBM_UnaryPingPong<MinInProcessCHTTP2, NoOpMutator, NoOpMutator>/0/16M                                                   -24%                     -36%        -4%                    -36%\nBM_UnaryPingPong<MinInProcessCHTTP2, NoOpMutator, NoOpMutator>/2M/0                                                    -6%                      -11%                               -12%\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/326055142",
    "html_url": "https://github.com/grpc/grpc/pull/12306#issuecomment-326055142",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/12306",
    "id": 326055142,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNjA1NTE0Mg==",
    "user": {
      "login": "grpc-kokoro",
      "id": 12722905,
      "node_id": "MDQ6VXNlcjEyNzIyOTA1",
      "avatar_url": "https://avatars3.githubusercontent.com/u/12722905?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-kokoro",
      "html_url": "https://github.com/grpc-kokoro",
      "followers_url": "https://api.github.com/users/grpc-kokoro/followers",
      "following_url": "https://api.github.com/users/grpc-kokoro/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-kokoro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-kokoro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-kokoro/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-kokoro/orgs",
      "repos_url": "https://api.github.com/users/grpc-kokoro/repos",
      "events_url": "https://api.github.com/users/grpc-kokoro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-kokoro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-30T17:02:21Z",
    "updated_at": "2017-08-30T17:02:21Z",
    "author_association": "NONE",
    "body": "```\nCorrupt JSON data (indicates timeout or crash): \n    bm_fullstack_trickle.BM_PumpStreamServerToClient_Trickle_2M_32k.opt.new: 1\n\n\n[trickle] No significant performance differences\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/326394640",
    "html_url": "https://github.com/grpc/grpc/pull/12306#issuecomment-326394640",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/12306",
    "id": 326394640,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNjM5NDY0MA==",
    "user": {
      "login": "kpayson64",
      "id": 18316330,
      "node_id": "MDQ6VXNlcjE4MzE2MzMw",
      "avatar_url": "https://avatars2.githubusercontent.com/u/18316330?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kpayson64",
      "html_url": "https://github.com/kpayson64",
      "followers_url": "https://api.github.com/users/kpayson64/followers",
      "following_url": "https://api.github.com/users/kpayson64/following{/other_user}",
      "gists_url": "https://api.github.com/users/kpayson64/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kpayson64/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kpayson64/subscriptions",
      "organizations_url": "https://api.github.com/users/kpayson64/orgs",
      "repos_url": "https://api.github.com/users/kpayson64/repos",
      "events_url": "https://api.github.com/users/kpayson64/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kpayson64/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-31T19:17:00Z",
    "updated_at": "2017-08-31T19:17:00Z",
    "author_association": "CONTRIBUTOR",
    "body": "Issues:\r\n#12315\r\n#11737\r\n#10643"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/330077259",
    "html_url": "https://github.com/grpc/grpc/pull/12306#issuecomment-330077259",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/12306",
    "id": 330077259,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMDA3NzI1OQ==",
    "user": {
      "login": "RyanGordon",
      "id": 535118,
      "node_id": "MDQ6VXNlcjUzNTExOA==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/535118?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/RyanGordon",
      "html_url": "https://github.com/RyanGordon",
      "followers_url": "https://api.github.com/users/RyanGordon/followers",
      "following_url": "https://api.github.com/users/RyanGordon/following{/other_user}",
      "gists_url": "https://api.github.com/users/RyanGordon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/RyanGordon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/RyanGordon/subscriptions",
      "organizations_url": "https://api.github.com/users/RyanGordon/orgs",
      "repos_url": "https://api.github.com/users/RyanGordon/repos",
      "events_url": "https://api.github.com/users/RyanGordon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/RyanGordon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-17T19:29:28Z",
    "updated_at": "2017-09-17T19:29:28Z",
    "author_association": "CONTRIBUTOR",
    "body": "In developing a gRPC HHVM extension, I've come across a memory corruption issue related to this. The issue appears to happen in the following situation:\r\n- In the client a timeout is set low in `grpc_completion_queue_next` and the timeout is hit before the response is received by the client\r\n- Thus `grpc_byte_buffer_destroy` is called to cleanup since `grpc_completion_queue_next` has returned.\r\n- Then at some point the response may be received and `grpc_slice_buffer_reset_and_unref_internal` will be called but dealing with already-freed memory and potentially causing memory corruption which leads to other issues.\r\n\r\nThis behavior is observed in valgrind in the timeout case as follows:\r\n```\r\n==21456== Invalid read of size 8\r\n==21456==    at 0x1678C591: grpc_slice_buffer_reset_and_unref_internal (slice_buffer.c:169)\r\n==21456==    by 0x167A1143: slice_buffer_stream_destroy (byte_stream.c:92)\r\n==21456==    by 0x167A0F1A: grpc_byte_stream_destroy (byte_stream.c:49)\r\n==21456==    by 0x167A6D78: grpc_transport_stream_op_batch_finish_with_failure (transport.c:218)\r\n==21456==    by 0x167E782B: waiting_for_pick_batches_fail (client_channel.c:909)\r\n==21456==    by 0x167E8030: pick_done_locked (client_channel.c:1038)\r\n==21456==    by 0x167E80E2: async_pick_done_locked (client_channel.c:1056)\r\n==21456==    by 0x167E86F4: pick_after_resolver_result_cancel_locked (client_channel.c:1196)\r\n==21456==    by 0x16763568: grpc_combiner_continue_exec_ctx (combiner.c:259)\r\n==21456==    by 0x167758B0: grpc_exec_ctx_flush (exec_ctx.c:93)\r\n==21456==    by 0x16775A57: run_closures (executor.c:81)\r\n==21456==    by 0x167760FB: executor_thread (executor.c:181)\r\n==21456==  Address 0x15cc5208 is 40 bytes inside a block of size 320 free'd\r\n==21456==    at 0x51C4CDD: free (vg_replace_malloc.c:530)\r\n==21456==    by 0x16811FAE: gpr_free (alloc.c:78)\r\n==21456==    by 0x1678F659: grpc_byte_buffer_destroy (byte_buffer.c:80)\r\n==21456==    by 0x164B46F4: HPHP::OpsManaged::freeMessage(grpc_byte_buffer*) (call.cpp:309)\r\n==21456==    by 0x164BD39F: void (*std::for_each<grpc_byte_buffer**, void (*)(grpc_byte_buffer*)>(grpc_byte_buffer**, grpc_byte_buffer**, void (*)(grpc_byte_buffer*)))(grpc_byte_buffer*) (stl_algo.h:3756)\r\n==21456==    by 0x164B4697: HPHP::OpsManaged::destroy() (call.cpp:302)\r\n==21456==    by 0x164B456D: HPHP::OpsManaged::~OpsManaged() (call.cpp:291)\r\n==21456==    by 0x164BE8DF: std::default_delete<HPHP::OpsManaged>::operator()(HPHP::OpsManaged*) const (unique_ptr.h:76)\r\n==21456==    by 0x164BD0B4: std::unique_ptr<HPHP::OpsManaged, std::default_delete<HPHP::OpsManaged> >::reset(HPHP::OpsManaged*) (unique_ptr.h:344)\r\n==21456==    by 0x164BD159: std::unique_ptr<HPHP::OpsManaged, std::default_delete<HPHP::OpsManaged> >::operator=(std::unique_ptr<HPHP::OpsManaged, std::default_delete<HPHP::OpsManaged> >&&) (unique_ptr.h:251)\r\n==21456==    by 0x164B24E9: HPHP::CallData::setOpsManaged(std::unique_ptr<HPHP::OpsManaged, std::default_delete<HPHP::OpsManaged> >&&) (call.cpp:127)\r\n==21456==    by 0x164B4F6D: HPHP::c_Call_ni_startBatch(HPHP::ObjectData*, HPHP::Array const&) (call.cpp:391)\r\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/330288139",
    "html_url": "https://github.com/grpc/grpc/pull/12306#issuecomment-330288139",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/12306",
    "id": 330288139,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMDI4ODEzOQ==",
    "user": {
      "login": "kpayson64",
      "id": 18316330,
      "node_id": "MDQ6VXNlcjE4MzE2MzMw",
      "avatar_url": "https://avatars2.githubusercontent.com/u/18316330?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kpayson64",
      "html_url": "https://github.com/kpayson64",
      "followers_url": "https://api.github.com/users/kpayson64/followers",
      "following_url": "https://api.github.com/users/kpayson64/following{/other_user}",
      "gists_url": "https://api.github.com/users/kpayson64/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kpayson64/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kpayson64/subscriptions",
      "organizations_url": "https://api.github.com/users/kpayson64/orgs",
      "repos_url": "https://api.github.com/users/kpayson64/repos",
      "events_url": "https://api.github.com/users/kpayson64/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kpayson64/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-18T17:04:50Z",
    "updated_at": "2017-09-18T17:04:50Z",
    "author_association": "CONTRIBUTOR",
    "body": "@RyanGordon Do you have a pointer to the HHVM code that you are using that is running into this issue?\r\n\r\nSpecifically, I'm interested in your second bullet point:\r\n-Thus grpc_byte_buffer_destroy is called to cleanup since grpc_completion_queue_next has returned.\r\n\r\nYou shouldn't be calling ```grpc_byte_buffer_destroy``` until the operation has completed.  A ```completion_queue_next``` call timing out is not the same as the call timing out, the latter needs happen before you destroy any memory passed in with the call."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/330333844",
    "html_url": "https://github.com/grpc/grpc/pull/12306#issuecomment-330333844",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/12306",
    "id": 330333844,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMDMzMzg0NA==",
    "user": {
      "login": "RyanGordon",
      "id": 535118,
      "node_id": "MDQ6VXNlcjUzNTExOA==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/535118?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/RyanGordon",
      "html_url": "https://github.com/RyanGordon",
      "followers_url": "https://api.github.com/users/RyanGordon/followers",
      "following_url": "https://api.github.com/users/RyanGordon/following{/other_user}",
      "gists_url": "https://api.github.com/users/RyanGordon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/RyanGordon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/RyanGordon/subscriptions",
      "organizations_url": "https://api.github.com/users/RyanGordon/orgs",
      "repos_url": "https://api.github.com/users/RyanGordon/repos",
      "events_url": "https://api.github.com/users/RyanGordon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/RyanGordon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-18T19:41:03Z",
    "updated_at": "2017-09-18T19:41:03Z",
    "author_association": "CONTRIBUTOR",
    "body": "@kpayson64 Yes absolutely:\r\n\r\nThis is where we do the completion_queue_next call with the timeout argument: https://github.com/grpc/grpc/pull/11553/files#diff-1a64209204460e9c92631584fb266047R597\r\n\r\nIf the timeout happens then we call grpc_call_cancel_with_status: https://github.com/grpc/grpc/pull/11553/files#diff-1a64209204460e9c92631584fb266047R576\r\n\r\nAnd then before we start the next call grpc_byte_buffer_destroy gets called: https://github.com/grpc/grpc/pull/11553/files#diff-1a64209204460e9c92631584fb266047R312\r\n\r\nI guess I don't know how we would know when the call itself has timed out or how to wait on that differently than what we currently do?\r\n\r\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/330337644",
    "html_url": "https://github.com/grpc/grpc/pull/12306#issuecomment-330337644",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/12306",
    "id": 330337644,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMDMzNzY0NA==",
    "user": {
      "login": "kpayson64",
      "id": 18316330,
      "node_id": "MDQ6VXNlcjE4MzE2MzMw",
      "avatar_url": "https://avatars2.githubusercontent.com/u/18316330?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kpayson64",
      "html_url": "https://github.com/kpayson64",
      "followers_url": "https://api.github.com/users/kpayson64/followers",
      "following_url": "https://api.github.com/users/kpayson64/following{/other_user}",
      "gists_url": "https://api.github.com/users/kpayson64/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kpayson64/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kpayson64/subscriptions",
      "organizations_url": "https://api.github.com/users/kpayson64/orgs",
      "repos_url": "https://api.github.com/users/kpayson64/repos",
      "events_url": "https://api.github.com/users/kpayson64/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kpayson64/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-18T19:55:31Z",
    "updated_at": "2017-09-18T19:55:31Z",
    "author_association": "CONTRIBUTOR",
    "body": "@RyanGordon \r\nI think you should rely on the call timing out rather than ```grpc_completion_queue_next()``` timing out.\r\n\r\n```grpc_channel_create_call()``` has a parameter for a deadline.  If the deadline is reached, the call will be cancelled internally, and ```grpc_completion_queue_next()``` will return an event that the call has finished (unsuccessfully).  At this point it is safe to destroy memory associated with the call.\r\n\r\nIf for some reason you need to manually call ```grpc_call_cancel_with_status()```, you should call ```grpc_completion_queue_next()``` after cancelling the call, which will return an unsuccessful completion for the call.  At this point, it is safe to call ```OpsManaged::freeMessage```\r\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/330338698",
    "html_url": "https://github.com/grpc/grpc/pull/12306#issuecomment-330338698",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/12306",
    "id": 330338698,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMDMzODY5OA==",
    "user": {
      "login": "RyanGordon",
      "id": 535118,
      "node_id": "MDQ6VXNlcjUzNTExOA==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/535118?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/RyanGordon",
      "html_url": "https://github.com/RyanGordon",
      "followers_url": "https://api.github.com/users/RyanGordon/followers",
      "following_url": "https://api.github.com/users/RyanGordon/following{/other_user}",
      "gists_url": "https://api.github.com/users/RyanGordon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/RyanGordon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/RyanGordon/subscriptions",
      "organizations_url": "https://api.github.com/users/RyanGordon/orgs",
      "repos_url": "https://api.github.com/users/RyanGordon/repos",
      "events_url": "https://api.github.com/users/RyanGordon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/RyanGordon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-18T19:59:31Z",
    "updated_at": "2017-09-18T19:59:31Z",
    "author_association": "CONTRIBUTOR",
    "body": "@kpayson64 Thank you for explaining that - definitely did not realize the interactions there.\r\n\r\nHonestly, the only reason why we added a timeout to grpc_completion_queue_next is because during stress testing the `epoll_wait/epoll_pwait` would sometimes hang indefinitely and we couldn't track down the reason why. We think it might be related to [this](https://github.com/grpc/grpc/pull/12374) or related to memory corruption issues but we haven't been able to track down why yet unfortunately"
  }
]
