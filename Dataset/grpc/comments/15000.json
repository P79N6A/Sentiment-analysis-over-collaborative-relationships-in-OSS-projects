[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/380847344",
    "html_url": "https://github.com/grpc/grpc/issues/15000#issuecomment-380847344",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15000",
    "id": 380847344,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MDg0NzM0NA==",
    "user": {
      "login": "markdroth",
      "id": 18664614,
      "node_id": "MDQ6VXNlcjE4NjY0NjE0",
      "avatar_url": "https://avatars2.githubusercontent.com/u/18664614?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/markdroth",
      "html_url": "https://github.com/markdroth",
      "followers_url": "https://api.github.com/users/markdroth/followers",
      "following_url": "https://api.github.com/users/markdroth/following{/other_user}",
      "gists_url": "https://api.github.com/users/markdroth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/markdroth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/markdroth/subscriptions",
      "organizations_url": "https://api.github.com/users/markdroth/orgs",
      "repos_url": "https://api.github.com/users/markdroth/repos",
      "events_url": "https://api.github.com/users/markdroth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/markdroth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-12T15:32:12Z",
    "updated_at": "2018-04-12T15:32:12Z",
    "author_association": "MEMBER",
    "body": "Can you provide the log output when running your test with the environment variable `GRPC_TRACE=client_channel,pick_first` set?  Thanks!"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/380855937",
    "html_url": "https://github.com/grpc/grpc/issues/15000#issuecomment-380855937",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15000",
    "id": 380855937,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MDg1NTkzNw==",
    "user": {
      "login": "rainerschoe",
      "id": 36071440,
      "node_id": "MDQ6VXNlcjM2MDcxNDQw",
      "avatar_url": "https://avatars1.githubusercontent.com/u/36071440?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rainerschoe",
      "html_url": "https://github.com/rainerschoe",
      "followers_url": "https://api.github.com/users/rainerschoe/followers",
      "following_url": "https://api.github.com/users/rainerschoe/following{/other_user}",
      "gists_url": "https://api.github.com/users/rainerschoe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rainerschoe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rainerschoe/subscriptions",
      "organizations_url": "https://api.github.com/users/rainerschoe/orgs",
      "repos_url": "https://api.github.com/users/rainerschoe/repos",
      "events_url": "https://api.github.com/users/rainerschoe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rainerschoe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-12T15:57:46Z",
    "updated_at": "2018-04-12T15:57:46Z",
    "author_association": "NONE",
    "body": "The trace mask you specified did not generate any additional output on stdout.\r\nI tried with `GRPC_TRACE=all` instead. Here is the resulting output:\r\n[traces.txt](https://github.com/grpc/grpc/files/1903956/traces.txt)\r\nPlease note that the client produces stdout output in the following form when run without traces enabled:\r\n```\r\n-----------------\r\nGreeter received: Hello world 6\r\n-----------------\r\nGreeter received: Hello world 7\r\n-----------------\r\n14: Socket closed\r\nRPC failed\r\n-----------------\r\n14: Connect Failed\r\nRPC failed\r\n```\r\nIf it is helpful I can send you the modified client and server example code. I will have to clean it up a little however."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/380862681",
    "html_url": "https://github.com/grpc/grpc/issues/15000#issuecomment-380862681",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15000",
    "id": 380862681,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MDg2MjY4MQ==",
    "user": {
      "login": "rainerschoe",
      "id": 36071440,
      "node_id": "MDQ6VXNlcjM2MDcxNDQw",
      "avatar_url": "https://avatars1.githubusercontent.com/u/36071440?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rainerschoe",
      "html_url": "https://github.com/rainerschoe",
      "followers_url": "https://api.github.com/users/rainerschoe/followers",
      "following_url": "https://api.github.com/users/rainerschoe/following{/other_user}",
      "gists_url": "https://api.github.com/users/rainerschoe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rainerschoe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rainerschoe/subscriptions",
      "organizations_url": "https://api.github.com/users/rainerschoe/orgs",
      "repos_url": "https://api.github.com/users/rainerschoe/repos",
      "events_url": "https://api.github.com/users/rainerschoe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rainerschoe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-12T16:19:04Z",
    "updated_at": "2018-04-12T16:19:04Z",
    "author_association": "NONE",
    "body": "Here is my test example\r\n[modified_greeter_example.zip](https://github.com/grpc/grpc/files/1904067/modified_greeter_example.zip) Warning: all files directly added to the archive => extract into a new folder\r\n\r\nRun like this (assuming your system is set up with two IPs 10.0.1.[17|18] and /etc/hosts has an entry directing grpctest to 10.0.1.17):\r\n1. ./greeter_server 10.0.1.17:5001\r\n1. ./greeter_client grpctest:5001\r\n1. kill the server and wait 2-3 seconds\r\n1. ./greeter_server 10.0.1.18:5001\r\n1. change /etc/hosts\r\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/395158347",
    "html_url": "https://github.com/grpc/grpc/issues/15000#issuecomment-395158347",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15000",
    "id": 395158347,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NTE1ODM0Nw==",
    "user": {
      "login": "markdroth",
      "id": 18664614,
      "node_id": "MDQ6VXNlcjE4NjY0NjE0",
      "avatar_url": "https://avatars2.githubusercontent.com/u/18664614?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/markdroth",
      "html_url": "https://github.com/markdroth",
      "followers_url": "https://api.github.com/users/markdroth/followers",
      "following_url": "https://api.github.com/users/markdroth/following{/other_user}",
      "gists_url": "https://api.github.com/users/markdroth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/markdroth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/markdroth/subscriptions",
      "organizations_url": "https://api.github.com/users/markdroth/orgs",
      "repos_url": "https://api.github.com/users/markdroth/repos",
      "events_url": "https://api.github.com/users/markdroth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/markdroth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-06T17:55:23Z",
    "updated_at": "2018-06-06T17:55:23Z",
    "author_association": "MEMBER",
    "body": "Sorry for the delay on this.\r\n\r\nThe trace output doesn't contain the info I was looking for.  You may need to set `GRPC_VERBOSITY=DEBUG` in addition to `GRPC_TRACE=client_channel,pick_first`.\r\n\r\nAfter you update /etc/hosts, there may be one more RPC failure, because the channel is already in CONNECTING state at that point and will not re-resolve the name until it transitions back into TRANSIENT_FAILURE state.  But after that, it should re-resolve, and subsequent RPCs should succeed.  Is that what you're seeing?  If so, this is probably working as intended.  If not, then there's probably some bug here, and the trace output I'm looking for should help me figure out what it is.\r\n\r\nIf you are seeing the behavior that I describe but want the channel to more proactively re-resolve, then this is probably the same issue as #12295.  The recommended way to deal with this right now is to use the server max connection age setting to periodically drop connections, which will force clients to re-resolve.\r\n\r\nUltimately, if you really want a system that very proactively responds to backend changes, then DNS is probably not a good fit for your use-case.  Instead, you should probably use some notification-based name resolution mechanism; for related discussion, see #13639."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/398813298",
    "html_url": "https://github.com/grpc/grpc/issues/15000#issuecomment-398813298",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15000",
    "id": 398813298,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5ODgxMzI5OA==",
    "user": {
      "login": "rainerschoe",
      "id": 36071440,
      "node_id": "MDQ6VXNlcjM2MDcxNDQw",
      "avatar_url": "https://avatars1.githubusercontent.com/u/36071440?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rainerschoe",
      "html_url": "https://github.com/rainerschoe",
      "followers_url": "https://api.github.com/users/rainerschoe/followers",
      "following_url": "https://api.github.com/users/rainerschoe/following{/other_user}",
      "gists_url": "https://api.github.com/users/rainerschoe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rainerschoe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rainerschoe/subscriptions",
      "organizations_url": "https://api.github.com/users/rainerschoe/orgs",
      "repos_url": "https://api.github.com/users/rainerschoe/repos",
      "events_url": "https://api.github.com/users/rainerschoe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rainerschoe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-20T16:29:31Z",
    "updated_at": "2018-06-20T16:30:05Z",
    "author_association": "NONE",
    "body": "Hi, thanks for your reply.\r\n\r\nI am seeing ALL subsequent RPCs failing. No re-resolving happened. (I think I tested it with one RPC per second and waited for about 2 minutes after killing the first server and starting the backup)\r\nI will repeat the experiment during the next days with GRPC_VERBOSITY=DEBUG and post the results.\r\n\r\nUnfortunately I have little control over the way, backend changes are communicated in this use-case. We are currently working on using multiple channels (one for each redundant server) and actively resolving the hostname to decide which channel to use, to circumvent this problem.\r\nI agree, that notification-based name resolution whould be the perfect solution. However gRPC's re-resolving for every connection attempt in TRANSIENT-FAILURE state should be sufficient and most straight forward."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/399440263",
    "html_url": "https://github.com/grpc/grpc/issues/15000#issuecomment-399440263",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15000",
    "id": 399440263,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5OTQ0MDI2Mw==",
    "user": {
      "login": "hacst",
      "id": 237537,
      "node_id": "MDQ6VXNlcjIzNzUzNw==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/237537?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hacst",
      "html_url": "https://github.com/hacst",
      "followers_url": "https://api.github.com/users/hacst/followers",
      "following_url": "https://api.github.com/users/hacst/following{/other_user}",
      "gists_url": "https://api.github.com/users/hacst/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hacst/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hacst/subscriptions",
      "organizations_url": "https://api.github.com/users/hacst/orgs",
      "repos_url": "https://api.github.com/users/hacst/repos",
      "events_url": "https://api.github.com/users/hacst/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hacst/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-22T13:21:24Z",
    "updated_at": "2018-06-22T13:21:24Z",
    "author_association": "CONTRIBUTOR",
    "body": "I think I am seing the same problem with grpc 1.12.1 in C++ . Azure lets the DNS name of dynamic ip resources that are not yet activated resolve to 255.255.255.255 with a TTL of 10. I just debugged a case where gRPC seems to have resolved during the period of creating the resource and activating it. This got the channel stuck trying to reconnect to 255.255.255.255.  It seemingly never attempts re-resolving even after several hours with lots of reconnection attempts. This was also on Ubuntu 16.04.\r\n\r\nHere the grpc debug output of one of the many attempted re-connection phases with GRPC_TRACE=connectivity_state and GRPC_VERBOSITY=DEBUG: [reconnectionattempts.txt](https://github.com/grpc/grpc/files/2127718/reconnectionattempts.txt)\r\n\r\nstrace'ing the process shows it trying to connect to 255.255.255.255 in each attempt with this syscall sequence:\r\n```\r\n[pid  4155] socket(PF_INET6, SOCK_STREAM, IPPROTO_IP) = 22\r\n[pid  4155] setsockopt(22, SOL_IPV6, IPV6_V6ONLY, [0], 4) = 0\r\n[pid  4155] setsockopt(22, SOL_TCP, TCP_NODELAY, [1], 4) = 0\r\n[pid  4155] getsockopt(22, SOL_TCP, TCP_NODELAY, [1], [4]) = 0\r\n[pid  4155] connect(22, {sa_family=AF_INET6, sin6_port=htons(48000), inet_pton(AF_INET6, \"::ffff:255.255.255.255\", &sin6_addr), sin6_flowinfo=0, sin6_scope_id=0}, 28) = -1 ENETUNREACH (Network is unreachable)\r\n```\r\n\r\nBesides that short intermittent period where 255.255.255.255 was returned the DNS name was either not resolvable at all (until it was created) or pointed to a valid IP that could be resolved and connected to with other tools without issues. I telnet'ted into the grpc server port from the same machine with no issues while the grpc client was failing with unreachable.\r\n\r\nLooks like a problem with TTL handling or re-resolution in general to me."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/404844798",
    "html_url": "https://github.com/grpc/grpc/issues/15000#issuecomment-404844798",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15000",
    "id": 404844798,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNDg0NDc5OA==",
    "user": {
      "login": "hacst",
      "id": 237537,
      "node_id": "MDQ6VXNlcjIzNzUzNw==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/237537?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hacst",
      "html_url": "https://github.com/hacst",
      "followers_url": "https://api.github.com/users/hacst/followers",
      "following_url": "https://api.github.com/users/hacst/following{/other_user}",
      "gists_url": "https://api.github.com/users/hacst/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hacst/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hacst/subscriptions",
      "organizations_url": "https://api.github.com/users/hacst/orgs",
      "repos_url": "https://api.github.com/users/hacst/repos",
      "events_url": "https://api.github.com/users/hacst/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hacst/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-13T14:10:36Z",
    "updated_at": "2018-07-13T14:10:36Z",
    "author_association": "CONTRIBUTOR",
    "body": "Any update on this @markdroth ? Do you still need more information?"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/404858700",
    "html_url": "https://github.com/grpc/grpc/issues/15000#issuecomment-404858700",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15000",
    "id": 404858700,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNDg1ODcwMA==",
    "user": {
      "login": "rainerschoe",
      "id": 36071440,
      "node_id": "MDQ6VXNlcjM2MDcxNDQw",
      "avatar_url": "https://avatars1.githubusercontent.com/u/36071440?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rainerschoe",
      "html_url": "https://github.com/rainerschoe",
      "followers_url": "https://api.github.com/users/rainerschoe/followers",
      "following_url": "https://api.github.com/users/rainerschoe/following{/other_user}",
      "gists_url": "https://api.github.com/users/rainerschoe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rainerschoe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rainerschoe/subscriptions",
      "organizations_url": "https://api.github.com/users/rainerschoe/orgs",
      "repos_url": "https://api.github.com/users/rainerschoe/repos",
      "events_url": "https://api.github.com/users/rainerschoe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rainerschoe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-13T14:58:28Z",
    "updated_at": "2018-07-13T14:58:28Z",
    "author_association": "NONE",
    "body": "Hi,\r\nSorry for the delay on my side...\r\nFinally I remembered to repeat the test with markdroths environment variables set.\r\nHere is the output: [debuglog.txt](https://github.com/grpc/grpc/files/2193108/debuglog.txt)\r\nAs previously guessed, this shows, that re-resolution is only tried once.\r\n\r\nIf you need any additional infos just let me know.\r\nThe problem is really easy to reproduce, just follow the steps in my previous post.\r\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/406024981",
    "html_url": "https://github.com/grpc/grpc/issues/15000#issuecomment-406024981",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15000",
    "id": 406024981,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNjAyNDk4MQ==",
    "user": {
      "login": "sreecha",
      "id": 2754995,
      "node_id": "MDQ6VXNlcjI3NTQ5OTU=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/2754995?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sreecha",
      "html_url": "https://github.com/sreecha",
      "followers_url": "https://api.github.com/users/sreecha/followers",
      "following_url": "https://api.github.com/users/sreecha/following{/other_user}",
      "gists_url": "https://api.github.com/users/sreecha/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sreecha/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sreecha/subscriptions",
      "organizations_url": "https://api.github.com/users/sreecha/orgs",
      "repos_url": "https://api.github.com/users/sreecha/repos",
      "events_url": "https://api.github.com/users/sreecha/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sreecha/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-18T18:13:13Z",
    "updated_at": "2018-07-18T18:13:13Z",
    "author_association": "CONTRIBUTOR",
    "body": "@dgquintas, is this similar to the issue you were looking at last week? (or is it the same issue? :) )"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/406059271",
    "html_url": "https://github.com/grpc/grpc/issues/15000#issuecomment-406059271",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15000",
    "id": 406059271,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNjA1OTI3MQ==",
    "user": {
      "login": "dgquintas",
      "id": 120217,
      "node_id": "MDQ6VXNlcjEyMDIxNw==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/120217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dgquintas",
      "html_url": "https://github.com/dgquintas",
      "followers_url": "https://api.github.com/users/dgquintas/followers",
      "following_url": "https://api.github.com/users/dgquintas/following{/other_user}",
      "gists_url": "https://api.github.com/users/dgquintas/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dgquintas/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dgquintas/subscriptions",
      "organizations_url": "https://api.github.com/users/dgquintas/orgs",
      "repos_url": "https://api.github.com/users/dgquintas/repos",
      "events_url": "https://api.github.com/users/dgquintas/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dgquintas/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-18T20:12:55Z",
    "updated_at": "2018-07-18T23:30:04Z",
    "author_association": "NONE",
    "body": "~~Yes, this looks very similar to https://github.com/grpc/grpc/pull/15947 , which fixed things for Round Robin. I suspect the same change is needed in pick_first [here](https://github.com/grpc/grpc/blob/2d5e0f1e72cda4e7466f28fdeaf20eceabef00f3/src/core/ext/filters/client_channel/lb_policy/pick_first/pick_first.cc#L269). I'm verifying this and putting together a PR.~~\r\n\r\n~~I suspect https://github.com/grpc/grpc/issues/15933 is also being affected by this.~~\r\n\r\nAfter reproducing this locally, I can see how we are initially going into TRANSIENT_FAILURE (as expected), we re-resolve (before the /etc/hosts has been made) to the original address and then get in a loop of CONNECTING - TRANSIENT_FAILURE - CONNECTING - ... but none of the transitions into TRANSIENT_FAILURE trigger a re-resolution (see log at the end of this comment).\r\n\r\nThe reason seems to be that we don't re-resolve when we transition into TRANSIENT_FAILURE _while there's not subchannel selected_: [this line](https://github.com/grpc/grpc/blob/2d5e0f1e72cda4e7466f28fdeaf20eceabef00f3/src/core/ext/filters/client_channel/lb_policy/pick_first/pick_first.cc#L515) is within the `if (p->selected_ == this)` branch, and nowhere else (other than shutdown) is re-resolution tried in pick first. \r\n\r\nThat is why we see an initial re-resolution (which will still resolve to the original IP, prior to the /etc/hosts change), but nothing afterwards, because there won't ever be a new valid pick.\r\n\r\nCC @AspirinSJL @markdroth according to the unofficial client channel spec, \"Requests re-resolution whenever the subchannel fails to connect or whenever an established connection fails\". This is currently not true, as explained above.\r\n\r\n```\r\nI0718 13:53:53.116285873  170139 client_channel.cc:1116]     chand=0x55b925fd8fd0 calld=0x55b925ff6520: adding pending batch at index 0\r\nI0718 13:53:53.116310872  170139 client_channel.cc:3064]     chand=0x55b925fd8fd0 calld=0x55b925ff6520: entering client_channel combiner\r\nI0718 13:53:53.116319975  170139 client_channel.cc:2756]     chand=0x55b925fd8fd0 calld=0x55b925ff6520: applying service config to call\r\nI0718 13:53:53.116326044  170139 client_channel.cc:2665]     chand=0x55b925fd8fd0 calld=0x55b925ff6520: starting pick on lb_policy=0x7fc758001670\r\nI0718 13:53:53.116328253  170142 subchannel.cc:447]          Failed to connect to channel, retrying\r\nI0718 13:53:53.116542063  170142 subchannel_list.h:404]      [pick_first 0x7fc758001670] subchannel list 0x7fc758002c40 index 0 of 1 (subchannel 0x7fc7580035e0): connectivity changed: state=CONNECTING, error=\"No Error\", shutting_down=0\r\nI0718 13:53:53.116557898  170142 subchannel_list.h:313]      [pick_first 0x7fc758001670] subchannel list 0x7fc758002c40 index 0 of 1 (subchannel 0x7fc7580035e0): renewing watch: requesting connectivity change notification (from CONNECTING)\r\nI0718 13:53:53.116575955  170142 client_channel.cc:189]      chand=0x55b925fd8fd0: lb_policy=0x7fc758001670 state changed to CONNECTING\r\nI0718 13:53:53.116583198  170142 client_channel.cc:177]      chand=0x55b925fd8fd0: setting connectivity state to CONNECTING\r\nI0718 13:53:53.116589138  170139 subchannel.cc:668]          Connect failed: {\"created\":\"@1531947233.116537847\",\"description\":\"Failed to connect to remote host: OS Error\",\"errno\":111,\"file\":\"src/core/lib/iomgr/tcp_client_posix.cc\",\"file_line\":202,\"os_error\":\"Connection refused\",\"syscall\":\"connect\",\"target_address\":\"ipv4:127.0.0.2:5001\"}\r\nI0718 13:53:53.116622295  170139 subchannel_list.h:404]      [pick_first 0x7fc758001670] subchannel list 0x7fc758002c40 index 0 of 1 (subchannel 0x7fc7580035e0): connectivity changed: state=TRANSIENT_FAILURE, error={\"created\":\"@1531947233.116569112\",\"description\":\"Connect Failed\",\"file\":\"src/core/ext/filters/client_channel/subchannel.cc\",\"file_line\":663,\"grpc_status\":14,\"referenced_errors\":[{\"created\":\"@1531947233.116537847\",\"description\":\"Failed to connect to remote host: OS Error\",\"errno\":111,\"file\":\"src/core/lib/iomgr/tcp_client_posix.cc\",\"file_line\":202,\"os_error\":\"Connection refused\",\"syscall\":\"connect\",\"target_address\":\"ipv4:127.0.0.2:5001\"}]}, shutting_down=0\r\nI0718 13:53:53.116632522  170139 subchannel_list.h:332]      [pick_first 0x7fc758001670] subchannel list 0x7fc758002c40 index 0 of 1 (subchannel 0x7fc7580035e0): stopping connectivity watch\r\nI0718 13:53:53.116638440  170139 orphanable.h:179]           pick_first:0x7fc758002c40 ./src/core/ext/filters/client_channel/lb_policy/subchannel_list.h:341 unref 2 -> 1 connectivity_watch\r\nI0718 13:53:53.116644797  170139 subchannel_list.h:292]      [pick_first 0x7fc758001670] subchannel list 0x7fc758002c40 index 0 of 1 (subchannel 0x7fc7580035e0): starting watch: requesting connectivity change notification (from TRANSIENT_FAILURE)\r\nI0718 13:53:53.116649722  170139 orphanable.h:158]           pick_first:0x7fc758002c40 ./src/core/ext/filters/client_channel/lb_policy/subchannel_list.h:303 ref 1 -> 2 connectivity_watch\r\nI0718 13:53:53.116656203  170139 subchannel.cc:492]          Subchannel 0x7fc7580035e0: Retry in 1421 milliseconds\r\nI0718 13:53:53.116664346  170139 client_channel.cc:189]      chand=0x55b925fd8fd0: lb_policy=0x7fc758001670 state changed to TRANSIENT_FAILURE\r\nI0718 13:53:53.116670257  170139 client_channel.cc:177]      chand=0x55b925fd8fd0: setting connectivity state to TRANSIENT_FAILURE\r\nI0718 13:53:53.116675175  170139 client_channel.cc:2720]     chand=0x55b925fd8fd0 calld=0x55b925ff6520: pick completed asynchronously\r\nI0718 13:53:53.116724577  170139 client_channel.cc:2610]     chand=0x55b925fd8fd0 calld=0x55b925ff6520: failed to create subchannel: error={\"created\":\"@1531947233.116680834\",\"description\":\"Failed to create subchannel\",\"file\":\"src/core/ext/filters/client_channel/client_channel.cc\",\"file_line\":2608,\"referenced_errors\":[{\"created\":\"@1531947233.116669391\",\"description\":\"Pick Cancelled\",\"file\":\"src/core/ext/filters/client_channel/lb_policy/pick_first/pick_first.cc\",\"file_line\":234,\"referenced_errors\":[{\"created\":\"@1531947233.116569112\",\"description\":\"Connect Failed\",\"file\":\"src/core/ext/filters/client_channel/subchannel.cc\",\"file_line\":663,\"grpc_status\":14,\"referenced_errors\":[{\"created\":\"@1531947233.116537847\",\"description\":\"Failed to connect to remote host: OS Error\",\"errno\":111,\"file\":\"src/core/lib/iomgr/tcp_client_posix.cc\",\"file_line\":202,\"os_error\":\"Connection refused\",\"syscall\":\"connect\",\"target_address\":\"ipv4:127.0.0.2:5001\"}]}]}]}\r\nI0718 13:53:53.116733245  170139 client_channel.cc:1207]     chand=0x55b925fd8fd0 calld=0x55b925ff6520: failing 1 pending batches: {\"created\":\"@1531947233.116680834\",\"description\":\"Failed to create subchannel\",\"file\":\"src/core/ext/filters/client_channel/client_channel.cc\",\"file_line\":2608,\"referenced_errors\":[{\"created\":\"@1531947233.116669391\",\"description\":\"Pick Cancelled\",\"file\":\"src/core/ext/filters/client_channel/lb_policy/pick_first/pick_first.cc\",\"file_line\":234,\"referenced_errors\":[{\"created\":\"@1531947233.116569112\",\"description\":\"Connect Failed\",\"file\":\"src/core/ext/filters/client_channel/subchannel.cc\",\"file_line\":663,\"grpc_status\":14,\"referenced_errors\":[{\"created\":\"@1531947233.116537847\",\"description\":\"Failed to connect to remote host: OS Error\",\"errno\":111,\"file\":\"src/core/lib/iomgr/tcp_client_posix.cc\",\"file_line\":202,\"os_error\":\"Connection refused\",\"syscall\":\"connect\",\"target_address\":\"ipv4:127.0.0.2:5001\"}]}]}]}\r\nI0718 13:53:53.116759297  170139 client_channel.cc:3026]     chand=0x55b925fd8fd0 calld=0x55b925ff6520: recording cancel_error={\"created\":\"@1531947233.116680834\",\"description\":\"Failed to create subchannel\",\"file\":\"src/core/ext/filters/client_channel/client_channel.cc\",\"file_line\":2608,\"referenced_errors\":[{\"created\":\"@1531947233.116669391\",\"description\":\"Pick Cancelled\",\"file\":\"src/core/ext/filters/client_channel/lb_policy/pick_first/pick_first.cc\",\"file_line\":234,\"referenced_errors\":[{\"created\":\"@1531947233.116569112\",\"description\":\"Connect Failed\",\"file\":\"src/core/ext/filters/client_channel/subchannel.cc\",\"file_line\":663,\"grpc_status\":14,\"referenced_errors\":[{\"created\":\"@1531947233.116537847\",\"description\":\"Failed to connect to remote host: OS Error\",\"errno\":111,\"file\":\"src/core/lib/iomgr/tcp_client_posix.cc\",\"file_line\":202,\"os_error\":\"Connection refused\",\"syscall\":\"connect\",\"target_address\":\"ipv4:127.0.0.2:5001\"}]}]}]}\r\nI0718 13:53:53.116765873  170139 client_channel.cc:1207]     chand=0x55b925fd8fd0 calld=0x55b925ff6520: failing 0 pending batches: {\"created\":\"@1531947233.116680834\",\"description\":\"Failed to create subchannel\",\"file\":\"src/core/ext/filters/client_channel/client_channel.cc\",\"file_line\":2608,\"referenced_errors\":[{\"created\":\"@1531947233.116669391\",\"description\":\"Pick Cancelled\",\"file\":\"src/core/ext/filters/client_channel/lb_policy/pick_first/pick_first.cc\",\"file_line\":234,\"referenced_errors\":[{\"created\":\"@1531947233.116569112\",\"description\":\"Connect Failed\",\"file\":\"src/core/ext/filters/client_channel/subchannel.cc\",\"file_line\":663,\"grpc_status\":14,\"referenced_errors\":[{\"created\":\"@1531947233.116537847\",\"description\":\"Failed to connect to remote host: OS Error\",\"errno\":111,\"file\":\"src/core/lib/iomgr/tcp_client_posix.cc\",\"file_line\":202,\"os_error\":\"Connection refused\",\"syscall\":\"connect\",\"target_address\":\"ipv4:127.0.0.2:5001\"}]}]}]}\r\nI0718 13:53:53.116773161  170139 client_channel.cc:3007]     chand=0x55b925fd8fd0 calld=0x55b925ff6520: failing batch with error: {\"created\":\"@1531947233.116680834\",\"description\":\"Failed to create subchannel\",\"file\":\"src/core/ext/filters/client_channel/client_channel.cc\",\"file_line\":2608,\"referenced_errors\":[{\"created\":\"@1531947233.116669391\",\"description\":\"Pick Cancelled\",\"file\":\"src/core/ext/filters/client_channel/lb_policy/pick_first/pick_first.cc\",\"file_line\":234,\"referenced_errors\":[{\"created\":\"@1531947233.116569112\",\"description\":\"Connect Failed\",\"file\":\"src/core/ext/filters/client_channel/subchannel.cc\",\"file_line\":663,\"grpc_status\":14,\"referenced_errors\":[{\"created\":\"@1531947233.116537847\",\"description\":\"Failed to connect to remote host: OS Error\",\"errno\":111,\"file\":\"src/core/lib/iomgr/tcp_client_posix.cc\",\"file_line\":202,\"os_error\":\"Connection refused\",\"syscall\":\"connect\",\"target_address\":\"ipv4:127.0.0.2:5001\"}]}]}]}\r\nI0718 13:53:53.116778706  170139 client_channel.cc:2738]     chand=0x55b925fd8fd0 calld=0x55b925ff6520: cancelling pick from LB policy 0x7fc758001670\r\nRPC failed\r\n-----------------\r\n14: Connect Failed\r\nI0718 13:53:54.117085886  170139 client_channel.cc:1116]     chand=0x55b925fd8fd0 calld=0x55b925ff6520: adding pending batch at index 0\r\nI0718 13:53:54.117121689  170139 client_channel.cc:3064]     chand=0x55b925fd8fd0 calld=0x55b925ff6520: entering client_channel combiner\r\nI0718 13:53:54.117134829  170139 client_channel.cc:2756]     chand=0x55b925fd8fd0 calld=0x55b925ff6520: applying service config to call\r\nI0718 13:53:54.117143149  170139 client_channel.cc:2665]     chand=0x55b925fd8fd0 calld=0x55b925ff6520: starting pick on lb_policy=0x7fc758001670\r\nI0718 13:53:54.537382291  170159 subchannel.cc:447]          Failed to connect to channel, retrying\r\nI0718 13:53:54.537726557  170159 subchannel.cc:668]          Connect failed: {\"created\":\"@1531947234.537666366\",\"description\":\"Failed to connect to remote host: OS Error\",\"errno\":111,\"file\":\"src/core/lib/iomgr/tcp_client_posix.cc\",\"file_line\":202,\"os_error\":\"Connection refused\",\"syscall\":\"connect\",\"target_address\":\"ipv4:127.0.0.2:5001\"}\r\nI0718 13:53:54.537749441  170159 subchannel_list.h:404]      [pick_first 0x7fc758001670] subchannel list 0x7fc758002c40 index 0 of 1 (subchannel 0x7fc7580035e0): connectivity changed: state=CONNECTING, error=\"No Error\", shutting_down=0\r\nI0718 13:53:54.537760694  170159 subchannel_list.h:313]      [pick_first 0x7fc758001670] subchannel list 0x7fc758002c40 index 0 of 1 (subchannel 0x7fc7580035e0): renewing watch: requesting connectivity change notification (from CONNECTING)\r\nI0718 13:53:54.537779618  170159 client_channel.cc:189]      chand=0x55b925fd8fd0: lb_policy=0x7fc758001670 state changed to CONNECTING\r\nI0718 13:53:54.537789423  170159 client_channel.cc:177]      chand=0x55b925fd8fd0: setting connectivity state to CONNECTING\r\nI0718 13:53:54.537833956  170159 subchannel_list.h:404]      [pick_first 0x7fc758001670] subchannel list 0x7fc758002c40 index 0 of 1 (subchannel 0x7fc7580035e0): connectivity changed: state=TRANSIENT_FAILURE, error={\"created\":\"@1531947234.537703530\",\"description\":\"Connect Failed\",\"file\":\"src/core/ext/filters/client_channel/subchannel.cc\",\"file_line\":663,\"grpc_status\":14,\"referenced_errors\":[{\"created\":\"@1531947234.537666366\",\"description\":\"Failed to connect to remote host: OS Error\",\"errno\":111,\"file\":\"src/core/lib/iomgr/tcp_client_posix.cc\",\"file_line\":202,\"os_error\":\"Connection refused\",\"syscall\":\"connect\",\"target_address\":\"ipv4:127.0.0.2:5001\"}]}, shutting_down=0\r\nI0718 13:53:54.537850010  170159 subchannel_list.h:332]      [pick_first 0x7fc758001670] subchannel list 0x7fc758002c40 index 0 of 1 (subchannel 0x7fc7580035e0): stopping connectivity watch\r\nI0718 13:53:54.537861645  170159 orphanable.h:179]           pick_first:0x7fc758002c40 ./src/core/ext/filters/client_channel/lb_policy/subchannel_list.h:341 unref 2 -> 1 connectivity_watch\r\nI0718 13:53:54.537873585  170159 subchannel_list.h:292]      [pick_first 0x7fc758001670] subchannel list 0x7fc758002c40 index 0 of 1 (subchannel 0x7fc7580035e0): starting watch: requesting connectivity change notification (from TRANSIENT_FAILURE)\r\nI0718 13:53:54.537883506  170159 orphanable.h:158]           pick_first:0x7fc758002c40 ./src/core/ext/filters/client_channel/lb_policy/subchannel_list.h:303 ref 1 -> 2 connectivity_watch\r\nI0718 13:53:54.537894626  170159 subchannel.cc:492]          Subchannel 0x7fc7580035e0: Retry in 2424 milliseconds\r\nI0718 13:53:54.537909144  170159 client_channel.cc:189]      chand=0x55b925fd8fd0: lb_policy=0x7fc758001670 state changed to TRANSIENT_FAILURE\r\nI0718 13:53:54.537920782  170159 client_channel.cc:177]      chand=0x55b925fd8fd0: setting connectivity state to TRANSIENT_FAILURE\r\nI0718 13:53:54.537931462  170159 client_channel.cc:2720]     chand=0x55b925fd8fd0 calld=0x55b925ff6520: pick completed asynchronously\r\nI0718 13:53:54.538019214  170159 client_channel.cc:2610]     chand=0x55b925fd8fd0 calld=0x55b925ff6520: failed to create subchannel: error={\"created\":\"@1531947234.537943897\",\"description\":\"Failed to create subchannel\",\"file\":\"src/core/ext/filters/client_channel/client_channel.cc\",\"file_line\":2608,\"referenced_errors\":[{\"created\":\"@1531947234.537918799\",\"description\":\"Pick Cancelled\",\"file\":\"src/core/ext/filters/client_channel/lb_policy/pick_first/pick_first.cc\",\"file_line\":234,\"referenced_errors\":[{\"created\":\"@1531947234.537703530\",\"description\":\"Connect Failed\",\"file\":\"src/core/ext/filters/client_channel/subchannel.cc\",\"file_line\":663,\"grpc_status\":14,\"referenced_errors\":[{\"created\":\"@1531947234.537666366\",\"description\":\"Failed to connect to remote host: OS Error\",\"errno\":111,\"file\":\"src/core/lib/iomgr/tcp_client_posix.cc\",\"file_line\":202,\"os_error\":\"Connection refused\",\"syscall\":\"connect\",\"target_address\":\"ipv4:127.0.0.2:5001\"}]}]}]}\r\nI0718 13:53:54.538034329  170159 client_channel.cc:1207]     chand=0x55b925fd8fd0 calld=0x55b925ff6520: failing 1 pending batches: {\"created\":\"@1531947234.537943897\",\"description\":\"Failed to create subchannel\",\"file\":\"src/core/ext/filters/client_channel/client_channel.cc\",\"file_line\":2608,\"referenced_errors\":[{\"created\":\"@1531947234.537918799\",\"description\":\"Pick Cancelled\",\"file\":\"src/core/ext/filters/client_channel/lb_policy/pick_first/pick_first.cc\",\"file_line\":234,\"referenced_errors\":[{\"created\":\"@1531947234.537703530\",\"description\":\"Connect Failed\",\"file\":\"src/core/ext/filters/client_channel/subchannel.cc\",\"file_line\":663,\"grpc_status\":14,\"referenced_errors\":[{\"created\":\"@1531947234.537666366\",\"description\":\"Failed to connect to remote host: OS Error\",\"errno\":111,\"file\":\"src/core/lib/iomgr/tcp_client_posix.cc\",\"file_line\":202,\"os_error\":\"Connection refused\",\"syscall\":\"connect\",\"target_address\":\"ipv4:127.0.0.2:5001\"}]}]}]}\r\nI0718 13:53:54.538107641  170159 client_channel.cc:3026]     chand=0x55b925fd8fd0 calld=0x55b925ff6520: recording cancel_error={\"created\":\"@1531947234.537943897\",\"description\":\"Failed to create subchannel\",\"file\":\"src/core/ext/filters/client_channel/client_channel.cc\",\"file_line\":2608,\"referenced_errors\":[{\"created\":\"@1531947234.537918799\",\"description\":\"Pick Cancelled\",\"file\":\"src/core/ext/filters/client_channel/lb_policy/pick_first/pick_first.cc\",\"file_line\":234,\"referenced_errors\":[{\"created\":\"@1531947234.537703530\",\"description\":\"Connect Failed\",\"file\":\"src/core/ext/filters/client_channel/subchannel.cc\",\"file_line\":663,\"grpc_status\":14,\"referenced_errors\":[{\"created\":\"@1531947234.537666366\",\"description\":\"Failed to connect to remote host: OS Error\",\"errno\":111,\"file\":\"src/core/lib/iomgr/tcp_client_posix.cc\",\"file_line\":202,\"os_error\":\"Connection refused\",\"syscall\":\"connect\",\"target_address\":\"ipv4:127.0.0.2:5001\"}]}]}]}\r\nI0718 13:53:54.538126788  170159 client_channel.cc:1207]     chand=0x55b925fd8fd0 calld=0x55b925ff6520: failing 0 pending batches: {\"created\":\"@1531947234.537943897\",\"description\":\"Failed to create subchannel\",\"file\":\"src/core/ext/filters/client_channel/client_channel.cc\",\"file_line\":2608,\"referenced_errors\":[{\"created\":\"@1531947234.537918799\",\"description\":\"Pick Cancelled\",\"file\":\"src/core/ext/filters/client_channel/lb_policy/pick_first/pick_first.cc\",\"file_line\":234,\"referenced_errors\":[{\"created\":\"@1531947234.537703530\",\"description\":\"Connect Failed\",\"file\":\"src/core/ext/filters/client_channel/subchannel.cc\",\"file_line\":663,\"grpc_status\":14,\"referenced_errors\":[{\"created\":\"@1531947234.537666366\",\"description\":\"Failed to connect to remote host: OS Error\",\"errno\":111,\"file\":\"src/core/lib/iomgr/tcp_client_posix.cc\",\"file_line\":202,\"os_error\":\"Connection refused\",\"syscall\":\"connect\",\"target_address\":\"ipv4:127.0.0.2:5001\"}]}]}]}\r\nI0718 13:53:54.538138779  170159 client_channel.cc:3007]     chand=0x55b925fd8fd0 calld=0x55b925ff6520: failing batch with error: {\"created\":\"@1531947234.537943897\",\"description\":\"Failed to create subchannel\",\"file\":\"src/core/ext/filters/client_channel/client_channel.cc\",\"file_line\":2608,\"referenced_errors\":[{\"created\":\"@1531947234.537918799\",\"description\":\"Pick Cancelled\",\"file\":\"src/core/ext/filters/client_channel/lb_policy/pick_first/pick_first.cc\",\"file_line\":234,\"referenced_errors\":[{\"created\":\"@1531947234.537703530\",\"description\":\"Connect Failed\",\"file\":\"src/core/ext/filters/client_channel/subchannel.cc\",\"file_line\":663,\"grpc_status\":14,\"referenced_errors\":[{\"created\":\"@1531947234.537666366\",\"description\":\"Failed to connect to remote host: OS Error\",\"errno\":111,\"file\":\"src/core/lib/iomgr/tcp_client_posix.cc\",\"file_line\":202,\"os_error\":\"Connection refused\",\"syscall\":\"connect\",\"target_address\":\"ipv4:127.0.0.2:5001\"}]}]}]}\r\nI0718 13:53:54.538147325  170159 client_channel.cc:2738]     chand=0x55b925fd8fd0 calld=0x55b925ff6520: cancelling pick from LB policy 0x7fc758001670\r\n```\r\n\r\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/406420260",
    "html_url": "https://github.com/grpc/grpc/issues/15000#issuecomment-406420260",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15000",
    "id": 406420260,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNjQyMDI2MA==",
    "user": {
      "login": "dgquintas",
      "id": 120217,
      "node_id": "MDQ6VXNlcjEyMDIxNw==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/120217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dgquintas",
      "html_url": "https://github.com/dgquintas",
      "followers_url": "https://api.github.com/users/dgquintas/followers",
      "following_url": "https://api.github.com/users/dgquintas/following{/other_user}",
      "gists_url": "https://api.github.com/users/dgquintas/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dgquintas/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dgquintas/subscriptions",
      "organizations_url": "https://api.github.com/users/dgquintas/orgs",
      "repos_url": "https://api.github.com/users/dgquintas/repos",
      "events_url": "https://api.github.com/users/dgquintas/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dgquintas/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-19T21:29:18Z",
    "updated_at": "2018-07-19T21:29:18Z",
    "author_association": "NONE",
    "body": "After talking to @markdroth and @ejona86 it seems we need to change the current behavior of pick first to re-resolve upon _all_ transitions into `TRANSIENT_FAILURE`, not just the ones from `READY`, as it is now the case. I've created https://github.com/grpc/grpc/issues/16070 to track this work. "
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/406447028",
    "html_url": "https://github.com/grpc/grpc/issues/15000#issuecomment-406447028",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15000",
    "id": 406447028,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNjQ0NzAyOA==",
    "user": {
      "login": "AspirinSJL",
      "id": 3314176,
      "node_id": "MDQ6VXNlcjMzMTQxNzY=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/3314176?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AspirinSJL",
      "html_url": "https://github.com/AspirinSJL",
      "followers_url": "https://api.github.com/users/AspirinSJL/followers",
      "following_url": "https://api.github.com/users/AspirinSJL/following{/other_user}",
      "gists_url": "https://api.github.com/users/AspirinSJL/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AspirinSJL/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AspirinSJL/subscriptions",
      "organizations_url": "https://api.github.com/users/AspirinSJL/orgs",
      "repos_url": "https://api.github.com/users/AspirinSJL/repos",
      "events_url": "https://api.github.com/users/AspirinSJL/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AspirinSJL/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-19T23:46:29Z",
    "updated_at": "2018-07-19T23:46:29Z",
    "author_association": "MEMBER",
    "body": "If my understanding is correct, we should re-resolve whenever the policy is going to `TRANSIENT_FAILURE`, not whenever a subchannel changes to `TRANSIENT_FAILURE`. Right? Otherwise there might be too many re-resolutions if the subchannel list is failing. If only 1 subchannel in the subchannel list fails, we still have other candidates so we don't have to re-resolve at that point."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/406454792",
    "html_url": "https://github.com/grpc/grpc/issues/15000#issuecomment-406454792",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15000",
    "id": 406454792,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNjQ1NDc5Mg==",
    "user": {
      "login": "ejona86",
      "id": 2811396,
      "node_id": "MDQ6VXNlcjI4MTEzOTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/2811396?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ejona86",
      "html_url": "https://github.com/ejona86",
      "followers_url": "https://api.github.com/users/ejona86/followers",
      "following_url": "https://api.github.com/users/ejona86/following{/other_user}",
      "gists_url": "https://api.github.com/users/ejona86/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ejona86/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ejona86/subscriptions",
      "organizations_url": "https://api.github.com/users/ejona86/orgs",
      "repos_url": "https://api.github.com/users/ejona86/repos",
      "events_url": "https://api.github.com/users/ejona86/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ejona86/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-20T00:38:33Z",
    "updated_at": "2018-07-20T00:38:33Z",
    "author_association": "MEMBER",
    "body": "> we should re-resolve whenever the policy is going to TRANSIENT_FAILURE, not whenever a subchannel changes to TRANSIENT_FAILURE\r\n\r\nI think we need to do it more based on the subchannel.\r\n\r\n> If only 1 subchannel in the subchannel list fails, we still have other candidates so we don't have to re-resolve at that point.\r\n\r\nThe problem is that round-robin then almost never refreshes. You have to wait until the very last backend is down before a re-resolve. This was previously a problem for C."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/406463159",
    "html_url": "https://github.com/grpc/grpc/issues/15000#issuecomment-406463159",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15000",
    "id": 406463159,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNjQ2MzE1OQ==",
    "user": {
      "login": "dgquintas",
      "id": 120217,
      "node_id": "MDQ6VXNlcjEyMDIxNw==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/120217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dgquintas",
      "html_url": "https://github.com/dgquintas",
      "followers_url": "https://api.github.com/users/dgquintas/followers",
      "following_url": "https://api.github.com/users/dgquintas/following{/other_user}",
      "gists_url": "https://api.github.com/users/dgquintas/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dgquintas/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dgquintas/subscriptions",
      "organizations_url": "https://api.github.com/users/dgquintas/orgs",
      "repos_url": "https://api.github.com/users/dgquintas/repos",
      "events_url": "https://api.github.com/users/dgquintas/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dgquintas/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-20T01:38:46Z",
    "updated_at": "2018-07-20T01:38:46Z",
    "author_association": "NONE",
    "body": "At least for DNS, re-resolving a lot is not an issue due to caching."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/406618124",
    "html_url": "https://github.com/grpc/grpc/issues/15000#issuecomment-406618124",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15000",
    "id": 406618124,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNjYxODEyNA==",
    "user": {
      "login": "markdroth",
      "id": 18664614,
      "node_id": "MDQ6VXNlcjE4NjY0NjE0",
      "avatar_url": "https://avatars2.githubusercontent.com/u/18664614?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/markdroth",
      "html_url": "https://github.com/markdroth",
      "followers_url": "https://api.github.com/users/markdroth/followers",
      "following_url": "https://api.github.com/users/markdroth/following{/other_user}",
      "gists_url": "https://api.github.com/users/markdroth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/markdroth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/markdroth/subscriptions",
      "organizations_url": "https://api.github.com/users/markdroth/orgs",
      "repos_url": "https://api.github.com/users/markdroth/repos",
      "events_url": "https://api.github.com/users/markdroth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/markdroth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-20T14:30:37Z",
    "updated_at": "2018-07-20T14:30:37Z",
    "author_association": "MEMBER",
    "body": "I think we're already doing the right thing for round_robin.  The issue here is just pick_first.\r\n\r\nI think pick_first should re-resolve whenever we finish attempting all addresses in the list and transition into TRANSIENT_FAILURE.  I don't think we should re-resolve when one individual address in the list fails if there are still more addresses in the list that we can attempt."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/407818676",
    "html_url": "https://github.com/grpc/grpc/issues/15000#issuecomment-407818676",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15000",
    "id": 407818676,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNzgxODY3Ng==",
    "user": {
      "login": "AspirinSJL",
      "id": 3314176,
      "node_id": "MDQ6VXNlcjMzMTQxNzY=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/3314176?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AspirinSJL",
      "html_url": "https://github.com/AspirinSJL",
      "followers_url": "https://api.github.com/users/AspirinSJL/followers",
      "following_url": "https://api.github.com/users/AspirinSJL/following{/other_user}",
      "gists_url": "https://api.github.com/users/AspirinSJL/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AspirinSJL/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AspirinSJL/subscriptions",
      "organizations_url": "https://api.github.com/users/AspirinSJL/orgs",
      "repos_url": "https://api.github.com/users/AspirinSJL/repos",
      "events_url": "https://api.github.com/users/AspirinSJL/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AspirinSJL/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-25T16:39:08Z",
    "updated_at": "2018-07-25T16:39:08Z",
    "author_association": "MEMBER",
    "body": "Fix (https://github.com/grpc/grpc/pull/16076) is merged. Closing. @rainer-ibm Please re-open if this bug still exists. Thanks!"
  }
]
