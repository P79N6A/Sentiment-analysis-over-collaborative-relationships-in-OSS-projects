[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/298495454",
    "html_url": "https://github.com/grpc/grpc/issues/10944#issuecomment-298495454",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/10944",
    "id": 298495454,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5ODQ5NTQ1NA==",
    "user": {
      "login": "stanley-cheung",
      "id": 11674202,
      "node_id": "MDQ6VXNlcjExNjc0MjAy",
      "avatar_url": "https://avatars2.githubusercontent.com/u/11674202?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stanley-cheung",
      "html_url": "https://github.com/stanley-cheung",
      "followers_url": "https://api.github.com/users/stanley-cheung/followers",
      "following_url": "https://api.github.com/users/stanley-cheung/following{/other_user}",
      "gists_url": "https://api.github.com/users/stanley-cheung/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stanley-cheung/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stanley-cheung/subscriptions",
      "organizations_url": "https://api.github.com/users/stanley-cheung/orgs",
      "repos_url": "https://api.github.com/users/stanley-cheung/repos",
      "events_url": "https://api.github.com/users/stanley-cheung/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stanley-cheung/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-05-02T04:37:36Z",
    "updated_at": "2017-05-02T04:37:36Z",
    "author_association": "CONTRIBUTOR",
    "body": "It's the same problem if I do `brew uninstall grpc` and then `brew install grpc`\r\n\r\nHere's the log if I do `brew install grpc --verbose`\r\n\r\n```\r\n[GRPC]    Generating gRPC's protobuf service CC file from src/proto/grpc/health/v1/health.proto\r\n[PROTOC]  Generating protobuf CC file from src/proto/grpc/health/v1/health.proto\r\n[PROTOC]  Generating protobuf CC file from src/proto/grpc/testing/echo_messages.proto\r\n[GRPC]    Generating gRPC's protobuf service CC file from src/proto/grpc/testing/echo_messages.proto\r\n[PROTOC]  Generating protobuf CC file from src/proto/grpc/testing/payloads.proto\r\n[PROTOC]  Generating protobuf CC file from src/proto/grpc/testing/stats.proto\r\n[GRPC]    Generating gRPC's protobuf service CC file from src/proto/grpc/testing/payloads.proto\r\nmake: protoc: No such file or directory\r\nmake: protoc: No such file or directory\r\nmake: protoc: No such file or directory\r\nmake: protoc: No such file or directory\r\nmake: *** [/private/tmp/grpc-20170501-2059-1ss1xb9/gens/src/proto/grpc/health/v1/health.pb.cc] Error 1\r\nmake: *** Waiting for unfinished jobs....\r\nmake: protoc: No such file or directory\r\nmake: *** [/private/tmp/grpc-20170501-2059-1ss1xb9/gens/src/proto/grpc/testing/stats.pb.cc] Error 1\r\nmake: protoc: No such file or directory\r\nmake: *** [/private/tmp/grpc-20170501-2059-1ss1xb9/gens/src/proto/grpc/testing/payloads.pb.cc] Error 1\r\nmake: protoc: No such file or directory\r\nmake: *** [/private/tmp/grpc-20170501-2059-1ss1xb9/gens/src/proto/grpc/testing/echo_messages.grpc.pb.cc] Error 1\r\nmake: *** [/private/tmp/grpc-20170501-2059-1ss1xb9/gens/src/proto/grpc/testing/payloads.grpc.pb.cc] Error 1\r\nmake: *** [/private/tmp/grpc-20170501-2059-1ss1xb9/gens/src/proto/grpc/testing/echo_messages.pb.cc] Error 1\r\nmake: *** [/private/tmp/grpc-20170501-2059-1ss1xb9/gens/src/proto/grpc/health/v1/health.grpc.pb.cc] Error 1\r\n```\r\n\r\nThis is the `grpc` homebrew formula: https://github.com/Homebrew/homebrew-core/blob/master/Formula/grpc.rb  Basically we are just doing a `make install`"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/298497110",
    "html_url": "https://github.com/grpc/grpc/issues/10944#issuecomment-298497110",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/10944",
    "id": 298497110,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5ODQ5NzExMA==",
    "user": {
      "login": "stanley-cheung",
      "id": 11674202,
      "node_id": "MDQ6VXNlcjExNjc0MjAy",
      "avatar_url": "https://avatars2.githubusercontent.com/u/11674202?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stanley-cheung",
      "html_url": "https://github.com/stanley-cheung",
      "followers_url": "https://api.github.com/users/stanley-cheung/followers",
      "following_url": "https://api.github.com/users/stanley-cheung/following{/other_user}",
      "gists_url": "https://api.github.com/users/stanley-cheung/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stanley-cheung/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stanley-cheung/subscriptions",
      "organizations_url": "https://api.github.com/users/stanley-cheung/orgs",
      "repos_url": "https://api.github.com/users/stanley-cheung/repos",
      "events_url": "https://api.github.com/users/stanley-cheung/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stanley-cheung/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-05-02T04:54:22Z",
    "updated_at": "2017-05-02T04:54:22Z",
    "author_association": "CONTRIBUTOR",
    "body": "Created a PR homebrew/homebrew-core#13146. The `grpc` formula can't find the `protoc` binary without this `depends_on` clause"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/298497885",
    "html_url": "https://github.com/grpc/grpc/issues/10944#issuecomment-298497885",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/10944",
    "id": 298497885,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5ODQ5Nzg4NQ==",
    "user": {
      "login": "ilovezfs",
      "id": 5268928,
      "node_id": "MDQ6VXNlcjUyNjg5Mjg=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/5268928?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ilovezfs",
      "html_url": "https://github.com/ilovezfs",
      "followers_url": "https://api.github.com/users/ilovezfs/followers",
      "following_url": "https://api.github.com/users/ilovezfs/following{/other_user}",
      "gists_url": "https://api.github.com/users/ilovezfs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ilovezfs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ilovezfs/subscriptions",
      "organizations_url": "https://api.github.com/users/ilovezfs/orgs",
      "repos_url": "https://api.github.com/users/ilovezfs/repos",
      "events_url": "https://api.github.com/users/ilovezfs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ilovezfs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-05-02T05:01:58Z",
    "updated_at": "2017-05-02T05:01:58Z",
    "author_association": "NONE",
    "body": "`protobuf` is a submodule. The dependency is not required."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/298504457",
    "html_url": "https://github.com/grpc/grpc/issues/10944#issuecomment-298504457",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/10944",
    "id": 298504457,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5ODUwNDQ1Nw==",
    "user": {
      "login": "stanley-cheung",
      "id": 11674202,
      "node_id": "MDQ6VXNlcjExNjc0MjAy",
      "avatar_url": "https://avatars2.githubusercontent.com/u/11674202?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stanley-cheung",
      "html_url": "https://github.com/stanley-cheung",
      "followers_url": "https://api.github.com/users/stanley-cheung/followers",
      "following_url": "https://api.github.com/users/stanley-cheung/following{/other_user}",
      "gists_url": "https://api.github.com/users/stanley-cheung/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stanley-cheung/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stanley-cheung/subscriptions",
      "organizations_url": "https://api.github.com/users/stanley-cheung/orgs",
      "repos_url": "https://api.github.com/users/stanley-cheung/repos",
      "events_url": "https://api.github.com/users/stanley-cheung/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stanley-cheung/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-05-02T06:01:21Z",
    "updated_at": "2017-05-02T06:01:21Z",
    "author_association": "CONTRIBUTOR",
    "body": "So here's what I found:\r\n\r\n1. Running `brew install grpc` from scratch, should work, either because the user will get pre-compiled bottles, or building from source. I verified that building from source works because now the `grpc` formula does not depend on the `protobuf` formula anymore. And building `grpc` from source will use the submoduled version of `protobuf`.\r\n\r\n2. If the user somehow has the brew formula `protobuf` installed, and then running `brew install grpc` will fail, somehow because the `grpc` `make` process somehow cannot find the brew-installed `protoc` binary."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/298504976",
    "html_url": "https://github.com/grpc/grpc/issues/10944#issuecomment-298504976",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/10944",
    "id": 298504976,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5ODUwNDk3Ng==",
    "user": {
      "login": "ilovezfs",
      "id": 5268928,
      "node_id": "MDQ6VXNlcjUyNjg5Mjg=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/5268928?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ilovezfs",
      "html_url": "https://github.com/ilovezfs",
      "followers_url": "https://api.github.com/users/ilovezfs/followers",
      "following_url": "https://api.github.com/users/ilovezfs/following{/other_user}",
      "gists_url": "https://api.github.com/users/ilovezfs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ilovezfs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ilovezfs/subscriptions",
      "organizations_url": "https://api.github.com/users/ilovezfs/orgs",
      "repos_url": "https://api.github.com/users/ilovezfs/repos",
      "events_url": "https://api.github.com/users/ilovezfs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ilovezfs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-05-02T06:05:40Z",
    "updated_at": "2017-05-02T06:05:40Z",
    "author_association": "NONE",
    "body": ">somehow because the grpc make process somehow cannot find the brew-installed protoc binary.\r\n\r\nRight, \"superenv\" will filter out `#{HOMEBREW_PREFIX}/bin` from the `PATH`, and superenv will not add `#{HOMEBREW_PREFIX}/opt/protobuf/bin` to the `PATH` unless `protobuf` is explicitly a dependency."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/298505838",
    "html_url": "https://github.com/grpc/grpc/issues/10944#issuecomment-298505838",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/10944",
    "id": 298505838,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5ODUwNTgzOA==",
    "user": {
      "login": "stanley-cheung",
      "id": 11674202,
      "node_id": "MDQ6VXNlcjExNjc0MjAy",
      "avatar_url": "https://avatars2.githubusercontent.com/u/11674202?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stanley-cheung",
      "html_url": "https://github.com/stanley-cheung",
      "followers_url": "https://api.github.com/users/stanley-cheung/followers",
      "following_url": "https://api.github.com/users/stanley-cheung/following{/other_user}",
      "gists_url": "https://api.github.com/users/stanley-cheung/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stanley-cheung/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stanley-cheung/subscriptions",
      "organizations_url": "https://api.github.com/users/stanley-cheung/orgs",
      "repos_url": "https://api.github.com/users/stanley-cheung/repos",
      "events_url": "https://api.github.com/users/stanley-cheung/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stanley-cheung/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-05-02T06:12:34Z",
    "updated_at": "2017-05-02T06:12:34Z",
    "author_association": "CONTRIBUTOR",
    "body": "hm in light of this:\r\n\r\n> Right, \"superenv\" will filter out `#{HOMEBREW_PREFIX}/bin` from the `PATH`, and superenv will not add `#{HOMEBREW_PREFIX}/opt/protobuf/bin` to the `PATH` unless `protobuf` is explicitly a dependency.\r\n\r\nShould we add `protobuf` back as a dependency for `grpc`?"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/298506694",
    "html_url": "https://github.com/grpc/grpc/issues/10944#issuecomment-298506694",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/10944",
    "id": 298506694,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5ODUwNjY5NA==",
    "user": {
      "login": "ilovezfs",
      "id": 5268928,
      "node_id": "MDQ6VXNlcjUyNjg5Mjg=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/5268928?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ilovezfs",
      "html_url": "https://github.com/ilovezfs",
      "followers_url": "https://api.github.com/users/ilovezfs/followers",
      "following_url": "https://api.github.com/users/ilovezfs/following{/other_user}",
      "gists_url": "https://api.github.com/users/ilovezfs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ilovezfs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ilovezfs/subscriptions",
      "organizations_url": "https://api.github.com/users/ilovezfs/orgs",
      "repos_url": "https://api.github.com/users/ilovezfs/repos",
      "events_url": "https://api.github.com/users/ilovezfs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ilovezfs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-05-02T06:19:15Z",
    "updated_at": "2017-05-02T06:19:15Z",
    "author_association": "NONE",
    "body": "The underlying question is why/how is the build system finding it even though it's not in the PATH?\r\n\r\n\r\n>Should we add protobuf back as a dependency for grpc?\r\n\r\nI think so until/unless there is some upstream fix that lets it build with the submodule protobuf even if the user happens to have the brew protobuf formula installed.\r\n\r\nNote, though, that if we do add it back, it cannot be `=> :build` time only, since it actually ends up linked:\r\n```\r\niMac-TMP:~ joe$ brew linkage grpc\r\nSystem libraries:\r\n  /usr/lib/libSystem.B.dylib\r\n  /usr/lib/libc++.1.dylib\r\n  /usr/lib/libz.1.dylib\r\nHomebrew libraries:\r\n  /usr/local/opt/protobuf/lib/libprotobuf.13.dylib (protobuf)\r\n  /usr/local/opt/protobuf/lib/libprotoc.13.dylib (protobuf)\r\nVariable-referenced libraries:\r\n  @loader_path/libgpr.dylib\r\n  @loader_path/libgrpc++.dylib\r\n  @loader_path/libgrpc.dylib\r\n  @loader_path/libgrpc_cronet.dylib\r\n  @loader_path/libgrpc_unsecure.dylib\r\n```"
  }
]
