[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/478794631",
    "html_url": "https://github.com/grpc/grpc/pull/18609#issuecomment-478794631",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/18609",
    "id": 478794631,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3ODc5NDYzMQ==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-02T00:21:58Z",
    "updated_at": "2019-04-02T00:21:58Z",
    "author_association": "CONTRIBUTOR",
    "body": "@yashykt   I was able to reproduce the problem with send_message operation with buffer hint enabled.\r\nWhat's happening is that and operation is started that tries to send both initial response metadata and the message (on only buffer_hint for the write is set). That situations indeed ends up with the op batch never completing.\r\n\r\n```\r\nI0401 16:45:02.622106 123145395253248 /Users/jtattermusch/github/grpc/src/core/lib/surface/call.cc:1910: grpc_call_start_batch(call=0x7fe80228d070, ops=0x7000058a13a0, nops=2, tag=0x7fe801fdeb00, reserved=0x0)\r\nI0401 16:45:02.622245 123145395253248 /Users/jtattermusch/github/grpc/src/core/lib/surface/call.cc:1516: ops[0]: SEND_MESSAGE ptr=0x7fe801fe0c30\r\nI0401 16:45:02.622284 123145395253248 /Users/jtattermusch/github/grpc/src/core/lib/surface/call.cc:1516: ops[1]: SEND_INITIAL_METADATA(nil)\r\nTIMEOUT: csharp.Grpc.Core.Tests.ClientServerWriteOptionsTest [pid=75594, time=300.1sec]\r\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/478795797",
    "html_url": "https://github.com/grpc/grpc/pull/18609#issuecomment-478795797",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/18609",
    "id": 478795797,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3ODc5NTc5Nw==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-02T00:28:21Z",
    "updated_at": "2019-04-02T00:28:21Z",
    "author_association": "CONTRIBUTOR",
    "body": "@yashykt \r\nLooks like sending a batch that contains both SEND_MESSAGE and SEND_INITIAL_METADATA with \r\nGRPC_WRITE_BUFFER_HINT = true, but GRPC_INITIAL_METADATA_CORKED = false will\r\nresult in the batch never finishing (at least on the server side). Seems like a bug in C core?\r\nhttps://github.com/grpc/grpc/blob/8ce9e54f92f2566c1de2036a1348a01283cc6969/include/grpc/impl/codegen/grpc_types.h#L426\r\nhttps://github.com/grpc/grpc/blob/8ce9e54f92f2566c1de2036a1348a01283cc6969/include/grpc/impl/codegen/grpc_types.h#L447\r\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/478798663",
    "html_url": "https://github.com/grpc/grpc/pull/18609#issuecomment-478798663",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/18609",
    "id": 478798663,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3ODc5ODY2Mw==",
    "user": {
      "login": "JamesNK",
      "id": 303201,
      "node_id": "MDQ6VXNlcjMwMzIwMQ==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/303201?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JamesNK",
      "html_url": "https://github.com/JamesNK",
      "followers_url": "https://api.github.com/users/JamesNK/followers",
      "following_url": "https://api.github.com/users/JamesNK/following{/other_user}",
      "gists_url": "https://api.github.com/users/JamesNK/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JamesNK/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JamesNK/subscriptions",
      "organizations_url": "https://api.github.com/users/JamesNK/orgs",
      "repos_url": "https://api.github.com/users/JamesNK/repos",
      "events_url": "https://api.github.com/users/JamesNK/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JamesNK/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-02T00:44:39Z",
    "updated_at": "2019-04-02T00:47:11Z",
    "author_association": "CONTRIBUTOR",
    "body": "Is the bug that C core is doing the wrong thing: trying to send the headers when buffering\r\nOr is the bug that it is doing the right thing but failing?\r\n\r\nBasically, what should be happening? ðŸ˜„ "
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/478801112",
    "html_url": "https://github.com/grpc/grpc/pull/18609#issuecomment-478801112",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/18609",
    "id": 478801112,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3ODgwMTExMg==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-02T00:59:10Z",
    "updated_at": "2019-04-02T00:59:10Z",
    "author_association": "CONTRIBUTOR",
    "body": "> Is the bug that C core is doing the wrong thing: trying to send the headers when buffering\r\n> Or is the bug that it is doing the right thing but failing?\r\n> \r\n> Basically, what should be happening? ðŸ˜„\r\n\r\nI think the write should not hang regardless of what buffering hints are being passed (they are just hints afterall).\r\nI'm not an expert though, so I will defer to @yashykt 's opinion."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/479797425",
    "html_url": "https://github.com/grpc/grpc/pull/18609#issuecomment-479797425",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/18609",
    "id": 479797425,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3OTc5NzQyNQ==",
    "user": {
      "login": "JamesNK",
      "id": 303201,
      "node_id": "MDQ6VXNlcjMwMzIwMQ==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/303201?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JamesNK",
      "html_url": "https://github.com/JamesNK",
      "followers_url": "https://api.github.com/users/JamesNK/followers",
      "following_url": "https://api.github.com/users/JamesNK/following{/other_user}",
      "gists_url": "https://api.github.com/users/JamesNK/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JamesNK/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JamesNK/subscriptions",
      "organizations_url": "https://api.github.com/users/JamesNK/orgs",
      "repos_url": "https://api.github.com/users/JamesNK/repos",
      "events_url": "https://api.github.com/users/JamesNK/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JamesNK/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-04T08:14:56Z",
    "updated_at": "2019-04-04T08:15:33Z",
    "author_association": "CONTRIBUTOR",
    "body": "Yeah, I'm pretty sure hanging is wrong.\r\n\r\nThe behavior I want to understand is whether C core will send headers when a message is written and buffered. If so then I need to replicate that logic in Grpc.AspNetCore.Server."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/480112429",
    "html_url": "https://github.com/grpc/grpc/pull/18609#issuecomment-480112429",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/18609",
    "id": 480112429,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4MDExMjQyOQ==",
    "user": {
      "login": "yashykt",
      "id": 4181124,
      "node_id": "MDQ6VXNlcjQxODExMjQ=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/4181124?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yashykt",
      "html_url": "https://github.com/yashykt",
      "followers_url": "https://api.github.com/users/yashykt/followers",
      "following_url": "https://api.github.com/users/yashykt/following{/other_user}",
      "gists_url": "https://api.github.com/users/yashykt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yashykt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yashykt/subscriptions",
      "organizations_url": "https://api.github.com/users/yashykt/orgs",
      "repos_url": "https://api.github.com/users/yashykt/repos",
      "events_url": "https://api.github.com/users/yashykt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yashykt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-05T00:48:53Z",
    "updated_at": "2019-04-05T00:48:53Z",
    "author_association": "MEMBER",
    "body": "I am not too familiar with the C# syntax, but I'll take @jtattermusch 's word for it.\r\n\r\nI don't understand exactly how corking is affecting this. We would need some logs as to where exactly things are getting stuck"
  }
]
