[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/467459001",
    "html_url": "https://github.com/grpc/grpc/pull/18159#issuecomment-467459001",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/18159",
    "id": 467459001,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2NzQ1OTAwMQ==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-26T14:28:36Z",
    "updated_at": "2019-02-26T14:28:36Z",
    "author_association": "CONTRIBUTOR",
    "body": "How exactly this should help?"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/467572499",
    "html_url": "https://github.com/grpc/grpc/pull/18159#issuecomment-467572499",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/18159",
    "id": 467572499,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2NzU3MjQ5OQ==",
    "user": {
      "login": "rmstar",
      "id": 2873805,
      "node_id": "MDQ6VXNlcjI4NzM4MDU=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/2873805?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rmstar",
      "html_url": "https://github.com/rmstar",
      "followers_url": "https://api.github.com/users/rmstar/followers",
      "following_url": "https://api.github.com/users/rmstar/following{/other_user}",
      "gists_url": "https://api.github.com/users/rmstar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rmstar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rmstar/subscriptions",
      "organizations_url": "https://api.github.com/users/rmstar/orgs",
      "repos_url": "https://api.github.com/users/rmstar/repos",
      "events_url": "https://api.github.com/users/rmstar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rmstar/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-26T19:13:24Z",
    "updated_at": "2019-02-26T19:13:24Z",
    "author_association": "CONTRIBUTOR",
    "body": "@jtattermusch the failed testcase does the following:\r\n1. Create channel, send an RPC over it.\r\n2. Create iptables rule to drop traffic between client and server. The channel will transition to TRANSIENT_FAILURE state.\r\n3. Wait 10 seconds. \r\n4. Remove iptables rule.\r\n5. The test expects that the channel will move to READY state within 5 seconds, but the test logs indicate that it took 8 seconds to become READY. So the test failed.\r\n\r\nHere's the test log from one of the failures:\r\n```\r\nI0222 23:22:58.694610655    5389 connectivity_state.cc:81]   CONWATCH: 0x2132010 client_channel: get CONNECTING\r\nI0222 23:22:58.694708350    5389 connectivity_state.cc:116]  CONWATCH: 0x2132010 client_channel: from CONNECTING [cur=CONNECTING] notify=0x2129860\r\nI0222 23:23:03.695592567    5423 connectivity_state.cc:113]  CONWATCH: 0x2132010 client_channel: unsubscribe notify=0x2129860\r\ntest/cpp/end2end/flaky_network_test.cc:371: Failure\r\nValue of: WaitForChannelReady(channel.get())\r\n  Actual: false\r\nExpected: true\r\nI0222 23:23:03.695928752    5389 connectivity_state.cc:81]   CONWATCH: 0x2132010 client_channel: get CONNECTING\r\ntest/cpp/end2end/flaky_network_test.cc:372: Failure\r\n      Expected: channel->GetState(false)\r\n      Which is: 1\r\nTo be equal to: GRPC_CHANNEL_READY\r\n      Which is: 2\r\nI0222 23:23:06.874881370    5426 connectivity_state.cc:116]  CONWATCH: 0x7fd47c000c10 server_transport: from IDLE [cur=READY] notify=0x7fd47c002bc8\r\nI0222 23:23:06.874946554    5426 connectivity_state.cc:116]  CONWATCH: 0x7fd47c000c10 server_transport: from READY [cur=READY] notify=0x7fd47c002bc8\r\nI0222 23:23:06.874884067    5427 subchannel.cc:1020]         New connected subchannel at 0x7fd488004b10 for subchannel 0x2171fc0\r\nI0222 23:23:06.874988449    5427 connectivity_state.cc:164]  SET: 0x2172098 subchannel: CONNECTING --> READY [subchannel_connected] error=(nil) \"No Error\"\r\n```\r\nThere are no log lines between 23:22:58 and 23:23:03. That's probably because the client was backing off during that time. Setting the max backoff interval in the channel arguments would ensure that the client reconnects quickly.\r\n\r\nLinks to some failures:\r\nhttps://source.cloud.google.com/results/invocations/7ac76164-65b4-4cdf-a3a4-4a66e8823bdf/targets\r\nhttps://source.cloud.google.com/results/invocations/7a86466a-5708-4d4d-9eaa-69f1f063550f/targets\r\nhttps://source.cloud.google.com/results/invocations/091acaa8-132b-4b9d-9286-55f378f5f551/targets"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/467777141",
    "html_url": "https://github.com/grpc/grpc/pull/18159#issuecomment-467777141",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/18159",
    "id": 467777141,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2Nzc3NzE0MQ==",
    "user": {
      "login": "rmstar",
      "id": 2873805,
      "node_id": "MDQ6VXNlcjI4NzM4MDU=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/2873805?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rmstar",
      "html_url": "https://github.com/rmstar",
      "followers_url": "https://api.github.com/users/rmstar/followers",
      "following_url": "https://api.github.com/users/rmstar/following{/other_user}",
      "gists_url": "https://api.github.com/users/rmstar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rmstar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rmstar/subscriptions",
      "organizations_url": "https://api.github.com/users/rmstar/orgs",
      "repos_url": "https://api.github.com/users/rmstar/repos",
      "events_url": "https://api.github.com/users/rmstar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rmstar/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-27T08:52:04Z",
    "updated_at": "2019-02-27T08:52:04Z",
    "author_association": "CONTRIBUTOR",
    "body": "There a new test flake in FlakyNetworkTest.FlakyNetwork seen [here](https://source.cloud.google.com/results/invocations/7c5a0d67-391b-4bc3-8bd4-61f134bf33ef/targets/grpc%2Fcore%2Fmaster%2Flinux%2Fgrpc_flaky_network/log). \r\nRelevant snippet from the log:\r\n```\r\nD0227 08:15:42.787759519    5386 flaky_network_test.cc:217]  RPC failed: keepalive watchdog timeout\r\nI0227 08:15:42.787776329    5467 connectivity_state.cc:164]  SET: 0x6a1ad8 subchannel: READY --> TRANSIENT_FAILURE [reflect_child] error=0x7f79e40008c0 {\"created\":\"@1551255342.787595751\",\"description\":\"Delayed close due to in-progress write\",\"file\":\"src/core/ext/transport/chttp2/transport/chttp2_transport.cc\",\"file_line\":587,\"referenced_errors\":[{\"created\":\"@1551255342.787564624\",\"description\":\"keepalive watchdog timeout\",\"file\":\"src/core/ext/transport/chttp2/transport/chttp2_transport.cc\",\"file_line\":2781,\"grpc_status\":14}]}\r\nI0227 08:15:42.787783124    5467 connectivity_state.cc:190]  NOTIFY: 0x6a1ad8 subchannel: 0x6a0a78\r\nI0227 08:15:42.787789771    5467 connectivity_state.cc:164]  SET: 0x6a1af8 subchannel: READY --> TRANSIENT_FAILURE [reflect_child] error=0x7f79e40008c0 {\"created\":\"@1551255342.787595751\",\"description\":\"Delayed close due to in-progress write\",\"file\":\"src/core/ext/transport/chttp2/transport/chttp2_transport.cc\",\"file_line\":587,\"referenced_errors\":[{\"created\":\"@1551255342.787564624\",\"description\":\"keepalive watchdog timeout\",\"file\":\"src/core/ext/transport/chttp2/transport/chttp2_transport.cc\",\"file_line\":2781,\"grpc_status\":14}]}\r\nI0227 08:15:42.787808350    5467 resolving_lb_policy.cc:102] resolving_lb=0x69cac0: started name re-resolving\r\ntest/cpp/end2end/flaky_network_test.cc:424: Failure\r\nValue of: SendRpc(stub)\r\n  Actual: false\r\nExpected: true\r\n```\r\nThe testcase simulates packet loss and delays, which results in keepalives timing out. So the RPC fails. This is expected when the network connection is flaky. I have updated the test to not expect RPCs to be successful while the network is flaky."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/467857175",
    "html_url": "https://github.com/grpc/grpc/pull/18159#issuecomment-467857175",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/18159",
    "id": 467857175,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2Nzg1NzE3NQ==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-27T13:14:50Z",
    "updated_at": "2019-02-27T13:14:50Z",
    "author_association": "CONTRIBUTOR",
    "body": "@rmstar I see, thanks for the explanation."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/467981849",
    "html_url": "https://github.com/grpc/grpc/pull/18159#issuecomment-467981849",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/18159",
    "id": 467981849,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2Nzk4MTg0OQ==",
    "user": {
      "login": "rmstar",
      "id": 2873805,
      "node_id": "MDQ6VXNlcjI4NzM4MDU=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/2873805?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rmstar",
      "html_url": "https://github.com/rmstar",
      "followers_url": "https://api.github.com/users/rmstar/followers",
      "following_url": "https://api.github.com/users/rmstar/following{/other_user}",
      "gists_url": "https://api.github.com/users/rmstar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rmstar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rmstar/subscriptions",
      "organizations_url": "https://api.github.com/users/rmstar/orgs",
      "repos_url": "https://api.github.com/users/rmstar/repos",
      "events_url": "https://api.github.com/users/rmstar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rmstar/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-27T18:44:45Z",
    "updated_at": "2019-02-27T18:44:45Z",
    "author_association": "CONTRIBUTOR",
    "body": "cpp_macos_dbg_native failure: #15027"
  }
]
