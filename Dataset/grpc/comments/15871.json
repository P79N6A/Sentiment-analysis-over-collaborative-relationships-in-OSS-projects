[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/400392265",
    "html_url": "https://github.com/grpc/grpc/issues/15871#issuecomment-400392265",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15871",
    "id": 400392265,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwMDM5MjI2NQ==",
    "user": {
      "login": "forestphoenix",
      "id": 13005323,
      "node_id": "MDQ6VXNlcjEzMDA1MzIz",
      "avatar_url": "https://avatars0.githubusercontent.com/u/13005323?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/forestphoenix",
      "html_url": "https://github.com/forestphoenix",
      "followers_url": "https://api.github.com/users/forestphoenix/followers",
      "following_url": "https://api.github.com/users/forestphoenix/following{/other_user}",
      "gists_url": "https://api.github.com/users/forestphoenix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/forestphoenix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/forestphoenix/subscriptions",
      "organizations_url": "https://api.github.com/users/forestphoenix/orgs",
      "repos_url": "https://api.github.com/users/forestphoenix/repos",
      "events_url": "https://api.github.com/users/forestphoenix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/forestphoenix/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-26T17:09:43Z",
    "updated_at": "2018-06-26T17:09:43Z",
    "author_association": "NONE",
    "body": "A gist to reproduce this issue:\r\nhttps://gist.github.com/forestphoenix/c2e141bc3f19ff106617ebca3742432d\r\n\r\n@yashykt This issue looks very similar to #14717, could they be related?"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/400441675",
    "html_url": "https://github.com/grpc/grpc/issues/15871#issuecomment-400441675",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15871",
    "id": 400441675,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwMDQ0MTY3NQ==",
    "user": {
      "login": "yashykt",
      "id": 4181124,
      "node_id": "MDQ6VXNlcjQxODExMjQ=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/4181124?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yashykt",
      "html_url": "https://github.com/yashykt",
      "followers_url": "https://api.github.com/users/yashykt/followers",
      "following_url": "https://api.github.com/users/yashykt/following{/other_user}",
      "gists_url": "https://api.github.com/users/yashykt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yashykt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yashykt/subscriptions",
      "organizations_url": "https://api.github.com/users/yashykt/orgs",
      "repos_url": "https://api.github.com/users/yashykt/repos",
      "events_url": "https://api.github.com/users/yashykt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yashykt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-26T19:56:18Z",
    "updated_at": "2018-06-26T19:56:18Z",
    "author_association": "MEMBER",
    "body": "With http tracing enabled, do you see pings actually being sent?\r\n\r\nI can totally see this happening though. We only start the keepalive timer when the HTTP2 transport layer is ready to send more bytes down to the TCP. If the HTTP2 transport itself is blocked on it's previous write completing (which at a lower level means that the fd is not writable), then we cannot initiate a ping. "
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/400441967",
    "html_url": "https://github.com/grpc/grpc/issues/15871#issuecomment-400441967",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15871",
    "id": 400441967,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwMDQ0MTk2Nw==",
    "user": {
      "login": "yashykt",
      "id": 4181124,
      "node_id": "MDQ6VXNlcjQxODExMjQ=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/4181124?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yashykt",
      "html_url": "https://github.com/yashykt",
      "followers_url": "https://api.github.com/users/yashykt/followers",
      "following_url": "https://api.github.com/users/yashykt/following{/other_user}",
      "gists_url": "https://api.github.com/users/yashykt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yashykt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yashykt/subscriptions",
      "organizations_url": "https://api.github.com/users/yashykt/orgs",
      "repos_url": "https://api.github.com/users/yashykt/repos",
      "events_url": "https://api.github.com/users/yashykt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yashykt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-26T19:57:27Z",
    "updated_at": "2018-06-26T19:57:27Z",
    "author_association": "MEMBER",
    "body": "The bug in #14717 was a different issue (a ping won't be sent when another ping is in flight)."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/403922727",
    "html_url": "https://github.com/grpc/grpc/issues/15871#issuecomment-403922727",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15871",
    "id": 403922727,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwMzkyMjcyNw==",
    "user": {
      "login": "srini100",
      "id": 35056280,
      "node_id": "MDQ6VXNlcjM1MDU2Mjgw",
      "avatar_url": "https://avatars2.githubusercontent.com/u/35056280?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/srini100",
      "html_url": "https://github.com/srini100",
      "followers_url": "https://api.github.com/users/srini100/followers",
      "following_url": "https://api.github.com/users/srini100/following{/other_user}",
      "gists_url": "https://api.github.com/users/srini100/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/srini100/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/srini100/subscriptions",
      "organizations_url": "https://api.github.com/users/srini100/orgs",
      "repos_url": "https://api.github.com/users/srini100/repos",
      "events_url": "https://api.github.com/users/srini100/events{/privacy}",
      "received_events_url": "https://api.github.com/users/srini100/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-10T18:32:07Z",
    "updated_at": "2018-07-10T18:32:07Z",
    "author_association": "CONTRIBUTOR",
    "body": "@yashykt This issue is straightforward to reproduce. It doesn't require load. One way to reproduce is to simply hang the server while server is streaming a response (say one byte per second) in a unary-streaming case where client is done sending its request and simply reading the streamed response. At this time the keepalive on client doesn't detect that server has stopped responding.\r\n\r\nI can also reproduce this issue with unary-unary but that is very inconsistent. Will try to find a way to consistently reproduce it."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/404013699",
    "html_url": "https://github.com/grpc/grpc/issues/15871#issuecomment-404013699",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15871",
    "id": 404013699,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNDAxMzY5OQ==",
    "user": {
      "login": "yashykt",
      "id": 4181124,
      "node_id": "MDQ6VXNlcjQxODExMjQ=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/4181124?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yashykt",
      "html_url": "https://github.com/yashykt",
      "followers_url": "https://api.github.com/users/yashykt/followers",
      "following_url": "https://api.github.com/users/yashykt/following{/other_user}",
      "gists_url": "https://api.github.com/users/yashykt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yashykt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yashykt/subscriptions",
      "organizations_url": "https://api.github.com/users/yashykt/orgs",
      "repos_url": "https://api.github.com/users/yashykt/repos",
      "events_url": "https://api.github.com/users/yashykt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yashykt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-11T01:15:39Z",
    "updated_at": "2018-07-11T01:15:39Z",
    "author_association": "MEMBER",
    "body": "I take back my original hypothesis. I did not notice that the following two channel arguments were not being set. Pleaes set GRPC_ARG_HTTP2_MIN_SENT_PING_INTERVAL_WITHOUT_DATA_MS to 10000 and GRPC_ARG_HTTP2_MAX_PINGS_WITHOUT_DATA to 0.\r\n\r\n@forestphoenix your example did not compile, so I have no way of verifying your case, but @srini100 's example works as intended after setting these two arguments."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/404897631",
    "html_url": "https://github.com/grpc/grpc/issues/15871#issuecomment-404897631",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15871",
    "id": 404897631,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNDg5NzYzMQ==",
    "user": {
      "login": "forestphoenix",
      "id": 13005323,
      "node_id": "MDQ6VXNlcjEzMDA1MzIz",
      "avatar_url": "https://avatars0.githubusercontent.com/u/13005323?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/forestphoenix",
      "html_url": "https://github.com/forestphoenix",
      "followers_url": "https://api.github.com/users/forestphoenix/followers",
      "following_url": "https://api.github.com/users/forestphoenix/following{/other_user}",
      "gists_url": "https://api.github.com/users/forestphoenix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/forestphoenix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/forestphoenix/subscriptions",
      "organizations_url": "https://api.github.com/users/forestphoenix/orgs",
      "repos_url": "https://api.github.com/users/forestphoenix/repos",
      "events_url": "https://api.github.com/users/forestphoenix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/forestphoenix/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-13T17:18:54Z",
    "updated_at": "2018-07-13T17:18:54Z",
    "author_association": "NONE",
    "body": "@yashykt thanks for the tip, but setting the arguments did not seem to change much:\r\n\r\nWith the suggested arguments set, the `Read` calls do one of the following:\r\n- return after 20 seconds (the desired behavior)\r\n- return after 15 minutes\r\n\r\nThe `Write` calls always return after 15 minutes. \r\n\r\nWith a reduced payload, everything works as expected.\r\n\r\nPS: I fixed the gist and added the suggested arguments."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/422548286",
    "html_url": "https://github.com/grpc/grpc/issues/15871#issuecomment-422548286",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15871",
    "id": 422548286,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyMjU0ODI4Ng==",
    "user": {
      "login": "yashykt",
      "id": 4181124,
      "node_id": "MDQ6VXNlcjQxODExMjQ=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/4181124?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yashykt",
      "html_url": "https://github.com/yashykt",
      "followers_url": "https://api.github.com/users/yashykt/followers",
      "following_url": "https://api.github.com/users/yashykt/following{/other_user}",
      "gists_url": "https://api.github.com/users/yashykt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yashykt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yashykt/subscriptions",
      "organizations_url": "https://api.github.com/users/yashykt/orgs",
      "repos_url": "https://api.github.com/users/yashykt/repos",
      "events_url": "https://api.github.com/users/yashykt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yashykt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-09-18T20:47:11Z",
    "updated_at": "2018-09-18T20:47:11Z",
    "author_association": "MEMBER",
    "body": "This should have been solved by #16419"
  }
]
