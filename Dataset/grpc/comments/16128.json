[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/407919561",
    "html_url": "https://github.com/grpc/grpc/issues/16128#issuecomment-407919561",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/16128",
    "id": 407919561,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNzkxOTU2MQ==",
    "user": {
      "login": "AspirinSJL",
      "id": 3314176,
      "node_id": "MDQ6VXNlcjMzMTQxNzY=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/3314176?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AspirinSJL",
      "html_url": "https://github.com/AspirinSJL",
      "followers_url": "https://api.github.com/users/AspirinSJL/followers",
      "following_url": "https://api.github.com/users/AspirinSJL/following{/other_user}",
      "gists_url": "https://api.github.com/users/AspirinSJL/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AspirinSJL/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AspirinSJL/subscriptions",
      "organizations_url": "https://api.github.com/users/AspirinSJL/orgs",
      "repos_url": "https://api.github.com/users/AspirinSJL/repos",
      "events_url": "https://api.github.com/users/AspirinSJL/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AspirinSJL/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-25T22:42:29Z",
    "updated_at": "2018-07-25T22:42:29Z",
    "author_association": "MEMBER",
    "body": "@markdroth This is the bug I mentioned at today's standup. @sreecha and I found this two-phase connectivity watching but can't fully understand it.\r\n\r\nAfter a closer look, I think in the early version the tag is pushed to the cq when timeout is reached. \r\n\r\nhttps://github.com/grpc/grpc/blame/7ad166fafcc5e75097ac6a8c5403423500a23a7a/src/core/ext/filters/client_channel/channel_connectivity.c#L151\r\n\r\nBut after https://github.com/grpc/grpc/pull/10813, it's moved to a later phase.\r\nhttps://github.com/grpc/grpc/pull/10813/files#diff-13b55a9c39db759126eb387e14d740d5R164\r\n\r\n@apolcyn may know why we have this change."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/407922978",
    "html_url": "https://github.com/grpc/grpc/issues/16128#issuecomment-407922978",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/16128",
    "id": 407922978,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNzkyMjk3OA==",
    "user": {
      "login": "apolcyn",
      "id": 9566254,
      "node_id": "MDQ6VXNlcjk1NjYyNTQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9566254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apolcyn",
      "html_url": "https://github.com/apolcyn",
      "followers_url": "https://api.github.com/users/apolcyn/followers",
      "following_url": "https://api.github.com/users/apolcyn/following{/other_user}",
      "gists_url": "https://api.github.com/users/apolcyn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apolcyn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apolcyn/subscriptions",
      "organizations_url": "https://api.github.com/users/apolcyn/orgs",
      "repos_url": "https://api.github.com/users/apolcyn/repos",
      "events_url": "https://api.github.com/users/apolcyn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apolcyn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-25T23:00:02Z",
    "updated_at": "2018-07-25T23:01:43Z",
    "author_association": "CONTRIBUTOR",
    "body": "#10813 needed to move the cq end op to a later phase basically to fix a memory accumulation when lots of \"watch_connectivity\" state calls time out:\r\n\r\nEach `watch_connectivity` state call creates a timer closure and a watcher closure. Before, #10813, if the timer went off, the cq op would complete, we'd stop working on it, and the watcher closure would be left hanging onto that channel indefinitely, until the channel was destroyed. If the application did a lot of `watch_connectivity_state` calls with deadlines, and the channel is long-lived, then the watcher objects would accumulate in memory - https://github.com/GoogleCloudPlatform/google-cloud-ruby/issues/1421. #10813 fixed this by basically waiting until both the timer object and watcher object have been free'd when ending the cq op."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/407927502",
    "html_url": "https://github.com/grpc/grpc/issues/16128#issuecomment-407927502",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/16128",
    "id": 407927502,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNzkyNzUwMg==",
    "user": {
      "login": "AspirinSJL",
      "id": 3314176,
      "node_id": "MDQ6VXNlcjMzMTQxNzY=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/3314176?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AspirinSJL",
      "html_url": "https://github.com/AspirinSJL",
      "followers_url": "https://api.github.com/users/AspirinSJL/followers",
      "following_url": "https://api.github.com/users/AspirinSJL/following{/other_user}",
      "gists_url": "https://api.github.com/users/AspirinSJL/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AspirinSJL/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AspirinSJL/subscriptions",
      "organizations_url": "https://api.github.com/users/AspirinSJL/orgs",
      "repos_url": "https://api.github.com/users/AspirinSJL/repos",
      "events_url": "https://api.github.com/users/AspirinSJL/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AspirinSJL/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-25T23:24:51Z",
    "updated_at": "2018-07-25T23:24:51Z",
    "author_association": "MEMBER",
    "body": "I don't have a clear solution now, but I guess the watcher closure might need to be worked on by some follow-up entity so that the cq op can be completed as expected. "
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/415529147",
    "html_url": "https://github.com/grpc/grpc/issues/16128#issuecomment-415529147",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/16128",
    "id": 415529147,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxNTUyOTE0Nw==",
    "user": {
      "login": "sreecha",
      "id": 2754995,
      "node_id": "MDQ6VXNlcjI3NTQ5OTU=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/2754995?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sreecha",
      "html_url": "https://github.com/sreecha",
      "followers_url": "https://api.github.com/users/sreecha/followers",
      "following_url": "https://api.github.com/users/sreecha/following{/other_user}",
      "gists_url": "https://api.github.com/users/sreecha/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sreecha/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sreecha/subscriptions",
      "organizations_url": "https://api.github.com/users/sreecha/orgs",
      "repos_url": "https://api.github.com/users/sreecha/repos",
      "events_url": "https://api.github.com/users/sreecha/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sreecha/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-23T18:51:55Z",
    "updated_at": "2018-08-23T18:51:55Z",
    "author_association": "CONTRIBUTOR",
    "body": "@AspirinSJL : Should we just close this issue? - Its probably not worth fixing it since it currently does not happen"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/415566202",
    "html_url": "https://github.com/grpc/grpc/issues/16128#issuecomment-415566202",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/16128",
    "id": 415566202,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxNTU2NjIwMg==",
    "user": {
      "login": "AspirinSJL",
      "id": 3314176,
      "node_id": "MDQ6VXNlcjMzMTQxNzY=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/3314176?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AspirinSJL",
      "html_url": "https://github.com/AspirinSJL",
      "followers_url": "https://api.github.com/users/AspirinSJL/followers",
      "following_url": "https://api.github.com/users/AspirinSJL/following{/other_user}",
      "gists_url": "https://api.github.com/users/AspirinSJL/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AspirinSJL/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AspirinSJL/subscriptions",
      "organizations_url": "https://api.github.com/users/AspirinSJL/orgs",
      "repos_url": "https://api.github.com/users/AspirinSJL/repos",
      "events_url": "https://api.github.com/users/AspirinSJL/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AspirinSJL/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-23T20:48:50Z",
    "updated_at": "2018-08-23T20:48:50Z",
    "author_association": "MEMBER",
    "body": "Yeah, it's low priority. But it's really a potential problem.\r\n\r\nI added wontfix label to say this is an issue that we haven't planed to fix. Closing."
  }
]
