[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/362759642",
    "html_url": "https://github.com/grpc/grpc/issues/14246#issuecomment-362759642",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14246",
    "id": 362759642,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2Mjc1OTY0Mg==",
    "user": {
      "login": "apolcyn",
      "id": 9566254,
      "node_id": "MDQ6VXNlcjk1NjYyNTQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9566254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apolcyn",
      "html_url": "https://github.com/apolcyn",
      "followers_url": "https://api.github.com/users/apolcyn/followers",
      "following_url": "https://api.github.com/users/apolcyn/following{/other_user}",
      "gists_url": "https://api.github.com/users/apolcyn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apolcyn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apolcyn/subscriptions",
      "organizations_url": "https://api.github.com/users/apolcyn/orgs",
      "repos_url": "https://api.github.com/users/apolcyn/repos",
      "events_url": "https://api.github.com/users/apolcyn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apolcyn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-03T01:20:48Z",
    "updated_at": "2018-02-03T01:20:48Z",
    "author_association": "CONTRIBUTOR",
    "body": "I can't understand the problem from the description here.\r\n\r\nFor the behavior you're seeing, what exactly is meant by <i>polling</i> and the connection being <i>rapidly opened and closed</i>. Are you observing multiple TCP connections getting opened and closed when attempting one streaming call?\r\n\r\nClosing as I can't investigate this further. Feel free to reopen if more defails can be provided?"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/362760840",
    "html_url": "https://github.com/grpc/grpc/issues/14246#issuecomment-362760840",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14246",
    "id": 362760840,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2Mjc2MDg0MA==",
    "user": {
      "login": "kgreenek",
      "id": 1295700,
      "node_id": "MDQ6VXNlcjEyOTU3MDA=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1295700?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kgreenek",
      "html_url": "https://github.com/kgreenek",
      "followers_url": "https://api.github.com/users/kgreenek/followers",
      "following_url": "https://api.github.com/users/kgreenek/following{/other_user}",
      "gists_url": "https://api.github.com/users/kgreenek/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kgreenek/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kgreenek/subscriptions",
      "organizations_url": "https://api.github.com/users/kgreenek/orgs",
      "repos_url": "https://api.github.com/users/kgreenek/repos",
      "events_url": "https://api.github.com/users/kgreenek/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kgreenek/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-03T01:28:55Z",
    "updated_at": "2018-02-03T01:31:04Z",
    "author_association": "NONE",
    "body": "Yes, multiple TCP connections are opened and closed when attempting one streaming call. The client opens the connection, receives one reply, closes it, and then reopens another TCP connection again (and that process repeats as long as the ruby client is \"streaming\" replies).\r\n\r\nI would expect it to open the connection, receive a series of replies, and then only close the connection when the client or server closes it.\r\n\r\nI don't see how I can reopen this issue on GitHub. Is there a button to \"reopen\"?"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/362761291",
    "html_url": "https://github.com/grpc/grpc/issues/14246#issuecomment-362761291",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14246",
    "id": 362761291,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2Mjc2MTI5MQ==",
    "user": {
      "login": "apolcyn",
      "id": 9566254,
      "node_id": "MDQ6VXNlcjk1NjYyNTQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9566254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apolcyn",
      "html_url": "https://github.com/apolcyn",
      "followers_url": "https://api.github.com/users/apolcyn/followers",
      "following_url": "https://api.github.com/users/apolcyn/following{/other_user}",
      "gists_url": "https://api.github.com/users/apolcyn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apolcyn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apolcyn/subscriptions",
      "organizations_url": "https://api.github.com/users/apolcyn/orgs",
      "repos_url": "https://api.github.com/users/apolcyn/repos",
      "events_url": "https://api.github.com/users/apolcyn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apolcyn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-03T01:32:27Z",
    "updated_at": "2018-02-03T01:32:27Z",
    "author_association": "CONTRIBUTOR",
    "body": "Repoened. Can you please show the log traces which indicate that multiple TCP connections are opened and closed?"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/362763101",
    "html_url": "https://github.com/grpc/grpc/issues/14246#issuecomment-362763101",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14246",
    "id": 362763101,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2Mjc2MzEwMQ==",
    "user": {
      "login": "kgreenek",
      "id": 1295700,
      "node_id": "MDQ6VXNlcjEyOTU3MDA=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1295700?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kgreenek",
      "html_url": "https://github.com/kgreenek",
      "followers_url": "https://api.github.com/users/kgreenek/followers",
      "following_url": "https://api.github.com/users/kgreenek/following{/other_user}",
      "gists_url": "https://api.github.com/users/kgreenek/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kgreenek/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kgreenek/subscriptions",
      "organizations_url": "https://api.github.com/users/kgreenek/orgs",
      "repos_url": "https://api.github.com/users/kgreenek/repos",
      "events_url": "https://api.github.com/users/kgreenek/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kgreenek/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-03T01:45:25Z",
    "updated_at": "2018-02-03T01:45:25Z",
    "author_association": "NONE",
    "body": "Happy to. How do I get the log traces you need?\r\n\r\nI haven't actually sniffed the network to see if the actual connections are being opened and closed, but in my server, I am seeing the context.is_active() flag get set to false, which isn't (supposed to be) set until the connection is closed.\r\n\r\nIf it helps, here is a python server code snippet that produced the logs in the issue description:\r\n```python\r\ndef GetMissionState(request, grpc_context):\r\n    logger = logging.getLogger()\r\n    logger.info(\"GetMissionState stream started\")\r\n    while True:\r\n        if not grpc_context.is_active():\r\n            break\r\n        # ... do stuff and yield streaming replies\r\n    logger.info(\"GetMissionState stream finished\")\r\n```\r\n\r\nAfter yielding one reply, the is_active flag becomes False, indicating the the client closed the (TCP) connection. Then I see the client immediately open another one, and the process repeats.\r\n\r\nI have tried with Python and C++ clients, and only the Ruby client causes this \"polling\" behavior, where connections are rapidly opened and then closed after receiving one reply."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/362765027",
    "html_url": "https://github.com/grpc/grpc/issues/14246#issuecomment-362765027",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14246",
    "id": 362765027,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2Mjc2NTAyNw==",
    "user": {
      "login": "apolcyn",
      "id": 9566254,
      "node_id": "MDQ6VXNlcjk1NjYyNTQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9566254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apolcyn",
      "html_url": "https://github.com/apolcyn",
      "followers_url": "https://api.github.com/users/apolcyn/followers",
      "following_url": "https://api.github.com/users/apolcyn/following{/other_user}",
      "gists_url": "https://api.github.com/users/apolcyn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apolcyn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apolcyn/subscriptions",
      "organizations_url": "https://api.github.com/users/apolcyn/orgs",
      "repos_url": "https://api.github.com/users/apolcyn/repos",
      "events_url": "https://api.github.com/users/apolcyn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apolcyn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-03T02:00:42Z",
    "updated_at": "2018-02-03T02:01:26Z",
    "author_association": "CONTRIBUTOR",
    "body": "One way to check is tcpdump. Running locally, you could run something like `tcpdump -i lo 'port <server port>'`, and then watch the tcpdump logs to see if you can see connections being created and closed (indicated by syn and fin packets)."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/362765621",
    "html_url": "https://github.com/grpc/grpc/issues/14246#issuecomment-362765621",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14246",
    "id": 362765621,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2Mjc2NTYyMQ==",
    "user": {
      "login": "kgreenek",
      "id": 1295700,
      "node_id": "MDQ6VXNlcjEyOTU3MDA=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1295700?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kgreenek",
      "html_url": "https://github.com/kgreenek",
      "followers_url": "https://api.github.com/users/kgreenek/followers",
      "following_url": "https://api.github.com/users/kgreenek/following{/other_user}",
      "gists_url": "https://api.github.com/users/kgreenek/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kgreenek/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kgreenek/subscriptions",
      "organizations_url": "https://api.github.com/users/kgreenek/orgs",
      "repos_url": "https://api.github.com/users/kgreenek/repos",
      "events_url": "https://api.github.com/users/kgreenek/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kgreenek/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-03T02:05:07Z",
    "updated_at": "2018-02-03T02:05:07Z",
    "author_association": "NONE",
    "body": "Thanks. I'll paste those here sometime next week. I don't have access to the Ruby client right now."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/389338686",
    "html_url": "https://github.com/grpc/grpc/issues/14246#issuecomment-389338686",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14246",
    "id": 389338686,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4OTMzODY4Ng==",
    "user": {
      "login": "apolcyn",
      "id": 9566254,
      "node_id": "MDQ6VXNlcjk1NjYyNTQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9566254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apolcyn",
      "html_url": "https://github.com/apolcyn",
      "followers_url": "https://api.github.com/users/apolcyn/followers",
      "following_url": "https://api.github.com/users/apolcyn/following{/other_user}",
      "gists_url": "https://api.github.com/users/apolcyn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apolcyn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apolcyn/subscriptions",
      "organizations_url": "https://api.github.com/users/apolcyn/orgs",
      "repos_url": "https://api.github.com/users/apolcyn/repos",
      "events_url": "https://api.github.com/users/apolcyn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apolcyn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-15T22:51:22Z",
    "updated_at": "2018-05-15T22:51:22Z",
    "author_association": "CONTRIBUTOR",
    "body": "I think this issue is not present, so closing. Please reopen or file a new issue if needed."
  }
]
