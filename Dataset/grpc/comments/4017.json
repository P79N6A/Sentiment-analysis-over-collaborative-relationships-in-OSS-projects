[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/172775620",
    "html_url": "https://github.com/grpc/grpc/issues/4017#issuecomment-172775620",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/4017",
    "id": 172775620,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3Mjc3NTYyMA==",
    "user": {
      "login": "DMXRoid",
      "id": 328311,
      "node_id": "MDQ6VXNlcjMyODMxMQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/328311?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DMXRoid",
      "html_url": "https://github.com/DMXRoid",
      "followers_url": "https://api.github.com/users/DMXRoid/followers",
      "following_url": "https://api.github.com/users/DMXRoid/following{/other_user}",
      "gists_url": "https://api.github.com/users/DMXRoid/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DMXRoid/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DMXRoid/subscriptions",
      "organizations_url": "https://api.github.com/users/DMXRoid/orgs",
      "repos_url": "https://api.github.com/users/DMXRoid/repos",
      "events_url": "https://api.github.com/users/DMXRoid/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DMXRoid/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-01-19T08:35:44Z",
    "updated_at": "2016-01-19T08:35:44Z",
    "author_association": "NONE",
    "body": "This happens with the latest master libs and PHP extension (both git and the pecl 0.7.0 release) as well.  Functionally the same strace, with a bunch of timed out futex() calls.  It more or less makes the extension unusable.\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/172778347",
    "html_url": "https://github.com/grpc/grpc/issues/4017#issuecomment-172778347",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/4017",
    "id": 172778347,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3Mjc3ODM0Nw==",
    "user": {
      "login": "pavel-odintsov",
      "id": 2744166,
      "node_id": "MDQ6VXNlcjI3NDQxNjY=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/2744166?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pavel-odintsov",
      "html_url": "https://github.com/pavel-odintsov",
      "followers_url": "https://api.github.com/users/pavel-odintsov/followers",
      "following_url": "https://api.github.com/users/pavel-odintsov/following{/other_user}",
      "gists_url": "https://api.github.com/users/pavel-odintsov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pavel-odintsov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pavel-odintsov/subscriptions",
      "organizations_url": "https://api.github.com/users/pavel-odintsov/orgs",
      "repos_url": "https://api.github.com/users/pavel-odintsov/repos",
      "events_url": "https://api.github.com/users/pavel-odintsov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pavel-odintsov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-01-19T08:50:07Z",
    "updated_at": "2016-01-19T08:50:07Z",
    "author_association": "NONE",
    "body": "Yep, definitely. \n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/174883948",
    "html_url": "https://github.com/grpc/grpc/issues/4017#issuecomment-174883948",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/4017",
    "id": 174883948,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3NDg4Mzk0OA==",
    "user": {
      "login": "pavel-odintsov",
      "id": 2744166,
      "node_id": "MDQ6VXNlcjI3NDQxNjY=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/2744166?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pavel-odintsov",
      "html_url": "https://github.com/pavel-odintsov",
      "followers_url": "https://api.github.com/users/pavel-odintsov/followers",
      "following_url": "https://api.github.com/users/pavel-odintsov/following{/other_user}",
      "gists_url": "https://api.github.com/users/pavel-odintsov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pavel-odintsov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pavel-odintsov/subscriptions",
      "organizations_url": "https://api.github.com/users/pavel-odintsov/orgs",
      "repos_url": "https://api.github.com/users/pavel-odintsov/repos",
      "events_url": "https://api.github.com/users/pavel-odintsov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pavel-odintsov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-01-26T08:08:45Z",
    "updated_at": "2016-01-26T08:08:45Z",
    "author_association": "NONE",
    "body": "Any workarounds here? \n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/175201224",
    "html_url": "https://github.com/grpc/grpc/issues/4017#issuecomment-175201224",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/4017",
    "id": 175201224,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3NTIwMTIyNA==",
    "user": {
      "login": "stanley-cheung",
      "id": 11674202,
      "node_id": "MDQ6VXNlcjExNjc0MjAy",
      "avatar_url": "https://avatars2.githubusercontent.com/u/11674202?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stanley-cheung",
      "html_url": "https://github.com/stanley-cheung",
      "followers_url": "https://api.github.com/users/stanley-cheung/followers",
      "following_url": "https://api.github.com/users/stanley-cheung/following{/other_user}",
      "gists_url": "https://api.github.com/users/stanley-cheung/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stanley-cheung/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stanley-cheung/subscriptions",
      "organizations_url": "https://api.github.com/users/stanley-cheung/orgs",
      "repos_url": "https://api.github.com/users/stanley-cheung/repos",
      "events_url": "https://api.github.com/users/stanley-cheung/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stanley-cheung/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-01-26T19:58:46Z",
    "updated_at": "2016-01-26T19:58:46Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hi, sorry we are a bit short of resources right now. Will look at this asap but unfortunately no ETA yet. \n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/189007090",
    "html_url": "https://github.com/grpc/grpc/issues/4017#issuecomment-189007090",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/4017",
    "id": 189007090,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4OTAwNzA5MA==",
    "user": {
      "login": "pavel-odintsov",
      "id": 2744166,
      "node_id": "MDQ6VXNlcjI3NDQxNjY=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/2744166?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pavel-odintsov",
      "html_url": "https://github.com/pavel-odintsov",
      "followers_url": "https://api.github.com/users/pavel-odintsov/followers",
      "following_url": "https://api.github.com/users/pavel-odintsov/following{/other_user}",
      "gists_url": "https://api.github.com/users/pavel-odintsov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pavel-odintsov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pavel-odintsov/subscriptions",
      "organizations_url": "https://api.github.com/users/pavel-odintsov/orgs",
      "repos_url": "https://api.github.com/users/pavel-odintsov/repos",
      "events_url": "https://api.github.com/users/pavel-odintsov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pavel-odintsov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-02-25T22:08:38Z",
    "updated_at": "2016-02-25T22:08:38Z",
    "author_association": "NONE",
    "body": "Hello!\n\nCould you spare some time and investigate this issue or share some ideas to me about this bug? I'll try to dig and fix it but actually I haven't any ideas...\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/220914932",
    "html_url": "https://github.com/grpc/grpc/issues/4017#issuecomment-220914932",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/4017",
    "id": 220914932,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyMDkxNDkzMg==",
    "user": {
      "login": "dstore-dbap",
      "id": 4869673,
      "node_id": "MDQ6VXNlcjQ4Njk2NzM=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/4869673?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dstore-dbap",
      "html_url": "https://github.com/dstore-dbap",
      "followers_url": "https://api.github.com/users/dstore-dbap/followers",
      "following_url": "https://api.github.com/users/dstore-dbap/following{/other_user}",
      "gists_url": "https://api.github.com/users/dstore-dbap/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dstore-dbap/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dstore-dbap/subscriptions",
      "organizations_url": "https://api.github.com/users/dstore-dbap/orgs",
      "repos_url": "https://api.github.com/users/dstore-dbap/repos",
      "events_url": "https://api.github.com/users/dstore-dbap/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dstore-dbap/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-05-23T08:15:31Z",
    "updated_at": "2016-05-23T08:15:31Z",
    "author_association": "NONE",
    "body": "We're experiencing the same issue here when accessing a grpc-java server with grpc-php client (both on OS X). First thought was that is is related to interoperability. But:\n\nIt's reproduceable by running `run_tests.sh` manually in a shell (in a linuxbrew environment). What you see is that after all test are run and the phpunit \"OK\"- message is printed it takes about 10 seconds to exit and return to the shell.\n\nThe strace snippet is similar to the one posted by @pavel-odintsov :\n\n```\nwrite(1, \"OK (63 tests, 194 assertions)\\n\", 30OK (63 tests, 194 assertions)\n) = 30\nsetitimer(ITIMER_PROF, {it_interval={0, 0}, it_value={0, 0}}, NULL) = 0\nshutdown(5, SHUT_RDWR)                  = 0\nclose(5)                                = 0\nbrk(0x4953000)                          = 0x4953000\nclose(2)                                = 0\nclose(1)                                = 0\nmunmap(0x7f9defdd0000, 4096)            = 0\nclose(0)                                = 0\nmunmap(0x7f9defdd1000, 4096)            = 0\nmunmap(0x7f9dec47b000, 266240)          = 0\nmunmap(0x7f9dec4bc000, 266240)          = 0\nmunmap(0x7f9dec4fd000, 266240)          = 0\nmunmap(0x7f9dec53e000, 266240)          = 0\nmunmap(0x7f9dec57f000, 266240)          = 0\nmunmap(0x7f9dec5c0000, 266240)          = 0\nmunmap(0x7f9dec601000, 266240)          = 0\nmunmap(0x7f9defbf0000, 266240)          = 0\nsetitimer(ITIMER_PROF, {it_interval={0, 0}, it_value={0, 0}}, NULL) = 0\nfutex(0x7f9dec9f1724, FUTEX_WAIT_BITSET_PRIVATE|FUTEX_CLOCK_REALTIME, 1, {1463990850, 687541767}, ffffffff) = -1 ETIMEDOUT (Connection timed out)\nfutex(0x7f9dec9f1760, FUTEX_WAKE_PRIVATE, 1) = 0\nfutex(0x7f9dec9f1724, FUTEX_WAIT_BITSET_PRIVATE|FUTEX_CLOCK_REALTIME, 3, {1463990850, 789189846}, ffffffff) = -1 ETIMEDOUT (Connection timed out)\nfutex(0x7f9dec9f1760, FUTEX_WAKE_PRIVATE, 1) = 0\nfutex(0x7f9dec9f1724, FUTEX_WAIT_BITSET_PRIVATE|FUTEX_CLOCK_REALTIME, 5, {1463990850, 890588862}, ffffffff) = -1 ETIMEDOUT (Connection timed out)\n....continues....\n```\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/229129553",
    "html_url": "https://github.com/grpc/grpc/issues/4017#issuecomment-229129553",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/4017",
    "id": 229129553,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyOTEyOTU1Mw==",
    "user": {
      "login": "garrettjonesgoogle",
      "id": 13341017,
      "node_id": "MDQ6VXNlcjEzMzQxMDE3",
      "avatar_url": "https://avatars2.githubusercontent.com/u/13341017?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/garrettjonesgoogle",
      "html_url": "https://github.com/garrettjonesgoogle",
      "followers_url": "https://api.github.com/users/garrettjonesgoogle/followers",
      "following_url": "https://api.github.com/users/garrettjonesgoogle/following{/other_user}",
      "gists_url": "https://api.github.com/users/garrettjonesgoogle/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/garrettjonesgoogle/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/garrettjonesgoogle/subscriptions",
      "organizations_url": "https://api.github.com/users/garrettjonesgoogle/orgs",
      "repos_url": "https://api.github.com/users/garrettjonesgoogle/repos",
      "events_url": "https://api.github.com/users/garrettjonesgoogle/events{/privacy}",
      "received_events_url": "https://api.github.com/users/garrettjonesgoogle/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-06-28T17:56:01Z",
    "updated_at": "2016-06-28T17:56:01Z",
    "author_association": "NONE",
    "body": "There is a very simple workaround - you have to call `close()` on the client:\n\n`$client->close();`\n\nThen shutdown should only be a couple seconds.\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/229295341",
    "html_url": "https://github.com/grpc/grpc/issues/4017#issuecomment-229295341",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/4017",
    "id": 229295341,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyOTI5NTM0MQ==",
    "user": {
      "login": "dstore-dbap",
      "id": 4869673,
      "node_id": "MDQ6VXNlcjQ4Njk2NzM=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/4869673?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dstore-dbap",
      "html_url": "https://github.com/dstore-dbap",
      "followers_url": "https://api.github.com/users/dstore-dbap/followers",
      "following_url": "https://api.github.com/users/dstore-dbap/following{/other_user}",
      "gists_url": "https://api.github.com/users/dstore-dbap/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dstore-dbap/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dstore-dbap/subscriptions",
      "organizations_url": "https://api.github.com/users/dstore-dbap/orgs",
      "repos_url": "https://api.github.com/users/dstore-dbap/repos",
      "events_url": "https://api.github.com/users/dstore-dbap/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dstore-dbap/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-06-29T08:47:39Z",
    "updated_at": "2016-06-29T08:47:39Z",
    "author_association": "NONE",
    "body": "Sorry @garrettjonesgoogle  $client->close() does not affect shutdown time. \n\ntest.php (which just connects and performs one simple, milliseconds-short grpc-call and then exits) called with $client-> close():\n\n```\n$ time /usr/local/bin/php test.php \nD0629 10:41:05.015293000 140735195370256 channel.c:175] Initialized secure channel\nreal    0m10.158s\nuser    0m0.030s\nsys     0m0.012s\n```\n\ntest.php called WITHOUT $client-> close():\n\n```\n$ time /usr/local/bin/php test.php \nD0629 10:41:23.194806000 140735195370256 channel.c:175] Initialized secure channel\nreal    0m10.166s\nuser    0m0.034s\nsys     0m0.013s\n```\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/229412452",
    "html_url": "https://github.com/grpc/grpc/issues/4017#issuecomment-229412452",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/4017",
    "id": 229412452,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyOTQxMjQ1Mg==",
    "user": {
      "login": "stanley-cheung",
      "id": 11674202,
      "node_id": "MDQ6VXNlcjExNjc0MjAy",
      "avatar_url": "https://avatars2.githubusercontent.com/u/11674202?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stanley-cheung",
      "html_url": "https://github.com/stanley-cheung",
      "followers_url": "https://api.github.com/users/stanley-cheung/followers",
      "following_url": "https://api.github.com/users/stanley-cheung/following{/other_user}",
      "gists_url": "https://api.github.com/users/stanley-cheung/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stanley-cheung/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stanley-cheung/subscriptions",
      "organizations_url": "https://api.github.com/users/stanley-cheung/orgs",
      "repos_url": "https://api.github.com/users/stanley-cheung/repos",
      "events_url": "https://api.github.com/users/stanley-cheung/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stanley-cheung/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-06-29T16:31:48Z",
    "updated_at": "2016-06-29T17:24:56Z",
    "author_association": "CONTRIBUTOR",
    "body": "I got a lead, apparently our extension's `PHP_MSHUTDOWN_FUNCTION` ~~is not being called~~ is the source of the problem. \n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/229804619",
    "html_url": "https://github.com/grpc/grpc/issues/4017#issuecomment-229804619",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/4017",
    "id": 229804619,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyOTgwNDYxOQ==",
    "user": {
      "login": "stanley-cheung",
      "id": 11674202,
      "node_id": "MDQ6VXNlcjExNjc0MjAy",
      "avatar_url": "https://avatars2.githubusercontent.com/u/11674202?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stanley-cheung",
      "html_url": "https://github.com/stanley-cheung",
      "followers_url": "https://api.github.com/users/stanley-cheung/followers",
      "following_url": "https://api.github.com/users/stanley-cheung/following{/other_user}",
      "gists_url": "https://api.github.com/users/stanley-cheung/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stanley-cheung/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stanley-cheung/subscriptions",
      "organizations_url": "https://api.github.com/users/stanley-cheung/orgs",
      "repos_url": "https://api.github.com/users/stanley-cheung/repos",
      "events_url": "https://api.github.com/users/stanley-cheung/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stanley-cheung/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-06-30T22:16:58Z",
    "updated_at": "2016-06-30T22:16:58Z",
    "author_association": "CONTRIBUTOR",
    "body": "Sorry to all that have been impacted by this bug (and for so long). We believe the issue has been resolved.\n"
  }
]
