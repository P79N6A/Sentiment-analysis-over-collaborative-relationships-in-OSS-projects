[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/342247891",
    "html_url": "https://github.com/grpc/grpc/issues/13275#issuecomment-342247891",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13275",
    "id": 342247891,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0MjI0Nzg5MQ==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-06T18:52:36Z",
    "updated_at": "2017-11-06T18:52:36Z",
    "author_association": "CONTRIBUTOR",
    "body": "CC @ctiller  @ZhouyihaiDing "
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/389563313",
    "html_url": "https://github.com/grpc/grpc/issues/13275#issuecomment-389563313",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13275",
    "id": 389563313,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4OTU2MzMxMw==",
    "user": {
      "login": "markdroth",
      "id": 18664614,
      "node_id": "MDQ6VXNlcjE4NjY0NjE0",
      "avatar_url": "https://avatars2.githubusercontent.com/u/18664614?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/markdroth",
      "html_url": "https://github.com/markdroth",
      "followers_url": "https://api.github.com/users/markdroth/followers",
      "following_url": "https://api.github.com/users/markdroth/following{/other_user}",
      "gists_url": "https://api.github.com/users/markdroth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/markdroth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/markdroth/subscriptions",
      "organizations_url": "https://api.github.com/users/markdroth/orgs",
      "repos_url": "https://api.github.com/users/markdroth/repos",
      "events_url": "https://api.github.com/users/markdroth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/markdroth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-16T15:33:46Z",
    "updated_at": "2018-05-16T15:33:46Z",
    "author_association": "MEMBER",
    "body": "Sree, this seems related to your work on `grpc_millis`."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/390331032",
    "html_url": "https://github.com/grpc/grpc/issues/13275#issuecomment-390331032",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13275",
    "id": 390331032,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MDMzMTAzMg==",
    "user": {
      "login": "sreecha",
      "id": 2754995,
      "node_id": "MDQ6VXNlcjI3NTQ5OTU=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/2754995?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sreecha",
      "html_url": "https://github.com/sreecha",
      "followers_url": "https://api.github.com/users/sreecha/followers",
      "following_url": "https://api.github.com/users/sreecha/following{/other_user}",
      "gists_url": "https://api.github.com/users/sreecha/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sreecha/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sreecha/subscriptions",
      "organizations_url": "https://api.github.com/users/sreecha/orgs",
      "repos_url": "https://api.github.com/users/sreecha/repos",
      "events_url": "https://api.github.com/users/sreecha/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sreecha/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-18T21:00:42Z",
    "updated_at": "2018-05-18T21:00:42Z",
    "author_association": "CONTRIBUTOR",
    "body": "What C-Core API are we referring to here?  (@ZhouyihaiDing / @jtattermusch)  ?\r\n\r\n(I tried reading #12886 but its a big PR)"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/390347991",
    "html_url": "https://github.com/grpc/grpc/issues/13275#issuecomment-390347991",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13275",
    "id": 390347991,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MDM0Nzk5MQ==",
    "user": {
      "login": "ZhouyihaiDing",
      "id": 28968539,
      "node_id": "MDQ6VXNlcjI4OTY4NTM5",
      "avatar_url": "https://avatars3.githubusercontent.com/u/28968539?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ZhouyihaiDing",
      "html_url": "https://github.com/ZhouyihaiDing",
      "followers_url": "https://api.github.com/users/ZhouyihaiDing/followers",
      "following_url": "https://api.github.com/users/ZhouyihaiDing/following{/other_user}",
      "gists_url": "https://api.github.com/users/ZhouyihaiDing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ZhouyihaiDing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ZhouyihaiDing/subscriptions",
      "organizations_url": "https://api.github.com/users/ZhouyihaiDing/orgs",
      "repos_url": "https://api.github.com/users/ZhouyihaiDing/repos",
      "events_url": "https://api.github.com/users/ZhouyihaiDing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ZhouyihaiDing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-18T22:22:40Z",
    "updated_at": "2018-05-18T22:24:43Z",
    "author_association": "CONTRIBUTOR",
    "body": "The solution for the issue #12886 is to extend the deadline from 1ms to 100ms because 1ms is too short for [`grpc_channel_watch_connectivity_state](https://github.com/grpc/grpc/blob/master/src/php/ext/grpc/channel.c#L521:3)`.\r\n\r\nIn my test at the time, deadline should be larger than 250ms so that there is no flaky when run 100 times in my desktop. Seems like this number varies by the environment."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/390670595",
    "html_url": "https://github.com/grpc/grpc/issues/13275#issuecomment-390670595",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13275",
    "id": 390670595,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MDY3MDU5NQ==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-21T14:28:12Z",
    "updated_at": "2018-05-21T14:28:12Z",
    "author_association": "CONTRIBUTOR",
    "body": "@sreecha   I think the idea was to be able to use a GPR_TIMESPAN (=timeout) in C-core APIs that accept deadline (and then C core can internally convert to a GPR_CLOCK_MONOTONIC or whatever is used under the hood)."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/394879011",
    "html_url": "https://github.com/grpc/grpc/issues/13275#issuecomment-394879011",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13275",
    "id": 394879011,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NDg3OTAxMQ==",
    "user": {
      "login": "sreecha",
      "id": 2754995,
      "node_id": "MDQ6VXNlcjI3NTQ5OTU=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/2754995?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sreecha",
      "html_url": "https://github.com/sreecha",
      "followers_url": "https://api.github.com/users/sreecha/followers",
      "following_url": "https://api.github.com/users/sreecha/following{/other_user}",
      "gists_url": "https://api.github.com/users/sreecha/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sreecha/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sreecha/subscriptions",
      "organizations_url": "https://api.github.com/users/sreecha/orgs",
      "repos_url": "https://api.github.com/users/sreecha/repos",
      "events_url": "https://api.github.com/users/sreecha/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sreecha/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-05T22:20:25Z",
    "updated_at": "2018-06-05T22:25:32Z",
    "author_association": "CONTRIBUTOR",
    "body": "This does not look like an issue anymore (i am not sure if this was ever an issue).\r\n\r\nI looked at the implementation of `grpc_channel_watch_connectivity_state` and all the other functions (see below) in `grpc.h` that take `gpr_timespec`. All these functionsconvert `gpr_timespec` to `grpc_millis` using ` grpc_timespec_to_millis_round_up/down` which does the right thing! (i.e handles timespec of type `GPR_TIMESPAN` )\r\n\r\n  - `grpc_completion_queue_next`\r\n  - `grpc_completion_queue_pluck`\r\n  - `grpc_channel_watch_connectivity_state`\r\n  - `grpc_channel_create_call`\r\n  - `grpc_channel_create_registered_call`\r\n  - `grpc_server_request_registered_call`\r\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/394880893",
    "html_url": "https://github.com/grpc/grpc/issues/13275#issuecomment-394880893",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13275",
    "id": 394880893,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NDg4MDg5Mw==",
    "user": {
      "login": "sreecha",
      "id": 2754995,
      "node_id": "MDQ6VXNlcjI3NTQ5OTU=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/2754995?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sreecha",
      "html_url": "https://github.com/sreecha",
      "followers_url": "https://api.github.com/users/sreecha/followers",
      "following_url": "https://api.github.com/users/sreecha/following{/other_user}",
      "gists_url": "https://api.github.com/users/sreecha/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sreecha/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sreecha/subscriptions",
      "organizations_url": "https://api.github.com/users/sreecha/orgs",
      "repos_url": "https://api.github.com/users/sreecha/repos",
      "events_url": "https://api.github.com/users/sreecha/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sreecha/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-05T22:29:21Z",
    "updated_at": "2018-06-05T22:29:38Z",
    "author_association": "CONTRIBUTOR",
    "body": "The original issue might be that 1 millisec was too less (when we changed the internal representation of deadline to `grpc_millis` from `gpr_timespec`, we increased the granularity to milliseconds - this was intentional.  Also timer threads are not super accurate (and may be off by a few milliseconds).. This is what might have caused the previous test to fail.\r\n\r\nI don't think the issue is related to handling `GPR_TIMESPAN`\r\n\r\nIf there is a repro of some failure that I can look at, please let me know. Else, I suggest we close this bug.\r\n\r\n/cc @jtattermusch @ZhouyihaiDing "
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/395442045",
    "html_url": "https://github.com/grpc/grpc/issues/13275#issuecomment-395442045",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13275",
    "id": 395442045,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NTQ0MjA0NQ==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-07T14:31:00Z",
    "updated_at": "2018-06-07T14:31:00Z",
    "author_association": "CONTRIBUTOR",
    "body": "@sreecha  I think you might be right, but AFAIK we don't have any tests that would verify that passing GPR_TIMESPAN to C core APIs works well. Without test coverage we can't really say much.\r\n\r\nPerhaps it would be a good noogler project to add some basic test coverage for this."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/395476580",
    "html_url": "https://github.com/grpc/grpc/issues/13275#issuecomment-395476580",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13275",
    "id": 395476580,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NTQ3NjU4MA==",
    "user": {
      "login": "sreecha",
      "id": 2754995,
      "node_id": "MDQ6VXNlcjI3NTQ5OTU=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/2754995?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sreecha",
      "html_url": "https://github.com/sreecha",
      "followers_url": "https://api.github.com/users/sreecha/followers",
      "following_url": "https://api.github.com/users/sreecha/following{/other_user}",
      "gists_url": "https://api.github.com/users/sreecha/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sreecha/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sreecha/subscriptions",
      "organizations_url": "https://api.github.com/users/sreecha/orgs",
      "repos_url": "https://api.github.com/users/sreecha/repos",
      "events_url": "https://api.github.com/users/sreecha/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sreecha/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-07T16:06:57Z",
    "updated_at": "2018-06-07T16:06:57Z",
    "author_association": "CONTRIBUTOR",
    "body": "What would really help is the exact repro of the case that stopped working after the `grpc_millis` change ..so that we can see if there is a bug somewhere.\r\n\r\nI know that writing unit tests is a good idea but at this point we are not really sure if there is a bug here (and as such, I wonder if our time is better spent on other higher priority failures).."
  }
]
