[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/146983399",
    "html_url": "https://github.com/grpc/grpc/issues/3736#issuecomment-146983399",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/3736",
    "id": 146983399,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0Njk4MzM5OQ==",
    "user": {
      "login": "nicolasnoble",
      "id": 7281574,
      "node_id": "MDQ6VXNlcjcyODE1NzQ=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/7281574?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nicolasnoble",
      "html_url": "https://github.com/nicolasnoble",
      "followers_url": "https://api.github.com/users/nicolasnoble/followers",
      "following_url": "https://api.github.com/users/nicolasnoble/following{/other_user}",
      "gists_url": "https://api.github.com/users/nicolasnoble/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nicolasnoble/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nicolasnoble/subscriptions",
      "organizations_url": "https://api.github.com/users/nicolasnoble/orgs",
      "repos_url": "https://api.github.com/users/nicolasnoble/repos",
      "events_url": "https://api.github.com/users/nicolasnoble/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nicolasnoble/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-10-09T20:52:45Z",
    "updated_at": "2015-10-09T20:52:45Z",
    "author_association": "CONTRIBUTOR",
    "body": "@ejona86 do you think you could give us some advice on that one ?\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/148103174",
    "html_url": "https://github.com/grpc/grpc/issues/3736#issuecomment-148103174",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/3736",
    "id": 148103174,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0ODEwMzE3NA==",
    "user": {
      "login": "ejona86",
      "id": 2811396,
      "node_id": "MDQ6VXNlcjI4MTEzOTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/2811396?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ejona86",
      "html_url": "https://github.com/ejona86",
      "followers_url": "https://api.github.com/users/ejona86/followers",
      "following_url": "https://api.github.com/users/ejona86/following{/other_user}",
      "gists_url": "https://api.github.com/users/ejona86/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ejona86/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ejona86/subscriptions",
      "organizations_url": "https://api.github.com/users/ejona86/orgs",
      "repos_url": "https://api.github.com/users/ejona86/repos",
      "events_url": "https://api.github.com/users/ejona86/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ejona86/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-10-14T16:13:44Z",
    "updated_at": "2015-10-14T16:13:44Z",
    "author_association": "MEMBER",
    "body": "Something is being sorted and its compareTo method is inconsistent. That code seems to be quite different upstream now. Maybe should update to a newer version.\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/156124041",
    "html_url": "https://github.com/grpc/grpc/issues/3736#issuecomment-156124041",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/3736",
    "id": 156124041,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NjEyNDA0MQ==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-11-12T14:48:31Z",
    "updated_at": "2015-11-12T14:48:31Z",
    "author_association": "CONTRIBUTOR",
    "body": "Alright, so I think I tracked down the root cause.\n\nThe problem is in Matrix Execution Strategy Plugin, which is the plugin that runs our simple groovy script to determine the configurations of the matrix job that should (or shouldn't be) run. (see Project -> Configure -> Execution strategy)\n\nLinks to source code based on the call stack that prove the problem is in matrix execution strategy plugin:\nhttps://github.com/jenkinsci/matrix-groovy-execution-strategy-plugin/blob/master/src/main/groovy/org/jenkinsci/plugins/ScriptRunner.groovy#L29\nhttps://github.com/jenkinsci/matrix-groovy-execution-strategy-plugin/blob/master/src/main/groovy/org/jenkinsci/plugins/GroovyScriptMES.groovy#L62\nhttps://github.com/jenkinsci/matrix-groovy-execution-strategy-plugin/blob/master/src/main/groovy/org/jenkinsci/plugins/BaseMES.groovy#L51\nhttps://github.com/jenkinsci/matrix-project-plugin/blob/matrix-project-1.6/src/main/java/hudson/matrix/MatrixBuild.java#L352\n\nThe most interesting part is https//github.com/jenkinsci/matrix-groovy-execution-strategy-plugin/blob/master/src/main/groovy/org/jenkinsci/plugins/ScriptRunner.groovy#L29, which tries to shuffle List<Combination> by invoking `c.sort { Math.random() }`. The comparator returns a random number each time, which violates the contract of a comparator if the sorting algorithm happens to invoke comparison for the same two numbers twice. \nActually, Math.random() always returns a positive number, so the line is a very broken way to shuffle a collection.\n\nThe call stack:\n\n```\nFATAL: Comparison method violates its general contract!\njava.lang.IllegalArgumentException: Comparison method violates its general contract!\n    at java.util.TimSort.mergeHi(TimSort.java:868)\n    at java.util.TimSort.mergeAt(TimSort.java:485)\n    at java.util.TimSort.mergeCollapse(TimSort.java:410)\n    at java.util.TimSort.sort(TimSort.java:214)\n    at java.util.TimSort.sort(TimSort.java:173)\n    at java.util.Arrays.sort(Arrays.java:659)\n    at java.util.Collections.sort(Collections.java:217)\n    at org.codehaus.groovy.runtime.DefaultGroovyMethods.sort(DefaultGroovyMethods.java:8200)\n    at org.codehaus.groovy.runtime.DefaultGroovyMethods.sort(DefaultGroovyMethods.java:8164)\n    at org.codehaus.groovy.runtime.dgm$728.invoke(Unknown Source)\n    at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite$PojoMetaMethodSiteNoUnwrapNoCoerce.invoke(PojoMetaMethodSite.java:271)\n    at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite.call(PojoMetaMethodSite.java:53)\n    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:116)\n    at org.jenkinsci.plugins.ScriptRunner.run(ScriptRunner.groovy:29)\n    at org.jenkinsci.plugins.ScriptRunner$run.call(Unknown Source)\n    at org.jenkinsci.plugins.GroovyScriptMES.decideOrder(GroovyScriptMES.groovy:62)\n    at org.jenkinsci.plugins.GroovyScriptMES$decideOrder.callCurrent(Unknown Source)\n    at org.jenkinsci.plugins.BaseMES.run(BaseMES.groovy:51)\n    at hudson.matrix.MatrixBuild$MatrixBuildExecution.doRun(MatrixBuild.java:352)\n    at hudson.model.AbstractBuild$AbstractBuildExecution.run(AbstractBuild.java:537)\n    at hudson.model.Run.execute(Run.java:1741)\n    at hudson.matrix.MatrixBuild.run(MatrixBuild.java:301)\n    at hudson.model.ResourceController.execute(ResourceController.java:98)\n    at hudson.model.Executor.run(Executor.java:410)\n```\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/157778080",
    "html_url": "https://github.com/grpc/grpc/issues/3736#issuecomment-157778080",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/3736",
    "id": 157778080,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1Nzc3ODA4MA==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-11-18T16:58:31Z",
    "updated_at": "2015-11-18T16:58:31Z",
    "author_association": "CONTRIBUTOR",
    "body": "Version 1.0.3 of https://wiki.jenkins-ci.org/display/JENKINS/Matrix+Groovy+Execution+Strategy+Plugin has been released. Now upgrading Jenkins to newer version of this plugin.\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/157863974",
    "html_url": "https://github.com/grpc/grpc/issues/3736#issuecomment-157863974",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/3736",
    "id": 157863974,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1Nzg2Mzk3NA==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-11-18T21:08:55Z",
    "updated_at": "2015-11-18T21:08:55Z",
    "author_association": "CONTRIBUTOR",
    "body": "Jenkins now uses 1.0.3 version of the plugin, so we shouldn't see the issue anymore.\n"
  }
]
