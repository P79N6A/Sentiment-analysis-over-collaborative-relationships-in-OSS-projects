[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/280391475",
    "html_url": "https://github.com/grpc/grpc/issues/9721#issuecomment-280391475",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/9721",
    "id": 280391475,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4MDM5MTQ3NQ==",
    "user": {
      "login": "nathanielmanistaatgoogle",
      "id": 10131044,
      "node_id": "MDQ6VXNlcjEwMTMxMDQ0",
      "avatar_url": "https://avatars0.githubusercontent.com/u/10131044?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nathanielmanistaatgoogle",
      "html_url": "https://github.com/nathanielmanistaatgoogle",
      "followers_url": "https://api.github.com/users/nathanielmanistaatgoogle/followers",
      "following_url": "https://api.github.com/users/nathanielmanistaatgoogle/following{/other_user}",
      "gists_url": "https://api.github.com/users/nathanielmanistaatgoogle/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nathanielmanistaatgoogle/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nathanielmanistaatgoogle/subscriptions",
      "organizations_url": "https://api.github.com/users/nathanielmanistaatgoogle/orgs",
      "repos_url": "https://api.github.com/users/nathanielmanistaatgoogle/repos",
      "events_url": "https://api.github.com/users/nathanielmanistaatgoogle/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nathanielmanistaatgoogle/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-16T17:00:47Z",
    "updated_at": "2017-02-16T17:00:47Z",
    "author_association": "MEMBER",
    "body": "With what version of `pip` are you working and what version of `grpcio-tools` are you trying to install? Are you able to reproduce the obstacle in a [virtual environment](https://virtualenv.pypa.io/en/stable/) or only with your system `pip`?"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/280411270",
    "html_url": "https://github.com/grpc/grpc/issues/9721#issuecomment-280411270",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/9721",
    "id": 280411270,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4MDQxMTI3MA==",
    "user": {
      "login": "tundratim",
      "id": 13384926,
      "node_id": "MDQ6VXNlcjEzMzg0OTI2",
      "avatar_url": "https://avatars3.githubusercontent.com/u/13384926?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tundratim",
      "html_url": "https://github.com/tundratim",
      "followers_url": "https://api.github.com/users/tundratim/followers",
      "following_url": "https://api.github.com/users/tundratim/following{/other_user}",
      "gists_url": "https://api.github.com/users/tundratim/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tundratim/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tundratim/subscriptions",
      "organizations_url": "https://api.github.com/users/tundratim/orgs",
      "repos_url": "https://api.github.com/users/tundratim/repos",
      "events_url": "https://api.github.com/users/tundratim/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tundratim/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-16T18:10:32Z",
    "updated_at": "2017-02-16T18:10:32Z",
    "author_association": "NONE",
    "body": "FreeBSD 10.3-STABLE #22 r313193\r\n\r\npython 2.7.13\r\n\r\npip 9.0.1\r\n\r\ngrpc 0.3.post19  (installed ok)\r\n\r\ngrpcio-tools 1.1.0  (failing)\r\n\r\nAll done within a 'pew' virtual environment though I can make it fail the same way on the host OS."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/280496950",
    "html_url": "https://github.com/grpc/grpc/issues/9721#issuecomment-280496950",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/9721",
    "id": 280496950,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4MDQ5Njk1MA==",
    "user": {
      "login": "nathanielmanistaatgoogle",
      "id": 10131044,
      "node_id": "MDQ6VXNlcjEwMTMxMDQ0",
      "avatar_url": "https://avatars0.githubusercontent.com/u/10131044?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nathanielmanistaatgoogle",
      "html_url": "https://github.com/nathanielmanistaatgoogle",
      "followers_url": "https://api.github.com/users/nathanielmanistaatgoogle/followers",
      "following_url": "https://api.github.com/users/nathanielmanistaatgoogle/following{/other_user}",
      "gists_url": "https://api.github.com/users/nathanielmanistaatgoogle/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nathanielmanistaatgoogle/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nathanielmanistaatgoogle/subscriptions",
      "organizations_url": "https://api.github.com/users/nathanielmanistaatgoogle/orgs",
      "repos_url": "https://api.github.com/users/nathanielmanistaatgoogle/repos",
      "events_url": "https://api.github.com/users/nathanielmanistaatgoogle/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nathanielmanistaatgoogle/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-16T23:23:05Z",
    "updated_at": "2017-02-16T23:23:05Z",
    "author_association": "MEMBER",
    "body": "The current state of gRPC-on-BSD is \"well we know of some folks who tweaked a few things and told us it was working about twelve months ago\", so we suspect that it's highly likely that gRPC doesn't build on BSD.\r\n\r\nAre you able to work with gRPC from source? If so, do you see the same problem when you build and run the test suite?"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/281855310",
    "html_url": "https://github.com/grpc/grpc/issues/9721#issuecomment-281855310",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/9721",
    "id": 281855310,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4MTg1NTMxMA==",
    "user": {
      "login": "tundratim",
      "id": 13384926,
      "node_id": "MDQ6VXNlcjEzMzg0OTI2",
      "avatar_url": "https://avatars3.githubusercontent.com/u/13384926?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tundratim",
      "html_url": "https://github.com/tundratim",
      "followers_url": "https://api.github.com/users/tundratim/followers",
      "following_url": "https://api.github.com/users/tundratim/following{/other_user}",
      "gists_url": "https://api.github.com/users/tundratim/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tundratim/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tundratim/subscriptions",
      "organizations_url": "https://api.github.com/users/tundratim/orgs",
      "repos_url": "https://api.github.com/users/tundratim/repos",
      "events_url": "https://api.github.com/users/tundratim/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tundratim/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-23T00:55:21Z",
    "updated_at": "2017-02-23T00:55:21Z",
    "author_association": "NONE",
    "body": "It would seem that a build from source also blows up - gmake + clang:\r\n\r\n[C]       Compiling src/core/lib/iomgr/tcp_posix.c\r\nsrc/core/lib/iomgr/tcp_posix.c:219:25: error: implicit conversion loses integer precision: 'msg_iovlen_type' (aka 'unsigned long') to\r\n      'int' [-Werror,-Wshorten-64-to-32]\r\n  msg.msg_iovlen = tcp->iov_size;\r\n                 ~ ~~~~~^~~~~~~~\r\nsrc/core/lib/iomgr/tcp_posix.c:364:22: error: implicit conversion loses integer precision: 'msg_iovlen_type' (aka 'unsigned long') to\r\n      'int' [-Werror,-Wshorten-64-to-32]\r\n    msg.msg_iovlen = iov_size;\r\n                   ~ ^~~~~~~~\r\n2 errors generated.\r\ngmake: *** [Makefile:2307: /usr1/shared/grpc/objs/opt/src/core/lib/iomgr/tcp_posix.o] Error 1\r\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/290212350",
    "html_url": "https://github.com/grpc/grpc/issues/9721#issuecomment-290212350",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/9721",
    "id": 290212350,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5MDIxMjM1MA==",
    "user": {
      "login": "xorander00",
      "id": 16010664,
      "node_id": "MDQ6VXNlcjE2MDEwNjY0",
      "avatar_url": "https://avatars0.githubusercontent.com/u/16010664?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/xorander00",
      "html_url": "https://github.com/xorander00",
      "followers_url": "https://api.github.com/users/xorander00/followers",
      "following_url": "https://api.github.com/users/xorander00/following{/other_user}",
      "gists_url": "https://api.github.com/users/xorander00/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/xorander00/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/xorander00/subscriptions",
      "organizations_url": "https://api.github.com/users/xorander00/orgs",
      "repos_url": "https://api.github.com/users/xorander00/repos",
      "events_url": "https://api.github.com/users/xorander00/events{/privacy}",
      "received_events_url": "https://api.github.com/users/xorander00/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-29T20:16:38Z",
    "updated_at": "2017-03-29T20:16:38Z",
    "author_association": "NONE",
    "body": "I commented on a thread in regards to this over at GitLab:\r\nhttps://gitlab.com/gitlab-org/gitaly/issues/154\r\n\r\nFigured I'd link it here too, as I'd like to get this fixed and working on FreeBSD.  Any suggestions would be greatly appreciated, thanks! :)"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/290240784",
    "html_url": "https://github.com/grpc/grpc/issues/9721#issuecomment-290240784",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/9721",
    "id": 290240784,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5MDI0MDc4NA==",
    "user": {
      "login": "tundratim",
      "id": 13384926,
      "node_id": "MDQ6VXNlcjEzMzg0OTI2",
      "avatar_url": "https://avatars3.githubusercontent.com/u/13384926?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tundratim",
      "html_url": "https://github.com/tundratim",
      "followers_url": "https://api.github.com/users/tundratim/followers",
      "following_url": "https://api.github.com/users/tundratim/following{/other_user}",
      "gists_url": "https://api.github.com/users/tundratim/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tundratim/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tundratim/subscriptions",
      "organizations_url": "https://api.github.com/users/tundratim/orgs",
      "repos_url": "https://api.github.com/users/tundratim/repos",
      "events_url": "https://api.github.com/users/tundratim/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tundratim/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-29T22:04:51Z",
    "updated_at": "2017-03-29T22:04:51Z",
    "author_association": "NONE",
    "body": "@xorander00 \r\n\r\nYes, it would be good to figure this out.  I've poked a bit at the source, but not enough to get anywhere useful.\r\n\r\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/290410463",
    "html_url": "https://github.com/grpc/grpc/issues/9721#issuecomment-290410463",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/9721",
    "id": 290410463,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5MDQxMDQ2Mw==",
    "user": {
      "login": "xorander00",
      "id": 16010664,
      "node_id": "MDQ6VXNlcjE2MDEwNjY0",
      "avatar_url": "https://avatars0.githubusercontent.com/u/16010664?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/xorander00",
      "html_url": "https://github.com/xorander00",
      "followers_url": "https://api.github.com/users/xorander00/followers",
      "following_url": "https://api.github.com/users/xorander00/following{/other_user}",
      "gists_url": "https://api.github.com/users/xorander00/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/xorander00/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/xorander00/subscriptions",
      "organizations_url": "https://api.github.com/users/xorander00/orgs",
      "repos_url": "https://api.github.com/users/xorander00/repos",
      "events_url": "https://api.github.com/users/xorander00/events{/privacy}",
      "received_events_url": "https://api.github.com/users/xorander00/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-30T13:28:46Z",
    "updated_at": "2017-03-30T13:28:46Z",
    "author_association": "NONE",
    "body": "@tundratim \r\nI did get it building with CMake after making some adjustments.  I remember finding some changes on github that allowed CMake to find the FreeBSD package for protobufs.  I deleted those changes though and need to find them again.  When I do, I'll keep better track of it and put together a patch.\r\n\r\nMy issue was after building the libraries, I didn't know how to get the Ruby gem to be built against them."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/290411294",
    "html_url": "https://github.com/grpc/grpc/issues/9721#issuecomment-290411294",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/9721",
    "id": 290411294,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5MDQxMTI5NA==",
    "user": {
      "login": "xorander00",
      "id": 16010664,
      "node_id": "MDQ6VXNlcjE2MDEwNjY0",
      "avatar_url": "https://avatars0.githubusercontent.com/u/16010664?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/xorander00",
      "html_url": "https://github.com/xorander00",
      "followers_url": "https://api.github.com/users/xorander00/followers",
      "following_url": "https://api.github.com/users/xorander00/following{/other_user}",
      "gists_url": "https://api.github.com/users/xorander00/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/xorander00/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/xorander00/subscriptions",
      "organizations_url": "https://api.github.com/users/xorander00/orgs",
      "repos_url": "https://api.github.com/users/xorander00/repos",
      "events_url": "https://api.github.com/users/xorander00/events{/privacy}",
      "received_events_url": "https://api.github.com/users/xorander00/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-30T13:31:49Z",
    "updated_at": "2017-03-30T13:31:49Z",
    "author_association": "NONE",
    "body": "Actually, I did save the build commands I used, just not the changes:\r\n\r\ncmake .. -GNinja -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=$HOME/tmp/native -DgRPC_ZLIB_PROVIDER=package -DgRPC_SSL_PROVIDER=package -DgRPC_PROTOBUF_PROVIDER=package\r\n\r\n$HOME/tmp/native because I wanted it to install into a clean directory so that I could examine the output structure/files."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/290690014",
    "html_url": "https://github.com/grpc/grpc/issues/9721#issuecomment-290690014",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/9721",
    "id": 290690014,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5MDY5MDAxNA==",
    "user": {
      "login": "xorander00",
      "id": 16010664,
      "node_id": "MDQ6VXNlcjE2MDEwNjY0",
      "avatar_url": "https://avatars0.githubusercontent.com/u/16010664?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/xorander00",
      "html_url": "https://github.com/xorander00",
      "followers_url": "https://api.github.com/users/xorander00/followers",
      "following_url": "https://api.github.com/users/xorander00/following{/other_user}",
      "gists_url": "https://api.github.com/users/xorander00/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/xorander00/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/xorander00/subscriptions",
      "organizations_url": "https://api.github.com/users/xorander00/orgs",
      "repos_url": "https://api.github.com/users/xorander00/repos",
      "events_url": "https://api.github.com/users/xorander00/events{/privacy}",
      "received_events_url": "https://api.github.com/users/xorander00/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-31T11:39:14Z",
    "updated_at": "2017-03-31T11:39:14Z",
    "author_association": "NONE",
    "body": "Just pinging/bumping this with a little bit of info and request for any further feedback/suggestions :)\r\n\r\nI last left off at tackling the two places in tcp_posix.c where there's an assignment that has an implicit cast from unsigned long -> int.  I did manage to make it compile before by making it an explicit cast, but I'd never actually use that since it seems dangerous.  The compiler options -Werror and -Wshorten-64-to-32 are there for a reason I'm sure, so it's probably not safe.\r\n\r\nOther than that, wrapping <sys/socket.h> in #ifdef GRPC_FREEBSD and patching up CMakeLists.txt to properly include any missing includes/libs for protobufs seems to allow it to compile.  It's that cast that I'm uncertain about."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/294619184",
    "html_url": "https://github.com/grpc/grpc/issues/9721#issuecomment-294619184",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/9721",
    "id": 294619184,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5NDYxOTE4NA==",
    "user": {
      "login": "mehrdada",
      "id": 900411,
      "node_id": "MDQ6VXNlcjkwMDQxMQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/900411?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mehrdada",
      "html_url": "https://github.com/mehrdada",
      "followers_url": "https://api.github.com/users/mehrdada/followers",
      "following_url": "https://api.github.com/users/mehrdada/following{/other_user}",
      "gists_url": "https://api.github.com/users/mehrdada/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mehrdada/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mehrdada/subscriptions",
      "organizations_url": "https://api.github.com/users/mehrdada/orgs",
      "repos_url": "https://api.github.com/users/mehrdada/repos",
      "events_url": "https://api.github.com/users/mehrdada/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mehrdada/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-04-17T22:55:43Z",
    "updated_at": "2017-04-17T23:15:14Z",
    "author_association": "CONTRIBUTOR",
    "body": "I have managed to build the current grpc on master on FreeBSD 10.3 and the python `grpcio` package (not `grpcio-tools`) using the following script [definitely considered unsupported]:\r\n\r\n```bash\r\n#!/usr/local/bin/bash\r\n\r\nmkdir grpc-freebsd\r\ncd grpc-freebsd\r\ngit clone https://github.com/grpc/grpc\r\ncd grpc\r\ngit submodule update --init\r\nsed -i \\  's/set(_gRPC_ALLTARGETS_LIBRARIES dl rt m pthread)/set(_gRPC_ALLTARGETS_LIBRARIES rt m pthread)/' CMakeLists.txt\r\nsed -i \\  $'s/#include <arpa\\/inet.h>/#include <arpa\\/inet.h>\\\\\\n#include <sys\\/socket.h>/' src/core/tsi/ssl_transport_security.c\r\npushd third_party/cares\r\nln -s config_linux/ares_config.h\r\npopd\r\ncmake .\r\ngmake\r\n#python\r\nvirtualenv ../venv\r\n../venv/bin/python -m pip install --upgrade pip setuptools cython\r\n../venv/bin/python -m pip install -r requirements.txt\r\nGRPC_PYTHON_BUILD_WITH_CYTHON=1 ../venv/bin/python -m pip install . \r\n```\r\n\r\nSpecifically, there were three issues to address:\r\n\r\n1. The [`src/core/tsi/ssl_transport_security.c`](https://github.com/grpc/grpc/blob/master/src/core/tsi/ssl_transport_security.c#L47) file does not include the appropriate headers on FreeBSD that define `AF_INET`. This was fixed by including `<sys/socket.h>`.\r\n2. The `cares` dependency library does not have a `config_freebsd` directory so the `ares_config.h` include is not found. I could circumvent the error by symlinking `ares_config.h` to [`config_linux/ares_config.h`](https://github.com/grpc/grpc/blob/master/third_party/cares/config_linux/ares_config.h). Makefiles need to be adjusted to include an appropriate file for FreeBSD.\r\n3. The `CMakeLists.txt` file in root assumes every Unix is GNU/Linuxy and [wants to link `dl`](https://github.com/grpc/grpc/blob/master/CMakeLists.txt#L273) which fails on FreeBSD. It needs to get smarter. "
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/294650379",
    "html_url": "https://github.com/grpc/grpc/issues/9721#issuecomment-294650379",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/9721",
    "id": 294650379,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5NDY1MDM3OQ==",
    "user": {
      "login": "xorander00",
      "id": 16010664,
      "node_id": "MDQ6VXNlcjE2MDEwNjY0",
      "avatar_url": "https://avatars0.githubusercontent.com/u/16010664?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/xorander00",
      "html_url": "https://github.com/xorander00",
      "followers_url": "https://api.github.com/users/xorander00/followers",
      "following_url": "https://api.github.com/users/xorander00/following{/other_user}",
      "gists_url": "https://api.github.com/users/xorander00/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/xorander00/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/xorander00/subscriptions",
      "organizations_url": "https://api.github.com/users/xorander00/orgs",
      "repos_url": "https://api.github.com/users/xorander00/repos",
      "events_url": "https://api.github.com/users/xorander00/events{/privacy}",
      "received_events_url": "https://api.github.com/users/xorander00/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-04-18T01:59:47Z",
    "updated_at": "2017-04-18T01:59:47Z",
    "author_association": "NONE",
    "body": "Yeah, that's pretty much what I did as well.  Although grpc defines GRPC_FREEBSD, so I added #ifdef & #include <sys/socket.h> into port_platform.h, since that seems to be where stuff like that should go.\n\n\nI don't remember having any issues with cares, but I might have disabled it?  I don't remember off the top of my head.\n\n\nYes, the build scripts (CMake mainly) needs to be smarter in terms of that.  I saw quite a bit of stuff that made it Linux dependent.  I added a define for FreeBSD and then updated it further down to exclude dl if it detected FreeBSD.\n\n\n________________________________\nFrom: Mehrdad Afshari <notifications@github.com>\nSent: Monday, April 17, 2017 6:56 PM\nTo: grpc/grpc\nCc: Peeyush Singh; Mention\nSubject: Re: [grpc/grpc] grpcio-tools on FreeBSD (#9721)\n\n\nI have managed to build the current grpc on master on FreeBSD 10.3 and the python package using the following script (definitely unsupported):\n\n#!/usr/local/bin/bash\n\nmkdir grpc-freebsd\ncd grpc-freebsd\ngit clone https://github.com/grpc/grpc\ncd grpc\ngit submodule update --init\nsed -i \\  's/set(_gRPC_ALLTARGETS_LIBRARIES dl rt m pthread)/set(_gRPC_ALLTARGETS_LIBRARIES rt m pthread)/' CMakeLists.txt\nsed -i \\  $'s/#include <arpa\\/inet.h>/#include <arpa\\/inet.h>\\\\\\n#include <sys\\/socket.h>/' src/core/tsi/ssl_transport_security.c\npushd third_party/cares\nln -s config_linux/ares_config.h\npopd\ncmake .\ngmake\n#python\nvirtualenv ../venv\n../venv/bin/python -m pip install --upgrade pip setuptools cython\n../venv/bin/python -m pip install -r requirements.txt\nGRPC_PYTHON_BUILD_WITH_CYTHON=1 ../venv/bin/python -m pip install .\n\nSpecifically, there were three issues to address:\n\n  1.  The src/core/tsi/ssl_transport_security.c file does not include the appropriate headers on FreeBSD that define AF_INET. This was fixed by including <sys/socket.h>.\n  2.  The cares dependency library does not have a config_freebsd directory so the ares_config.h include is not found. I could circumvent the error by symlinking ares_config.h to config_linux/ares_config.h. Makefiles need to be adjusted to include an appropriate file for FreeBSD.\n  3.  The CMakeLists.txt file in root assumes every Unix is GNU/Linuxy and wants to link dl which fails on FreeBSD. It needs to get smarter.\n\n—\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub<https://github.com/grpc/grpc/issues/9721#issuecomment-294619184>, or mute the thread<https://github.com/notifications/unsubscribe-auth/APRNqDIKHOktEjQdlctarheCf7teJ2Ytks5rw-4LgaJpZM4MB6KB>.\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/307264389",
    "html_url": "https://github.com/grpc/grpc/issues/9721#issuecomment-307264389",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/9721",
    "id": 307264389,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwNzI2NDM4OQ==",
    "user": {
      "login": "mehrdada",
      "id": 900411,
      "node_id": "MDQ6VXNlcjkwMDQxMQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/900411?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mehrdada",
      "html_url": "https://github.com/mehrdada",
      "followers_url": "https://api.github.com/users/mehrdada/followers",
      "following_url": "https://api.github.com/users/mehrdada/following{/other_user}",
      "gists_url": "https://api.github.com/users/mehrdada/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mehrdada/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mehrdada/subscriptions",
      "organizations_url": "https://api.github.com/users/mehrdada/orgs",
      "repos_url": "https://api.github.com/users/mehrdada/repos",
      "events_url": "https://api.github.com/users/mehrdada/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mehrdada/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-06-09T00:39:47Z",
    "updated_at": "2017-09-01T18:41:28Z",
    "author_association": "CONTRIBUTOR",
    "body": "With the merged PRs (#10705 and #10724) and latest protobuf package, it is possible to make gRPC work on FreeBSD from source and generate code from proto files (by compiling the grpc python plugin without need of grpcio-tools). Since it is not an officially supported platform and we don't have CI infrastructure for it, we do not have additional plans to further work in an organized fashion on this issue, so I am going to close this issue at the moment. Of course PRs to help improve the support status are always appreciated."
  }
]
