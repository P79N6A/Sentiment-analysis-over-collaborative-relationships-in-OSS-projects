[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/351557047",
    "html_url": "https://github.com/grpc/grpc/issues/13767#issuecomment-351557047",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13767",
    "id": 351557047,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MTU1NzA0Nw==",
    "user": {
      "login": "dgquintas",
      "id": 120217,
      "node_id": "MDQ6VXNlcjEyMDIxNw==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/120217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dgquintas",
      "html_url": "https://github.com/dgquintas",
      "followers_url": "https://api.github.com/users/dgquintas/followers",
      "following_url": "https://api.github.com/users/dgquintas/following{/other_user}",
      "gists_url": "https://api.github.com/users/dgquintas/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dgquintas/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dgquintas/subscriptions",
      "organizations_url": "https://api.github.com/users/dgquintas/orgs",
      "repos_url": "https://api.github.com/users/dgquintas/repos",
      "events_url": "https://api.github.com/users/dgquintas/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dgquintas/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-13T23:20:28Z",
    "updated_at": "2017-12-13T23:20:28Z",
    "author_association": "NONE",
    "body": "```\r\n2017-12-13 08:00:00,808 D1213 07:57:55.609004141   13418 test_config.cc:388]         test slowdown factor: sanitizer=5, fixture=1, poller=5, total=25\r\nD1213 07:57:55.620130065   13418 ev_posix.cc:128]            Using polling engine: poll-cv\r\nD1213 07:57:55.620228547   13418 dns_resolver.cc:293]        Using native dns resolver\r\nI1213 07:57:55.622945605   13418 cancel_after_client_done.cc:40] Running test: test_cancel_after_accept_and_writes_closed/chttp2/fullstack+load_reporting/cancel\r\nI1213 07:57:55.653992112   13418 cancel_after_client_done.cc:40] Running test: test_cancel_after_accept_and_writes_closed/chttp2/fullstack+load_reporting/deadline\r\n==================\r\nWARNING: ThreadSanitizer: data race (pid=13418)\r\n  Write of size 8 at 0x7d900000e028 by main thread (mutexes: write M53):\r\n    #0 pthread_cond_destroy /llvm/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1157 (h2_load_reporting_test+0x000000450bec)\r\n    #1 gpr_cv_destroy /var/local/git/grpc/src/core/lib/support/sync_posix.cc:77:46 (h2_load_reporting_test+0x000000634818)\r\n    #2 grpc_executor_set_threading(bool) /var/local/git/grpc/src/core/lib/iomgr/executor.cc:127:7 (h2_load_reporting_test+0x0000005cdd31)\r\n    #3 grpc_executor_shutdown() /var/local/git/grpc/src/core/lib/iomgr/executor.cc:140:33 (h2_load_reporting_test+0x0000005ce563)\r\n    #4 grpc_shutdown /var/local/git/grpc/src/core/lib/surface/init.cc:165:9 (h2_load_reporting_test+0x0000006264c0)\r\n    #5 main /var/local/git/grpc/test/core/end2end/fixtures/h2_load_reporting.cc:117:3 (h2_load_reporting_test+0x0000004b1063)\r\n\r\n  Previous read of size 8 at 0x7d900000e028 by thread T4 (mutexes: write M106):\r\n    #0 pthread_cond_signal /llvm/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1143 (h2_load_reporting_test+0x000000450980)\r\n    #1 gpr_cv_signal /var/local/git/grpc/src/core/lib/support/sync_posix.cc:99:45 (h2_load_reporting_test+0x000000634a48)\r\n    #2 executor_push(grpc_closure*, grpc_error*, bool) /var/local/git/grpc/src/core/lib/iomgr/executor.cc:247:9 (h2_load_reporting_test+0x0000005cebd8)\r\n    #3 executor_push_short(grpc_closure*, grpc_error*) /var/local/git/grpc/src/core/lib/iomgr/executor.cc:276:3 (h2_load_reporting_test+0x0000005ce5fd)\r\n    #4 grpc_closure_sched(char const*, int, grpc_closure*, grpc_error*) /var/local/git/grpc/./src/core/lib/iomgr/closure.h:299:5 (h2_load_reporting_test+0x000000538c22)\r\n    #5 resolve_address_impl(char const*, char const*, grpc_pollset_set*, grpc_closure*, grpc_resolved_addresses**) /var/local/git/grpc/src/core/lib/iomgr/resolve_address_posix.cc:183:3 (h2_load_reporting_test+0x000000545d34)\r\n    #6 dns_start_resolving_locked(dns_resolver*) /var/local/git/grpc/src/core/ext/filters/client_channel/resolver/dns/native/dns_resolver.cc:197:3 (h2_load_reporting_test+0x0000006bc53b)\r\n    #7 dns_channel_saw_error_locked(grpc_resolver*) /var/local/git/grpc/src/core/ext/filters/client_channel/resolver/dns/native/dns_resolver.cc:110:5 (h2_load_reporting_test+0x0000006bc1e7)\r\n    #8 grpc_resolver_channel_saw_error_locked(grpc_resolver*) /var/local/git/grpc/src/core/ext/filters/client_channel/resolver.cc:72:3 (h2_load_reporting_test+0x00000059d847)\r\n    #9 request_reresolution_locked(void*, grpc_error*) /var/local/git/grpc/src/core/ext/filters/client_channel/client_channel.cc:381:3 (h2_load_reporting_test+0x000000599f90)\r\n    #10 grpc_combiner_continue_exec_ctx() /var/local/git/grpc/src/core/lib/iomgr/combiner.cc:261:5 (h2_load_reporting_test+0x0000005acb0d)\r\n    #11 grpc_core::ExecCtx::Flush() /var/local/git/grpc/src/core/lib/iomgr/exec_ctx.cc:128:17 (h2_load_reporting_test+0x00000054381a)\r\n    #12 pollset_work(grpc_pollset*, grpc_pollset_worker**, long) /var/local/git/grpc/src/core/lib/iomgr/ev_poll_posix.cc:1043:22 (h2_load_reporting_test+0x0000005c5cf2)\r\n    #13 grpc_pollset_work(grpc_pollset*, grpc_pollset_worker**, long) /var/local/git/grpc/src/core/lib/iomgr/ev_posix.cc:225:10 (h2_load_reporting_test+0x0000005427c1)\r\n    #14 run_poller(void*, grpc_error*) /var/local/git/grpc/src/core/ext/filters/client_channel/backup_poller.cc:118:7 (h2_load_reporting_test+0x0000005d6de6)\r\n    #15 exec_ctx_run(grpc_closure*, grpc_error*) /var/local/git/grpc/src/core/lib/iomgr/exec_ctx.cc:38:3 (h2_load_reporting_test+0x000000543a79)\r\n    #16 grpc_core::ExecCtx::Flush() /var/local/git/grpc/src/core/lib/iomgr/exec_ctx.cc:125:9 (h2_load_reporting_test+0x000000543803)\r\n    #17 run_some_timers() /var/local/git/grpc/src/core/lib/iomgr/timer_manager.cc:128:3 (h2_load_reporting_test+0x000000559c01)\r\n    #18 timer_main_loop() /var/local/git/grpc/src/core/lib/iomgr/timer_manager.cc:230:9 (h2_load_reporting_test+0x000000559913)\r\n    #19 timer_thread(void*) /var/local/git/grpc/src/core/lib/iomgr/timer_manager.cc:277:3 (h2_load_reporting_test+0x000000559861)\r\n    #20 thread_body(void*) /var/local/git/grpc/src/core/lib/support/thd_posix.cc:67:3 (h2_load_reporting_test+0x0000006351b2)\r\n\r\n  Location is heap block of size 8192 at 0x7d900000e000 allocated by main thread:\r\n    #0 calloc /llvm/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:612 (h2_load_reporting_test+0x00000044366d)\r\n    #1 zalloc_with_calloc(unsigned long) /var/local/git/grpc/src/core/lib/support/alloc.cc:27:53 (h2_load_reporting_test+0x00000062c9ff)\r\n    #2 gpr_zalloc /var/local/git/grpc/src/core/lib/support/alloc.cc:68:7 (h2_load_reporting_test+0x00000062c761)\r\n    #3 grpc_executor_set_threading(bool) /var/local/git/grpc/src/core/lib/iomgr/executor.cc:98:24 (h2_load_reporting_test+0x0000005cd8ae)\r\n    #4 grpc_executor_init() /var/local/git/grpc/src/core/lib/iomgr/executor.cc:137:3 (h2_load_reporting_test+0x0000005ce544)\r\n    #5 grpc_iomgr_init() /var/local/git/grpc/src/core/lib/iomgr/iomgr.cc:53:3 (h2_load_reporting_test+0x000000543eac)\r\n    #6 grpc_init /var/local/git/grpc/src/core/lib/surface/init.cc:134:5 (h2_load_reporting_test+0x000000626229)\r\n    #7 main /var/local/git/grpc/test/core/end2end/fixtures/h2_load_reporting.cc:111:3 (h2_load_reporting_test+0x0000004b0fd8)\r\n\r\n  Mutex M53 (0x000001a70478) created at:\r\n    #0 pthread_mutex_init /llvm/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (h2_load_reporting_test+0x000000437815)\r\n    #1 gpr_mu_init /var/local/git/grpc/src/core/lib/support/sync_posix.cc:37:14 (h2_load_reporting_test+0x00000063445c)\r\n    #2 do_basic_init() /var/local/git/grpc/src/core/lib/surface/init.cc:69:3 (h2_load_reporting_test+0x000000626362)\r\n    #3 pthread_once /llvm/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1382 (h2_load_reporting_test+0x0000004458be)\r\n    #4 gpr_once_init /var/local/git/grpc/src/core/lib/support/sync_posix.cc:108:14 (h2_load_reporting_test+0x000000634b38)\r\n    #5 grpc_init /var/local/git/grpc/src/core/lib/surface/init.cc:122:3 (h2_load_reporting_test+0x0000006261c3)\r\n    #6 main /var/local/git/grpc/test/core/end2end/fixtures/h2_load_reporting.cc:111:3 (h2_load_reporting_test+0x0000004b0fd8)\r\n\r\n  Mutex M106 (0x7d900000e000) created at:\r\n    #0 pthread_mutex_init /llvm/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (h2_load_reporting_test+0x000000437815)\r\n    #1 gpr_mu_init /var/local/git/grpc/src/core/lib/support/sync_posix.cc:37:14 (h2_load_reporting_test+0x00000063445c)\r\n    #2 grpc_executor_set_threading(bool) /var/local/git/grpc/src/core/lib/iomgr/executor.cc:100:7 (h2_load_reporting_test+0x0000005cd939)\r\n    #3 grpc_executor_init() /var/local/git/grpc/src/core/lib/iomgr/executor.cc:137:3 (h2_load_reporting_test+0x0000005ce544)\r\n    #4 grpc_iomgr_init() /var/local/git/grpc/src/core/lib/iomgr/iomgr.cc:53:3 (h2_load_reporting_test+0x000000543eac)\r\n    #5 grpc_init /var/local/git/grpc/src/core/lib/surface/init.cc:134:5 (h2_load_reporting_test+0x000000626229)\r\n    #6 main /var/local/git/grpc/test/core/end2end/fixtures/h2_load_reporting.cc:111:3 (h2_load_reporting_test+0x0000004b0fd8)\r\n\r\n  Thread T4 'grpc_global_tim' (tid=13433, running) created by thread T2 at:\r\n    #0 pthread_create /llvm/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (h2_load_reporting_test+0x00000044d9c3)\r\n    #1 gpr_thd_new /var/local/git/grpc/src/core/lib/support/thd_posix.cc:95:21 (h2_load_reporting_test+0x000000634fe4)\r\n    #2 start_timer_thread_and_unlock() /var/local/git/grpc/src/core/lib/iomgr/timer_manager.cc:96:3 (h2_load_reporting_test+0x000000559811)\r\n    #3 run_some_timers() /var/local/git/grpc/src/core/lib/iomgr/timer_manager.cc:112:5 (h2_load_reporting_test+0x000000559b54)\r\n    #4 timer_main_loop() /var/local/git/grpc/src/core/lib/iomgr/timer_manager.cc:230:9 (h2_load_reporting_test+0x000000559913)\r\n    #5 timer_thread(void*) /var/local/git/grpc/src/core/lib/iomgr/timer_manager.cc:277:3 (h2_load_reporting_test+0x000000559861)\r\n    #6 thread_body(void*) /var/local/git/grpc/src/core/lib/support/thd_posix.cc:67:3 (h2_load_reporting_test+0x0000006351b2)\r\n\r\nSUMMARY: ThreadSanitizer: data race /var/local/git/grpc/src/core/lib/support/sync_posix.cc:77:46 in gpr_cv_destroy\r\n==================\r\nCommand exited with non-zero status 66\r\nreal 125.21\r\nuser 0.04\r\nsys 0.11\r\n\r\n2017-12-13 08:00:00,808 FAILED: bins/tsan/h2_load_reporting_test cancel_after_client_done GRPC_POLL_STRATEGY=poll-cv [ret=66, pid=13417, time=125.2sec]\r\n\r\n```"
  }
]
