[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/302594248",
    "html_url": "https://github.com/grpc/grpc/pull/11237#issuecomment-302594248",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11237",
    "id": 302594248,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwMjU5NDI0OA==",
    "user": {
      "login": "grpc-kokoro",
      "id": 12722905,
      "node_id": "MDQ6VXNlcjEyNzIyOTA1",
      "avatar_url": "https://avatars3.githubusercontent.com/u/12722905?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-kokoro",
      "html_url": "https://github.com/grpc-kokoro",
      "followers_url": "https://api.github.com/users/grpc-kokoro/followers",
      "following_url": "https://api.github.com/users/grpc-kokoro/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-kokoro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-kokoro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-kokoro/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-kokoro/orgs",
      "repos_url": "https://api.github.com/users/grpc-kokoro/repos",
      "events_url": "https://api.github.com/users/grpc-kokoro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-kokoro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-05-19T02:45:39Z",
    "updated_at": "2017-05-19T02:45:39Z",
    "author_association": "NONE",
    "body": "```\nNo significant performance differences\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/302735546",
    "html_url": "https://github.com/grpc/grpc/pull/11237#issuecomment-302735546",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11237",
    "id": 302735546,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwMjczNTU0Ng==",
    "user": {
      "login": "markdroth",
      "id": 18664614,
      "node_id": "MDQ6VXNlcjE4NjY0NjE0",
      "avatar_url": "https://avatars2.githubusercontent.com/u/18664614?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/markdroth",
      "html_url": "https://github.com/markdroth",
      "followers_url": "https://api.github.com/users/markdroth/followers",
      "following_url": "https://api.github.com/users/markdroth/following{/other_user}",
      "gists_url": "https://api.github.com/users/markdroth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/markdroth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/markdroth/subscriptions",
      "organizations_url": "https://api.github.com/users/markdroth/orgs",
      "repos_url": "https://api.github.com/users/markdroth/repos",
      "events_url": "https://api.github.com/users/markdroth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/markdroth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-05-19T15:32:54Z",
    "updated_at": "2017-05-19T15:32:54Z",
    "author_association": "MEMBER",
    "body": "Overall, this looks great!  Just a few structural suggestions.\n\n---\n\nReviewed 5 of 5 files at r1.\nReview status: all files reviewed at latest revision, 5 unresolved discussions, some commit checks failed.\n\n---\n\n*[src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_wrapper.c, line 66 at r1](https://reviewable.io:443/reviews/grpc/grpc/11237#-KkWC82DbQRk77QhYBno:-KkWC82DbQRk77QhYBnp:b-9wk6j7) ([raw file](https://github.com/grpc/grpc/blob/72f70a5a5d3a438a00e3ac73a908344693c274e9/src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_wrapper.c#L66)):*\n>   union {\n>     grpc_resolved_addresses **addrs;\n>     grpc_lb_addresses **lb_addrs;\n>   } addrs_out;\n>   /** if true, the output addresses are in the format of grpc_lb_addresses,\n>       otherwise they are in the format of grpc_resolved_addresses */\n>   bool lb_addrs_out;\n\nInstead of plumbing this difference through the whole code, I suggest having the resolver code always generate a `grpc_lb_addresses` struct, and then convert from that to `grpc_resolved_addresses` inside of `grpc_resolve_address_ares_impl()`.\n\n---\n\n*[src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_wrapper.c, line 183 at r1](https://reviewable.io:443/reviews/grpc/grpc/11237#-KkWJBWJLhg5hSMfsrbW:-KkWJBWJLhg5hSMfsrbX:b5e076v) ([raw file](https://github.com/grpc/grpc/blob/72f70a5a5d3a438a00e3ac73a908344693c274e9/src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_wrapper.c#L183)):*\n> ```C\n>       for (i = prev_naddr; i < (*lb_addresses)->num_addresses; i++) {\n>         memset(&(*lb_addresses)->addresses[i], 0, sizeof(grpc_lb_address));\n>         if (hostent->h_addrtype == AF_INET6) {\n> ```\n\nI suggest making this a switch statement, so that the two sections (IPv6 and IPv4) are self-documenting.\n\n---\n\n*[src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_wrapper.c, line 315 at r1](https://reviewable.io:443/reviews/grpc/grpc/11237#-KkWGpDwXEe7eFocWyGN:-KkWGpDxS8FEqN3QEP49:b-4scdg5) ([raw file](https://github.com/grpc/grpc/blob/72f70a5a5d3a438a00e3ac73a908344693c274e9/src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_wrapper.c#L315)):*\n> ```C\n>       }\n>     }\n> ```\n\nNit: Please remove blank lines within functions.  (Both here and throughout.)\n\n---\n\n*[src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_wrapper.c, line 432 at r1](https://reviewable.io:443/reviews/grpc/grpc/11237#-KkWFrCwnqIOfvARNM0M:-KkWFrCxHYWH7Q730wDA:b-6vqst5) ([raw file](https://github.com/grpc/grpc/blob/72f70a5a5d3a438a00e3ac73a908344693c274e9/src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_wrapper.c#L432)):*\n> ```C\n>   resolve_address_ares_impl(exec_ctx, name, default_port, interested_parties,\n>                             on_done, (void **)addrs,\n>                             true /* is_lb_addrs_out */);\n> ```\n\nInstead of hard-coding this here, how about adding a `bool check_grpclb` parameter to `grpc_dns_lookup_ares()` (which you've called `grpc_resolve_grpclb_address_ares()`)?  That way, we can just have `grpc_resolve_address_ares_impl()` call `grpc_dns_lookup_ares()` and won't need an extra level of indirection.\n\n---\n\n*[src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_wrapper.h, line 62 at r1](https://reviewable.io:443/reviews/grpc/grpc/11237#-KkWDT25UorB-yG1bud2:-KkWDT26R00nVeZS2SGI:b-rdcp1o) ([raw file](https://github.com/grpc/grpc/blob/72f70a5a5d3a438a00e3ac73a908344693c274e9/src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_wrapper.h#L62)):*\n> ```objc\n>   scheduled with \\a exec_ctx, it must not try to acquire locks that are being\n>   held by the caller. */\n> void grpc_resolve_grpclb_address_ares(grpc_exec_ctx *exec_ctx, const char *addr,\n> ```\n\nOnce you merge in the changes from #10706, which I merged this morning, you can just change the `grpc_dns_lookup_ares()` function that I wrote to return a `grpc_lb_addresses` struct instead of a `grpc_resolved_addresses` struct.\n\n---\n\n\n*Comments from [Reviewable](https://reviewable.io:443/reviews/grpc/grpc/11237#-:-KkWKgv8utV688qtioSt:b-ixlw8j)*\n<!-- Sent from Reviewable.io -->\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/302834641",
    "html_url": "https://github.com/grpc/grpc/pull/11237#issuecomment-302834641",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11237",
    "id": 302834641,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwMjgzNDY0MQ==",
    "user": {
      "login": "y-zeng",
      "id": 17460127,
      "node_id": "MDQ6VXNlcjE3NDYwMTI3",
      "avatar_url": "https://avatars3.githubusercontent.com/u/17460127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/y-zeng",
      "html_url": "https://github.com/y-zeng",
      "followers_url": "https://api.github.com/users/y-zeng/followers",
      "following_url": "https://api.github.com/users/y-zeng/following{/other_user}",
      "gists_url": "https://api.github.com/users/y-zeng/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/y-zeng/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/y-zeng/subscriptions",
      "organizations_url": "https://api.github.com/users/y-zeng/orgs",
      "repos_url": "https://api.github.com/users/y-zeng/repos",
      "events_url": "https://api.github.com/users/y-zeng/events{/privacy}",
      "received_events_url": "https://api.github.com/users/y-zeng/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-05-19T23:47:54Z",
    "updated_at": "2017-05-19T23:47:54Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thanks a lot for your review!\n\n---\n\nReview status: 1 of 5 files reviewed at latest revision, 6 unresolved discussions.\n\n---\n\n*[src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_wrapper.c, line 66 at r1](https://reviewable.io:443/reviews/grpc/grpc/11237#-KkWC82DbQRk77QhYBno:-KkXxJbCwSZpbIZabPOZ:b-glwydd) ([raw file](https://github.com/grpc/grpc/blob/72f70a5a5d3a438a00e3ac73a908344693c274e9/src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_wrapper.c#L66)):*\n<details><summary><i>Previously, markdroth (Mark D. Roth) wrote…</i></summary><blockquote>\n\n>   union {\n>     grpc_resolved_addresses **addrs;\n>     grpc_lb_addresses **lb_addrs;\n>   } addrs_out;\n>   /** if true, the output addresses are in the format of grpc_lb_addresses,\n>       otherwise they are in the format of grpc_resolved_addresses */\n>   bool lb_addrs_out;\n\nInstead of plumbing this difference through the whole code, I suggest having the resolver code always generate a `grpc_lb_addresses` struct, and then convert from that to `grpc_resolved_addresses` inside of `grpc_resolve_address_ares_impl()`.\n</blockquote></details>\n\nAs `grpc_resolve_address_ares_impl()` and `grpc_dns_lookup_ares()` are async operations, we'll need an extra level of callback for `grpc_resolve_address_ares_impl()` to convert the result from `grpc_lb_addresses` to `grpc_resolved_addresses`. It will also bring some extra memory allocs, frees, and copies.\n\nIt might be good to save this extra level of callback and the memory operations, by still having these fields in `grpc_ares_request` and handling the conversion in `on_hostbyname_done_cb`.\n\n---\n\n*[src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_wrapper.c, line 183 at r1](https://reviewable.io:443/reviews/grpc/grpc/11237#-KkWJBWJLhg5hSMfsrbW:-KkXp9N1PGesxTwbLs5i:b-896fix) ([raw file](https://github.com/grpc/grpc/blob/72f70a5a5d3a438a00e3ac73a908344693c274e9/src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_wrapper.c#L183)):*\n<details><summary><i>Previously, markdroth (Mark D. Roth) wrote…</i></summary><blockquote>\n\nI suggest making this a switch statement, so that the two sections (IPv6 and IPv4) are self-documenting.\n</blockquote></details>\n\nDone.\n\n---\n\n*[src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_wrapper.c, line 315 at r1](https://reviewable.io:443/reviews/grpc/grpc/11237#-KkWGpDwXEe7eFocWyGN:-KkXnNoHHBH5Kxocosia:b-896fix) ([raw file](https://github.com/grpc/grpc/blob/72f70a5a5d3a438a00e3ac73a908344693c274e9/src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_wrapper.c#L315)):*\n<details><summary><i>Previously, markdroth (Mark D. Roth) wrote…</i></summary><blockquote>\n\nNit: Please remove blank lines within functions.  (Both here and throughout.)\n</blockquote></details>\n\nDone.\n\n---\n\n*[src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_wrapper.c, line 432 at r1](https://reviewable.io:443/reviews/grpc/grpc/11237#-KkWFrCwnqIOfvARNM0M:-KkXnaLqzaodOKd8n94D:bs7wumx) ([raw file](https://github.com/grpc/grpc/blob/72f70a5a5d3a438a00e3ac73a908344693c274e9/src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_wrapper.c#L432)):*\n<details><summary><i>Previously, markdroth (Mark D. Roth) wrote…</i></summary><blockquote>\n\nInstead of hard-coding this here, how about adding a `bool check_grpclb` parameter to `grpc_dns_lookup_ares()` (which you've called `grpc_resolve_grpclb_address_ares()`)?  That way, we can just have `grpc_resolve_address_ares_impl()` call `grpc_dns_lookup_ares()` and won't need an extra level of indirection.\n</blockquote></details>\n\nDone. \n\n---\n\n*[src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_wrapper.h, line 62 at r1](https://reviewable.io:443/reviews/grpc/grpc/11237#-KkWDT25UorB-yG1bud2:-KkY5ZFacU1y5fiFX5YG:b64sae4) ([raw file](https://github.com/grpc/grpc/blob/72f70a5a5d3a438a00e3ac73a908344693c274e9/src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_wrapper.h#L62)):*\n<details><summary><i>Previously, markdroth (Mark D. Roth) wrote…</i></summary><blockquote>\n\nOnce you merge in the changes from #10706, which I merged this morning, you can just change the `grpc_dns_lookup_ares()` function that I wrote to return a `grpc_lb_addresses` struct instead of a `grpc_resolved_addresses` struct.\n</blockquote></details>\n\nChanged `grpc_dns_lookup_ares()` to handle both `grpc_lb_addresses` and `grpc_resolved_addresses`.\n\n---\n\n\n*Comments from [Reviewable](https://reviewable.io:443/reviews/grpc/grpc/11237#-:-KkXmohPh_Or8YIMP3OO:b-i80v59)*\n<!-- Sent from Reviewable.io -->\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/302836423",
    "html_url": "https://github.com/grpc/grpc/pull/11237#issuecomment-302836423",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11237",
    "id": 302836423,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwMjgzNjQyMw==",
    "user": {
      "login": "grpc-kokoro",
      "id": 12722905,
      "node_id": "MDQ6VXNlcjEyNzIyOTA1",
      "avatar_url": "https://avatars3.githubusercontent.com/u/12722905?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-kokoro",
      "html_url": "https://github.com/grpc-kokoro",
      "followers_url": "https://api.github.com/users/grpc-kokoro/followers",
      "following_url": "https://api.github.com/users/grpc-kokoro/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-kokoro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-kokoro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-kokoro/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-kokoro/orgs",
      "repos_url": "https://api.github.com/users/grpc-kokoro/repos",
      "events_url": "https://api.github.com/users/grpc-kokoro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-kokoro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-05-20T00:06:44Z",
    "updated_at": "2017-05-20T00:06:44Z",
    "author_association": "NONE",
    "body": "```\nNo significant performance differences\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/302969795",
    "html_url": "https://github.com/grpc/grpc/pull/11237#issuecomment-302969795",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11237",
    "id": 302969795,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwMjk2OTc5NQ==",
    "user": {
      "login": "grpc-kokoro",
      "id": 12722905,
      "node_id": "MDQ6VXNlcjEyNzIyOTA1",
      "avatar_url": "https://avatars3.githubusercontent.com/u/12722905?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-kokoro",
      "html_url": "https://github.com/grpc-kokoro",
      "followers_url": "https://api.github.com/users/grpc-kokoro/followers",
      "following_url": "https://api.github.com/users/grpc-kokoro/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-kokoro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-kokoro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-kokoro/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-kokoro/orgs",
      "repos_url": "https://api.github.com/users/grpc-kokoro/repos",
      "events_url": "https://api.github.com/users/grpc-kokoro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-kokoro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-05-21T23:11:23Z",
    "updated_at": "2017-05-21T23:11:23Z",
    "author_association": "NONE",
    "body": "```\nNo significant performance differences\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/303142251",
    "html_url": "https://github.com/grpc/grpc/pull/11237#issuecomment-303142251",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11237",
    "id": 303142251,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwMzE0MjI1MQ==",
    "user": {
      "login": "markdroth",
      "id": 18664614,
      "node_id": "MDQ6VXNlcjE4NjY0NjE0",
      "avatar_url": "https://avatars2.githubusercontent.com/u/18664614?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/markdroth",
      "html_url": "https://github.com/markdroth",
      "followers_url": "https://api.github.com/users/markdroth/followers",
      "following_url": "https://api.github.com/users/markdroth/following{/other_user}",
      "gists_url": "https://api.github.com/users/markdroth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/markdroth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/markdroth/subscriptions",
      "organizations_url": "https://api.github.com/users/markdroth/orgs",
      "repos_url": "https://api.github.com/users/markdroth/repos",
      "events_url": "https://api.github.com/users/markdroth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/markdroth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-05-22T15:56:04Z",
    "updated_at": "2017-05-22T15:56:04Z",
    "author_association": "MEMBER",
    "body": "\n\n\n\nReviewed 3 of 4 files at r2, 1 of 1 files at r3.\nReview status: all files reviewed at latest revision, 1 unresolved discussion, some commit checks failed.\n\n---\n\n*[src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_wrapper.c, line 66 at r1](https://reviewable.io:443/reviews/grpc/grpc/11237#-KkWC82DbQRk77QhYBno:-KkkqG_xHk1F1PAAFnbu:ba566h0) ([raw file](https://github.com/grpc/grpc/blob/72f70a5a5d3a438a00e3ac73a908344693c274e9/src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_wrapper.c#L66)):*\n<details><summary><i>Previously, y-zeng (Yuchen Zeng) wrote…</i></summary><blockquote>\n\nAs `grpc_resolve_address_ares_impl()` and `grpc_dns_lookup_ares()` are async operations, we'll need an extra level of callback for `grpc_resolve_address_ares_impl()` to convert the result from `grpc_lb_addresses` to `grpc_resolved_addresses`. It will also bring some extra memory allocs, frees, and copies.\n\nIt might be good to save this extra level of callback and the memory operations, by still having these fields in `grpc_ares_request` and handling the conversion in `on_hostbyname_done_cb`.\n</blockquote></details>\n\nI'll leave it up to you, but I suspect that the extra level of indirection would be the better approach here.  It's true that the extra level of indirection would be slightly less efficient, but it's not in the fast path, so it shouldn't really hurt anything.  And I think the benefit of the cleaner code would be worth the trade-off.\n\n---\n\n\n*Comments from [Reviewable](https://reviewable.io:443/reviews/grpc/grpc/11237)*\n<!-- Sent from Reviewable.io -->\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/303244706",
    "html_url": "https://github.com/grpc/grpc/pull/11237#issuecomment-303244706",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11237",
    "id": 303244706,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwMzI0NDcwNg==",
    "user": {
      "login": "grpc-kokoro",
      "id": 12722905,
      "node_id": "MDQ6VXNlcjEyNzIyOTA1",
      "avatar_url": "https://avatars3.githubusercontent.com/u/12722905?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-kokoro",
      "html_url": "https://github.com/grpc-kokoro",
      "followers_url": "https://api.github.com/users/grpc-kokoro/followers",
      "following_url": "https://api.github.com/users/grpc-kokoro/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-kokoro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-kokoro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-kokoro/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-kokoro/orgs",
      "repos_url": "https://api.github.com/users/grpc-kokoro/repos",
      "events_url": "https://api.github.com/users/grpc-kokoro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-kokoro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-05-22T23:12:11Z",
    "updated_at": "2017-05-22T23:12:11Z",
    "author_association": "NONE",
    "body": "```\nNo significant performance differences\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/303824307",
    "html_url": "https://github.com/grpc/grpc/pull/11237#issuecomment-303824307",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11237",
    "id": 303824307,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwMzgyNDMwNw==",
    "user": {
      "login": "grpc-kokoro",
      "id": 12722905,
      "node_id": "MDQ6VXNlcjEyNzIyOTA1",
      "avatar_url": "https://avatars3.githubusercontent.com/u/12722905?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-kokoro",
      "html_url": "https://github.com/grpc-kokoro",
      "followers_url": "https://api.github.com/users/grpc-kokoro/followers",
      "following_url": "https://api.github.com/users/grpc-kokoro/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-kokoro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-kokoro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-kokoro/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-kokoro/orgs",
      "repos_url": "https://api.github.com/users/grpc-kokoro/repos",
      "events_url": "https://api.github.com/users/grpc-kokoro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-kokoro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-05-24T19:17:35Z",
    "updated_at": "2017-05-24T19:17:35Z",
    "author_association": "NONE",
    "body": "```\nNo significant performance differences\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/303884634",
    "html_url": "https://github.com/grpc/grpc/pull/11237#issuecomment-303884634",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11237",
    "id": 303884634,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwMzg4NDYzNA==",
    "user": {
      "login": "y-zeng",
      "id": 17460127,
      "node_id": "MDQ6VXNlcjE3NDYwMTI3",
      "avatar_url": "https://avatars3.githubusercontent.com/u/17460127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/y-zeng",
      "html_url": "https://github.com/y-zeng",
      "followers_url": "https://api.github.com/users/y-zeng/followers",
      "following_url": "https://api.github.com/users/y-zeng/following{/other_user}",
      "gists_url": "https://api.github.com/users/y-zeng/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/y-zeng/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/y-zeng/subscriptions",
      "organizations_url": "https://api.github.com/users/y-zeng/orgs",
      "repos_url": "https://api.github.com/users/y-zeng/repos",
      "events_url": "https://api.github.com/users/y-zeng/events{/privacy}",
      "received_events_url": "https://api.github.com/users/y-zeng/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-05-24T23:53:35Z",
    "updated_at": "2017-05-24T23:53:35Z",
    "author_association": "CONTRIBUTOR",
    "body": "\n\n\n\nReview status: 2 of 5 files reviewed at latest revision, all discussions resolved.\n\n---\n\n*[src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_wrapper.c, line 66 at r1](https://reviewable.io:443/reviews/grpc/grpc/11237#-KkWC82DbQRk77QhYBno:-KkwpS6PHdUik2CRRLOu:bysel2h) ([raw file](https://github.com/grpc/grpc/blob/72f70a5a5d3a438a00e3ac73a908344693c274e9/src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_wrapper.c#L66)):*\n<details><summary><i>Previously, markdroth (Mark D. Roth) wrote…</i></summary><blockquote>\n\nI'll leave it up to you, but I suspect that the extra level of indirection would be the better approach here.  It's true that the extra level of indirection would be slightly less efficient, but it's not in the fast path, so it shouldn't really hurt anything.  And I think the benefit of the cleaner code would be worth the trade-off.\n</blockquote></details>\n\nI've thought about the options, and moved the conversion code to the callback of ` grpc_resolve_address_ares_impl()` as you suggested.  After c-ares resolver becomes the default one, client channel should only use `grpc_ares_dns_lookup()`. The extra level of indirection will only affect the credential verification process. Thanks a lot for your suggestion!\n\n---\n\n\n*Comments from [Reviewable](https://reviewable.io:443/reviews/grpc/grpc/11237)*\n<!-- Sent from Reviewable.io -->\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/303887908",
    "html_url": "https://github.com/grpc/grpc/pull/11237#issuecomment-303887908",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11237",
    "id": 303887908,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwMzg4NzkwOA==",
    "user": {
      "login": "grpc-kokoro",
      "id": 12722905,
      "node_id": "MDQ6VXNlcjEyNzIyOTA1",
      "avatar_url": "https://avatars3.githubusercontent.com/u/12722905?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-kokoro",
      "html_url": "https://github.com/grpc-kokoro",
      "followers_url": "https://api.github.com/users/grpc-kokoro/followers",
      "following_url": "https://api.github.com/users/grpc-kokoro/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-kokoro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-kokoro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-kokoro/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-kokoro/orgs",
      "repos_url": "https://api.github.com/users/grpc-kokoro/repos",
      "events_url": "https://api.github.com/users/grpc-kokoro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-kokoro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-05-25T00:17:04Z",
    "updated_at": "2017-05-25T00:17:04Z",
    "author_association": "NONE",
    "body": "```\nNo significant performance differences\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/305060856",
    "html_url": "https://github.com/grpc/grpc/pull/11237#issuecomment-305060856",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11237",
    "id": 305060856,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwNTA2MDg1Ng==",
    "user": {
      "login": "grpc-kokoro",
      "id": 12722905,
      "node_id": "MDQ6VXNlcjEyNzIyOTA1",
      "avatar_url": "https://avatars3.githubusercontent.com/u/12722905?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-kokoro",
      "html_url": "https://github.com/grpc-kokoro",
      "followers_url": "https://api.github.com/users/grpc-kokoro/followers",
      "following_url": "https://api.github.com/users/grpc-kokoro/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-kokoro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-kokoro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-kokoro/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-kokoro/orgs",
      "repos_url": "https://api.github.com/users/grpc-kokoro/repos",
      "events_url": "https://api.github.com/users/grpc-kokoro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-kokoro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-05-31T02:02:14Z",
    "updated_at": "2017-05-31T02:02:14Z",
    "author_association": "NONE",
    "body": "```\nPerformance differences noted:\nBenchmark                         cpu_time    real_time\n--------------------------------  ----------  -----------\nBM_HasClearGrpcStatus<ErrorNone>  +4%         +4%\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/306028544",
    "html_url": "https://github.com/grpc/grpc/pull/11237#issuecomment-306028544",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11237",
    "id": 306028544,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwNjAyODU0NA==",
    "user": {
      "login": "grpc-kokoro",
      "id": 12722905,
      "node_id": "MDQ6VXNlcjEyNzIyOTA1",
      "avatar_url": "https://avatars3.githubusercontent.com/u/12722905?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-kokoro",
      "html_url": "https://github.com/grpc-kokoro",
      "followers_url": "https://api.github.com/users/grpc-kokoro/followers",
      "following_url": "https://api.github.com/users/grpc-kokoro/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-kokoro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-kokoro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-kokoro/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-kokoro/orgs",
      "repos_url": "https://api.github.com/users/grpc-kokoro/repos",
      "events_url": "https://api.github.com/users/grpc-kokoro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-kokoro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-06-04T09:17:53Z",
    "updated_at": "2017-06-04T09:17:53Z",
    "author_association": "NONE",
    "body": "```\nNo significant performance differences\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/306334461",
    "html_url": "https://github.com/grpc/grpc/pull/11237#issuecomment-306334461",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11237",
    "id": 306334461,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwNjMzNDQ2MQ==",
    "user": {
      "login": "grpc-kokoro",
      "id": 12722905,
      "node_id": "MDQ6VXNlcjEyNzIyOTA1",
      "avatar_url": "https://avatars3.githubusercontent.com/u/12722905?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-kokoro",
      "html_url": "https://github.com/grpc-kokoro",
      "followers_url": "https://api.github.com/users/grpc-kokoro/followers",
      "following_url": "https://api.github.com/users/grpc-kokoro/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-kokoro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-kokoro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-kokoro/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-kokoro/orgs",
      "repos_url": "https://api.github.com/users/grpc-kokoro/repos",
      "events_url": "https://api.github.com/users/grpc-kokoro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-kokoro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-06-05T23:01:33Z",
    "updated_at": "2017-06-05T23:01:33Z",
    "author_association": "NONE",
    "body": "```\nNo significant performance differences\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/306378134",
    "html_url": "https://github.com/grpc/grpc/pull/11237#issuecomment-306378134",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11237",
    "id": 306378134,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwNjM3ODEzNA==",
    "user": {
      "login": "grpc-kokoro",
      "id": 12722905,
      "node_id": "MDQ6VXNlcjEyNzIyOTA1",
      "avatar_url": "https://avatars3.githubusercontent.com/u/12722905?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-kokoro",
      "html_url": "https://github.com/grpc-kokoro",
      "followers_url": "https://api.github.com/users/grpc-kokoro/followers",
      "following_url": "https://api.github.com/users/grpc-kokoro/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-kokoro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-kokoro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-kokoro/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-kokoro/orgs",
      "repos_url": "https://api.github.com/users/grpc-kokoro/repos",
      "events_url": "https://api.github.com/users/grpc-kokoro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-kokoro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-06-06T04:23:20Z",
    "updated_at": "2017-06-06T04:23:20Z",
    "author_association": "NONE",
    "body": "```\nNo significant performance differences\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/306619880",
    "html_url": "https://github.com/grpc/grpc/pull/11237#issuecomment-306619880",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11237",
    "id": 306619880,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwNjYxOTg4MA==",
    "user": {
      "login": "grpc-kokoro",
      "id": 12722905,
      "node_id": "MDQ6VXNlcjEyNzIyOTA1",
      "avatar_url": "https://avatars3.githubusercontent.com/u/12722905?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-kokoro",
      "html_url": "https://github.com/grpc-kokoro",
      "followers_url": "https://api.github.com/users/grpc-kokoro/followers",
      "following_url": "https://api.github.com/users/grpc-kokoro/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-kokoro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-kokoro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-kokoro/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-kokoro/orgs",
      "repos_url": "https://api.github.com/users/grpc-kokoro/repos",
      "events_url": "https://api.github.com/users/grpc-kokoro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-kokoro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-06-06T21:16:41Z",
    "updated_at": "2017-06-06T21:16:41Z",
    "author_association": "NONE",
    "body": "```\nNo significant performance differences\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/306897216",
    "html_url": "https://github.com/grpc/grpc/pull/11237#issuecomment-306897216",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11237",
    "id": 306897216,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwNjg5NzIxNg==",
    "user": {
      "login": "y-zeng",
      "id": 17460127,
      "node_id": "MDQ6VXNlcjE3NDYwMTI3",
      "avatar_url": "https://avatars3.githubusercontent.com/u/17460127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/y-zeng",
      "html_url": "https://github.com/y-zeng",
      "followers_url": "https://api.github.com/users/y-zeng/followers",
      "following_url": "https://api.github.com/users/y-zeng/following{/other_user}",
      "gists_url": "https://api.github.com/users/y-zeng/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/y-zeng/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/y-zeng/subscriptions",
      "organizations_url": "https://api.github.com/users/y-zeng/orgs",
      "repos_url": "https://api.github.com/users/y-zeng/repos",
      "events_url": "https://api.github.com/users/y-zeng/events{/privacy}",
      "received_events_url": "https://api.github.com/users/y-zeng/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-06-07T19:17:26Z",
    "updated_at": "2017-06-07T19:17:26Z",
    "author_association": "CONTRIBUTOR",
    "body": "Known issues:\r\nAsan C++: #11120\r\nBasic Tests Linux: #11122\r\nBasic Tests Mac: #11223, #9380\r\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/306897546",
    "html_url": "https://github.com/grpc/grpc/pull/11237#issuecomment-306897546",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11237",
    "id": 306897546,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwNjg5NzU0Ng==",
    "user": {
      "login": "y-zeng",
      "id": 17460127,
      "node_id": "MDQ6VXNlcjE3NDYwMTI3",
      "avatar_url": "https://avatars3.githubusercontent.com/u/17460127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/y-zeng",
      "html_url": "https://github.com/y-zeng",
      "followers_url": "https://api.github.com/users/y-zeng/followers",
      "following_url": "https://api.github.com/users/y-zeng/following{/other_user}",
      "gists_url": "https://api.github.com/users/y-zeng/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/y-zeng/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/y-zeng/subscriptions",
      "organizations_url": "https://api.github.com/users/y-zeng/orgs",
      "repos_url": "https://api.github.com/users/y-zeng/repos",
      "events_url": "https://api.github.com/users/y-zeng/events{/privacy}",
      "received_events_url": "https://api.github.com/users/y-zeng/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-06-07T19:18:35Z",
    "updated_at": "2017-06-07T19:18:35Z",
    "author_association": "CONTRIBUTOR",
    "body": "Filed #11424 for https://grpc-testing.appspot.com/job/gRPC_pull_requests_tsan_c/5092/testReport/junit/(root)/c_linux_tsan_native/bins_tsan_sequential_connectivity_test_GRPC_POLL_STRATEGY_epollsig/"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/307207539",
    "html_url": "https://github.com/grpc/grpc/pull/11237#issuecomment-307207539",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11237",
    "id": 307207539,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwNzIwNzUzOQ==",
    "user": {
      "login": "markdroth",
      "id": 18664614,
      "node_id": "MDQ6VXNlcjE4NjY0NjE0",
      "avatar_url": "https://avatars2.githubusercontent.com/u/18664614?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/markdroth",
      "html_url": "https://github.com/markdroth",
      "followers_url": "https://api.github.com/users/markdroth/followers",
      "following_url": "https://api.github.com/users/markdroth/following{/other_user}",
      "gists_url": "https://api.github.com/users/markdroth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/markdroth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/markdroth/subscriptions",
      "organizations_url": "https://api.github.com/users/markdroth/orgs",
      "repos_url": "https://api.github.com/users/markdroth/repos",
      "events_url": "https://api.github.com/users/markdroth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/markdroth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-06-08T19:45:19Z",
    "updated_at": "2017-06-08T19:45:19Z",
    "author_association": "MEMBER",
    "body": "Still LGTM.  Thanks for doing this!"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/307215223",
    "html_url": "https://github.com/grpc/grpc/pull/11237#issuecomment-307215223",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11237",
    "id": 307215223,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwNzIxNTIyMw==",
    "user": {
      "login": "y-zeng",
      "id": 17460127,
      "node_id": "MDQ6VXNlcjE3NDYwMTI3",
      "avatar_url": "https://avatars3.githubusercontent.com/u/17460127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/y-zeng",
      "html_url": "https://github.com/y-zeng",
      "followers_url": "https://api.github.com/users/y-zeng/followers",
      "following_url": "https://api.github.com/users/y-zeng/following{/other_user}",
      "gists_url": "https://api.github.com/users/y-zeng/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/y-zeng/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/y-zeng/subscriptions",
      "organizations_url": "https://api.github.com/users/y-zeng/orgs",
      "repos_url": "https://api.github.com/users/y-zeng/repos",
      "events_url": "https://api.github.com/users/y-zeng/events{/privacy}",
      "received_events_url": "https://api.github.com/users/y-zeng/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-06-08T20:16:47Z",
    "updated_at": "2017-06-08T20:16:47Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thanks a lot for your review!"
  }
]
