[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/229924069",
    "html_url": "https://github.com/grpc/grpc/issues/7192#issuecomment-229924069",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/7192",
    "id": 229924069,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyOTkyNDA2OQ==",
    "user": {
      "login": "soltanmm",
      "id": 4889063,
      "node_id": "MDQ6VXNlcjQ4ODkwNjM=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/4889063?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/soltanmm",
      "html_url": "https://github.com/soltanmm",
      "followers_url": "https://api.github.com/users/soltanmm/followers",
      "following_url": "https://api.github.com/users/soltanmm/following{/other_user}",
      "gists_url": "https://api.github.com/users/soltanmm/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/soltanmm/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/soltanmm/subscriptions",
      "organizations_url": "https://api.github.com/users/soltanmm/orgs",
      "repos_url": "https://api.github.com/users/soltanmm/repos",
      "events_url": "https://api.github.com/users/soltanmm/events{/privacy}",
      "received_events_url": "https://api.github.com/users/soltanmm/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-07-01T11:28:16Z",
    "updated_at": "2016-07-01T11:28:16Z",
    "author_association": "CONTRIBUTOR",
    "body": "Could you provide a link to example code (both Python and Go if possible)? It'd be helpful to be able to compare the Go and Python clients to debug the situation.\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/229989282",
    "html_url": "https://github.com/grpc/grpc/issues/7192#issuecomment-229989282",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/7192",
    "id": 229989282,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyOTk4OTI4Mg==",
    "user": {
      "login": "7AC",
      "id": 734659,
      "node_id": "MDQ6VXNlcjczNDY1OQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/734659?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/7AC",
      "html_url": "https://github.com/7AC",
      "followers_url": "https://api.github.com/users/7AC/followers",
      "following_url": "https://api.github.com/users/7AC/following{/other_user}",
      "gists_url": "https://api.github.com/users/7AC/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/7AC/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/7AC/subscriptions",
      "organizations_url": "https://api.github.com/users/7AC/orgs",
      "repos_url": "https://api.github.com/users/7AC/repos",
      "events_url": "https://api.github.com/users/7AC/events{/privacy}",
      "received_events_url": "https://api.github.com/users/7AC/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-07-01T16:23:26Z",
    "updated_at": "2016-07-01T23:19:55Z",
    "author_association": "NONE",
    "body": "Sure! Here it is.\n\nProto definitions: [openconfig.proto](https://github.com/aristanetworks/pyopenconfig/blob/master/openconfig.proto). Both stubs have been generated with `protobuf 3.0.0-beta-3`.\n\nPython:\n- [generated code](https://github.com/aristanetworks/pyopenconfig/blob/master/openconfig_pb2.py)\n- [subscription code](https://github.com/aristanetworks/pyopenconfig/blob/master/openconfig_resources.py#L23) (then used [here](https://github.com/aristanetworks/pyopenconfig/blob/master/openconfig_client.py#L28))\n- using `grpcio 0.15.0` (I was having different issues with `0.14` which look suspiciously similar to [this](https://groups.google.com/forum/#!topic/grpc-io/SHGgSmWnUx8))\n\nGo:\n- [generated code](https://github.com/aristanetworks/goarista/blob/master/openconfig/openconfig.pb.go)\n- [subscription code](https://github.com/aristanetworks/goarista/blob/master/openconfig/client/client.go#L47)\n- using grpc/grpc-go@e78224b\n\nAny of the following diffs in the Python code results in:\n\n```\ngrpc.framework.interfaces.face.face.LocalError: LocalError(code=StatusCode.UNIMPLEMENTED, details=\"Subscription mode not implemented yet\")\n```\n- setting `once=True` (or `False`, which should be the default anyways)\n\n``` diff\n@@ -24,5 +24,5 @@ def make_subscribe_request(path_str='/'):\n     \"\"\"Create a subscribe request from a string path\"\"\"\n     path = make_path(path_str)\n     subscription = openconfig_pb2.Subscription(path=path)\n-    subscription_list = openconfig_pb2.SubscriptionList(subscription=[subscription])\n+    subscription_list = openconfig_pb2.SubscriptionList(subscription=[subscription], once=True)\n     return openconfig_pb2.SubscribeRequest(subscribe=subscription_list)\n```\n- attempting to set `poll_interval`\n\n``` diff\n@@ -24,5 +24,5 @@ def make_subscribe_request(path_str='/'):\n     \"\"\"Create a subscribe request from a string path\"\"\"\n     path = make_path(path_str)\n     subscription = openconfig_pb2.Subscription(path=path)\n-    subscription_list = openconfig_pb2.SubscriptionList(subscription=[subscription])\n+    subscription_list = openconfig_pb2.SubscriptionList(subscription=[subscription], poll_interval=100)\n     return openconfig_pb2.SubscribeRequest(subscribe=subscription_list)\n```\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/234108950",
    "html_url": "https://github.com/grpc/grpc/issues/7192#issuecomment-234108950",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/7192",
    "id": 234108950,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNDEwODk1MA==",
    "user": {
      "login": "remingtonc",
      "id": 16908622,
      "node_id": "MDQ6VXNlcjE2OTA4NjIy",
      "avatar_url": "https://avatars2.githubusercontent.com/u/16908622?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/remingtonc",
      "html_url": "https://github.com/remingtonc",
      "followers_url": "https://api.github.com/users/remingtonc/followers",
      "following_url": "https://api.github.com/users/remingtonc/following{/other_user}",
      "gists_url": "https://api.github.com/users/remingtonc/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/remingtonc/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/remingtonc/subscriptions",
      "organizations_url": "https://api.github.com/users/remingtonc/orgs",
      "repos_url": "https://api.github.com/users/remingtonc/repos",
      "events_url": "https://api.github.com/users/remingtonc/events{/privacy}",
      "received_events_url": "https://api.github.com/users/remingtonc/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-07-20T22:54:56Z",
    "updated_at": "2016-07-20T22:54:56Z",
    "author_association": "NONE",
    "body": "Hi all, any update regarding whether or not subscription is implemented in Python?\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/236032491",
    "html_url": "https://github.com/grpc/grpc/issues/7192#issuecomment-236032491",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/7192",
    "id": 236032491,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNjAzMjQ5MQ==",
    "user": {
      "login": "nathanielmanistaatgoogle",
      "id": 10131044,
      "node_id": "MDQ6VXNlcjEwMTMxMDQ0",
      "avatar_url": "https://avatars0.githubusercontent.com/u/10131044?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nathanielmanistaatgoogle",
      "html_url": "https://github.com/nathanielmanistaatgoogle",
      "followers_url": "https://api.github.com/users/nathanielmanistaatgoogle/followers",
      "following_url": "https://api.github.com/users/nathanielmanistaatgoogle/following{/other_user}",
      "gists_url": "https://api.github.com/users/nathanielmanistaatgoogle/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nathanielmanistaatgoogle/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nathanielmanistaatgoogle/subscriptions",
      "organizations_url": "https://api.github.com/users/nathanielmanistaatgoogle/orgs",
      "repos_url": "https://api.github.com/users/nathanielmanistaatgoogle/repos",
      "events_url": "https://api.github.com/users/nathanielmanistaatgoogle/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nathanielmanistaatgoogle/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-07-28T21:35:47Z",
    "updated_at": "2016-07-28T21:35:56Z",
    "author_association": "MEMBER",
    "body": "Hmm, it looks like many of the Python links that @7AC shared [here](https://github.com/grpc/grpc/issues/7192#issuecomment-229989282) are no longer valid.\n\n@remingtonc: I'm still unclear on what subscription mode is - can you share the code you've written that you expect to work but that doesn't because of this issue?\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/236091602",
    "html_url": "https://github.com/grpc/grpc/issues/7192#issuecomment-236091602",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/7192",
    "id": 236091602,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNjA5MTYwMg==",
    "user": {
      "login": "remingtonc",
      "id": 16908622,
      "node_id": "MDQ6VXNlcjE2OTA4NjIy",
      "avatar_url": "https://avatars2.githubusercontent.com/u/16908622?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/remingtonc",
      "html_url": "https://github.com/remingtonc",
      "followers_url": "https://api.github.com/users/remingtonc/followers",
      "following_url": "https://api.github.com/users/remingtonc/following{/other_user}",
      "gists_url": "https://api.github.com/users/remingtonc/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/remingtonc/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/remingtonc/subscriptions",
      "organizations_url": "https://api.github.com/users/remingtonc/orgs",
      "repos_url": "https://api.github.com/users/remingtonc/repos",
      "events_url": "https://api.github.com/users/remingtonc/events{/privacy}",
      "received_events_url": "https://api.github.com/users/remingtonc/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-07-29T04:25:01Z",
    "updated_at": "2016-07-29T04:25:58Z",
    "author_association": "NONE",
    "body": "@nathanielmanistaatgoogle My personal comment was a misunderstanding on my part. Subscription mode works correctly given its purpose is to subscribe to channel connectivity event changes and not new data in a stream/channel. My initial thought was that subscribe would \"subscribe\" to a long-term stream/channel and perform a callback when new data arrived. I am uncertain what the original issue is either now that I understand that an iterable is returned that does not necessarily require a \"subscription\" callback for new data. @7AC will need to clarify their problem further if it is still an issue.\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/236146518",
    "html_url": "https://github.com/grpc/grpc/issues/7192#issuecomment-236146518",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/7192",
    "id": 236146518,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNjE0NjUxOA==",
    "user": {
      "login": "7AC",
      "id": 734659,
      "node_id": "MDQ6VXNlcjczNDY1OQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/734659?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/7AC",
      "html_url": "https://github.com/7AC",
      "followers_url": "https://api.github.com/users/7AC/followers",
      "following_url": "https://api.github.com/users/7AC/following{/other_user}",
      "gists_url": "https://api.github.com/users/7AC/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/7AC/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/7AC/subscriptions",
      "organizations_url": "https://api.github.com/users/7AC/orgs",
      "repos_url": "https://api.github.com/users/7AC/repos",
      "events_url": "https://api.github.com/users/7AC/events{/privacy}",
      "received_events_url": "https://api.github.com/users/7AC/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-07-29T10:22:29Z",
    "updated_at": "2016-07-29T10:22:29Z",
    "author_association": "NONE",
    "body": "My bad, here are the corrected links:\n\nhttps://github.com/aristanetworks/pyopenconfig/blob/master/pyopenconfig/openconfig.proto\n\nhttps://github.com/aristanetworks/pyopenconfig/blob/master/pyopenconfig/pb2.py\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/236235665",
    "html_url": "https://github.com/grpc/grpc/issues/7192#issuecomment-236235665",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/7192",
    "id": 236235665,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNjIzNTY2NQ==",
    "user": {
      "login": "nathanielmanistaatgoogle",
      "id": 10131044,
      "node_id": "MDQ6VXNlcjEwMTMxMDQ0",
      "avatar_url": "https://avatars0.githubusercontent.com/u/10131044?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nathanielmanistaatgoogle",
      "html_url": "https://github.com/nathanielmanistaatgoogle",
      "followers_url": "https://api.github.com/users/nathanielmanistaatgoogle/followers",
      "following_url": "https://api.github.com/users/nathanielmanistaatgoogle/following{/other_user}",
      "gists_url": "https://api.github.com/users/nathanielmanistaatgoogle/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nathanielmanistaatgoogle/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nathanielmanistaatgoogle/subscriptions",
      "organizations_url": "https://api.github.com/users/nathanielmanistaatgoogle/orgs",
      "repos_url": "https://api.github.com/users/nathanielmanistaatgoogle/repos",
      "events_url": "https://api.github.com/users/nathanielmanistaatgoogle/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nathanielmanistaatgoogle/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-07-29T17:02:05Z",
    "updated_at": "2016-07-29T17:02:05Z",
    "author_association": "MEMBER",
    "body": "@7AC: Thanks for the updated links. For the circumstance in which you're seeing the undesirable behavior, is the client code written in Python and the server code written in Go? Or some other pairing? Also please ensure that you're using `grpcio` 1.0.0rc1 (or if you're working from our master source that's fine too).\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/239982938",
    "html_url": "https://github.com/grpc/grpc/issues/7192#issuecomment-239982938",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/7192",
    "id": 239982938,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzOTk4MjkzOA==",
    "user": {
      "login": "jfrabaute",
      "id": 100247,
      "node_id": "MDQ6VXNlcjEwMDI0Nw==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/100247?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jfrabaute",
      "html_url": "https://github.com/jfrabaute",
      "followers_url": "https://api.github.com/users/jfrabaute/followers",
      "following_url": "https://api.github.com/users/jfrabaute/following{/other_user}",
      "gists_url": "https://api.github.com/users/jfrabaute/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jfrabaute/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jfrabaute/subscriptions",
      "organizations_url": "https://api.github.com/users/jfrabaute/orgs",
      "repos_url": "https://api.github.com/users/jfrabaute/repos",
      "events_url": "https://api.github.com/users/jfrabaute/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jfrabaute/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-16T02:09:56Z",
    "updated_at": "2016-08-16T02:09:56Z",
    "author_association": "NONE",
    "body": "Hi,\n\nI was investigating a similar problem with a java client instead of python client and found a bug in the server-side code. So, it's highly likely that this is a problem with the specific server-side go code.\nI'll validate with @7AC and close this issue if that's the case.\n\nMore detail about the bug in case someone runs into the same problem:\nReminder: This is a bidirectionnal rpc method call.\nThe go server-side code closes the connection when the client RPC stream ends (an EOF is received on the server-side).\nOn the server-side the goroutine sending the stream will be interrupted as well.\nBut actually, only the stream is closed and the server should NOT close the connection and continue to stream data to the client.\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/249158797",
    "html_url": "https://github.com/grpc/grpc/issues/7192#issuecomment-249158797",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/7192",
    "id": 249158797,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0OTE1ODc5Nw==",
    "user": {
      "login": "7AC",
      "id": 734659,
      "node_id": "MDQ6VXNlcjczNDY1OQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/734659?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/7AC",
      "html_url": "https://github.com/7AC",
      "followers_url": "https://api.github.com/users/7AC/followers",
      "following_url": "https://api.github.com/users/7AC/following{/other_user}",
      "gists_url": "https://api.github.com/users/7AC/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/7AC/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/7AC/subscriptions",
      "organizations_url": "https://api.github.com/users/7AC/orgs",
      "repos_url": "https://api.github.com/users/7AC/repos",
      "events_url": "https://api.github.com/users/7AC/events{/privacy}",
      "received_events_url": "https://api.github.com/users/7AC/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-09-23T10:38:09Z",
    "updated_at": "2016-09-23T10:38:09Z",
    "author_association": "NONE",
    "body": "I can confirm that keeping the connection open on the server side fixed the issue, the Go server can now stream to the Python client continuously.\n"
  }
]
