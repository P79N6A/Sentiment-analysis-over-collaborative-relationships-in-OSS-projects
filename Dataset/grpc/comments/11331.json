[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/304925987",
    "html_url": "https://github.com/grpc/grpc/issues/11331#issuecomment-304925987",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11331",
    "id": 304925987,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwNDkyNTk4Nw==",
    "user": {
      "login": "apolcyn",
      "id": 9566254,
      "node_id": "MDQ6VXNlcjk1NjYyNTQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9566254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apolcyn",
      "html_url": "https://github.com/apolcyn",
      "followers_url": "https://api.github.com/users/apolcyn/followers",
      "following_url": "https://api.github.com/users/apolcyn/following{/other_user}",
      "gists_url": "https://api.github.com/users/apolcyn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apolcyn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apolcyn/subscriptions",
      "organizations_url": "https://api.github.com/users/apolcyn/orgs",
      "repos_url": "https://api.github.com/users/apolcyn/repos",
      "events_url": "https://api.github.com/users/apolcyn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apolcyn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-05-30T16:01:35Z",
    "updated_at": "2017-05-30T16:01:35Z",
    "author_association": "CONTRIBUTOR",
    "body": "Is this using the default `google-protobuf` marshaller and decoder (e.g. using the generated stubs and services from the grpc-protoc plugin)? If so can you share the protobuf definition of the service and client? (from the stack trace it looks like this is happening when the used unmarshaller is decoding a message).\r\n\r\nAlso from the stack trace, it looks like the is happening on server-side `unary` calls? "
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/305166909",
    "html_url": "https://github.com/grpc/grpc/issues/11331#issuecomment-305166909",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11331",
    "id": 305166909,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwNTE2NjkwOQ==",
    "user": {
      "login": "Simonot",
      "id": 11572602,
      "node_id": "MDQ6VXNlcjExNTcyNjAy",
      "avatar_url": "https://avatars1.githubusercontent.com/u/11572602?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Simonot",
      "html_url": "https://github.com/Simonot",
      "followers_url": "https://api.github.com/users/Simonot/followers",
      "following_url": "https://api.github.com/users/Simonot/following{/other_user}",
      "gists_url": "https://api.github.com/users/Simonot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Simonot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Simonot/subscriptions",
      "organizations_url": "https://api.github.com/users/Simonot/orgs",
      "repos_url": "https://api.github.com/users/Simonot/repos",
      "events_url": "https://api.github.com/users/Simonot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Simonot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-05-31T11:49:03Z",
    "updated_at": "2017-05-31T11:49:52Z",
    "author_association": "NONE",
    "body": "Hi,\r\n\r\nFrom what I can understand, we are using default `google-protobuf `marshaller and decoder.\r\n\r\nHere is the .proto of the Service part, and the generated ruby associated. Is there any known issue when marshalling or decoding with grpc-1.3.4 and with ruby generated code from protoc 1.3.0 ?\r\n\r\n**Proto:**\r\n```\r\nsyntax = \"proto3\";\r\nimport \"munic/type/event.proto\";\r\nimport \"google/protobuf/timestamp.proto\";\r\npackage munic.grpc;\r\n\r\n// If the call to Process() returns without error, the sent events are\r\n// considered to have been processed successfully and are acknowledged\r\nservice ProcessService {\r\n\trpc Process (ProcessRequest) returns (ProcessResponse);\r\n}\r\n\r\nmessage ProcessRequest {\r\n\tmunic.type.GroupKey key = 1;\r\n\tbool is_deadline = 2;\t\r\n\tState state = 3;\r\n\trepeated munic.type.Event events = 4;\r\n}\r\n\r\nmessage ProcessResponse {\r\n\tState state = 1;\r\n}\r\n\r\nmessage State {\r\n\tbytes bytes = 1;\r\n\tgoogle.protobuf.Timestamp deadline = 2;\t\r\n}\r\n```\r\n\r\n**Generated ruby with protoc 1.3.0**\r\n_agent_pb.rb_\r\n```\r\n# Generated by the protocol buffer compiler.  DO NOT EDIT!\r\n# source: munic/grpc/agent.proto\r\n\r\nrequire 'google/protobuf'\r\n\r\nrequire 'munic/type/event_pb'\r\nrequire 'google/protobuf/timestamp_pb'\r\nGoogle::Protobuf::DescriptorPool.generated_pool.build do\r\n  add_message \"munic.grpc.ProcessRequest\" do\r\n    optional :key, :message, 1, \"munic.type.GroupKey\"\r\n    optional :is_deadline, :bool, 2\r\n    optional :state, :message, 3, \"munic.grpc.State\"\r\n    repeated :events, :message, 4, \"munic.type.Event\"\r\n  end\r\n  add_message \"munic.grpc.ProcessResponse\" do\r\n    optional :state, :message, 1, \"munic.grpc.State\"\r\n  end\r\n  add_message \"munic.grpc.State\" do\r\n    optional :bytes, :bytes, 1\r\n    optional :deadline, :message, 2, \"google.protobuf.Timestamp\"\r\n  end\r\nend\r\n\r\nmodule Munic\r\n  module Grpc\r\n    ProcessRequest = Google::Protobuf::DescriptorPool.generated_pool.lookup(\"munic.grpc.ProcessRequest\").msgclass\r\n    ProcessResponse = Google::Protobuf::DescriptorPool.generated_pool.lookup(\"munic.grpc.ProcessResponse\").msgclass\r\n    State = Google::Protobuf::DescriptorPool.generated_pool.lookup(\"munic.grpc.State\").msgclass\r\n  end\r\nend\r\n```\r\n\r\n_agent_services_pb.rb_\r\n```\r\n# Generated by the protocol buffer compiler.  DO NOT EDIT!\r\n# Source: munic/grpc/agent.proto for package 'munic.grpc'\r\n\r\nrequire 'grpc'\r\nrequire 'munic/grpc/agent_pb'\r\n\r\nmodule Munic\r\n  module Grpc\r\n    module ProcessService\r\n      # If the call to Process() returns without error, the sent events are\r\n      # considered to have been processed successfully and are acknowledged\r\n      class Service\r\n\r\n        include GRPC::GenericService\r\n\r\n        self.marshal_class_method = :encode\r\n        self.unmarshal_class_method = :decode\r\n        self.service_name = 'munic.grpc.ProcessService'\r\n\r\n        rpc :Process, ProcessRequest, ProcessResponse\r\n      end\r\n\r\n      Stub = Service.rpc_stub_class\r\n    end\r\n  end\r\nend\r\n```\r\n\r\nAs you can see, marshal and unmarshal methods are the GRPC:GenericService ones.\r\n\r\nAs from the server-side `unary` calls, I do not understand what do you mean ? I also think this is happening when trying to decode the proto received in the client side. "
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/307032646",
    "html_url": "https://github.com/grpc/grpc/issues/11331#issuecomment-307032646",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11331",
    "id": 307032646,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwNzAzMjY0Ng==",
    "user": {
      "login": "Simonot",
      "id": 11572602,
      "node_id": "MDQ6VXNlcjExNTcyNjAy",
      "avatar_url": "https://avatars1.githubusercontent.com/u/11572602?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Simonot",
      "html_url": "https://github.com/Simonot",
      "followers_url": "https://api.github.com/users/Simonot/followers",
      "following_url": "https://api.github.com/users/Simonot/following{/other_user}",
      "gists_url": "https://api.github.com/users/Simonot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Simonot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Simonot/subscriptions",
      "organizations_url": "https://api.github.com/users/Simonot/orgs",
      "repos_url": "https://api.github.com/users/Simonot/repos",
      "events_url": "https://api.github.com/users/Simonot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Simonot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-06-08T08:15:16Z",
    "updated_at": "2017-06-08T08:15:16Z",
    "author_association": "NONE",
    "body": "Hi apolcyn,\r\n\r\nDid you have a chance to take a look at the issue. We still experiment it some random times.\r\nWe tried to dig into Thread ruby system as the server deals with a lot of request, and therefore there is a lot of thread opened (maximum 50 because of the parameter max_pool_size). But we did not find any clue.\r\n\r\nThank you again for your time."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/307159469",
    "html_url": "https://github.com/grpc/grpc/issues/11331#issuecomment-307159469",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11331",
    "id": 307159469,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwNzE1OTQ2OQ==",
    "user": {
      "login": "apolcyn",
      "id": 9566254,
      "node_id": "MDQ6VXNlcjk1NjYyNTQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9566254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apolcyn",
      "html_url": "https://github.com/apolcyn",
      "followers_url": "https://api.github.com/users/apolcyn/followers",
      "following_url": "https://api.github.com/users/apolcyn/following{/other_user}",
      "gists_url": "https://api.github.com/users/apolcyn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apolcyn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apolcyn/subscriptions",
      "organizations_url": "https://api.github.com/users/apolcyn/orgs",
      "repos_url": "https://api.github.com/users/apolcyn/repos",
      "events_url": "https://api.github.com/users/apolcyn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apolcyn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-06-08T16:39:16Z",
    "updated_at": "2017-06-08T16:39:16Z",
    "author_association": "CONTRIBUTOR",
    "body": "@Simonot I haven't been able to repro yet.\r\n\r\nAre you able to share the `munic/type/event.proto` file? \r\nThe errors seems to be coming from within the protobuf library, I think that getting the full protobuf message used here would be interesting.\r\n\r\nAlso client and server side code would be great if available, but we can still try to repro if not.\r\n\r\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/307833052",
    "html_url": "https://github.com/grpc/grpc/issues/11331#issuecomment-307833052",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11331",
    "id": 307833052,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwNzgzMzA1Mg==",
    "user": {
      "login": "Simonot",
      "id": 11572602,
      "node_id": "MDQ6VXNlcjExNTcyNjAy",
      "avatar_url": "https://avatars1.githubusercontent.com/u/11572602?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Simonot",
      "html_url": "https://github.com/Simonot",
      "followers_url": "https://api.github.com/users/Simonot/followers",
      "following_url": "https://api.github.com/users/Simonot/following{/other_user}",
      "gists_url": "https://api.github.com/users/Simonot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Simonot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Simonot/subscriptions",
      "organizations_url": "https://api.github.com/users/Simonot/orgs",
      "repos_url": "https://api.github.com/users/Simonot/repos",
      "events_url": "https://api.github.com/users/Simonot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Simonot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-06-12T15:55:06Z",
    "updated_at": "2017-06-12T15:55:06Z",
    "author_association": "NONE",
    "body": "Hi apolcyn,\r\n\r\nI will try to provide you a simple version of client and server with the crash for you to reproduce it.\r\n\r\nRegards"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/309468468",
    "html_url": "https://github.com/grpc/grpc/issues/11331#issuecomment-309468468",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11331",
    "id": 309468468,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwOTQ2ODQ2OA==",
    "user": {
      "login": "Simonot",
      "id": 11572602,
      "node_id": "MDQ6VXNlcjExNTcyNjAy",
      "avatar_url": "https://avatars1.githubusercontent.com/u/11572602?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Simonot",
      "html_url": "https://github.com/Simonot",
      "followers_url": "https://api.github.com/users/Simonot/followers",
      "following_url": "https://api.github.com/users/Simonot/following{/other_user}",
      "gists_url": "https://api.github.com/users/Simonot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Simonot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Simonot/subscriptions",
      "organizations_url": "https://api.github.com/users/Simonot/orgs",
      "repos_url": "https://api.github.com/users/Simonot/repos",
      "events_url": "https://api.github.com/users/Simonot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Simonot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-06-19T15:05:14Z",
    "updated_at": "2017-06-19T15:05:14Z",
    "author_association": "NONE",
    "body": "@apolcyn I have been able to reproduce a segfault in an other adress.\r\n\r\nI have set a github depot with the gRPC client in go and the gRPC server in ruby.\r\n\r\nI have invited you https://github.com/municio/bugtracking_segfault_grpc_ruby/invitations\r\n\r\nTell me if you can reproduce the crash.\r\n\r\nRegards"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/309501758",
    "html_url": "https://github.com/grpc/grpc/issues/11331#issuecomment-309501758",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11331",
    "id": 309501758,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwOTUwMTc1OA==",
    "user": {
      "login": "apolcyn",
      "id": 9566254,
      "node_id": "MDQ6VXNlcjk1NjYyNTQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9566254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apolcyn",
      "html_url": "https://github.com/apolcyn",
      "followers_url": "https://api.github.com/users/apolcyn/followers",
      "following_url": "https://api.github.com/users/apolcyn/following{/other_user}",
      "gists_url": "https://api.github.com/users/apolcyn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apolcyn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apolcyn/subscriptions",
      "organizations_url": "https://api.github.com/users/apolcyn/orgs",
      "repos_url": "https://api.github.com/users/apolcyn/repos",
      "events_url": "https://api.github.com/users/apolcyn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apolcyn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-06-19T16:57:38Z",
    "updated_at": "2017-06-19T16:57:38Z",
    "author_association": "CONTRIBUTOR",
    "body": "I can't run the repro out of the box, which is I think is because I don't have access to the `agent` and `munic` (compiled protobufs?) under `gitlab.mobile-intra.com` (as in https://github.com/municio/bugtracking_segfault_grpc_ruby/blob/master/main.go#L12)\r\n\r\nIs it easy to generate those protobuf outputs from scratch? If not, I can try to swap out agent and munic types for something different."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/309532210",
    "html_url": "https://github.com/grpc/grpc/issues/11331#issuecomment-309532210",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11331",
    "id": 309532210,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwOTUzMjIxMA==",
    "user": {
      "login": "Simonot",
      "id": 11572602,
      "node_id": "MDQ6VXNlcjExNTcyNjAy",
      "avatar_url": "https://avatars1.githubusercontent.com/u/11572602?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Simonot",
      "html_url": "https://github.com/Simonot",
      "followers_url": "https://api.github.com/users/Simonot/followers",
      "following_url": "https://api.github.com/users/Simonot/following{/other_user}",
      "gists_url": "https://api.github.com/users/Simonot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Simonot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Simonot/subscriptions",
      "organizations_url": "https://api.github.com/users/Simonot/orgs",
      "repos_url": "https://api.github.com/users/Simonot/repos",
      "events_url": "https://api.github.com/users/Simonot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Simonot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-06-19T18:51:19Z",
    "updated_at": "2017-06-19T18:51:19Z",
    "author_association": "NONE",
    "body": "@apolcyn source are in vendor folder. You will get `agent ` and `munic` there. I am not an expert in go, so I am not sure how to properly call the dependencies.\r\n\r\nCould you try changing the dependencies to github.com/municio/bugtracking_segfault_grpc_ruby/vendor/gitlab.mobile-intra.com/... ?\r\n\r\nRegards"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/309564264",
    "html_url": "https://github.com/grpc/grpc/issues/11331#issuecomment-309564264",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11331",
    "id": 309564264,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwOTU2NDI2NA==",
    "user": {
      "login": "apolcyn",
      "id": 9566254,
      "node_id": "MDQ6VXNlcjk1NjYyNTQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9566254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apolcyn",
      "html_url": "https://github.com/apolcyn",
      "followers_url": "https://api.github.com/users/apolcyn/followers",
      "following_url": "https://api.github.com/users/apolcyn/following{/other_user}",
      "gists_url": "https://api.github.com/users/apolcyn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apolcyn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apolcyn/subscriptions",
      "organizations_url": "https://api.github.com/users/apolcyn/orgs",
      "repos_url": "https://api.github.com/users/apolcyn/repos",
      "events_url": "https://api.github.com/users/apolcyn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apolcyn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-06-19T20:28:38Z",
    "updated_at": "2017-06-19T20:28:38Z",
    "author_association": "CONTRIBUTOR",
    "body": "I was able to run this (copied vendor files into src), and I think I'm seeing it repro:\r\n\r\nI'm getting error:\r\n```\r\nI, [2017-06-19T13:24:52.526466 #94683]  INFO -- : received process_request with state <Munic::Grpc::State: bytes: \"\\x12\\xBD\\x01\\xE6\\x01\\xF0>{\\\"state_version\\\":1.0,\\\"batch_first_event_id\\\":987137579532943716,\\r*\\x04la\\x9E)\\x00Hength\\\":1,\\\"track\\\":{\\\"\\x05=Xrecorded_at\\\":1497655903\\x01\\x8D\\x10rules\\x01)<0_boot_265-EVENT\\x01\\x14\\x94active\\\":true,\\\"count\\\":0,\\\"version\\\":2}}}}\", deadline: <Google::Protobuf::Timestamp: seconds: 1497871614, nanos: 65018296>> and munic base name space  <Google::Type::LatLng: latitude: 37.78594, longitude: -122.42634> with _context: #<GRPC::ActiveCall::SingleReqView:0x007f419c017608>\r\n.rvm/gems/ruby-2.4.0/gems/grpc-1.3.4-x86_64-linux/src/ruby/lib/grpc/generic/rpc_desc.rb:62: [BUG] rb_gc_mark(): 0x0000000289b0f0 is T_NONE\r\nruby 2.4.0p0 (2016-12-24 revision 57164) [x86_64-linux]\r\n\r\n-- Control frame information -----------------------------------------------\r\nc:0015 p:---- s:0074 e:000073 CFUNC  :decode\r\nc:0014 p:---- s:0071 e:000070 CFUNC  :call\r\nc:0013 p:0018 s:0066 e:000065 BLOCK  .rvm/gems/ruby-2.4.0/gems/grpc-1.3.4-x86_64-linux/src/ruby/lib/grpc/generic/rpc_desc.rb:62 [FINISH]\r\nc:0012 p:0036 s:0062 e:000061 METHOD .rvm/gems/ruby-2.4.0/gems/grpc-1.3.4-x86_64-linux/src/ruby/lib/grpc/generic/active_call.rb:251\r\nc:0011 p:0085 s:0057 e:000056 METHOD .rvm/gems/ruby-2.4.0/gems/grpc-1.3.4-x86_64-linux/src/ruby/lib/grpc/generic/active_call.rb:245\r\nc:0010 p:0009 s:0051 e:000050 METHOD .rvm/gems/ruby-2.4.0/gems/grpc-1.3.4-x86_64-linux/src/ruby/lib/grpc/generic/rpc_desc.rb:66\r\nc:0009 p:0020 s:0043 e:000042 METHOD .rvm/gems/ruby-2.4.0/gems/grpc-1.3.4-x86_64-linux/src/ruby/lib/grpc/generic/rpc_desc.rb:95\r\nc:0008 p:0040 s:0036 e:000035 BLOCK  .rvm/gems/ruby-2.4.0/gems/grpc-1.3.4-x86_64-linux/src/ruby/lib/grpc/generic/rpc_server.rb:392 [FINISH]\r\nc:0007 p:0029 s:0030 e:000029 BLOCK  .rvm/gems/ruby-2.4.0/gems/grpc-1.3.4-x86_64-linux/src/ruby/lib/grpc/generic/rpc_server.rb:149 [FINISH]\r\nc:0006 p:---- s:0024 e:000023 CFUNC  :loop\r\nc:0005 p:0009 s:0020 e:000019 METHOD .rvm/gems/ruby-2.4.0/gems/grpc-1.3.4-x86_64-linux/src/ruby/lib/grpc/generic/rpc_server.rb:146\r\nc:0004 p:0010 s:0015 e:000014 BLOCK  .rvm/gems/ruby-2.4.0/gems/grpc-1.3.4-x86_64-linux/src/ruby/lib/grpc/generic/rpc_server.rb:99 [FINISH]\r\nc:0003 p:---- s:0012 e:000011 CFUNC  :catch\r\nc:0002 p:0011 s:0007 e:000006 BLOCK  .rvm/gems/ruby-2.4.0/gems/grpc-1.3.4-x86_64-linux/src/ruby/lib/grpc/generic/rpc_server.rb:98 [FINISH]\r\nc:0001 p:---- s:0003 e:000002 (none) [FINISH]\r\n\r\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/309612731",
    "html_url": "https://github.com/grpc/grpc/issues/11331#issuecomment-309612731",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11331",
    "id": 309612731,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwOTYxMjczMQ==",
    "user": {
      "login": "apolcyn",
      "id": 9566254,
      "node_id": "MDQ6VXNlcjk1NjYyNTQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9566254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apolcyn",
      "html_url": "https://github.com/apolcyn",
      "followers_url": "https://api.github.com/users/apolcyn/followers",
      "following_url": "https://api.github.com/users/apolcyn/following{/other_user}",
      "gists_url": "https://api.github.com/users/apolcyn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apolcyn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apolcyn/subscriptions",
      "organizations_url": "https://api.github.com/users/apolcyn/orgs",
      "repos_url": "https://api.github.com/users/apolcyn/repos",
      "events_url": "https://api.github.com/users/apolcyn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apolcyn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-06-20T00:49:23Z",
    "updated_at": "2017-06-20T05:59:15Z",
    "author_association": "CONTRIBUTOR",
    "body": "I tweaked down the repro posted above - see [this pull request](https://github.com/municio/bugtracking_segfault_grpc_ruby/pull/1) for a repro of the bug described here, without grpc having been loaded.\r\n\r\nTo run it, run `bundle exec ruby lib/minimal_repro.rb`\r\n\r\nWhat that repro uses to make the bug occur frequently is:\r\n* at least some concurrency\r\n* very large messages (the more `Munic::Type::Event`'s in the `ProcessRequest`, seemingly the more frequent the error).\r\n\r\ncc @Simonot are you able to share the full `.proto` source code? This way, we could re-compile those `.proto` source files with the latest `protoc` and `ruby protobuf code generator`, and confirm that the issue still exists, in which case I think this issue might lie in `google-protobuf`. It looks like the issue is particular to the protobuf message types used here, as I haven't been able to reproduce with simpler but large protobuf types.\r\n\r\n(note this repro should only need the protobuf <i>message</i> types, rather than the full grpc service definition, in order to run, since it's not using grpc). "
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/309692311",
    "html_url": "https://github.com/grpc/grpc/issues/11331#issuecomment-309692311",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11331",
    "id": 309692311,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwOTY5MjMxMQ==",
    "user": {
      "login": "Simonot",
      "id": 11572602,
      "node_id": "MDQ6VXNlcjExNTcyNjAy",
      "avatar_url": "https://avatars1.githubusercontent.com/u/11572602?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Simonot",
      "html_url": "https://github.com/Simonot",
      "followers_url": "https://api.github.com/users/Simonot/followers",
      "following_url": "https://api.github.com/users/Simonot/following{/other_user}",
      "gists_url": "https://api.github.com/users/Simonot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Simonot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Simonot/subscriptions",
      "organizations_url": "https://api.github.com/users/Simonot/orgs",
      "repos_url": "https://api.github.com/users/Simonot/repos",
      "events_url": "https://api.github.com/users/Simonot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Simonot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-06-20T09:06:59Z",
    "updated_at": "2017-06-20T09:06:59Z",
    "author_association": "NONE",
    "body": "@apolcyn I have pushed the `.proto` source code related to `munic event`\r\n\r\nPlease indicate me if something is missing.\r\n\r\nFrom what I know, the compiled go and ruby were made by protoc version >3 (it should be 3.2).\r\n\r\nKeep me up to date if something is not correct in the `.proto` and make the crash"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/310223822",
    "html_url": "https://github.com/grpc/grpc/issues/11331#issuecomment-310223822",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11331",
    "id": 310223822,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxMDIyMzgyMg==",
    "user": {
      "login": "apolcyn",
      "id": 9566254,
      "node_id": "MDQ6VXNlcjk1NjYyNTQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9566254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apolcyn",
      "html_url": "https://github.com/apolcyn",
      "followers_url": "https://api.github.com/users/apolcyn/followers",
      "following_url": "https://api.github.com/users/apolcyn/following{/other_user}",
      "gists_url": "https://api.github.com/users/apolcyn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apolcyn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apolcyn/subscriptions",
      "organizations_url": "https://api.github.com/users/apolcyn/orgs",
      "repos_url": "https://api.github.com/users/apolcyn/repos",
      "events_url": "https://api.github.com/users/apolcyn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apolcyn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-06-21T22:31:27Z",
    "updated_at": "2017-06-21T22:31:27Z",
    "author_association": "CONTRIBUTOR",
    "body": "@Simonot thanks for the repro, it looks like this can be narrowed down to `google/protobuf`, so I'm going to close this, to follow https://github.com/google/protobuf/issues/3250 instead"
  }
]
