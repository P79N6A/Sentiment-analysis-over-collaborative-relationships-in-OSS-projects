[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/270362632",
    "html_url": "https://github.com/grpc/grpc/issues/9232#issuecomment-270362632",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/9232",
    "id": 270362632,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3MDM2MjYzMg==",
    "user": {
      "login": "qiuxd",
      "id": 20919073,
      "node_id": "MDQ6VXNlcjIwOTE5MDcz",
      "avatar_url": "https://avatars1.githubusercontent.com/u/20919073?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/qiuxd",
      "html_url": "https://github.com/qiuxd",
      "followers_url": "https://api.github.com/users/qiuxd/followers",
      "following_url": "https://api.github.com/users/qiuxd/following{/other_user}",
      "gists_url": "https://api.github.com/users/qiuxd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/qiuxd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/qiuxd/subscriptions",
      "organizations_url": "https://api.github.com/users/qiuxd/orgs",
      "repos_url": "https://api.github.com/users/qiuxd/repos",
      "events_url": "https://api.github.com/users/qiuxd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/qiuxd/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-01-04T12:45:32Z",
    "updated_at": "2017-01-04T12:45:32Z",
    "author_association": "NONE",
    "body": "i use gdb to get more information.\r\nwhen the first call destroy(in ~ClientContext)\r\nit call grpc_call_stack_destroy to release the resource.\r\nand the size of stack(stack->count;) is two . one elem is belong to the second call.\r\nwhen it call destroy_call_elem to destroy the elem belong to the second call,  it will abort.\r\nbecause the second call stream is still in  GRPC_CHTTP2_LIST_WAITING_FOR_CONCURRENCY list."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/270430004",
    "html_url": "https://github.com/grpc/grpc/issues/9232#issuecomment-270430004",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/9232",
    "id": 270430004,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3MDQzMDAwNA==",
    "user": {
      "login": "ctiller",
      "id": 10120821,
      "node_id": "MDQ6VXNlcjEwMTIwODIx",
      "avatar_url": "https://avatars3.githubusercontent.com/u/10120821?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ctiller",
      "html_url": "https://github.com/ctiller",
      "followers_url": "https://api.github.com/users/ctiller/followers",
      "following_url": "https://api.github.com/users/ctiller/following{/other_user}",
      "gists_url": "https://api.github.com/users/ctiller/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ctiller/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ctiller/subscriptions",
      "organizations_url": "https://api.github.com/users/ctiller/orgs",
      "repos_url": "https://api.github.com/users/ctiller/repos",
      "events_url": "https://api.github.com/users/ctiller/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ctiller/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-01-04T17:22:34Z",
    "updated_at": "2017-01-04T17:22:34Z",
    "author_association": "MEMBER",
    "body": "I'm trying to put together a test to reproduce this, and it doesn't seem to be triggering for me.\r\n\r\nWhich version of gRPC are you using?"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/270621788",
    "html_url": "https://github.com/grpc/grpc/issues/9232#issuecomment-270621788",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/9232",
    "id": 270621788,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3MDYyMTc4OA==",
    "user": {
      "login": "qiuxd",
      "id": 20919073,
      "node_id": "MDQ6VXNlcjIwOTE5MDcz",
      "avatar_url": "https://avatars1.githubusercontent.com/u/20919073?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/qiuxd",
      "html_url": "https://github.com/qiuxd",
      "followers_url": "https://api.github.com/users/qiuxd/followers",
      "following_url": "https://api.github.com/users/qiuxd/following{/other_user}",
      "gists_url": "https://api.github.com/users/qiuxd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/qiuxd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/qiuxd/subscriptions",
      "organizations_url": "https://api.github.com/users/qiuxd/orgs",
      "repos_url": "https://api.github.com/users/qiuxd/repos",
      "events_url": "https://api.github.com/users/qiuxd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/qiuxd/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-01-05T11:17:40Z",
    "updated_at": "2017-01-05T11:17:40Z",
    "author_association": "NONE",
    "body": "i used version 1.0.1.\r\nyou may try more times. restart the client more time with the server alive.\r\nit was not triggered everytime.\r\n\r\nnow, i have got more information.\r\nif i call one time. it enter function \"grpc_call_stack_init\" with call_stack(the para) are 0x6e0d20 and 0x7f9d20003b68.\r\nit will still enter function grpc_call_stack_destroy two times. with call_stack 0x6e0d20 and 0x7f9d20003b68.\r\n\r\nbut, if i two times immiditely. it perform as below:\r\nthe first call:\r\nDSF|Aync callService controller:[0x30000235f1c8]\r\nDSF-GRPC| grpc_call_stack_init context is 0x6dbb28 , call_stack is 0x6dbcf0, count is 2\r\nDSF-GRPC| cc_start_transport_stream_op elem is 0x6dbd38, elem->call_data is 0x6dbf90\r\nDSF-GRPC| cc_start_transport_stream_op elem is 0x6dbd38, elem->call_data is 0x6dbf90\r\n\r\nthe second call:\r\nDSF|Aync callService controller:[0x30000235f4f0]\r\nDSF-GRPC| grpc_call_stack_init context is 0x6de5a8 , call_stack is 0x6de770, count is 2\r\nDSF-GRPC| cc_start_transport_stream_op elem is 0x6de7b8, elem->call_data is 0x6dea10\r\nDSF-GRPC| cc_start_transport_stream_op elem is 0x6de7b8, elem->call_data is 0x6dea10\r\nDSF-GRPC| subchannel_ready holder is 0x6dea10, subchannel_call is 0x6dea10 mu is 0x6dea28\r\nDSF-GRPC| begin grpc_connected_subchannel_create_call con is 0x7f2b400085a0, chanstk is 0x7f2b400085a0 call is 0x7f2b40000ae0\r\nDSF-GRPC| grpc_call_stack_init context is (nil) , call_stack is 0x7f2b40000ae8, count is 2\r\nDSF-GRPC| end grpc_connected_subchannel_create_call con is 0x7f2b400085a0, chanstk is 0x7f2b400085a0 call is 0x7f2b40000ae0\r\n\r\nthe first call:\r\nDSF-GRPC| subchannel_ready holder is 0x6dbf90, subchannel_call is 0x6dbf90 mu is 0x6dbfa8\r\nDSF-GRPC| begin grpc_connected_subchannel_create_call con is 0x7f2b400085a0, chanstk is 0x7f2b400085a0 call is 0x7f2b40001110\r\nDSF-GRPC| grpc_call_stack_init context is (nil) , call_stack is 0x7f2b40001118, count is 2\r\nDSF-GRPC| end grpc_connected_subchannel_create_call con is 0x7f2b400085a0, chanstk is 0x7f2b400085a0 call is 0x7f2b40001110\r\n\r\nthe second call:\r\nDSF-GRPC| con_start_transport_stream_op elem = 0x7f2b40000b30, calld = 0x7f2b40000c38, chand= 0x7f2b40008610\r\nDSF-GRPC| grpc_chttp2_list_add_waiting_for_concurrency transport_global is 0x7f2b40005cc0, stream_global is 0x7f2b40000c48\r\nDSF-GRPC| grpc_chttp2_list_pop_waiting_for_concurrency transport_global is 0x7f2b40005cc0, stream_global is 0x7f2b40000c48\r\nDSF-GRPC| con_start_transport_stream_op elem = 0x7f2b40000b30, calld = 0x7f2b40000c38, chand= 0x7f2b40008610\r\n\r\nthe first call:\r\nDSF-GRPC| con_start_transport_stream_op elem = 0x7f2b40001160, calld = 0x7f2b40001268, chand= 0x7f2b40008610\r\nDSF-GRPC| grpc_chttp2_list_add_waiting_for_concurrency transport_global is 0x7f2b40005cc0, stream_global is 0x7f2b40001278\r\nDSF-GRPC| con_start_transport_stream_op elem = 0x7f2b40001160, calld = 0x7f2b40001268, chand= 0x7f2b40008610\r\n\r\nthe first call:\r\nDSF-GRPC| cc_start_transport_stream_op elem is 0x6dbd38, elem->call_data is 0x6dbf90\r\nDSF-GRPC| con_start_transport_stream_op elem = 0x7f2b40001160, calld = 0x7f2b40001268, chand= 0x7f2b40008610\r\n\r\nthe first call destroy:\r\nDSF|recv response msg fail, controller is : 0x30000235f1c8\r\nDSF-GRPC| grpc_call_stack_destroy , call_stack is 0x6dbcf0, count is 2\r\nDSF-GRPC| subchannel_call_destroy con is 0x7f2b400085a0, call_stack is 0x7f2b40001118 call is 0x7f2b40001110\r\nDSF-GRPC| grpc_call_stack_destroy , call_stack is 0x7f2b40001118, count is 2\r\n\r\nDSF-GRPC| destroy_call_elem elem = 0x7f2b40001160, calld = 0x7f2b40001268, chand= 0x7f2b40008610\r\nDSF-GRPC| destroy_stream_locked transport_global is 0x7f2b40005cc0, stream_global is 0x7f2b40001278\r\n\r\nDSF-GRPC| client stream 0 still included in list 11\r\n\r\nfrom the log, it seem that the second call was send out before the first call.\r\nand the first call was added to GRPC_CHTTP2_LIST_WAITING_FOR_CONCURRENCY list.\r\n\r\nwhen the first call overtime. it will be destroyed. and abort because it was still in GRPC_CHTTP2_LIST_WAITING_FOR_CONCURRENCY list.\r\n\r\nare grpc forget to clear the data in GRPC_CHTTP2_LIST_WAITING_FOR_CONCURRENCY list. when it overtime??"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/272495377",
    "html_url": "https://github.com/grpc/grpc/issues/9232#issuecomment-272495377",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/9232",
    "id": 272495377,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3MjQ5NTM3Nw==",
    "user": {
      "login": "ctiller",
      "id": 10120821,
      "node_id": "MDQ6VXNlcjEwMTIwODIx",
      "avatar_url": "https://avatars3.githubusercontent.com/u/10120821?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ctiller",
      "html_url": "https://github.com/ctiller",
      "followers_url": "https://api.github.com/users/ctiller/followers",
      "following_url": "https://api.github.com/users/ctiller/following{/other_user}",
      "gists_url": "https://api.github.com/users/ctiller/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ctiller/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ctiller/subscriptions",
      "organizations_url": "https://api.github.com/users/ctiller/orgs",
      "repos_url": "https://api.github.com/users/ctiller/repos",
      "events_url": "https://api.github.com/users/ctiller/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ctiller/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-01-13T17:24:31Z",
    "updated_at": "2017-01-13T17:24:31Z",
    "author_association": "MEMBER",
    "body": "This is fixed at master as evidenced by #9236 "
  }
]
