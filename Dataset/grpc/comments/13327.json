[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/343302462",
    "html_url": "https://github.com/grpc/grpc/issues/13327#issuecomment-343302462",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13327",
    "id": 343302462,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0MzMwMjQ2Mg==",
    "user": {
      "login": "nathanielmanistaatgoogle",
      "id": 10131044,
      "node_id": "MDQ6VXNlcjEwMTMxMDQ0",
      "avatar_url": "https://avatars0.githubusercontent.com/u/10131044?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nathanielmanistaatgoogle",
      "html_url": "https://github.com/nathanielmanistaatgoogle",
      "followers_url": "https://api.github.com/users/nathanielmanistaatgoogle/followers",
      "following_url": "https://api.github.com/users/nathanielmanistaatgoogle/following{/other_user}",
      "gists_url": "https://api.github.com/users/nathanielmanistaatgoogle/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nathanielmanistaatgoogle/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nathanielmanistaatgoogle/subscriptions",
      "organizations_url": "https://api.github.com/users/nathanielmanistaatgoogle/orgs",
      "repos_url": "https://api.github.com/users/nathanielmanistaatgoogle/repos",
      "events_url": "https://api.github.com/users/nathanielmanistaatgoogle/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nathanielmanistaatgoogle/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-09T21:48:31Z",
    "updated_at": "2017-11-09T21:48:31Z",
    "author_association": "MEMBER",
    "body": "Are you able to isolate the problem any further? Are you able to reproduce the issue in a narrower space of time (than one hour) and narrower circumstances (fewer libraries involved)?"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/345490658",
    "html_url": "https://github.com/grpc/grpc/issues/13327#issuecomment-345490658",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13327",
    "id": 345490658,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NTQ5MDY1OA==",
    "user": {
      "login": "waichee",
      "id": 929147,
      "node_id": "MDQ6VXNlcjkyOTE0Nw==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/929147?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/waichee",
      "html_url": "https://github.com/waichee",
      "followers_url": "https://api.github.com/users/waichee/followers",
      "following_url": "https://api.github.com/users/waichee/following{/other_user}",
      "gists_url": "https://api.github.com/users/waichee/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/waichee/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/waichee/subscriptions",
      "organizations_url": "https://api.github.com/users/waichee/orgs",
      "repos_url": "https://api.github.com/users/waichee/repos",
      "events_url": "https://api.github.com/users/waichee/events{/privacy}",
      "received_events_url": "https://api.github.com/users/waichee/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-19T04:11:21Z",
    "updated_at": "2017-11-20T10:50:50Z",
    "author_association": "NONE",
    "body": "Hi i am trying out the ML engine api using google-api-python-client==1.6.4 and seeing  segmentation fault too after running the program which performs predictions continuously for a few minutes\r\n\r\nIm getting the following error on OSX and also Ubuntu  14.04.5\r\n\r\nI'm using the following sample codes from the GCP doc\r\nhttps://cloud.google.com/ml-engine/docs/online-predict\r\n\r\nThe libraries im using:\r\n```\r\nautopep8==1.3.3\r\nawscli==1.11.179\r\nbackports.weakref==1.0rc1\r\nbeautifulsoup4==4.5.3\r\nbleach==1.5.0\r\nboto==2.48.0\r\nboto3==1.4.7\r\nbotocore==1.7.37\r\nbz2file==0.98\r\ncertifi==2016.2.28\r\nchardet==3.0.4\r\nclick==6.7\r\ncolorama==0.3.7\r\nconfigparser==3.5.0\r\ncontent-cues==0.1\r\ndocutils==0.13.1\r\nenum34==1.1.6\r\nflake8==3.3.0\r\nFlask==0.12.2\r\nfuncsigs==1.0.2\r\nfutures==3.1.1\r\ngoogle-api-python-client==1.6.4\r\nhtml5lib==0.9999999\r\nhttplib2==0.10.3\r\nhttpretty==0.8.10\r\nidna==2.6\r\nitsdangerous==0.24\r\nJinja2==2.10\r\njmespath==0.9.3\r\nlxml==3.7.3\r\nMarkdown==2.6.9\r\nMarkupSafe==1.0\r\nmccabe==0.6.1\r\nmock==2.0.0\r\nmoto==0.4.25\r\nnumpy==1.13.0\r\noauth2client==4.1.2\r\npandas==0.20.3\r\npbr==3.1.1\r\nprotobuf==3.5.0\r\npy==1.5.2\r\npyasn1==0.2.3\r\npyasn1-modules==0.1.5\r\npycodestyle==2.3.1\r\npyflakes==1.5.0\r\npytest==3.2.3\r\npython-dateutil==2.6.0\r\npython-gnupg==0.3.8\r\npytz==2017.2\r\nPyYAML==3.12\r\nrequests==2.18.4\r\nretrying==1.3.3\r\nrsa==3.4.2\r\ns3fs==0.1.2\r\ns3transfer==0.1.10\r\nscikit-learn==0.18.2\r\nscipy==0.19.1\r\nsix==1.10.0\r\nsmart-open==1.5.3\r\ntensorflow==1.2.1\r\ntensorflow-serving-api==0.6.0\r\nuritemplate==3.0.0\r\nurllib3==1.22\r\nWerkzeug==0.12.2\r\nxmltodict==0.11.0\r\n```\r\n\r\n```\r\npython --version\r\nPython 2.7.13 :: Continuum Analytics, Inc.\r\n```\r\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/353237610",
    "html_url": "https://github.com/grpc/grpc/issues/13327#issuecomment-353237610",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13327",
    "id": 353237610,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MzIzNzYxMA==",
    "user": {
      "login": "scotloach",
      "id": 11753520,
      "node_id": "MDQ6VXNlcjExNzUzNTIw",
      "avatar_url": "https://avatars2.githubusercontent.com/u/11753520?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/scotloach",
      "html_url": "https://github.com/scotloach",
      "followers_url": "https://api.github.com/users/scotloach/followers",
      "following_url": "https://api.github.com/users/scotloach/following{/other_user}",
      "gists_url": "https://api.github.com/users/scotloach/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/scotloach/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/scotloach/subscriptions",
      "organizations_url": "https://api.github.com/users/scotloach/orgs",
      "repos_url": "https://api.github.com/users/scotloach/repos",
      "events_url": "https://api.github.com/users/scotloach/events{/privacy}",
      "received_events_url": "https://api.github.com/users/scotloach/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-21T02:06:20Z",
    "updated_at": "2017-12-21T02:06:20Z",
    "author_association": "NONE",
    "body": "I am seeing the same segmentation fault.  \r\nPython 3.6.2\r\n\r\n```\r\n#0  gpr_ref (r=0x0) at src/core/lib/support/sync.cc:88\r\n#1  gpr_ref_non_zero (r=0x0) at src/core/lib/support/sync.cc:93\r\n#2  0x00007fbc20765228 in send_security_metadata (batch=0x56483e6436a0, elem=0x56483e643750, exec_ctx=0x7fbc1e77fea0) at src/core/lib/security/transport/client_auth_filter.cc:225\r\n#3  on_host_checked (exec_ctx=exec_ctx@entry=0x7fbc1e77fea0, arg=arg@entry=0x56483e6436a0, error=<optimized out>) at src/core/lib/security/transport/client_auth_filter.cc:241\r\n#4  0x00007fbc20765767 in auth_start_transport_stream_op_batch (exec_ctx=0x7fbc1e77fea0, elem=0x56483e643750, batch=0x56483e6436a0) at src/core/lib/security/transport/client_auth_filter.cc:328\r\n#5  0x00007fbc20773c39 in waiting_for_pick_batches_resume (elem=<optimized out>, elem=<optimized out>, exec_ctx=0x7fbc1e77fea0) at src/core/ext/filters/client_channel/client_channel.cc:962\r\n#6  create_subchannel_call_locked (error=0x0, elem=<optimized out>, exec_ctx=0x7fbc1e77fea0) at src/core/ext/filters/client_channel/client_channel.cc:1025\r\n#7  pick_done_locked (exec_ctx=0x7fbc1e77fea0, elem=<optimized out>, error=0x0) at src/core/ext/filters/client_channel/client_channel.cc:1051\r\n#8  0x00007fbc20703982 in grpc_combiner_continue_exec_ctx (exec_ctx=0x7fbc1e77fea0) at src/core/lib/iomgr/combiner.cc:260\r\n#9  0x00007fbc2070d332 in grpc_exec_ctx_flush (exec_ctx=0x7fbc1e77fea0) at src/core/lib/iomgr/exec_ctx.cc:93\r\n#10 0x00007fbc2071a115 in run_some_timers (exec_ctx=0x7fbc1e77fea0) at src/core/lib/iomgr/timer_manager.cc:129\r\n#11 timer_main_loop (exec_ctx=0x7fbc1e77fea0) at src/core/lib/iomgr/timer_manager.cc:231\r\n#12 timer_thread (completed_thread_ptr=completed_thread_ptr@entry=0x56483e34ea90) at src/core/lib/iomgr/timer_manager.cc:279\r\n#13 0x00007fbc206f64f7 in thread_body (v=<optimized out>) at src/core/lib/support/thd_posix.cc:53\r\n#14 0x00007fbc2769e36d in start_thread () from /lib64/libpthread.so.0\r\n#15 0x00007fbc26cb9bbf in clone () from /lib64/libc.so.6\r\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/353439207",
    "html_url": "https://github.com/grpc/grpc/issues/13327#issuecomment-353439207",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13327",
    "id": 353439207,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MzQzOTIwNw==",
    "user": {
      "login": "nathanielmanistaatgoogle",
      "id": 10131044,
      "node_id": "MDQ6VXNlcjEwMTMxMDQ0",
      "avatar_url": "https://avatars0.githubusercontent.com/u/10131044?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nathanielmanistaatgoogle",
      "html_url": "https://github.com/nathanielmanistaatgoogle",
      "followers_url": "https://api.github.com/users/nathanielmanistaatgoogle/followers",
      "following_url": "https://api.github.com/users/nathanielmanistaatgoogle/following{/other_user}",
      "gists_url": "https://api.github.com/users/nathanielmanistaatgoogle/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nathanielmanistaatgoogle/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nathanielmanistaatgoogle/subscriptions",
      "organizations_url": "https://api.github.com/users/nathanielmanistaatgoogle/orgs",
      "repos_url": "https://api.github.com/users/nathanielmanistaatgoogle/repos",
      "events_url": "https://api.github.com/users/nathanielmanistaatgoogle/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nathanielmanistaatgoogle/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-21T19:38:05Z",
    "updated_at": "2017-12-21T19:38:05Z",
    "author_association": "MEMBER",
    "body": "@scotloach: have you any insight into how to simply reproduce the segmentation fault?"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/354320824",
    "html_url": "https://github.com/grpc/grpc/issues/13327#issuecomment-354320824",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13327",
    "id": 354320824,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NDMyMDgyNA==",
    "user": {
      "login": "scotloach",
      "id": 11753520,
      "node_id": "MDQ6VXNlcjExNzUzNTIw",
      "avatar_url": "https://avatars2.githubusercontent.com/u/11753520?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/scotloach",
      "html_url": "https://github.com/scotloach",
      "followers_url": "https://api.github.com/users/scotloach/followers",
      "following_url": "https://api.github.com/users/scotloach/following{/other_user}",
      "gists_url": "https://api.github.com/users/scotloach/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/scotloach/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/scotloach/subscriptions",
      "organizations_url": "https://api.github.com/users/scotloach/orgs",
      "repos_url": "https://api.github.com/users/scotloach/repos",
      "events_url": "https://api.github.com/users/scotloach/events{/privacy}",
      "received_events_url": "https://api.github.com/users/scotloach/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-28T17:03:26Z",
    "updated_at": "2017-12-28T17:03:26Z",
    "author_association": "NONE",
    "body": "I haven't found a way to \"simply\" reproduce it.  I can reproduce it reliably in my pretty complex environment."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/354352925",
    "html_url": "https://github.com/grpc/grpc/issues/13327#issuecomment-354352925",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13327",
    "id": 354352925,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NDM1MjkyNQ==",
    "user": {
      "login": "seanlaff",
      "id": 3194832,
      "node_id": "MDQ6VXNlcjMxOTQ4MzI=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/3194832?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/seanlaff",
      "html_url": "https://github.com/seanlaff",
      "followers_url": "https://api.github.com/users/seanlaff/followers",
      "following_url": "https://api.github.com/users/seanlaff/following{/other_user}",
      "gists_url": "https://api.github.com/users/seanlaff/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/seanlaff/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/seanlaff/subscriptions",
      "organizations_url": "https://api.github.com/users/seanlaff/orgs",
      "repos_url": "https://api.github.com/users/seanlaff/repos",
      "events_url": "https://api.github.com/users/seanlaff/events{/privacy}",
      "received_events_url": "https://api.github.com/users/seanlaff/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-28T20:25:22Z",
    "updated_at": "2017-12-28T20:25:22Z",
    "author_association": "NONE",
    "body": "I think this might be a multithreading issue.\r\nI'm on Python 3.6.3 and am seeing this issue when making GRPC requests across multiple threads. If I run my program with a single thread- the error does not happen. If I execute my code with a decent number of threads (8), I can get the error almost instantly.\r\n\r\nMy stack trace is similar:\r\n```\r\n#0  gpr_ref_non_zero (r=0x0) at src/core/lib/support/sync.cc:93\r\n#1  0x00007ffff198dd95 in grpc_stream_ref (refcount=<optimized out>) at src/core/lib/transport/transport.cc:48\r\n#2  0x00007ffff19b9fd0 in send_security_metadata (batch=0x555555cdc8a0, elem=0x555555cdc950, exec_ctx=0x7ffff7e328b0)\r\n    at src/core/lib/security/transport/client_auth_filter.cc:225\r\n#3  on_host_checked (exec_ctx=exec_ctx@entry=0x7ffff7e328b0, arg=arg@entry=0x555555cdc8a0, error=<optimized out>)\r\n    at src/core/lib/security/transport/client_auth_filter.cc:241\r\n#4  0x00007ffff19ba428 in auth_start_transport_stream_op_batch (exec_ctx=0x7ffff7e328b0, elem=0x555555cdc950, batch=0x555555cdc8a0)\r\n    at src/core/lib/security/transport/client_auth_filter.cc:328\r\n#5  0x00007ffff19c8be1 in waiting_for_pick_batches_resume (elem=<optimized out>, elem=<optimized out>, exec_ctx=0x7ffff7e328b0)\r\n    at src/core/ext/filters/client_channel/client_channel.cc:962\r\n#6  create_subchannel_call_locked (error=0x0, elem=<optimized out>, exec_ctx=0x7ffff7e328b0)\r\n    at src/core/ext/filters/client_channel/client_channel.cc:1025\r\n#7  pick_done_locked (exec_ctx=0x7ffff7e328b0, elem=<optimized out>, error=<optimized out>)\r\n    at src/core/ext/filters/client_channel/client_channel.cc:1051\r\n#8  0x00007ffff194f0fc in grpc_combiner_continue_exec_ctx (exec_ctx=exec_ctx@entry=0x7ffff7e328b0) at src/core/lib/iomgr/combiner.cc:260\r\n#9  0x00007ffff1961ec2 in grpc_exec_ctx_flush (exec_ctx=exec_ctx@entry=0x7ffff7e328b0) at src/core/lib/iomgr/exec_ctx.cc:93\r\n#10 0x00007ffff1962aa5 in run_closures (exec_ctx=0x7ffff7e328b0, list=...) at src/core/lib/iomgr/executor.cc:80\r\n#11 executor_thread (arg=arg@entry=0x555555ca20a0) at src/core/lib/iomgr/executor.cc:180\r\n#12 0x00007ffff19420e7 in thread_body (v=<optimized out>) at src/core/lib/support/thd_posix.cc:53\r\n#13 0x00007ffff7dc3b57 in ?? () from /lib/ld-musl-x86_64.so.1\r\n#14 0x0000000000000000 in ?? ()\r\n```\r\nI'm making thousands of requests in a short window"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/354428542",
    "html_url": "https://github.com/grpc/grpc/issues/13327#issuecomment-354428542",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13327",
    "id": 354428542,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NDQyODU0Mg==",
    "user": {
      "login": "t00n",
      "id": 1850295,
      "node_id": "MDQ6VXNlcjE4NTAyOTU=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1850295?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/t00n",
      "html_url": "https://github.com/t00n",
      "followers_url": "https://api.github.com/users/t00n/followers",
      "following_url": "https://api.github.com/users/t00n/following{/other_user}",
      "gists_url": "https://api.github.com/users/t00n/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/t00n/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/t00n/subscriptions",
      "organizations_url": "https://api.github.com/users/t00n/orgs",
      "repos_url": "https://api.github.com/users/t00n/repos",
      "events_url": "https://api.github.com/users/t00n/events{/privacy}",
      "received_events_url": "https://api.github.com/users/t00n/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-29T10:31:57Z",
    "updated_at": "2017-12-29T10:31:57Z",
    "author_association": "NONE",
    "body": "I have the same problem and a similar stacktrace. I have been able to reproduce the bug in a short snippet (see below).\r\nI am using Arch Linux, Python 3.6.4 and the following libs\r\n```\r\ngapic-google-cloud-datastore-v1==0.15.3\r\ngoogle-api-core==0.1.3\r\ngoogle-auth==1.2.1\r\ngoogle-cloud-core==0.28.0\r\ngoogle-cloud-datastore==1.4.0\r\ngoogle-cloud-pubsub==0.30.1\r\ngoogle-gax==0.15.16\r\ngoogleapis-common-protos==1.5.3\r\ngrpc-google-iam-v1==0.11.4\r\nproto-google-cloud-datastore-v1==0.90.4\r\n```\r\n\r\nI have ran the following code 39 times and it segfaulted everytime with an average running time of 47 seconds. The subscription I am pulling from contains a few hundreds messages. \r\nI think the bug is linked to the number of requests to the datastore because when I remove `datastore_client.query(kind='TestMessage')` , it segfaults far less often.\r\nI have tried to reproduce the bug without using pubsub, by spawning 50 threads and querying the datastore but it never segfaulted.\r\n\r\n```python\r\nimport os\r\nimport random\r\nfrom datetime import datetime\r\nfrom google.cloud import pubsub, datastore\r\n\r\nos.environ[\"GOOGLE_APPLICATION_CREDENTIALS\"] = 'some-file.json'\r\nsubscriber_client = pubsub.SubscriberClient()\r\ndatastore_client = datastore.Client()\r\nKEYS = [i for i in range(100)]\r\n\r\ndef consume(message):\r\n    data = {}\r\n    data['key1'] = random.choice(KEYS)\r\n    data['time'] = datetime.now().isoformat()\r\n    key = datastore_client.key('Test', str(data['key1']), 'TestMessage', str(data['time']))\r\n    entity = datastore.Entity(key)\r\n    entity.update(data)\r\n    datastore_client.put(entity)\r\n\r\n    query = datastore_client.query(kind='TestMessage')\r\n    list(query.fetch())\r\n\r\nsubscription = subscriber_client.subscription_path(\"some-project\", \"some-subscription\")\r\nsubscriber_client.subscribe(subscription, consume)\r\n\r\nwhile True:\r\n    pass\r\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/357737956",
    "html_url": "https://github.com/grpc/grpc/issues/13327#issuecomment-357737956",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13327",
    "id": 357737956,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NzczNzk1Ng==",
    "user": {
      "login": "krelst",
      "id": 4048504,
      "node_id": "MDQ6VXNlcjQwNDg1MDQ=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/4048504?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/krelst",
      "html_url": "https://github.com/krelst",
      "followers_url": "https://api.github.com/users/krelst/followers",
      "following_url": "https://api.github.com/users/krelst/following{/other_user}",
      "gists_url": "https://api.github.com/users/krelst/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/krelst/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/krelst/subscriptions",
      "organizations_url": "https://api.github.com/users/krelst/orgs",
      "repos_url": "https://api.github.com/users/krelst/repos",
      "events_url": "https://api.github.com/users/krelst/events{/privacy}",
      "received_events_url": "https://api.github.com/users/krelst/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-15T16:55:00Z",
    "updated_at": "2018-01-15T16:55:00Z",
    "author_association": "NONE",
    "body": "We are seeing the exact same segmentation issue when using the `google-cloud-pubsub` library. However we only see this issue when running our script on kubernetes, locally it runs stable for > 15 minutes (haven't tried it to run any longer). On k8s it fails after +/- 45s. We use `python 2.7.13` run it in a `debian:jessie` docker container, and `google-cloud-pubsub==0.30.0` with `grpcio==1.8.3`."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/358156833",
    "html_url": "https://github.com/grpc/grpc/issues/13327#issuecomment-358156833",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13327",
    "id": 358156833,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1ODE1NjgzMw==",
    "user": {
      "login": "nghiaho12",
      "id": 1471705,
      "node_id": "MDQ6VXNlcjE0NzE3MDU=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/1471705?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nghiaho12",
      "html_url": "https://github.com/nghiaho12",
      "followers_url": "https://api.github.com/users/nghiaho12/followers",
      "following_url": "https://api.github.com/users/nghiaho12/following{/other_user}",
      "gists_url": "https://api.github.com/users/nghiaho12/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nghiaho12/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nghiaho12/subscriptions",
      "organizations_url": "https://api.github.com/users/nghiaho12/orgs",
      "repos_url": "https://api.github.com/users/nghiaho12/repos",
      "events_url": "https://api.github.com/users/nghiaho12/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nghiaho12/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-17T00:44:46Z",
    "updated_at": "2018-01-17T17:45:05Z",
    "author_association": "NONE",
    "body": "I'm also seeing this exact problem with 10 worker threads writing to a Google Spanner table, which Google recommends as the way to write bulk data.\r\n\r\nAfter some testing I think my specific problem was that I was using the same spanner instance in each of the threads. Having each thread create their own instance seems to have solved it."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/358399155",
    "html_url": "https://github.com/grpc/grpc/issues/13327#issuecomment-358399155",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13327",
    "id": 358399155,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1ODM5OTE1NQ==",
    "user": {
      "login": "nathanielmanistaatgoogle",
      "id": 10131044,
      "node_id": "MDQ6VXNlcjEwMTMxMDQ0",
      "avatar_url": "https://avatars0.githubusercontent.com/u/10131044?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nathanielmanistaatgoogle",
      "html_url": "https://github.com/nathanielmanistaatgoogle",
      "followers_url": "https://api.github.com/users/nathanielmanistaatgoogle/followers",
      "following_url": "https://api.github.com/users/nathanielmanistaatgoogle/following{/other_user}",
      "gists_url": "https://api.github.com/users/nathanielmanistaatgoogle/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nathanielmanistaatgoogle/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nathanielmanistaatgoogle/subscriptions",
      "organizations_url": "https://api.github.com/users/nathanielmanistaatgoogle/orgs",
      "repos_url": "https://api.github.com/users/nathanielmanistaatgoogle/repos",
      "events_url": "https://api.github.com/users/nathanielmanistaatgoogle/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nathanielmanistaatgoogle/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-17T18:33:34Z",
    "updated_at": "2018-01-17T18:33:34Z",
    "author_association": "MEMBER",
    "body": "@t00n: is that as minimal as you've been able to make your reproduction? In particular is authentication required? Are mutative operations required or can the problem be observed with only read-only operations? How much server-side set-up is required to reproduce the problem?"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/358401779",
    "html_url": "https://github.com/grpc/grpc/issues/13327#issuecomment-358401779",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13327",
    "id": 358401779,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1ODQwMTc3OQ==",
    "user": {
      "login": "nathanielmanistaatgoogle",
      "id": 10131044,
      "node_id": "MDQ6VXNlcjEwMTMxMDQ0",
      "avatar_url": "https://avatars0.githubusercontent.com/u/10131044?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nathanielmanistaatgoogle",
      "html_url": "https://github.com/nathanielmanistaatgoogle",
      "followers_url": "https://api.github.com/users/nathanielmanistaatgoogle/followers",
      "following_url": "https://api.github.com/users/nathanielmanistaatgoogle/following{/other_user}",
      "gists_url": "https://api.github.com/users/nathanielmanistaatgoogle/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nathanielmanistaatgoogle/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nathanielmanistaatgoogle/subscriptions",
      "organizations_url": "https://api.github.com/users/nathanielmanistaatgoogle/orgs",
      "repos_url": "https://api.github.com/users/nathanielmanistaatgoogle/repos",
      "events_url": "https://api.github.com/users/nathanielmanistaatgoogle/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nathanielmanistaatgoogle/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-17T18:42:21Z",
    "updated_at": "2018-01-17T18:42:21Z",
    "author_association": "MEMBER",
    "body": "@t00n: are you able to run with `GRPC_TRACE=all` and `GRPC_VERBOSITY=debug`? Does anything interesting leap out of the output generated by running with those?"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/358415223",
    "html_url": "https://github.com/grpc/grpc/issues/13327#issuecomment-358415223",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13327",
    "id": 358415223,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1ODQxNTIyMw==",
    "user": {
      "login": "mehrdada",
      "id": 900411,
      "node_id": "MDQ6VXNlcjkwMDQxMQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/900411?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mehrdada",
      "html_url": "https://github.com/mehrdada",
      "followers_url": "https://api.github.com/users/mehrdada/followers",
      "following_url": "https://api.github.com/users/mehrdada/following{/other_user}",
      "gists_url": "https://api.github.com/users/mehrdada/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mehrdada/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mehrdada/subscriptions",
      "organizations_url": "https://api.github.com/users/mehrdada/orgs",
      "repos_url": "https://api.github.com/users/mehrdada/repos",
      "events_url": "https://api.github.com/users/mehrdada/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mehrdada/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-17T19:27:31Z",
    "updated_at": "2018-01-19T16:42:58Z",
    "author_association": "CONTRIBUTOR",
    "body": "Can anyone try reproducing this with 1.8.4? There was a bugfix that went in 1.8.4 that might have resolved this.\r\n\r\n(two related issues filed about segfault, not in Python, but core, that might be related (or not), just to keep them accessible: https://github.com/grpc/grpc/issues/14001 https://github.com/grpc/grpc/issues/14040)"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/360080559",
    "html_url": "https://github.com/grpc/grpc/issues/13327#issuecomment-360080559",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13327",
    "id": 360080559,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MDA4MDU1OQ==",
    "user": {
      "login": "subhayu89",
      "id": 13068506,
      "node_id": "MDQ6VXNlcjEzMDY4NTA2",
      "avatar_url": "https://avatars2.githubusercontent.com/u/13068506?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/subhayu89",
      "html_url": "https://github.com/subhayu89",
      "followers_url": "https://api.github.com/users/subhayu89/followers",
      "following_url": "https://api.github.com/users/subhayu89/following{/other_user}",
      "gists_url": "https://api.github.com/users/subhayu89/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/subhayu89/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/subhayu89/subscriptions",
      "organizations_url": "https://api.github.com/users/subhayu89/orgs",
      "repos_url": "https://api.github.com/users/subhayu89/repos",
      "events_url": "https://api.github.com/users/subhayu89/events{/privacy}",
      "received_events_url": "https://api.github.com/users/subhayu89/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-24T10:02:19Z",
    "updated_at": "2018-01-24T10:02:19Z",
    "author_association": "NONE",
    "body": "Is there any update?In the issue #14040 also I am using multiple threads ...and call gets blocked and immediate core dump in arch64 linux while the same code runs fine in x86 arch.."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/360106166",
    "html_url": "https://github.com/grpc/grpc/issues/13327#issuecomment-360106166",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13327",
    "id": 360106166,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MDEwNjE2Ng==",
    "user": {
      "login": "t00n",
      "id": 1850295,
      "node_id": "MDQ6VXNlcjE4NTAyOTU=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1850295?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/t00n",
      "html_url": "https://github.com/t00n",
      "followers_url": "https://api.github.com/users/t00n/followers",
      "following_url": "https://api.github.com/users/t00n/following{/other_user}",
      "gists_url": "https://api.github.com/users/t00n/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/t00n/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/t00n/subscriptions",
      "organizations_url": "https://api.github.com/users/t00n/orgs",
      "repos_url": "https://api.github.com/users/t00n/repos",
      "events_url": "https://api.github.com/users/t00n/events{/privacy}",
      "received_events_url": "https://api.github.com/users/t00n/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-24T11:46:06Z",
    "updated_at": "2018-01-24T11:46:58Z",
    "author_association": "NONE",
    "body": "@nathanielmanistaatgoogle I managed to reduce the code to this \r\n```python\r\nfrom google.cloud import pubsub, datastore\r\n\r\nsubscriber_client = pubsub.SubscriberClient()\r\ndatastore_client = datastore.Client(project='my-project')\r\n\r\n\r\ndef consume(message):\r\n    key = datastore_client.key('Test', 1)\r\n    entity = datastore.Entity(key)\r\n    datastore_client.put(entity)\r\n\r\n\r\nsubscription = subscriber_client.subscription_path(\"my-project\", \"testsegfault\")\r\nsubscriber_client.subscribe(subscription, consume)\r\n\r\nwhile True:\r\n    pass\r\n```\r\nIt needs authentication to access the PubSub and to push entities in the Datastore. If I remove any of those 2, it does not segfault anymore.\r\n\r\nWrite operations in the Datastore are required.\r\n\r\nYou need a PubSub subscription containing ~100k unacked messages. I tried with 1000 and 10000 and it did not segfault.\r\nYou need an (empty) Datastore.\r\n\r\nI ran the script with `GRPC_TRACE=all GRPC_VERBOSITY=debug` but I don't know what to look for in the output. Any directions you can give me ?\r\n\r\nEDIT: I am using grpcio 1.8.4 and still having the bug"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/360200259",
    "html_url": "https://github.com/grpc/grpc/issues/13327#issuecomment-360200259",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13327",
    "id": 360200259,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MDIwMDI1OQ==",
    "user": {
      "login": "tcwalther",
      "id": 2840901,
      "node_id": "MDQ6VXNlcjI4NDA5MDE=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/2840901?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tcwalther",
      "html_url": "https://github.com/tcwalther",
      "followers_url": "https://api.github.com/users/tcwalther/followers",
      "following_url": "https://api.github.com/users/tcwalther/following{/other_user}",
      "gists_url": "https://api.github.com/users/tcwalther/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tcwalther/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tcwalther/subscriptions",
      "organizations_url": "https://api.github.com/users/tcwalther/orgs",
      "repos_url": "https://api.github.com/users/tcwalther/repos",
      "events_url": "https://api.github.com/users/tcwalther/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tcwalther/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-24T16:55:43Z",
    "updated_at": "2018-01-24T16:55:43Z",
    "author_association": "NONE",
    "body": "I've just run into this issue myself. It does seem to be a multithreading issue. This happens to me when enqueuing too many futures in PubSub.\r\n\r\nRunning the script in GDB shows that *lots* of new threads start and quit. Here's the last few lines before the crash:\r\n\r\n```gdb\r\n[New Thread 0x7ffe3b86b700 (LWP 4006)]\r\n[Thread 0x7ffe3b86b700 (LWP 4006) exited]\r\n[New Thread 0x7ffdb856e700 (LWP 4007)]\r\n[Thread 0x7ffdb856e700 (LWP 4007) exited]\r\n[New Thread 0x7ffe3b86b700 (LWP 4008)]\r\n[Thread 0x7ffe3b86b700 (LWP 4008) exited]\r\n[New Thread 0x7ffdb856e700 (LWP 4009)]\r\n[Thread 0x7ffdb856e700 (LWP 4009) exited]\r\n[New Thread 0x7ffe3b86b700 (LWP 4010)]\r\n[Thread 0x7ffe3b86b700 (LWP 4010) exited]\r\n[New Thread 0x7ffdb856e700 (LWP 4011)]\r\n[Thread 0x7ffdb856e700 (LWP 4011) exited]\r\n[New Thread 0x7ffe3b86b700 (LWP 4012)]\r\n[Thread 0x7ffe3b86b700 (LWP 4012) exited]\r\n[New Thread 0x7ffdb856e700 (LWP 4013)]\r\n[Thread 0x7ffdb856e700 (LWP 4013) exited]\r\n[New Thread 0x7ffe3b86b700 (LWP 4014)]\r\n[Thread 0x7ffe3b86b700 (LWP 4014) exited]\r\n[New Thread 0x7ffdb856e700 (LWP 4015)]\r\n[Thread 0x7ffdb856e700 (LWP 4015) exited]\r\n[New Thread 0x7ffe3b86b700 (LWP 4016)]\r\n[Thread 0x7ffe3b86b700 (LWP 4016) exited]\r\n[New Thread 0x7ffdb856e700 (LWP 4017)]\r\n[Thread 0x7ffdb856e700 (LWP 4017) exited]\r\n[New Thread 0x7ffe3b86b700 (LWP 4018)]\r\n[Thread 0x7ffe3b86b700 (LWP 4018) exited]\r\n[New Thread 0x7ffdb856e700 (LWP 4019)]\r\n[Thread 0x7ffdb856e700 (LWP 4019) exited]\r\n[New Thread 0x7ffe3b86b700 (LWP 4020)]\r\n[Thread 0x7ffe3b86b700 (LWP 4020) exited]\r\n[New Thread 0x7ffdb856e700 (LWP 4021)]\r\n[Thread 0x7ffdb856e700 (LWP 4021) exited]\r\n[New Thread 0x7ffe3b86b700 (LWP 4022)]\r\n[Thread 0x7ffe3b86b700 (LWP 4022) exited]\r\n\r\nProgram received signal SIGSEGV, Segmentation fault.\r\n[Switching to Thread 0x7fffcd2d6700 (LWP 1738)]\r\ngpr_ref_non_zero (r=0x0) at src/core/lib/support/sync.cc:93\r\n93      src/core/lib/support/sync.cc: No such file or directory.\r\n(gdb) bt\r\n#0  gpr_ref_non_zero (r=0x0) at src/core/lib/support/sync.cc:93\r\n#1  0x00007fffec112459 in grpc_connected_subchannel_ref (c=0x0)\r\n    at src/core/ext/filters/client_channel/subchannel.cc:169\r\n#2  0x00007fffec125562 in pf_pick_locked (exec_ctx=<optimized out>, pol=0x7ffd05281380, pick_args=<optimized out>,\r\n    target=0x7ffdb997e5b0, context=<optimized out>, user_data=<optimized out>, on_complete=0x7ffdb997e560)\r\n    at src/core/ext/filters/client_channel/lb_policy/pick_first/pick_first.cc:182\r\n#3  0x00007fffec10a796 in pick_callback_start_locked (exec_ctx=exec_ctx@entry=0x7fffcd2d4670,\r\n    elem=elem@entry=0x7ffdb997e430) at src/core/ext/filters/client_channel/client_channel.cc:1147\r\n#4  0x00007fffec10b472 in start_pick_locked (exec_ctx=0x7fffcd2d4670, arg=0x7ffdb997e430, ignored=<optimized out>)\r\n    at src/core/ext/filters/client_channel/client_channel.cc:1306\r\n#5  0x00007fffec09afc2 in grpc_combiner_continue_exec_ctx (exec_ctx=0x7fffcd2d4670)\r\n    at src/core/lib/iomgr/combiner.cc:260\r\n#6  0x00007fffec0a4982 in grpc_exec_ctx_flush (exec_ctx=0x7fffcd2d4670) at src/core/lib/iomgr/exec_ctx.cc:93\r\n#7  0x00007fffec0a5489 in run_closures (exec_ctx=0x7fffcd2d4670, list=...) at src/core/lib/iomgr/executor.cc:80\r\n#8  executor_thread (arg=arg@entry=0x7fffd8987800) at src/core/lib/iomgr/executor.cc:180\r\n#9  0x00007fffec08db37 in thread_body (v=<optimized out>) at src/core/lib/support/thd_posix.cc:53\r\n#10 0x00007ffff7752184 in start_thread (arg=0x7fffcd2d6700) at pthread_create.c:312\r\n#11 0x00007ffff747f03d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\r\n(gdb)\r\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/361449845",
    "html_url": "https://github.com/grpc/grpc/issues/13327#issuecomment-361449845",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13327",
    "id": 361449845,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MTQ0OTg0NQ==",
    "user": {
      "login": "mehrdada",
      "id": 900411,
      "node_id": "MDQ6VXNlcjkwMDQxMQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/900411?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mehrdada",
      "html_url": "https://github.com/mehrdada",
      "followers_url": "https://api.github.com/users/mehrdada/followers",
      "following_url": "https://api.github.com/users/mehrdada/following{/other_user}",
      "gists_url": "https://api.github.com/users/mehrdada/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mehrdada/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mehrdada/subscriptions",
      "organizations_url": "https://api.github.com/users/mehrdada/orgs",
      "repos_url": "https://api.github.com/users/mehrdada/repos",
      "events_url": "https://api.github.com/users/mehrdada/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mehrdada/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-30T01:49:49Z",
    "updated_at": "2018-01-30T01:50:46Z",
    "author_association": "CONTRIBUTOR",
    "body": "I just talked to the core team about this and they believe there has been vast changes to the refcount logic recently and they have strong suspicions that this bug is fixed in the 1.9.0 branch. I just pushed the 1.9.0rc3 to PyPI, so please let us know if you are still seeing it in that RC."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/361474218",
    "html_url": "https://github.com/grpc/grpc/issues/13327#issuecomment-361474218",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13327",
    "id": 361474218,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MTQ3NDIxOA==",
    "user": {
      "login": "subhayu89",
      "id": 13068506,
      "node_id": "MDQ6VXNlcjEzMDY4NTA2",
      "avatar_url": "https://avatars2.githubusercontent.com/u/13068506?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/subhayu89",
      "html_url": "https://github.com/subhayu89",
      "followers_url": "https://api.github.com/users/subhayu89/followers",
      "following_url": "https://api.github.com/users/subhayu89/following{/other_user}",
      "gists_url": "https://api.github.com/users/subhayu89/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/subhayu89/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/subhayu89/subscriptions",
      "organizations_url": "https://api.github.com/users/subhayu89/orgs",
      "repos_url": "https://api.github.com/users/subhayu89/repos",
      "events_url": "https://api.github.com/users/subhayu89/events{/privacy}",
      "received_events_url": "https://api.github.com/users/subhayu89/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-30T04:31:35Z",
    "updated_at": "2018-01-30T04:31:35Z",
    "author_association": "NONE",
    "body": "Is the same done for C++ also?"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/361479107",
    "html_url": "https://github.com/grpc/grpc/issues/13327#issuecomment-361479107",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13327",
    "id": 361479107,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MTQ3OTEwNw==",
    "user": {
      "login": "mehrdada",
      "id": 900411,
      "node_id": "MDQ6VXNlcjkwMDQxMQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/900411?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mehrdada",
      "html_url": "https://github.com/mehrdada",
      "followers_url": "https://api.github.com/users/mehrdada/followers",
      "following_url": "https://api.github.com/users/mehrdada/following{/other_user}",
      "gists_url": "https://api.github.com/users/mehrdada/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mehrdada/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mehrdada/subscriptions",
      "organizations_url": "https://api.github.com/users/mehrdada/orgs",
      "repos_url": "https://api.github.com/users/mehrdada/repos",
      "events_url": "https://api.github.com/users/mehrdada/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mehrdada/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-30T05:10:36Z",
    "updated_at": "2018-01-30T05:10:49Z",
    "author_association": "CONTRIBUTOR",
    "body": "@subhayu89 Yes, the changes are in C core and that layer is shared across languages (except Java and Go)."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/361510380",
    "html_url": "https://github.com/grpc/grpc/issues/13327#issuecomment-361510380",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13327",
    "id": 361510380,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MTUxMDM4MA==",
    "user": {
      "login": "krelst",
      "id": 4048504,
      "node_id": "MDQ6VXNlcjQwNDg1MDQ=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/4048504?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/krelst",
      "html_url": "https://github.com/krelst",
      "followers_url": "https://api.github.com/users/krelst/followers",
      "following_url": "https://api.github.com/users/krelst/following{/other_user}",
      "gists_url": "https://api.github.com/users/krelst/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/krelst/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/krelst/subscriptions",
      "organizations_url": "https://api.github.com/users/krelst/orgs",
      "repos_url": "https://api.github.com/users/krelst/repos",
      "events_url": "https://api.github.com/users/krelst/events{/privacy}",
      "received_events_url": "https://api.github.com/users/krelst/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-30T08:19:54Z",
    "updated_at": "2018-01-30T08:19:54Z",
    "author_association": "NONE",
    "body": "Hi @mehrdada, I tried to use the `grpcio==1.9.0rc3` package but am still seeing the same segmentation fault. Our script is run inside a docker debian jessie container, on gcloud kubernetes engine, with the following python environment:\r\n```\r\narrow==0.12.0\r\nasn1crypto==0.24.0\r\nbackports.functools-lru-cache==1.2.1\r\ncachetools==2.0.1\r\ncertifi==2017.11.5\r\ncffi==1.11.2\r\nchardet==3.0.4\r\ncontextlib2==0.5.5\r\ncryptography==2.1.4\r\ndill==0.2.7.1\r\nenum34==1.1.6\r\nfuncsigs==1.0.2\r\nfuture==0.16.0\r\nfutures==3.2.0\r\ngapic-google-cloud-logging-v2==0.91.3\r\ngoogle-api-core==0.1.3\r\ngoogle-api-python-client==1.6.4\r\ngoogle-auth==1.2.1\r\ngoogle-auth-httplib2==0.0.3\r\ngoogle-cloud-bigquery==0.28.0\r\ngoogle-cloud-bigtable==0.28.0\r\ngoogle-cloud-core==0.28.0\r\ngoogle-cloud-logging==1.4.0\r\ngoogle-cloud-pubsub==0.30.0\r\ngoogle-cloud-storage==1.6.0\r\ngoogle-gax==0.15.16\r\ngoogle-resumable-media==0.3.1\r\ngoogleapis-common-protos==1.5.3\r\ngrpc-google-iam-v1==0.11.4\r\ngrpcio==1.9.0rc3\r\nhttplib2==0.10.3\r\nidna==2.6\r\nipaddress==1.0.19\r\nmock==2.0.0\r\nnamedlist==1.7\r\nnose2==0.6.5\r\noauth2client==3.0.0\r\noi-db-config==1.8\r\noi-vault==1.2.4\r\npbr==3.1.1\r\nply==3.8\r\nproto-google-cloud-logging-v2==0.91.3\r\nprotobuf==3.5.0.post1\r\npsutil==5.4.3\r\npyasn1==0.4.2\r\npyasn1-modules==0.2.1\r\npycountry==17.9.23\r\npycparser==2.18\r\nPyMySQL==0.6.7\r\npython-dateutil==2.6.1\r\npytz==2017.3\r\nraven==6.2.1\r\nrequests==2.18.4\r\nretrying==1.3.3\r\nrsa==3.4.2\r\nsix==1.11.0\r\nuritemplate==3.0.0\r\nurllib3==1.22\r\n```\r\nIn our script we both pull and push from/to pub/sub, write to bigtable and bigquery. So we have multiple different gcloud clients running at the same time, which might be of interest looking at @t00n's example script."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/361551245",
    "html_url": "https://github.com/grpc/grpc/issues/13327#issuecomment-361551245",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13327",
    "id": 361551245,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MTU1MTI0NQ==",
    "user": {
      "login": "subhayu89",
      "id": 13068506,
      "node_id": "MDQ6VXNlcjEzMDY4NTA2",
      "avatar_url": "https://avatars2.githubusercontent.com/u/13068506?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/subhayu89",
      "html_url": "https://github.com/subhayu89",
      "followers_url": "https://api.github.com/users/subhayu89/followers",
      "following_url": "https://api.github.com/users/subhayu89/following{/other_user}",
      "gists_url": "https://api.github.com/users/subhayu89/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/subhayu89/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/subhayu89/subscriptions",
      "organizations_url": "https://api.github.com/users/subhayu89/orgs",
      "repos_url": "https://api.github.com/users/subhayu89/repos",
      "events_url": "https://api.github.com/users/subhayu89/events{/privacy}",
      "received_events_url": "https://api.github.com/users/subhayu89/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-30T10:32:55Z",
    "updated_at": "2018-01-30T10:32:55Z",
    "author_association": "NONE",
    "body": "I0130 16:00:54.914150633   21085 ev_epoll1_linux.cc:114]     grpc epoll fd: 6\r\nD0130 16:00:54.914242217   21085 ev_posix.cc:128]            Using polling engine: epoll1\r\nD0130 16:00:54.914360617   21085 dns_resolver.cc:294]        Using native dns resolver\r\nSegmentation fault (core dumped)\r\n\r\nStill facing the same issue with v1.9.0 rc3 as well"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/361698094",
    "html_url": "https://github.com/grpc/grpc/issues/13327#issuecomment-361698094",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13327",
    "id": 361698094,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MTY5ODA5NA==",
    "user": {
      "login": "mehrdada",
      "id": 900411,
      "node_id": "MDQ6VXNlcjkwMDQxMQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/900411?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mehrdada",
      "html_url": "https://github.com/mehrdada",
      "followers_url": "https://api.github.com/users/mehrdada/followers",
      "following_url": "https://api.github.com/users/mehrdada/following{/other_user}",
      "gists_url": "https://api.github.com/users/mehrdada/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mehrdada/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mehrdada/subscriptions",
      "organizations_url": "https://api.github.com/users/mehrdada/orgs",
      "repos_url": "https://api.github.com/users/mehrdada/repos",
      "events_url": "https://api.github.com/users/mehrdada/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mehrdada/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-30T18:59:57Z",
    "updated_at": "2018-01-30T18:59:57Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thanks, I have managed to create a new pubsub and datastore setup and repro this issue."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/361775167",
    "html_url": "https://github.com/grpc/grpc/issues/13327#issuecomment-361775167",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13327",
    "id": 361775167,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MTc3NTE2Nw==",
    "user": {
      "login": "mehrdada",
      "id": 900411,
      "node_id": "MDQ6VXNlcjkwMDQxMQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/900411?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mehrdada",
      "html_url": "https://github.com/mehrdada",
      "followers_url": "https://api.github.com/users/mehrdada/followers",
      "following_url": "https://api.github.com/users/mehrdada/following{/other_user}",
      "gists_url": "https://api.github.com/users/mehrdada/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mehrdada/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mehrdada/subscriptions",
      "organizations_url": "https://api.github.com/users/mehrdada/orgs",
      "repos_url": "https://api.github.com/users/mehrdada/repos",
      "events_url": "https://api.github.com/users/mehrdada/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mehrdada/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-30T23:53:23Z",
    "updated_at": "2018-01-30T23:53:31Z",
    "author_association": "CONTRIBUTOR",
    "body": "```\r\nimport time\r\nfrom concurrent import futures\r\nfrom google.cloud import datastore\r\n\r\ndatastore_client = datastore.Client(project='grpc-testing')\r\n\r\ndef consume(message):\r\n  key = datastore_client.key('mmx-repro-13327-datastore-kind', 1)\r\n  entity = datastore.Entity(key)\r\n  datastore_client.put(entity)\r\n\r\nwith futures.ThreadPoolExecutor(max_workers=20) as executor:\r\n  for i in range(1,100000):\r\n    executor.submit(consume, i)\r\n\r\nwhile True:\r\n  time.sleep(60)\r\n\r\n```\r\n\r\nSo far I have managed to eliminate the dependency on pubsub by replacing it with a thread pool. Does anyone happen to know if there's an older version of gRPC which they can't reproduce this on?"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/361819401",
    "html_url": "https://github.com/grpc/grpc/issues/13327#issuecomment-361819401",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13327",
    "id": 361819401,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MTgxOTQwMQ==",
    "user": {
      "login": "subhayu89",
      "id": 13068506,
      "node_id": "MDQ6VXNlcjEzMDY4NTA2",
      "avatar_url": "https://avatars2.githubusercontent.com/u/13068506?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/subhayu89",
      "html_url": "https://github.com/subhayu89",
      "followers_url": "https://api.github.com/users/subhayu89/followers",
      "following_url": "https://api.github.com/users/subhayu89/following{/other_user}",
      "gists_url": "https://api.github.com/users/subhayu89/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/subhayu89/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/subhayu89/subscriptions",
      "organizations_url": "https://api.github.com/users/subhayu89/orgs",
      "repos_url": "https://api.github.com/users/subhayu89/repos",
      "events_url": "https://api.github.com/users/subhayu89/events{/privacy}",
      "received_events_url": "https://api.github.com/users/subhayu89/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-31T04:21:10Z",
    "updated_at": "2018-01-31T04:21:10Z",
    "author_association": "NONE",
    "body": "Yes with v1.6.0, v.1.7.1,v1.8.4 also crashes for C++"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/361820599",
    "html_url": "https://github.com/grpc/grpc/issues/13327#issuecomment-361820599",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13327",
    "id": 361820599,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MTgyMDU5OQ==",
    "user": {
      "login": "mehrdada",
      "id": 900411,
      "node_id": "MDQ6VXNlcjkwMDQxMQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/900411?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mehrdada",
      "html_url": "https://github.com/mehrdada",
      "followers_url": "https://api.github.com/users/mehrdada/followers",
      "following_url": "https://api.github.com/users/mehrdada/following{/other_user}",
      "gists_url": "https://api.github.com/users/mehrdada/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mehrdada/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mehrdada/subscriptions",
      "organizations_url": "https://api.github.com/users/mehrdada/orgs",
      "repos_url": "https://api.github.com/users/mehrdada/repos",
      "events_url": "https://api.github.com/users/mehrdada/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mehrdada/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-31T04:30:50Z",
    "updated_at": "2018-01-31T04:30:50Z",
    "author_association": "CONTRIBUTOR",
    "body": "Do you have a C++ repro?! That would be really helpful!"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/361851722",
    "html_url": "https://github.com/grpc/grpc/issues/13327#issuecomment-361851722",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13327",
    "id": 361851722,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MTg1MTcyMg==",
    "user": {
      "login": "subhayu89",
      "id": 13068506,
      "node_id": "MDQ6VXNlcjEzMDY4NTA2",
      "avatar_url": "https://avatars2.githubusercontent.com/u/13068506?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/subhayu89",
      "html_url": "https://github.com/subhayu89",
      "followers_url": "https://api.github.com/users/subhayu89/followers",
      "following_url": "https://api.github.com/users/subhayu89/following{/other_user}",
      "gists_url": "https://api.github.com/users/subhayu89/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/subhayu89/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/subhayu89/subscriptions",
      "organizations_url": "https://api.github.com/users/subhayu89/orgs",
      "repos_url": "https://api.github.com/users/subhayu89/repos",
      "events_url": "https://api.github.com/users/subhayu89/events{/privacy}",
      "received_events_url": "https://api.github.com/users/subhayu89/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-31T07:52:53Z",
    "updated_at": "2018-01-31T08:04:30Z",
    "author_association": "NONE",
    "body": "**version \r\nv1.9.0cr3**\r\n\r\n**grpc logs**\r\nI0130 16:00:54.914150633 21085 ev_epoll1_linux.cc:114] grpc epoll fd: 6\r\nD0130 16:00:54.914242217 21085 ev_posix.cc:128] Using polling engine: epoll1\r\nD0130 16:00:54.914360617 21085 dns_resolver.cc:294] Using native dns resolver\r\n\r\n**gdb** \r\n#0  0x0000007fa19273b8 in gpr_unref () from /usr/local/lib/libgrpc.so.5\r\nNo symbol table info available.\r\n#1  0x0000007fa18ce80c in grpc_cq_internal_unref(grpc_completion_queue*) ()\r\n   from /usr/local/lib/libgrpc.so.5\r\nNo symbol table info available.\r\n#2  0x0000007fa18b3508 in grpc_core::ExecCtx::Flush() ()\r\n   from /usr/local/lib/libgrpc.so.5\r\nNo symbol table info available.\r\n#3  0x0000007fa18cf79c in grpc_completion_queue_shutdown ()\r\n   from /usr/local/lib/libgrpc.so.5\r\nNo symbol table info available.\r\n#4  0x0000007fa18cf84c in grpc_completion_queue_destroy ()\r\n   from /usr/local/lib/libgrpc.so.5\r\nNo symbol table info available.\r\n#5  0x00000000007f1f80 in grpc::CompletionQueue::~CompletionQueue() ()\r\nNo symbol table info available.\r\n#6  0x000000000083049c in grpc::internal::BlockingUnaryCallImpl<cc::rpc::StatusInfoNotification, cc::rpc::StatusInfoResponse>::BlockingUnaryCallImpl(grpc::ChannelInterface*, grpc::internal::RpcMethod const&, grpc::ClientContext*, cc::rpc::StatusInfoNotification const&, cc::rpc::StatusInfoResponse*) ()\r\nNo symbol table info available.\r\n#7  0x000000000082f5b0 in grpc::Status grpc::internal::BlockingUnaryCall<cc::rpc::StatusInfoNotification, cc::rpc::StatusInfoResponse>(grpc::ChannelInterface*, ---Type <return> to continue, or q <return> to quit---\r\ngrpc::internal::RpcMethod const&, grpc::ClientContext*, cc::rpc::StatusInfoNotification const&, cc::rpc::StatusInfoResponse*) ()\r\nNo symbol table info available.\r\n#8  0x000000000082e9b0 in cc::rpc::CCStatusInfo::Stub::SendStatusInfo(grpc::ClientContext*, cc::rpc::StatusInfoNotification const&, cc::rpc::StatusInfoResponse*) ()\r\n\r\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/361851820",
    "html_url": "https://github.com/grpc/grpc/issues/13327#issuecomment-361851820",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13327",
    "id": 361851820,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MTg1MTgyMA==",
    "user": {
      "login": "subhayu89",
      "id": 13068506,
      "node_id": "MDQ6VXNlcjEzMDY4NTA2",
      "avatar_url": "https://avatars2.githubusercontent.com/u/13068506?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/subhayu89",
      "html_url": "https://github.com/subhayu89",
      "followers_url": "https://api.github.com/users/subhayu89/followers",
      "following_url": "https://api.github.com/users/subhayu89/following{/other_user}",
      "gists_url": "https://api.github.com/users/subhayu89/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/subhayu89/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/subhayu89/subscriptions",
      "organizations_url": "https://api.github.com/users/subhayu89/orgs",
      "repos_url": "https://api.github.com/users/subhayu89/repos",
      "events_url": "https://api.github.com/users/subhayu89/events{/privacy}",
      "received_events_url": "https://api.github.com/users/subhayu89/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-31T07:53:20Z",
    "updated_at": "2018-01-31T07:53:20Z",
    "author_association": "NONE",
    "body": "for java and go is it not reproducible?\r\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/361926636",
    "html_url": "https://github.com/grpc/grpc/issues/13327#issuecomment-361926636",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13327",
    "id": 361926636,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MTkyNjYzNg==",
    "user": {
      "login": "mehrdada",
      "id": 900411,
      "node_id": "MDQ6VXNlcjkwMDQxMQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/900411?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mehrdada",
      "html_url": "https://github.com/mehrdada",
      "followers_url": "https://api.github.com/users/mehrdada/followers",
      "following_url": "https://api.github.com/users/mehrdada/following{/other_user}",
      "gists_url": "https://api.github.com/users/mehrdada/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mehrdada/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mehrdada/subscriptions",
      "organizations_url": "https://api.github.com/users/mehrdada/orgs",
      "repos_url": "https://api.github.com/users/mehrdada/repos",
      "events_url": "https://api.github.com/users/mehrdada/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mehrdada/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-31T13:07:11Z",
    "updated_at": "2018-01-31T13:07:11Z",
    "author_association": "CONTRIBUTOR",
    "body": "@subhayu89 I am confused--I think you are talking about the other issue you filed? I don't think it's the same issue at all. Let's keep the discussions in this thread centered on the original post's issue. \r\nJava and Go are implemented in stacks written in their own language. They are completely separate implementations, unlike Python."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/361927614",
    "html_url": "https://github.com/grpc/grpc/issues/13327#issuecomment-361927614",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13327",
    "id": 361927614,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MTkyNzYxNA==",
    "user": {
      "login": "subhayu89",
      "id": 13068506,
      "node_id": "MDQ6VXNlcjEzMDY4NTA2",
      "avatar_url": "https://avatars2.githubusercontent.com/u/13068506?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/subhayu89",
      "html_url": "https://github.com/subhayu89",
      "followers_url": "https://api.github.com/users/subhayu89/followers",
      "following_url": "https://api.github.com/users/subhayu89/following{/other_user}",
      "gists_url": "https://api.github.com/users/subhayu89/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/subhayu89/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/subhayu89/subscriptions",
      "organizations_url": "https://api.github.com/users/subhayu89/orgs",
      "repos_url": "https://api.github.com/users/subhayu89/repos",
      "events_url": "https://api.github.com/users/subhayu89/events{/privacy}",
      "received_events_url": "https://api.github.com/users/subhayu89/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-31T13:11:20Z",
    "updated_at": "2018-01-31T13:11:20Z",
    "author_association": "NONE",
    "body": "ok lets keep discussions separate but refcount issue I am getting with c++ also @mehrdada ...and since you referenced it to this issue i replied...anyways lets not discuss on this issue apart from python..thanks for your reply anyways"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/361929380",
    "html_url": "https://github.com/grpc/grpc/issues/13327#issuecomment-361929380",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13327",
    "id": 361929380,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MTkyOTM4MA==",
    "user": {
      "login": "mehrdada",
      "id": 900411,
      "node_id": "MDQ6VXNlcjkwMDQxMQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/900411?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mehrdada",
      "html_url": "https://github.com/mehrdada",
      "followers_url": "https://api.github.com/users/mehrdada/followers",
      "following_url": "https://api.github.com/users/mehrdada/following{/other_user}",
      "gists_url": "https://api.github.com/users/mehrdada/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mehrdada/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mehrdada/subscriptions",
      "organizations_url": "https://api.github.com/users/mehrdada/orgs",
      "repos_url": "https://api.github.com/users/mehrdada/repos",
      "events_url": "https://api.github.com/users/mehrdada/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mehrdada/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-31T13:18:26Z",
    "updated_at": "2018-01-31T13:18:26Z",
    "author_association": "CONTRIBUTOR",
    "body": "@subhayu89 Sorry for the confusion. To be clear, if there is a C++ bug with the same symptom (segfault in client_auth_filter.cc), please do bring it up it here."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/362662368",
    "html_url": "https://github.com/grpc/grpc/issues/13327#issuecomment-362662368",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/13327",
    "id": 362662368,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MjY2MjM2OA==",
    "user": {
      "login": "kpayson64",
      "id": 18316330,
      "node_id": "MDQ6VXNlcjE4MzE2MzMw",
      "avatar_url": "https://avatars2.githubusercontent.com/u/18316330?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kpayson64",
      "html_url": "https://github.com/kpayson64",
      "followers_url": "https://api.github.com/users/kpayson64/followers",
      "following_url": "https://api.github.com/users/kpayson64/following{/other_user}",
      "gists_url": "https://api.github.com/users/kpayson64/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kpayson64/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kpayson64/subscriptions",
      "organizations_url": "https://api.github.com/users/kpayson64/orgs",
      "repos_url": "https://api.github.com/users/kpayson64/repos",
      "events_url": "https://api.github.com/users/kpayson64/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kpayson64/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-02T18:14:38Z",
    "updated_at": "2018-02-02T18:14:38Z",
    "author_association": "CONTRIBUTOR",
    "body": "Here are some valgrind outputs:\r\n\r\n```\r\n==148285== \r\n==148285== Thread 7 gpr_executor:\r\n==148285== Invalid read of size 8\r\n==148285==    at 0xC1B1502: plugin_get_request_metadata(grpc_call_credentials*, grpc_polling_entity*, grpc_auth_metadata_context, grpc_credentials_mdelem_array*, grpc_closure*, grpc_error**) (plugin_credentials.cc:201)\r\n==148285==    by 0xC1B305B: send_security_metadata (client_auth_filter.cc:197)\r\n==148285==    by 0xC1B305B: on_host_checked(void*, grpc_error*) (client_auth_filter.cc:221)\r\n==148285==    by 0xC1B3709: auth_start_transport_stream_op_batch(grpc_call_element*, grpc_transport_stream_op_batch*) (client_auth_filter.cc:306)\r\n==148285==    by 0xC1C122C: waiting_for_pick_batches_resume (client_channel.cc:965)\r\n==148285==    by 0xC1C122C: create_subchannel_call_locked (client_channel.cc:1028)\r\n==148285==    by 0xC1C122C: pick_done_locked(grpc_call_element*, grpc_error*) (client_channel.cc:1053)\r\n==148285==    by 0xC154593: grpc_combiner_continue_exec_ctx() (combiner.cc:261)\r\n==148285==    by 0xC161A8E: grpc_core::ExecCtx::Flush() (exec_ctx.cc:128)\r\n==148285==    by 0xC161B5D: run_closures(grpc_closure_list) [clone .isra.5] (executor.cc:80)\r\n==148285==    by 0xC161CFA: executor_thread(void*) (executor.cc:177)\r\n==148285==    by 0xC148D19: thread_body(void*) (thd_posix.cc:67)\r\n==148285==    by 0x4E3F183: start_thread (pthread_create.c:312)\r\n==148285==    by 0x515303C: clone (clone.S:111)\r\n==148285==  Address 0x1b176dc0 is 4,288 bytes inside a block of size 21,047 free'd\r\n==148285==    at 0x4C2BDEC: free (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\r\n==148285==    by 0xC1455FF: gpr_arena_destroy(gpr_arena*) (arena.cc:64)\r\n==148285==    by 0xC17879D: release_call(void*, grpc_error*) (call.cc:508)\r\n==148285==    by 0xC16186E: exec_ctx_run(grpc_closure*, grpc_error*) (exec_ctx.cc:38)\r\n==148285==    by 0xC161A76: grpc_core::ExecCtx::Flush() (exec_ctx.cc:125)\r\n==148285==    by 0xC17C47A: ~ExecCtx (exec_ctx.h:85)\r\n==148285==    by 0xC17C47A: grpc_call_unref (call.cc:598)\r\n==148285==    by 0xC110906: __pyx_pf_4grpc_7_cython_6cygrpc_4Call_14__dealloc__ (cygrpc.c:6169)\r\n==148285==    by 0xC110906: __pyx_pw_4grpc_7_cython_6cygrpc_4Call_15__dealloc__ (cygrpc.c:6141)\r\n==148285==    by 0xC110906: __pyx_tp_dealloc_4grpc_7_cython_6cygrpc_Call (cygrpc.c:29590)\r\n==148285==    by 0x5274C4: ??? (in /usr/local/google/home/kpayson/grpc/py34/bin/python3.4)\r\n==148285==    by 0x55FA14: ??? (in /usr/local/google/home/kpayson/grpc/py34/bin/python3.4)\r\n==148285==    by 0x4C2EBC: ??? (in /usr/local/google/home/kpayson/grpc/py34/bin/python3.4)\r\n==148285==    by 0x50B7F9: PyObject_Call (in /usr/local/google/home/kpayson/grpc/py34/bin/python3.4)\r\n==148285==    by 0x4B1EB9: ??? (in /usr/local/google/home/kpayson/grpc/py34/bin/python3.4)\r\n==148285== \r\n==148285== Invalid read of size 8\r\n==148285==    at 0xC1B3064: send_security_metadata (client_auth_filter.cc:204)\r\n==148285==    by 0xC1B3064: on_host_checked(void*, grpc_error*) (client_auth_filter.cc:221)\r\n==148285==    by 0xC1B3709: auth_start_transport_stream_op_batch(grpc_call_element*, grpc_transport_stream_op_batch*) (client_auth_filter.cc:306)\r\n==148285==    by 0xC1C122C: waiting_for_pick_batches_resume (client_channel.cc:965)\r\n==148285==    by 0xC1C122C: create_subchannel_call_locked (client_channel.cc:1028)\r\n==148285==    by 0xC1C122C: pick_done_locked(grpc_call_element*, grpc_error*) (client_channel.cc:1053)\r\n==148285==    by 0xC154593: grpc_combiner_continue_exec_ctx() (combiner.cc:261)\r\n==148285==    by 0xC161A8E: grpc_core::ExecCtx::Flush() (exec_ctx.cc:128)\r\n==148285==    by 0xC161B5D: run_closures(grpc_closure_list) [clone .isra.5] (executor.cc:80)\r\n==148285==    by 0xC161CFA: executor_thread(void*) (executor.cc:177)\r\n==148285==    by 0xC148D19: thread_body(void*) (thd_posix.cc:67)\r\n==148285==    by 0x4E3F183: start_thread (pthread_create.c:312)\r\n==148285==    by 0x515303C: clone (clone.S:111)\r\n==148285==  Address 0x1b176dc0 is 4,288 bytes inside a block of size 21,047 free'd\r\n==148285==    at 0x4C2BDEC: free (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\r\n==148285==    by 0xC1455FF: gpr_arena_destroy(gpr_arena*) (arena.cc:64)\r\n==148285==    by 0xC17879D: release_call(void*, grpc_error*) (call.cc:508)\r\n==148285==    by 0xC16186E: exec_ctx_run(grpc_closure*, grpc_error*) (exec_ctx.cc:38)\r\n==148285==    by 0xC161A76: grpc_core::ExecCtx::Flush() (exec_ctx.cc:125)\r\n==148285==    by 0xC17C47A: ~ExecCtx (exec_ctx.h:85)\r\n==148285==    by 0xC17C47A: grpc_call_unref (call.cc:598)\r\n==148285==    by 0xC110906: __pyx_pf_4grpc_7_cython_6cygrpc_4Call_14__dealloc__ (cygrpc.c:6169)\r\n==148285==    by 0xC110906: __pyx_pw_4grpc_7_cython_6cygrpc_4Call_15__dealloc__ (cygrpc.c:6141)\r\n==148285==    by 0xC110906: __pyx_tp_dealloc_4grpc_7_cython_6cygrpc_Call (cygrpc.c:29590)\r\n==148285==    by 0x5274C4: ??? (in /usr/local/google/home/kpayson/grpc/py34/bin/python3.4)\r\n==148285==    by 0x55FA14: ??? (in /usr/local/google/home/kpayson/grpc/py34/bin/python3.4)\r\n==148285==    by 0x4C2EBC: ??? (in /usr/local/google/home/kpayson/grpc/py34/bin/python3.4)\r\n==148285==    by 0x50B7F9: PyObject_Call (in /usr/local/google/home/kpayson/grpc/py34/bin/python3.4)\r\n==148285==    by 0x4B1EB9: ??? (in /usr/local/google/home/kpayson/grpc/py34/bin/python3.4)\r\n\r\n=188462== \r\n==188462== Thread 3 grpc_executor:\r\n==188462== Invalid read of size 8\r\n==188462==    at 0xC1B1502: plugin_get_request_metadata(grpc_call_credentials*, grpc_polling_entity*, grpc_auth_metadata_context, grpc_credentials_mdelem_array*, grpc_closure*, grpc_error**) (plugin_credentials.cc:201)\r\n==188462==    by 0xC1B305B: send_security_metadata (client_auth_filter.cc:197)\r\n==188462==    by 0xC1B305B: on_host_checked(void*, grpc_error*) (client_auth_filter.cc:221)\r\n==188462==    by 0xC1B3709: auth_start_transport_stream_op_batch(grpc_call_element*, grpc_transport_stream_op_batch*) (client_auth_filter.cc:306)\r\n==188462==    by 0xC1C11EC: waiting_for_pick_batches_resume (client_channel.cc:965)\r\n==188462==    by 0xC1C11EC: create_subchannel_call_locked (client_channel.cc:1025)\r\n==188462==    by 0xC1C11EC: pick_done_locked(grpc_call_element*, grpc_error*) (client_channel.cc:1050)\r\n==188462==    by 0xC154593: grpc_combiner_continue_exec_ctx() (combiner.cc:261)\r\n==188462==    by 0xC161A8E: grpc_core::ExecCtx::Flush() (exec_ctx.cc:128)\r\n==188462==    by 0xC161B5D: run_closures(grpc_closure_list) [clone .isra.5] (executor.cc:80)\r\n==188462==    by 0xC161CFA: executor_thread(void*) (executor.cc:177)\r\n==188462==    by 0xC148D19: thread_body(void*) (thd_posix.cc:67)\r\n==188462==    by 0x4E3F183: start_thread (pthread_create.c:312)\r\n==188462==    by 0x515303C: clone (clone.S:111)\r\n==188462==  Address 0x2cf52e50 is 4,384 bytes inside a block of size 20,535 free'd\r\n==188462==    at 0x4C2BDEC: free (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\r\n==188462==    by 0xC1455FF: gpr_arena_destroy(gpr_arena*) (arena.cc:64)\r\n==188462==    by 0xC17879D: release_call(void*, grpc_error*) (call.cc:508)\r\n==188462==    by 0xC16186E: exec_ctx_run(grpc_closure*, grpc_error*) (exec_ctx.cc:38)\r\n==188462==    by 0xC161A76: grpc_core::ExecCtx::Flush() (exec_ctx.cc:125)\r\n==188462==    by 0xC17C47A: ~ExecCtx (exec_ctx.h:85)\r\n==188462==    by 0xC17C47A: grpc_call_unref (call.cc:598)\r\n==188462==    by 0xC110906: __pyx_pf_4grpc_7_cython_6cygrpc_4Call_14__dealloc__ (cygrpc.c:6169)\r\n==188462==    by 0xC110906: __pyx_pw_4grpc_7_cython_6cygrpc_4Call_15__dealloc__ (cygrpc.c:6141)\r\n==188462==    by 0xC110906: __pyx_tp_dealloc_4grpc_7_cython_6cygrpc_Call (cygrpc.c:29590)\r\n==188462==    by 0x5274C4: ??? (in /usr/local/google/home/kpayson/grpc/py34/bin/python3.4)\r\n==188462==    by 0x55FA14: ??? (in /usr/local/google/home/kpayson/grpc/py34/bin/python3.4)\r\n==188462==    by 0x4C2EBC: ??? (in /usr/local/google/home/kpayson/grpc/py34/bin/python3.4)\r\n==188462==    by 0x50B7F9: PyObject_Call (in /usr/local/google/home/kpayson/grpc/py34/bin/python3.4)\r\n==188462==    by 0x4B1EB9: ??? (in /usr/local/google/home/kpayson/grpc/py34/bin/python3.4)\r\n==188462== \r\n==188462== Invalid read of size 8\r\n==188462==    at 0xC1B3064: send_security_metadata (client_auth_filter.cc:204)\r\n==188462==    by 0xC1B3064: on_host_checked(void*, grpc_error*) (client_auth_filter.cc:221)\r\n==188462==    by 0xC1B3709: auth_start_transport_stream_op_batch(grpc_call_element*, grpc_transport_stream_op_batch*) (client_auth_filter.cc:306)\r\n==188462==    by 0xC1C11EC: waiting_for_pick_batches_resume (client_channel.cc:965)\r\n==188462==    by 0xC1C11EC: create_subchannel_call_locked (client_channel.cc:1025)\r\n==188462==    by 0xC1C11EC: pick_done_locked(grpc_call_element*, grpc_error*) (client_channel.cc:1050)\r\n==188462==    by 0xC154593: grpc_combiner_continue_exec_ctx() (combiner.cc:261)\r\n==188462==    by 0xC161A8E: grpc_core::ExecCtx::Flush() (exec_ctx.cc:128)\r\n==188462==    by 0xC161B5D: run_closures(grpc_closure_list) [clone .isra.5] (executor.cc:80)\r\n==188462==    by 0xC161CFA: executor_thread(void*) (executor.cc:177)\r\n==188462==    by 0xC148D19: thread_body(void*) (thd_posix.cc:67)\r\n==188462==    by 0x4E3F183: start_thread (pthread_create.c:312)\r\n==188462==    by 0x515303C: clone (clone.S:111)\r\n==188462==  Address 0x2cf52e50 is 4,384 bytes inside a block of size 20,535 free'd\r\n==188462==    at 0x4C2BDEC: free (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\r\n==188462==    by 0xC1455FF: gpr_arena_destroy(gpr_arena*) (arena.cc:64)\r\n==188462==    by 0xC17879D: release_call(void*, grpc_error*) (call.cc:508)\r\n==188462==    by 0xC16186E: exec_ctx_run(grpc_closure*, grpc_error*) (exec_ctx.cc:38)\r\n==188462==    by 0xC161A76: grpc_core::ExecCtx::Flush() (exec_ctx.cc:125)\r\n==188462==    by 0xC17C47A: ~ExecCtx (exec_ctx.h:85)\r\n==188462==    by 0xC17C47A: grpc_call_unref (call.cc:598)\r\n==188462==    by 0xC110906: __pyx_pf_4grpc_7_cython_6cygrpc_4Call_14__dealloc__ (cygrpc.c:6169)\r\n==188462==    by 0xC110906: __pyx_pw_4grpc_7_cython_6cygrpc_4Call_15__dealloc__ (cygrpc.c:6141)\r\n==188462==    by 0xC110906: __pyx_tp_dealloc_4grpc_7_cython_6cygrpc_Call (cygrpc.c:29590)\r\n==188462==    by 0x5274C4: ??? (in /usr/local/google/home/kpayson/grpc/py34/bin/python3.4)\r\n==188462==    by 0x55FA14: ??? (in /usr/local/google/home/kpayson/grpc/py34/bin/python3.4)\r\n==188462==    by 0x4C2EBC: ??? (in /usr/local/google/home/kpayson/grpc/py34/bin/python3.4)\r\n==188462==    by 0x50B7F9: PyObject_Call (in /usr/local/google/home/kpayson/grpc/py34/bin/python3.4)\r\n==188462==    by 0x4B1EB9: ??? (in /usr/local/google/home/kpayson/grpc/py34/bin/python3.4)\r\n==188462== \r\n==188462== Invalid read of size 8\r\n==188462==    at 0xC148705: gpr_ref_non_zero (sync.cc:90)\r\n==188462==    by 0xC1B307B: send_security_metadata (client_auth_filter.cc:206)\r\n==188462==    by 0xC1B307B: on_host_checked(void*, grpc_error*) (client_auth_filter.cc:221)\r\n==188462==    by 0xC1B3709: auth_start_transport_stream_op_batch(grpc_call_element*, grpc_transport_stream_op_batch*) (client_auth_filter.cc:306)\r\n==188462==    by 0xC1C11EC: waiting_for_pick_batches_resume (client_channel.cc:965)\r\n==188462==    by 0xC1C11EC: create_subchannel_call_locked (client_channel.cc:1025)\r\n==188462==    by 0xC1C11EC: pick_done_locked(grpc_call_element*, grpc_error*) (client_channel.cc:1050)\r\n==188462==    by 0xC154593: grpc_combiner_continue_exec_ctx() (combiner.cc:261)\r\n==188462==    by 0xC161A8E: grpc_core::ExecCtx::Flush() (exec_ctx.cc:128)\r\n==188462==    by 0xC161B5D: run_closures(grpc_closure_list) [clone .isra.5] (executor.cc:80)\r\n==188462==    by 0xC161CFA: executor_thread(void*) (executor.cc:177)\r\n==188462==    by 0xC148D19: thread_body(void*) (thd_posix.cc:67)\r\n==188462==    by 0x4E3F183: start_thread (pthread_create.c:312)\r\n==188462==    by 0x515303C: clone (clone.S:111)\r\n==188462==  Address 0x2cf52d50 is 4,128 bytes inside a block of size 20,535 free'd\r\n==188462==    at 0x4C2BDEC: free (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\r\n==188462==    by 0xC1455FF: gpr_arena_destroy(gpr_arena*) (arena.cc:64)\r\n==188462==    by 0xC17879D: release_call(void*, grpc_error*) (call.cc:508)\r\n==188462==    by 0xC16186E: exec_ctx_run(grpc_closure*, grpc_error*) (exec_ctx.cc:38)\r\n==188462==    by 0xC161A76: grpc_core::ExecCtx::Flush() (exec_ctx.cc:125)\r\n==188462==    by 0xC17C47A: ~ExecCtx (exec_ctx.h:85)\r\n==188462==    by 0xC17C47A: grpc_call_unref (call.cc:598)\r\n==188462==    by 0xC110906: __pyx_pf_4grpc_7_cython_6cygrpc_4Call_14__dealloc__ (cygrpc.c:6169)\r\n==188462==    by 0xC110906: __pyx_pw_4grpc_7_cython_6cygrpc_4Call_15__dealloc__ (cygrpc.c:6141)\r\n==188462==    by 0xC110906: __pyx_tp_dealloc_4grpc_7_cython_6cygrpc_Call (cygrpc.c:29590)\r\n==188462==    by 0x5274C4: ??? (in /usr/local/google/home/kpayson/grpc/py34/bin/python3.4)\r\n==188462==    by 0x55FA14: ??? (in /usr/local/google/home/kpayson/grpc/py34/bin/python3.4)\r\n==188462==    by 0x4C2EBC: ??? (in /usr/local/google/home/kpayson/grpc/py34/bin/python3.4)\r\n==188462==    by 0x50B7F9: PyObject_Call (in /usr/local/google/home/kpayson/grpc/py34/bin/python3.4)\r\n==188462==    by 0x4B1EB9: ??? (in /usr/local/google/home/kpayson/grpc/py34/bin/python3.4)\r\n```"
  }
]
