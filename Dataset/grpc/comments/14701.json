[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/373394377",
    "html_url": "https://github.com/grpc/grpc/issues/14701#issuecomment-373394377",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14701",
    "id": 373394377,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MzM5NDM3Nw==",
    "user": {
      "login": "markdroth",
      "id": 18664614,
      "node_id": "MDQ6VXNlcjE4NjY0NjE0",
      "avatar_url": "https://avatars2.githubusercontent.com/u/18664614?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/markdroth",
      "html_url": "https://github.com/markdroth",
      "followers_url": "https://api.github.com/users/markdroth/followers",
      "following_url": "https://api.github.com/users/markdroth/following{/other_user}",
      "gists_url": "https://api.github.com/users/markdroth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/markdroth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/markdroth/subscriptions",
      "organizations_url": "https://api.github.com/users/markdroth/orgs",
      "repos_url": "https://api.github.com/users/markdroth/repos",
      "events_url": "https://api.github.com/users/markdroth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/markdroth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-15T14:27:09Z",
    "updated_at": "2018-03-15T14:27:09Z",
    "author_association": "MEMBER",
    "body": "Instead of using a whole different plugin registry, I think we should just use a channel arg to de-select the filters we don't want for cronet.  The channel arg can be checked in the function passed to `grpc_channel_init_register_stage()` for adding the filter."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/373449901",
    "html_url": "https://github.com/grpc/grpc/issues/14701#issuecomment-373449901",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14701",
    "id": 373449901,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MzQ0OTkwMQ==",
    "user": {
      "login": "muxi",
      "id": 1054404,
      "node_id": "MDQ6VXNlcjEwNTQ0MDQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1054404?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/muxi",
      "html_url": "https://github.com/muxi",
      "followers_url": "https://api.github.com/users/muxi/followers",
      "following_url": "https://api.github.com/users/muxi/following{/other_user}",
      "gists_url": "https://api.github.com/users/muxi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/muxi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/muxi/subscriptions",
      "organizations_url": "https://api.github.com/users/muxi/orgs",
      "repos_url": "https://api.github.com/users/muxi/repos",
      "events_url": "https://api.github.com/users/muxi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/muxi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-15T17:02:02Z",
    "updated_at": "2018-03-15T17:02:02Z",
    "author_association": "MEMBER",
    "body": "Switching between chttp2 and Cronet happens at build time; that makes me feel more appropriate to use a different plugin registry for Cronet. We can drop the binaries of unused plugins.\r\n\r\nIf we are going to do that at run time it probably makes more sense to have an extra enum in [`channel_stack_type`](https://github.com/grpc/grpc/blob/dc46c7f565196d6684d5cf6ee81e99b413ba5282/src/core/lib/surface/channel_stack_type.h) for Cronet rather than filtering channel arg in every filter."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/373491081",
    "html_url": "https://github.com/grpc/grpc/issues/14701#issuecomment-373491081",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14701",
    "id": 373491081,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MzQ5MTA4MQ==",
    "user": {
      "login": "markdroth",
      "id": 18664614,
      "node_id": "MDQ6VXNlcjE4NjY0NjE0",
      "avatar_url": "https://avatars2.githubusercontent.com/u/18664614?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/markdroth",
      "html_url": "https://github.com/markdroth",
      "followers_url": "https://api.github.com/users/markdroth/followers",
      "following_url": "https://api.github.com/users/markdroth/following{/other_user}",
      "gists_url": "https://api.github.com/users/markdroth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/markdroth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/markdroth/subscriptions",
      "organizations_url": "https://api.github.com/users/markdroth/orgs",
      "repos_url": "https://api.github.com/users/markdroth/repos",
      "events_url": "https://api.github.com/users/markdroth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/markdroth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-15T19:12:51Z",
    "updated_at": "2018-03-15T19:12:51Z",
    "author_association": "MEMBER",
    "body": "I don't think it makes sense to have a different channel stack type for each transport.\r\n\r\nIf the goal here is to avoid building plugins that we don't need for Cronet, then presumably this is not just a plugin registration issue, but actually a build issue.  How is that build integration done?  For example, isn't the client_channel code also unused with Cronet?  If so, how do we avoid building the client_channel code for Cronet?"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/373499044",
    "html_url": "https://github.com/grpc/grpc/issues/14701#issuecomment-373499044",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14701",
    "id": 373499044,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MzQ5OTA0NA==",
    "user": {
      "login": "muxi",
      "id": 1054404,
      "node_id": "MDQ6VXNlcjEwNTQ0MDQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1054404?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/muxi",
      "html_url": "https://github.com/muxi",
      "followers_url": "https://api.github.com/users/muxi/followers",
      "following_url": "https://api.github.com/users/muxi/following{/other_user}",
      "gists_url": "https://api.github.com/users/muxi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/muxi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/muxi/subscriptions",
      "organizations_url": "https://api.github.com/users/muxi/orgs",
      "repos_url": "https://api.github.com/users/muxi/repos",
      "events_url": "https://api.github.com/users/muxi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/muxi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-15T19:41:14Z",
    "updated_at": "2018-03-15T19:41:14Z",
    "author_association": "MEMBER",
    "body": "To avoid building plugins that we don't need for Cronet is the reason that I would like to use a separate plugin registration. I am not going to address that in this issue though. This particular issue is only about using the alternative plugin_registry file for Cronet and unblocks #14615. Making an additional channel arg would unblock #14615 too but diverts from the path of follow-up build integration changes."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/373501148",
    "html_url": "https://github.com/grpc/grpc/issues/14701#issuecomment-373501148",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14701",
    "id": 373501148,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MzUwMTE0OA==",
    "user": {
      "login": "markdroth",
      "id": 18664614,
      "node_id": "MDQ6VXNlcjE4NjY0NjE0",
      "avatar_url": "https://avatars2.githubusercontent.com/u/18664614?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/markdroth",
      "html_url": "https://github.com/markdroth",
      "followers_url": "https://api.github.com/users/markdroth/followers",
      "following_url": "https://api.github.com/users/markdroth/following{/other_user}",
      "gists_url": "https://api.github.com/users/markdroth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/markdroth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/markdroth/subscriptions",
      "organizations_url": "https://api.github.com/users/markdroth/orgs",
      "repos_url": "https://api.github.com/users/markdroth/repos",
      "events_url": "https://api.github.com/users/markdroth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/markdroth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-15T19:48:48Z",
    "updated_at": "2018-03-15T19:48:48Z",
    "author_association": "MEMBER",
    "body": "I see.  So today, we are actually building things we don't need for cronet, and the goal here is to fix that?\r\n\r\nHow are we going to indicate which plugins should be built for cronet and which should not?\r\n\r\nI think @nicolasnoble should weigh in on this proposal."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/373503692",
    "html_url": "https://github.com/grpc/grpc/issues/14701#issuecomment-373503692",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14701",
    "id": 373503692,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MzUwMzY5Mg==",
    "user": {
      "login": "muxi",
      "id": 1054404,
      "node_id": "MDQ6VXNlcjEwNTQ0MDQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1054404?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/muxi",
      "html_url": "https://github.com/muxi",
      "followers_url": "https://api.github.com/users/muxi/followers",
      "following_url": "https://api.github.com/users/muxi/following{/other_user}",
      "gists_url": "https://api.github.com/users/muxi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/muxi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/muxi/subscriptions",
      "organizations_url": "https://api.github.com/users/muxi/orgs",
      "repos_url": "https://api.github.com/users/muxi/repos",
      "events_url": "https://api.github.com/users/muxi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/muxi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-15T19:57:56Z",
    "updated_at": "2018-03-15T19:58:39Z",
    "author_association": "MEMBER",
    "body": "> So today, we are actually building things we don't need for cronet\r\n\r\nYes\r\n\r\n> and the goal here is to fix that\r\n\r\nI think the goal here is to resolve the issue in #14615 in a way that would not be reverted when we want to improve the build integration.\r\n\r\n> How are we going to indicate which plugins should be built for cronet and which should not?\r\n\r\nPlugins built for cronet are specified by filegroups in `build.yaml`. Some reorganizations there are required (e.g. `client_channel` is not needed for Cronet but `grpc_transport_chttp2_client_secure` transitively depend on it). I'll leave that to when we work on build integration changes."
  }
]
