[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/470277235",
    "html_url": "https://github.com/grpc/grpc/issues/18264#issuecomment-470277235",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/18264",
    "id": 470277235,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3MDI3NzIzNQ==",
    "user": {
      "login": "stanley-cheung",
      "id": 11674202,
      "node_id": "MDQ6VXNlcjExNjc0MjAy",
      "avatar_url": "https://avatars2.githubusercontent.com/u/11674202?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stanley-cheung",
      "html_url": "https://github.com/stanley-cheung",
      "followers_url": "https://api.github.com/users/stanley-cheung/followers",
      "following_url": "https://api.github.com/users/stanley-cheung/following{/other_user}",
      "gists_url": "https://api.github.com/users/stanley-cheung/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stanley-cheung/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stanley-cheung/subscriptions",
      "organizations_url": "https://api.github.com/users/stanley-cheung/orgs",
      "repos_url": "https://api.github.com/users/stanley-cheung/repos",
      "events_url": "https://api.github.com/users/stanley-cheung/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stanley-cheung/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-06T21:08:27Z",
    "updated_at": "2019-03-06T22:54:07Z",
    "author_association": "CONTRIBUTOR",
    "body": "Collecting a bunch of data first:\r\n\r\n1. From `master`, `./tools/interop_matrix/run_interop_matrix_tests.py -l php --release v1.19.0` FAILED\r\n\r\n2. From `master`, `./tools/interop_matrix/run_interop_matrix_tests.py -l php --release v1.18.0` PASSED\r\n\r\n3. From `v1.19.x`, `./tools/run_tests/run_interop_tests.py -l php -s c++ --use_docker -t -j 8` PASSED\r\n\r\n4. From `v1.19.x`, `./tools/run_tests/run_interop_tests.py -l php7 -s c++ --use_docker -t -j 8` PASSED\r\n\r\n5. From `v1.19.x`, `./tools/run_tests/run_interop_tests.py -l php7 --cloud_to_prod --use_docker -t -j 8` PASSED\r\n\r\n6. From `v1.19.x`, `./tools/run_tests/run_interop_tests.py -l php --cloud_to_prod --use_docker -t -j 8` PASSED\r\n\r\n7. There's no material difference between `v1.18.x` and `v1.19.x` for PHP `git diff upstream/v1.18.x:src/php upstream/v1.19.x:src/php`\r\n\r\n8. `./tools/run_tests/run_interop_tests.py -l php --cloud_to_prod_auth --use_docker -t -j 8` PASSED\r\n\r\nNow I wonder what's so special about `run_interop_matrix_tests.py` and `v1.19.0`"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/479970296",
    "html_url": "https://github.com/grpc/grpc/issues/18264#issuecomment-479970296",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/18264",
    "id": 479970296,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3OTk3MDI5Ng==",
    "user": {
      "login": "srini100",
      "id": 35056280,
      "node_id": "MDQ6VXNlcjM1MDU2Mjgw",
      "avatar_url": "https://avatars2.githubusercontent.com/u/35056280?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/srini100",
      "html_url": "https://github.com/srini100",
      "followers_url": "https://api.github.com/users/srini100/followers",
      "following_url": "https://api.github.com/users/srini100/following{/other_user}",
      "gists_url": "https://api.github.com/users/srini100/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/srini100/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/srini100/subscriptions",
      "organizations_url": "https://api.github.com/users/srini100/orgs",
      "repos_url": "https://api.github.com/users/srini100/repos",
      "events_url": "https://api.github.com/users/srini100/events{/privacy}",
      "received_events_url": "https://api.github.com/users/srini100/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-04T16:30:54Z",
    "updated_at": "2019-04-04T16:30:54Z",
    "author_association": "CONTRIBUTOR",
    "body": "1.20.0 is getting close. Any update on this?"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/481454117",
    "html_url": "https://github.com/grpc/grpc/issues/18264#issuecomment-481454117",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/18264",
    "id": 481454117,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4MTQ1NDExNw==",
    "user": {
      "login": "stanley-cheung",
      "id": 11674202,
      "node_id": "MDQ6VXNlcjExNjc0MjAy",
      "avatar_url": "https://avatars2.githubusercontent.com/u/11674202?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stanley-cheung",
      "html_url": "https://github.com/stanley-cheung",
      "followers_url": "https://api.github.com/users/stanley-cheung/followers",
      "following_url": "https://api.github.com/users/stanley-cheung/following{/other_user}",
      "gists_url": "https://api.github.com/users/stanley-cheung/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stanley-cheung/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stanley-cheung/subscriptions",
      "organizations_url": "https://api.github.com/users/stanley-cheung/orgs",
      "repos_url": "https://api.github.com/users/stanley-cheung/repos",
      "events_url": "https://api.github.com/users/stanley-cheung/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stanley-cheung/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-09T21:52:58Z",
    "updated_at": "2019-04-09T21:52:58Z",
    "author_association": "CONTRIBUTOR",
    "body": "The plot thickens.\r\n\r\nAs mentioned from the original post, running the main script `./tools/interop_matrix/run_interop_matrix_tests.py -l php --release v1.19.0` failed. So I try to dissect the script to see what's going on.\r\n\r\nI realized I can add a `--keep` flag to keep the docker images, so `./tools/interop_matrix/run_interop_matrix_tests.py --keep -l php --release v1.19.0`. And I got a couple of pulled docker images like `gcr.io/grpc-testing/grpc_interop_php7:v1.19.0`.\r\n\r\nNext, by looking at `run_interop_matrix_tests.py`, I noticed that it's reading from the `testcases` directory, basically this file: `tools/interop_matrix/testcases/php__master`. Inside that file, there's a bunch of `docker run` statements like this:\r\n\r\n```\r\ndocker run -i --rm=true -w /var/local/git/grpc --net=host $docker_image bash -c \"src/php/bin/interop_client.sh --server_host=grpc-test.sandbox.googleapis.com --server_host_override=grpc-test.sandbox.googleapis.com --server_port=443 --use_tls=true --test_case=large_unary\" \r\n```\r\n\r\nSo I tried to replace `$docker_image` with the docker image ID of the pulled `gcr.io/grpc-testing/grpc_interop_php7:v1.19.0` image, and just run the `docker run` command above, locally, and it passed!!\r\n\r\nAs far as I can tell, running the main script `run_interop_matrix_tests.py` and running the `docker run` command above is exactly the same. Both are running against the \"published\" docker image `gcr.io/grpc-testing/grpc_interop_php7:v1.19.0`. But the former failed while the latter passed."
  }
]
