[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/379478602",
    "html_url": "https://github.com/grpc/grpc/issues/14917#issuecomment-379478602",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14917",
    "id": 379478602,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3OTQ3ODYwMg==",
    "user": {
      "login": "mmoanis",
      "id": 7101613,
      "node_id": "MDQ6VXNlcjcxMDE2MTM=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/7101613?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mmoanis",
      "html_url": "https://github.com/mmoanis",
      "followers_url": "https://api.github.com/users/mmoanis/followers",
      "following_url": "https://api.github.com/users/mmoanis/following{/other_user}",
      "gists_url": "https://api.github.com/users/mmoanis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mmoanis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mmoanis/subscriptions",
      "organizations_url": "https://api.github.com/users/mmoanis/orgs",
      "repos_url": "https://api.github.com/users/mmoanis/repos",
      "events_url": "https://api.github.com/users/mmoanis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mmoanis/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-07T15:43:17Z",
    "updated_at": "2018-04-07T15:44:32Z",
    "author_association": "NONE",
    "body": "Hi @murgatroid99 I looked into this issue as I though it will be straight forward for my GSoC preparation.\r\n\r\nI added a simple testcase to reproduce the problem which is referenced in this issue. But what I can see is that when [these two lines ](https://github.com/mohamed-moanis/grpc/commit/f6e3b84633382217006852f913fdb86d2106581c#diff-fe3c48f047feb7518f23b75b5ab22128R114)are commented, the test passes.\r\n\r\nIn other words, the problem with this assertion is not that a server that has not yet started doesn't count as \"shutdown\", but in reality, the problem this assertion guard against, is that the attached ports to the server will be leaked if shutdown was not called on the server.  This test case will hit another assertion just after this one you highlighted:\r\n```c \r\nGPR_ASSERT(gpr_atm_acq_load(&server->shutdown_flag) || !server->listeners);\r\nGPR_ASSERT(server->listeners_destroyed == num_listeners(server));\r\n```\r\n\r\nThe added ports are owned by the server, and the shutdown is expected to close and clean the used resources. So to avoid this assertion, you don't need to start the server and then shut it down; all what you need is to call shutdown to free the attached ports which can be seen in [my commit](https://github.com/mohamed-moanis/grpc/commit/413e0e2adc1a59d8c6ab5381b52925c55b91fdb7) to fix the test case.\r\n\r\nPlease, let me know if I missed something and work can be done here - I am willing to work on this."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/379508872",
    "html_url": "https://github.com/grpc/grpc/issues/14917#issuecomment-379508872",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14917",
    "id": 379508872,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3OTUwODg3Mg==",
    "user": {
      "login": "mehrdada",
      "id": 900411,
      "node_id": "MDQ6VXNlcjkwMDQxMQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/900411?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mehrdada",
      "html_url": "https://github.com/mehrdada",
      "followers_url": "https://api.github.com/users/mehrdada/followers",
      "following_url": "https://api.github.com/users/mehrdada/following{/other_user}",
      "gists_url": "https://api.github.com/users/mehrdada/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mehrdada/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mehrdada/subscriptions",
      "organizations_url": "https://api.github.com/users/mehrdada/orgs",
      "repos_url": "https://api.github.com/users/mehrdada/repos",
      "events_url": "https://api.github.com/users/mehrdada/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mehrdada/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-08T00:23:35Z",
    "updated_at": "2018-04-08T00:23:35Z",
    "author_association": "CONTRIBUTOR",
    "body": "Sounds like a dupe of this: https://github.com/grpc/grpc/issues/10084"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/380535564",
    "html_url": "https://github.com/grpc/grpc/issues/14917#issuecomment-380535564",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14917",
    "id": 380535564,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MDUzNTU2NA==",
    "user": {
      "login": "srini100",
      "id": 35056280,
      "node_id": "MDQ6VXNlcjM1MDU2Mjgw",
      "avatar_url": "https://avatars2.githubusercontent.com/u/35056280?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/srini100",
      "html_url": "https://github.com/srini100",
      "followers_url": "https://api.github.com/users/srini100/followers",
      "following_url": "https://api.github.com/users/srini100/following{/other_user}",
      "gists_url": "https://api.github.com/users/srini100/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/srini100/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/srini100/subscriptions",
      "organizations_url": "https://api.github.com/users/srini100/orgs",
      "repos_url": "https://api.github.com/users/srini100/repos",
      "events_url": "https://api.github.com/users/srini100/events{/privacy}",
      "received_events_url": "https://api.github.com/users/srini100/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-11T17:38:18Z",
    "updated_at": "2018-04-11T17:38:18Z",
    "author_association": "CONTRIBUTOR",
    "body": "Duplicate of #10084. Closing this."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/428374535",
    "html_url": "https://github.com/grpc/grpc/issues/14917#issuecomment-428374535",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14917",
    "id": 428374535,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyODM3NDUzNQ==",
    "user": {
      "login": "kerrick-lyft",
      "id": 15618653,
      "node_id": "MDQ6VXNlcjE1NjE4NjUz",
      "avatar_url": "https://avatars1.githubusercontent.com/u/15618653?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kerrick-lyft",
      "html_url": "https://github.com/kerrick-lyft",
      "followers_url": "https://api.github.com/users/kerrick-lyft/followers",
      "following_url": "https://api.github.com/users/kerrick-lyft/following{/other_user}",
      "gists_url": "https://api.github.com/users/kerrick-lyft/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kerrick-lyft/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kerrick-lyft/subscriptions",
      "organizations_url": "https://api.github.com/users/kerrick-lyft/orgs",
      "repos_url": "https://api.github.com/users/kerrick-lyft/repos",
      "events_url": "https://api.github.com/users/kerrick-lyft/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kerrick-lyft/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-09T22:26:35Z",
    "updated_at": "2018-10-09T22:26:35Z",
    "author_association": "CONTRIBUTOR",
    "body": "Just a status update for readers: This bug has been re-opened, #10084 was closed as a dupe of this bug."
  }
]
