[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/390797719",
    "html_url": "https://github.com/grpc/grpc/pull/15365#issuecomment-390797719",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15365",
    "id": 390797719,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MDc5NzcxOQ==",
    "user": {
      "login": "markdroth",
      "id": 18664614,
      "node_id": "MDQ6VXNlcjE4NjY0NjE0",
      "avatar_url": "https://avatars2.githubusercontent.com/u/18664614?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/markdroth",
      "html_url": "https://github.com/markdroth",
      "followers_url": "https://api.github.com/users/markdroth/followers",
      "following_url": "https://api.github.com/users/markdroth/following{/other_user}",
      "gists_url": "https://api.github.com/users/markdroth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/markdroth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/markdroth/subscriptions",
      "organizations_url": "https://api.github.com/users/markdroth/orgs",
      "repos_url": "https://api.github.com/users/markdroth/repos",
      "events_url": "https://api.github.com/users/markdroth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/markdroth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-21T22:07:17Z",
    "updated_at": "2018-05-21T22:07:17Z",
    "author_association": "MEMBER",
    "body": "I'd be curious to know how this impacts our benchmarks.\n\n---\n\nReviewed 1 of 1 files at r1.\nReview status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.\n\n---\n\n*[src/core/ext/filters/client_channel/client_channel.cc, line 2992 at r1](https://reviewable.io/reviews/grpc/grpc/15365#-LD3j63-8RVrTVBPrQoM:-LD3j63-8RVrTVBPrQoN:b-g55dpg) ([raw file](https://github.com/grpc/grpc/blob/a8ca226fb7a1759743db209bebe5e2bb4ad28e81/src/core/ext/filters/client_channel/client_channel.cc#L2992)):*\n> ```cpp\n>   }\n>   // Handle cancellation.\n>   if (batch->cancel_stream) {\n> ```\n\nThis can use `GPR_UNLIKELY()`.\n\n---\n\n*[src/core/ext/filters/client_channel/client_channel.cc, line 3071 at r1](https://reviewable.io/reviews/grpc/grpc/15365#-LD3jJBA8IzfNMlql3Lp:-LD3jJBA8IzfNMlql3Lq:bithrlv) ([raw file](https://github.com/grpc/grpc/blob/a8ca226fb7a1759743db209bebe5e2bb4ad28e81/src/core/ext/filters/client_channel/client_channel.cc#L3071)):*\n> ```cpp\n>   calld->owning_call = args->call_stack;\n>   calld->call_combiner = args->call_combiner;\n>   if (chand->deadline_checking_enabled) {\n> ```\n\nThis can use `GPR_LIKELY()`.\n\n---\n\n\n*Comments from [Reviewable](https://reviewable.io/reviews/grpc/grpc/15365#-:-LD3jSUt3p4ObbbVVViP:b1ve4mh)*\n<!-- Sent from Reviewable.io -->\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/390809506",
    "html_url": "https://github.com/grpc/grpc/pull/15365#issuecomment-390809506",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15365",
    "id": 390809506,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MDgwOTUwNg==",
    "user": {
      "login": "yashykt",
      "id": 4181124,
      "node_id": "MDQ6VXNlcjQxODExMjQ=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/4181124?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yashykt",
      "html_url": "https://github.com/yashykt",
      "followers_url": "https://api.github.com/users/yashykt/followers",
      "following_url": "https://api.github.com/users/yashykt/following{/other_user}",
      "gists_url": "https://api.github.com/users/yashykt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yashykt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yashykt/subscriptions",
      "organizations_url": "https://api.github.com/users/yashykt/orgs",
      "repos_url": "https://api.github.com/users/yashykt/repos",
      "events_url": "https://api.github.com/users/yashykt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yashykt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-21T23:08:25Z",
    "updated_at": "2018-05-21T23:08:25Z",
    "author_association": "MEMBER",
    "body": "Added the other recommendations too except for one. (Not sure if they should be made though, because this means consciously saying that doing things like a single rpc, cancel_batch and disabling deadlines is meant to be slow."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/390809594",
    "html_url": "https://github.com/grpc/grpc/pull/15365#issuecomment-390809594",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15365",
    "id": 390809594,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MDgwOTU5NA==",
    "user": {
      "login": "yashykt",
      "id": 4181124,
      "node_id": "MDQ6VXNlcjQxODExMjQ=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/4181124?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yashykt",
      "html_url": "https://github.com/yashykt",
      "followers_url": "https://api.github.com/users/yashykt/followers",
      "following_url": "https://api.github.com/users/yashykt/following{/other_user}",
      "gists_url": "https://api.github.com/users/yashykt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yashykt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yashykt/subscriptions",
      "organizations_url": "https://api.github.com/users/yashykt/orgs",
      "repos_url": "https://api.github.com/users/yashykt/repos",
      "events_url": "https://api.github.com/users/yashykt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yashykt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-21T23:08:55Z",
    "updated_at": "2018-05-21T23:08:55Z",
    "author_association": "MEMBER",
    "body": "I've also run benchmark runs on this. I should have numbers in about 3 hours."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/391008916",
    "html_url": "https://github.com/grpc/grpc/pull/15365#issuecomment-391008916",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15365",
    "id": 391008916,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MTAwODkxNg==",
    "user": {
      "login": "markdroth",
      "id": 18664614,
      "node_id": "MDQ6VXNlcjE4NjY0NjE0",
      "avatar_url": "https://avatars2.githubusercontent.com/u/18664614?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/markdroth",
      "html_url": "https://github.com/markdroth",
      "followers_url": "https://api.github.com/users/markdroth/followers",
      "following_url": "https://api.github.com/users/markdroth/following{/other_user}",
      "gists_url": "https://api.github.com/users/markdroth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/markdroth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/markdroth/subscriptions",
      "organizations_url": "https://api.github.com/users/markdroth/orgs",
      "repos_url": "https://api.github.com/users/markdroth/repos",
      "events_url": "https://api.github.com/users/markdroth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/markdroth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-22T14:22:06Z",
    "updated_at": "2018-05-22T14:22:06Z",
    "author_association": "MEMBER",
    "body": "\n\n\n\nReviewed 1 of 1 files at r3.\nReview status: all files reviewed at latest revision, 1 unresolved discussion, some commit checks failed.\n\n---\n\n*[src/core/ext/filters/client_channel/client_channel.cc, line 3106 at r1](https://reviewable.io/reviews/grpc/grpc/15365#-LD3hST_Nb_h3AQsXXq8-r1-3106:-LD7CxgR0ZuaxtVWDmJC:bexc4bz) ([raw file](https://github.com/grpc/grpc/blob/a8ca226fb7a1759743db209bebe5e2bb4ad28e81/src/core/ext/filters/client_channel/client_channel.cc#L3106)):*\n<details><summary><i>Previously, yashykt (Yash Tibrewal) wroteâ€¦</i></summary><blockquote>\n\nSome values can be empty, for example, for non-traced, insecure calls\n</blockquote></details>\n\nI think you're right on this one -- I would expect the security context to be non-null in the common case, but the others are probably not used as often.\n\n---\n\n*[src/core/ext/filters/client_channel/client_channel.cc, line 2955 at r3](https://reviewable.io/reviews/grpc/grpc/15365#-LD7CjGkBhc6PSsSrLjI:-LD7CjGkBhc6PSsSrLjJ:b7zufej) ([raw file](https://github.com/grpc/grpc/blob/cff3f9fd150df8b7db5d169303733bcffda4bd46/src/core/ext/filters/client_channel/client_channel.cc#L2955)):*\n> ```cpp\n>       return;\n>     }\n>     if (GPR_LIKELY(!chand->started_resolving)) {\n> ```\n\nThis should be `GPR_UNLIKELY()`.  It will only be true when the channel is idle.\n\n---\n\n\n*Comments from [Reviewable](https://reviewable.io/reviews/grpc/grpc/15365)*\n<!-- Sent from Reviewable.io -->\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/391511170",
    "html_url": "https://github.com/grpc/grpc/pull/15365#issuecomment-391511170",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15365",
    "id": 391511170,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MTUxMTE3MA==",
    "user": {
      "login": "yashykt",
      "id": 4181124,
      "node_id": "MDQ6VXNlcjQxODExMjQ=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/4181124?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yashykt",
      "html_url": "https://github.com/yashykt",
      "followers_url": "https://api.github.com/users/yashykt/followers",
      "following_url": "https://api.github.com/users/yashykt/following{/other_user}",
      "gists_url": "https://api.github.com/users/yashykt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yashykt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yashykt/subscriptions",
      "organizations_url": "https://api.github.com/users/yashykt/orgs",
      "repos_url": "https://api.github.com/users/yashykt/repos",
      "events_url": "https://api.github.com/users/yashykt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yashykt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-23T22:04:10Z",
    "updated_at": "2018-05-23T22:04:22Z",
    "author_association": "MEMBER",
    "body": "These were the results from performance runs -\r\nOn HEAD \r\n```\r\n+--------+---------+---------+----------------------+----------------------+\r\n|        |  l_50   |  l_99   |  server_qps_per_cpu  |  client_qps_per_cpu  |\r\n+========+=========+=========+======================+======================+\r\n| AVG    | 63.5064 | 126.705 |       41661.9        |       38646.3        |\r\n+--------+---------+---------+----------------------+----------------------+\r\n| STDEV  | 5.52187 | 8.22963 |         2105         |       3188.86        |\r\n+--------+---------+---------+----------------------+----------------------+\r\n| MEDIAN | 64.1037 | 127.629 |        41400         |       38380.4        |\r\n+--------+---------+---------+----------------------+----------------------+\r\n```\r\n\r\nWith GPR_LIKELY change\r\n```\r\n+--------+---------+---------+----------------------+----------------------+\r\n|        |  l_50   |  l_99   |  server_qps_per_cpu  |  client_qps_per_cpu  |\r\n+========+=========+=========+======================+======================+\r\n| AVG    | 62.8346 | 125.397 |       41505.9        |       39647.9        |\r\n+--------+---------+---------+----------------------+----------------------+\r\n| STDEV  | 5.43443 | 8.2653  |        3150.9        |       2884.49        |\r\n+--------+---------+---------+----------------------+----------------------+\r\n| MEDIAN | 62.3697 | 127.039 |       41657.1        |       39726.4        |\r\n+--------+---------+---------+----------------------+----------------------+\r\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/391512966",
    "html_url": "https://github.com/grpc/grpc/pull/15365#issuecomment-391512966",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15365",
    "id": 391512966,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MTUxMjk2Ng==",
    "user": {
      "login": "grpc-testing",
      "id": 28024233,
      "node_id": "MDQ6VXNlcjI4MDI0MjMz",
      "avatar_url": "https://avatars1.githubusercontent.com/u/28024233?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-testing",
      "html_url": "https://github.com/grpc-testing",
      "followers_url": "https://api.github.com/users/grpc-testing/followers",
      "following_url": "https://api.github.com/users/grpc-testing/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-testing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-testing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-testing/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-testing/orgs",
      "repos_url": "https://api.github.com/users/grpc-testing/repos",
      "events_url": "https://api.github.com/users/grpc-testing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-testing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-23T22:11:15Z",
    "updated_at": "2018-05-23T22:11:15Z",
    "author_association": "NONE",
    "body": "```\n****************************************************************\n\nlibgrpc.so\n\n     VM SIZE                                                             FILE SIZE\n ++++++++++++++ GROWING                                               ++++++++++++++\n  [ = ]       0 [None]                                                +3.07Ki  +0.0%\n  +0.3%     +80 src/core/ext/filters/client_channel/client_channel.cc     +80  +0.3%\n      +6.8%     +67 pick_callback_start_locked                                +67  +6.8%\n      +3.4%     +27 pick_after_resolver_result_done_locked                    +27  +3.4%\n      +6.3%     +22 add_retriable_send_initial_metadata_op                    +22  +6.3%\n      +1.1%      +9 pick_done                                                  +9  +1.1%\n      +2.3%      +8 recv_message_ready                                         +8  +2.3%\n      +2.3%      +8 recv_initial_metadata_ready                                +8  +2.3%\n      +0.1%      +2 cc_start_transport_stream_op_batch                         +2  +0.1%\n\n  +0.0%     +80 TOTAL                                                 +3.15Ki  +0.0%\n\n\n****************************************************************\n\nlibgrpc++.so\n\n     VM SIZE        FILE SIZE\n ++++++++++++++  ++++++++++++++\n\n  [ = ]       0        0  [ = ]\n\n\n\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/391515126",
    "html_url": "https://github.com/grpc/grpc/pull/15365#issuecomment-391515126",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15365",
    "id": 391515126,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MTUxNTEyNg==",
    "user": {
      "login": "grpc-testing",
      "id": 28024233,
      "node_id": "MDQ6VXNlcjI4MDI0MjMz",
      "avatar_url": "https://avatars1.githubusercontent.com/u/28024233?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-testing",
      "html_url": "https://github.com/grpc-testing",
      "followers_url": "https://api.github.com/users/grpc-testing/followers",
      "following_url": "https://api.github.com/users/grpc-testing/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-testing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-testing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-testing/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-testing/orgs",
      "repos_url": "https://api.github.com/users/grpc-testing/repos",
      "events_url": "https://api.github.com/users/grpc-testing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-testing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-23T22:19:51Z",
    "updated_at": "2018-05-23T22:19:51Z",
    "author_association": "NONE",
    "body": "```\n[trickle] No significant performance differences\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/391527476",
    "html_url": "https://github.com/grpc/grpc/pull/15365#issuecomment-391527476",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15365",
    "id": 391527476,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MTUyNzQ3Ng==",
    "user": {
      "login": "grpc-testing",
      "id": 28024233,
      "node_id": "MDQ6VXNlcjI4MDI0MjMz",
      "avatar_url": "https://avatars1.githubusercontent.com/u/28024233?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-testing",
      "html_url": "https://github.com/grpc-testing",
      "followers_url": "https://api.github.com/users/grpc-testing/followers",
      "following_url": "https://api.github.com/users/grpc-testing/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-testing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-testing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-testing/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-testing/orgs",
      "repos_url": "https://api.github.com/users/grpc-testing/repos",
      "events_url": "https://api.github.com/users/grpc-testing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-testing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-23T23:02:47Z",
    "updated_at": "2018-05-23T23:02:47Z",
    "author_association": "NONE",
    "body": "```\n[microbenchmarks] Performance differences noted:\nBenchmark                                                               cpu_time    real_time\n----------------------------------------------------------------------  ----------  -----------\nBM_StreamingPingPongMsgs<MinInProcess, NoOpMutator, NoOpMutator>/32768  -4%         -4%\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/391747619",
    "html_url": "https://github.com/grpc/grpc/pull/15365#issuecomment-391747619",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15365",
    "id": 391747619,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MTc0NzYxOQ==",
    "user": {
      "login": "markdroth",
      "id": 18664614,
      "node_id": "MDQ6VXNlcjE4NjY0NjE0",
      "avatar_url": "https://avatars2.githubusercontent.com/u/18664614?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/markdroth",
      "html_url": "https://github.com/markdroth",
      "followers_url": "https://api.github.com/users/markdroth/followers",
      "following_url": "https://api.github.com/users/markdroth/following{/other_user}",
      "gists_url": "https://api.github.com/users/markdroth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/markdroth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/markdroth/subscriptions",
      "organizations_url": "https://api.github.com/users/markdroth/orgs",
      "repos_url": "https://api.github.com/users/markdroth/repos",
      "events_url": "https://api.github.com/users/markdroth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/markdroth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-24T15:02:16Z",
    "updated_at": "2018-05-24T15:02:16Z",
    "author_association": "MEMBER",
    "body": "Looks like this does yield a noticable improvement.  Thanks for doing this!\n\n---\n\nReviewed 1 of 1 files at r4.\nReview status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.\n\n---\n\n\n\n*Comments from [Reviewable](https://reviewable.io/reviews/grpc/grpc/15365#-:-LDHeik53Cq6nCXMy7vF:b-ddbhqs)*\n<!-- Sent from Reviewable.io -->\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/392618488",
    "html_url": "https://github.com/grpc/grpc/pull/15365#issuecomment-392618488",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15365",
    "id": 392618488,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MjYxODQ4OA==",
    "user": {
      "login": "yashykt",
      "id": 4181124,
      "node_id": "MDQ6VXNlcjQxODExMjQ=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/4181124?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yashykt",
      "html_url": "https://github.com/yashykt",
      "followers_url": "https://api.github.com/users/yashykt/followers",
      "following_url": "https://api.github.com/users/yashykt/following{/other_user}",
      "gists_url": "https://api.github.com/users/yashykt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yashykt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yashykt/subscriptions",
      "organizations_url": "https://api.github.com/users/yashykt/orgs",
      "repos_url": "https://api.github.com/users/yashykt/repos",
      "events_url": "https://api.github.com/users/yashykt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yashykt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-28T23:51:26Z",
    "updated_at": "2018-05-28T23:51:26Z",
    "author_association": "MEMBER",
    "body": "Known issues : #15526, #14673, #14240"
  }
]
