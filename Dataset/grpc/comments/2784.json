[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/127929570",
    "html_url": "https://github.com/grpc/grpc/issues/2784#issuecomment-127929570",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/2784",
    "id": 127929570,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyNzkyOTU3MA==",
    "user": {
      "login": "diogojc",
      "id": 677721,
      "node_id": "MDQ6VXNlcjY3NzcyMQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/677721?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/diogojc",
      "html_url": "https://github.com/diogojc",
      "followers_url": "https://api.github.com/users/diogojc/followers",
      "following_url": "https://api.github.com/users/diogojc/following{/other_user}",
      "gists_url": "https://api.github.com/users/diogojc/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/diogojc/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/diogojc/subscriptions",
      "organizations_url": "https://api.github.com/users/diogojc/orgs",
      "repos_url": "https://api.github.com/users/diogojc/repos",
      "events_url": "https://api.github.com/users/diogojc/events{/privacy}",
      "received_events_url": "https://api.github.com/users/diogojc/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-08-05T09:23:10Z",
    "updated_at": "2015-08-05T09:23:10Z",
    "author_association": "NONE",
    "body": "The always increasing memory footprint happens on the server side and only happens if a new channel is open every time a new call is made. I assumed channel is not thread safe.\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/129306426",
    "html_url": "https://github.com/grpc/grpc/issues/2784#issuecomment-129306426",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/2784",
    "id": 129306426,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyOTMwNjQyNg==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-08-10T05:25:43Z",
    "updated_at": "2015-08-10T05:25:43Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hi, can you attach the code you are running?\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/129309605",
    "html_url": "https://github.com/grpc/grpc/issues/2784#issuecomment-129309605",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/2784",
    "id": 129309605,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyOTMwOTYwNQ==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-08-10T05:33:22Z",
    "updated_at": "2015-08-10T05:33:22Z",
    "author_association": "CONTRIBUTOR",
    "body": "Btw, the channel definitely is thread safe. Ideally, your app should be using just one channel to talk to a given server and you should be making all your calls using that channel.\nYou can also have multiple clients (for different services) use the same channel (if the server servers all those services of course).\n\nEvery channel creates it's own TCP connection, so based on what you describe it looks like that server doesn't properly deallocate memory after the connection from a client is closed?\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/132576032",
    "html_url": "https://github.com/grpc/grpc/issues/2784#issuecomment-132576032",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/2784",
    "id": 132576032,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMjU3NjAzMg==",
    "user": {
      "login": "diogojc",
      "id": 677721,
      "node_id": "MDQ6VXNlcjY3NzcyMQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/677721?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/diogojc",
      "html_url": "https://github.com/diogojc",
      "followers_url": "https://api.github.com/users/diogojc/followers",
      "following_url": "https://api.github.com/users/diogojc/following{/other_user}",
      "gists_url": "https://api.github.com/users/diogojc/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/diogojc/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/diogojc/subscriptions",
      "organizations_url": "https://api.github.com/users/diogojc/orgs",
      "repos_url": "https://api.github.com/users/diogojc/repos",
      "events_url": "https://api.github.com/users/diogojc/events{/privacy}",
      "received_events_url": "https://api.github.com/users/diogojc/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-08-19T12:36:52Z",
    "updated_at": "2015-08-19T12:36:52Z",
    "author_association": "NONE",
    "body": "Hi.\n\nThanks for clearing up the channel thread safety.\n\nYes, the server doesn't deallocate memory properly after a channel is created a service consumed and the channel closed in the client. If I use channel as a singleton no memory leak occurs.\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/134700461",
    "html_url": "https://github.com/grpc/grpc/issues/2784#issuecomment-134700461",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/2784",
    "id": 134700461,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzNDcwMDQ2MQ==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-08-25T18:53:15Z",
    "updated_at": "2015-08-25T18:53:15Z",
    "author_association": "CONTRIBUTOR",
    "body": "Ok, so after doing some profiling, it looks like that the gpr_slice that does allocated by in win_notify_on_read (tcp_windows.c:195) gets leaked when the connection to a client gets dropped.\nOnly one slice gets leaked per connection, which explains why the scenario that is using one channel for many call looks like no memory is leaked.\n\n```\ntcp->read_slice = gpr_slice_malloc(8192);\n```\n"
  }
]
