[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/329354161",
    "html_url": "https://github.com/grpc/grpc/pull/12564#issuecomment-329354161",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/12564",
    "id": 329354161,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyOTM1NDE2MQ==",
    "user": {
      "login": "grpc-kokoro",
      "id": 12722905,
      "node_id": "MDQ6VXNlcjEyNzIyOTA1",
      "avatar_url": "https://avatars3.githubusercontent.com/u/12722905?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-kokoro",
      "html_url": "https://github.com/grpc-kokoro",
      "followers_url": "https://api.github.com/users/grpc-kokoro/followers",
      "following_url": "https://api.github.com/users/grpc-kokoro/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-kokoro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-kokoro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-kokoro/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-kokoro/orgs",
      "repos_url": "https://api.github.com/users/grpc-kokoro/repos",
      "events_url": "https://api.github.com/users/grpc-kokoro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-kokoro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-14T02:49:03Z",
    "updated_at": "2017-09-14T02:49:03Z",
    "author_association": "NONE",
    "body": "```\n[trickle] No significant performance differences\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/329359586",
    "html_url": "https://github.com/grpc/grpc/pull/12564#issuecomment-329359586",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/12564",
    "id": 329359586,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyOTM1OTU4Ng==",
    "user": {
      "login": "grpc-kokoro",
      "id": 12722905,
      "node_id": "MDQ6VXNlcjEyNzIyOTA1",
      "avatar_url": "https://avatars3.githubusercontent.com/u/12722905?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-kokoro",
      "html_url": "https://github.com/grpc-kokoro",
      "followers_url": "https://api.github.com/users/grpc-kokoro/followers",
      "following_url": "https://api.github.com/users/grpc-kokoro/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-kokoro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-kokoro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-kokoro/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-kokoro/orgs",
      "repos_url": "https://api.github.com/users/grpc-kokoro/repos",
      "events_url": "https://api.github.com/users/grpc-kokoro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-kokoro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-14T03:28:51Z",
    "updated_at": "2017-09-14T03:28:51Z",
    "author_association": "NONE",
    "body": "```\n[microbenchmarks] No significant performance differences\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/329527961",
    "html_url": "https://github.com/grpc/grpc/pull/12564#issuecomment-329527961",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/12564",
    "id": 329527961,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyOTUyNzk2MQ==",
    "user": {
      "login": "sreecha",
      "id": 2754995,
      "node_id": "MDQ6VXNlcjI3NTQ5OTU=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/2754995?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sreecha",
      "html_url": "https://github.com/sreecha",
      "followers_url": "https://api.github.com/users/sreecha/followers",
      "following_url": "https://api.github.com/users/sreecha/following{/other_user}",
      "gists_url": "https://api.github.com/users/sreecha/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sreecha/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sreecha/subscriptions",
      "organizations_url": "https://api.github.com/users/sreecha/orgs",
      "repos_url": "https://api.github.com/users/sreecha/repos",
      "events_url": "https://api.github.com/users/sreecha/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sreecha/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-14T15:57:43Z",
    "updated_at": "2017-09-14T15:57:43Z",
    "author_association": "CONTRIBUTOR",
    "body": "TSAN C++ tests passed. Running them one more time."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/329537182",
    "html_url": "https://github.com/grpc/grpc/pull/12564#issuecomment-329537182",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/12564",
    "id": 329537182,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyOTUzNzE4Mg==",
    "user": {
      "login": "grpc-kokoro",
      "id": 12722905,
      "node_id": "MDQ6VXNlcjEyNzIyOTA1",
      "avatar_url": "https://avatars3.githubusercontent.com/u/12722905?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-kokoro",
      "html_url": "https://github.com/grpc-kokoro",
      "followers_url": "https://api.github.com/users/grpc-kokoro/followers",
      "following_url": "https://api.github.com/users/grpc-kokoro/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-kokoro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-kokoro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-kokoro/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-kokoro/orgs",
      "repos_url": "https://api.github.com/users/grpc-kokoro/repos",
      "events_url": "https://api.github.com/users/grpc-kokoro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-kokoro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-14T16:30:00Z",
    "updated_at": "2017-09-14T16:30:00Z",
    "author_association": "NONE",
    "body": "```\n[trickle] No significant performance differences\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/329548742",
    "html_url": "https://github.com/grpc/grpc/pull/12564#issuecomment-329548742",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/12564",
    "id": 329548742,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyOTU0ODc0Mg==",
    "user": {
      "login": "grpc-kokoro",
      "id": 12722905,
      "node_id": "MDQ6VXNlcjEyNzIyOTA1",
      "avatar_url": "https://avatars3.githubusercontent.com/u/12722905?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-kokoro",
      "html_url": "https://github.com/grpc-kokoro",
      "followers_url": "https://api.github.com/users/grpc-kokoro/followers",
      "following_url": "https://api.github.com/users/grpc-kokoro/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-kokoro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-kokoro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-kokoro/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-kokoro/orgs",
      "repos_url": "https://api.github.com/users/grpc-kokoro/repos",
      "events_url": "https://api.github.com/users/grpc-kokoro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-kokoro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-14T17:12:54Z",
    "updated_at": "2017-09-14T17:12:54Z",
    "author_association": "NONE",
    "body": "```\nCorrupt JSON data (indicates timeout or crash): \n    bm_fullstack_streaming_ping_pong.BM_StreamingPingPongWithCoalescingApi_InProcessCHTTP2_NoOpMutator_NoOpMutator__2M_2_0.counters.new: 1\n\n\n[microbenchmarks] No significant performance differences\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/329653917",
    "html_url": "https://github.com/grpc/grpc/pull/12564#issuecomment-329653917",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/12564",
    "id": 329653917,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyOTY1MzkxNw==",
    "user": {
      "login": "sreecha",
      "id": 2754995,
      "node_id": "MDQ6VXNlcjI3NTQ5OTU=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/2754995?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sreecha",
      "html_url": "https://github.com/sreecha",
      "followers_url": "https://api.github.com/users/sreecha/followers",
      "following_url": "https://api.github.com/users/sreecha/following{/other_user}",
      "gists_url": "https://api.github.com/users/sreecha/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sreecha/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sreecha/subscriptions",
      "organizations_url": "https://api.github.com/users/sreecha/orgs",
      "repos_url": "https://api.github.com/users/sreecha/repos",
      "events_url": "https://api.github.com/users/sreecha/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sreecha/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-15T01:40:22Z",
    "updated_at": "2017-09-15T01:40:22Z",
    "author_association": "CONTRIBUTOR",
    "body": "Tsan C++ passed the second time too."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/329913118",
    "html_url": "https://github.com/grpc/grpc/pull/12564#issuecomment-329913118",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/12564",
    "id": 329913118,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyOTkxMzExOA==",
    "user": {
      "login": "vjpai",
      "id": 8864912,
      "node_id": "MDQ6VXNlcjg4NjQ5MTI=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/8864912?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vjpai",
      "html_url": "https://github.com/vjpai",
      "followers_url": "https://api.github.com/users/vjpai/followers",
      "following_url": "https://api.github.com/users/vjpai/following{/other_user}",
      "gists_url": "https://api.github.com/users/vjpai/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vjpai/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vjpai/subscriptions",
      "organizations_url": "https://api.github.com/users/vjpai/orgs",
      "repos_url": "https://api.github.com/users/vjpai/repos",
      "events_url": "https://api.github.com/users/vjpai/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vjpai/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-15T21:54:03Z",
    "updated_at": "2017-09-15T21:54:03Z",
    "author_association": "MEMBER",
    "body": "Ok, this makes sense to me now. Can you add a comment to this effect, and\nthen revert all the extraneous changes in this pull request. The reason for\nadding the comment is to make sure that we never undo that particular\nchange. The reason for removing the extraneous content is to make it clear\nwhat actually resolved the race.\n\nOn Fri, Sep 15, 2017, 2:49 PM Sree Kuchibhotla <notifications@github.com>\nwrote:\n\n> *@sreecha* commented on this pull request.\n> ------------------------------\n>\n> In src/core/lib/surface/completion_queue.c\n> <https://github.com/grpc/grpc/pull/12564#discussion_r139257206>:\n>\n> > @@ -643,8 +643,7 @@ static void cq_end_op_for_next(grpc_exec_ctx *exec_ctx,\n>    /* Add the completion to the queue */\n>    bool is_first = cq_event_queue_push(&cqd->queue, storage);\n>    gpr_atm_no_barrier_fetch_add(&cqd->things_queued_ever, 1);\n> -  bool will_definitely_shutdown =\n> -      gpr_atm_no_barrier_load(&cqd->pending_events) == 1;\n> +  bool will_definitely_shutdown = gpr_atm_acq_load(&cqd->pending_events) == 1;\n>\n> When you do an \"acquire load\" on pending_events in T1 on line 646 , that\n> will \"match\" will the release store (rather the full cas) on\n> pending_events done by T2 - thereby establishing T2 happened before T1 .\n>\n> —\n> You are receiving this because you were assigned.\n>\n>\n> Reply to this email directly, view it on GitHub\n> <https://github.com/grpc/grpc/pull/12564#discussion_r139257206>, or mute\n> the thread\n> <https://github.com/notifications/unsubscribe-auth/AIdEkMHJdLzIQiVlEXyu7dxFta5XNk0kks5sivDcgaJpZM4PW9aC>\n> .\n>\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/330293072",
    "html_url": "https://github.com/grpc/grpc/pull/12564#issuecomment-330293072",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/12564",
    "id": 330293072,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMDI5MzA3Mg==",
    "user": {
      "login": "sreecha",
      "id": 2754995,
      "node_id": "MDQ6VXNlcjI3NTQ5OTU=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/2754995?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sreecha",
      "html_url": "https://github.com/sreecha",
      "followers_url": "https://api.github.com/users/sreecha/followers",
      "following_url": "https://api.github.com/users/sreecha/following{/other_user}",
      "gists_url": "https://api.github.com/users/sreecha/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sreecha/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sreecha/subscriptions",
      "organizations_url": "https://api.github.com/users/sreecha/orgs",
      "repos_url": "https://api.github.com/users/sreecha/repos",
      "events_url": "https://api.github.com/users/sreecha/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sreecha/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-18T17:22:32Z",
    "updated_at": "2017-09-18T17:22:32Z",
    "author_association": "CONTRIBUTOR",
    "body": "Added comments,  using `no_barrier` in places where it makes sense (the init and destroy paths).\r\n\r\nI still left my changes in the following two places:\r\n- in `atm_inc_if_nonzero` function\r\n- in `cq_next` before returning `GRPC_QUEUE_SHUTDOWN` \r\n\r\nno-barrier operations are fine in the above two cases for now; but I am worried that as the code evolves, we may run into subtle bugs again. It is a good practice to use acquire for loads and release for stores in general anyway for variables which effect the control-flow of the program. \r\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/330305539",
    "html_url": "https://github.com/grpc/grpc/pull/12564#issuecomment-330305539",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/12564",
    "id": 330305539,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMDMwNTUzOQ==",
    "user": {
      "login": "grpc-kokoro",
      "id": 12722905,
      "node_id": "MDQ6VXNlcjEyNzIyOTA1",
      "avatar_url": "https://avatars3.githubusercontent.com/u/12722905?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-kokoro",
      "html_url": "https://github.com/grpc-kokoro",
      "followers_url": "https://api.github.com/users/grpc-kokoro/followers",
      "following_url": "https://api.github.com/users/grpc-kokoro/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-kokoro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-kokoro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-kokoro/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-kokoro/orgs",
      "repos_url": "https://api.github.com/users/grpc-kokoro/repos",
      "events_url": "https://api.github.com/users/grpc-kokoro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-kokoro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-18T17:57:11Z",
    "updated_at": "2017-09-18T17:57:11Z",
    "author_association": "NONE",
    "body": "```\n[trickle] No significant performance differences\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/330315774",
    "html_url": "https://github.com/grpc/grpc/pull/12564#issuecomment-330315774",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/12564",
    "id": 330315774,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMDMxNTc3NA==",
    "user": {
      "login": "grpc-kokoro",
      "id": 12722905,
      "node_id": "MDQ6VXNlcjEyNzIyOTA1",
      "avatar_url": "https://avatars3.githubusercontent.com/u/12722905?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-kokoro",
      "html_url": "https://github.com/grpc-kokoro",
      "followers_url": "https://api.github.com/users/grpc-kokoro/followers",
      "following_url": "https://api.github.com/users/grpc-kokoro/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-kokoro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-kokoro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-kokoro/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-kokoro/orgs",
      "repos_url": "https://api.github.com/users/grpc-kokoro/repos",
      "events_url": "https://api.github.com/users/grpc-kokoro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-kokoro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-18T18:33:36Z",
    "updated_at": "2017-09-18T18:33:36Z",
    "author_association": "NONE",
    "body": "```\nCorrupt JSON data (indicates timeout or crash): \n    bm_fullstack_streaming_ping_pong.BM_StreamingPingPongWithCoalescingApi_MinInProcessCHTTP2_NoOpMutator_NoOpMutator__2M_2_0.counters.new: 1\n\n\n[microbenchmarks] No significant performance differences\n```"
  }
]
