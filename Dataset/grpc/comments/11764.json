[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/314846035",
    "html_url": "https://github.com/grpc/grpc/pull/11764#issuecomment-314846035",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11764",
    "id": 314846035,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxNDg0NjAzNQ==",
    "user": {
      "login": "rafaelsales",
      "id": 1196663,
      "node_id": "MDQ6VXNlcjExOTY2NjM=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1196663?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rafaelsales",
      "html_url": "https://github.com/rafaelsales",
      "followers_url": "https://api.github.com/users/rafaelsales/followers",
      "following_url": "https://api.github.com/users/rafaelsales/following{/other_user}",
      "gists_url": "https://api.github.com/users/rafaelsales/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rafaelsales/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rafaelsales/subscriptions",
      "organizations_url": "https://api.github.com/users/rafaelsales/orgs",
      "repos_url": "https://api.github.com/users/rafaelsales/repos",
      "events_url": "https://api.github.com/users/rafaelsales/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rafaelsales/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-07-12T17:50:40Z",
    "updated_at": "2017-07-12T19:16:53Z",
    "author_association": "CONTRIBUTOR",
    "body": "@apolcyn not sure if it helps, but I noticed the leak or GC laziness does not happen in 1.0.1 but it happens on the next ruby version (1.1.2)."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/316564408",
    "html_url": "https://github.com/grpc/grpc/pull/11764#issuecomment-316564408",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11764",
    "id": 316564408,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxNjU2NDQwOA==",
    "user": {
      "login": "apolcyn",
      "id": 9566254,
      "node_id": "MDQ6VXNlcjk1NjYyNTQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9566254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apolcyn",
      "html_url": "https://github.com/apolcyn",
      "followers_url": "https://api.github.com/users/apolcyn/followers",
      "following_url": "https://api.github.com/users/apolcyn/following{/other_user}",
      "gists_url": "https://api.github.com/users/apolcyn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apolcyn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apolcyn/subscriptions",
      "organizations_url": "https://api.github.com/users/apolcyn/orgs",
      "repos_url": "https://api.github.com/users/apolcyn/repos",
      "events_url": "https://api.github.com/users/apolcyn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apolcyn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-07-20T00:49:52Z",
    "updated_at": "2017-07-20T00:53:41Z",
    "author_association": "CONTRIBUTOR",
    "body": "the latest few commits here make the \"call context objects\" more robust after the underlying call has finished, and add some tests for cases of \"use after call finished\". (most significant tweaks were needed for handling of `peer` and `peer_cert` attributes of server-side \"call contexts\") \r\n\r\nThese also fix a few misc. things, including a broken `status` accessor on call `operation views`, and missing `peer` and `peer_cert` accessors on client-streaming/bidi RPC types.\r\n\r\n(the new client credentials were copied over from https://github.com/grpc/grpc/tree/master/src/core/tsi/test_creds)\r\n\r\nPTAL"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/316841548",
    "html_url": "https://github.com/grpc/grpc/pull/11764#issuecomment-316841548",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11764",
    "id": 316841548,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxNjg0MTU0OA==",
    "user": {
      "login": "apolcyn",
      "id": 9566254,
      "node_id": "MDQ6VXNlcjk1NjYyNTQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9566254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apolcyn",
      "html_url": "https://github.com/apolcyn",
      "followers_url": "https://api.github.com/users/apolcyn/followers",
      "following_url": "https://api.github.com/users/apolcyn/following{/other_user}",
      "gists_url": "https://api.github.com/users/apolcyn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apolcyn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apolcyn/subscriptions",
      "organizations_url": "https://api.github.com/users/apolcyn/orgs",
      "repos_url": "https://api.github.com/users/apolcyn/repos",
      "events_url": "https://api.github.com/users/apolcyn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apolcyn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-07-20T21:56:49Z",
    "updated_at": "2017-07-20T21:56:49Z",
    "author_association": "CONTRIBUTOR",
    "body": "fixed broken new copyright, waiting for tests to re-run\r\n\r\njenkins: test this please"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/316859406",
    "html_url": "https://github.com/grpc/grpc/pull/11764#issuecomment-316859406",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11764",
    "id": 316859406,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxNjg1OTQwNg==",
    "user": {
      "login": "apolcyn",
      "id": 9566254,
      "node_id": "MDQ6VXNlcjk1NjYyNTQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9566254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apolcyn",
      "html_url": "https://github.com/apolcyn",
      "followers_url": "https://api.github.com/users/apolcyn/followers",
      "following_url": "https://api.github.com/users/apolcyn/following{/other_user}",
      "gists_url": "https://api.github.com/users/apolcyn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apolcyn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apolcyn/subscriptions",
      "organizations_url": "https://api.github.com/users/apolcyn/orgs",
      "repos_url": "https://api.github.com/users/apolcyn/repos",
      "events_url": "https://api.github.com/users/apolcyn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apolcyn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-07-20T23:34:07Z",
    "updated_at": "2017-07-20T23:34:25Z",
    "author_association": "CONTRIBUTOR",
    "body": "just made one more nit fix of a change made to `src/ruby/spec/generic/rpc_server_spec.rb`:\r\n\r\nchanged \r\n\r\n`fail 'shouldnt reuse service' unless @call.nil?` \r\n\r\nto\r\n\r\n`fail 'shouldnt reuse service' unless @server_side_call.nil?`"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/316868522",
    "html_url": "https://github.com/grpc/grpc/pull/11764#issuecomment-316868522",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11764",
    "id": 316868522,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxNjg2ODUyMg==",
    "user": {
      "login": "apolcyn",
      "id": 9566254,
      "node_id": "MDQ6VXNlcjk1NjYyNTQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9566254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apolcyn",
      "html_url": "https://github.com/apolcyn",
      "followers_url": "https://api.github.com/users/apolcyn/followers",
      "following_url": "https://api.github.com/users/apolcyn/following{/other_user}",
      "gists_url": "https://api.github.com/users/apolcyn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apolcyn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apolcyn/subscriptions",
      "organizations_url": "https://api.github.com/users/apolcyn/orgs",
      "repos_url": "https://api.github.com/users/apolcyn/repos",
      "events_url": "https://api.github.com/users/apolcyn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apolcyn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-07-21T00:35:42Z",
    "updated_at": "2017-07-21T00:35:42Z",
    "author_association": "CONTRIBUTOR",
    "body": "tests are green"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/317090844",
    "html_url": "https://github.com/grpc/grpc/pull/11764#issuecomment-317090844",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11764",
    "id": 317090844,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxNzA5MDg0NA==",
    "user": {
      "login": "rafaelsales",
      "id": 1196663,
      "node_id": "MDQ6VXNlcjExOTY2NjM=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1196663?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rafaelsales",
      "html_url": "https://github.com/rafaelsales",
      "followers_url": "https://api.github.com/users/rafaelsales/followers",
      "following_url": "https://api.github.com/users/rafaelsales/following{/other_user}",
      "gists_url": "https://api.github.com/users/rafaelsales/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rafaelsales/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rafaelsales/subscriptions",
      "organizations_url": "https://api.github.com/users/rafaelsales/orgs",
      "repos_url": "https://api.github.com/users/rafaelsales/repos",
      "events_url": "https://api.github.com/users/rafaelsales/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rafaelsales/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-07-21T19:23:44Z",
    "updated_at": "2017-07-21T19:23:44Z",
    "author_association": "CONTRIBUTOR",
    "body": "This is great. You guys have an idea on when this would be released? Thanks!"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/317125157",
    "html_url": "https://github.com/grpc/grpc/pull/11764#issuecomment-317125157",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11764",
    "id": 317125157,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxNzEyNTE1Nw==",
    "user": {
      "login": "apolcyn",
      "id": 9566254,
      "node_id": "MDQ6VXNlcjk1NjYyNTQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9566254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apolcyn",
      "html_url": "https://github.com/apolcyn",
      "followers_url": "https://api.github.com/users/apolcyn/followers",
      "following_url": "https://api.github.com/users/apolcyn/following{/other_user}",
      "gists_url": "https://api.github.com/users/apolcyn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apolcyn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apolcyn/subscriptions",
      "organizations_url": "https://api.github.com/users/apolcyn/orgs",
      "repos_url": "https://api.github.com/users/apolcyn/repos",
      "events_url": "https://api.github.com/users/apolcyn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apolcyn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-07-21T22:14:54Z",
    "updated_at": "2017-07-21T22:14:54Z",
    "author_association": "CONTRIBUTOR",
    "body": "@rafaelsales, personally I'd guess that this could get in to the 1.5 release in the next few weeks."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/321677407",
    "html_url": "https://github.com/grpc/grpc/pull/11764#issuecomment-321677407",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11764",
    "id": 321677407,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMTY3NzQwNw==",
    "user": {
      "login": "apolcyn",
      "id": 9566254,
      "node_id": "MDQ6VXNlcjk1NjYyNTQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9566254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apolcyn",
      "html_url": "https://github.com/apolcyn",
      "followers_url": "https://api.github.com/users/apolcyn/followers",
      "following_url": "https://api.github.com/users/apolcyn/following{/other_user}",
      "gists_url": "https://api.github.com/users/apolcyn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apolcyn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apolcyn/subscriptions",
      "organizations_url": "https://api.github.com/users/apolcyn/orgs",
      "repos_url": "https://api.github.com/users/apolcyn/repos",
      "events_url": "https://api.github.com/users/apolcyn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apolcyn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-10T21:23:50Z",
    "updated_at": "2017-08-10T21:23:50Z",
    "author_association": "CONTRIBUTOR",
    "body": "@rafaelsales this change was just released in the 1.4.5 version"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/321693825",
    "html_url": "https://github.com/grpc/grpc/pull/11764#issuecomment-321693825",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11764",
    "id": 321693825,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMTY5MzgyNQ==",
    "user": {
      "login": "rafaelsales",
      "id": 1196663,
      "node_id": "MDQ6VXNlcjExOTY2NjM=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1196663?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rafaelsales",
      "html_url": "https://github.com/rafaelsales",
      "followers_url": "https://api.github.com/users/rafaelsales/followers",
      "following_url": "https://api.github.com/users/rafaelsales/following{/other_user}",
      "gists_url": "https://api.github.com/users/rafaelsales/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rafaelsales/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rafaelsales/subscriptions",
      "organizations_url": "https://api.github.com/users/rafaelsales/orgs",
      "repos_url": "https://api.github.com/users/rafaelsales/repos",
      "events_url": "https://api.github.com/users/rafaelsales/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rafaelsales/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-10T22:46:38Z",
    "updated_at": "2017-08-10T22:46:38Z",
    "author_association": "CONTRIBUTOR",
    "body": "@apolcyn Thanks for the reminder! Will leave some staging servers running this version over the weekend and likely have it in prod by Monday :)"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/322522833",
    "html_url": "https://github.com/grpc/grpc/pull/11764#issuecomment-322522833",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11764",
    "id": 322522833,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMjUyMjgzMw==",
    "user": {
      "login": "rafaelsales",
      "id": 1196663,
      "node_id": "MDQ6VXNlcjExOTY2NjM=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1196663?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rafaelsales",
      "html_url": "https://github.com/rafaelsales",
      "followers_url": "https://api.github.com/users/rafaelsales/followers",
      "following_url": "https://api.github.com/users/rafaelsales/following{/other_user}",
      "gists_url": "https://api.github.com/users/rafaelsales/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rafaelsales/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rafaelsales/subscriptions",
      "organizations_url": "https://api.github.com/users/rafaelsales/orgs",
      "repos_url": "https://api.github.com/users/rafaelsales/repos",
      "events_url": "https://api.github.com/users/rafaelsales/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rafaelsales/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-15T16:49:18Z",
    "updated_at": "2017-08-15T16:50:28Z",
    "author_association": "CONTRIBUTOR",
    "body": "@apolcyn I was running GRPC 1.3.4 for Ruby on a nginx+passenger process and it worked fine. As soon as I upgraded to 1.4.5, I started having this segmentation fault when grpc calls are made from within this nginx/passenger process:\r\n\r\nHere's the seg fault that was logged by passenger:\r\nhttps://gist.github.com/rafaelsales/1cbe03f94910f20b5a2f3f9ae0b9bbb3\r\n\r\nI want to add that this seg fault does not happen when the grpc call is made out of nginx/passenger context (e.g. from rails console, with same app and libs loaded)\r\n\r\nJust downgrading back to 1.3.4 fixes the issue.\r\n\r\nSince I didn't find any breaking changes on the between 1.3.4, this is the only thing that I changed when upgrading:\r\n\r\n```\r\n33422f33a 2017-08-11 23:18:37 -0300 Rafael Sales | grpc 1.4.5\r\ndiff --git a/Gemfile b/Gemfile\r\nindex 8a06cf1bb..1010d1eba 100644\r\n--- a/Gemfile\r\n+++ b/Gemfile\r\n@@ -70,7 +70,7 @@ \r\n...\r\n-gem 'grpc', '1.3.4'\r\n+gem 'grpc', '1.4.5'\r\n...\r\ndiff --git a/Gemfile.lock b/Gemfile.lock\r\nindex 5d7aa124a..bcc88a25b 100644\r\n--- a/Gemfile.lock\r\n+++ b/Gemfile.lock\r\n@@ -404,7 +404,7 @@ GEM\r\n...\r\n-    grpc (1.3.4)\r\n+    grpc (1.4.5)\r\n...\r\n@@ -789,7 +789,7 @@ DEPENDENCIES\r\n...\r\n-  grpc (= 1.3.4)\r\n+  grpc (= 1.4.5)\r\n...\r\n```\r\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/322529300",
    "html_url": "https://github.com/grpc/grpc/pull/11764#issuecomment-322529300",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11764",
    "id": 322529300,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMjUyOTMwMA==",
    "user": {
      "login": "apolcyn",
      "id": 9566254,
      "node_id": "MDQ6VXNlcjk1NjYyNTQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9566254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apolcyn",
      "html_url": "https://github.com/apolcyn",
      "followers_url": "https://api.github.com/users/apolcyn/followers",
      "following_url": "https://api.github.com/users/apolcyn/following{/other_user}",
      "gists_url": "https://api.github.com/users/apolcyn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apolcyn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apolcyn/subscriptions",
      "organizations_url": "https://api.github.com/users/apolcyn/orgs",
      "repos_url": "https://api.github.com/users/apolcyn/repos",
      "events_url": "https://api.github.com/users/apolcyn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apolcyn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-15T17:14:26Z",
    "updated_at": "2017-08-15T17:14:26Z",
    "author_association": "CONTRIBUTOR",
    "body": "@rafaelsales are you able tell if this error happens on the GRPC 1.4.1?\r\n\r\nIt looks like the segfault posted here is happening during client-side \"unary/request-response\" RPCs (most of the changes between 1.4.5 and 1.4.1 only affect server-side calls,  but the diff between 1.4.1 and 1.3.4 is a lot bigger).\r\n\r\nTaking a look, but are you able to share more details about the call (e.g., details about the message sent and received, metadata used, etc.), or possibly code that triggers this?"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/322529925",
    "html_url": "https://github.com/grpc/grpc/pull/11764#issuecomment-322529925",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11764",
    "id": 322529925,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMjUyOTkyNQ==",
    "user": {
      "login": "rafaelsales",
      "id": 1196663,
      "node_id": "MDQ6VXNlcjExOTY2NjM=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1196663?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rafaelsales",
      "html_url": "https://github.com/rafaelsales",
      "followers_url": "https://api.github.com/users/rafaelsales/followers",
      "following_url": "https://api.github.com/users/rafaelsales/following{/other_user}",
      "gists_url": "https://api.github.com/users/rafaelsales/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rafaelsales/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rafaelsales/subscriptions",
      "organizations_url": "https://api.github.com/users/rafaelsales/orgs",
      "repos_url": "https://api.github.com/users/rafaelsales/repos",
      "events_url": "https://api.github.com/users/rafaelsales/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rafaelsales/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-15T17:16:43Z",
    "updated_at": "2017-08-15T17:16:43Z",
    "author_association": "CONTRIBUTOR",
    "body": "@apolcyn since I don't use nginx/passenger for development, I could only reproduce this on staging/prod servers, but I'll try to setup and reproduce locally so I can test with different grpc versions. Thanks"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/324262219",
    "html_url": "https://github.com/grpc/grpc/pull/11764#issuecomment-324262219",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11764",
    "id": 324262219,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNDI2MjIxOQ==",
    "user": {
      "login": "jacobvosmaer",
      "id": 1336311,
      "node_id": "MDQ6VXNlcjEzMzYzMTE=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1336311?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jacobvosmaer",
      "html_url": "https://github.com/jacobvosmaer",
      "followers_url": "https://api.github.com/users/jacobvosmaer/followers",
      "following_url": "https://api.github.com/users/jacobvosmaer/following{/other_user}",
      "gists_url": "https://api.github.com/users/jacobvosmaer/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jacobvosmaer/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jacobvosmaer/subscriptions",
      "organizations_url": "https://api.github.com/users/jacobvosmaer/orgs",
      "repos_url": "https://api.github.com/users/jacobvosmaer/repos",
      "events_url": "https://api.github.com/users/jacobvosmaer/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jacobvosmaer/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-23T08:40:35Z",
    "updated_at": "2017-08-23T08:41:05Z",
    "author_association": "NONE",
    "body": "When we upgraded to 1.4.5 some of our Ruby client code broke. For some reason, before 1.4.5 we were able to do this on a response stream:\r\n\r\n```ruby\r\nfirst_msg = response.first\r\n# Do stuff with first_msg\r\n\r\nresponse.each do |msg|\r\n  # Do stuff with the rest\r\nend\r\n```\r\n\r\nWe were able to work around that by rewriting the calling code to use just one loop.\r\n\r\n```ruby\r\nfirst_msg = nil\r\nresponse.each do |msg|\r\n  if first_msg = nil\r\n    first_msg = msg\r\n    # Do stuff with first message\r\n    next\r\n  end\r\n\r\n  # Do stuff with the rest\r\nend\r\n```\r\n\r\nOur guess is that it is because of this MR. Sharing here in case it helps someone else. Actual change can be seen in https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/13597/diffs."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/324487196",
    "html_url": "https://github.com/grpc/grpc/pull/11764#issuecomment-324487196",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11764",
    "id": 324487196,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNDQ4NzE5Ng==",
    "user": {
      "login": "apolcyn",
      "id": 9566254,
      "node_id": "MDQ6VXNlcjk1NjYyNTQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9566254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apolcyn",
      "html_url": "https://github.com/apolcyn",
      "followers_url": "https://api.github.com/users/apolcyn/followers",
      "following_url": "https://api.github.com/users/apolcyn/following{/other_user}",
      "gists_url": "https://api.github.com/users/apolcyn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apolcyn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apolcyn/subscriptions",
      "organizations_url": "https://api.github.com/users/apolcyn/orgs",
      "repos_url": "https://api.github.com/users/apolcyn/repos",
      "events_url": "https://api.github.com/users/apolcyn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apolcyn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-23T23:06:15Z",
    "updated_at": "2017-08-24T02:20:17Z",
    "author_association": "CONTRIBUTOR",
    "body": "@jacobvosmaer indeed the breakage posted here is definitely due to this change.\r\n\r\n<s>As a different workaround, `response.next` should work well as a repacement to `response.first`, leaving everything else the same.</s>\r\n\r\nThe problem appears to be that certain `Enumerable` methods, like `#first`, will cause the generator's wrapping `ensure` block to run even though it hasn't yet finished (with this PR, the `ensure` block expects to run only after enumeration has finished).\r\n\r\nI think this can be fixed within ruby-grpc"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/324515629",
    "html_url": "https://github.com/grpc/grpc/pull/11764#issuecomment-324515629",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11764",
    "id": 324515629,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNDUxNTYyOQ==",
    "user": {
      "login": "apolcyn",
      "id": 9566254,
      "node_id": "MDQ6VXNlcjk1NjYyNTQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9566254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apolcyn",
      "html_url": "https://github.com/apolcyn",
      "followers_url": "https://api.github.com/users/apolcyn/followers",
      "following_url": "https://api.github.com/users/apolcyn/following{/other_user}",
      "gists_url": "https://api.github.com/users/apolcyn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apolcyn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apolcyn/subscriptions",
      "organizations_url": "https://api.github.com/users/apolcyn/orgs",
      "repos_url": "https://api.github.com/users/apolcyn/repos",
      "events_url": "https://api.github.com/users/apolcyn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apolcyn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-24T02:33:01Z",
    "updated_at": "2017-08-24T02:33:01Z",
    "author_association": "CONTRIBUTOR",
    "body": "On second thought, I'm actually a little reluctant to support the now-broken usage that's posted above.\r\n\r\nThe problem is that something like `#first` will fully enter and \"run the ensure\" of the \"fiber/generator method\" every time it's called.\r\n\r\nAlso note that using something like `#first` followed by `#next` or `#each` will give different results if used on other types `Enumerables`.\r\n\r\nI.e., supporting that behavior makes the grpc \"response stream enumerable\" inconsistent with something like this:\r\n\r\n```\r\nclass Trial\r\n  def each\r\n    [1, 2, 3, 4].each do |i|\r\n        yield i\r\n    end\r\n  end\r\nend\r\n\r\ndef main\r\n  enum = Trial.new.enum_for(:each)\r\n  p enum.first # => 1\r\n  p enum.next # => 1\r\n  enum.each do |r| # => 1, 2, 3, 4\r\n    p r\r\n  end\r\nend\r\n\r\n\r\nif __FILE__ == $0\r\n  main()\r\nend\r\n```\r\n\r\nThat said, supporting that can be done if we'd like to - is this important?"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/324628846",
    "html_url": "https://github.com/grpc/grpc/pull/11764#issuecomment-324628846",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11764",
    "id": 324628846,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNDYyODg0Ng==",
    "user": {
      "login": "jacobvosmaer",
      "id": 1336311,
      "node_id": "MDQ6VXNlcjEzMzYzMTE=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1336311?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jacobvosmaer",
      "html_url": "https://github.com/jacobvosmaer",
      "followers_url": "https://api.github.com/users/jacobvosmaer/followers",
      "following_url": "https://api.github.com/users/jacobvosmaer/following{/other_user}",
      "gists_url": "https://api.github.com/users/jacobvosmaer/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jacobvosmaer/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jacobvosmaer/subscriptions",
      "organizations_url": "https://api.github.com/users/jacobvosmaer/orgs",
      "repos_url": "https://api.github.com/users/jacobvosmaer/repos",
      "events_url": "https://api.github.com/users/jacobvosmaer/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jacobvosmaer/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-24T13:05:00Z",
    "updated_at": "2017-08-24T13:05:00Z",
    "author_association": "NONE",
    "body": "Thanks @apolcyn ! In case this wasn't clear from what I wrote above: I only posted here to help others whose code might have broken in the same way.\r\n\r\nI am OK with the new behavior of the response enumerators."
  }
]
