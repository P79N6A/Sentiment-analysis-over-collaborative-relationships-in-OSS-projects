[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/373187301",
    "html_url": "https://github.com/grpc/grpc/issues/14713#issuecomment-373187301",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14713",
    "id": 373187301,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MzE4NzMwMQ==",
    "user": {
      "login": "ZhouyihaiDing",
      "id": 28968539,
      "node_id": "MDQ6VXNlcjI4OTY4NTM5",
      "avatar_url": "https://avatars3.githubusercontent.com/u/28968539?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ZhouyihaiDing",
      "html_url": "https://github.com/ZhouyihaiDing",
      "followers_url": "https://api.github.com/users/ZhouyihaiDing/followers",
      "following_url": "https://api.github.com/users/ZhouyihaiDing/following{/other_user}",
      "gists_url": "https://api.github.com/users/ZhouyihaiDing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ZhouyihaiDing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ZhouyihaiDing/subscriptions",
      "organizations_url": "https://api.github.com/users/ZhouyihaiDing/orgs",
      "repos_url": "https://api.github.com/users/ZhouyihaiDing/repos",
      "events_url": "https://api.github.com/users/ZhouyihaiDing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ZhouyihaiDing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-14T21:52:49Z",
    "updated_at": "2018-03-14T21:52:49Z",
    "author_association": "CONTRIBUTOR",
    "body": "The only changes in the php part are https://github.com/grpc/grpc/pull/14167 and https://github.com/grpc/grpc/pull/14149. I am going to patch this 2 PRs into v1.8.5 to check it is caused by core or php extension."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/373194572",
    "html_url": "https://github.com/grpc/grpc/issues/14713#issuecomment-373194572",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14713",
    "id": 373194572,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MzE5NDU3Mg==",
    "user": {
      "login": "ZhouyihaiDing",
      "id": 28968539,
      "node_id": "MDQ6VXNlcjI4OTY4NTM5",
      "avatar_url": "https://avatars3.githubusercontent.com/u/28968539?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ZhouyihaiDing",
      "html_url": "https://github.com/ZhouyihaiDing",
      "followers_url": "https://api.github.com/users/ZhouyihaiDing/followers",
      "following_url": "https://api.github.com/users/ZhouyihaiDing/following{/other_user}",
      "gists_url": "https://api.github.com/users/ZhouyihaiDing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ZhouyihaiDing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ZhouyihaiDing/subscriptions",
      "organizations_url": "https://api.github.com/users/ZhouyihaiDing/orgs",
      "repos_url": "https://api.github.com/users/ZhouyihaiDing/repos",
      "events_url": "https://api.github.com/users/ZhouyihaiDing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ZhouyihaiDing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-14T22:21:47Z",
    "updated_at": "2018-03-14T22:22:21Z",
    "author_association": "CONTRIBUTOR",
    "body": "Caused with gRPC PHP extension part. With core 1.9.0, persistent channel works well when installing php extension coped from 1.8.6."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/373260269",
    "html_url": "https://github.com/grpc/grpc/issues/14713#issuecomment-373260269",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14713",
    "id": 373260269,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MzI2MDI2OQ==",
    "user": {
      "login": "ZhouyihaiDing",
      "id": 28968539,
      "node_id": "MDQ6VXNlcjI4OTY4NTM5",
      "avatar_url": "https://avatars3.githubusercontent.com/u/28968539?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ZhouyihaiDing",
      "html_url": "https://github.com/ZhouyihaiDing",
      "followers_url": "https://api.github.com/users/ZhouyihaiDing/followers",
      "following_url": "https://api.github.com/users/ZhouyihaiDing/following{/other_user}",
      "gists_url": "https://api.github.com/users/ZhouyihaiDing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ZhouyihaiDing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ZhouyihaiDing/subscriptions",
      "organizations_url": "https://api.github.com/users/ZhouyihaiDing/orgs",
      "repos_url": "https://api.github.com/users/ZhouyihaiDing/repos",
      "events_url": "https://api.github.com/users/ZhouyihaiDing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ZhouyihaiDing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-15T04:51:56Z",
    "updated_at": "2018-03-15T04:51:56Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hi  @axot\r\nI think [this 3 lines](https://github.com/grpc/grpc/blob/master/src/php/ext/grpc/channel.c#L87) delete the persistent channel at the end of the request, which lead to the unexpected behavior. I am trying to fix it ASAP.\r\n\r\nIn the mean time, can you please help me to double verify it in your environment by deleting those 3 lines in `src/php/ext/grpc/channel.c` and then [install the grpc from the source](https://github.com/grpc/grpc/tree/master/src/php#build-from-source)?\r\n```\r\n    if (p->wrapper->ref_count == 0) {\r\n      is_last_wrapper = true;\r\n    }\r\n```\r\n\r\nThe command installing gRPC php extension looks like below:\r\n```\r\n# install pre-request:\r\nsudo apt-get install build-essential autoconf libtool\r\nsudo apt-get install zip unzip zlib1g-dev\r\n\r\n# download grpc\r\ngit clone https://github.com/grpc/grpc.git\r\ncd grpc\r\ngit checkout v1.10.0\r\ngit submodule update --init\r\n# vim config.m4 and change CXXFLAGS=\"-std=c++11\" to CXXFLAGS=\"-std=c++11 -fno-exceptions -fno-rtti\"\r\n\r\n# install protobuf\r\ncd third_party/protobuf\r\n./autogen.sh\r\n./configure\r\nmake -j8\r\nsudo make install\r\nexport LD_LIBRARY_PATH=/usr/local/lib\r\ncd ../..\r\n\r\n#install grpc\r\nmake -j8\r\nsudo make install\r\n\r\n# install grpc php extension\r\ncd src/php/ext/grpc\r\nphpize\r\n./configure\r\n# vim channel.c and remove line 86-89\r\nmake\r\nsudo make install\r\n```\r\nThen if you run `php -d extension=grpc.so --re grpc | head -1`, you can see the version of grpc.\r\n\r\nThank you for your help!"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/373266813",
    "html_url": "https://github.com/grpc/grpc/issues/14713#issuecomment-373266813",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14713",
    "id": 373266813,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MzI2NjgxMw==",
    "user": {
      "login": "axot",
      "id": 611054,
      "node_id": "MDQ6VXNlcjYxMTA1NA==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/611054?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/axot",
      "html_url": "https://github.com/axot",
      "followers_url": "https://api.github.com/users/axot/followers",
      "following_url": "https://api.github.com/users/axot/following{/other_user}",
      "gists_url": "https://api.github.com/users/axot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/axot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/axot/subscriptions",
      "organizations_url": "https://api.github.com/users/axot/orgs",
      "repos_url": "https://api.github.com/users/axot/repos",
      "events_url": "https://api.github.com/users/axot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/axot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-15T05:39:16Z",
    "updated_at": "2018-03-15T05:39:16Z",
    "author_association": "CONTRIBUTOR",
    "body": "@ZhouyihaiDing I'm beginning to verity this patch ;D"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/373269641",
    "html_url": "https://github.com/grpc/grpc/issues/14713#issuecomment-373269641",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14713",
    "id": 373269641,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MzI2OTY0MQ==",
    "user": {
      "login": "axot",
      "id": 611054,
      "node_id": "MDQ6VXNlcjYxMTA1NA==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/611054?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/axot",
      "html_url": "https://github.com/axot",
      "followers_url": "https://api.github.com/users/axot/followers",
      "following_url": "https://api.github.com/users/axot/following{/other_user}",
      "gists_url": "https://api.github.com/users/axot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/axot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/axot/subscriptions",
      "organizations_url": "https://api.github.com/users/axot/orgs",
      "repos_url": "https://api.github.com/users/axot/repos",
      "events_url": "https://api.github.com/users/axot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/axot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-15T05:59:07Z",
    "updated_at": "2018-03-15T05:59:07Z",
    "author_association": "CONTRIBUTOR",
    "body": "@ZhouyihaiDing Here is the result:\r\n\r\n## version\r\n```\r\n$ php --re grpc | head -1\r\nExtension [ <persistent> extension #57 grpc version 1.10.0 ] {\r\n```\r\n\r\n## without php-fpm\r\n```\r\n$ php public/healthcheck/index2.php\r\npid: 13625\r\nGRPC Version: 1.10.0\r\nWarmup: 0.131 milliseconds\r\n1 Query: 230.905 milliseconds\r\n2 Query: 38.252 milliseconds\r\n3 Query: 3.811 milliseconds\r\n4 Query: 9.742 milliseconds\r\n5 Query: 3.904 milliseconds\r\n6 Query: 3.639 milliseconds\r\n7 Query: 3.880 milliseconds\r\n8 Query: 3.420 milliseconds\r\n9 Query: 3.127 milliseconds\r\n10 Query: 3.801 milliseconds\r\n```\r\n\r\n## with php-fpm\r\n```\r\npid: 13479\r\nGRPC Version: 1.10.0\r\nWarmup: 0.116 milliseconds\r\n1 Query: 10.957 milliseconds\r\n2 Query: 3.691 milliseconds\r\n3 Query: 3.736 milliseconds\r\n4 Query: 2.715 milliseconds\r\n5 Query: 2.599 milliseconds\r\n6 Query: 2.551 milliseconds\r\n7 Query: 2.755 milliseconds\r\n8 Query: 3.369 milliseconds\r\n9 Query: 2.547 milliseconds\r\n10 Query: 3.147 milliseconds\r\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/373435519",
    "html_url": "https://github.com/grpc/grpc/issues/14713#issuecomment-373435519",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14713",
    "id": 373435519,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MzQzNTUxOQ==",
    "user": {
      "login": "ZhouyihaiDing",
      "id": 28968539,
      "node_id": "MDQ6VXNlcjI4OTY4NTM5",
      "avatar_url": "https://avatars3.githubusercontent.com/u/28968539?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ZhouyihaiDing",
      "html_url": "https://github.com/ZhouyihaiDing",
      "followers_url": "https://api.github.com/users/ZhouyihaiDing/followers",
      "following_url": "https://api.github.com/users/ZhouyihaiDing/following{/other_user}",
      "gists_url": "https://api.github.com/users/ZhouyihaiDing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ZhouyihaiDing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ZhouyihaiDing/subscriptions",
      "organizations_url": "https://api.github.com/users/ZhouyihaiDing/orgs",
      "repos_url": "https://api.github.com/users/ZhouyihaiDing/repos",
      "events_url": "https://api.github.com/users/ZhouyihaiDing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ZhouyihaiDing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-15T16:20:26Z",
    "updated_at": "2018-03-15T17:29:37Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thanks @axot \r\n\r\nIn the upstream issue, the first connection of v1.10.0 takes around 1s which looks strange, because this patch only prevent the channel been deleted at the end of the script. Maybe this 230ms is using the cache of something in the previews RPC, but still need to fetch something from the auth or backend?\r\n\r\nAnd in the php-fpm mode, 10ms seems like it is reuse everything. I guess if part of the channel like auth or credentials can be reused, it may be ~200ms, and if non of them can be reused(or deleted), then it will be ~1s.\r\n\r\nIt seems removing those 3 lines can solve the persistent channel issue temporarily in your environment too. I'll focus on making a better solution for it ASAP.\r\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/373580424",
    "html_url": "https://github.com/grpc/grpc/issues/14713#issuecomment-373580424",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14713",
    "id": 373580424,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MzU4MDQyNA==",
    "user": {
      "login": "axot",
      "id": 611054,
      "node_id": "MDQ6VXNlcjYxMTA1NA==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/611054?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/axot",
      "html_url": "https://github.com/axot",
      "followers_url": "https://api.github.com/users/axot/followers",
      "following_url": "https://api.github.com/users/axot/following{/other_user}",
      "gists_url": "https://api.github.com/users/axot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/axot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/axot/subscriptions",
      "organizations_url": "https://api.github.com/users/axot/orgs",
      "repos_url": "https://api.github.com/users/axot/repos",
      "events_url": "https://api.github.com/users/axot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/axot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-16T02:03:47Z",
    "updated_at": "2018-03-16T02:28:39Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thanks for your nice work @ZhouyihaiDing !\r\n\r\nIt's wired the patch which fixed `persistent channel` should not boost the first connection from ~1000ms to ~200ms. Without php-fpm `persistent channel` will not work with php itself right?\r\n\r\nBy the way, my test script was using `FilesystemAdapter` as cache. Maybe related to this issue.\r\n```\r\n$cacheItemPool = new FilesystemAdapter();\r\n$sessionPool = new CacheSessionPool($cacheItemPool, ['minSessions' => 1,  'maxSessions' => 1]);\r\n```\r\n\r\nI will check network stack today."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/373586667",
    "html_url": "https://github.com/grpc/grpc/issues/14713#issuecomment-373586667",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14713",
    "id": 373586667,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MzU4NjY2Nw==",
    "user": {
      "login": "axot",
      "id": 611054,
      "node_id": "MDQ6VXNlcjYxMTA1NA==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/611054?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/axot",
      "html_url": "https://github.com/axot",
      "followers_url": "https://api.github.com/users/axot/followers",
      "following_url": "https://api.github.com/users/axot/following{/other_user}",
      "gists_url": "https://api.github.com/users/axot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/axot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/axot/subscriptions",
      "organizations_url": "https://api.github.com/users/axot/orgs",
      "repos_url": "https://api.github.com/users/axot/repos",
      "events_url": "https://api.github.com/users/axot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/axot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-16T02:44:29Z",
    "updated_at": "2018-03-16T02:57:06Z",
    "author_association": "CONTRIBUTOR",
    "body": "Some updates here, the `1 Query` of patch vs original are 245.656ms and 500.166ms respectively, but the tcplife is almost at same level 230.41ms and 191.12ms, so I guess there are some overheads.\r\n\r\n## patched 1.10.0\r\n```\r\nGRPC Version: 1.10.0\r\nPID    COMM        LADDR              LPORT  RADDR                  RPORT  TX_KB  RX_KB  MS\r\n32442  grpc_execu  ::ffff:10.22.0.10  37948  ::ffff:172.217.25.74   443    7      5      942.79\r\n32491  grpc_execu  ::ffff:10.22.0.10  38584  ::ffff:172.217.25.202  443    6      5      230.41\r\n\r\nGRPC Version: 1.10.0\r\nWarmup: 0.108 milliseconds\r\n1 Query: 245.656 milliseconds\r\n2 Query: 48.934 milliseconds\r\n3 Query: 4.811 milliseconds\r\n4 Query: 9.284 milliseconds\r\n5 Query: 3.965 milliseconds\r\n6 Query: 3.683 milliseconds\r\n7 Query: 8.677 milliseconds\r\n8 Query: 9.088 milliseconds\r\n9 Query: 3.934 milliseconds\r\n10 Query: 3.288 milliseconds\r\n```\r\n\r\n![Flame graph of patch](https://user-images.githubusercontent.com/611054/37501297-0966536e-2911-11e8-8f68-9b24892e700b.png)\r\n\r\n## original 1.10.0\r\n```\r\nPID  COMM        LADDR              LPORT  RADDR                  RPORT  TX_KB  RX_KB  MS\r\n882  grpc_execu  ::ffff:10.22.0.10  38388  ::ffff:172.217.24.138  443    7      5      807.20\r\n907  grpc_execu  ::ffff:10.22.0.10  38300  ::ffff:172.217.25.74   443    6      5      191.12\r\n\r\nGRPC Version: 1.10.0\r\nWarmup: 0.130 milliseconds\r\n1 Query: 500.166 milliseconds\r\n2 Query: 41.561 milliseconds\r\n3 Query: 3.880 milliseconds\r\n4 Query: 3.247 milliseconds\r\n5 Query: 3.436 milliseconds\r\n6 Query: 4.213 milliseconds\r\n7 Query: 3.204 milliseconds\r\n8 Query: 3.669 milliseconds\r\n9 Query: 3.071 milliseconds\r\n10 Query: 3.661 milliseconds\r\n```\r\n\r\n![Flame graph of original](https://user-images.githubusercontent.com/611054/37501300-0d8c1384-2911-11e8-835b-5a256c09743c.png)\r\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/373604085",
    "html_url": "https://github.com/grpc/grpc/issues/14713#issuecomment-373604085",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14713",
    "id": 373604085,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MzYwNDA4NQ==",
    "user": {
      "login": "axot",
      "id": 611054,
      "node_id": "MDQ6VXNlcjYxMTA1NA==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/611054?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/axot",
      "html_url": "https://github.com/axot",
      "followers_url": "https://api.github.com/users/axot/followers",
      "following_url": "https://api.github.com/users/axot/following{/other_user}",
      "gists_url": "https://api.github.com/users/axot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/axot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/axot/subscriptions",
      "organizations_url": "https://api.github.com/users/axot/orgs",
      "repos_url": "https://api.github.com/users/axot/repos",
      "events_url": "https://api.github.com/users/axot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/axot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-16T05:00:59Z",
    "updated_at": "2018-03-19T23:51:36Z",
    "author_association": "CONTRIBUTOR",
    "body": "@ZhouyihaiDing I think I may found what caused this difference. In [pecl-grpc](https://pecl.php.net/get/grpc-1.10.0.tgz) version, it seems did not include `-O2` optimization FLAG, could you confirm this for double check, please?\r\n\r\nwith `-O2`, first warmup boost to 700ms level.\r\n```\r\n$ php test.php\r\npid: 30455\r\nGRPC Version: 1.10.0\r\nWarmup: 709.482 milliseconds\r\n1 Query: 42.361 milliseconds\r\n2 Query: 43.887 milliseconds\r\n3 Query: 4.019 milliseconds\r\n4 Query: 4.230 milliseconds\r\n5 Query: 3.867 milliseconds\r\n6 Query: 4.087 milliseconds\r\n7 Query: 3.273 milliseconds\r\n8 Query: 3.801 milliseconds\r\n9 Query: 3.528 milliseconds\r\n10 Query: 3.315 milliseconds\r\n```\r\n\r\n2nd time\r\n```\r\n$ php test.php\r\npid: 31965\r\nGRPC Version: 1.10.0\r\nWarmup: 0.125 milliseconds\r\n1 Query: 228.961 milliseconds\r\n2 Query: 43.513 milliseconds\r\n3 Query: 3.129 milliseconds\r\n4 Query: 3.533 milliseconds\r\n5 Query: 3.830 milliseconds\r\n6 Query: 3.424 milliseconds\r\n7 Query: 2.813 milliseconds\r\n8 Query: 3.616 milliseconds\r\n9 Query: 3.302 milliseconds\r\n10 Query: 4.061 milliseconds\r\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/373807494",
    "html_url": "https://github.com/grpc/grpc/issues/14713#issuecomment-373807494",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14713",
    "id": 373807494,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MzgwNzQ5NA==",
    "user": {
      "login": "tmatsuo",
      "id": 41815,
      "node_id": "MDQ6VXNlcjQxODE1",
      "avatar_url": "https://avatars2.githubusercontent.com/u/41815?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tmatsuo",
      "html_url": "https://github.com/tmatsuo",
      "followers_url": "https://api.github.com/users/tmatsuo/followers",
      "following_url": "https://api.github.com/users/tmatsuo/following{/other_user}",
      "gists_url": "https://api.github.com/users/tmatsuo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tmatsuo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tmatsuo/subscriptions",
      "organizations_url": "https://api.github.com/users/tmatsuo/orgs",
      "repos_url": "https://api.github.com/users/tmatsuo/repos",
      "events_url": "https://api.github.com/users/tmatsuo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tmatsuo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-16T18:38:51Z",
    "updated_at": "2018-03-16T18:38:51Z",
    "author_association": "NONE",
    "body": "@axot Re: cache, I recommend that you use sth like sysv cache (https://github.com/GoogleCloudPlatform/google-cloud-php/issues/819#issuecomment-365461933) because it is super fast. Only caveat is that this only works on *nix systems.\r\n\r\nThe sysv cache can be shared among processes, so that you can warm up the cache at the server startup once, then all the other processes will benefit from this."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/373883286",
    "html_url": "https://github.com/grpc/grpc/issues/14713#issuecomment-373883286",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14713",
    "id": 373883286,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3Mzg4MzI4Ng==",
    "user": {
      "login": "axot",
      "id": 611054,
      "node_id": "MDQ6VXNlcjYxMTA1NA==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/611054?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/axot",
      "html_url": "https://github.com/axot",
      "followers_url": "https://api.github.com/users/axot/followers",
      "following_url": "https://api.github.com/users/axot/following{/other_user}",
      "gists_url": "https://api.github.com/users/axot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/axot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/axot/subscriptions",
      "organizations_url": "https://api.github.com/users/axot/orgs",
      "repos_url": "https://api.github.com/users/axot/repos",
      "events_url": "https://api.github.com/users/axot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/axot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-17T01:21:03Z",
    "updated_at": "2018-03-17T07:27:36Z",
    "author_association": "CONTRIBUTOR",
    "body": "@tmatsuo Thank you for providing a shared memory cache implementation. I'll try this in next week."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/377468050",
    "html_url": "https://github.com/grpc/grpc/issues/14713#issuecomment-377468050",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14713",
    "id": 377468050,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3NzQ2ODA1MA==",
    "user": {
      "login": "axot",
      "id": 611054,
      "node_id": "MDQ6VXNlcjYxMTA1NA==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/611054?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/axot",
      "html_url": "https://github.com/axot",
      "followers_url": "https://api.github.com/users/axot/followers",
      "following_url": "https://api.github.com/users/axot/following{/other_user}",
      "gists_url": "https://api.github.com/users/axot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/axot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/axot/subscriptions",
      "organizations_url": "https://api.github.com/users/axot/orgs",
      "repos_url": "https://api.github.com/users/axot/repos",
      "events_url": "https://api.github.com/users/axot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/axot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-30T07:41:24Z",
    "updated_at": "2018-03-30T07:41:24Z",
    "author_association": "CONTRIBUTOR",
    "body": "@ZhouyihaiDing Any progress of persistent channel management could share ;D"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/377565816",
    "html_url": "https://github.com/grpc/grpc/issues/14713#issuecomment-377565816",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14713",
    "id": 377565816,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3NzU2NTgxNg==",
    "user": {
      "login": "ZhouyihaiDing",
      "id": 28968539,
      "node_id": "MDQ6VXNlcjI4OTY4NTM5",
      "avatar_url": "https://avatars3.githubusercontent.com/u/28968539?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ZhouyihaiDing",
      "html_url": "https://github.com/ZhouyihaiDing",
      "followers_url": "https://api.github.com/users/ZhouyihaiDing/followers",
      "following_url": "https://api.github.com/users/ZhouyihaiDing/following{/other_user}",
      "gists_url": "https://api.github.com/users/ZhouyihaiDing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ZhouyihaiDing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ZhouyihaiDing/subscriptions",
      "organizations_url": "https://api.github.com/users/ZhouyihaiDing/orgs",
      "repos_url": "https://api.github.com/users/ZhouyihaiDing/repos",
      "events_url": "https://api.github.com/users/ZhouyihaiDing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ZhouyihaiDing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-30T16:40:03Z",
    "updated_at": "2018-03-30T16:40:03Z",
    "author_association": "CONTRIBUTOR",
    "body": "@axot I have a [draft PR](https://github.com/ZhouyihaiDing/grpc/pull/13) to my own repo so far and am  working on it."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/388890464",
    "html_url": "https://github.com/grpc/grpc/issues/14713#issuecomment-388890464",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14713",
    "id": 388890464,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4ODg5MDQ2NA==",
    "user": {
      "login": "ZhouyihaiDing",
      "id": 28968539,
      "node_id": "MDQ6VXNlcjI4OTY4NTM5",
      "avatar_url": "https://avatars3.githubusercontent.com/u/28968539?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ZhouyihaiDing",
      "html_url": "https://github.com/ZhouyihaiDing",
      "followers_url": "https://api.github.com/users/ZhouyihaiDing/followers",
      "following_url": "https://api.github.com/users/ZhouyihaiDing/following{/other_user}",
      "gists_url": "https://api.github.com/users/ZhouyihaiDing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ZhouyihaiDing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ZhouyihaiDing/subscriptions",
      "organizations_url": "https://api.github.com/users/ZhouyihaiDing/orgs",
      "repos_url": "https://api.github.com/users/ZhouyihaiDing/repos",
      "events_url": "https://api.github.com/users/ZhouyihaiDing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ZhouyihaiDing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-14T17:03:50Z",
    "updated_at": "2018-05-14T17:09:06Z",
    "author_association": "CONTRIBUTOR",
    "body": "It should be solved by #15218.\r\nThe memory usage is protected by the upper bound for each target, so that the memory won't go infinite if keeping create new channels under php-fpm mode.\r\nBy default, each target can persist one channel, which can be re-used if the next script creates a same channel/client. The upper bound can be set as `\"grpc_target_persist_bound\" => $bound`.\r\neg:\r\n```\r\n$channel = new Grpc\\Channel('spanner.googleapis.com', [\r\n           \"grpc_target_persist_bound\" => 3,\r\n]);\r\n$stub = new HelloWorldClient('spanner.googleapis.com', [\r\n           \"grpc_target_persist_bound\" => 3,\r\n]);\r\n```"
  }
]
