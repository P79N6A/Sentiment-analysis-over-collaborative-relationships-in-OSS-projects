[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/303474086",
    "html_url": "https://github.com/grpc/grpc/issues/11110#issuecomment-303474086",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11110",
    "id": 303474086,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwMzQ3NDA4Ng==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-05-23T17:28:40Z",
    "updated_at": "2017-05-23T17:28:40Z",
    "author_association": "CONTRIBUTOR",
    "body": "What platform are you running on? What grpc version?\r\nCan you provide some details on what is the error that's happening with the call? (problems likely printed to the console once you enable more logging).\r\n\r\nEnabling more logging:\r\n`GrpcEnvironment.SetLogger(new TextWriterLogger(Console.Error));`\r\nand set environment variable `GRPC_VERBOSITY=debug`"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/304775207",
    "html_url": "https://github.com/grpc/grpc/issues/11110#issuecomment-304775207",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11110",
    "id": 304775207,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwNDc3NTIwNw==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-05-30T05:01:05Z",
    "updated_at": "2017-05-30T05:01:05Z",
    "author_association": "CONTRIBUTOR",
    "body": "Can you please update the issue with more details as requested?"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/304776480",
    "html_url": "https://github.com/grpc/grpc/issues/11110#issuecomment-304776480",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11110",
    "id": 304776480,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwNDc3NjQ4MA==",
    "user": {
      "login": "AhmadChaker",
      "id": 20714770,
      "node_id": "MDQ6VXNlcjIwNzE0Nzcw",
      "avatar_url": "https://avatars1.githubusercontent.com/u/20714770?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AhmadChaker",
      "html_url": "https://github.com/AhmadChaker",
      "followers_url": "https://api.github.com/users/AhmadChaker/followers",
      "following_url": "https://api.github.com/users/AhmadChaker/following{/other_user}",
      "gists_url": "https://api.github.com/users/AhmadChaker/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AhmadChaker/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AhmadChaker/subscriptions",
      "organizations_url": "https://api.github.com/users/AhmadChaker/orgs",
      "repos_url": "https://api.github.com/users/AhmadChaker/repos",
      "events_url": "https://api.github.com/users/AhmadChaker/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AhmadChaker/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-05-30T05:12:21Z",
    "updated_at": "2017-05-30T05:12:21Z",
    "author_association": "NONE",
    "body": "I am running this on Windows with Grpc version 1.2.0 and also 1.3.0.\r\nI will attempt to run the tests again with that flag set."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/304790475",
    "html_url": "https://github.com/grpc/grpc/issues/11110#issuecomment-304790475",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11110",
    "id": 304790475,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwNDc5MDQ3NQ==",
    "user": {
      "login": "AhmadChaker",
      "id": 20714770,
      "node_id": "MDQ6VXNlcjIwNzE0Nzcw",
      "avatar_url": "https://avatars1.githubusercontent.com/u/20714770?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AhmadChaker",
      "html_url": "https://github.com/AhmadChaker",
      "followers_url": "https://api.github.com/users/AhmadChaker/followers",
      "following_url": "https://api.github.com/users/AhmadChaker/following{/other_user}",
      "gists_url": "https://api.github.com/users/AhmadChaker/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AhmadChaker/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AhmadChaker/subscriptions",
      "organizations_url": "https://api.github.com/users/AhmadChaker/orgs",
      "repos_url": "https://api.github.com/users/AhmadChaker/repos",
      "events_url": "https://api.github.com/users/AhmadChaker/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AhmadChaker/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-05-30T06:54:11Z",
    "updated_at": "2017-05-30T06:55:12Z",
    "author_association": "NONE",
    "body": "Ok with that logging enabled, on the server side, the following exception appears for every stream call from the client:\r\n![image](https://cloud.githubusercontent.com/assets/20714770/26571289/9894c392-4558-11e7-9c89-7eaf0e2db138.png)\r\nThose get handled successfully though, it's quite bizarre because this occurs in literally every call. \r\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/307186407",
    "html_url": "https://github.com/grpc/grpc/issues/11110#issuecomment-307186407",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11110",
    "id": 307186407,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwNzE4NjQwNw==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-06-08T18:21:50Z",
    "updated_at": "2017-06-08T18:21:50Z",
    "author_association": "CONTRIBUTOR",
    "body": "I've looked at your code again and here's the problem:\r\n\r\n```\r\nusing (var call = _client.Send())\r\n{\r\n                await call.RequestStream.WriteAsync(capsule);\r\n                await call.RequestStream.WriteAsync(capsule);\r\n                await call.RequestStream.CompleteAsync();\r\n}\r\n```\r\n\r\nWhat this means is you send a two messages, then close request stream, but you don't  await the result of the call (`var result = await call;` or `var result = await call.ResponseAsync`).\r\nThe semantics of call.Dispose()  (invoked by the `using` block) is to Cancel the call if it hasn't finished successfully yet (call is treated as finished if response/error has been received) - that explains the cancelled flag being set to true. The exception on the server side signals that call has already been cancelled (so sending a response cannot be successful).\r\ngRPC is not \"losing\" any packets, the client cancels the call  before they can be delivered.\r\n\r\nFixed code:\r\n```\r\nusing (var call = _client.Send())\r\n{\r\n                await call.RequestStream.WriteAsync(capsule);\r\n                await call.RequestStream.WriteAsync(capsule);\r\n                await call.RequestStream.CompleteAsync();\r\n                var result = await call;\r\n}\r\n```\r\n\r\nThis doesn't look like a gRPC issue, so I'm going to close it now."
  }
]
