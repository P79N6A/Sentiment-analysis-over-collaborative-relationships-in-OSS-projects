[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/121280512",
    "html_url": "https://github.com/grpc/grpc/issues/2423#issuecomment-121280512",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/2423",
    "id": 121280512,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyMTI4MDUxMg==",
    "user": {
      "login": "larsonmpdx",
      "id": 12436438,
      "node_id": "MDQ6VXNlcjEyNDM2NDM4",
      "avatar_url": "https://avatars2.githubusercontent.com/u/12436438?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/larsonmpdx",
      "html_url": "https://github.com/larsonmpdx",
      "followers_url": "https://api.github.com/users/larsonmpdx/followers",
      "following_url": "https://api.github.com/users/larsonmpdx/following{/other_user}",
      "gists_url": "https://api.github.com/users/larsonmpdx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/larsonmpdx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/larsonmpdx/subscriptions",
      "organizations_url": "https://api.github.com/users/larsonmpdx/orgs",
      "repos_url": "https://api.github.com/users/larsonmpdx/repos",
      "events_url": "https://api.github.com/users/larsonmpdx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/larsonmpdx/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-07-14T15:21:24Z",
    "updated_at": "2015-07-14T15:21:24Z",
    "author_association": "NONE",
    "body": "try manually setting the thead pool size:\n\n```\n    ServerBuilder builder;\n    builder.AddListeningPort(server_address, grpc::InsecureServerCredentials());\nMyServiceImpl service;\n    builder.RegisterService(&service);\n\n    grpc::ThreadPool thread_pool_(10);\n    builder.SetThreadPool(&thread_pool_); //if this isn't run, then BuildAndStart makes its own threadpool with size equal to the number of detected cores\n\n    std::unique_ptr<Server> server(builder.BuildAndStart());\n    LOG(INFO) << \"Server up and listening on \" << FLAGS_address;\n    server->Wait();\n```\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/121288257",
    "html_url": "https://github.com/grpc/grpc/issues/2423#issuecomment-121288257",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/2423",
    "id": 121288257,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyMTI4ODI1Nw==",
    "user": {
      "login": "vjpai",
      "id": 8864912,
      "node_id": "MDQ6VXNlcjg4NjQ5MTI=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/8864912?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vjpai",
      "html_url": "https://github.com/vjpai",
      "followers_url": "https://api.github.com/users/vjpai/followers",
      "following_url": "https://api.github.com/users/vjpai/following{/other_user}",
      "gists_url": "https://api.github.com/users/vjpai/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vjpai/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vjpai/subscriptions",
      "organizations_url": "https://api.github.com/users/vjpai/orgs",
      "repos_url": "https://api.github.com/users/vjpai/repos",
      "events_url": "https://api.github.com/users/vjpai/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vjpai/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-07-14T15:54:02Z",
    "updated_at": "2015-07-14T15:54:02Z",
    "author_association": "MEMBER",
    "body": "I agree with @larsonmpdx . Keep in mind that the stream->Read() operation that you use in Process() above is a blocking call. In practice, this means that concurrently processing N synchronous streaming RPCs requires at least that many threads in the server thread pool. If you can't support that many threads but do need to use streaming, asynchronous RPCs are a good alternative.\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/121288516",
    "html_url": "https://github.com/grpc/grpc/issues/2423#issuecomment-121288516",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/2423",
    "id": 121288516,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyMTI4ODUxNg==",
    "user": {
      "login": "vjpai",
      "id": 8864912,
      "node_id": "MDQ6VXNlcjg4NjQ5MTI=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/8864912?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vjpai",
      "html_url": "https://github.com/vjpai",
      "followers_url": "https://api.github.com/users/vjpai/followers",
      "following_url": "https://api.github.com/users/vjpai/following{/other_user}",
      "gists_url": "https://api.github.com/users/vjpai/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vjpai/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vjpai/subscriptions",
      "organizations_url": "https://api.github.com/users/vjpai/orgs",
      "repos_url": "https://api.github.com/users/vjpai/repos",
      "events_url": "https://api.github.com/users/vjpai/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vjpai/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-07-14T15:55:09Z",
    "updated_at": "2015-07-14T15:55:09Z",
    "author_association": "MEMBER",
    "body": "Did the above discussion help? If so, we can consider this issue closed.\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/121515492",
    "html_url": "https://github.com/grpc/grpc/issues/2423#issuecomment-121515492",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/2423",
    "id": 121515492,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyMTUxNTQ5Mg==",
    "user": {
      "login": "kianooshm",
      "id": 12394155,
      "node_id": "MDQ6VXNlcjEyMzk0MTU1",
      "avatar_url": "https://avatars3.githubusercontent.com/u/12394155?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kianooshm",
      "html_url": "https://github.com/kianooshm",
      "followers_url": "https://api.github.com/users/kianooshm/followers",
      "following_url": "https://api.github.com/users/kianooshm/following{/other_user}",
      "gists_url": "https://api.github.com/users/kianooshm/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kianooshm/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kianooshm/subscriptions",
      "organizations_url": "https://api.github.com/users/kianooshm/orgs",
      "repos_url": "https://api.github.com/users/kianooshm/repos",
      "events_url": "https://api.github.com/users/kianooshm/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kianooshm/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-07-15T07:34:06Z",
    "updated_at": "2015-07-15T07:34:06Z",
    "author_association": "NONE",
    "body": "Thank larsonmpdx and vjpai for the responses.\n\nFirst, I can't seem to find `ThreadPool` in grpc headers; it's only `ThreadPoolInterface`. `ThreadPool` and its makers (e.g. `ThreadPoolInterface* CreateDefaultThreadPool()`) are part of the grpc source (`src/cpp/server/`) which I've copied next to my project right now to get it working. Am I missing something or it was forgotten to expose `thread_poo.h` in the headers?\n\nSecond, as for considering this issue closed, IMHO the _least_ is to document this limitation somewhere, since it's only likely that others run into this. The _ideal_ would be a dynamic thread pool which I understand is far fetched.\n\nThird, the grpc bug still exists: if there is a shortage of threads in the pool, it's understandable that new connections don't get created. But why do existing connections get stuck/deadlocked?\n\nThanks a lot.\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/121651231",
    "html_url": "https://github.com/grpc/grpc/issues/2423#issuecomment-121651231",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/2423",
    "id": 121651231,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyMTY1MTIzMQ==",
    "user": {
      "login": "larsonmpdx",
      "id": 12436438,
      "node_id": "MDQ6VXNlcjEyNDM2NDM4",
      "avatar_url": "https://avatars2.githubusercontent.com/u/12436438?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/larsonmpdx",
      "html_url": "https://github.com/larsonmpdx",
      "followers_url": "https://api.github.com/users/larsonmpdx/followers",
      "following_url": "https://api.github.com/users/larsonmpdx/following{/other_user}",
      "gists_url": "https://api.github.com/users/larsonmpdx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/larsonmpdx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/larsonmpdx/subscriptions",
      "organizations_url": "https://api.github.com/users/larsonmpdx/orgs",
      "repos_url": "https://api.github.com/users/larsonmpdx/repos",
      "events_url": "https://api.github.com/users/larsonmpdx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/larsonmpdx/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-07-15T15:24:47Z",
    "updated_at": "2015-07-15T15:24:47Z",
    "author_association": "NONE",
    "body": "#include \"../../grpc/src/cpp/server/thread_pool.h\"\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/121659548",
    "html_url": "https://github.com/grpc/grpc/issues/2423#issuecomment-121659548",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/2423",
    "id": 121659548,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyMTY1OTU0OA==",
    "user": {
      "login": "ctiller",
      "id": 10120821,
      "node_id": "MDQ6VXNlcjEwMTIwODIx",
      "avatar_url": "https://avatars3.githubusercontent.com/u/10120821?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ctiller",
      "html_url": "https://github.com/ctiller",
      "followers_url": "https://api.github.com/users/ctiller/followers",
      "following_url": "https://api.github.com/users/ctiller/following{/other_user}",
      "gists_url": "https://api.github.com/users/ctiller/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ctiller/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ctiller/subscriptions",
      "organizations_url": "https://api.github.com/users/ctiller/orgs",
      "repos_url": "https://api.github.com/users/ctiller/repos",
      "events_url": "https://api.github.com/users/ctiller/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ctiller/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-07-15T15:54:05Z",
    "updated_at": "2015-07-15T15:54:05Z",
    "author_association": "MEMBER",
    "body": "Let's move that header to the public directory.\n\nOn Wed, Jul 15, 2015, 8:25 AM larsonmpdx notifications@github.com wrote:\n\n> #include \"../../grpc/src/cpp/server/thread_pool.h\"\n> \n> —\n> Reply to this email directly or view it on GitHub\n> https://github.com/grpc/grpc/issues/2423#issuecomment-121651231.\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/121672689",
    "html_url": "https://github.com/grpc/grpc/issues/2423#issuecomment-121672689",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/2423",
    "id": 121672689,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyMTY3MjY4OQ==",
    "user": {
      "login": "vjpai",
      "id": 8864912,
      "node_id": "MDQ6VXNlcjg4NjQ5MTI=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/8864912?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vjpai",
      "html_url": "https://github.com/vjpai",
      "followers_url": "https://api.github.com/users/vjpai/followers",
      "following_url": "https://api.github.com/users/vjpai/following{/other_user}",
      "gists_url": "https://api.github.com/users/vjpai/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vjpai/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vjpai/subscriptions",
      "organizations_url": "https://api.github.com/users/vjpai/orgs",
      "repos_url": "https://api.github.com/users/vjpai/repos",
      "events_url": "https://api.github.com/users/vjpai/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vjpai/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-07-15T16:39:08Z",
    "updated_at": "2015-07-15T16:39:08Z",
    "author_association": "MEMBER",
    "body": "Thanks, @kianooshm , for your feedback. I've taken as a task to create a dynamically-sized thread-pool, which will be part of the Beta release. I will tag this issue in the pull request when that is ready. I will also move the thread_pool.h header file to the public headers - it was an oversight to keep it where it is. I'll also followup with a more detailed answer to your 3rd question: the idea of using ample threads is a workaround but there are some cases where it's not specifically necessary. The dynamic pool will account for this fact.\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/121712419",
    "html_url": "https://github.com/grpc/grpc/issues/2423#issuecomment-121712419",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/2423",
    "id": 121712419,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyMTcxMjQxOQ==",
    "user": {
      "login": "larsonmpdx",
      "id": 12436438,
      "node_id": "MDQ6VXNlcjEyNDM2NDM4",
      "avatar_url": "https://avatars2.githubusercontent.com/u/12436438?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/larsonmpdx",
      "html_url": "https://github.com/larsonmpdx",
      "followers_url": "https://api.github.com/users/larsonmpdx/followers",
      "following_url": "https://api.github.com/users/larsonmpdx/following{/other_user}",
      "gists_url": "https://api.github.com/users/larsonmpdx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/larsonmpdx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/larsonmpdx/subscriptions",
      "organizations_url": "https://api.github.com/users/larsonmpdx/orgs",
      "repos_url": "https://api.github.com/users/larsonmpdx/repos",
      "events_url": "https://api.github.com/users/larsonmpdx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/larsonmpdx/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-07-15T18:58:26Z",
    "updated_at": "2015-07-15T18:58:26Z",
    "author_association": "NONE",
    "body": "thank you for working on this, a dynamic thread pool will help my application too\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/121839619",
    "html_url": "https://github.com/grpc/grpc/issues/2423#issuecomment-121839619",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/2423",
    "id": 121839619,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyMTgzOTYxOQ==",
    "user": {
      "login": "kianooshm",
      "id": 12394155,
      "node_id": "MDQ6VXNlcjEyMzk0MTU1",
      "avatar_url": "https://avatars3.githubusercontent.com/u/12394155?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kianooshm",
      "html_url": "https://github.com/kianooshm",
      "followers_url": "https://api.github.com/users/kianooshm/followers",
      "following_url": "https://api.github.com/users/kianooshm/following{/other_user}",
      "gists_url": "https://api.github.com/users/kianooshm/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kianooshm/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kianooshm/subscriptions",
      "organizations_url": "https://api.github.com/users/kianooshm/orgs",
      "repos_url": "https://api.github.com/users/kianooshm/repos",
      "events_url": "https://api.github.com/users/kianooshm/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kianooshm/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-07-16T05:41:00Z",
    "updated_at": "2015-07-16T05:41:00Z",
    "author_association": "NONE",
    "body": "Thank you very much @vjpai. I'm closing the issue.\n"
  }
]
