[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/368985600",
    "html_url": "https://github.com/grpc/grpc/issues/14436#issuecomment-368985600",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14436",
    "id": 368985600,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2ODk4NTYwMA==",
    "user": {
      "login": "kpayson64",
      "id": 18316330,
      "node_id": "MDQ6VXNlcjE4MzE2MzMw",
      "avatar_url": "https://avatars2.githubusercontent.com/u/18316330?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kpayson64",
      "html_url": "https://github.com/kpayson64",
      "followers_url": "https://api.github.com/users/kpayson64/followers",
      "following_url": "https://api.github.com/users/kpayson64/following{/other_user}",
      "gists_url": "https://api.github.com/users/kpayson64/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kpayson64/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kpayson64/subscriptions",
      "organizations_url": "https://api.github.com/users/kpayson64/orgs",
      "repos_url": "https://api.github.com/users/kpayson64/repos",
      "events_url": "https://api.github.com/users/kpayson64/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kpayson64/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-27T18:52:27Z",
    "updated_at": "2018-02-27T18:52:27Z",
    "author_association": "CONTRIBUTOR",
    "body": "ProcessPoolExecutor uses fork() under the hood, which isn't generally supported.  We would like to support this case, so I'll leave this open as a feature request."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/369017547",
    "html_url": "https://github.com/grpc/grpc/issues/14436#issuecomment-369017547",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14436",
    "id": 369017547,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2OTAxNzU0Nw==",
    "user": {
      "login": "decebal",
      "id": 352761,
      "node_id": "MDQ6VXNlcjM1Mjc2MQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/352761?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/decebal",
      "html_url": "https://github.com/decebal",
      "followers_url": "https://api.github.com/users/decebal/followers",
      "following_url": "https://api.github.com/users/decebal/following{/other_user}",
      "gists_url": "https://api.github.com/users/decebal/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/decebal/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/decebal/subscriptions",
      "organizations_url": "https://api.github.com/users/decebal/orgs",
      "repos_url": "https://api.github.com/users/decebal/repos",
      "events_url": "https://api.github.com/users/decebal/events{/privacy}",
      "received_events_url": "https://api.github.com/users/decebal/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-27T20:36:48Z",
    "updated_at": "2018-02-27T20:36:48Z",
    "author_association": "NONE",
    "body": "since I filled this issue I have come to believe that http://grpclib.readthedocs.io/en/latest/ might be a solution for me as it achieves the same purpose but through another mechanism, the asyncio library."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/424223515",
    "html_url": "https://github.com/grpc/grpc/issues/14436#issuecomment-424223515",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14436",
    "id": 424223515,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNDIyMzUxNQ==",
    "user": {
      "login": "rafalkasa",
      "id": 19885116,
      "node_id": "MDQ6VXNlcjE5ODg1MTE2",
      "avatar_url": "https://avatars3.githubusercontent.com/u/19885116?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rafalkasa",
      "html_url": "https://github.com/rafalkasa",
      "followers_url": "https://api.github.com/users/rafalkasa/followers",
      "following_url": "https://api.github.com/users/rafalkasa/following{/other_user}",
      "gists_url": "https://api.github.com/users/rafalkasa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rafalkasa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rafalkasa/subscriptions",
      "organizations_url": "https://api.github.com/users/rafalkasa/orgs",
      "repos_url": "https://api.github.com/users/rafalkasa/repos",
      "events_url": "https://api.github.com/users/rafalkasa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rafalkasa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-09-25T06:34:03Z",
    "updated_at": "2018-09-25T06:34:03Z",
    "author_association": "NONE",
    "body": "Do you know when you planning to add support for `futures.ProcessPoolExecutor` for gRPC python server?\r\nThe python limitation related to GIL (global interpreter lock) is always the issue. Before I started use gRPC server I have good experience with gunicorn where it was possible to start the server with multiprocessing workers https://gunicorn.org/"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/424460942",
    "html_url": "https://github.com/grpc/grpc/issues/14436#issuecomment-424460942",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14436",
    "id": 424460942,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNDQ2MDk0Mg==",
    "user": {
      "login": "srini100",
      "id": 35056280,
      "node_id": "MDQ6VXNlcjM1MDU2Mjgw",
      "avatar_url": "https://avatars2.githubusercontent.com/u/35056280?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/srini100",
      "html_url": "https://github.com/srini100",
      "followers_url": "https://api.github.com/users/srini100/followers",
      "following_url": "https://api.github.com/users/srini100/following{/other_user}",
      "gists_url": "https://api.github.com/users/srini100/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/srini100/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/srini100/subscriptions",
      "organizations_url": "https://api.github.com/users/srini100/orgs",
      "repos_url": "https://api.github.com/users/srini100/repos",
      "events_url": "https://api.github.com/users/srini100/events{/privacy}",
      "received_events_url": "https://api.github.com/users/srini100/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-09-25T18:57:02Z",
    "updated_at": "2018-09-25T18:57:02Z",
    "author_association": "CONTRIBUTOR",
    "body": "@rafalkasa, there is no immediate plan to support fork on the server side. This is low priority for us. The first step here would be to support pre-forking (possibly revive https://github.com/grpc/grpc/issues/13536)."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/440807422",
    "html_url": "https://github.com/grpc/grpc/issues/14436#issuecomment-440807422",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14436",
    "id": 440807422,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MDgwNzQyMg==",
    "user": {
      "login": "mattdornfeld",
      "id": 4313686,
      "node_id": "MDQ6VXNlcjQzMTM2ODY=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/4313686?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mattdornfeld",
      "html_url": "https://github.com/mattdornfeld",
      "followers_url": "https://api.github.com/users/mattdornfeld/followers",
      "following_url": "https://api.github.com/users/mattdornfeld/following{/other_user}",
      "gists_url": "https://api.github.com/users/mattdornfeld/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mattdornfeld/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mattdornfeld/subscriptions",
      "organizations_url": "https://api.github.com/users/mattdornfeld/orgs",
      "repos_url": "https://api.github.com/users/mattdornfeld/repos",
      "events_url": "https://api.github.com/users/mattdornfeld/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mattdornfeld/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-21T21:02:51Z",
    "updated_at": "2018-11-21T21:02:51Z",
    "author_association": "NONE",
    "body": "Could someone explain the motivation for wanting to support ProcessPoolExecutor? Would that allow a grpc server to support more cpu heavy tasks since each request would get its own Python process? What's wrong with ThreadPoolExecutor?"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/440822973",
    "html_url": "https://github.com/grpc/grpc/issues/14436#issuecomment-440822973",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14436",
    "id": 440822973,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MDgyMjk3Mw==",
    "user": {
      "login": "srini100",
      "id": 35056280,
      "node_id": "MDQ6VXNlcjM1MDU2Mjgw",
      "avatar_url": "https://avatars2.githubusercontent.com/u/35056280?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/srini100",
      "html_url": "https://github.com/srini100",
      "followers_url": "https://api.github.com/users/srini100/followers",
      "following_url": "https://api.github.com/users/srini100/following{/other_user}",
      "gists_url": "https://api.github.com/users/srini100/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/srini100/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/srini100/subscriptions",
      "organizations_url": "https://api.github.com/users/srini100/orgs",
      "repos_url": "https://api.github.com/users/srini100/repos",
      "events_url": "https://api.github.com/users/srini100/events{/privacy}",
      "received_events_url": "https://api.github.com/users/srini100/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-21T21:55:23Z",
    "updated_at": "2018-11-21T21:55:23Z",
    "author_association": "CONTRIBUTOR",
    "body": "@mattdornfeld, what you said is right. Concurrency with threads is limited by GIL in a given python process. For CPU intensive tasks, this won't scale with number of cores. Hence ProcessPoolExecutor is needed. "
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/440838347",
    "html_url": "https://github.com/grpc/grpc/issues/14436#issuecomment-440838347",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14436",
    "id": 440838347,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MDgzODM0Nw==",
    "user": {
      "login": "rafalkasa",
      "id": 19885116,
      "node_id": "MDQ6VXNlcjE5ODg1MTE2",
      "avatar_url": "https://avatars3.githubusercontent.com/u/19885116?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rafalkasa",
      "html_url": "https://github.com/rafalkasa",
      "followers_url": "https://api.github.com/users/rafalkasa/followers",
      "following_url": "https://api.github.com/users/rafalkasa/following{/other_user}",
      "gists_url": "https://api.github.com/users/rafalkasa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rafalkasa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rafalkasa/subscriptions",
      "organizations_url": "https://api.github.com/users/rafalkasa/orgs",
      "repos_url": "https://api.github.com/users/rafalkasa/repos",
      "events_url": "https://api.github.com/users/rafalkasa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rafalkasa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-21T22:53:29Z",
    "updated_at": "2018-11-21T22:53:29Z",
    "author_association": "NONE",
    "body": "In the past, I worked on the project where the tasks run on threads limited by GIL making the whole process working slower and slower based on the number of threads that we start. The solution was resolved when we switch from ThreadPoolExecutor to ProcessPoolExecutor. As I remember it was better to not use threads and have one process instead of using python Threads. You can read more about GIL here https://www.dabeaz.com/python/UnderstandingGIL.pdf\r\n\r\nSo maybe this is not your the most important topic, but please to understand that this change will have a significant impact on services run with workers build based gRPC in Python.\r\n\r\nWe will resolve the multiprocessing run multiple instances of gRPC servers on Docker containers, but I would like to have the possibility to use in the future ProcessPoolExecutor. Thank you for your answers."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/440852580",
    "html_url": "https://github.com/grpc/grpc/issues/14436#issuecomment-440852580",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14436",
    "id": 440852580,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MDg1MjU4MA==",
    "user": {
      "login": "srini100",
      "id": 35056280,
      "node_id": "MDQ6VXNlcjM1MDU2Mjgw",
      "avatar_url": "https://avatars2.githubusercontent.com/u/35056280?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/srini100",
      "html_url": "https://github.com/srini100",
      "followers_url": "https://api.github.com/users/srini100/followers",
      "following_url": "https://api.github.com/users/srini100/following{/other_user}",
      "gists_url": "https://api.github.com/users/srini100/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/srini100/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/srini100/subscriptions",
      "organizations_url": "https://api.github.com/users/srini100/orgs",
      "repos_url": "https://api.github.com/users/srini100/repos",
      "events_url": "https://api.github.com/users/srini100/events{/privacy}",
      "received_events_url": "https://api.github.com/users/srini100/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-21T23:50:06Z",
    "updated_at": "2018-11-21T23:50:06Z",
    "author_association": "CONTRIBUTOR",
    "body": "https://github.com/grpc/grpc/issues/16001 has a couple of suggestions to work around this limitation. It is not an ideal solution as it doesn't scale dynamically (you need to pre-allocate set number of processes) but something to consider if thread pool is not working for you."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/441005078",
    "html_url": "https://github.com/grpc/grpc/issues/14436#issuecomment-441005078",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14436",
    "id": 441005078,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MTAwNTA3OA==",
    "user": {
      "login": "decebal",
      "id": 352761,
      "node_id": "MDQ6VXNlcjM1Mjc2MQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/352761?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/decebal",
      "html_url": "https://github.com/decebal",
      "followers_url": "https://api.github.com/users/decebal/followers",
      "following_url": "https://api.github.com/users/decebal/following{/other_user}",
      "gists_url": "https://api.github.com/users/decebal/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/decebal/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/decebal/subscriptions",
      "organizations_url": "https://api.github.com/users/decebal/orgs",
      "repos_url": "https://api.github.com/users/decebal/repos",
      "events_url": "https://api.github.com/users/decebal/events{/privacy}",
      "received_events_url": "https://api.github.com/users/decebal/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-22T11:44:45Z",
    "updated_at": "2018-11-22T11:44:45Z",
    "author_association": "NONE",
    "body": "> Could someone explain the motivation for wanting to support ProcessPoolExecutor? Would that allow a grpc server to support more cpu heavy tasks since each request would get its own Python process? What's wrong with ThreadPoolExecutor?\r\n\r\nsimple most common problem that I have, you can't start a ProcessPool inside a ThreadPool (ProcessPoolExecutor throws an exception). While you can always do it the other way around.\r\n\r\n@rafalkasa has given quite a good explanation for why you would want it as well.\r\n\r\nLatest versions of python are walking away from threads or that is my impression due to numerous Syncronizations and tweaks Threads would entice, while processes due to the fact of not having a shared state are simpler to manage.\r\n"
  }
]
