[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/469325062",
    "html_url": "https://github.com/grpc/grpc/issues/18205#issuecomment-469325062",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/18205",
    "id": 469325062,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2OTMyNTA2Mg==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-04T16:46:46Z",
    "updated_at": "2019-03-04T16:46:46Z",
    "author_association": "CONTRIBUTOR",
    "body": "You're right that if the peer is reading too slowly, the WriteAsync should start blocking at some point. \r\nI skimmed your code and it looks correct - I'll try to investigate what's wrong.\r\nHave you been able to reproduce on Linux too (apart from Windows)?"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/469396056",
    "html_url": "https://github.com/grpc/grpc/issues/18205#issuecomment-469396056",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/18205",
    "id": 469396056,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2OTM5NjA1Ng==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-04T19:50:50Z",
    "updated_at": "2019-03-04T19:50:50Z",
    "author_association": "CONTRIBUTOR",
    "body": "It looks like I'm not not able to reproduce. I'm running your server and client code and the client keeps getting blocked in regular intervals. The memory used by the client is steady at 18MB."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/469397227",
    "html_url": "https://github.com/grpc/grpc/issues/18205#issuecomment-469397227",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/18205",
    "id": 469397227,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2OTM5NzIyNw==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-04T19:54:08Z",
    "updated_at": "2019-03-04T19:54:08Z",
    "author_association": "CONTRIBUTOR",
    "body": "I'm not able to reproduce using neither gRPC 1.18.0 nor 1.19.0"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/469403049",
    "html_url": "https://github.com/grpc/grpc/issues/18205#issuecomment-469403049",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/18205",
    "id": 469403049,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2OTQwMzA0OQ==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-04T20:08:43Z",
    "updated_at": "2019-03-04T20:08:43Z",
    "author_association": "CONTRIBUTOR",
    "body": "It seems that things behave as expected, so closing this issue. I can reopen if the problem get confirmed (but the repro doesn't seem to work)."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/469834174",
    "html_url": "https://github.com/grpc/grpc/issues/18205#issuecomment-469834174",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/18205",
    "id": 469834174,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2OTgzNDE3NA==",
    "user": {
      "login": "jasondavis11",
      "id": 5223224,
      "node_id": "MDQ6VXNlcjUyMjMyMjQ=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/5223224?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jasondavis11",
      "html_url": "https://github.com/jasondavis11",
      "followers_url": "https://api.github.com/users/jasondavis11/followers",
      "following_url": "https://api.github.com/users/jasondavis11/following{/other_user}",
      "gists_url": "https://api.github.com/users/jasondavis11/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jasondavis11/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jasondavis11/subscriptions",
      "organizations_url": "https://api.github.com/users/jasondavis11/orgs",
      "repos_url": "https://api.github.com/users/jasondavis11/repos",
      "events_url": "https://api.github.com/users/jasondavis11/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jasondavis11/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-05T19:54:56Z",
    "updated_at": "2019-03-05T20:13:50Z",
    "author_association": "NONE",
    "body": "Thanks @jtattermusch for looking at this. I have ran this on various machines in our lab with the same results (incorrect behavior / no blocking), so I'm a bit puzzled. I am working on running this on Linux and will post when I get results. Was your test run on Windows?"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/469868938",
    "html_url": "https://github.com/grpc/grpc/issues/18205#issuecomment-469868938",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/18205",
    "id": 469868938,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2OTg2ODkzOA==",
    "user": {
      "login": "KylePreuss",
      "id": 7189991,
      "node_id": "MDQ6VXNlcjcxODk5OTE=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/7189991?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/KylePreuss",
      "html_url": "https://github.com/KylePreuss",
      "followers_url": "https://api.github.com/users/KylePreuss/followers",
      "following_url": "https://api.github.com/users/KylePreuss/following{/other_user}",
      "gists_url": "https://api.github.com/users/KylePreuss/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/KylePreuss/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/KylePreuss/subscriptions",
      "organizations_url": "https://api.github.com/users/KylePreuss/orgs",
      "repos_url": "https://api.github.com/users/KylePreuss/repos",
      "events_url": "https://api.github.com/users/KylePreuss/events{/privacy}",
      "received_events_url": "https://api.github.com/users/KylePreuss/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-05T21:42:07Z",
    "updated_at": "2019-03-05T21:42:07Z",
    "author_association": "NONE",
    "body": "@jasondavis11 - I can confirm that the sender does **not** block when running on windows (using grpc C# 1.18.0 nuget package in a netcore2.1 app). When I run both applications on the same machine, memory usage goes through the roof on the client side.\r\n\r\n@jtattermusch - I've worked this program into a Docker image and spawned a server/client pair on their own network (Linux containers on a Windows host). Set up this way, the sender definitely begins blocking when the listener hasn't processed. Thus, this  _appears_ to be a Windows-only problem."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/469877680",
    "html_url": "https://github.com/grpc/grpc/issues/18205#issuecomment-469877680",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/18205",
    "id": 469877680,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2OTg3NzY4MA==",
    "user": {
      "login": "jasondavis11",
      "id": 5223224,
      "node_id": "MDQ6VXNlcjUyMjMyMjQ=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/5223224?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jasondavis11",
      "html_url": "https://github.com/jasondavis11",
      "followers_url": "https://api.github.com/users/jasondavis11/followers",
      "following_url": "https://api.github.com/users/jasondavis11/following{/other_user}",
      "gists_url": "https://api.github.com/users/jasondavis11/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jasondavis11/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jasondavis11/subscriptions",
      "organizations_url": "https://api.github.com/users/jasondavis11/orgs",
      "repos_url": "https://api.github.com/users/jasondavis11/repos",
      "events_url": "https://api.github.com/users/jasondavis11/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jasondavis11/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-05T22:07:59Z",
    "updated_at": "2019-03-05T22:07:59Z",
    "author_association": "NONE",
    "body": "I was able to get some results from running combinations of Linux (docker containers) and Windows for the client and server. Here are the results:\r\n1) Windows Client (machine 1) -> Windows Server (machine 1): No blocking memory increase on Client\r\n2) Windows Client (machine 1) -> Windows Server (machine 2): No blocking memory increase on Server\r\n3) Linux Client (docker 1) -> Linux Server (docker 2): Blocking appropriately\r\n4) Windows Client -> Linux Server: Blocking appropriately\r\n5) Linux Client -> Windows Server: No blocking memory increase on Server\r\n\r\nA snippet of the output from scenario 4 above, showing the stalling is occurring (I have some of the grpc trace environment variable settings enabled):\r\n0..1..2..3..4..5..6..7..8..9..10..11..12..13..14..15..16..17..18..19..20..21..22..23..24..25..26..27..28..29..30..31..32..33..34..35..36..37..38..39..40..41..42..43..44..45..46..47..48..49..50..51..52..53..54..55..56..57..58..59..60..61..62..63..64..65..66..67..68..69..70..71..72..73..74..75..76..77..78..79..80..81..82..83..84..85..86..87..88..89..90..91..92..93..94..95..96..97..98..99..100..101..102..103..104..105..106..107..108..109..110..111..112..113..114..115..116..117..118..119..120..121..122..123..124..125..126..127..128..129..130..131..132..133..134..135..136..137..138..139..140..141..142..143..144..145..146..147..148..149..150..151..152..153..154..155..156..157..158..159..160..161..162..163..164..165..166..167..168..169..170..171..172..173..174..175..176..177..178..179..180..181..182..183..184..185..186..187..188..189..190..191..192..193..194..195..196..197..198..199..200..201..202..203..204..205..206..207..208..209..210..211..212..213..214..215..216..217..218..219..220..221..222..223..224..225..226..227..228..229..230..231..232..233..234..235..236..237..238..239..240..241..242..243..244..245..246..247..248..249..250..251..252..253..254..255..256..257..258..259..260..261..262..263..264..265..266..267..268..269..270..271..272..273..274..275..276..277..278..279..280..281..282..283..284..285..286..287..288..289..290..291..292..293..294..295..296..297..298..299..300..301..302..303..304..305..306..307..308..309..310..311..312..313..314..315..316..317..318..319..320..321..322..323..324..325..326..327..328..329..330..331..332..333..334..335..336..337..338..339..340..341..342..343..344..345..346..347..348..349..350..351..352..353..354..355..356..357..358..359..360..361..362..363..364..365..366..367..368..369..370..371..372..373..374..375..376..377..378..379..380..381..382..383..384..385..386..387..388..389..390..391..392..393..394..395..396..397..398..399..400..401..402..403..404..405..406..407..408..409..410..411..412..413..414..415..416..417..418..419..420..421..422..423..424..425..426..427..428..429..430..431..432..433..434..435..436..437..438..439..440..441..442..443..444..445..446..447..448..449..450..451..452..453..454..455..456..457..458..459..460..461..462..463..464..465..466..467..468..469..470..471..D0305 16:47:49.124588 0 C:\\jenkins\\workspace\\gRPC_build_artifacts\\platform\\windows\\workspace_csharp_ext_windows_x64\\src\\core\\ext\\transport\\chttp2\\transport\\writing.cc:140: ipv4:10.131.20.61:1234:000000001CB53190 stream 1 stalled by stream [fc:pending=0:pending-compressed=1096:flowed=4716013:peer_initwin=4194304:t_win=3674724:s_win=0:s_delta=-4194304]\r\n472..473..474..475..476..477..478..479..480..481..482..483..484..485..486..487..488..489..490..491..492..493..494..495..496..497..498..499..500..501..502..503..504..505..506..507..508..509..510..511..512..513..514..515..516..517..518..519..520..521..522..523..524..525..526..527..528..529..530..531..532..533..534..535..536..537..538..539..540..541..542..543..544..545..546..547..548..549..550..551..552..553..554..555..556..557..558..559..560..561..562..563..564..565..566..567..568..569..570..571..572..573..574..575..576..577..578..579..580..581..582..583..584..585..586..587..588..589..590..591..592..593..594..595..596..597..598..599..600..601..602..603..604..605..606..607..608..609..610..611..612..613..614..615..616..617..618..619..620..621..622..623..624..625..626..627..628..629..630..631..632..633..634..635..636..637..638..639..640..641..642..643..644..645..646..647..648..649..650..651..652..653..654..655..656..657..658..659..660..661..662..663..664..665..666..667..668..669..670..671..672..673..674..675..676..677..678..679..680..681..682..683..684..685..686..687..688..689..690..691..692..693..694..695..696..697..698..699..700..701..702..703..704..705..706..707..708..709..710..711..712..713..714..715..716..717..718..719..720..721..722..723..724..725..726..727..728..729..730..731..732..733..734..735..736..737..738..739..740..741..742..743..744..745..746..747..748..749..750..751..752..753..754..755..756..757..758..759..760..761..762..763..764..765..766..767..768..769..770..771..772..773..774..775..776..777..778..779..780..781..782..783..784..785..786..787..788..789..790..791..792..793..794..795..796..797..798..799..800..801..802..803..804..805..806..807..808..809..810..811..812..813..814..815..816..817..818..819..820..821..822..823..824..825..826..827..828..829..830..831..832..833..834..835..836..837..838..839..840..841..842..843..844..845..846..847..848..849..850..851..852..853..854..855..856..857..858..859..860..861..862..863..864..865..866..867..868..869..870..871..872..873..874..875..876..877..878..879..880..881..882..883..884..885..886..887..888..889..890..D0305 16:48:40.166360 0 C:\\jenkins\\workspace\\gRPC_build_artifacts\\platform\\windows\\workspace_csharp_ext_windows_x64\\src\\core\\ext\\transport\\chttp2\\transport\\writing.cc:140: ipv4:10.131.20.61:1234:000000001CB53190 stream 1 stalled by stream [fc:pending=0:pending-compressed=2239:flowed=8911460:peer_initwin=4194304:t_win=2103826:s_win=0:s_delta=-4194304]"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/470008612",
    "html_url": "https://github.com/grpc/grpc/issues/18205#issuecomment-470008612",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/18205",
    "id": 470008612,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3MDAwODYxMg==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-06T08:05:56Z",
    "updated_at": "2019-03-06T08:05:56Z",
    "author_association": "CONTRIBUTOR",
    "body": "> @jasondavis11 - I can confirm that the sender does **not** block when running on windows (using grpc C# 1.18.0 nuget package in a netcore2.1 app). When I run both applications on the same machine, memory usage goes through the roof on the client side.\r\n\r\nIs that accurate? I was running on windows, both apps on the same machine and the memory usage was ok. I guess I'll try again.\r\n\r\n> \r\n> @jtattermusch - I've worked this program into a Docker image and spawned a server/client pair on their own network (Linux containers on a Windows host). Set up this way, the sender definitely begins blocking when the listener hasn't processed. Thus, this _appears_ to be a Windows-only problem.\r\n\r\n"
  }
]
