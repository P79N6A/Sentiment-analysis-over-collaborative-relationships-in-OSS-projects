[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/362552740",
    "html_url": "https://github.com/grpc/grpc/issues/14273#issuecomment-362552740",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14273",
    "id": 362552740,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MjU1Mjc0MA==",
    "user": {
      "login": "ndglover",
      "id": 2682997,
      "node_id": "MDQ6VXNlcjI2ODI5OTc=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/2682997?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ndglover",
      "html_url": "https://github.com/ndglover",
      "followers_url": "https://api.github.com/users/ndglover/followers",
      "following_url": "https://api.github.com/users/ndglover/following{/other_user}",
      "gists_url": "https://api.github.com/users/ndglover/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ndglover/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ndglover/subscriptions",
      "organizations_url": "https://api.github.com/users/ndglover/orgs",
      "repos_url": "https://api.github.com/users/ndglover/repos",
      "events_url": "https://api.github.com/users/ndglover/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ndglover/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-02T10:46:54Z",
    "updated_at": "2018-02-02T10:46:54Z",
    "author_association": "NONE",
    "body": "Having looked through previous logs it seems this error has occurred once per day since Jan 15th when we upgraded from 1.7.1 to 1.8.0.  During that time we have never seen a process crash though. It tends to occur around the time our processes auto restart each night and only on the ones with 1000's of open streams. \r\n\r\nDid anything change between 1.7.1 and 1.8.0 related to this error? \r\n\r\nThanks\r\n\r\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/368351809",
    "html_url": "https://github.com/grpc/grpc/issues/14273#issuecomment-368351809",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14273",
    "id": 368351809,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2ODM1MTgwOQ==",
    "user": {
      "login": "smflorentino",
      "id": 3495150,
      "node_id": "MDQ6VXNlcjM0OTUxNTA=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/3495150?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/smflorentino",
      "html_url": "https://github.com/smflorentino",
      "followers_url": "https://api.github.com/users/smflorentino/followers",
      "following_url": "https://api.github.com/users/smflorentino/following{/other_user}",
      "gists_url": "https://api.github.com/users/smflorentino/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/smflorentino/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/smflorentino/subscriptions",
      "organizations_url": "https://api.github.com/users/smflorentino/orgs",
      "repos_url": "https://api.github.com/users/smflorentino/repos",
      "events_url": "https://api.github.com/users/smflorentino/events{/privacy}",
      "received_events_url": "https://api.github.com/users/smflorentino/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-25T22:37:46Z",
    "updated_at": "2018-02-25T22:37:46Z",
    "author_association": "NONE",
    "body": "We are seeing the same thing on Server 2016. Never saw this before 1.8."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/368549683",
    "html_url": "https://github.com/grpc/grpc/issues/14273#issuecomment-368549683",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14273",
    "id": 368549683,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2ODU0OTY4Mw==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-26T15:56:12Z",
    "updated_at": "2018-02-26T15:56:36Z",
    "author_association": "CONTRIBUTOR",
    "body": "Is this still happening in v1.9.x and v.1.10.x?\r\n\r\nIs there a reproduction I could use to find out where this got broken?"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/372113854",
    "html_url": "https://github.com/grpc/grpc/issues/14273#issuecomment-372113854",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14273",
    "id": 372113854,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MjExMzg1NA==",
    "user": {
      "login": "andreasp79",
      "id": 2314654,
      "node_id": "MDQ6VXNlcjIzMTQ2NTQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/2314654?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/andreasp79",
      "html_url": "https://github.com/andreasp79",
      "followers_url": "https://api.github.com/users/andreasp79/followers",
      "following_url": "https://api.github.com/users/andreasp79/following{/other_user}",
      "gists_url": "https://api.github.com/users/andreasp79/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/andreasp79/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/andreasp79/subscriptions",
      "organizations_url": "https://api.github.com/users/andreasp79/orgs",
      "repos_url": "https://api.github.com/users/andreasp79/repos",
      "events_url": "https://api.github.com/users/andreasp79/events{/privacy}",
      "received_events_url": "https://api.github.com/users/andreasp79/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-11T13:02:40Z",
    "updated_at": "2018-03-11T13:29:10Z",
    "author_association": "NONE",
    "body": "Same here, windows 2016 server has been running grpc 1.8.3 for about a month before the exception happened, has been running more than a year before that with older versions and never encountered this . \r\n\r\nI don't have repro steps but the priority for us is to prevent the entire process going down immediately because of any exception thrown on the grpc threads (even if it's just to do graceful shutdown). Is this possible without manually recompiling grpc?\r\n\r\nIn addition, are there any major issues with 1.7.1 that you'd recommend against running it on a production environment until this is resolved?"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/389565143",
    "html_url": "https://github.com/grpc/grpc/issues/14273#issuecomment-389565143",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14273",
    "id": 389565143,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4OTU2NTE0Mw==",
    "user": {
      "login": "ndglover",
      "id": 2682997,
      "node_id": "MDQ6VXNlcjI2ODI5OTc=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/2682997?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ndglover",
      "html_url": "https://github.com/ndglover",
      "followers_url": "https://api.github.com/users/ndglover/followers",
      "following_url": "https://api.github.com/users/ndglover/following{/other_user}",
      "gists_url": "https://api.github.com/users/ndglover/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ndglover/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ndglover/subscriptions",
      "organizations_url": "https://api.github.com/users/ndglover/orgs",
      "repos_url": "https://api.github.com/users/ndglover/repos",
      "events_url": "https://api.github.com/users/ndglover/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ndglover/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-16T15:38:44Z",
    "updated_at": "2018-05-17T09:15:18Z",
    "author_association": "NONE",
    "body": "I haven't seen it crash the process since upgrading to v1.10, although that could be by chance as it was not reproducible it just happened at random. I do still see the error below on the grpc thread. What seems to be happening now is this causes the grpc thread to block or silently die, certainly no more responses are received after this error. We see the connection state go to Idle, calling ConnectAsync again it seems to reconnect, at least the state goes back to Ready but no more data is received. None of the streams are torn down in this case. I suspect we can fix by dropping the channel and recreating all the streams but this will be expensive. Is there anyway to see more diagnostics about these pings to understand why we get this message in the first place?\r\n\r\nC:\\jenkins\\workspace\\gRPC_build_artifacts\\platform\\windows\\workspace_csharp_ext_windows_x86\\src\\core\\ext\\transport\\chttp2\\transport\\chttp2_transport.cc:1097: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to \"too_many_pings\" "
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/390020459",
    "html_url": "https://github.com/grpc/grpc/issues/14273#issuecomment-390020459",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14273",
    "id": 390020459,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MDAyMDQ1OQ==",
    "user": {
      "login": "smflorentino",
      "id": 3495150,
      "node_id": "MDQ6VXNlcjM0OTUxNTA=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/3495150?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/smflorentino",
      "html_url": "https://github.com/smflorentino",
      "followers_url": "https://api.github.com/users/smflorentino/followers",
      "following_url": "https://api.github.com/users/smflorentino/following{/other_user}",
      "gists_url": "https://api.github.com/users/smflorentino/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/smflorentino/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/smflorentino/subscriptions",
      "organizations_url": "https://api.github.com/users/smflorentino/orgs",
      "repos_url": "https://api.github.com/users/smflorentino/repos",
      "events_url": "https://api.github.com/users/smflorentino/events{/privacy}",
      "received_events_url": "https://api.github.com/users/smflorentino/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-17T21:36:41Z",
    "updated_at": "2018-05-17T21:37:21Z",
    "author_association": "NONE",
    "body": "I've also recently observed this on 1.10, basically the clients started receiving DeadlineExceeded and the server was receiving InvalidOperationExceptions that the client closed the connection, but our RPC listener wasn't being invoked (or it was being invoked with an empty payload)\r\n\r\nKilling the server process instantly fixed the problem.\r\n\r\nI have a memory dump with a couple of threads in gRPC code, but I can't make much sense of them. Seems like there may be a deadlock somewhere:\r\n\r\n4 threads:\r\n```\r\nntdll!NtWaitForAlertByThreadId+14\r\n--\r\nntdll!RtlSleepConditionVariableCS+c9\r\nKERNELBASE!SleepConditionVariableCS+28\r\ngrpc_csharp_ext_x64!gprsharp_free+60e42\r\ngrpc_csharp_ext_x64!gprsharp_free+9a02\r\ngrpc_csharp_ext_x64!gprsharp_free+60bfe\r\nkernel32!BaseThreadInitThunk+14\r\nntdll!RtlUserThreadStart+21\r\n```\r\n\r\n2 threads:\r\n```\r\nntdll!NtWaitForAlertByThreadId+14\r\n--\r\nntdll!RtlSleepConditionVariableCS+c9\r\nKERNELBASE!SleepConditionVariableCS+28\r\ngrpc_csharp_ext_x64!gprsharp_free+60e42\r\ngrpc_csharp_ext_x64!gprsharp_free+ae62\r\ngrpc_csharp_ext_x64!gprsharp_free+abc3\r\ngrpc_csharp_ext_x64!gprsharp_free+ac61\r\ngrpc_csharp_ext_x64!gprsharp_free+60bfe\r\nkernel32!BaseThreadInitThunk+14\r\nntdll!RtlUserThreadStart+21\r\n```\r\n\r\n3 threads\r\n```\r\nntdll!NtRemoveIoCompletion+14\r\n--\r\nKERNELBASE!GetQueuedCompletionStatus+3f\r\ngrpc_csharp_ext_x64!gprsharp_free+30f54\r\ngrpc_csharp_ext_x64!gprsharp_free+bdab\r\ngrpc_csharp_ext_x64!grpcsharp_version_string+2878\r\ngrpc_csharp_ext_x64!grpcsharp_version_string+3b93\r\ngrpc_csharp_ext_x64!grpcsharp_completion_queue_next+3c\r\nDomainBoundILStubClass.IL_STUB_PInvoke(Grpc.Core.Internal.CompletionQueueSafeHandle)+cd\r\n[[InlinedCallFrame]]\r\nGrpc.Core.Internal.GrpcThreadPool.RunHandlerLoop(Grpc.Core.Internal.CompletionQueueSafeHandle, Grpc.Core.Profiling.IProfiler)+4d\r\nmscorlib_ni!System.Threading.ExecutionContext.RunInternal(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object, Boolean)+162\r\nmscorlib_ni!System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object, Boolean)+14\r\nmscorlib_ni!System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object)+52\r\nmscorlib_ni!System.Threading.ThreadHelper.ThreadStart()+52\r\nclr!CallDescrWorkerInternal+83\r\nclr!CallDescrWorkerWithHandler+4e\r\nclr!MethodDescCallSite::CallTargetWorker+f8\r\nclr!ThreadNative::KickOffThread_Worker+109\r\n[[GCFrame]]\r\nclr!Frame::Push+59\r\nclr!FillInRegTypeMap+198\r\nclr!FillInRegTypeMap+c1\r\n[[DebuggerU2MCatchHandlerFrame]]\r\nclr!FillInRegTypeMap+47\r\nclr!ThreadNative::KickOffThread+db\r\nclr!Thread::intermediateThreadProc+86\r\nkernel32!BaseThreadInitThunk+14\r\nntdll!RtlUserThreadStart+21\r\n\r\n"
  }
]
