[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/373341480",
    "html_url": "https://github.com/grpc/grpc/issues/14717#issuecomment-373341480",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14717",
    "id": 373341480,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MzM0MTQ4MA==",
    "user": {
      "login": "forestphoenix",
      "id": 13005323,
      "node_id": "MDQ6VXNlcjEzMDA1MzIz",
      "avatar_url": "https://avatars0.githubusercontent.com/u/13005323?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/forestphoenix",
      "html_url": "https://github.com/forestphoenix",
      "followers_url": "https://api.github.com/users/forestphoenix/followers",
      "following_url": "https://api.github.com/users/forestphoenix/following{/other_user}",
      "gists_url": "https://api.github.com/users/forestphoenix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/forestphoenix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/forestphoenix/subscriptions",
      "organizations_url": "https://api.github.com/users/forestphoenix/orgs",
      "repos_url": "https://api.github.com/users/forestphoenix/repos",
      "events_url": "https://api.github.com/users/forestphoenix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/forestphoenix/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-15T11:13:21Z",
    "updated_at": "2018-03-15T11:13:21Z",
    "author_association": "NONE",
    "body": "Source code to reproduce the issue can be found here:\r\nhttps://gist.github.com/forestphoenix/cd9d0ae24cbb5c6218b4299f4df5521b"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/373482493",
    "html_url": "https://github.com/grpc/grpc/issues/14717#issuecomment-373482493",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14717",
    "id": 373482493,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MzQ4MjQ5Mw==",
    "user": {
      "login": "yang-g",
      "id": 10122250,
      "node_id": "MDQ6VXNlcjEwMTIyMjUw",
      "avatar_url": "https://avatars0.githubusercontent.com/u/10122250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yang-g",
      "html_url": "https://github.com/yang-g",
      "followers_url": "https://api.github.com/users/yang-g/followers",
      "following_url": "https://api.github.com/users/yang-g/following{/other_user}",
      "gists_url": "https://api.github.com/users/yang-g/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yang-g/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yang-g/subscriptions",
      "organizations_url": "https://api.github.com/users/yang-g/orgs",
      "repos_url": "https://api.github.com/users/yang-g/repos",
      "events_url": "https://api.github.com/users/yang-g/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yang-g/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-15T18:43:16Z",
    "updated_at": "2018-03-15T18:43:16Z",
    "author_association": "MEMBER",
    "body": "Please try setting GRPC_ARG_KEEPALIVE_PERMIT_WITHOUT_CALLS to 1 at both client and server.\r\nAnd set GRPC_ARG_HTTP2_MIN_RECV_PING_INTERVAL_WITHOUT_DATA_MS at server to a value smaller than 10000 and set GRPC_ARG_HTTP2_MIN_SENT_PING_INTERVAL_WITHOUT_DATA_MS at client to 10000."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/373482871",
    "html_url": "https://github.com/grpc/grpc/issues/14717#issuecomment-373482871",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14717",
    "id": 373482871,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MzQ4Mjg3MQ==",
    "user": {
      "login": "yang-g",
      "id": 10122250,
      "node_id": "MDQ6VXNlcjEwMTIyMjUw",
      "avatar_url": "https://avatars0.githubusercontent.com/u/10122250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yang-g",
      "html_url": "https://github.com/yang-g",
      "followers_url": "https://api.github.com/users/yang-g/followers",
      "following_url": "https://api.github.com/users/yang-g/following{/other_user}",
      "gists_url": "https://api.github.com/users/yang-g/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yang-g/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yang-g/subscriptions",
      "organizations_url": "https://api.github.com/users/yang-g/orgs",
      "repos_url": "https://api.github.com/users/yang-g/repos",
      "events_url": "https://api.github.com/users/yang-g/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yang-g/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-15T18:44:30Z",
    "updated_at": "2018-03-15T18:44:30Z",
    "author_association": "MEMBER",
    "body": "Feel free to reopen the issue if you still see problems. Thanks."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/374222907",
    "html_url": "https://github.com/grpc/grpc/issues/14717#issuecomment-374222907",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14717",
    "id": 374222907,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3NDIyMjkwNw==",
    "user": {
      "login": "forestphoenix",
      "id": 13005323,
      "node_id": "MDQ6VXNlcjEzMDA1MzIz",
      "avatar_url": "https://avatars0.githubusercontent.com/u/13005323?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/forestphoenix",
      "html_url": "https://github.com/forestphoenix",
      "followers_url": "https://api.github.com/users/forestphoenix/followers",
      "following_url": "https://api.github.com/users/forestphoenix/following{/other_user}",
      "gists_url": "https://api.github.com/users/forestphoenix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/forestphoenix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/forestphoenix/subscriptions",
      "organizations_url": "https://api.github.com/users/forestphoenix/orgs",
      "repos_url": "https://api.github.com/users/forestphoenix/repos",
      "events_url": "https://api.github.com/users/forestphoenix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/forestphoenix/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-19T14:04:51Z",
    "updated_at": "2018-03-19T14:04:51Z",
    "author_association": "NONE",
    "body": "I have added the arguments you suggested, but the both server and client still take 15 minutes to time out.\r\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/374224908",
    "html_url": "https://github.com/grpc/grpc/issues/14717#issuecomment-374224908",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14717",
    "id": 374224908,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3NDIyNDkwOA==",
    "user": {
      "login": "forestphoenix",
      "id": 13005323,
      "node_id": "MDQ6VXNlcjEzMDA1MzIz",
      "avatar_url": "https://avatars0.githubusercontent.com/u/13005323?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/forestphoenix",
      "html_url": "https://github.com/forestphoenix",
      "followers_url": "https://api.github.com/users/forestphoenix/followers",
      "following_url": "https://api.github.com/users/forestphoenix/following{/other_user}",
      "gists_url": "https://api.github.com/users/forestphoenix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/forestphoenix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/forestphoenix/subscriptions",
      "organizations_url": "https://api.github.com/users/forestphoenix/orgs",
      "repos_url": "https://api.github.com/users/forestphoenix/repos",
      "events_url": "https://api.github.com/users/forestphoenix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/forestphoenix/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-19T14:10:41Z",
    "updated_at": "2018-03-19T14:27:53Z",
    "author_association": "NONE",
    "body": "@yang-g Given that the problem still exists, can you reopen the issue?\r\n\r\nSince you (as contributor) closed the issue, I cannot reopen it."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/374567470",
    "html_url": "https://github.com/grpc/grpc/issues/14717#issuecomment-374567470",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14717",
    "id": 374567470,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3NDU2NzQ3MA==",
    "user": {
      "login": "forestphoenix",
      "id": 13005323,
      "node_id": "MDQ6VXNlcjEzMDA1MzIz",
      "avatar_url": "https://avatars0.githubusercontent.com/u/13005323?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/forestphoenix",
      "html_url": "https://github.com/forestphoenix",
      "followers_url": "https://api.github.com/users/forestphoenix/followers",
      "following_url": "https://api.github.com/users/forestphoenix/following{/other_user}",
      "gists_url": "https://api.github.com/users/forestphoenix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/forestphoenix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/forestphoenix/subscriptions",
      "organizations_url": "https://api.github.com/users/forestphoenix/orgs",
      "repos_url": "https://api.github.com/users/forestphoenix/repos",
      "events_url": "https://api.github.com/users/forestphoenix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/forestphoenix/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-20T11:41:59Z",
    "updated_at": "2018-03-20T11:41:59Z",
    "author_association": "NONE",
    "body": "When I stop doing `Write` calls on the client, the client does time out after 20 seconds.\r\n\r\nWith `Write` calls, it takes 15 minutes.\r\n\r\nCould that be a clue about what is going on here?"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/374670531",
    "html_url": "https://github.com/grpc/grpc/issues/14717#issuecomment-374670531",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14717",
    "id": 374670531,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3NDY3MDUzMQ==",
    "user": {
      "login": "yang-g",
      "id": 10122250,
      "node_id": "MDQ6VXNlcjEwMTIyMjUw",
      "avatar_url": "https://avatars0.githubusercontent.com/u/10122250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yang-g",
      "html_url": "https://github.com/yang-g",
      "followers_url": "https://api.github.com/users/yang-g/followers",
      "following_url": "https://api.github.com/users/yang-g/following{/other_user}",
      "gists_url": "https://api.github.com/users/yang-g/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yang-g/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yang-g/subscriptions",
      "organizations_url": "https://api.github.com/users/yang-g/orgs",
      "repos_url": "https://api.github.com/users/yang-g/repos",
      "events_url": "https://api.github.com/users/yang-g/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yang-g/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-20T16:45:41Z",
    "updated_at": "2018-03-20T16:45:41Z",
    "author_association": "MEMBER",
    "body": "I looked at your source code and it seems you are doing a non-stop sequence of writes. In this case, the write should detect the failure of the connection (rather than the keepalive), and the fact that  Write failed to come back with an error is the key problem here."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/374670747",
    "html_url": "https://github.com/grpc/grpc/issues/14717#issuecomment-374670747",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14717",
    "id": 374670747,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3NDY3MDc0Nw==",
    "user": {
      "login": "yang-g",
      "id": 10122250,
      "node_id": "MDQ6VXNlcjEwMTIyMjUw",
      "avatar_url": "https://avatars0.githubusercontent.com/u/10122250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yang-g",
      "html_url": "https://github.com/yang-g",
      "followers_url": "https://api.github.com/users/yang-g/followers",
      "following_url": "https://api.github.com/users/yang-g/following{/other_user}",
      "gists_url": "https://api.github.com/users/yang-g/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yang-g/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yang-g/subscriptions",
      "organizations_url": "https://api.github.com/users/yang-g/orgs",
      "repos_url": "https://api.github.com/users/yang-g/repos",
      "events_url": "https://api.github.com/users/yang-g/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yang-g/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-20T16:46:15Z",
    "updated_at": "2018-03-20T16:46:15Z",
    "author_association": "MEMBER",
    "body": "@yashykt Could you take a look? Thanks."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/375137163",
    "html_url": "https://github.com/grpc/grpc/issues/14717#issuecomment-375137163",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14717",
    "id": 375137163,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3NTEzNzE2Mw==",
    "user": {
      "login": "srini100",
      "id": 35056280,
      "node_id": "MDQ6VXNlcjM1MDU2Mjgw",
      "avatar_url": "https://avatars2.githubusercontent.com/u/35056280?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/srini100",
      "html_url": "https://github.com/srini100",
      "followers_url": "https://api.github.com/users/srini100/followers",
      "following_url": "https://api.github.com/users/srini100/following{/other_user}",
      "gists_url": "https://api.github.com/users/srini100/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/srini100/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/srini100/subscriptions",
      "organizations_url": "https://api.github.com/users/srini100/orgs",
      "repos_url": "https://api.github.com/users/srini100/repos",
      "events_url": "https://api.github.com/users/srini100/events{/privacy}",
      "received_events_url": "https://api.github.com/users/srini100/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-22T00:13:56Z",
    "updated_at": "2018-03-22T00:13:56Z",
    "author_association": "CONTRIBUTOR",
    "body": "@yang-g, why should write detect the failure of connection when TCP has not yet timed out (15 mins in this case)? May be the problem is that keepalive logic thinks the bytes are are being sent but they are just being buffered in TCP due to broken connection. "
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/375139659",
    "html_url": "https://github.com/grpc/grpc/issues/14717#issuecomment-375139659",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14717",
    "id": 375139659,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3NTEzOTY1OQ==",
    "user": {
      "login": "yashykt",
      "id": 4181124,
      "node_id": "MDQ6VXNlcjQxODExMjQ=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/4181124?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yashykt",
      "html_url": "https://github.com/yashykt",
      "followers_url": "https://api.github.com/users/yashykt/followers",
      "following_url": "https://api.github.com/users/yashykt/following{/other_user}",
      "gists_url": "https://api.github.com/users/yashykt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yashykt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yashykt/subscriptions",
      "organizations_url": "https://api.github.com/users/yashykt/orgs",
      "repos_url": "https://api.github.com/users/yashykt/repos",
      "events_url": "https://api.github.com/users/yashykt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yashykt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-22T00:30:20Z",
    "updated_at": "2018-03-22T00:30:20Z",
    "author_association": "MEMBER",
    "body": "I also agree with Yang's observation that the keepalive timer has no affect here since the writes are being done continuously at both the server and the client.\r\n\r\nI took a look at the code, and the non-stop writes are probably resetting the keepalive timer each time a write is attempted which is intended afaik. Also, a write might not return an error immediately because the writes are probably getting buffered.\r\n\r\n If the timeout is a concern in this scenario, I would suggest disabling buffering in the WriteOptions, and waiting till the write is actually complete."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/375157684",
    "html_url": "https://github.com/grpc/grpc/issues/14717#issuecomment-375157684",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14717",
    "id": 375157684,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3NTE1NzY4NA==",
    "user": {
      "login": "srini100",
      "id": 35056280,
      "node_id": "MDQ6VXNlcjM1MDU2Mjgw",
      "avatar_url": "https://avatars2.githubusercontent.com/u/35056280?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/srini100",
      "html_url": "https://github.com/srini100",
      "followers_url": "https://api.github.com/users/srini100/followers",
      "following_url": "https://api.github.com/users/srini100/following{/other_user}",
      "gists_url": "https://api.github.com/users/srini100/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/srini100/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/srini100/subscriptions",
      "organizations_url": "https://api.github.com/users/srini100/orgs",
      "repos_url": "https://api.github.com/users/srini100/repos",
      "events_url": "https://api.github.com/users/srini100/events{/privacy}",
      "received_events_url": "https://api.github.com/users/srini100/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-22T02:24:21Z",
    "updated_at": "2018-03-22T02:24:21Z",
    "author_association": "CONTRIBUTOR",
    "body": "@yashykt, doesn't keepalive logic send a ping when no data frame has been received for GRPC_ARG_HTTP2_MIN_SENT_PING_INTERVAL_WITHOUT_DATA_MS duration? "
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/375158811",
    "html_url": "https://github.com/grpc/grpc/issues/14717#issuecomment-375158811",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14717",
    "id": 375158811,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3NTE1ODgxMQ==",
    "user": {
      "login": "yashykt",
      "id": 4181124,
      "node_id": "MDQ6VXNlcjQxODExMjQ=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/4181124?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yashykt",
      "html_url": "https://github.com/yashykt",
      "followers_url": "https://api.github.com/users/yashykt/followers",
      "following_url": "https://api.github.com/users/yashykt/following{/other_user}",
      "gists_url": "https://api.github.com/users/yashykt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yashykt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yashykt/subscriptions",
      "organizations_url": "https://api.github.com/users/yashykt/orgs",
      "repos_url": "https://api.github.com/users/yashykt/repos",
      "events_url": "https://api.github.com/users/yashykt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yashykt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-22T02:30:44Z",
    "updated_at": "2018-03-22T02:30:44Z",
    "author_association": "MEMBER",
    "body": "@srini100 it would send a ping but if we are already writing then the ping is not really required right? The write buffering over here is causing the issue imo."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/375161786",
    "html_url": "https://github.com/grpc/grpc/issues/14717#issuecomment-375161786",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14717",
    "id": 375161786,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3NTE2MTc4Ng==",
    "user": {
      "login": "srini100",
      "id": 35056280,
      "node_id": "MDQ6VXNlcjM1MDU2Mjgw",
      "avatar_url": "https://avatars2.githubusercontent.com/u/35056280?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/srini100",
      "html_url": "https://github.com/srini100",
      "followers_url": "https://api.github.com/users/srini100/followers",
      "following_url": "https://api.github.com/users/srini100/following{/other_user}",
      "gists_url": "https://api.github.com/users/srini100/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/srini100/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/srini100/subscriptions",
      "organizations_url": "https://api.github.com/users/srini100/orgs",
      "repos_url": "https://api.github.com/users/srini100/repos",
      "events_url": "https://api.github.com/users/srini100/events{/privacy}",
      "received_events_url": "https://api.github.com/users/srini100/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-22T02:49:35Z",
    "updated_at": "2018-03-22T02:49:35Z",
    "author_association": "CONTRIBUTOR",
    "body": "In my mind the purpose of keepalive feature is to check the health of the connection (RTT, breakage etc.) without relying on lower layers. While we are sending data but not receiving anything, a ping should be sent after some duration to confirm that the connection is still alive. The ping response will confirm that connection is fine. I am assuming that ping is sent with tcp_nodelay option."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/375163407",
    "html_url": "https://github.com/grpc/grpc/issues/14717#issuecomment-375163407",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14717",
    "id": 375163407,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3NTE2MzQwNw==",
    "user": {
      "login": "yashykt",
      "id": 4181124,
      "node_id": "MDQ6VXNlcjQxODExMjQ=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/4181124?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yashykt",
      "html_url": "https://github.com/yashykt",
      "followers_url": "https://api.github.com/users/yashykt/followers",
      "following_url": "https://api.github.com/users/yashykt/following{/other_user}",
      "gists_url": "https://api.github.com/users/yashykt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yashykt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yashykt/subscriptions",
      "organizations_url": "https://api.github.com/users/yashykt/orgs",
      "repos_url": "https://api.github.com/users/yashykt/repos",
      "events_url": "https://api.github.com/users/yashykt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yashykt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-22T02:59:40Z",
    "updated_at": "2018-03-22T02:59:40Z",
    "author_association": "MEMBER",
    "body": "That should be true. But the ping will only be sent if the timer expires\nbut if the timer is reset on a write then the ping will not be sent.\n\nOn Wed, Mar 21, 2018, 7:49 PM Srini Polavarapu <notifications@github.com>\nwrote:\n\n> In my mind the purpose of keepalive feature is to check the health of the\n> connection (RTT, breakage etc.) without relying on lower layers. While we\n> are sending data but not receiving anything, a ping should be sent after\n> some duration to confirm that the connection is still alive. The ping\n> response will confirm that connection is fine. I am assuming that ping is\n> sent with tcp_nodelay option.\n>\n> —\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/grpc/grpc/issues/14717#issuecomment-375161786>, or mute\n> the thread\n> <https://github.com/notifications/unsubscribe-auth/AD_MhHpCu7NVZ3Iw7TC-MXFrRPAPtn-rks5tgxFKgaJpZM4Sr8h1>\n> .\n>\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/375426846",
    "html_url": "https://github.com/grpc/grpc/issues/14717#issuecomment-375426846",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14717",
    "id": 375426846,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3NTQyNjg0Ng==",
    "user": {
      "login": "yashykt",
      "id": 4181124,
      "node_id": "MDQ6VXNlcjQxODExMjQ=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/4181124?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yashykt",
      "html_url": "https://github.com/yashykt",
      "followers_url": "https://api.github.com/users/yashykt/followers",
      "following_url": "https://api.github.com/users/yashykt/following{/other_user}",
      "gists_url": "https://api.github.com/users/yashykt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yashykt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yashykt/subscriptions",
      "organizations_url": "https://api.github.com/users/yashykt/orgs",
      "repos_url": "https://api.github.com/users/yashykt/repos",
      "events_url": "https://api.github.com/users/yashykt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yashykt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-22T19:19:00Z",
    "updated_at": "2018-03-22T19:19:00Z",
    "author_association": "MEMBER",
    "body": "@forestphoenix Also try setting GRPC_ARG_HTTP2_BDP_PROBE to 0"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/375435220",
    "html_url": "https://github.com/grpc/grpc/issues/14717#issuecomment-375435220",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14717",
    "id": 375435220,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3NTQzNTIyMA==",
    "user": {
      "login": "yashykt",
      "id": 4181124,
      "node_id": "MDQ6VXNlcjQxODExMjQ=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/4181124?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yashykt",
      "html_url": "https://github.com/yashykt",
      "followers_url": "https://api.github.com/users/yashykt/followers",
      "following_url": "https://api.github.com/users/yashykt/following{/other_user}",
      "gists_url": "https://api.github.com/users/yashykt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yashykt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yashykt/subscriptions",
      "organizations_url": "https://api.github.com/users/yashykt/orgs",
      "repos_url": "https://api.github.com/users/yashykt/repos",
      "events_url": "https://api.github.com/users/yashykt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yashykt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-22T19:49:21Z",
    "updated_at": "2018-03-22T19:49:21Z",
    "author_association": "MEMBER",
    "body": "Reopening it. Based on reading the relevant keepalive timer code we are not resetting the timer on writes or reads, but we do reset it on a bdp ping."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/375504468",
    "html_url": "https://github.com/grpc/grpc/issues/14717#issuecomment-375504468",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14717",
    "id": 375504468,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3NTUwNDQ2OA==",
    "user": {
      "login": "srini100",
      "id": 35056280,
      "node_id": "MDQ6VXNlcjM1MDU2Mjgw",
      "avatar_url": "https://avatars2.githubusercontent.com/u/35056280?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/srini100",
      "html_url": "https://github.com/srini100",
      "followers_url": "https://api.github.com/users/srini100/followers",
      "following_url": "https://api.github.com/users/srini100/following{/other_user}",
      "gists_url": "https://api.github.com/users/srini100/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/srini100/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/srini100/subscriptions",
      "organizations_url": "https://api.github.com/users/srini100/orgs",
      "repos_url": "https://api.github.com/users/srini100/repos",
      "events_url": "https://api.github.com/users/srini100/events{/privacy}",
      "received_events_url": "https://api.github.com/users/srini100/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-23T00:52:51Z",
    "updated_at": "2018-03-23T00:52:51Z",
    "author_association": "CONTRIBUTOR",
    "body": "@yashykt, from the [design doc ](https://github.com/grpc/proposal/blob/master/A8-client-side-keepalive.md) \"keepalive time is ideally measured from the time of the last byte read\". "
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/375606597",
    "html_url": "https://github.com/grpc/grpc/issues/14717#issuecomment-375606597",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14717",
    "id": 375606597,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3NTYwNjU5Nw==",
    "user": {
      "login": "forestphoenix",
      "id": 13005323,
      "node_id": "MDQ6VXNlcjEzMDA1MzIz",
      "avatar_url": "https://avatars0.githubusercontent.com/u/13005323?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/forestphoenix",
      "html_url": "https://github.com/forestphoenix",
      "followers_url": "https://api.github.com/users/forestphoenix/followers",
      "following_url": "https://api.github.com/users/forestphoenix/following{/other_user}",
      "gists_url": "https://api.github.com/users/forestphoenix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/forestphoenix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/forestphoenix/subscriptions",
      "organizations_url": "https://api.github.com/users/forestphoenix/orgs",
      "repos_url": "https://api.github.com/users/forestphoenix/repos",
      "events_url": "https://api.github.com/users/forestphoenix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/forestphoenix/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-23T10:16:32Z",
    "updated_at": "2018-03-23T10:47:55Z",
    "author_association": "NONE",
    "body": "@yashykt I tried setting the `GRPC_ARG_HTTP2_BDP_PROBE` to 0.\r\nDoing that changed nothing.\r\n\r\nI also did some investigating on my side:\r\n\r\nNormally, a timer that calls `keepalive_watchdog_fired_locked` is activated when the ping is *processed* (not inserted) from the `ping_queue` of the transport and started.\r\n\r\nIn the scenario where I pull the cable and the client does `Write` calls, the ping never gets processed from the queue (from what I can tell, `maybe_initiate_ping` does not get called).\r\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/375834739",
    "html_url": "https://github.com/grpc/grpc/issues/14717#issuecomment-375834739",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14717",
    "id": 375834739,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3NTgzNDczOQ==",
    "user": {
      "login": "yashykt",
      "id": 4181124,
      "node_id": "MDQ6VXNlcjQxODExMjQ=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/4181124?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yashykt",
      "html_url": "https://github.com/yashykt",
      "followers_url": "https://api.github.com/users/yashykt/followers",
      "following_url": "https://api.github.com/users/yashykt/following{/other_user}",
      "gists_url": "https://api.github.com/users/yashykt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yashykt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yashykt/subscriptions",
      "organizations_url": "https://api.github.com/users/yashykt/orgs",
      "repos_url": "https://api.github.com/users/yashykt/repos",
      "events_url": "https://api.github.com/users/yashykt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yashykt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-24T01:02:15Z",
    "updated_at": "2018-03-24T01:02:15Z",
    "author_association": "MEMBER",
    "body": "@srini100 We don't seem to be following the ideal implementation."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/378936673",
    "html_url": "https://github.com/grpc/grpc/issues/14717#issuecomment-378936673",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14717",
    "id": 378936673,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3ODkzNjY3Mw==",
    "user": {
      "login": "GupTk",
      "id": 28979295,
      "node_id": "MDQ6VXNlcjI4OTc5Mjk1",
      "avatar_url": "https://avatars3.githubusercontent.com/u/28979295?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/GupTk",
      "html_url": "https://github.com/GupTk",
      "followers_url": "https://api.github.com/users/GupTk/followers",
      "following_url": "https://api.github.com/users/GupTk/following{/other_user}",
      "gists_url": "https://api.github.com/users/GupTk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/GupTk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/GupTk/subscriptions",
      "organizations_url": "https://api.github.com/users/GupTk/orgs",
      "repos_url": "https://api.github.com/users/GupTk/repos",
      "events_url": "https://api.github.com/users/GupTk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/GupTk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-05T13:31:43Z",
    "updated_at": "2018-04-05T13:31:43Z",
    "author_association": "NONE",
    "body": "Hi everyone,\r\nI encounter the same problem. \r\nAnything new from this matter?\r\n\r\nThanks"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/379020651",
    "html_url": "https://github.com/grpc/grpc/issues/14717#issuecomment-379020651",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14717",
    "id": 379020651,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3OTAyMDY1MQ==",
    "user": {
      "login": "yashykt",
      "id": 4181124,
      "node_id": "MDQ6VXNlcjQxODExMjQ=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/4181124?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yashykt",
      "html_url": "https://github.com/yashykt",
      "followers_url": "https://api.github.com/users/yashykt/followers",
      "following_url": "https://api.github.com/users/yashykt/following{/other_user}",
      "gists_url": "https://api.github.com/users/yashykt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yashykt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yashykt/subscriptions",
      "organizations_url": "https://api.github.com/users/yashykt/orgs",
      "repos_url": "https://api.github.com/users/yashykt/repos",
      "events_url": "https://api.github.com/users/yashykt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yashykt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-05T17:49:09Z",
    "updated_at": "2018-04-05T17:49:09Z",
    "author_association": "MEMBER",
    "body": "@GupTk What does your scenario look like?"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/379661844",
    "html_url": "https://github.com/grpc/grpc/issues/14717#issuecomment-379661844",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14717",
    "id": 379661844,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3OTY2MTg0NA==",
    "user": {
      "login": "GupTk",
      "id": 28979295,
      "node_id": "MDQ6VXNlcjI4OTc5Mjk1",
      "avatar_url": "https://avatars3.githubusercontent.com/u/28979295?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/GupTk",
      "html_url": "https://github.com/GupTk",
      "followers_url": "https://api.github.com/users/GupTk/followers",
      "following_url": "https://api.github.com/users/GupTk/following{/other_user}",
      "gists_url": "https://api.github.com/users/GupTk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/GupTk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/GupTk/subscriptions",
      "organizations_url": "https://api.github.com/users/GupTk/orgs",
      "repos_url": "https://api.github.com/users/GupTk/repos",
      "events_url": "https://api.github.com/users/GupTk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/GupTk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-09T07:35:38Z",
    "updated_at": "2018-04-09T07:35:38Z",
    "author_association": "NONE",
    "body": "> @GupTk What does your scenario look like?\r\n\r\nOur Client (Windows) writes a stream of data to the server (an embedded Linux) and receives also streamed status information from the server.\r\nWe encountered the same problem when testing grpc’s failure modes for our application - e.g. when unplugging the network cable \r\n\r\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/380659199",
    "html_url": "https://github.com/grpc/grpc/issues/14717#issuecomment-380659199",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14717",
    "id": 380659199,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MDY1OTE5OQ==",
    "user": {
      "login": "yashykt",
      "id": 4181124,
      "node_id": "MDQ6VXNlcjQxODExMjQ=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/4181124?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yashykt",
      "html_url": "https://github.com/yashykt",
      "followers_url": "https://api.github.com/users/yashykt/followers",
      "following_url": "https://api.github.com/users/yashykt/following{/other_user}",
      "gists_url": "https://api.github.com/users/yashykt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yashykt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yashykt/subscriptions",
      "organizations_url": "https://api.github.com/users/yashykt/orgs",
      "repos_url": "https://api.github.com/users/yashykt/repos",
      "events_url": "https://api.github.com/users/yashykt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yashykt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-12T02:53:40Z",
    "updated_at": "2018-04-12T02:53:40Z",
    "author_association": "MEMBER",
    "body": "Sorry for the delay. I finally got around to debugging this. \r\nThe issue comes up in the following scenario -\r\n1) The client and server have an established channel between them.\r\n2) The client sends a ping to the server. (This ping is not a keepalive ping.)\r\n3) The network/connection goes down with the client still waiting to hear back the ACK on the ping.\r\n4) The keepalive timer expires, but the keepalive ping is not sent, since there is already a ping in progress.\r\n5) The keepalive ping would only be sent once we hear back the ACK which we aren't going to get. Also, the watchdog timer for the keepalive ping is only started once we send the keepalive ping. This leads to a hung state. \r\n\r\nThe fix would be to start the watchdog timer for the keepalive ping if there is a ping already in progress. This would use the ping in progress as a keepalive ping too. This should avoid the condition where the client and server hang up. I'll send out a pull request for this.\r\n\r\n\r\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/382487849",
    "html_url": "https://github.com/grpc/grpc/issues/14717#issuecomment-382487849",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14717",
    "id": 382487849,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MjQ4Nzg0OQ==",
    "user": {
      "login": "sreecha",
      "id": 2754995,
      "node_id": "MDQ6VXNlcjI3NTQ5OTU=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/2754995?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sreecha",
      "html_url": "https://github.com/sreecha",
      "followers_url": "https://api.github.com/users/sreecha/followers",
      "following_url": "https://api.github.com/users/sreecha/following{/other_user}",
      "gists_url": "https://api.github.com/users/sreecha/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sreecha/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sreecha/subscriptions",
      "organizations_url": "https://api.github.com/users/sreecha/orgs",
      "repos_url": "https://api.github.com/users/sreecha/repos",
      "events_url": "https://api.github.com/users/sreecha/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sreecha/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-18T18:39:47Z",
    "updated_at": "2018-04-18T18:39:47Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thanks for the detailed comments Yash. This was very helpful in understanding how keepalive in grpc-core works!"
  }
]
