[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/481004848",
    "html_url": "https://github.com/grpc/grpc/issues/18691#issuecomment-481004848",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/18691",
    "id": 481004848,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4MTAwNDg0OA==",
    "user": {
      "login": "apolcyn",
      "id": 9566254,
      "node_id": "MDQ6VXNlcjk1NjYyNTQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9566254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apolcyn",
      "html_url": "https://github.com/apolcyn",
      "followers_url": "https://api.github.com/users/apolcyn/followers",
      "following_url": "https://api.github.com/users/apolcyn/following{/other_user}",
      "gists_url": "https://api.github.com/users/apolcyn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apolcyn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apolcyn/subscriptions",
      "organizations_url": "https://api.github.com/users/apolcyn/orgs",
      "repos_url": "https://api.github.com/users/apolcyn/repos",
      "events_url": "https://api.github.com/users/apolcyn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apolcyn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-08T20:56:34Z",
    "updated_at": "2019-04-08T20:56:34Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hi @amitwaisel, this is likely due to a change made in the 1.19 release to change the DNS resolver implementation from <i>native</i> (i.e. `getaddrinfo`) to <i>ares</i> (an async DNS resolver based on the c-ares library). Also see the `GRPC_DNS_RESOLVER` bullet in https://github.com/grpc/grpc/blob/master/doc/environment_variables.md.\r\n\r\nIt may be worth trying out the `1.20.0-pre2` release, which depends on an upgraded version of the c-ares library.\r\n\r\nAlso if it feasible to run your application under the environment variables `GRPC_DNS_RESOLVER=native`, then doing so should fix the problem (that will force use of the native `getaddrinfo` based resolver).\r\n\r\nRegarding the channel shutdown upon DNS resolution failure: I don't think that the DNS resolution failure is the <i>cause</i> of the channel getting shut down. DNS resolution failures can cause <i>RPC's</i> to fail, but they shouldn't shut down a channel. In the log that you posted, I can see that calls were made to `grpc_channel_destroy` - I think that this call must have been made by your application?"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/481230008",
    "html_url": "https://github.com/grpc/grpc/issues/18691#issuecomment-481230008",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/18691",
    "id": 481230008,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4MTIzMDAwOA==",
    "user": {
      "login": "amitwaisel",
      "id": 21170412,
      "node_id": "MDQ6VXNlcjIxMTcwNDEy",
      "avatar_url": "https://avatars2.githubusercontent.com/u/21170412?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/amitwaisel",
      "html_url": "https://github.com/amitwaisel",
      "followers_url": "https://api.github.com/users/amitwaisel/followers",
      "following_url": "https://api.github.com/users/amitwaisel/following{/other_user}",
      "gists_url": "https://api.github.com/users/amitwaisel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/amitwaisel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/amitwaisel/subscriptions",
      "organizations_url": "https://api.github.com/users/amitwaisel/orgs",
      "repos_url": "https://api.github.com/users/amitwaisel/repos",
      "events_url": "https://api.github.com/users/amitwaisel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/amitwaisel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-09T12:27:08Z",
    "updated_at": "2019-04-10T06:43:52Z",
    "author_association": "NONE",
    "body": "Thank you @apolcyn. I will try the environment-variable-solution and will let you know. \r\nI will also check the channel shutdown scenario to understand why it happens after the DNS resolve fails.\r\nJust to emphasize - this issue happens every time we try using only the host name, but the DNS is configured with the FQDN - which has the \"DNS suffix\" that one of the network interfaces has. It's not only `local` suffix.\r\n\r\nUPDATE:\r\nUsing the `GRPC_DNS_RESOLVER=native` environment variable bypassed the bug and solved the issue for now. I will try to compile the `1.20.0-pre2` to check the newer c-ares"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/481576331",
    "html_url": "https://github.com/grpc/grpc/issues/18691#issuecomment-481576331",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/18691",
    "id": 481576331,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4MTU3NjMzMQ==",
    "user": {
      "login": "apolcyn",
      "id": 9566254,
      "node_id": "MDQ6VXNlcjk1NjYyNTQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9566254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apolcyn",
      "html_url": "https://github.com/apolcyn",
      "followers_url": "https://api.github.com/users/apolcyn/followers",
      "following_url": "https://api.github.com/users/apolcyn/following{/other_user}",
      "gists_url": "https://api.github.com/users/apolcyn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apolcyn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apolcyn/subscriptions",
      "organizations_url": "https://api.github.com/users/apolcyn/orgs",
      "repos_url": "https://api.github.com/users/apolcyn/repos",
      "events_url": "https://api.github.com/users/apolcyn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apolcyn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-10T07:45:52Z",
    "updated_at": "2019-04-10T07:45:52Z",
    "author_association": "CONTRIBUTOR",
    "body": "Also, what version of Windows is being used here?\r\n\r\n> Just to emphasize - this issue happens every time we try using only the host name, but the DNS is configured with the FQDN - which has the \"DNS suffix\" that one of the network interfaces has. It's not only local suffix.\r\n\r\nSorry, if I understand correctly, you are saying that there is nothing special about the `.local` search domain, and that for you, c-ares is failing to suffix hostnames with any configured search domain?\r\n\r\nI think that there's a chance that you are hitting https://github.com/c-ares/c-ares/issues/197, which was fixed in the `1.15` release of c-ares and so would be included in the `1.20.x` releases of grpc - I am keen to find out if the grpc `1.20.x` branch works for you.\r\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/481609713",
    "html_url": "https://github.com/grpc/grpc/issues/18691#issuecomment-481609713",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/18691",
    "id": 481609713,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4MTYwOTcxMw==",
    "user": {
      "login": "amitwaisel",
      "id": 21170412,
      "node_id": "MDQ6VXNlcjIxMTcwNDEy",
      "avatar_url": "https://avatars2.githubusercontent.com/u/21170412?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/amitwaisel",
      "html_url": "https://github.com/amitwaisel",
      "followers_url": "https://api.github.com/users/amitwaisel/followers",
      "following_url": "https://api.github.com/users/amitwaisel/following{/other_user}",
      "gists_url": "https://api.github.com/users/amitwaisel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/amitwaisel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/amitwaisel/subscriptions",
      "organizations_url": "https://api.github.com/users/amitwaisel/orgs",
      "repos_url": "https://api.github.com/users/amitwaisel/repos",
      "events_url": "https://api.github.com/users/amitwaisel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/amitwaisel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-10T09:13:29Z",
    "updated_at": "2019-04-10T10:25:47Z",
    "author_association": "NONE",
    "body": "I am using the latest Windows 10, but it also happened on older Windows 7 machines. I didn't test it on Linux/MacOS yet.\r\nThe `1.20.0-pre3` tag is now compiling, it takes some time... (why don't you publish the native build results for the different platforms? ðŸ˜„). I'll update here once it is built and integrated to our product.\r\n\r\nEdit 1:\r\nBuilding with newest protoc generator, creates autogenerated code which does not compile on Visual Studio due to warnings on enum definition:\r\n```C++\r\n...\r\nINT_MIN_SENTINEL_DO_NOT_USE_ = std::numeric_limits<::google::protobuf::int32>::min()\r\nINT_MAX_SENTINEL_DO_NOT_USE_ = std::numeric_limits<::google::protobuf::int32>::max()\r\n```\r\n> warning C4003: not enough actual parameters for macro 'min'\r\n\r\nThe preprocessor interprets `min` and `max` as macros, as they are defined in Windows headers, and the build fails when compiling with `treat warnings as errors` compiler flag.\r\nTo solve this, the autogenerated `.pb.h` files must be included *before* other Windows headers. \r\n\r\nEdit 2:\r\nThe new c-ares has solved the issue! But, please fix the `min`/`max` issue mentioned above before we can migrate to a newer gRPC version (as it messes up our header files)"
  }
]
