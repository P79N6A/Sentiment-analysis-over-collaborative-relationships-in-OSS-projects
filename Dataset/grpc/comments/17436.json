[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/445122171",
    "html_url": "https://github.com/grpc/grpc/issues/17436#issuecomment-445122171",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/17436",
    "id": 445122171,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0NTEyMjE3MQ==",
    "user": {
      "login": "apolcyn",
      "id": 9566254,
      "node_id": "MDQ6VXNlcjk1NjYyNTQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9566254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apolcyn",
      "html_url": "https://github.com/apolcyn",
      "followers_url": "https://api.github.com/users/apolcyn/followers",
      "following_url": "https://api.github.com/users/apolcyn/following{/other_user}",
      "gists_url": "https://api.github.com/users/apolcyn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apolcyn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apolcyn/subscriptions",
      "organizations_url": "https://api.github.com/users/apolcyn/orgs",
      "repos_url": "https://api.github.com/users/apolcyn/repos",
      "events_url": "https://api.github.com/users/apolcyn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apolcyn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-07T04:51:48Z",
    "updated_at": "2018-12-07T04:51:48Z",
    "author_association": "CONTRIBUTOR",
    "body": "this should be fixed by https://github.com/grpc/grpc/pull/17382, which will also be released in a 1.17.1 soon"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/445262554",
    "html_url": "https://github.com/grpc/grpc/issues/17436#issuecomment-445262554",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/17436",
    "id": 445262554,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0NTI2MjU1NA==",
    "user": {
      "login": "technicianted",
      "id": 26074659,
      "node_id": "MDQ6VXNlcjI2MDc0NjU5",
      "avatar_url": "https://avatars3.githubusercontent.com/u/26074659?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/technicianted",
      "html_url": "https://github.com/technicianted",
      "followers_url": "https://api.github.com/users/technicianted/followers",
      "following_url": "https://api.github.com/users/technicianted/following{/other_user}",
      "gists_url": "https://api.github.com/users/technicianted/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/technicianted/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/technicianted/subscriptions",
      "organizations_url": "https://api.github.com/users/technicianted/orgs",
      "repos_url": "https://api.github.com/users/technicianted/repos",
      "events_url": "https://api.github.com/users/technicianted/events{/privacy}",
      "received_events_url": "https://api.github.com/users/technicianted/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-07T15:13:30Z",
    "updated_at": "2018-12-07T15:13:30Z",
    "author_association": "NONE",
    "body": "Thanks. I'm curious on why you chose to use an independent timer rather than use ares timeouts?"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/445365960",
    "html_url": "https://github.com/grpc/grpc/issues/17436#issuecomment-445365960",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/17436",
    "id": 445365960,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0NTM2NTk2MA==",
    "user": {
      "login": "apolcyn",
      "id": 9566254,
      "node_id": "MDQ6VXNlcjk1NjYyNTQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9566254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apolcyn",
      "html_url": "https://github.com/apolcyn",
      "followers_url": "https://api.github.com/users/apolcyn/followers",
      "following_url": "https://api.github.com/users/apolcyn/following{/other_user}",
      "gists_url": "https://api.github.com/users/apolcyn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apolcyn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apolcyn/subscriptions",
      "organizations_url": "https://api.github.com/users/apolcyn/orgs",
      "repos_url": "https://api.github.com/users/apolcyn/repos",
      "events_url": "https://api.github.com/users/apolcyn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apolcyn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-07T21:08:36Z",
    "updated_at": "2018-12-07T21:08:36Z",
    "author_association": "CONTRIBUTOR",
    "body": "The timeout in this case happens while grpc library poller is waiting for an event on a c-ares fd, c-ares  library itself doesn't really have a chance to take any action during this time."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/445420245",
    "html_url": "https://github.com/grpc/grpc/issues/17436#issuecomment-445420245",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/17436",
    "id": 445420245,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0NTQyMDI0NQ==",
    "user": {
      "login": "technicianted",
      "id": 26074659,
      "node_id": "MDQ6VXNlcjI2MDc0NjU5",
      "avatar_url": "https://avatars3.githubusercontent.com/u/26074659?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/technicianted",
      "html_url": "https://github.com/technicianted",
      "followers_url": "https://api.github.com/users/technicianted/followers",
      "following_url": "https://api.github.com/users/technicianted/following{/other_user}",
      "gists_url": "https://api.github.com/users/technicianted/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/technicianted/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/technicianted/subscriptions",
      "organizations_url": "https://api.github.com/users/technicianted/orgs",
      "repos_url": "https://api.github.com/users/technicianted/repos",
      "events_url": "https://api.github.com/users/technicianted/events{/privacy}",
      "received_events_url": "https://api.github.com/users/technicianted/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-08T01:54:24Z",
    "updated_at": "2018-12-08T01:54:24Z",
    "author_association": "NONE",
    "body": " I meant a grpc timer on c-ares `ares_timeout()` interval to `ares_process()`."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/445421931",
    "html_url": "https://github.com/grpc/grpc/issues/17436#issuecomment-445421931",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/17436",
    "id": 445421931,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0NTQyMTkzMQ==",
    "user": {
      "login": "apolcyn",
      "id": 9566254,
      "node_id": "MDQ6VXNlcjk1NjYyNTQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9566254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apolcyn",
      "html_url": "https://github.com/apolcyn",
      "followers_url": "https://api.github.com/users/apolcyn/followers",
      "following_url": "https://api.github.com/users/apolcyn/following{/other_user}",
      "gists_url": "https://api.github.com/users/apolcyn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apolcyn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apolcyn/subscriptions",
      "organizations_url": "https://api.github.com/users/apolcyn/orgs",
      "repos_url": "https://api.github.com/users/apolcyn/repos",
      "events_url": "https://api.github.com/users/apolcyn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apolcyn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-08T02:17:21Z",
    "updated_at": "2018-12-08T02:17:21Z",
    "author_association": "CONTRIBUTOR",
    "body": "hmm... the existing fix was really chosen mostly for simplicity.  But as a hypothetical scenario, I suppose what you are describing may be a good way of handling e.g. cases in which we want c-ares to iterate over a server list, to go past faulty DNS servers at the beginning of the list. Is this why you are suggesting this? Just wondering here.... are you seeing or a real (or hypothetical) issue which would be solved by your suggestion but not by the existing fix?"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/445423269",
    "html_url": "https://github.com/grpc/grpc/issues/17436#issuecomment-445423269",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/17436",
    "id": 445423269,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0NTQyMzI2OQ==",
    "user": {
      "login": "technicianted",
      "id": 26074659,
      "node_id": "MDQ6VXNlcjI2MDc0NjU5",
      "avatar_url": "https://avatars3.githubusercontent.com/u/26074659?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/technicianted",
      "html_url": "https://github.com/technicianted",
      "followers_url": "https://api.github.com/users/technicianted/followers",
      "following_url": "https://api.github.com/users/technicianted/following{/other_user}",
      "gists_url": "https://api.github.com/users/technicianted/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/technicianted/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/technicianted/subscriptions",
      "organizations_url": "https://api.github.com/users/technicianted/orgs",
      "repos_url": "https://api.github.com/users/technicianted/repos",
      "events_url": "https://api.github.com/users/technicianted/events{/privacy}",
      "received_events_url": "https://api.github.com/users/technicianted/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-08T02:35:45Z",
    "updated_at": "2018-12-19T05:45:34Z",
    "author_association": "NONE",
    "body": "The existing fix will not apply dns retry semantics for partially faulty or overloaded servers.\r\n\r\nIn my use-case I'm being hit by something similar to [this](https://www.weave.works/blog/racy-conntrack-and-dns-lookup-timeouts) (especially common in kubernetes services), where some dns udp packets get dropped due to race condition in NAT, causing some of c-ares queries not to make it to the server. It is especially bad for c-are + grpc since it sends (at least) 4 queries one shot.\r\n\r\nYour solution will break the wait and error out. But what you would expect from a dns client is to eventually succeed.\r\n\r\nOne other minor point is by using c-ares timeouts you get it to behave like it is documented. For example, you can control timeouts and retries from env variables."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/453343871",
    "html_url": "https://github.com/grpc/grpc/issues/17436#issuecomment-453343871",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/17436",
    "id": 453343871,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MzM0Mzg3MQ==",
    "user": {
      "login": "apolcyn",
      "id": 9566254,
      "node_id": "MDQ6VXNlcjk1NjYyNTQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9566254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apolcyn",
      "html_url": "https://github.com/apolcyn",
      "followers_url": "https://api.github.com/users/apolcyn/followers",
      "following_url": "https://api.github.com/users/apolcyn/following{/other_user}",
      "gists_url": "https://api.github.com/users/apolcyn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apolcyn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apolcyn/subscriptions",
      "organizations_url": "https://api.github.com/users/apolcyn/orgs",
      "repos_url": "https://api.github.com/users/apolcyn/repos",
      "events_url": "https://api.github.com/users/apolcyn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apolcyn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-11T02:06:45Z",
    "updated_at": "2019-01-11T02:06:45Z",
    "author_association": "CONTRIBUTOR",
    "body": "https://github.com/grpc/grpc/pull/17688 in progress FYI - I think this suggestion works well, but making one simplifying tweak to skip the `ares_timeout` calls."
  }
]
