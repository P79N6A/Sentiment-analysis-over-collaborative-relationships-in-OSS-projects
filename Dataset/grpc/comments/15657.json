[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/394977800",
    "html_url": "https://github.com/grpc/grpc/issues/15657#issuecomment-394977800",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15657",
    "id": 394977800,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NDk3NzgwMA==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-06T07:58:55Z",
    "updated_at": "2018-06-06T07:58:55Z",
    "author_association": "CONTRIBUTOR",
    "body": "A more detailed breakdown of ObjC tests - the interesting thing is that the total test runtime doesn't add up to the total runtime of the suite - perhaps there's a pretty long build that precedes these steps.\r\n\r\nhttps://sponge.corp.google.com/target?id=62eec144-8d4c-4baa-95a2-12b93df40552&target=github/grpc/objc_macos_dbg_native&searchFor&show=ALL&sortBy=STATUS&sortMethodsBy=DURATION"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/394980041",
    "html_url": "https://github.com/grpc/grpc/issues/15657#issuecomment-394980041",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15657",
    "id": 394980041,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NDk4MDA0MQ==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-06T08:05:52Z",
    "updated_at": "2018-06-06T08:05:52Z",
    "author_association": "CONTRIBUTOR",
    "body": "The build (~20min)\r\nhttps://github.com/grpc/grpc/blob/583f39ad94c0a14a50916e86a5ccd8c3c77ae2c6/src/objective-c/tests/build_tests.sh\r\n\r\nThe longest running test suite (~15min)\r\nhttps://github.com/grpc/grpc/blob/583f39ad94c0a14a50916e86a5ccd8c3c77ae2c6/src/objective-c/tests/run_tests.sh\r\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/398435656",
    "html_url": "https://github.com/grpc/grpc/issues/15657#issuecomment-398435656",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15657",
    "id": 398435656,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5ODQzNTY1Ng==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-19T15:13:06Z",
    "updated_at": "2018-06-19T15:13:06Z",
    "author_association": "CONTRIBUTOR",
    "body": "@muxi  any thoughts?"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/398480581",
    "html_url": "https://github.com/grpc/grpc/issues/15657#issuecomment-398480581",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15657",
    "id": 398480581,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5ODQ4MDU4MQ==",
    "user": {
      "login": "muxi",
      "id": 1054404,
      "node_id": "MDQ6VXNlcjEwNTQ0MDQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1054404?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/muxi",
      "html_url": "https://github.com/muxi",
      "followers_url": "https://api.github.com/users/muxi/followers",
      "following_url": "https://api.github.com/users/muxi/following{/other_user}",
      "gists_url": "https://api.github.com/users/muxi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/muxi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/muxi/subscriptions",
      "organizations_url": "https://api.github.com/users/muxi/orgs",
      "repos_url": "https://api.github.com/users/muxi/repos",
      "events_url": "https://api.github.com/users/muxi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/muxi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-19T17:28:58Z",
    "updated_at": "2018-06-19T17:28:58Z",
    "author_association": "MEMBER",
    "body": "The tests methods does take time to build and run; the numbers inside objc suite makes sense to me. The difference might be from the [build steps](https://github.com/grpc/grpc/blob/master/tools/run_tests/run_tests.py#L1134) but 15 minutes just for that is a bit ridiculous. Is there any way we can look into the logs of the build steps?\r\n\r\nA few thoughts about the test methods:\r\n* Build tests in `examples/objective-c/` (e.g. `objc-build-example-helloworld`) are not affected by the changes in the current PR (unless themselves are changes); we can move them into master tests only.\r\n* I can break down `run_tests` a little bit, but the total time of this suite after break down would likely stay the same.\r\n* I wonder if it is possible to make the methods run parallel? Or make objc run parallel with some other languages?"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/398664542",
    "html_url": "https://github.com/grpc/grpc/issues/15657#issuecomment-398664542",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15657",
    "id": 398664542,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5ODY2NDU0Mg==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-20T08:16:54Z",
    "updated_at": "2018-06-20T08:16:54Z",
    "author_association": "CONTRIBUTOR",
    "body": "On Tue, Jun 19, 2018 at 7:29 PM Muxi Yan <notifications@github.com> wrote:\n\n> The tests methods does take time to build and run; the numbers inside objc\n> suite makes sense to me. The difference might be from the build steps\n> <https://github.com/grpc/grpc/blob/master/tools/run_tests/run_tests.py#L1134>\n> but 15 minutes just for that is a bit ridiculous. Is there any way we can\n> look into the logs of the build steps?\n>\nNormally we only log when the build fails which makes it a bit tricky. But\nyou can get an ad-hoc build with all the logs if you need to. How long does\nit take to build locally?\n\n\n> A few thoughts about the test methods:\n>\n>    - Build tests in examples/objective-c/ (e.g.\n>    objc-build-example-helloworld) are not affected by the changes in the\n>    current PR (unless themselves are changes); we can move them into master\n>    tests only.\n>\n> How much faster would the build go then? It sounds like the examples\nshould be really trivial to build, they shouldn't take more than a few\nminutes. In general, I'd only remove tests as the last resort - I'd much\nrather prefer\nfinding out why objC builds are so horribly slow rather than papering over\nthe problem.\n\n\n>\n>    - I can break down run_tests a little bit, but the total time of this\n>    suite after break down would likely stay the same.\n>    - I wonder if it is possible to make the methods run parallel? Or make\n>    objc run parallel with some other languages?\n>\n> We have a pretty bad experience with that negatively impacting flakiness\nof other languages, so I wouldn't do that.\n\n\n\n>\n>\n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/grpc/grpc/issues/15657#issuecomment-398480581>, or mute\n> the thread\n> <https://github.com/notifications/unsubscribe-auth/AJeq5EvOvdwMOSW9ou1geENX63bEH0ghks5t-TTzgaJpZM4UcKY0>\n> .\n>\n\n\n-- \n\nJan\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/422209427",
    "html_url": "https://github.com/grpc/grpc/issues/15657#issuecomment-422209427",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15657",
    "id": 422209427,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyMjIwOTQyNw==",
    "user": {
      "login": "muxi",
      "id": 1054404,
      "node_id": "MDQ6VXNlcjEwNTQ0MDQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1054404?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/muxi",
      "html_url": "https://github.com/muxi",
      "followers_url": "https://api.github.com/users/muxi/followers",
      "following_url": "https://api.github.com/users/muxi/following{/other_user}",
      "gists_url": "https://api.github.com/users/muxi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/muxi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/muxi/subscriptions",
      "organizations_url": "https://api.github.com/users/muxi/orgs",
      "repos_url": "https://api.github.com/users/muxi/repos",
      "events_url": "https://api.github.com/users/muxi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/muxi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-09-18T00:01:12Z",
    "updated_at": "2018-09-18T00:01:12Z",
    "author_association": "MEMBER",
    "body": "I did some experiments and got a breakdown of the time consumption on each item.\r\n\r\nPreparing tests (~16 min)\r\n* Downloading Cocoapods repo (~7.5 min)\r\n* Building protobuf and `grpc_objective_c_plugin` (~5.5 min)\r\n* Downloading nanopb from github (~3 min)\r\n\r\nTests (~17 min) - for each item below, the most amount of time is spent in building\r\n* CronetUnitTests (~0.5 min)\r\n* CronetEnd2EndTests (~2 min)\r\n* CronetEnd2EndTestsAsan (~3 min)\r\n* CronetEnd2EndTestsTsan (~5 min)\r\n* InteropTestsRemoteWithCronet (~2.5 min)\r\n* InteropTestsRemoteCFStream (~1 min)\r\n* InteropTestsLocalCleartextCFStream (~0.5 min)\r\n* InteropTestsLocalSSLCFStream (~0.5 min)\r\n\r\nBuild tests (~15 min)\r\n* Include 6 build tests with each one taking about 2.5 min on average\r\n\r\nCFStream tests (~2.5 min)\r\n\r\nThis adds up to a total of about 50 minutes, which is pretty close to what we are experiencing in the tests.\r\n\r\nThe preparing cost is a bit too much as I see it. Downloading the entire cocoapods repo, for example, does not that much sense since it does not change that much. Similar for nanopb."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/434692568",
    "html_url": "https://github.com/grpc/grpc/issues/15657#issuecomment-434692568",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15657",
    "id": 434692568,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNDY5MjU2OA==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-31T13:45:50Z",
    "updated_at": "2018-10-31T13:45:50Z",
    "author_association": "CONTRIBUTOR",
    "body": "@muxi   those are useful numbers, thanks!  Nevertheless the time spent building / running seems pretty extreme considering that many of the tests aren't actually doing much. We should revisit this."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/434768092",
    "html_url": "https://github.com/grpc/grpc/issues/15657#issuecomment-434768092",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15657",
    "id": 434768092,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNDc2ODA5Mg==",
    "user": {
      "login": "muxi",
      "id": 1054404,
      "node_id": "MDQ6VXNlcjEwNTQ0MDQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1054404?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/muxi",
      "html_url": "https://github.com/muxi",
      "followers_url": "https://api.github.com/users/muxi/followers",
      "following_url": "https://api.github.com/users/muxi/following{/other_user}",
      "gists_url": "https://api.github.com/users/muxi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/muxi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/muxi/subscriptions",
      "organizations_url": "https://api.github.com/users/muxi/orgs",
      "repos_url": "https://api.github.com/users/muxi/repos",
      "events_url": "https://api.github.com/users/muxi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/muxi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-31T17:03:32Z",
    "updated_at": "2018-10-31T17:03:32Z",
    "author_association": "MEMBER",
    "body": "A few things that could possibly work in my mind:\r\n* pre-install cocoapods and update master repo in the image\r\n* pre-install protobuf as `so` in the image; that should save us from rebuilding protobuf for the proto plugins\r\n* pre-download nanopb in the cache"
  }
]
