[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/465840899",
    "html_url": "https://github.com/grpc/grpc/pull/18115#issuecomment-465840899",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/18115",
    "id": 465840899,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2NTg0MDg5OQ==",
    "user": {
      "login": "yihuazhang",
      "id": 26934891,
      "node_id": "MDQ6VXNlcjI2OTM0ODkx",
      "avatar_url": "https://avatars2.githubusercontent.com/u/26934891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yihuazhang",
      "html_url": "https://github.com/yihuazhang",
      "followers_url": "https://api.github.com/users/yihuazhang/followers",
      "following_url": "https://api.github.com/users/yihuazhang/following{/other_user}",
      "gists_url": "https://api.github.com/users/yihuazhang/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yihuazhang/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yihuazhang/subscriptions",
      "organizations_url": "https://api.github.com/users/yihuazhang/orgs",
      "repos_url": "https://api.github.com/users/yihuazhang/repos",
      "events_url": "https://api.github.com/users/yihuazhang/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yihuazhang/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-21T02:49:59Z",
    "updated_at": "2019-02-21T02:49:59Z",
    "author_association": "CONTRIBUTOR",
    "body": "@jiangtaoli2016 \r\n\r\nThe original PR (#17979) gets closed after doing a force-push. I spent some time trying to re-open it, but could not manage it. So, I created this new PR with the up-to-date changes. PLMK if you prefer the  old PR, I will try re-opening it again. Sorry for the inconvenience. "
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/465845478",
    "html_url": "https://github.com/grpc/grpc/pull/18115#issuecomment-465845478",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/18115",
    "id": 465845478,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2NTg0NTQ3OA==",
    "user": {
      "login": "jiangtaoli2016",
      "id": 19913700,
      "node_id": "MDQ6VXNlcjE5OTEzNzAw",
      "avatar_url": "https://avatars2.githubusercontent.com/u/19913700?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jiangtaoli2016",
      "html_url": "https://github.com/jiangtaoli2016",
      "followers_url": "https://api.github.com/users/jiangtaoli2016/followers",
      "following_url": "https://api.github.com/users/jiangtaoli2016/following{/other_user}",
      "gists_url": "https://api.github.com/users/jiangtaoli2016/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jiangtaoli2016/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jiangtaoli2016/subscriptions",
      "organizations_url": "https://api.github.com/users/jiangtaoli2016/orgs",
      "repos_url": "https://api.github.com/users/jiangtaoli2016/repos",
      "events_url": "https://api.github.com/users/jiangtaoli2016/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jiangtaoli2016/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-21T03:14:16Z",
    "updated_at": "2019-02-21T03:14:16Z",
    "author_association": "CONTRIBUTOR",
    "body": "I can review this PR. No problem. @yihuazhang Thanks much for this implementation."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/466597919",
    "html_url": "https://github.com/grpc/grpc/pull/18115#issuecomment-466597919",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/18115",
    "id": 466597919,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2NjU5NzkxOQ==",
    "user": {
      "login": "yihuazhang",
      "id": 26934891,
      "node_id": "MDQ6VXNlcjI2OTM0ODkx",
      "avatar_url": "https://avatars2.githubusercontent.com/u/26934891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yihuazhang",
      "html_url": "https://github.com/yihuazhang",
      "followers_url": "https://api.github.com/users/yihuazhang/followers",
      "following_url": "https://api.github.com/users/yihuazhang/following{/other_user}",
      "gists_url": "https://api.github.com/users/yihuazhang/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yihuazhang/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yihuazhang/subscriptions",
      "organizations_url": "https://api.github.com/users/yihuazhang/orgs",
      "repos_url": "https://api.github.com/users/yihuazhang/repos",
      "events_url": "https://api.github.com/users/yihuazhang/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yihuazhang/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-23T00:54:46Z",
    "updated_at": "2019-02-23T00:54:46Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thanks @jiangtaoli2016 for the quick review. All comments are addressed. \r\n\r\nI found another problem in the server authorization check implementation. \r\n\r\nIn principle, if a client provides `server_authorization_check_config`, the server authorization check will be performed via the config and if the client does not provide any `server_authorization_check_config`, SSL hostname verification check will be performed as a fallback. By doing that, we at least achieve the same level of security as SSL implementation. And I do not think we should completely discard the hostname verification check.\r\n\r\nHowever in the previous commit, `check_peer` in `grpc_tls_spiffe_channel_security_connector` first performs hostname verification check (`grpc_ssl_check_peer`)  and returns failure if the check fails, which is incorrect. It should first check if `server_authorization_check_config` is present, and fallback to hostname name verification check if it does not. \r\n\r\nAlso notice that,  'check_call_host' in `grpc_tls_spiffe_channel_security_connector` validates call host using the whitelist information embedded in certificates which is based on HTTPS semantics and it does not work if the whitelist information is not available in certificates (e.g., SPIFFE-type certificates), in which case, we at least need to apply the similar check logic as ALTS to compare the `target_name` with `host`."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/466609243",
    "html_url": "https://github.com/grpc/grpc/pull/18115#issuecomment-466609243",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/18115",
    "id": 466609243,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2NjYwOTI0Mw==",
    "user": {
      "login": "jiangtaoli2016",
      "id": 19913700,
      "node_id": "MDQ6VXNlcjE5OTEzNzAw",
      "avatar_url": "https://avatars2.githubusercontent.com/u/19913700?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jiangtaoli2016",
      "html_url": "https://github.com/jiangtaoli2016",
      "followers_url": "https://api.github.com/users/jiangtaoli2016/followers",
      "following_url": "https://api.github.com/users/jiangtaoli2016/following{/other_user}",
      "gists_url": "https://api.github.com/users/jiangtaoli2016/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jiangtaoli2016/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jiangtaoli2016/subscriptions",
      "organizations_url": "https://api.github.com/users/jiangtaoli2016/orgs",
      "repos_url": "https://api.github.com/users/jiangtaoli2016/repos",
      "events_url": "https://api.github.com/users/jiangtaoli2016/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jiangtaoli2016/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-23T02:48:34Z",
    "updated_at": "2019-02-23T02:48:34Z",
    "author_association": "CONTRIBUTOR",
    "body": "@yihuazhang Thanks for revision. A credential has to be either SPIFFE semantics or HTTPS semantics. If SPIFFE semantics is using through `grpc_tls_spiffe_credentials_create`, then we shall only do server auth check (if provided), but not doing hostname check. If HTTPS semantics is used through `grpc_tls_https_credentials_create` or `grpc_ssl_credentials_create`, we should only do hostname check like current hostname check."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/466697546",
    "html_url": "https://github.com/grpc/grpc/pull/18115#issuecomment-466697546",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/18115",
    "id": 466697546,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2NjY5NzU0Ng==",
    "user": {
      "login": "yihuazhang",
      "id": 26934891,
      "node_id": "MDQ6VXNlcjI2OTM0ODkx",
      "avatar_url": "https://avatars2.githubusercontent.com/u/26934891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yihuazhang",
      "html_url": "https://github.com/yihuazhang",
      "followers_url": "https://api.github.com/users/yihuazhang/followers",
      "following_url": "https://api.github.com/users/yihuazhang/following{/other_user}",
      "gists_url": "https://api.github.com/users/yihuazhang/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yihuazhang/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yihuazhang/subscriptions",
      "organizations_url": "https://api.github.com/users/yihuazhang/orgs",
      "repos_url": "https://api.github.com/users/yihuazhang/repos",
      "events_url": "https://api.github.com/users/yihuazhang/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yihuazhang/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-23T21:27:18Z",
    "updated_at": "2019-02-23T21:27:18Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thanks Jiangtao for the explanation. The code is revised. I think it makes sense for C++ to distinguish SPIFFE and HTTPS-based semantics since we can create two different types of credentials for them. But in Java and Go, I do not think we have a plan to have a separate stack for SPIFFE, but use the current SSL stack by incorporating credential reload and SPIFFE-based server authorization check. So in that case, we probably need to do hostname verification check if a user does not provide server authorization check config. But I think it's fine. It is just a different way for a user indicating whether they want to use SPIFFE or HTTPS-based semantics server authorization check. That is, in C++, users will select different credentials while in Java and Go, they provide server authorization config to indicate they will use SPIFFE-based semantics. \r\n\r\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/467092753",
    "html_url": "https://github.com/grpc/grpc/pull/18115#issuecomment-467092753",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/18115",
    "id": 467092753,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2NzA5Mjc1Mw==",
    "user": {
      "login": "yihuazhang",
      "id": 26934891,
      "node_id": "MDQ6VXNlcjI2OTM0ODkx",
      "avatar_url": "https://avatars2.githubusercontent.com/u/26934891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yihuazhang",
      "html_url": "https://github.com/yihuazhang",
      "followers_url": "https://api.github.com/users/yihuazhang/followers",
      "following_url": "https://api.github.com/users/yihuazhang/following{/other_user}",
      "gists_url": "https://api.github.com/users/yihuazhang/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yihuazhang/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yihuazhang/subscriptions",
      "organizations_url": "https://api.github.com/users/yihuazhang/orgs",
      "repos_url": "https://api.github.com/users/yihuazhang/repos",
      "events_url": "https://api.github.com/users/yihuazhang/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yihuazhang/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-25T17:05:32Z",
    "updated_at": "2019-02-25T17:05:32Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thanks @jiangtaoli2016 for the review. \r\n\r\n@markdroth, Could you please take a look? especially the handling of async server authorization check in `spiffe_security_connector.cc`. Also notice that, since we decided to implement sync credential reload, all previous changes to `ssl_transport_security.cc` becomes unnecessary. It is only modified in a way that it is able to parse URI SAN field of SPIFFE certificates."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/472491966",
    "html_url": "https://github.com/grpc/grpc/pull/18115#issuecomment-472491966",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/18115",
    "id": 472491966,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3MjQ5MTk2Ng==",
    "user": {
      "login": "yihuazhang",
      "id": 26934891,
      "node_id": "MDQ6VXNlcjI2OTM0ODkx",
      "avatar_url": "https://avatars2.githubusercontent.com/u/26934891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yihuazhang",
      "html_url": "https://github.com/yihuazhang",
      "followers_url": "https://api.github.com/users/yihuazhang/followers",
      "following_url": "https://api.github.com/users/yihuazhang/following{/other_user}",
      "gists_url": "https://api.github.com/users/yihuazhang/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yihuazhang/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yihuazhang/subscriptions",
      "organizations_url": "https://api.github.com/users/yihuazhang/orgs",
      "repos_url": "https://api.github.com/users/yihuazhang/repos",
      "events_url": "https://api.github.com/users/yihuazhang/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yihuazhang/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-13T16:11:46Z",
    "updated_at": "2019-03-13T16:11:46Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thanks @markdroth for the review. All comments are addressed. PTAL."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/473375993",
    "html_url": "https://github.com/grpc/grpc/pull/18115#issuecomment-473375993",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/18115",
    "id": 473375993,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3MzM3NTk5Mw==",
    "user": {
      "login": "yihuazhang",
      "id": 26934891,
      "node_id": "MDQ6VXNlcjI2OTM0ODkx",
      "avatar_url": "https://avatars2.githubusercontent.com/u/26934891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yihuazhang",
      "html_url": "https://github.com/yihuazhang",
      "followers_url": "https://api.github.com/users/yihuazhang/followers",
      "following_url": "https://api.github.com/users/yihuazhang/following{/other_user}",
      "gists_url": "https://api.github.com/users/yihuazhang/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yihuazhang/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yihuazhang/subscriptions",
      "organizations_url": "https://api.github.com/users/yihuazhang/orgs",
      "repos_url": "https://api.github.com/users/yihuazhang/repos",
      "events_url": "https://api.github.com/users/yihuazhang/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yihuazhang/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-15T17:29:58Z",
    "updated_at": "2019-03-15T17:29:58Z",
    "author_association": "CONTRIBUTOR",
    "body": "Tsan C++: #18142\r\nMacOS: #16392"
  }
]
