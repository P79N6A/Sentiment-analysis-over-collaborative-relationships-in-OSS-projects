[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/307665232",
    "html_url": "https://github.com/grpc/grpc/issues/11451#issuecomment-307665232",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11451",
    "id": 307665232,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwNzY2NTIzMg==",
    "user": {
      "login": "nicolasnoble",
      "id": 7281574,
      "node_id": "MDQ6VXNlcjcyODE1NzQ=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/7281574?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nicolasnoble",
      "html_url": "https://github.com/nicolasnoble",
      "followers_url": "https://api.github.com/users/nicolasnoble/followers",
      "following_url": "https://api.github.com/users/nicolasnoble/following{/other_user}",
      "gists_url": "https://api.github.com/users/nicolasnoble/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nicolasnoble/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nicolasnoble/subscriptions",
      "organizations_url": "https://api.github.com/users/nicolasnoble/orgs",
      "repos_url": "https://api.github.com/users/nicolasnoble/repos",
      "events_url": "https://api.github.com/users/nicolasnoble/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nicolasnoble/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-06-11T23:52:10Z",
    "updated_at": "2017-06-11T23:52:10Z",
    "author_association": "CONTRIBUTOR",
    "body": "What happens if you edit your root certificates to remove the duplicate entry ?"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/307666547",
    "html_url": "https://github.com/grpc/grpc/issues/11451#issuecomment-307666547",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11451",
    "id": 307666547,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwNzY2NjU0Nw==",
    "user": {
      "login": "nicolasnoble",
      "id": 7281574,
      "node_id": "MDQ6VXNlcjcyODE1NzQ=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/7281574?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nicolasnoble",
      "html_url": "https://github.com/nicolasnoble",
      "followers_url": "https://api.github.com/users/nicolasnoble/followers",
      "following_url": "https://api.github.com/users/nicolasnoble/following{/other_user}",
      "gists_url": "https://api.github.com/users/nicolasnoble/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nicolasnoble/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nicolasnoble/subscriptions",
      "organizations_url": "https://api.github.com/users/nicolasnoble/orgs",
      "repos_url": "https://api.github.com/users/nicolasnoble/repos",
      "events_url": "https://api.github.com/users/nicolasnoble/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nicolasnoble/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-06-12T00:18:05Z",
    "updated_at": "2017-06-12T00:18:05Z",
    "author_association": "CONTRIBUTOR",
    "body": "Also, which entry are we talking about ? Which file from our repository, if that's even from our repository ?"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/307813988",
    "html_url": "https://github.com/grpc/grpc/issues/11451#issuecomment-307813988",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11451",
    "id": 307813988,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwNzgxMzk4OA==",
    "user": {
      "login": "mastahyeti",
      "id": 1144197,
      "node_id": "MDQ6VXNlcjExNDQxOTc=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1144197?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mastahyeti",
      "html_url": "https://github.com/mastahyeti",
      "followers_url": "https://api.github.com/users/mastahyeti/followers",
      "following_url": "https://api.github.com/users/mastahyeti/following{/other_user}",
      "gists_url": "https://api.github.com/users/mastahyeti/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mastahyeti/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mastahyeti/subscriptions",
      "organizations_url": "https://api.github.com/users/mastahyeti/orgs",
      "repos_url": "https://api.github.com/users/mastahyeti/repos",
      "events_url": "https://api.github.com/users/mastahyeti/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mastahyeti/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2017-06-12T14:53:52Z",
    "updated_at": "2017-06-12T14:53:52Z",
    "author_association": "NONE",
    "body": "> What happens if you edit your root certificates to remove the duplicate entry ?\r\n\r\nEverything works as expected. My workaround for this issue has been to deduplicate the cert bundle in code before passing them to `GRPC::Core::ChannelCredentials.new`.\r\n\r\n> Also, which entry are we talking about ? Which file from our repository, if that's even from our repository ?\r\n\r\nThe CA bundle is not from this repository. It seems that an error is being returned by OpenSSL [here](https://github.com/grpc/grpc/blob/c7d9c804966d12d852d08f4f132c716846a10ece/src/core/tsi/ssl_transport_security.c#L578), complaining about the duplicate cert in the X509 store.\r\n\r\nOne possible fix would be to handle that error, since it isn't important that OpenSSL refused to add a duplicate cert to the store. Another option would be to find a way to surface errors from OpenSSL so users can debug them. Currently the only message the user sees is `Could not add root certificate to ssl context`, which isn't helpful for debugging the issue."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/307875539",
    "html_url": "https://github.com/grpc/grpc/issues/11451#issuecomment-307875539",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11451",
    "id": 307875539,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwNzg3NTUzOQ==",
    "user": {
      "login": "nicolasnoble",
      "id": 7281574,
      "node_id": "MDQ6VXNlcjcyODE1NzQ=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/7281574?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nicolasnoble",
      "html_url": "https://github.com/nicolasnoble",
      "followers_url": "https://api.github.com/users/nicolasnoble/followers",
      "following_url": "https://api.github.com/users/nicolasnoble/following{/other_user}",
      "gists_url": "https://api.github.com/users/nicolasnoble/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nicolasnoble/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nicolasnoble/subscriptions",
      "organizations_url": "https://api.github.com/users/nicolasnoble/orgs",
      "repos_url": "https://api.github.com/users/nicolasnoble/repos",
      "events_url": "https://api.github.com/users/nicolasnoble/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nicolasnoble/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-06-12T18:22:42Z",
    "updated_at": "2017-06-12T18:22:42Z",
    "author_association": "CONTRIBUTOR",
    "body": "Got it. Thanks."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/363957257",
    "html_url": "https://github.com/grpc/grpc/issues/11451#issuecomment-363957257",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11451",
    "id": 363957257,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2Mzk1NzI1Nw==",
    "user": {
      "login": "mastahyeti",
      "id": 1144197,
      "node_id": "MDQ6VXNlcjExNDQxOTc=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1144197?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mastahyeti",
      "html_url": "https://github.com/mastahyeti",
      "followers_url": "https://api.github.com/users/mastahyeti/followers",
      "following_url": "https://api.github.com/users/mastahyeti/following{/other_user}",
      "gists_url": "https://api.github.com/users/mastahyeti/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mastahyeti/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mastahyeti/subscriptions",
      "organizations_url": "https://api.github.com/users/mastahyeti/orgs",
      "repos_url": "https://api.github.com/users/mastahyeti/repos",
      "events_url": "https://api.github.com/users/mastahyeti/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mastahyeti/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2018-02-08T00:13:15Z",
    "updated_at": "2018-02-08T00:13:15Z",
    "author_association": "NONE",
    "body": "We just ran into this on another production server, where the CA bundle had two identical certificates with different line lengths. The workaround in our code is pretty terrible:\r\n\r\n```ruby\r\nPEM_REXP = /[-]+BEGIN CERTIFICATE[-]+.+?[-]+END CERTIFICATE[-]+/m\r\n\r\n...\r\n\r\n# Deduplicate certificates.\r\ncerts = certs.scan(PEM_REXP).map do |pem|\r\n  # normalize encoding\r\n  OpenSSL::X509::Certificate.new(pem).to_pem\r\nend.uniq.join(\"\\n\")\r\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/389620590",
    "html_url": "https://github.com/grpc/grpc/issues/11451#issuecomment-389620590",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11451",
    "id": 389620590,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4OTYyMDU5MA==",
    "user": {
      "login": "jiangtaoli2016",
      "id": 19913700,
      "node_id": "MDQ6VXNlcjE5OTEzNzAw",
      "avatar_url": "https://avatars2.githubusercontent.com/u/19913700?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jiangtaoli2016",
      "html_url": "https://github.com/jiangtaoli2016",
      "followers_url": "https://api.github.com/users/jiangtaoli2016/followers",
      "following_url": "https://api.github.com/users/jiangtaoli2016/following{/other_user}",
      "gists_url": "https://api.github.com/users/jiangtaoli2016/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jiangtaoli2016/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jiangtaoli2016/subscriptions",
      "organizations_url": "https://api.github.com/users/jiangtaoli2016/orgs",
      "repos_url": "https://api.github.com/users/jiangtaoli2016/repos",
      "events_url": "https://api.github.com/users/jiangtaoli2016/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jiangtaoli2016/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-16T18:31:25Z",
    "updated_at": "2018-05-16T18:31:25Z",
    "author_association": "CONTRIBUTOR",
    "body": "It seems that the root pem file provided to gRPC has duplicative entries. Can you run a script to remove those duplicative entries? "
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/389627286",
    "html_url": "https://github.com/grpc/grpc/issues/11451#issuecomment-389627286",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11451",
    "id": 389627286,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4OTYyNzI4Ng==",
    "user": {
      "login": "mastahyeti",
      "id": 1144197,
      "node_id": "MDQ6VXNlcjExNDQxOTc=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1144197?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mastahyeti",
      "html_url": "https://github.com/mastahyeti",
      "followers_url": "https://api.github.com/users/mastahyeti/followers",
      "following_url": "https://api.github.com/users/mastahyeti/following{/other_user}",
      "gists_url": "https://api.github.com/users/mastahyeti/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mastahyeti/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mastahyeti/subscriptions",
      "organizations_url": "https://api.github.com/users/mastahyeti/orgs",
      "repos_url": "https://api.github.com/users/mastahyeti/repos",
      "events_url": "https://api.github.com/users/mastahyeti/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mastahyeti/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2018-05-16T18:52:38Z",
    "updated_at": "2018-05-16T18:52:38Z",
    "author_association": "NONE",
    "body": "There are several ways to work around the issue, but it seems 1) the library should be able to handle a certificate bundle containing duplicates and 2) it shouldn't raise `GRPC::DeadlineExceeded` for such an error."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/389639100",
    "html_url": "https://github.com/grpc/grpc/issues/11451#issuecomment-389639100",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11451",
    "id": 389639100,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4OTYzOTEwMA==",
    "user": {
      "login": "jiangtaoli2016",
      "id": 19913700,
      "node_id": "MDQ6VXNlcjE5OTEzNzAw",
      "avatar_url": "https://avatars2.githubusercontent.com/u/19913700?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jiangtaoli2016",
      "html_url": "https://github.com/jiangtaoli2016",
      "followers_url": "https://api.github.com/users/jiangtaoli2016/followers",
      "following_url": "https://api.github.com/users/jiangtaoli2016/following{/other_user}",
      "gists_url": "https://api.github.com/users/jiangtaoli2016/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jiangtaoli2016/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jiangtaoli2016/subscriptions",
      "organizations_url": "https://api.github.com/users/jiangtaoli2016/orgs",
      "repos_url": "https://api.github.com/users/jiangtaoli2016/repos",
      "events_url": "https://api.github.com/users/jiangtaoli2016/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jiangtaoli2016/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-16T19:33:04Z",
    "updated_at": "2018-05-16T19:33:04Z",
    "author_association": "CONTRIBUTOR",
    "body": "How come it raise GRPC::DeadlineExceeded? It will fail on SSL handshake."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/389640138",
    "html_url": "https://github.com/grpc/grpc/issues/11451#issuecomment-389640138",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11451",
    "id": 389640138,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4OTY0MDEzOA==",
    "user": {
      "login": "mastahyeti",
      "id": 1144197,
      "node_id": "MDQ6VXNlcjExNDQxOTc=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1144197?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mastahyeti",
      "html_url": "https://github.com/mastahyeti",
      "followers_url": "https://api.github.com/users/mastahyeti/followers",
      "following_url": "https://api.github.com/users/mastahyeti/following{/other_user}",
      "gists_url": "https://api.github.com/users/mastahyeti/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mastahyeti/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mastahyeti/subscriptions",
      "organizations_url": "https://api.github.com/users/mastahyeti/orgs",
      "repos_url": "https://api.github.com/users/mastahyeti/repos",
      "events_url": "https://api.github.com/users/mastahyeti/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mastahyeti/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2018-05-16T19:36:39Z",
    "updated_at": "2018-05-16T19:36:47Z",
    "author_association": "NONE",
    "body": "I don't know why it raises DeadlineExceeded. It seems like the library should at least raise a more useful exception."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/389670092",
    "html_url": "https://github.com/grpc/grpc/issues/11451#issuecomment-389670092",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11451",
    "id": 389670092,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4OTY3MDA5Mg==",
    "user": {
      "login": "jiangtaoli2016",
      "id": 19913700,
      "node_id": "MDQ6VXNlcjE5OTEzNzAw",
      "avatar_url": "https://avatars2.githubusercontent.com/u/19913700?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jiangtaoli2016",
      "html_url": "https://github.com/jiangtaoli2016",
      "followers_url": "https://api.github.com/users/jiangtaoli2016/followers",
      "following_url": "https://api.github.com/users/jiangtaoli2016/following{/other_user}",
      "gists_url": "https://api.github.com/users/jiangtaoli2016/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jiangtaoli2016/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jiangtaoli2016/subscriptions",
      "organizations_url": "https://api.github.com/users/jiangtaoli2016/orgs",
      "repos_url": "https://api.github.com/users/jiangtaoli2016/repos",
      "events_url": "https://api.github.com/users/jiangtaoli2016/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jiangtaoli2016/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-16T21:22:33Z",
    "updated_at": "2018-05-16T21:22:33Z",
    "author_association": "CONTRIBUTOR",
    "body": "It should be fairly simple fix to allow duplicative pem certs in `x509_store_load_certs`\r\n\r\n```\r\n    if (!X509_STORE_add_cert(cert_store, root)) {\r\n      auto error = ERR_get_error();\r\n      if ERR_GET_REASON(error) == X509_R_CERT_ALREADY_IN_HASH_TABLE) {\r\n        gpr_log(GPR_INFO, \"Duplicative root certificate. Ignore.\");\r\n      } else {\r\n        gpr_log(GPR_ERROR, \"Could not add root certificate to ssl context.\");\r\n        result = TSI_INTERNAL_ERROR;\r\n        break;\r\n      }\r\n    }\r\n```\r\nOf course, we need add unit test.\r\n\r\nI just don't have time to fix. Maybe wait for intern to fix.\r\n\r\n@mastahyeti If you prefer, you can submit a fix and contribute to the community!"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/389670389",
    "html_url": "https://github.com/grpc/grpc/issues/11451#issuecomment-389670389",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11451",
    "id": 389670389,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4OTY3MDM4OQ==",
    "user": {
      "login": "jiangtaoli2016",
      "id": 19913700,
      "node_id": "MDQ6VXNlcjE5OTEzNzAw",
      "avatar_url": "https://avatars2.githubusercontent.com/u/19913700?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jiangtaoli2016",
      "html_url": "https://github.com/jiangtaoli2016",
      "followers_url": "https://api.github.com/users/jiangtaoli2016/followers",
      "following_url": "https://api.github.com/users/jiangtaoli2016/following{/other_user}",
      "gists_url": "https://api.github.com/users/jiangtaoli2016/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jiangtaoli2016/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jiangtaoli2016/subscriptions",
      "organizations_url": "https://api.github.com/users/jiangtaoli2016/orgs",
      "repos_url": "https://api.github.com/users/jiangtaoli2016/repos",
      "events_url": "https://api.github.com/users/jiangtaoli2016/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jiangtaoli2016/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-16T21:23:39Z",
    "updated_at": "2018-05-16T21:23:39Z",
    "author_association": "CONTRIBUTOR",
    "body": "@justinburke Since your intern will work on root cert. It maybe a good candidate PR for warming up."
  }
]
