[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/388435432",
    "html_url": "https://github.com/grpc/grpc/pull/15341#issuecomment-388435432",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15341",
    "id": 388435432,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4ODQzNTQzMg==",
    "user": {
      "login": "grpc-testing",
      "id": 28024233,
      "node_id": "MDQ6VXNlcjI4MDI0MjMz",
      "avatar_url": "https://avatars1.githubusercontent.com/u/28024233?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-testing",
      "html_url": "https://github.com/grpc-testing",
      "followers_url": "https://api.github.com/users/grpc-testing/followers",
      "following_url": "https://api.github.com/users/grpc-testing/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-testing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-testing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-testing/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-testing/orgs",
      "repos_url": "https://api.github.com/users/grpc-testing/repos",
      "events_url": "https://api.github.com/users/grpc-testing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-testing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-11T17:44:33Z",
    "updated_at": "2018-05-11T17:44:33Z",
    "author_association": "NONE",
    "body": "```\n****************************************************************\n\nlibgrpc.so\n\n     VM SIZE                                                                  FILE SIZE\n ++++++++++++++ GROWING                                                    ++++++++++++++\n  +0.0%    +267 [None]                                                     +2.92Ki  +0.0%\n      +0.0%    +299 [Unmapped]                                                 +2.92Ki  +0.0%\n      [NEW]     +40 grpc_core::(anonymous namespace)::avl_vtable                   +40  [NEW]\n      +2.0%     +24 [None]                                                           0  [ = ]\n      [NEW]      +8 grpc_core::(anonymous namespace)::g_channelz_registry            0  [ = ]\n  [NEW]    +329 src/core/lib/channel/channelz_registry.cc                     +329  [NEW]\n      [NEW]    +104 [Unmapped]                                                    +104  [NEW]\n      [NEW]     +57 grpc_core::ChannelzRegistry::Unregister                        +57  [NEW]\n      [NEW]     +39 grpc_core::ChannelzRegistry::ChannelzRegistry                  +39  [NEW]\n      [NEW]     +36 grpc_core::ChannelzRegistry::Init                              +36  [NEW]\n      [NEW]     +28 grpc_core::ChannelzRegistry::~ChannelzRegistry                 +28  [NEW]\n      [NEW]     +25 grpc_core::ChannelzRegistry::Shutdown                          +25  [NEW]\n      [NEW]     +20 grpc_core::(anonymous namespace)::compare_intptr               +20  [NEW]\n      [NEW]      +8 grpc_core::ChannelzRegistry::Default                            +8  [NEW]\n      [NEW]      +4 grpc_core::(anonymous namespace)::copy_intptr                   +4  [NEW]\n      [NEW]      +4 grpc_core::(anonymous namespace)::copy_channelz_obj             +4  [NEW]\n      [NEW]      +2 grpc_core::(anonymous namespace)::destroy_intptr                +2  [NEW]\n      [NEW]      +2 grpc_core::(anonymous namespace)::destroy_channelz_obj          +2  [NEW]\n  +2.5%     +64 src/core/lib/channel/channel_trace.cc                          +64  +2.5%\n       +31%     +54 grpc_core::ChannelTrace::ChannelTrace                          +54   +31%\n       +16%     +16 grpc_core::ChannelTrace::~ChannelTrace                         +16   +16%\n\n -------------- SHRINKING                                                  --------------\n  [DEL]    -444 src/core/lib/channel/channel_trace_registry.cc                -444  [DEL]\n      [DEL]     -99 grpc_channel_trace_registry_register_channel_trace             -99  [DEL]\n      [DEL]     -98 [Unmapped]                                                     -98  [DEL]\n      [DEL]     -67 grpc_channel_trace_registry_unregister_channel_trace           -67  [DEL]\n      [DEL]     -60 grpc_channel_trace_registry_get_channel_trace                  -60  [DEL]\n      [DEL]     -47 grpc_channel_trace_registry_init                               -47  [DEL]\n      [DEL]     -41 grpc_channel_trace_registry_shutdown                           -41  [DEL]\n      [DEL]     -20 compare_intptr                                                 -20  [DEL]\n      [DEL]      -4 copy_intptr                                                     -4  [DEL]\n      [DEL]      -4 copy_channel_trace                                              -4  [DEL]\n      [DEL]      -2 destroy_intptr                                                  -2  [DEL]\n      [DEL]      -2 destroy_channel_trace                                           -2  [DEL]\n\n  +0.0%    +216 TOTAL                                                      +2.87Ki  +0.0%\n\n\n****************************************************************\n\nlibgrpc++.so\n\n     VM SIZE              FILE SIZE\n ++++++++++++++ GROWIN ++++++++++++++\n  [ = ]       0 [None]      +8  +0.0%\n\n  [ = ]       0 TOTAL       +8  +0.0%\n\n\n\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/388437725",
    "html_url": "https://github.com/grpc/grpc/pull/15341#issuecomment-388437725",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15341",
    "id": 388437725,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4ODQzNzcyNQ==",
    "user": {
      "login": "grpc-testing",
      "id": 28024233,
      "node_id": "MDQ6VXNlcjI4MDI0MjMz",
      "avatar_url": "https://avatars1.githubusercontent.com/u/28024233?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-testing",
      "html_url": "https://github.com/grpc-testing",
      "followers_url": "https://api.github.com/users/grpc-testing/followers",
      "following_url": "https://api.github.com/users/grpc-testing/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-testing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-testing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-testing/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-testing/orgs",
      "repos_url": "https://api.github.com/users/grpc-testing/repos",
      "events_url": "https://api.github.com/users/grpc-testing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-testing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-11T17:52:42Z",
    "updated_at": "2018-05-11T17:52:42Z",
    "author_association": "NONE",
    "body": "```\n[trickle] No significant performance differences\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/388450245",
    "html_url": "https://github.com/grpc/grpc/pull/15341#issuecomment-388450245",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15341",
    "id": 388450245,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4ODQ1MDI0NQ==",
    "user": {
      "login": "grpc-testing",
      "id": 28024233,
      "node_id": "MDQ6VXNlcjI4MDI0MjMz",
      "avatar_url": "https://avatars1.githubusercontent.com/u/28024233?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-testing",
      "html_url": "https://github.com/grpc-testing",
      "followers_url": "https://api.github.com/users/grpc-testing/followers",
      "following_url": "https://api.github.com/users/grpc-testing/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-testing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-testing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-testing/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-testing/orgs",
      "repos_url": "https://api.github.com/users/grpc-testing/repos",
      "events_url": "https://api.github.com/users/grpc-testing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-testing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-11T18:37:44Z",
    "updated_at": "2018-05-11T18:37:44Z",
    "author_association": "NONE",
    "body": "```\n[microbenchmarks] No significant performance differences\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/388480864",
    "html_url": "https://github.com/grpc/grpc/pull/15341#issuecomment-388480864",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15341",
    "id": 388480864,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4ODQ4MDg2NA==",
    "user": {
      "login": "grpc-testing",
      "id": 28024233,
      "node_id": "MDQ6VXNlcjI4MDI0MjMz",
      "avatar_url": "https://avatars1.githubusercontent.com/u/28024233?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-testing",
      "html_url": "https://github.com/grpc-testing",
      "followers_url": "https://api.github.com/users/grpc-testing/followers",
      "following_url": "https://api.github.com/users/grpc-testing/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-testing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-testing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-testing/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-testing/orgs",
      "repos_url": "https://api.github.com/users/grpc-testing/repos",
      "events_url": "https://api.github.com/users/grpc-testing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-testing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-11T20:45:28Z",
    "updated_at": "2018-05-11T20:45:28Z",
    "author_association": "NONE",
    "body": "```\n****************************************************************\n\nlibgrpc.so\n\n     VM SIZE                                                                  FILE SIZE\n ++++++++++++++ GROWING                                                    ++++++++++++++\n  +0.0%    +267 [None]                                                     +2.92Ki  +0.0%\n      +0.0%    +299 [Unmapped]                                                 +2.92Ki  +0.0%\n      [NEW]     +40 grpc_core::(anonymous namespace)::avl_vtable                   +40  [NEW]\n      +2.0%     +24 [None]                                                           0  [ = ]\n      [NEW]      +8 grpc_core::(anonymous namespace)::g_channelz_registry            0  [ = ]\n  [NEW]    +329 src/core/lib/channel/channelz_registry.cc                     +329  [NEW]\n      [NEW]    +104 [Unmapped]                                                    +104  [NEW]\n      [NEW]     +57 grpc_core::ChannelzRegistry::Unregister                        +57  [NEW]\n      [NEW]     +39 grpc_core::ChannelzRegistry::ChannelzRegistry                  +39  [NEW]\n      [NEW]     +36 grpc_core::ChannelzRegistry::Init                              +36  [NEW]\n      [NEW]     +28 grpc_core::ChannelzRegistry::~ChannelzRegistry                 +28  [NEW]\n      [NEW]     +25 grpc_core::ChannelzRegistry::Shutdown                          +25  [NEW]\n      [NEW]     +20 grpc_core::(anonymous namespace)::compare_intptr               +20  [NEW]\n      [NEW]      +8 grpc_core::ChannelzRegistry::Default                            +8  [NEW]\n      [NEW]      +4 grpc_core::(anonymous namespace)::copy_intptr                   +4  [NEW]\n      [NEW]      +4 grpc_core::(anonymous namespace)::copy_channelz_obj             +4  [NEW]\n      [NEW]      +2 grpc_core::(anonymous namespace)::destroy_intptr                +2  [NEW]\n      [NEW]      +2 grpc_core::(anonymous namespace)::destroy_channelz_obj          +2  [NEW]\n  +2.5%     +64 src/core/lib/channel/channel_trace.cc                          +64  +2.5%\n       +31%     +54 grpc_core::ChannelTrace::ChannelTrace                          +54   +31%\n       +16%     +16 grpc_core::ChannelTrace::~ChannelTrace                         +16   +16%\n\n -------------- SHRINKING                                                  --------------\n  [DEL]    -444 src/core/lib/channel/channel_trace_registry.cc                -444  [DEL]\n      [DEL]     -99 grpc_channel_trace_registry_register_channel_trace             -99  [DEL]\n      [DEL]     -98 [Unmapped]                                                     -98  [DEL]\n      [DEL]     -67 grpc_channel_trace_registry_unregister_channel_trace           -67  [DEL]\n      [DEL]     -60 grpc_channel_trace_registry_get_channel_trace                  -60  [DEL]\n      [DEL]     -47 grpc_channel_trace_registry_init                               -47  [DEL]\n      [DEL]     -41 grpc_channel_trace_registry_shutdown                           -41  [DEL]\n      [DEL]     -20 compare_intptr                                                 -20  [DEL]\n      [DEL]      -4 copy_intptr                                                     -4  [DEL]\n      [DEL]      -4 copy_channel_trace                                              -4  [DEL]\n      [DEL]      -2 destroy_intptr                                                  -2  [DEL]\n      [DEL]      -2 destroy_channel_trace                                           -2  [DEL]\n\n  +0.0%    +216 TOTAL                                                      +2.87Ki  +0.0%\n\n\n****************************************************************\n\nlibgrpc++.so\n\n     VM SIZE              FILE SIZE\n ++++++++++++++ GROWIN ++++++++++++++\n  [ = ]       0 [None]      +8  +0.0%\n\n  [ = ]       0 TOTAL       +8  +0.0%\n\n\n\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/388482664",
    "html_url": "https://github.com/grpc/grpc/pull/15341#issuecomment-388482664",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15341",
    "id": 388482664,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4ODQ4MjY2NA==",
    "user": {
      "login": "grpc-testing",
      "id": 28024233,
      "node_id": "MDQ6VXNlcjI4MDI0MjMz",
      "avatar_url": "https://avatars1.githubusercontent.com/u/28024233?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-testing",
      "html_url": "https://github.com/grpc-testing",
      "followers_url": "https://api.github.com/users/grpc-testing/followers",
      "following_url": "https://api.github.com/users/grpc-testing/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-testing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-testing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-testing/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-testing/orgs",
      "repos_url": "https://api.github.com/users/grpc-testing/repos",
      "events_url": "https://api.github.com/users/grpc-testing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-testing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-11T20:53:10Z",
    "updated_at": "2018-05-11T20:53:10Z",
    "author_association": "NONE",
    "body": "```\n[trickle] No significant performance differences\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/388492282",
    "html_url": "https://github.com/grpc/grpc/pull/15341#issuecomment-388492282",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15341",
    "id": 388492282,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4ODQ5MjI4Mg==",
    "user": {
      "login": "grpc-testing",
      "id": 28024233,
      "node_id": "MDQ6VXNlcjI4MDI0MjMz",
      "avatar_url": "https://avatars1.githubusercontent.com/u/28024233?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-testing",
      "html_url": "https://github.com/grpc-testing",
      "followers_url": "https://api.github.com/users/grpc-testing/followers",
      "following_url": "https://api.github.com/users/grpc-testing/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-testing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-testing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-testing/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-testing/orgs",
      "repos_url": "https://api.github.com/users/grpc-testing/repos",
      "events_url": "https://api.github.com/users/grpc-testing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-testing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-11T21:37:59Z",
    "updated_at": "2018-05-11T21:37:59Z",
    "author_association": "NONE",
    "body": "```\n[microbenchmarks] No significant performance differences\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/389305990",
    "html_url": "https://github.com/grpc/grpc/pull/15341#issuecomment-389305990",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15341",
    "id": 389305990,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4OTMwNTk5MA==",
    "user": {
      "login": "ncteisen",
      "id": 6148140,
      "node_id": "MDQ6VXNlcjYxNDgxNDA=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/6148140?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ncteisen",
      "html_url": "https://github.com/ncteisen",
      "followers_url": "https://api.github.com/users/ncteisen/followers",
      "following_url": "https://api.github.com/users/ncteisen/following{/other_user}",
      "gists_url": "https://api.github.com/users/ncteisen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ncteisen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ncteisen/subscriptions",
      "organizations_url": "https://api.github.com/users/ncteisen/orgs",
      "repos_url": "https://api.github.com/users/ncteisen/repos",
      "events_url": "https://api.github.com/users/ncteisen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ncteisen/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-15T20:40:40Z",
    "updated_at": "2018-05-15T20:40:40Z",
    "author_association": "CONTRIBUTOR",
    "body": "Windows failure #15352"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/389920549",
    "html_url": "https://github.com/grpc/grpc/pull/15341#issuecomment-389920549",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15341",
    "id": 389920549,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4OTkyMDU0OQ==",
    "user": {
      "login": "markdroth",
      "id": 18664614,
      "node_id": "MDQ6VXNlcjE4NjY0NjE0",
      "avatar_url": "https://avatars2.githubusercontent.com/u/18664614?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/markdroth",
      "html_url": "https://github.com/markdroth",
      "followers_url": "https://api.github.com/users/markdroth/followers",
      "following_url": "https://api.github.com/users/markdroth/following{/other_user}",
      "gists_url": "https://api.github.com/users/markdroth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/markdroth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/markdroth/subscriptions",
      "organizations_url": "https://api.github.com/users/markdroth/orgs",
      "repos_url": "https://api.github.com/users/markdroth/repos",
      "events_url": "https://api.github.com/users/markdroth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/markdroth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-17T16:05:51Z",
    "updated_at": "2018-05-17T16:05:51Z",
    "author_association": "MEMBER",
    "body": "Overall, this looks pretty good, but I do have some design questions.  We can talk about this later today.\n\n---\n\nReviewed 28 of 30 files at r1, 2 of 2 files at r2.\nReview status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.\n\n---\n\n*[src/core/lib/channel/channelz_registry.h, line 36 at r2](https://reviewable.io/reviews/grpc/grpc/15341#-LCinzLP6Yy2MyguLI2D:-LCinzLP6Yy2MyguLI2E:bmivk8x) ([raw file](https://github.com/grpc/grpc/blob/ac94dcb61da106697a83a262ee057250c348d1f0/src/core/lib/channel/channelz_registry.h#L36)):*\n> ```objc\n>  public:\n>   // These functions ensure singleton like behavior. We cannot use the normal\n>   // pattern of a get functions with a static function variable due to build\n> ```\n\nWhat build complications prevent this?  We use that pattern in other places; for example, see https://github.com/grpc/grpc/blob/master/src/core/ext/filters/client_channel/resolver_registry.h.\n\n---\n\n*[src/core/lib/channel/channelz_registry.h, line 49 at r2](https://reviewable.io/reviews/grpc/grpc/15341#-LCiomFbCJB4ZxUWceNE:-LCiomFbCJB4ZxUWceNF:b-uvzw94) ([raw file](https://github.com/grpc/grpc/blob/ac94dcb61da106697a83a262ee057250c348d1f0/src/core/lib/channel/channelz_registry.h#L49)):*\n> ```objc\n> \n>   // globally registers a channelz Object. Returns its unique uuid\n>   template <typename Object>\n> ```\n\nIt's not obvious to me whether or not it's valuable to make this generic.  Let's talk in person about how we plan to track the channelz data and the channel trace data and how the two will interact.\n\n---\n\n*[test/core/channel/channelz_registry_test.cc, line 47 at r2](https://reviewable.io/reviews/grpc/grpc/15341#-LCipU447qbpqCeVeruj:-LCipU447qbpqCeVeruk:b-5ry4f8) ([raw file](https://github.com/grpc/grpc/blob/ac94dcb61da106697a83a262ee057250c348d1f0/test/core/channel/channelz_registry_test.cc#L47)):*\n> ```cpp\n>   int object_to_register;\n>   intptr_t uuid = ChannelzRegistry::Default()->Register(&object_to_register);\n>   ASSERT_GT(uuid, 0) << \"First uuid chose must be greater than zero. Zero if \"\n> ```\n\nPlease use `EXPECT` instead of `ASSERT`, except when `ASSERT` is specifically necessary (e.g., when the rest of the test will crash if the condition is not true).  This ensures that when there are multiple failures in a test, they can all be reported at once instead of requiring you to run the test iteratively after each individual fix.\n\nSame thing throughout.\n\n---\n\n*[test/core/channel/channelz_registry_test.cc, line 70 at r2](https://reviewable.io/reviews/grpc/grpc/15341#-LCipFTv0cj5bLXV_BEt:-LCipFTv0cj5bLXV_BEu:b-rlppla) ([raw file](https://github.com/grpc/grpc/blob/ac94dcb61da106697a83a262ee057250c348d1f0/test/core/channel/channelz_registry_test.cc#L70)):*\n> ```cpp\n>   intptr_t uuid = ChannelzRegistry::Default()->Register(&object_to_register);\n>   int* retrieved = ChannelzRegistry::Default()->Get<int>(uuid);\n>   ASSERT_EQ(object_to_register, *retrieved);\n> ```\n\nThis check is not necessary; the one on the following line is a stricter check that also ensures this one is true.\n\n---\n\n*[test/core/channel/channelz_registry_test.cc, line 101 at r2](https://reviewable.io/reviews/grpc/grpc/15341#-LCiq-P52MBI-hInu-kM:-LCiq-P52MBI-hInu-kN:b-utol4u) ([raw file](https://github.com/grpc/grpc/blob/ac94dcb61da106697a83a262ee057250c348d1f0/test/core/channel/channelz_registry_test.cc#L101)):*\n> ```cpp\n>   Foo* retrieved = ChannelzRegistry::Default()->Get<Foo>(uuid);\n>   ASSERT_EQ(foo, retrieved);\n>   ASSERT_EQ(foo->bar, retrieved->bar);\n> ```\n\nThis check is not necessary; the one on the previous line has already verified that this will be true.\n\n---\n\n*[test/core/channel/channelz_registry_test.cc, line 108 at r2](https://reviewable.io/reviews/grpc/grpc/15341#-LCiq6O0Ap3BIAQgKrUV:-LCiq6O0Ap3BIAQgKrUW:b-xo2zjn) ([raw file](https://github.com/grpc/grpc/blob/ac94dcb61da106697a83a262ee057250c348d1f0/test/core/channel/channelz_registry_test.cc#L108)):*\n> ```cpp\n>   intptr_t uuid = ChannelzRegistry::Default()->Register(&object_to_register);\n>   // try to pull out a uuid that does not exist.\n>   int* nonexistant = ChannelzRegistry::Default()->Get<int>(1234);\n> ```\n\nWe don't necessarily know that 1234 won't be present.  How about using `uuid + 1`?\n\n---\n\n\n*Comments from [Reviewable](https://reviewable.io/reviews/grpc/grpc/15341#-:-LCiqJQEDhkIL5TpyCEw:bca4wp1)*\n<!-- Sent from Reviewable.io -->\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/389936039",
    "html_url": "https://github.com/grpc/grpc/pull/15341#issuecomment-389936039",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15341",
    "id": 389936039,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4OTkzNjAzOQ==",
    "user": {
      "login": "ncteisen",
      "id": 6148140,
      "node_id": "MDQ6VXNlcjYxNDgxNDA=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/6148140?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ncteisen",
      "html_url": "https://github.com/ncteisen",
      "followers_url": "https://api.github.com/users/ncteisen/followers",
      "following_url": "https://api.github.com/users/ncteisen/following{/other_user}",
      "gists_url": "https://api.github.com/users/ncteisen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ncteisen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ncteisen/subscriptions",
      "organizations_url": "https://api.github.com/users/ncteisen/orgs",
      "repos_url": "https://api.github.com/users/ncteisen/repos",
      "events_url": "https://api.github.com/users/ncteisen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ncteisen/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-17T16:55:10Z",
    "updated_at": "2018-05-17T16:55:10Z",
    "author_association": "CONTRIBUTOR",
    "body": "\n\n\n\nReview status: all files reviewed at latest revision, 6 unresolved discussions, some commit checks failed.\n\n---\n\n*[src/core/lib/channel/channelz_registry.h, line 36 at r2](https://reviewable.io/reviews/grpc/grpc/15341#-LCinzLP6Yy2MyguLI2D:-LCj0CIV5qwgUk5u99lj:b-ep35fc) ([raw file](https://github.com/grpc/grpc/blob/ac94dcb61da106697a83a262ee057250c348d1f0/src/core/lib/channel/channelz_registry.h#L36)):*\n<details><summary><i>Previously, markdroth (Mark D. Roth) wrote…</i></summary><blockquote>\n\nWhat build complications prevent this?  We use that pattern in other places; for example, see https://github.com/grpc/grpc/blob/master/src/core/ext/filters/client_channel/resolver_registry.h.\n</blockquote></details>\n\nIt looks like the Resolver is doing the same thing that I am doing here? As in having an explicit init and shutdown method that set the file static singleton var\n\nI tried a pattern more like:\n\nstatic Singleton &Singleton::Default() {\n  static Singleton s;\n  return &s;\n}\n\nBut ran into a lot of errors \n\n---\n\n*[test/core/channel/channelz_registry_test.cc, line 47 at r2](https://reviewable.io/reviews/grpc/grpc/15341#-LCipU447qbpqCeVeruj:-LCj-NxjCY-T4UUHxll5:b-896fix) ([raw file](https://github.com/grpc/grpc/blob/ac94dcb61da106697a83a262ee057250c348d1f0/test/core/channel/channelz_registry_test.cc#L47)):*\n<details><summary><i>Previously, markdroth (Mark D. Roth) wrote…</i></summary><blockquote>\n\nPlease use `EXPECT` instead of `ASSERT`, except when `ASSERT` is specifically necessary (e.g., when the rest of the test will crash if the condition is not true).  This ensures that when there are multiple failures in a test, they can all be reported at once instead of requiring you to run the test iteratively after each individual fix.\n\nSame thing throughout.\n</blockquote></details>\n\nDone.\n\n---\n\n*[test/core/channel/channelz_registry_test.cc, line 70 at r2](https://reviewable.io/reviews/grpc/grpc/15341#-LCipFTv0cj5bLXV_BEt:-LCj-Tp80ppbIAVg-yhq:b-896fix) ([raw file](https://github.com/grpc/grpc/blob/ac94dcb61da106697a83a262ee057250c348d1f0/test/core/channel/channelz_registry_test.cc#L70)):*\n<details><summary><i>Previously, markdroth (Mark D. Roth) wrote…</i></summary><blockquote>\n\nThis check is not necessary; the one on the following line is a stricter check that also ensures this one is true.\n</blockquote></details>\n\nDone.\n\n---\n\n*[test/core/channel/channelz_registry_test.cc, line 101 at r2](https://reviewable.io/reviews/grpc/grpc/15341#-LCiq-P52MBI-hInu-kM:-LCj-WPADY1Lv2rzt5-y:b-896fix) ([raw file](https://github.com/grpc/grpc/blob/ac94dcb61da106697a83a262ee057250c348d1f0/test/core/channel/channelz_registry_test.cc#L101)):*\n<details><summary><i>Previously, markdroth (Mark D. Roth) wrote…</i></summary><blockquote>\n\nThis check is not necessary; the one on the previous line has already verified that this will be true.\n</blockquote></details>\n\nDone.\n\n---\n\n*[test/core/channel/channelz_registry_test.cc, line 108 at r2](https://reviewable.io/reviews/grpc/grpc/15341#-LCiq6O0Ap3BIAQgKrUV:-LCj-X143R01qFf06Bg3:b-896fix) ([raw file](https://github.com/grpc/grpc/blob/ac94dcb61da106697a83a262ee057250c348d1f0/test/core/channel/channelz_registry_test.cc#L108)):*\n<details><summary><i>Previously, markdroth (Mark D. Roth) wrote…</i></summary><blockquote>\n\nWe don't necessarily know that 1234 won't be present.  How about using `uuid + 1`?\n</blockquote></details>\n\nDone.\n\n---\n\n\n*Comments from [Reviewable](https://reviewable.io/reviews/grpc/grpc/15341)*\n<!-- Sent from Reviewable.io -->\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/389937398",
    "html_url": "https://github.com/grpc/grpc/pull/15341#issuecomment-389937398",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15341",
    "id": 389937398,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4OTkzNzM5OA==",
    "user": {
      "login": "grpc-testing",
      "id": 28024233,
      "node_id": "MDQ6VXNlcjI4MDI0MjMz",
      "avatar_url": "https://avatars1.githubusercontent.com/u/28024233?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-testing",
      "html_url": "https://github.com/grpc-testing",
      "followers_url": "https://api.github.com/users/grpc-testing/followers",
      "following_url": "https://api.github.com/users/grpc-testing/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-testing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-testing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-testing/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-testing/orgs",
      "repos_url": "https://api.github.com/users/grpc-testing/repos",
      "events_url": "https://api.github.com/users/grpc-testing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-testing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-17T16:59:23Z",
    "updated_at": "2018-05-17T16:59:23Z",
    "author_association": "NONE",
    "body": "```\n****************************************************************\n\nlibgrpc.so\n\n     VM SIZE                                                                  FILE SIZE\n ++++++++++++++ GROWING                                                    ++++++++++++++\n  +0.0%    +203 [None]                                                     +2.92Ki  +0.0%\n      +0.0%    +299 [Unmapped]                                                 +2.92Ki  +0.0%\n      [NEW]     +40 grpc_core::(anonymous namespace)::avl_vtable                   +40  [NEW]\n      [NEW]      +8 grpc_core::(anonymous namespace)::g_channelz_registry            0  [ = ]\n  [NEW]    +329 src/core/lib/channel/channelz_registry.cc                     +329  [NEW]\n      [NEW]    +104 [Unmapped]                                                    +104  [NEW]\n      [NEW]     +57 grpc_core::ChannelzRegistry::Unregister                        +57  [NEW]\n      [NEW]     +39 grpc_core::ChannelzRegistry::ChannelzRegistry                  +39  [NEW]\n      [NEW]     +36 grpc_core::ChannelzRegistry::Init                              +36  [NEW]\n      [NEW]     +28 grpc_core::ChannelzRegistry::~ChannelzRegistry                 +28  [NEW]\n      [NEW]     +25 grpc_core::ChannelzRegistry::Shutdown                          +25  [NEW]\n      [NEW]     +20 grpc_core::(anonymous namespace)::compare_intptr               +20  [NEW]\n      [NEW]      +8 grpc_core::ChannelzRegistry::Default                            +8  [NEW]\n      [NEW]      +4 grpc_core::(anonymous namespace)::copy_intptr                   +4  [NEW]\n      [NEW]      +4 grpc_core::(anonymous namespace)::copy_channelz_obj             +4  [NEW]\n      [NEW]      +2 grpc_core::(anonymous namespace)::destroy_intptr                +2  [NEW]\n      [NEW]      +2 grpc_core::(anonymous namespace)::destroy_channelz_obj          +2  [NEW]\n  +2.5%     +64 src/core/lib/channel/channel_trace.cc                          +64  +2.5%\n       +31%     +54 grpc_core::ChannelTrace::ChannelTrace                          +54   +31%\n       +16%     +16 grpc_core::ChannelTrace::~ChannelTrace                         +16   +16%\n\n -------------- SHRINKING                                                  --------------\n  [DEL]    -444 src/core/lib/channel/channel_trace_registry.cc                -444  [DEL]\n      [DEL]     -99 grpc_channel_trace_registry_register_channel_trace             -99  [DEL]\n      [DEL]     -98 [Unmapped]                                                     -98  [DEL]\n      [DEL]     -67 grpc_channel_trace_registry_unregister_channel_trace           -67  [DEL]\n      [DEL]     -60 grpc_channel_trace_registry_get_channel_trace                  -60  [DEL]\n      [DEL]     -47 grpc_channel_trace_registry_init                               -47  [DEL]\n      [DEL]     -41 grpc_channel_trace_registry_shutdown                           -41  [DEL]\n      [DEL]     -20 compare_intptr                                                 -20  [DEL]\n      [DEL]      -4 copy_intptr                                                     -4  [DEL]\n      [DEL]      -4 copy_channel_trace                                              -4  [DEL]\n      [DEL]      -2 destroy_intptr                                                  -2  [DEL]\n      [DEL]      -2 destroy_channel_trace                                           -2  [DEL]\n\n  +0.0%    +152 TOTAL                                                      +2.88Ki  +0.0%\n\n\n****************************************************************\n\nlibgrpc++.so\n\n     VM SIZE        FILE SIZE\n ++++++++++++++  ++++++++++++++\n\n  [ = ]       0        0  [ = ]\n\n\n\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/389939794",
    "html_url": "https://github.com/grpc/grpc/pull/15341#issuecomment-389939794",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15341",
    "id": 389939794,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4OTkzOTc5NA==",
    "user": {
      "login": "grpc-testing",
      "id": 28024233,
      "node_id": "MDQ6VXNlcjI4MDI0MjMz",
      "avatar_url": "https://avatars1.githubusercontent.com/u/28024233?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-testing",
      "html_url": "https://github.com/grpc-testing",
      "followers_url": "https://api.github.com/users/grpc-testing/followers",
      "following_url": "https://api.github.com/users/grpc-testing/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-testing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-testing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-testing/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-testing/orgs",
      "repos_url": "https://api.github.com/users/grpc-testing/repos",
      "events_url": "https://api.github.com/users/grpc-testing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-testing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-17T17:07:47Z",
    "updated_at": "2018-05-17T17:07:47Z",
    "author_association": "NONE",
    "body": "```\n[trickle] No significant performance differences\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/389953129",
    "html_url": "https://github.com/grpc/grpc/pull/15341#issuecomment-389953129",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15341",
    "id": 389953129,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4OTk1MzEyOQ==",
    "user": {
      "login": "grpc-testing",
      "id": 28024233,
      "node_id": "MDQ6VXNlcjI4MDI0MjMz",
      "avatar_url": "https://avatars1.githubusercontent.com/u/28024233?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-testing",
      "html_url": "https://github.com/grpc-testing",
      "followers_url": "https://api.github.com/users/grpc-testing/followers",
      "following_url": "https://api.github.com/users/grpc-testing/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-testing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-testing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-testing/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-testing/orgs",
      "repos_url": "https://api.github.com/users/grpc-testing/repos",
      "events_url": "https://api.github.com/users/grpc-testing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-testing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-17T17:51:41Z",
    "updated_at": "2018-05-17T17:51:41Z",
    "author_association": "NONE",
    "body": "```\n[microbenchmarks] No significant performance differences\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/389975715",
    "html_url": "https://github.com/grpc/grpc/pull/15341#issuecomment-389975715",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15341",
    "id": 389975715,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4OTk3NTcxNQ==",
    "user": {
      "login": "markdroth",
      "id": 18664614,
      "node_id": "MDQ6VXNlcjE4NjY0NjE0",
      "avatar_url": "https://avatars2.githubusercontent.com/u/18664614?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/markdroth",
      "html_url": "https://github.com/markdroth",
      "followers_url": "https://api.github.com/users/markdroth/followers",
      "following_url": "https://api.github.com/users/markdroth/following{/other_user}",
      "gists_url": "https://api.github.com/users/markdroth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/markdroth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/markdroth/subscriptions",
      "organizations_url": "https://api.github.com/users/markdroth/orgs",
      "repos_url": "https://api.github.com/users/markdroth/repos",
      "events_url": "https://api.github.com/users/markdroth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/markdroth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-17T19:07:02Z",
    "updated_at": "2018-05-17T19:07:02Z",
    "author_association": "MEMBER",
    "body": "Just a few minor comments remaining.\n\n---\n\nReviewed 18 of 18 files at r3.\nReview status: all files reviewed at latest revision, 1 unresolved discussion, some commit checks failed.\n\n---\n\n*[src/core/lib/channel/channelz_registry.h, line 36 at r2](https://reviewable.io/reviews/grpc/grpc/15341#-LCinzLP6Yy2MyguLI2D:-LCjTxDY5QgBwa__2HDC:b-13d20s) ([raw file](https://github.com/grpc/grpc/blob/ac94dcb61da106697a83a262ee057250c348d1f0/src/core/lib/channel/channelz_registry.h#L36)):*\n<details><summary><i>Previously, ncteisen (Noah Eisen) wrote…</i></summary><blockquote>\n\nIt looks like the Resolver is doing the same thing that I am doing here? As in having an explicit init and shutdown method that set the file static singleton var\n\nI tried a pattern more like:\n\nstatic Singleton &Singleton::Default() {\n  static Singleton s;\n  return &s;\n}\n\nBut ran into a lot of errors \n</blockquote></details>\n\nAh, okay; I misunderstood what this comment was referring to.\n\nActually, the pattern you tried violates the style guide:\n\nhttps://google.github.io/styleguide/cppguide.html#Static_and_Global_Variables\n\nSo this probably doesn't require a comment.\n\n---\n\n*[src/core/lib/channel/channelz_registry.h, line 46 at r3](https://reviewable.io/reviews/grpc/grpc/15341#-LCjUSTpBJiainoEWChA:-LCjUSTq18KJKsKZnAPK:brnu87n) ([raw file](https://github.com/grpc/grpc/blob/d4419baa05adc1cb77afdb0a8d61683fdc1a7221/src/core/lib/channel/channelz_registry.h#L46)):*\n> ```objc\n> \n>   // Returned the singleton instance of ChannelzRegistry;\n>   static ChannelzRegistry* Default();\n> ```\n\nInstead of requiring all callers to call this to get the object and then invoke a method on that object, I suggest just making the public methods static and having them internally get the default object.  This is what we do in the resolver and LB policy registry code.\n\n---\n\n*[test/core/channel/channelz_registry_test.cc, line 81 at r3](https://reviewable.io/reviews/grpc/grpc/15341#-LCjTjpr8JYDMNNieJST:-LCjTjpr8JYDMNNieJSU:b-becmxe) ([raw file](https://github.com/grpc/grpc/blob/d4419baa05adc1cb77afdb0a8d61683fdc1a7221/test/core/channel/channelz_registry_test.cc#L81)):*\n> ```cpp\n>   std::string* retrieved_str =\n>       ChannelzRegistry::Default()->Get<std::string>(str_uuid);\n>   EXPECT_EQ(int_to_register, *retrieved_int);\n> ```\n\nThis check is not necessary; the one on the following line is a superset.\n\n---\n\n*[test/core/channel/channelz_registry_test.cc, line 83 at r3](https://reviewable.io/reviews/grpc/grpc/15341#-LCjTnQ03asIDkIiR_ic:-LCjTnQ03asIDkIiR_id:brhumzt) ([raw file](https://github.com/grpc/grpc/blob/d4419baa05adc1cb77afdb0a8d61683fdc1a7221/test/core/channel/channelz_registry_test.cc#L83)):*\n> ```cpp\n>   EXPECT_EQ(int_to_register, *retrieved_int);\n>   EXPECT_EQ(&int_to_register, retrieved_int);\n>   EXPECT_STREQ(str_to_register.c_str(), (*retrieved_str).c_str());\n> ```\n\nSame here.\n\n---\n\n\n*Comments from [Reviewable](https://reviewable.io/reviews/grpc/grpc/15341#-:-LCjUqWjCQnmOrgPwyw1:b7u3aqr)*\n<!-- Sent from Reviewable.io -->\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/390026222",
    "html_url": "https://github.com/grpc/grpc/pull/15341#issuecomment-390026222",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15341",
    "id": 390026222,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MDAyNjIyMg==",
    "user": {
      "login": "ncteisen",
      "id": 6148140,
      "node_id": "MDQ6VXNlcjYxNDgxNDA=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/6148140?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ncteisen",
      "html_url": "https://github.com/ncteisen",
      "followers_url": "https://api.github.com/users/ncteisen/followers",
      "following_url": "https://api.github.com/users/ncteisen/following{/other_user}",
      "gists_url": "https://api.github.com/users/ncteisen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ncteisen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ncteisen/subscriptions",
      "organizations_url": "https://api.github.com/users/ncteisen/orgs",
      "repos_url": "https://api.github.com/users/ncteisen/repos",
      "events_url": "https://api.github.com/users/ncteisen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ncteisen/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-17T21:55:59Z",
    "updated_at": "2018-05-17T21:55:59Z",
    "author_association": "CONTRIBUTOR",
    "body": "\n\n\n\nReview status: all files reviewed at latest revision, 4 unresolved discussions, some commit checks failed.\n\n---\n\n*[src/core/lib/channel/channelz_registry.h, line 36 at r2](https://reviewable.io/reviews/grpc/grpc/15341#-LCinzLP6Yy2MyguLI2D:-LCk1Z6A5w-SQJGhB-cC:b-896fix) ([raw file](https://github.com/grpc/grpc/blob/ac94dcb61da106697a83a262ee057250c348d1f0/src/core/lib/channel/channelz_registry.h#L36)):*\n<details><summary><i>Previously, markdroth (Mark D. Roth) wrote…</i></summary><blockquote>\n\nAh, okay; I misunderstood what this comment was referring to.\n\nActually, the pattern you tried violates the style guide:\n\nhttps://google.github.io/styleguide/cppguide.html#Static_and_Global_Variables\n\nSo this probably doesn't require a comment.\n</blockquote></details>\n\nDone.\n\n---\n\n*[src/core/lib/channel/channelz_registry.h, line 46 at r3](https://reviewable.io/reviews/grpc/grpc/15341#-LCjUSTpBJiainoEWChA:-LCk5H1C1du7VRtboOmY:b-896fix) ([raw file](https://github.com/grpc/grpc/blob/d4419baa05adc1cb77afdb0a8d61683fdc1a7221/src/core/lib/channel/channelz_registry.h#L46)):*\n<details><summary><i>Previously, markdroth (Mark D. Roth) wrote…</i></summary><blockquote>\n\nInstead of requiring all callers to call this to get the object and then invoke a method on that object, I suggest just making the public methods static and having them internally get the default object.  This is what we do in the resolver and LB policy registry code.\n</blockquote></details>\n\nDone.\n\n---\n\n*[test/core/channel/channelz_registry_test.cc, line 81 at r3](https://reviewable.io/reviews/grpc/grpc/15341#-LCjTjpr8JYDMNNieJST:-LCk3Qxl4Vu4L-sWrEqq:b-896fix) ([raw file](https://github.com/grpc/grpc/blob/d4419baa05adc1cb77afdb0a8d61683fdc1a7221/test/core/channel/channelz_registry_test.cc#L81)):*\n<details><summary><i>Previously, markdroth (Mark D. Roth) wrote…</i></summary><blockquote>\n\nThis check is not necessary; the one on the following line is a superset.\n</blockquote></details>\n\nDone.\n\n---\n\n*[test/core/channel/channelz_registry_test.cc, line 83 at r3](https://reviewable.io/reviews/grpc/grpc/15341#-LCjTnQ03asIDkIiR_ic:-LCk3RDH1_kE2d-h4CCi:b-896fix) ([raw file](https://github.com/grpc/grpc/blob/d4419baa05adc1cb77afdb0a8d61683fdc1a7221/test/core/channel/channelz_registry_test.cc#L83)):*\n<details><summary><i>Previously, markdroth (Mark D. Roth) wrote…</i></summary><blockquote>\n\nSame here.\n</blockquote></details>\n\nDone.\n\n---\n\n\n*Comments from [Reviewable](https://reviewable.io/reviews/grpc/grpc/15341)*\n<!-- Sent from Reviewable.io -->\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/390027151",
    "html_url": "https://github.com/grpc/grpc/pull/15341#issuecomment-390027151",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15341",
    "id": 390027151,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MDAyNzE1MQ==",
    "user": {
      "login": "grpc-testing",
      "id": 28024233,
      "node_id": "MDQ6VXNlcjI4MDI0MjMz",
      "avatar_url": "https://avatars1.githubusercontent.com/u/28024233?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-testing",
      "html_url": "https://github.com/grpc-testing",
      "followers_url": "https://api.github.com/users/grpc-testing/followers",
      "following_url": "https://api.github.com/users/grpc-testing/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-testing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-testing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-testing/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-testing/orgs",
      "repos_url": "https://api.github.com/users/grpc-testing/repos",
      "events_url": "https://api.github.com/users/grpc-testing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-testing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-17T21:59:26Z",
    "updated_at": "2018-05-17T21:59:26Z",
    "author_association": "NONE",
    "body": "```\n****************************************************************\n\nlibgrpc.so\n\n     VM SIZE                                                                  FILE SIZE\n ++++++++++++++ GROWING                                                    ++++++++++++++\n  +0.0%    +235 [None]                                                     +3.49Ki  +0.0%\n      +0.1%    +331 [Unmapped]                                                 +3.49Ki  +0.0%\n      [NEW]     +40 grpc_core::(anonymous namespace)::avl_vtable                   +40  [NEW]\n      [NEW]      +8 grpc_core::(anonymous namespace)::g_channelz_registry            0  [ = ]\n  [NEW]    +329 src/core/lib/channel/channelz_registry.cc                     +329  [NEW]\n      [NEW]    +104 [Unmapped]                                                    +104  [NEW]\n      [NEW]     +57 grpc_core::ChannelzRegistry::InternalUnregister                +57  [NEW]\n      [NEW]     +39 grpc_core::ChannelzRegistry::ChannelzRegistry                  +39  [NEW]\n      [NEW]     +36 grpc_core::ChannelzRegistry::Init                              +36  [NEW]\n      [NEW]     +28 grpc_core::ChannelzRegistry::~ChannelzRegistry                 +28  [NEW]\n      [NEW]     +25 grpc_core::ChannelzRegistry::Shutdown                          +25  [NEW]\n      [NEW]     +20 grpc_core::(anonymous namespace)::compare_intptr               +20  [NEW]\n      [NEW]      +8 grpc_core::ChannelzRegistry::Default                            +8  [NEW]\n      [NEW]      +4 grpc_core::(anonymous namespace)::copy_intptr                   +4  [NEW]\n      [NEW]      +4 grpc_core::(anonymous namespace)::copy_channelz_obj             +4  [NEW]\n      [NEW]      +2 grpc_core::(anonymous namespace)::destroy_intptr                +2  [NEW]\n      [NEW]      +2 grpc_core::(anonymous namespace)::destroy_channelz_obj          +2  [NEW]\n  +2.5%     +64 src/core/lib/channel/channel_trace.cc                          +64  +2.5%\n       +31%     +54 grpc_core::ChannelTrace::ChannelTrace                          +54   +31%\n       +16%     +16 grpc_core::ChannelTrace::~ChannelTrace                         +16   +16%\n\n -------------- SHRINKING                                                  --------------\n  [DEL]    -444 src/core/lib/channel/channel_trace_registry.cc                -444  [DEL]\n      [DEL]     -99 grpc_channel_trace_registry_register_channel_trace             -99  [DEL]\n      [DEL]     -98 [Unmapped]                                                     -98  [DEL]\n      [DEL]     -67 grpc_channel_trace_registry_unregister_channel_trace           -67  [DEL]\n      [DEL]     -60 grpc_channel_trace_registry_get_channel_trace                  -60  [DEL]\n      [DEL]     -47 grpc_channel_trace_registry_init                               -47  [DEL]\n      [DEL]     -41 grpc_channel_trace_registry_shutdown                           -41  [DEL]\n      [DEL]     -20 compare_intptr                                                 -20  [DEL]\n      [DEL]      -4 copy_intptr                                                     -4  [DEL]\n      [DEL]      -4 copy_channel_trace                                              -4  [DEL]\n      [DEL]      -2 destroy_intptr                                                  -2  [DEL]\n      [DEL]      -2 destroy_channel_trace                                           -2  [DEL]\n\n  +0.0%    +184 TOTAL                                                      +3.44Ki  +0.0%\n\n\n****************************************************************\n\nlibgrpc++.so\n\n     VM SIZE        FILE SIZE\n ++++++++++++++  ++++++++++++++\n\n  [ = ]       0        0  [ = ]\n\n\n\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/390027821",
    "html_url": "https://github.com/grpc/grpc/pull/15341#issuecomment-390027821",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15341",
    "id": 390027821,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MDAyNzgyMQ==",
    "user": {
      "login": "markdroth",
      "id": 18664614,
      "node_id": "MDQ6VXNlcjE4NjY0NjE0",
      "avatar_url": "https://avatars2.githubusercontent.com/u/18664614?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/markdroth",
      "html_url": "https://github.com/markdroth",
      "followers_url": "https://api.github.com/users/markdroth/followers",
      "following_url": "https://api.github.com/users/markdroth/following{/other_user}",
      "gists_url": "https://api.github.com/users/markdroth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/markdroth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/markdroth/subscriptions",
      "organizations_url": "https://api.github.com/users/markdroth/orgs",
      "repos_url": "https://api.github.com/users/markdroth/repos",
      "events_url": "https://api.github.com/users/markdroth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/markdroth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-17T22:01:41Z",
    "updated_at": "2018-05-17T22:01:41Z",
    "author_association": "MEMBER",
    "body": "Just one style nit remaining.  Otherwise, this looks great!\n\n---\n\nReviewed 5 of 5 files at r4.\nReview status: all files reviewed at latest revision, all discussions resolved.\n\n---\n\n*[src/core/lib/channel/channelz_registry.h, line 61 at r4](https://reviewable.io/reviews/grpc/grpc/15341#-LCk6Vhc2sTI2sfRkRJn:-LCk6Vhc2sTI2sfRkRJo:b-1t9vdv) ([raw file](https://github.com/grpc/grpc/blob/3baa90fbea45502070d430ea2fa11c37049597f6/src/core/lib/channel/channelz_registry.h#L61)):*\n> ```objc\n>   GPRC_ALLOW_CLASS_TO_USE_NON_PUBLIC_DELETE\n> \n>   gpr_mu mu_;\n> ```\n\nPlease follow the declaration order defined by the style guide:\n\nhttps://google.github.io/styleguide/cppguide.html#Declaration_Order\n\n---\n\n\n*Comments from [Reviewable](https://reviewable.io/reviews/grpc/grpc/15341#-:-LCk6ov64qFQxrLwpxgJ:b641f5d)*\n<!-- Sent from Reviewable.io -->\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/390029492",
    "html_url": "https://github.com/grpc/grpc/pull/15341#issuecomment-390029492",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15341",
    "id": 390029492,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MDAyOTQ5Mg==",
    "user": {
      "login": "grpc-testing",
      "id": 28024233,
      "node_id": "MDQ6VXNlcjI4MDI0MjMz",
      "avatar_url": "https://avatars1.githubusercontent.com/u/28024233?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-testing",
      "html_url": "https://github.com/grpc-testing",
      "followers_url": "https://api.github.com/users/grpc-testing/followers",
      "following_url": "https://api.github.com/users/grpc-testing/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-testing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-testing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-testing/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-testing/orgs",
      "repos_url": "https://api.github.com/users/grpc-testing/repos",
      "events_url": "https://api.github.com/users/grpc-testing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-testing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-17T22:07:47Z",
    "updated_at": "2018-05-17T22:07:47Z",
    "author_association": "NONE",
    "body": "```\n[trickle] No significant performance differences\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/390030449",
    "html_url": "https://github.com/grpc/grpc/pull/15341#issuecomment-390030449",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15341",
    "id": 390030449,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MDAzMDQ0OQ==",
    "user": {
      "login": "grpc-testing",
      "id": 28024233,
      "node_id": "MDQ6VXNlcjI4MDI0MjMz",
      "avatar_url": "https://avatars1.githubusercontent.com/u/28024233?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-testing",
      "html_url": "https://github.com/grpc-testing",
      "followers_url": "https://api.github.com/users/grpc-testing/followers",
      "following_url": "https://api.github.com/users/grpc-testing/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-testing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-testing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-testing/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-testing/orgs",
      "repos_url": "https://api.github.com/users/grpc-testing/repos",
      "events_url": "https://api.github.com/users/grpc-testing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-testing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-17T22:11:54Z",
    "updated_at": "2018-05-17T22:11:54Z",
    "author_association": "NONE",
    "body": "```\n****************************************************************\n\nlibgrpc.so\n\n     VM SIZE                                                                  FILE SIZE\n ++++++++++++++ GROWING                                                    ++++++++++++++\n  +0.0%    +235 [None]                                                     +3.50Ki  +0.0%\n      +0.1%    +331 [Unmapped]                                                 +3.50Ki  +0.0%\n      [NEW]     +40 grpc_core::(anonymous namespace)::avl_vtable                   +40  [NEW]\n      [NEW]      +8 grpc_core::(anonymous namespace)::g_channelz_registry            0  [ = ]\n  [NEW]    +329 src/core/lib/channel/channelz_registry.cc                     +329  [NEW]\n      [NEW]    +104 [Unmapped]                                                    +104  [NEW]\n      [NEW]     +57 grpc_core::ChannelzRegistry::InternalUnregister                +57  [NEW]\n      [NEW]     +39 grpc_core::ChannelzRegistry::ChannelzRegistry                  +39  [NEW]\n      [NEW]     +36 grpc_core::ChannelzRegistry::Init                              +36  [NEW]\n      [NEW]     +28 grpc_core::ChannelzRegistry::~ChannelzRegistry                 +28  [NEW]\n      [NEW]     +25 grpc_core::ChannelzRegistry::Shutdown                          +25  [NEW]\n      [NEW]     +20 grpc_core::(anonymous namespace)::compare_intptr               +20  [NEW]\n      [NEW]      +8 grpc_core::ChannelzRegistry::Default                            +8  [NEW]\n      [NEW]      +4 grpc_core::(anonymous namespace)::copy_intptr                   +4  [NEW]\n      [NEW]      +4 grpc_core::(anonymous namespace)::copy_channelz_obj             +4  [NEW]\n      [NEW]      +2 grpc_core::(anonymous namespace)::destroy_intptr                +2  [NEW]\n      [NEW]      +2 grpc_core::(anonymous namespace)::destroy_channelz_obj          +2  [NEW]\n  +2.5%     +64 src/core/lib/channel/channel_trace.cc                          +64  +2.5%\n       +31%     +54 grpc_core::ChannelTrace::ChannelTrace                          +54   +31%\n       +16%     +16 grpc_core::ChannelTrace::~ChannelTrace                         +16   +16%\n\n -------------- SHRINKING                                                  --------------\n  [DEL]    -444 src/core/lib/channel/channel_trace_registry.cc                -444  [DEL]\n      [DEL]     -99 grpc_channel_trace_registry_register_channel_trace             -99  [DEL]\n      [DEL]     -98 [Unmapped]                                                     -98  [DEL]\n      [DEL]     -67 grpc_channel_trace_registry_unregister_channel_trace           -67  [DEL]\n      [DEL]     -60 grpc_channel_trace_registry_get_channel_trace                  -60  [DEL]\n      [DEL]     -47 grpc_channel_trace_registry_init                               -47  [DEL]\n      [DEL]     -41 grpc_channel_trace_registry_shutdown                           -41  [DEL]\n      [DEL]     -20 compare_intptr                                                 -20  [DEL]\n      [DEL]      -4 copy_intptr                                                     -4  [DEL]\n      [DEL]      -4 copy_channel_trace                                              -4  [DEL]\n      [DEL]      -2 destroy_intptr                                                  -2  [DEL]\n      [DEL]      -2 destroy_channel_trace                                           -2  [DEL]\n\n  +0.0%    +184 TOTAL                                                      +3.45Ki  +0.0%\n\n\n****************************************************************\n\nlibgrpc++.so\n\n     VM SIZE        FILE SIZE\n ++++++++++++++  ++++++++++++++\n\n  [ = ]       0        0  [ = ]\n\n\n\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/390032131",
    "html_url": "https://github.com/grpc/grpc/pull/15341#issuecomment-390032131",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15341",
    "id": 390032131,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MDAzMjEzMQ==",
    "user": {
      "login": "grpc-testing",
      "id": 28024233,
      "node_id": "MDQ6VXNlcjI4MDI0MjMz",
      "avatar_url": "https://avatars1.githubusercontent.com/u/28024233?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-testing",
      "html_url": "https://github.com/grpc-testing",
      "followers_url": "https://api.github.com/users/grpc-testing/followers",
      "following_url": "https://api.github.com/users/grpc-testing/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-testing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-testing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-testing/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-testing/orgs",
      "repos_url": "https://api.github.com/users/grpc-testing/repos",
      "events_url": "https://api.github.com/users/grpc-testing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-testing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-17T22:19:59Z",
    "updated_at": "2018-05-17T22:19:59Z",
    "author_association": "NONE",
    "body": "```\n[trickle] No significant performance differences\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/390038135",
    "html_url": "https://github.com/grpc/grpc/pull/15341#issuecomment-390038135",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15341",
    "id": 390038135,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MDAzODEzNQ==",
    "user": {
      "login": "grpc-testing",
      "id": 28024233,
      "node_id": "MDQ6VXNlcjI4MDI0MjMz",
      "avatar_url": "https://avatars1.githubusercontent.com/u/28024233?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-testing",
      "html_url": "https://github.com/grpc-testing",
      "followers_url": "https://api.github.com/users/grpc-testing/followers",
      "following_url": "https://api.github.com/users/grpc-testing/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-testing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-testing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-testing/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-testing/orgs",
      "repos_url": "https://api.github.com/users/grpc-testing/repos",
      "events_url": "https://api.github.com/users/grpc-testing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-testing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-17T22:51:48Z",
    "updated_at": "2018-05-17T22:51:48Z",
    "author_association": "NONE",
    "body": "```\n[microbenchmarks] No significant performance differences\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/390040547",
    "html_url": "https://github.com/grpc/grpc/pull/15341#issuecomment-390040547",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15341",
    "id": 390040547,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MDA0MDU0Nw==",
    "user": {
      "login": "grpc-testing",
      "id": 28024233,
      "node_id": "MDQ6VXNlcjI4MDI0MjMz",
      "avatar_url": "https://avatars1.githubusercontent.com/u/28024233?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grpc-testing",
      "html_url": "https://github.com/grpc-testing",
      "followers_url": "https://api.github.com/users/grpc-testing/followers",
      "following_url": "https://api.github.com/users/grpc-testing/following{/other_user}",
      "gists_url": "https://api.github.com/users/grpc-testing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grpc-testing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grpc-testing/subscriptions",
      "organizations_url": "https://api.github.com/users/grpc-testing/orgs",
      "repos_url": "https://api.github.com/users/grpc-testing/repos",
      "events_url": "https://api.github.com/users/grpc-testing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grpc-testing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-17T23:05:22Z",
    "updated_at": "2018-05-17T23:05:22Z",
    "author_association": "NONE",
    "body": "```\n[microbenchmarks] No significant performance differences\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/390058545",
    "html_url": "https://github.com/grpc/grpc/pull/15341#issuecomment-390058545",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15341",
    "id": 390058545,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MDA1ODU0NQ==",
    "user": {
      "login": "ncteisen",
      "id": 6148140,
      "node_id": "MDQ6VXNlcjYxNDgxNDA=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/6148140?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ncteisen",
      "html_url": "https://github.com/ncteisen",
      "followers_url": "https://api.github.com/users/ncteisen/followers",
      "following_url": "https://api.github.com/users/ncteisen/following{/other_user}",
      "gists_url": "https://api.github.com/users/ncteisen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ncteisen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ncteisen/subscriptions",
      "organizations_url": "https://api.github.com/users/ncteisen/orgs",
      "repos_url": "https://api.github.com/users/ncteisen/repos",
      "events_url": "https://api.github.com/users/ncteisen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ncteisen/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-18T00:46:22Z",
    "updated_at": "2018-05-18T00:46:22Z",
    "author_association": "CONTRIBUTOR",
    "body": "Mac: #11335\r\nTsan: #15439 (rerunning it to be sure)"
  }
]
