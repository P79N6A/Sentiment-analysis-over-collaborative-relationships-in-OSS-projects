[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/242560447",
    "html_url": "https://github.com/grpc/grpc/issues/7873#issuecomment-242560447",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/7873",
    "id": 242560447,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0MjU2MDQ0Nw==",
    "user": {
      "login": "apolcyn",
      "id": 9566254,
      "node_id": "MDQ6VXNlcjk1NjYyNTQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9566254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apolcyn",
      "html_url": "https://github.com/apolcyn",
      "followers_url": "https://api.github.com/users/apolcyn/followers",
      "following_url": "https://api.github.com/users/apolcyn/following{/other_user}",
      "gists_url": "https://api.github.com/users/apolcyn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apolcyn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apolcyn/subscriptions",
      "organizations_url": "https://api.github.com/users/apolcyn/orgs",
      "repos_url": "https://api.github.com/users/apolcyn/repos",
      "events_url": "https://api.github.com/users/apolcyn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apolcyn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-25T22:15:17Z",
    "updated_at": "2016-08-25T22:15:17Z",
    "author_association": "CONTRIBUTOR",
    "body": "So this was noticed when running a gRPC server and calling rpcs's with messages from some other client? Wondering if this resulted in a crash or an out of memory error?\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/242650816",
    "html_url": "https://github.com/grpc/grpc/issues/7873#issuecomment-242650816",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/7873",
    "id": 242650816,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0MjY1MDgxNg==",
    "user": {
      "login": "amitwaisel",
      "id": 21170412,
      "node_id": "MDQ6VXNlcjIxMTcwNDEy",
      "avatar_url": "https://avatars2.githubusercontent.com/u/21170412?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/amitwaisel",
      "html_url": "https://github.com/amitwaisel",
      "followers_url": "https://api.github.com/users/amitwaisel/followers",
      "following_url": "https://api.github.com/users/amitwaisel/following{/other_user}",
      "gists_url": "https://api.github.com/users/amitwaisel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/amitwaisel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/amitwaisel/subscriptions",
      "organizations_url": "https://api.github.com/users/amitwaisel/orgs",
      "repos_url": "https://api.github.com/users/amitwaisel/repos",
      "events_url": "https://api.github.com/users/amitwaisel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/amitwaisel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-26T07:27:31Z",
    "updated_at": "2016-08-26T07:27:31Z",
    "author_association": "NONE",
    "body": "@apolcyn Indeed, the client is C++ and ran flawlessly. The C# server was running for a few hours and crashed with OutOfMemoryException.\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/242866744",
    "html_url": "https://github.com/grpc/grpc/issues/7873#issuecomment-242866744",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/7873",
    "id": 242866744,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0Mjg2Njc0NA==",
    "user": {
      "login": "apolcyn",
      "id": 9566254,
      "node_id": "MDQ6VXNlcjk1NjYyNTQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9566254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apolcyn",
      "html_url": "https://github.com/apolcyn",
      "followers_url": "https://api.github.com/users/apolcyn/followers",
      "following_url": "https://api.github.com/users/apolcyn/following{/other_user}",
      "gists_url": "https://api.github.com/users/apolcyn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apolcyn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apolcyn/subscriptions",
      "organizations_url": "https://api.github.com/users/apolcyn/orgs",
      "repos_url": "https://api.github.com/users/apolcyn/repos",
      "events_url": "https://api.github.com/users/apolcyn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apolcyn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-26T22:26:23Z",
    "updated_at": "2016-08-26T22:26:23Z",
    "author_association": "CONTRIBUTOR",
    "body": "Wondering what platform this on? Are these unary sync/async calls? Is this using protobuf messages?\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/242901081",
    "html_url": "https://github.com/grpc/grpc/issues/7873#issuecomment-242901081",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/7873",
    "id": 242901081,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0MjkwMTA4MQ==",
    "user": {
      "login": "amitwaisel",
      "id": 21170412,
      "node_id": "MDQ6VXNlcjIxMTcwNDEy",
      "avatar_url": "https://avatars2.githubusercontent.com/u/21170412?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/amitwaisel",
      "html_url": "https://github.com/amitwaisel",
      "followers_url": "https://api.github.com/users/amitwaisel/followers",
      "following_url": "https://api.github.com/users/amitwaisel/following{/other_user}",
      "gists_url": "https://api.github.com/users/amitwaisel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/amitwaisel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/amitwaisel/subscriptions",
      "organizations_url": "https://api.github.com/users/amitwaisel/orgs",
      "repos_url": "https://api.github.com/users/amitwaisel/repos",
      "events_url": "https://api.github.com/users/amitwaisel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/amitwaisel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-27T07:04:56Z",
    "updated_at": "2016-08-27T07:22:27Z",
    "author_association": "NONE",
    "body": "Everything runs on Windows (10 x64 to be precise, compiled for x86 platform).\nThe \"flooded\" RPC is a simple function (without streams) that is called thousands of times - and even shutting down the server doesn't free the majority of the native memory allocated (around 8MB is freed successfully)\nMy server's RPC function has the following signature:\npublic override async Task<MyResponse> RpcFunc(MyRequest request)\nThe function does nothing beside allocating MyResponse and return it from the function.\nDo you need any other diagnosis information?\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/242977142",
    "html_url": "https://github.com/grpc/grpc/issues/7873#issuecomment-242977142",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/7873",
    "id": 242977142,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0Mjk3NzE0Mg==",
    "user": {
      "login": "amitwaisel",
      "id": 21170412,
      "node_id": "MDQ6VXNlcjIxMTcwNDEy",
      "avatar_url": "https://avatars2.githubusercontent.com/u/21170412?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/amitwaisel",
      "html_url": "https://github.com/amitwaisel",
      "followers_url": "https://api.github.com/users/amitwaisel/followers",
      "following_url": "https://api.github.com/users/amitwaisel/following{/other_user}",
      "gists_url": "https://api.github.com/users/amitwaisel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/amitwaisel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/amitwaisel/subscriptions",
      "organizations_url": "https://api.github.com/users/amitwaisel/orgs",
      "repos_url": "https://api.github.com/users/amitwaisel/repos",
      "events_url": "https://api.github.com/users/amitwaisel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/amitwaisel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-28T14:14:54Z",
    "updated_at": "2016-08-28T14:14:54Z",
    "author_association": "NONE",
    "body": "After some debugging, I figured out that the majority of the leaked memory in the server is originated from using GZIP compression in the client.\nDisabling the GZIP on client side has reduced the server's memory usage significantly (the server code is not aware that the grpc messages are compressed)\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/243236300",
    "html_url": "https://github.com/grpc/grpc/issues/7873#issuecomment-243236300",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/7873",
    "id": 243236300,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0MzIzNjMwMA==",
    "user": {
      "login": "apolcyn",
      "id": 9566254,
      "node_id": "MDQ6VXNlcjk1NjYyNTQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9566254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apolcyn",
      "html_url": "https://github.com/apolcyn",
      "followers_url": "https://api.github.com/users/apolcyn/followers",
      "following_url": "https://api.github.com/users/apolcyn/following{/other_user}",
      "gists_url": "https://api.github.com/users/apolcyn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apolcyn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apolcyn/subscriptions",
      "organizations_url": "https://api.github.com/users/apolcyn/orgs",
      "repos_url": "https://api.github.com/users/apolcyn/repos",
      "events_url": "https://api.github.com/users/apolcyn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apolcyn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-29T19:56:09Z",
    "updated_at": "2016-08-29T19:56:09Z",
    "author_association": "CONTRIBUTOR",
    "body": "@amitwaisel sorry but I've had trouble reproducing the initial error. E.g., a simple test involving running a series of synchronous blocking unary calls against a local grpc server, with message sizes of 2KB, for a two hour time period (makes about 25,000,000 requests), doesn't seem to be having issues.\n\nAre these calls possibly being made simultaneously rather than sequentially? Are messages being stored somewhere by the app on the server side?\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/243700258",
    "html_url": "https://github.com/grpc/grpc/issues/7873#issuecomment-243700258",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/7873",
    "id": 243700258,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0MzcwMDI1OA==",
    "user": {
      "login": "amitwaisel",
      "id": 21170412,
      "node_id": "MDQ6VXNlcjIxMTcwNDEy",
      "avatar_url": "https://avatars2.githubusercontent.com/u/21170412?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/amitwaisel",
      "html_url": "https://github.com/amitwaisel",
      "followers_url": "https://api.github.com/users/amitwaisel/followers",
      "following_url": "https://api.github.com/users/amitwaisel/following{/other_user}",
      "gists_url": "https://api.github.com/users/amitwaisel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/amitwaisel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/amitwaisel/subscriptions",
      "organizations_url": "https://api.github.com/users/amitwaisel/orgs",
      "repos_url": "https://api.github.com/users/amitwaisel/repos",
      "events_url": "https://api.github.com/users/amitwaisel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/amitwaisel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-31T08:51:12Z",
    "updated_at": "2016-08-31T08:51:12Z",
    "author_association": "NONE",
    "body": "@apolcyn The leak occurs even when the server RPC callback ignores the incoming message, and just returns a small message containing a status code.\nIt happens only when compressing the traffic using GZIP or DEFLATE. Have you tried to compress the messages in your tests?\nThe traffic is also encrypted and authenticated using client/server certificates\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/243987308",
    "html_url": "https://github.com/grpc/grpc/issues/7873#issuecomment-243987308",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/7873",
    "id": 243987308,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0Mzk4NzMwOA==",
    "user": {
      "login": "apolcyn",
      "id": 9566254,
      "node_id": "MDQ6VXNlcjk1NjYyNTQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9566254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apolcyn",
      "html_url": "https://github.com/apolcyn",
      "followers_url": "https://api.github.com/users/apolcyn/followers",
      "following_url": "https://api.github.com/users/apolcyn/following{/other_user}",
      "gists_url": "https://api.github.com/users/apolcyn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apolcyn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apolcyn/subscriptions",
      "organizations_url": "https://api.github.com/users/apolcyn/orgs",
      "repos_url": "https://api.github.com/users/apolcyn/repos",
      "events_url": "https://api.github.com/users/apolcyn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apolcyn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-09-01T06:24:55Z",
    "updated_at": "2016-09-01T06:24:55Z",
    "author_association": "CONTRIBUTOR",
    "body": "ah I think I see. Currently, support for compression isn't even across all languages; it's actually not expected that the C++ client compression to C# server would work with the 1.0 versions, as C# doesn't have official support for compression AFAIK. cc @dgquintas @jtattermusch \n\nThis might be a documentation issue. Maybe an exception issue?\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/244026456",
    "html_url": "https://github.com/grpc/grpc/issues/7873#issuecomment-244026456",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/7873",
    "id": 244026456,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0NDAyNjQ1Ng==",
    "user": {
      "login": "dgquintas",
      "id": 120217,
      "node_id": "MDQ6VXNlcjEyMDIxNw==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/120217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dgquintas",
      "html_url": "https://github.com/dgquintas",
      "followers_url": "https://api.github.com/users/dgquintas/followers",
      "following_url": "https://api.github.com/users/dgquintas/following{/other_user}",
      "gists_url": "https://api.github.com/users/dgquintas/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dgquintas/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dgquintas/subscriptions",
      "organizations_url": "https://api.github.com/users/dgquintas/orgs",
      "repos_url": "https://api.github.com/users/dgquintas/repos",
      "events_url": "https://api.github.com/users/dgquintas/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dgquintas/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-09-01T09:30:13Z",
    "updated_at": "2016-09-01T09:30:13Z",
    "author_association": "NONE",
    "body": "We do run interop tests for compression with a C++ server and a C# client (see https://grpc-testing.appspot.com/job/gRPC_interop_GA/HTML_Report/) but not the converse. @jtattermusch may remember the reason. In any case, it'd be very interesting to figure out why the leak is happening. We don't see any leaks in the C core-only test or the C++ ones. Could this be restricted to the C# incoming path, in the treatment of compressed messages?\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/244263924",
    "html_url": "https://github.com/grpc/grpc/issues/7873#issuecomment-244263924",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/7873",
    "id": 244263924,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0NDI2MzkyNA==",
    "user": {
      "login": "apolcyn",
      "id": 9566254,
      "node_id": "MDQ6VXNlcjk1NjYyNTQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9566254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apolcyn",
      "html_url": "https://github.com/apolcyn",
      "followers_url": "https://api.github.com/users/apolcyn/followers",
      "following_url": "https://api.github.com/users/apolcyn/following{/other_user}",
      "gists_url": "https://api.github.com/users/apolcyn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apolcyn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apolcyn/subscriptions",
      "organizations_url": "https://api.github.com/users/apolcyn/orgs",
      "repos_url": "https://api.github.com/users/apolcyn/repos",
      "events_url": "https://api.github.com/users/apolcyn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apolcyn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-09-02T01:59:40Z",
    "updated_at": "2016-09-02T01:59:40Z",
    "author_association": "CONTRIBUTOR",
    "body": "reproduced this with a lot of large sync calls (started to bog down and crash after running ~50k 1MB compressed messages) from cpp client to c# server.\n\nrepro went away after #7963\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/244441248",
    "html_url": "https://github.com/grpc/grpc/issues/7873#issuecomment-244441248",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/7873",
    "id": 244441248,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0NDQ0MTI0OA==",
    "user": {
      "login": "apolcyn",
      "id": 9566254,
      "node_id": "MDQ6VXNlcjk1NjYyNTQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9566254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apolcyn",
      "html_url": "https://github.com/apolcyn",
      "followers_url": "https://api.github.com/users/apolcyn/followers",
      "following_url": "https://api.github.com/users/apolcyn/following{/other_user}",
      "gists_url": "https://api.github.com/users/apolcyn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apolcyn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apolcyn/subscriptions",
      "organizations_url": "https://api.github.com/users/apolcyn/orgs",
      "repos_url": "https://api.github.com/users/apolcyn/repos",
      "events_url": "https://api.github.com/users/apolcyn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apolcyn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-09-02T17:41:47Z",
    "updated_at": "2016-09-02T17:41:47Z",
    "author_association": "CONTRIBUTOR",
    "body": "@amitwaisel thanks for bringing this up and looking into this. It should be fixed in #7963 and included in the next release at 1.0.1, (or 1.0.1-pre1) \n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/256669555",
    "html_url": "https://github.com/grpc/grpc/issues/7873#issuecomment-256669555",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/7873",
    "id": 256669555,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1NjY2OTU1NQ==",
    "user": {
      "login": "amitwaisel",
      "id": 21170412,
      "node_id": "MDQ6VXNlcjIxMTcwNDEy",
      "avatar_url": "https://avatars2.githubusercontent.com/u/21170412?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/amitwaisel",
      "html_url": "https://github.com/amitwaisel",
      "followers_url": "https://api.github.com/users/amitwaisel/followers",
      "following_url": "https://api.github.com/users/amitwaisel/following{/other_user}",
      "gists_url": "https://api.github.com/users/amitwaisel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/amitwaisel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/amitwaisel/subscriptions",
      "organizations_url": "https://api.github.com/users/amitwaisel/orgs",
      "repos_url": "https://api.github.com/users/amitwaisel/repos",
      "events_url": "https://api.github.com/users/amitwaisel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/amitwaisel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-10-27T15:09:28Z",
    "updated_at": "2016-10-27T15:09:28Z",
    "author_association": "NONE",
    "body": "@apolcyn Is there any ETA for the fix release? And for 1.0.1 release?\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/256899798",
    "html_url": "https://github.com/grpc/grpc/issues/7873#issuecomment-256899798",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/7873",
    "id": 256899798,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1Njg5OTc5OA==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-10-28T11:41:50Z",
    "updated_at": "2016-10-28T11:41:50Z",
    "author_association": "CONTRIBUTOR",
    "body": "I believe the fix has already been released as part of 1.0.1-pre1 nuget.\nThe 1.0.1 release should be out during the next week.\n"
  }
]
