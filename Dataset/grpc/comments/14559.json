[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/372755268",
    "html_url": "https://github.com/grpc/grpc/issues/14559#issuecomment-372755268",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14559",
    "id": 372755268,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3Mjc1NTI2OA==",
    "user": {
      "login": "nathanielmanistaatgoogle",
      "id": 10131044,
      "node_id": "MDQ6VXNlcjEwMTMxMDQ0",
      "avatar_url": "https://avatars0.githubusercontent.com/u/10131044?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nathanielmanistaatgoogle",
      "html_url": "https://github.com/nathanielmanistaatgoogle",
      "followers_url": "https://api.github.com/users/nathanielmanistaatgoogle/followers",
      "following_url": "https://api.github.com/users/nathanielmanistaatgoogle/following{/other_user}",
      "gists_url": "https://api.github.com/users/nathanielmanistaatgoogle/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nathanielmanistaatgoogle/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nathanielmanistaatgoogle/subscriptions",
      "organizations_url": "https://api.github.com/users/nathanielmanistaatgoogle/orgs",
      "repos_url": "https://api.github.com/users/nathanielmanistaatgoogle/repos",
      "events_url": "https://api.github.com/users/nathanielmanistaatgoogle/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nathanielmanistaatgoogle/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-13T17:43:20Z",
    "updated_at": "2018-03-13T17:43:20Z",
    "author_association": "MEMBER",
    "body": "There's a chance that work going on in [issue 12531](https://github.com/grpc/grpc/issues/12531) will alleviate this, but there's also a chance that the problem might be unrelated.\r\n\r\nAre you quite certain that you're not able to draft a minimal code sample? I'm slightly concerned about the pickling, but that might also be completely unrelated."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/373267913",
    "html_url": "https://github.com/grpc/grpc/issues/14559#issuecomment-373267913",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14559",
    "id": 373267913,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MzI2NzkxMw==",
    "user": {
      "login": "initialed85",
      "id": 5491690,
      "node_id": "MDQ6VXNlcjU0OTE2OTA=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/5491690?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/initialed85",
      "html_url": "https://github.com/initialed85",
      "followers_url": "https://api.github.com/users/initialed85/followers",
      "following_url": "https://api.github.com/users/initialed85/following{/other_user}",
      "gists_url": "https://api.github.com/users/initialed85/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/initialed85/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/initialed85/subscriptions",
      "organizations_url": "https://api.github.com/users/initialed85/orgs",
      "repos_url": "https://api.github.com/users/initialed85/repos",
      "events_url": "https://api.github.com/users/initialed85/events{/privacy}",
      "received_events_url": "https://api.github.com/users/initialed85/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-15T05:47:19Z",
    "updated_at": "2018-03-15T05:51:33Z",
    "author_association": "NONE",
    "body": "@nathanielmanistaatgoogle I've created a gist (link below) that shows the interactions with gRPC (cut and paste from our codebase).\r\n\r\nhttps://gist.github.com/initialed85/3e367e2aaa99a295430955990adbc6e9\r\n\r\nI apologise for the calls out to some of our internal libraries, but hopefully this will give you an idea of how it's implemented.\r\n\r\nSome of the exceptions in common.py won't make sense (it's mainly included for the dumps/loads methods at the bottom, this is where the pickling occurs)- there's a whole broker system that we've designed that sits on top of it all that also uses gRPC to communicate (we used to use AMQP for this purpose so we tried to keep the API as similar as possible for the stuff that makes use of it).\r\n\r\nI understand that our CollapsingThreadPoolExecutor may come under fire as it's right at the core of all the server work- I can confirm we were seeing this issue with the normal ThreadPoolExecutor before we built that piece (it's only a few days old)."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/374385285",
    "html_url": "https://github.com/grpc/grpc/issues/14559#issuecomment-374385285",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14559",
    "id": 374385285,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3NDM4NTI4NQ==",
    "user": {
      "login": "srini100",
      "id": 35056280,
      "node_id": "MDQ6VXNlcjM1MDU2Mjgw",
      "avatar_url": "https://avatars2.githubusercontent.com/u/35056280?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/srini100",
      "html_url": "https://github.com/srini100",
      "followers_url": "https://api.github.com/users/srini100/followers",
      "following_url": "https://api.github.com/users/srini100/following{/other_user}",
      "gists_url": "https://api.github.com/users/srini100/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/srini100/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/srini100/subscriptions",
      "organizations_url": "https://api.github.com/users/srini100/orgs",
      "repos_url": "https://api.github.com/users/srini100/repos",
      "events_url": "https://api.github.com/users/srini100/events{/privacy}",
      "received_events_url": "https://api.github.com/users/srini100/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-19T21:28:50Z",
    "updated_at": "2018-03-19T21:28:50Z",
    "author_association": "CONTRIBUTOR",
    "body": "@initialed85 , while @nathanielmanistaatgoogle  is out of office for next two weeks, please verify if your issue is related to #14523 .  Either you can downgrade to 1.8.4 or set env variable GRPC_POLL_STRATEGY=poll. Please confirm if this make any difference."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/374464276",
    "html_url": "https://github.com/grpc/grpc/issues/14559#issuecomment-374464276",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14559",
    "id": 374464276,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3NDQ2NDI3Ng==",
    "user": {
      "login": "initialed85",
      "id": 5491690,
      "node_id": "MDQ6VXNlcjU0OTE2OTA=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/5491690?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/initialed85",
      "html_url": "https://github.com/initialed85",
      "followers_url": "https://api.github.com/users/initialed85/followers",
      "following_url": "https://api.github.com/users/initialed85/following{/other_user}",
      "gists_url": "https://api.github.com/users/initialed85/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/initialed85/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/initialed85/subscriptions",
      "organizations_url": "https://api.github.com/users/initialed85/orgs",
      "repos_url": "https://api.github.com/users/initialed85/repos",
      "events_url": "https://api.github.com/users/initialed85/events{/privacy}",
      "received_events_url": "https://api.github.com/users/initialed85/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-20T03:48:33Z",
    "updated_at": "2018-03-20T03:48:33Z",
    "author_association": "NONE",
    "body": "@srini100 thanks for the follow-up; we're not seeing \"can't start new thread\" exceptions anywhere in our logs or stdout/stderr, so I'm not sure if it's related to that one.\r\n\r\nI'll change our environment to include GRPC_POLL_STRATEGY=poll and report back, cheers."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/374500736",
    "html_url": "https://github.com/grpc/grpc/issues/14559#issuecomment-374500736",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14559",
    "id": 374500736,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3NDUwMDczNg==",
    "user": {
      "login": "initialed85",
      "id": 5491690,
      "node_id": "MDQ6VXNlcjU0OTE2OTA=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/5491690?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/initialed85",
      "html_url": "https://github.com/initialed85",
      "followers_url": "https://api.github.com/users/initialed85/followers",
      "following_url": "https://api.github.com/users/initialed85/following{/other_user}",
      "gists_url": "https://api.github.com/users/initialed85/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/initialed85/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/initialed85/subscriptions",
      "organizations_url": "https://api.github.com/users/initialed85/orgs",
      "repos_url": "https://api.github.com/users/initialed85/repos",
      "events_url": "https://api.github.com/users/initialed85/events{/privacy}",
      "received_events_url": "https://api.github.com/users/initialed85/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-20T07:27:57Z",
    "updated_at": "2018-03-20T07:29:06Z",
    "author_association": "NONE",
    "body": "@srini100 just reporting back- I can confirm that with grpc-io==1.10 and the GRPC_POLL_STRATEGY=poll environment variable we're still seeing the segfaults in the Docker host's /var/syslog.\r\n\r\n    saetech@saetech-dev-other:~$ docker exec -it ims_backend /bin/bash\r\n    root@saetech-dev-other:/srv/wireless-manager-back-end# env | grep GRPC\r\n    GRPC_POLL_STRATEGY=poll\r\n    root@saetech-dev-other:/srv/wireless-manager-back-end# exit\r\n    exit\r\n    saetech@saetech-dev-other:~$ sudo tail /var/log/syslog | grep grpc\r\n    Mar 20 15:18:51 saetech-dev-other kernel: [2493820.031257] grpc_global_tim[26473]: segfault at 7f5d77763f20 ip 00007f5d798781df sp 00007f5d33ffec60 error 4 in cygrpc.pypy-41.so[7f5d79803000+275000]\r\n    Mar 20 15:20:26 saetech-dev-other kernel: [2493915.297268] grpc_global_tim[29588]: segfault at 7f5d77763f20 ip 00007f5d798781df sp 00007f5d33ffec60 error 4 in cygrpc.pypy-41.so[7f5d79803000+275000]\r\n    Mar 20 15:22:58 saetech-dev-other kernel: [2494067.224940] grpc_global_tim[2487]: segfault at 7f6d0b2ed0a0 ip 00007f6d0d408f7f sp 00007f6cd27fbc90 error 4 in cygrpc.pypy-41.so[7f6d0d38d000+275000]\r\n    Mar 20 15:26:13 saetech-dev-other kernel: [2494261.852902] grpc_global_tim[8763]: segfault at 7f6d0b2ed0a0 ip 00007f6d0d408f7f sp 00007f6cd27fbc90 error 4 in cygrpc.pypy-41.so[7f6d0d38d000+275000]\r\n    saetech@saetech-dev-other:~$"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/375048724",
    "html_url": "https://github.com/grpc/grpc/issues/14559#issuecomment-375048724",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14559",
    "id": 375048724,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3NTA0ODcyNA==",
    "user": {
      "login": "srini100",
      "id": 35056280,
      "node_id": "MDQ6VXNlcjM1MDU2Mjgw",
      "avatar_url": "https://avatars2.githubusercontent.com/u/35056280?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/srini100",
      "html_url": "https://github.com/srini100",
      "followers_url": "https://api.github.com/users/srini100/followers",
      "following_url": "https://api.github.com/users/srini100/following{/other_user}",
      "gists_url": "https://api.github.com/users/srini100/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/srini100/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/srini100/subscriptions",
      "organizations_url": "https://api.github.com/users/srini100/orgs",
      "repos_url": "https://api.github.com/users/srini100/repos",
      "events_url": "https://api.github.com/users/srini100/events{/privacy}",
      "received_events_url": "https://api.github.com/users/srini100/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-21T18:26:41Z",
    "updated_at": "2018-03-21T18:26:41Z",
    "author_association": "CONTRIBUTOR",
    "body": "@initialed85 I don't have any other ideas to try. Are you able to get crash stack with symbols?  BTW, Pypy is not supported so it will be hard to spend time on this. "
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/375118413",
    "html_url": "https://github.com/grpc/grpc/issues/14559#issuecomment-375118413",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14559",
    "id": 375118413,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3NTExODQxMw==",
    "user": {
      "login": "initialed85",
      "id": 5491690,
      "node_id": "MDQ6VXNlcjU0OTE2OTA=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/5491690?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/initialed85",
      "html_url": "https://github.com/initialed85",
      "followers_url": "https://api.github.com/users/initialed85/followers",
      "following_url": "https://api.github.com/users/initialed85/following{/other_user}",
      "gists_url": "https://api.github.com/users/initialed85/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/initialed85/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/initialed85/subscriptions",
      "organizations_url": "https://api.github.com/users/initialed85/orgs",
      "repos_url": "https://api.github.com/users/initialed85/repos",
      "events_url": "https://api.github.com/users/initialed85/events{/privacy}",
      "received_events_url": "https://api.github.com/users/initialed85/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-21T22:36:00Z",
    "updated_at": "2018-03-21T22:36:00Z",
    "author_association": "NONE",
    "body": "@srini100 It's all good, thanks for looking into things for us- completely understand that PyPy isn't supported; I'm happy for you guys to close this issue.\r\n\r\nI'll see if I can get a core dump or something, but nothing actually fails in our system and none of the PIDs match any of the PIDs of our processes (which bore the speculation that maybe it was a TID for a GRPC server instance's thread pool)."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/375135107",
    "html_url": "https://github.com/grpc/grpc/issues/14559#issuecomment-375135107",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14559",
    "id": 375135107,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3NTEzNTEwNw==",
    "user": {
      "login": "srini100",
      "id": 35056280,
      "node_id": "MDQ6VXNlcjM1MDU2Mjgw",
      "avatar_url": "https://avatars2.githubusercontent.com/u/35056280?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/srini100",
      "html_url": "https://github.com/srini100",
      "followers_url": "https://api.github.com/users/srini100/followers",
      "following_url": "https://api.github.com/users/srini100/following{/other_user}",
      "gists_url": "https://api.github.com/users/srini100/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/srini100/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/srini100/subscriptions",
      "organizations_url": "https://api.github.com/users/srini100/orgs",
      "repos_url": "https://api.github.com/users/srini100/repos",
      "events_url": "https://api.github.com/users/srini100/events{/privacy}",
      "received_events_url": "https://api.github.com/users/srini100/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-22T00:02:12Z",
    "updated_at": "2018-03-22T00:02:12Z",
    "author_association": "CONTRIBUTOR",
    "body": "@initialed85 I am closing this. Keep an eye on #12531 and try it out when it is fixed. grpc_global_tim[xx] does look like timer thread in GRPC C-core implementation (grpc_global_timer). Without symbols for ip/sp addresses we can't see where it crashed."
  }
]
