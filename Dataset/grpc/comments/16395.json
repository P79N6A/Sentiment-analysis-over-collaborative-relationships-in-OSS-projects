[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/416258039",
    "html_url": "https://github.com/grpc/grpc/pull/16395#issuecomment-416258039",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/16395",
    "id": 416258039,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxNjI1ODAzOQ==",
    "user": {
      "login": "markdroth",
      "id": 18664614,
      "node_id": "MDQ6VXNlcjE4NjY0NjE0",
      "avatar_url": "https://avatars2.githubusercontent.com/u/18664614?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/markdroth",
      "html_url": "https://github.com/markdroth",
      "followers_url": "https://api.github.com/users/markdroth/followers",
      "following_url": "https://api.github.com/users/markdroth/following{/other_user}",
      "gists_url": "https://api.github.com/users/markdroth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/markdroth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/markdroth/subscriptions",
      "organizations_url": "https://api.github.com/users/markdroth/orgs",
      "repos_url": "https://api.github.com/users/markdroth/repos",
      "events_url": "https://api.github.com/users/markdroth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/markdroth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-27T15:06:02Z",
    "updated_at": "2018-08-27T15:06:02Z",
    "author_association": "MEMBER",
    "body": "I haven't yet had a chance to look at this code, but I do have a few high-level comments.\r\n\r\nFirst, it turns out that we actually have a policy of requiring a gRFC for core API changes:\r\n\r\nhttps://github.com/grpc/proposal/blob/master/P3-grfcs-for-core-api-changes.md\r\n\r\nI wasn't aware of this until recently, or I would have pointed it out before you made the original verify_peer API change.  So we should probably go ahead and put together a gRFC here, not just for the change in this PR but also for the verify_peer API as a whole (i.e., including both this change and the original one).\r\n\r\nSecond, please sync with @yihuazhang, who is currently working on a design for SPIFFE credentials that introduces a couple of cancellable application call-outs similar to this one.  I believe he is proposing to introduce some helper code to handle the semantics of the application call-out use case correctly, and we should try to reuse that code here.\r\n\r\nThird, responding to this comment:\r\n\r\n> @markdroth did mention that we should aim to properly support cancellation from the get-go, but it wasn't really clear to me what this should look like here (there doesn't look to be any code here that anticipates needing to cancel the `ssl_channel_check_peer` call).\r\n\r\nI suspect this is another case similar to the metadata plugin credentials where we simply failed to think about the need for cancellation when we originally designed the APIs.  The `check_peer` call should in principle be cancelled whenever the security handshaker shuts down.  As part of this PR, we should fix the security handshaker to cancel the call when the handshaker is shut down."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/416313056",
    "html_url": "https://github.com/grpc/grpc/pull/16395#issuecomment-416313056",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/16395",
    "id": 416313056,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxNjMxMzA1Ng==",
    "user": {
      "login": "yihuazhang",
      "id": 26934891,
      "node_id": "MDQ6VXNlcjI2OTM0ODkx",
      "avatar_url": "https://avatars2.githubusercontent.com/u/26934891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yihuazhang",
      "html_url": "https://github.com/yihuazhang",
      "followers_url": "https://api.github.com/users/yihuazhang/followers",
      "following_url": "https://api.github.com/users/yihuazhang/following{/other_user}",
      "gists_url": "https://api.github.com/users/yihuazhang/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yihuazhang/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yihuazhang/subscriptions",
      "organizations_url": "https://api.github.com/users/yihuazhang/orgs",
      "repos_url": "https://api.github.com/users/yihuazhang/repos",
      "events_url": "https://api.github.com/users/yihuazhang/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yihuazhang/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-27T17:59:07Z",
    "updated_at": "2018-08-27T17:59:07Z",
    "author_association": "CONTRIBUTOR",
    "body": "I am currently working on the design of supporting SPIFFE in gRPC auth stack which contains a general mechanism to support application call-out use case, and I think it will be ready for gRFC review by the end of this week. \r\n\r\nDoes your use case require HTTPS or SPIFFE-based SSL implementation? if it is SPIFFE-based, my current SPIFFE design may also be useful in your use case.  "
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/416460835",
    "html_url": "https://github.com/grpc/grpc/pull/16395#issuecomment-416460835",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/16395",
    "id": 416460835,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxNjQ2MDgzNQ==",
    "user": {
      "login": "JackOfMostTrades",
      "id": 1009310,
      "node_id": "MDQ6VXNlcjEwMDkzMTA=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/1009310?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JackOfMostTrades",
      "html_url": "https://github.com/JackOfMostTrades",
      "followers_url": "https://api.github.com/users/JackOfMostTrades/followers",
      "following_url": "https://api.github.com/users/JackOfMostTrades/following{/other_user}",
      "gists_url": "https://api.github.com/users/JackOfMostTrades/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JackOfMostTrades/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JackOfMostTrades/subscriptions",
      "organizations_url": "https://api.github.com/users/JackOfMostTrades/orgs",
      "repos_url": "https://api.github.com/users/JackOfMostTrades/repos",
      "events_url": "https://api.github.com/users/JackOfMostTrades/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JackOfMostTrades/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-28T05:58:09Z",
    "updated_at": "2018-08-28T05:58:09Z",
    "author_association": "CONTRIBUTOR",
    "body": "@yihuazhang Our use-case is similar to SPIFFE but predates it just slightly and is a bit different in the details (similarly we have a non-DNS notion of identity we want to verify, but ours is based on a set of custom X509 extensions rather than a URI SAN). But I suspect that some of what you're putting together could be used for this general verification callback. I don't think I'll be able to do more work on this PR this week anyway, so I'll check out what you're putting together for SPIFFE once you have it ready."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/417041676",
    "html_url": "https://github.com/grpc/grpc/pull/16395#issuecomment-417041676",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/16395",
    "id": 417041676,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxNzA0MTY3Ng==",
    "user": {
      "login": "jiangtaoli2016",
      "id": 19913700,
      "node_id": "MDQ6VXNlcjE5OTEzNzAw",
      "avatar_url": "https://avatars2.githubusercontent.com/u/19913700?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jiangtaoli2016",
      "html_url": "https://github.com/jiangtaoli2016",
      "followers_url": "https://api.github.com/users/jiangtaoli2016/followers",
      "following_url": "https://api.github.com/users/jiangtaoli2016/following{/other_user}",
      "gists_url": "https://api.github.com/users/jiangtaoli2016/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jiangtaoli2016/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jiangtaoli2016/subscriptions",
      "organizations_url": "https://api.github.com/users/jiangtaoli2016/orgs",
      "repos_url": "https://api.github.com/users/jiangtaoli2016/repos",
      "events_url": "https://api.github.com/users/jiangtaoli2016/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jiangtaoli2016/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-29T17:41:56Z",
    "updated_at": "2018-08-29T17:41:56Z",
    "author_association": "CONTRIBUTOR",
    "body": "@JackOfMostTrades If I understand correctly, your use case is workload-to-workload mTLS authentication. We are going to refactor grpc SSL credentials into two types: https SSL credentials and SPIFFE credentials (not strictly SPIFFE, but should also support your use case and similar other mTLS use cases). @yihuazhang is driving that effort. More details coming soon."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/417160371",
    "html_url": "https://github.com/grpc/grpc/pull/16395#issuecomment-417160371",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/16395",
    "id": 417160371,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxNzE2MDM3MQ==",
    "user": {
      "login": "JackOfMostTrades",
      "id": 1009310,
      "node_id": "MDQ6VXNlcjEwMDkzMTA=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/1009310?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JackOfMostTrades",
      "html_url": "https://github.com/JackOfMostTrades",
      "followers_url": "https://api.github.com/users/JackOfMostTrades/followers",
      "following_url": "https://api.github.com/users/JackOfMostTrades/following{/other_user}",
      "gists_url": "https://api.github.com/users/JackOfMostTrades/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JackOfMostTrades/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JackOfMostTrades/subscriptions",
      "organizations_url": "https://api.github.com/users/JackOfMostTrades/orgs",
      "repos_url": "https://api.github.com/users/JackOfMostTrades/repos",
      "events_url": "https://api.github.com/users/JackOfMostTrades/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JackOfMostTrades/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-30T01:32:46Z",
    "updated_at": "2018-08-30T01:33:03Z",
    "author_association": "CONTRIBUTOR",
    "body": "> If I understand correctly, your use case is workload-to-workload mTLS authentication.\r\n\r\nYes, that's exactly correct.\r\n\r\n> not strictly SPIFFE, but should also support your use case and similar other mTLS use cases\r\n\r\nThat sounds great! I'll stay tuned!"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/419151285",
    "html_url": "https://github.com/grpc/grpc/pull/16395#issuecomment-419151285",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/16395",
    "id": 419151285,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxOTE1MTI4NQ==",
    "user": {
      "login": "yihuazhang",
      "id": 26934891,
      "node_id": "MDQ6VXNlcjI2OTM0ODkx",
      "avatar_url": "https://avatars2.githubusercontent.com/u/26934891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yihuazhang",
      "html_url": "https://github.com/yihuazhang",
      "followers_url": "https://api.github.com/users/yihuazhang/followers",
      "following_url": "https://api.github.com/users/yihuazhang/following{/other_user}",
      "gists_url": "https://api.github.com/users/yihuazhang/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yihuazhang/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yihuazhang/subscriptions",
      "organizations_url": "https://api.github.com/users/yihuazhang/orgs",
      "repos_url": "https://api.github.com/users/yihuazhang/repos",
      "events_url": "https://api.github.com/users/yihuazhang/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yihuazhang/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-09-06T16:07:39Z",
    "updated_at": "2018-09-06T16:07:39Z",
    "author_association": "CONTRIBUTOR",
    "body": "@JackOfMostTrades \r\n\r\nI drafted a gRFC (https://github.com/grpc/proposal/pull/98) that has all the details we discussed before. Could you please take a look (i.e., server_authorization_check) and see if the API is implementable to meet your needs? "
  }
]
