[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/391435399",
    "html_url": "https://github.com/grpc/grpc/issues/15522#issuecomment-391435399",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15522",
    "id": 391435399,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MTQzNTM5OQ==",
    "user": {
      "login": "ZhouyihaiDing",
      "id": 28968539,
      "node_id": "MDQ6VXNlcjI4OTY4NTM5",
      "avatar_url": "https://avatars3.githubusercontent.com/u/28968539?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ZhouyihaiDing",
      "html_url": "https://github.com/ZhouyihaiDing",
      "followers_url": "https://api.github.com/users/ZhouyihaiDing/followers",
      "following_url": "https://api.github.com/users/ZhouyihaiDing/following{/other_user}",
      "gists_url": "https://api.github.com/users/ZhouyihaiDing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ZhouyihaiDing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ZhouyihaiDing/subscriptions",
      "organizations_url": "https://api.github.com/users/ZhouyihaiDing/orgs",
      "repos_url": "https://api.github.com/users/ZhouyihaiDing/repos",
      "events_url": "https://api.github.com/users/ZhouyihaiDing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ZhouyihaiDing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-23T17:38:30Z",
    "updated_at": "2018-05-23T17:47:08Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hi.\r\nI see you install grpc by pecl. That is the release version, which is `1.12.0`\r\n```\r\nbash-4.3# php -d extension=grpc.so --re grpc | head -1\r\nExtension [ <persistent> extension #34 grpc version 1.12.0 ] {\r\nbash-4.3# ./run_greeter_client.sh \r\nHello world\r\n```\r\n\r\nI also [build grpc php from source](https://github.com/grpc/grpc/tree/master/src/php#build-from-source), and it runs well.\r\n```\r\nbash-4.3# php -d extension=grpc.so --re grpc | head -1\r\nExtension [ <persistent> extension #34 grpc version 1.13.0dev ] {\r\nbash-4.3# ./run_greeter_client.sh \r\nHello world\r\n```\r\n\r\nIs it possible you run go server and client outside of the docker container, and run php client inside the docker container, but forget to export the port? You can try run a cpp client to see if that fails:\r\n```\r\ncd example/cpp/helloworld\r\nmake\r\n./greeter_client\r\n```\r\n\r\nI didn't see the failure. I run both golang and php inside the container. All steps are recorded in the [gist](https://gist.github.com/ZhouyihaiDing/867d39384eac96f3f50cc941f1f42bb5) if you are interested.\r\n\r\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/391527630",
    "html_url": "https://github.com/grpc/grpc/issues/15522#issuecomment-391527630",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15522",
    "id": 391527630,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MTUyNzYzMA==",
    "user": {
      "login": "gertcuykens",
      "id": 863731,
      "node_id": "MDQ6VXNlcjg2MzczMQ==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/863731?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gertcuykens",
      "html_url": "https://github.com/gertcuykens",
      "followers_url": "https://api.github.com/users/gertcuykens/followers",
      "following_url": "https://api.github.com/users/gertcuykens/following{/other_user}",
      "gists_url": "https://api.github.com/users/gertcuykens/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gertcuykens/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gertcuykens/subscriptions",
      "organizations_url": "https://api.github.com/users/gertcuykens/orgs",
      "repos_url": "https://api.github.com/users/gertcuykens/repos",
      "events_url": "https://api.github.com/users/gertcuykens/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gertcuykens/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-23T23:03:33Z",
    "updated_at": "2018-05-23T23:44:39Z",
    "author_association": "NONE",
    "body": "Thank you for your reply because I was stuck :) My Makefile looks something like this, so i assume my ports are ok and published, I also test my grpc service with grpcurl to make sure it's available. Can you try outside the docker container please?\r\n\r\nPS Doh! now I realise I was only compiling the grpc_php_plugin XD\r\n \r\n```\r\nbuild: TAG=php\r\nbuild:\r\n\tdocker build -t grpc-test:$(TAG) .\r\n\r\nrun1: CMD=php /usr/local/bin/composer.phar install\r\nrun1: TAG=php\r\nrun1:\r\n\tdocker run --rm -it -v $(PWD):/root grpc-test:$(TAG) $(CMD)\r\n\r\nrun2: CMD=protoc -I . grpc.proto --php_out=. --grpc_out=. --plugin=protoc-gen-grpc=/usr/local/bin/grpc_php_plugin\r\nrun2: TAG=php\r\nrun2:\r\n\tdocker run --rm -it -v $(PWD):/root grpc-test:$(TAG) $(CMD)\r\n\r\nrun3: TAG=latest\r\nrun3:\r\n\tdocker run --rm -it -p 8080:8080 grpc-test:$(TAG)\r\n\r\nrun4: CMD=php -S 0.0.0.0:8081\r\nrun4: TAG=php\r\nrun4:\r\n\tdocker run --rm -it -v $(PWD):/root -p 8081:8081 grpc-test:$(TAG) $(CMD)\t\r\n\r\ntest:\r\n\tgrpcurl -plaintext localhost:8080 list\r\n```\r\nWhat I do is I run 2 docker containers, one the php client the other the go grpc server. I open my browser and go to the php server 0.0.0.0:8081 that runs the test.php client script that tries to connect to 8080 which i know is working by testing it with grpcurl"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/391541416",
    "html_url": "https://github.com/grpc/grpc/issues/15522#issuecomment-391541416",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15522",
    "id": 391541416,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MTU0MTQxNg==",
    "user": {
      "login": "ZhouyihaiDing",
      "id": 28968539,
      "node_id": "MDQ6VXNlcjI4OTY4NTM5",
      "avatar_url": "https://avatars3.githubusercontent.com/u/28968539?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ZhouyihaiDing",
      "html_url": "https://github.com/ZhouyihaiDing",
      "followers_url": "https://api.github.com/users/ZhouyihaiDing/followers",
      "following_url": "https://api.github.com/users/ZhouyihaiDing/following{/other_user}",
      "gists_url": "https://api.github.com/users/ZhouyihaiDing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ZhouyihaiDing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ZhouyihaiDing/subscriptions",
      "organizations_url": "https://api.github.com/users/ZhouyihaiDing/orgs",
      "repos_url": "https://api.github.com/users/ZhouyihaiDing/repos",
      "events_url": "https://api.github.com/users/ZhouyihaiDing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ZhouyihaiDing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-24T00:01:50Z",
    "updated_at": "2018-05-24T00:08:53Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thanks! I will try to see if I can reproduce it. The server port is 8080, and by golang client, you run it in the same container as PHP, right?"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/391543002",
    "html_url": "https://github.com/grpc/grpc/issues/15522#issuecomment-391543002",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15522",
    "id": 391543002,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MTU0MzAwMg==",
    "user": {
      "login": "gertcuykens",
      "id": 863731,
      "node_id": "MDQ6VXNlcjg2MzczMQ==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/863731?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gertcuykens",
      "html_url": "https://github.com/gertcuykens",
      "followers_url": "https://api.github.com/users/gertcuykens/followers",
      "following_url": "https://api.github.com/users/gertcuykens/following{/other_user}",
      "gists_url": "https://api.github.com/users/gertcuykens/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gertcuykens/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gertcuykens/subscriptions",
      "organizations_url": "https://api.github.com/users/gertcuykens/orgs",
      "repos_url": "https://api.github.com/users/gertcuykens/repos",
      "events_url": "https://api.github.com/users/gertcuykens/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gertcuykens/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-24T00:10:55Z",
    "updated_at": "2018-05-24T00:20:00Z",
    "author_association": "NONE",
    "body": "Once the server and the client each run in their own container and can communicate with each other by publishing their port, you can be certain that does containers can be used in let say kubernetes. But right now for me on the php client container publishing a port is not enough? "
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/391548306",
    "html_url": "https://github.com/grpc/grpc/issues/15522#issuecomment-391548306",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15522",
    "id": 391548306,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MTU0ODMwNg==",
    "user": {
      "login": "ZhouyihaiDing",
      "id": 28968539,
      "node_id": "MDQ6VXNlcjI4OTY4NTM5",
      "avatar_url": "https://avatars3.githubusercontent.com/u/28968539?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ZhouyihaiDing",
      "html_url": "https://github.com/ZhouyihaiDing",
      "followers_url": "https://api.github.com/users/ZhouyihaiDing/followers",
      "following_url": "https://api.github.com/users/ZhouyihaiDing/following{/other_user}",
      "gists_url": "https://api.github.com/users/ZhouyihaiDing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ZhouyihaiDing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ZhouyihaiDing/subscriptions",
      "organizations_url": "https://api.github.com/users/ZhouyihaiDing/orgs",
      "repos_url": "https://api.github.com/users/ZhouyihaiDing/repos",
      "events_url": "https://api.github.com/users/ZhouyihaiDing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ZhouyihaiDing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-24T00:43:24Z",
    "updated_at": "2018-05-24T00:48:18Z",
    "author_association": "CONTRIBUTOR",
    "body": "It sounds like the port issue to me. I am not familiar with docker. For the container with tag `PHP`, should you also publish the port `8080`? Can request from this container send out through `8080`?\r\n\r\nContainer with the tag `latest` is the server, right? Can you please go into the container `PHP` and run `grpcurl` to check whether it can reach the server? Some command like:\r\n`docker run --rm -it -v $(PWD):/root -p 8081:8081 grpc-test:$(TAG) grpcurl -plaintext localhost:8080 list`\r\n\r\nI haven't tried 2 containers yet. But within the same container, PHP client and golang server works fine, as well as the php with server mode:\r\n`$ php -d extension=grpc.so -S 0.0.0.0:8081`\r\n```\r\nbash-4.3# curl 0.0.0.0:8081/greeter_client.php\r\nHello world\r\n```\r\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/391551763",
    "html_url": "https://github.com/grpc/grpc/issues/15522#issuecomment-391551763",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15522",
    "id": 391551763,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MTU1MTc2Mw==",
    "user": {
      "login": "gertcuykens",
      "id": 863731,
      "node_id": "MDQ6VXNlcjg2MzczMQ==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/863731?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gertcuykens",
      "html_url": "https://github.com/gertcuykens",
      "followers_url": "https://api.github.com/users/gertcuykens/followers",
      "following_url": "https://api.github.com/users/gertcuykens/following{/other_user}",
      "gists_url": "https://api.github.com/users/gertcuykens/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gertcuykens/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gertcuykens/subscriptions",
      "organizations_url": "https://api.github.com/users/gertcuykens/orgs",
      "repos_url": "https://api.github.com/users/gertcuykens/repos",
      "events_url": "https://api.github.com/users/gertcuykens/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gertcuykens/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-24T00:52:34Z",
    "updated_at": "2018-05-24T01:09:58Z",
    "author_association": "NONE",
    "body": "Normally not, else you wouldn't be able to do for example get request from inside your app or container for example curl https://google.com\r\n\r\n```\r\nbash-4.3# curl google.com\r\n<HTML><HEAD><meta http-equiv=\"content-type\" content=\"text/html;charset=utf-8\">\r\n<TITLE>301 Moved</TITLE></HEAD><BODY>\r\n<H1>301 Moved</H1>\r\nThe document has moved\r\n<A HREF=\"http://www.google.com/\">here</A>.\r\n</BODY></HTML>\r\nbash-4.3#\r\n```\r\n\r\nGoing to try the grpcurl thing from inside like you suggest, then we definitely know if it's the container itself or php. Very nice idea thx :D "
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/391558610",
    "html_url": "https://github.com/grpc/grpc/issues/15522#issuecomment-391558610",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15522",
    "id": 391558610,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MTU1ODYxMA==",
    "user": {
      "login": "gertcuykens",
      "id": 863731,
      "node_id": "MDQ6VXNlcjg2MzczMQ==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/863731?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gertcuykens",
      "html_url": "https://github.com/gertcuykens",
      "followers_url": "https://api.github.com/users/gertcuykens/followers",
      "following_url": "https://api.github.com/users/gertcuykens/following{/other_user}",
      "gists_url": "https://api.github.com/users/gertcuykens/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gertcuykens/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gertcuykens/subscriptions",
      "organizations_url": "https://api.github.com/users/gertcuykens/orgs",
      "repos_url": "https://api.github.com/users/gertcuykens/repos",
      "events_url": "https://api.github.com/users/gertcuykens/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gertcuykens/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-24T01:30:47Z",
    "updated_at": "2018-05-24T01:30:47Z",
    "author_association": "NONE",
    "body": "Getting closer :)\r\n```\r\n~ # grpcurl -plaintext localhost:8080 list\r\nFailed to dial target host \"localhost:8080\": dial tcp 127.0.0.1:8080: connect: connection refused\r\n~ # grpcurl -plaintext 0.0.0.0:8080 list\r\nFailed to dial target host \"0.0.0.0:8080\": dial tcp 0.0.0.0:8080: connect: connection refused\r\n~ # grpcurl -plaintext 127.0.0.1:8080 list\r\nFailed to dial target host \"127.0.0.1:8080\": dial tcp 127.0.0.1:8080: connect: connection refused\r\n~ # grpcurl -plaintext host.docker.internal:8080 list\r\ngrpc.reflection.v1alpha.ServerReflection\r\ngrpc_test.Example\r\n~ #\r\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/391559585",
    "html_url": "https://github.com/grpc/grpc/issues/15522#issuecomment-391559585",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15522",
    "id": 391559585,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MTU1OTU4NQ==",
    "user": {
      "login": "gertcuykens",
      "id": 863731,
      "node_id": "MDQ6VXNlcjg2MzczMQ==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/863731?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gertcuykens",
      "html_url": "https://github.com/gertcuykens",
      "followers_url": "https://api.github.com/users/gertcuykens/followers",
      "following_url": "https://api.github.com/users/gertcuykens/following{/other_user}",
      "gists_url": "https://api.github.com/users/gertcuykens/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gertcuykens/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gertcuykens/subscriptions",
      "organizations_url": "https://api.github.com/users/gertcuykens/orgs",
      "repos_url": "https://api.github.com/users/gertcuykens/repos",
      "events_url": "https://api.github.com/users/gertcuykens/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gertcuykens/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-24T01:36:58Z",
    "updated_at": "2018-05-24T01:36:58Z",
    "author_association": "NONE",
    "body": "Alleluia its working! In the php file i needed to connect to host.docker.internal:8080 and start the php server as php -S 0.0.0.0:8081"
  }
]
