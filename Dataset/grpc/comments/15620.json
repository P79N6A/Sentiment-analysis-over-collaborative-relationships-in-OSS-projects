[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/395254063",
    "html_url": "https://github.com/grpc/grpc/issues/15620#issuecomment-395254063",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15620",
    "id": 395254063,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NTI1NDA2Mw==",
    "user": {
      "login": "hexinw",
      "id": 13575408,
      "node_id": "MDQ6VXNlcjEzNTc1NDA4",
      "avatar_url": "https://avatars1.githubusercontent.com/u/13575408?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hexinw",
      "html_url": "https://github.com/hexinw",
      "followers_url": "https://api.github.com/users/hexinw/followers",
      "following_url": "https://api.github.com/users/hexinw/following{/other_user}",
      "gists_url": "https://api.github.com/users/hexinw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hexinw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hexinw/subscriptions",
      "organizations_url": "https://api.github.com/users/hexinw/orgs",
      "repos_url": "https://api.github.com/users/hexinw/repos",
      "events_url": "https://api.github.com/users/hexinw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hexinw/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-07T00:21:35Z",
    "updated_at": "2018-06-07T00:21:35Z",
    "author_association": "NONE",
    "body": "@kpayson64 I am using the grpc gevent monkey patch from you. Are you aware of any open issue related to gevent and grpc?"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/395255655",
    "html_url": "https://github.com/grpc/grpc/issues/15620#issuecomment-395255655",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15620",
    "id": 395255655,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NTI1NTY1NQ==",
    "user": {
      "login": "kpayson64",
      "id": 18316330,
      "node_id": "MDQ6VXNlcjE4MzE2MzMw",
      "avatar_url": "https://avatars2.githubusercontent.com/u/18316330?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kpayson64",
      "html_url": "https://github.com/kpayson64",
      "followers_url": "https://api.github.com/users/kpayson64/followers",
      "following_url": "https://api.github.com/users/kpayson64/following{/other_user}",
      "gists_url": "https://api.github.com/users/kpayson64/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kpayson64/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kpayson64/subscriptions",
      "organizations_url": "https://api.github.com/users/kpayson64/orgs",
      "repos_url": "https://api.github.com/users/kpayson64/repos",
      "events_url": "https://api.github.com/users/kpayson64/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kpayson64/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-07T00:32:34Z",
    "updated_at": "2018-06-07T00:32:34Z",
    "author_association": "CONTRIBUTOR",
    "body": "#15411 Is the only other open issue for gevent, but I think it is unrelated.\r\n\r\nThe 1.12.1 release contained a bug fix for gevent, but it doesn't look similar to what you are describing.\r\n\r\nBased on the details you have provided, I would guess what is happening is the server listening file descriptor is getting shared between the two child processes, and that is causing issues.\r\n\r\nI'm hoping to look into this next week."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/395257011",
    "html_url": "https://github.com/grpc/grpc/issues/15620#issuecomment-395257011",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15620",
    "id": 395257011,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NTI1NzAxMQ==",
    "user": {
      "login": "hexinw",
      "id": 13575408,
      "node_id": "MDQ6VXNlcjEzNTc1NDA4",
      "avatar_url": "https://avatars1.githubusercontent.com/u/13575408?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hexinw",
      "html_url": "https://github.com/hexinw",
      "followers_url": "https://api.github.com/users/hexinw/followers",
      "following_url": "https://api.github.com/users/hexinw/following{/other_user}",
      "gists_url": "https://api.github.com/users/hexinw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hexinw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hexinw/subscriptions",
      "organizations_url": "https://api.github.com/users/hexinw/orgs",
      "repos_url": "https://api.github.com/users/hexinw/repos",
      "events_url": "https://api.github.com/users/hexinw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hexinw/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-07T00:41:41Z",
    "updated_at": "2018-06-07T00:41:41Z",
    "author_association": "NONE",
    "body": "Yeah I went through commit logs on master and didn't find things related before raising this bug. Thanks for the quick response."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/396063411",
    "html_url": "https://github.com/grpc/grpc/issues/15620#issuecomment-396063411",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15620",
    "id": 396063411,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NjA2MzQxMQ==",
    "user": {
      "login": "hexinw",
      "id": 13575408,
      "node_id": "MDQ6VXNlcjEzNTc1NDA4",
      "avatar_url": "https://avatars1.githubusercontent.com/u/13575408?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hexinw",
      "html_url": "https://github.com/hexinw",
      "followers_url": "https://api.github.com/users/hexinw/followers",
      "following_url": "https://api.github.com/users/hexinw/following{/other_user}",
      "gists_url": "https://api.github.com/users/hexinw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hexinw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hexinw/subscriptions",
      "organizations_url": "https://api.github.com/users/hexinw/orgs",
      "repos_url": "https://api.github.com/users/hexinw/repos",
      "events_url": "https://api.github.com/users/hexinw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hexinw/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-10T16:47:11Z",
    "updated_at": "2018-06-11T23:44:06Z",
    "author_association": "NONE",
    "body": "Looks like `socket_accept_async` in `src/python/grpcio/grpc/_cython/_cygrpc/grpc_gevent.pyx` is never called after the greenlet is spawned. Hence `s.socket.accept` is not executed and the socket server fd is not added to the loop anfds.\r\n\r\nActually not very familiar with gRPC internal implementation, as soon as I disable GRPC_ENABLE_FORK_SUPPORT env variable, which essentially avoids the grpc postfork call, the problem seems to go away. @kpayson64 Just some data point if that helps you to trouble shoot. Thanks\r\n "
  }
]
