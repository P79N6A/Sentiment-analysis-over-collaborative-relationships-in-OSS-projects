[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/324491423",
    "html_url": "https://github.com/grpc/grpc/issues/11482#issuecomment-324491423",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11482",
    "id": 324491423,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNDQ5MTQyMw==",
    "user": {
      "login": "apolcyn",
      "id": 9566254,
      "node_id": "MDQ6VXNlcjk1NjYyNTQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9566254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apolcyn",
      "html_url": "https://github.com/apolcyn",
      "followers_url": "https://api.github.com/users/apolcyn/followers",
      "following_url": "https://api.github.com/users/apolcyn/following{/other_user}",
      "gists_url": "https://api.github.com/users/apolcyn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apolcyn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apolcyn/subscriptions",
      "organizations_url": "https://api.github.com/users/apolcyn/orgs",
      "repos_url": "https://api.github.com/users/apolcyn/repos",
      "events_url": "https://api.github.com/users/apolcyn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apolcyn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-23T23:34:33Z",
    "updated_at": "2017-08-23T23:34:33Z",
    "author_association": "CONTRIBUTOR",
    "body": "possibly related, in https://sponge.corp.google.com/target?id=2b0389a1-e04b-4e6a-9cdf-5a1e0e408938&target=github/grpc/c_linux_tsan_native&searchFor=&show=ALL&sortBy=STATUS\r\n\r\non `bins/tsan/concurrent_connectivity_test GRPC_POLL_STRATEGY=epollsig `\r\n\r\nheap use-after-free found:\r\n\r\n```\r\nFailure\r\nusing signal: 40\r\nD0823 21:17:20.179264207   12924 ev_posix.c:111]             Using polling engine: epollsig\r\nD0823 21:17:20.180497351   12924 dns_resolver.c:301]         Using native dns resolver\r\nD0823 21:17:20.182648764   12924 concurrent_connectivity_test.c:180] Wave 1\r\nI0823 21:17:20.200218364   12930 subchannel.c:683]           Connect failed: {\"created\":\"@1503523040.199871728\",\"description\":\"Failed to connect to remote host: OS Error\",\"errno\":111,\"file\":\"src/core/lib/iomgr/tcp_client_posix.c\",\"file_line\":200,\"os_error\":\"Connection refused\",\"syscall\":\"connect\",\"target_address\":\"ipv6:[::1]:54321\"}\r\nI0823 21:17:20.201021544   12930 subchannel.c:683]           Connect failed: {\"created\":\"@1503523040.200783900\",\"description\":\"Failed to connect to remote host: OS Error\",\"errno\":111,\"file\":\"src/core/lib/iomgr/tcp_client_posix.c\",\"file_line\":200,\"os_error\":\"Connection refused\",\"syscall\":\"connect\",\"target_address\":\"ipv4:127.0.0.1:54321\"}\r\nI0823 21:17:20.201152342   12930 subchannel.c:479]           Retry in 19.998357582 seconds\r\nI0823 21:17:20.202817820   12930 subchannel.c:479]           Retry in 19.997655304 seconds\r\nD0823 21:17:25.914004636   12924 concurrent_connectivity_test.c:190] Wave 2\r\nD0823 21:17:33.487201022   12924 concurrent_connectivity_test.c:214] Wave 3\r\n==================\r\nWARNING: ThreadSanitizer: heap-use-after-free (pid=12924)\r\n  Read of size 8 at 0x7d54008037b0 by thread T79:\r\n    #0 grpc_closure_list_fail_all /var/local/git/grpc/src/core/lib/iomgr/closure.c:79:32 (concurrent_connectivity_test+0x0000004b828e)\r\n    #1 on_resolver_result_changed_locked /var/local/git/grpc/src/core/ext/filters/client_channel/client_channel.c:548:5 (concurrent_connectivity_test+0x000000508351)\r\n    #2 grpc_combiner_continue_exec_ctx /var/local/git/grpc/src/core/lib/iomgr/combiner.c:254:5 (concurrent_connectivity_test+0x00000051d709)\r\n    #3 grpc_exec_ctx_flush /var/local/git/grpc/src/core/lib/iomgr/exec_ctx.c:93:17 (concurrent_connectivity_test+0x0000004bf270)\r\n    #4 executor_thread /var/local/git/grpc/src/core/lib/iomgr/executor.c:153:5 (concurrent_connectivity_test+0x00000054b738)\r\n    #5 thread_body /var/local/git/grpc/src/core/lib/support/thd_posix.c:42:3 (concurrent_connectivity_test+0x00000057aead)\r\n\r\n  Previous write of size 8 at 0x7d54008037b0 by thread T40:\r\n    #0 free /llvm/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:638 (concurrent_connectivity_test+0x000000447636)\r\n    #1 gpr_free /var/local/git/grpc/src/core/lib/support/alloc.c:78:3 (concurrent_connectivity_test+0x000000571d84)\r\n    #2 destroy_channel /var/local/git/grpc/src/core/lib/surface/channel.c:378:3 (concurrent_connectivity_test+0x0000004e447a)\r\n    #3 exec_ctx_run /var/local/git/grpc/src/core/lib/iomgr/exec_ctx.c:70:3 (concurrent_connectivity_test+0x0000004bf513)\r\n    #4 grpc_exec_ctx_flush /var/local/git/grpc/src/core/lib/iomgr/exec_ctx.c:90:9 (concurrent_connectivity_test+0x0000004bf255)\r\n    #5 grpc_exec_ctx_finish /var/local/git/grpc/src/core/lib/iomgr/exec_ctx.c:56:3 (concurrent_connectivity_test+0x0000004bf107)\r\n    #6 grpc_channel_destroy /var/local/git/grpc/src/core/lib/surface/channel.c:393:3 (concurrent_connectivity_test+0x0000004e5be2)\r\n    #7 create_loop_destroy /var/local/git/grpc/test/core/surface/concurrent_connectivity_test.c:78:5 (concurrent_connectivity_test+0x0000004af79e)\r\n    #8 thread_body /var/local/git/grpc/src/core/lib/support/thd_posix.c:42:3 (concurrent_connectivity_test+0x00000057aead)\r\n\r\n  Location is heap block of size 560 at 0x7d5400803680 allocated by thread T40:\r\n    #0 calloc /llvm/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:612 (concurrent_connectivity_test+0x0000004420dd)\r\n    #1 zalloc_with_calloc /var/local/git/grpc/src/core/lib/support/alloc.c:27:53 (concurrent_connectivity_test+0x000000571f9f)\r\n    #2 gpr_zalloc /var/local/git/grpc/src/core/lib/support/alloc.c:68:7 (concurrent_connectivity_test+0x000000571d01)\r\n    #3 grpc_channel_stack_builder_finish /var/local/git/grpc/src/core/lib/channel/channel_stack_builder.c:250:13 (concurrent_connectivity_test+0x00000051b7a2)\r\n    #4 grpc_channel_create_with_builder /var/local/git/grpc/src/core/lib/surface/channel.c:80:23 (concurrent_connectivity_test+0x0000004e361d)\r\n    #5 grpc_channel_create /var/local/git/grpc/src/core/lib/surface/channel.c:179:10 (concurrent_connectivity_test+0x0000004e4552)\r\n    #6 client_channel_factory_create_channel /var/local/git/grpc/src/core/ext/transport/chttp2/client/insecure/channel_create.c:64:27 (concurrent_connectivity_test+0x000000571682)\r\n    #7 grpc_insecure_channel_create /var/local/git/grpc/src/core/ext/transport/chttp2/client/insecure/channel_create.c:95:27 (concurrent_connectivity_test+0x0000005714de)\r\n    #8 create_loop_destroy /var/local/git/grpc/test/core/surface/concurrent_connectivity_test.c:63:26 (concurrent_connectivity_test+0x0000004af679)\r\n    #9 thread_body /var/local/git/grpc/src/core/lib/support/thd_posix.c:42:3 (concurrent_connectivity_test+0x00000057aead)\r\n\r\n  Thread T79 (tid=13870, running) created by thread T15 at:\r\n    #0 pthread_create /llvm/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (concurrent_connectivity_test+0x00000044c433)\r\n    #1 gpr_thd_new /var/local/git/grpc/src/core/lib/support/thd_posix.c:66:21 (concurrent_connectivity_test+0x00000057ad93)\r\n    #2 executor_push /var/local/git/grpc/src/core/lib/iomgr/executor.c:185:7 (concurrent_connectivity_test+0x00000054be5e)\r\n    #3 grpc_closure_sched /var/local/git/grpc/src/core/lib/iomgr/closure.c:177:5 (concurrent_connectivity_test+0x0000004b8a99)\r\n    #4 resolve_address_impl /var/local/git/grpc/src/core/lib/iomgr/resolve_address_posix.c:184:3 (concurrent_connectivity_test+0x0000004c147f)\r\n    #5 dns_start_resolving_locked /var/local/git/grpc/src/core/ext/filters/client_channel/resolver/dns/native/dns_resolver.c:201:3 (concurrent_connectivity_test+0x00000063db15)\r\n    #6 dns_next_locked /var/local/git/grpc/src/core/ext/filters/client_channel/resolver/dns/native/dns_resolver.c:127:5 (concurrent_connectivity_test+0x00000063d8f0)\r\n    #7 grpc_resolver_next_locked /var/local/git/grpc/src/core/ext/filters/client_channel/resolver.c:82:3 (concurrent_connectivity_test+0x00000050c326)\r\n    #8 start_resolving_locked /var/local/git/grpc/src/core/ext/filters/client_channel/client_channel.c:303:3 (concurrent_connectivity_test+0x000000505c98)\r\n    #9 try_to_connect_locked /var/local/git/grpc/src/core/ext/filters/client_channel/client_channel.c:1524:7 (concurrent_connectivity_test+0x0000005029d2)\r\n    #10 closure_wrapper /var/local/git/grpc/src/core/lib/iomgr/closure.c:116:3 (concurrent_connectivity_test+0x0000004b86be)\r\n    #11 grpc_combiner_continue_exec_ctx /var/local/git/grpc/src/core/lib/iomgr/combiner.c:254:5 (concurrent_connectivity_test+0x00000051d709)\r\n    #12 grpc_exec_ctx_flush /var/local/git/grpc/src/core/lib/iomgr/exec_ctx.c:93:17 (concurrent_connectivity_test+0x0000004bf270)\r\n    #13 grpc_exec_ctx_finish /var/local/git/grpc/src/core/lib/iomgr/exec_ctx.c:56:3 (concurrent_connectivity_test+0x0000004bf107)\r\n    #14 grpc_channel_check_connectivity_state /var/local/git/grpc/src/core/ext/filters/client_channel/channel_connectivity.c:42:5 (concurrent_connectivity_test+0x0000004ff45b)\r\n    #15 create_loop_destroy /var/local/git/grpc/test/core/surface/concurrent_connectivity_test.c:69:11 (concurrent_connectivity_test+0x0000004af6b0)\r\n    #16 thread_body /var/local/git/grpc/src/core/lib/support/thd_posix.c:42:3 (concurrent_connectivity_test+0x00000057aead)\r\n\r\n  Thread T40 (tid=14481, running) created by main thread at:\r\n    #0 pthread_create /llvm/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (concurrent_connectivity_test+0x00000044c433)\r\n    #1 gpr_thd_new /var/local/git/grpc/src/core/lib/support/thd_posix.c:66:21 (concurrent_connectivity_test+0x00000057ad93)\r\n    #2 run_concurrent_connectivity_test /var/local/git/grpc/test/core/surface/concurrent_connectivity_test.c:222:5 (concurrent_connectivity_test+0x0000004b0390)\r\n    #3 main /var/local/git/grpc/test/core/surface/concurrent_connectivity_test.c:292:3 (concurrent_connectivity_test+0x0000004b08f9)\r\n\r\nSUMMARY: ThreadSanitizer: heap-use-after-free /var/local/git/grpc/src/core/lib/iomgr/closure.c:79:32 in grpc_closure_list_fail_all\r\n==================\r\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/331679257",
    "html_url": "https://github.com/grpc/grpc/issues/11482#issuecomment-331679257",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/11482",
    "id": 331679257,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMTY3OTI1Nw==",
    "user": {
      "login": "dgquintas",
      "id": 120217,
      "node_id": "MDQ6VXNlcjEyMDIxNw==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/120217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dgquintas",
      "html_url": "https://github.com/dgquintas",
      "followers_url": "https://api.github.com/users/dgquintas/followers",
      "following_url": "https://api.github.com/users/dgquintas/following{/other_user}",
      "gists_url": "https://api.github.com/users/dgquintas/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dgquintas/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dgquintas/subscriptions",
      "organizations_url": "https://api.github.com/users/dgquintas/orgs",
      "repos_url": "https://api.github.com/users/dgquintas/repos",
      "events_url": "https://api.github.com/users/dgquintas/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dgquintas/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-24T00:57:39Z",
    "updated_at": "2017-09-24T00:57:39Z",
    "author_association": "NONE",
    "body": "Duplicate of #11383 "
  }
]
