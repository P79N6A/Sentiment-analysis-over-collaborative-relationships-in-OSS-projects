[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/184408823",
    "html_url": "https://github.com/grpc/grpc/issues/5255#issuecomment-184408823",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/5255",
    "id": 184408823,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4NDQwODgyMw==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-02-15T21:47:10Z",
    "updated_at": "2016-02-15T21:47:10Z",
    "author_association": "CONTRIBUTOR",
    "body": "see https://cygwin.com/cygwin-ug-net/ntsec.html, section \"Switching the user context without password, Method 2: LSA authentication package\"\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/184531886",
    "html_url": "https://github.com/grpc/grpc/issues/5255#issuecomment-184531886",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/5255",
    "id": 184531886,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4NDUzMTg4Ng==",
    "user": {
      "login": "nicolasnoble",
      "id": 7281574,
      "node_id": "MDQ6VXNlcjcyODE1NzQ=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/7281574?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nicolasnoble",
      "html_url": "https://github.com/nicolasnoble",
      "followers_url": "https://api.github.com/users/nicolasnoble/followers",
      "following_url": "https://api.github.com/users/nicolasnoble/following{/other_user}",
      "gists_url": "https://api.github.com/users/nicolasnoble/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nicolasnoble/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nicolasnoble/subscriptions",
      "organizations_url": "https://api.github.com/users/nicolasnoble/orgs",
      "repos_url": "https://api.github.com/users/nicolasnoble/repos",
      "events_url": "https://api.github.com/users/nicolasnoble/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nicolasnoble/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-02-16T05:47:08Z",
    "updated_at": "2016-02-16T05:47:08Z",
    "author_association": "CONTRIBUTOR",
    "body": "So I'm not convinced this is the rootcause, by the way. I think the investigation needs to go in a slightly different direction than user authentication. My gut feeling is that under cygwin using their SLA script is causing a side effect in the environment that eventually results in that DLL working properly.\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/184730992",
    "html_url": "https://github.com/grpc/grpc/issues/5255#issuecomment-184730992",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/5255",
    "id": 184730992,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4NDczMDk5Mg==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-02-16T15:32:58Z",
    "updated_at": "2016-02-16T15:32:58Z",
    "author_association": "CONTRIBUTOR",
    "body": "Yeah, might be. but the `cyglsa-config` script seem to be our biggest hint so far anyway.\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/184854630",
    "html_url": "https://github.com/grpc/grpc/issues/5255#issuecomment-184854630",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/5255",
    "id": 184854630,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4NDg1NDYzMA==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-02-16T19:59:05Z",
    "updated_at": "2016-02-16T19:59:13Z",
    "author_association": "CONTRIBUTOR",
    "body": "I think this really has to do with switching user profile:\nwhen ssh'd through msys2 sshd the current username is `USERNAME=sshd_server`  but it should be `USERNAME=jenkins` (reported correctly by cygwin sshd).\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/184862522",
    "html_url": "https://github.com/grpc/grpc/issues/5255#issuecomment-184862522",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/5255",
    "id": 184862522,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4NDg2MjUyMg==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-02-16T20:25:02Z",
    "updated_at": "2016-02-16T20:26:52Z",
    "author_association": "CONTRIBUTOR",
    "body": "Quoting from https://cygwin.com/cygwin-ug-net/ntsec.html:\n\n> A more important problem is that using NtCreateToken is not sufficient to create a new logon session for the new user. What does that mean? Every logon usually creates a new logon session. A logon session has a couple of attributes which are unique to the session. One of these attributes is the fact, that Windows functions identify the user domain and user name not by the SID of the access token owner, but only by the logon session the process is running under.\n> This has the following unfortunate consequence. Consider a service started under the SYSTEM  account (up to Windows XP) switches the user context to DOMAIN\\my_user using a token created directly by calling the NtCreateToken function. A process running under this new access token might want to know under which user account it's running. The corresponding SID is returned correctly, for instance S-1-5-21-1234-5678-9012-77777. However, if the same process asks the OS for the user name of this SID something wierd happens. For instance, the LookupAccountSid function will not return \"DOMAIN\\my_user\", but \"NT AUTHORITY\\SYSTEM\" as the user name.\n> You might ask \"So what?\" After all, this only looks bad, but functionality and permission-wise everything should be ok. And Cygwin knows about this shortcoming so it will return the correct Cygwin username when asked. Unfortunately this is more complicated. Some native, non-Cygwin Windows applications will misbehave badly in this situation. A well-known example are certain versions of Visual-C++.\n\nStress is on \"Some native, non-Cygwin Windows applications will misbehave badly in this situation. A well-known example are certain versions of Visual-C++\".\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/184863722",
    "html_url": "https://github.com/grpc/grpc/issues/5255#issuecomment-184863722",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/5255",
    "id": 184863722,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4NDg2MzcyMg==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-02-16T20:29:41Z",
    "updated_at": "2016-02-16T20:29:41Z",
    "author_association": "CONTRIBUTOR",
    "body": "http://stackoverflow.com/questions/17978984/running-msvc-via-cmake-using-ssh-to-cygwin-works-if-using-a-password-to-login-bu\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/185362440",
    "html_url": "https://github.com/grpc/grpc/issues/5255#issuecomment-185362440",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/5255",
    "id": 185362440,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4NTM2MjQ0MA==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-02-17T19:23:48Z",
    "updated_at": "2016-02-17T19:23:48Z",
    "author_association": "CONTRIBUTOR",
    "body": "Eventually I used an ugly workaround and made user \"jenkins\" privileged user that is also running sshd.\nThat way, we are not switching user sessions without password and Visual Studio is not failing with the original error anymore.\n\nssh configure script is here: https://gist.github.com/jtattermusch/9c8d340120d820f482fa, all the necessary steps are documented in go/grpc-jenkins-setup\n\nI create a new windows worker snaphot and recreated all workers using that snapshot.\n\nCurrently all jenkins windows workers should be identical and seem to be working fine (except missing APPDATA variable is breaking grpc_credentials_test, but I'm going to fix that).\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/185369630",
    "html_url": "https://github.com/grpc/grpc/issues/5255#issuecomment-185369630",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/5255",
    "id": 185369630,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4NTM2OTYzMA==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-02-17T19:37:27Z",
    "updated_at": "2016-02-17T19:37:27Z",
    "author_association": "CONTRIBUTOR",
    "body": "For now, I manually added APPDATA variable pointing to C:\\Users\\jenkins\\AppData\\Roaming in configuration for all workers (on Jenkins).\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/185525365",
    "html_url": "https://github.com/grpc/grpc/issues/5255#issuecomment-185525365",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/5255",
    "id": 185525365,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4NTUyNTM2NQ==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-02-18T03:21:33Z",
    "updated_at": "2016-02-18T03:21:33Z",
    "author_association": "CONTRIBUTOR",
    "body": "The tweaks I tried to do didn't really help and windows workers were having weird issues (VS2015 not working, missing env variables, etc), so I switched all win workers to username and password authentication.\n\nto allow properly switching the user session, I ran `passwd -R` on all workers, that has finally resolved the \"incorrect MSPDB120.DLL\" problem for C# builds.\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/185525666",
    "html_url": "https://github.com/grpc/grpc/issues/5255#issuecomment-185525666",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/5255",
    "id": 185525666,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4NTUyNTY2Ng==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-02-18T03:24:23Z",
    "updated_at": "2016-02-18T03:24:23Z",
    "author_association": "CONTRIBUTOR",
    "body": "https://cygwin.com/cygwin-ug-net/ntsec.html: \"Switching the user context without password, Method 3: With password\"\n"
  }
]
