[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/236997624",
    "html_url": "https://github.com/grpc/grpc/issues/7608#issuecomment-236997624",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/7608",
    "id": 236997624,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNjk5NzYyNA==",
    "user": {
      "login": "nicolasnoble",
      "id": 7281574,
      "node_id": "MDQ6VXNlcjcyODE1NzQ=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/7281574?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nicolasnoble",
      "html_url": "https://github.com/nicolasnoble",
      "followers_url": "https://api.github.com/users/nicolasnoble/followers",
      "following_url": "https://api.github.com/users/nicolasnoble/following{/other_user}",
      "gists_url": "https://api.github.com/users/nicolasnoble/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nicolasnoble/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nicolasnoble/subscriptions",
      "organizations_url": "https://api.github.com/users/nicolasnoble/orgs",
      "repos_url": "https://api.github.com/users/nicolasnoble/repos",
      "events_url": "https://api.github.com/users/nicolasnoble/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nicolasnoble/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-02T18:29:53Z",
    "updated_at": "2016-08-02T18:29:53Z",
    "author_association": "CONTRIBUTOR",
    "body": "Note this won't necessarily crash systematically. It'll require a few tries before segfaulting.\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/236999997",
    "html_url": "https://github.com/grpc/grpc/issues/7608#issuecomment-236999997",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/7608",
    "id": 236999997,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNjk5OTk5Nw==",
    "user": {
      "login": "nicolasnoble",
      "id": 7281574,
      "node_id": "MDQ6VXNlcjcyODE1NzQ=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/7281574?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nicolasnoble",
      "html_url": "https://github.com/nicolasnoble",
      "followers_url": "https://api.github.com/users/nicolasnoble/followers",
      "following_url": "https://api.github.com/users/nicolasnoble/following{/other_user}",
      "gists_url": "https://api.github.com/users/nicolasnoble/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nicolasnoble/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nicolasnoble/subscriptions",
      "organizations_url": "https://api.github.com/users/nicolasnoble/orgs",
      "repos_url": "https://api.github.com/users/nicolasnoble/repos",
      "events_url": "https://api.github.com/users/nicolasnoble/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nicolasnoble/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-02T18:37:37Z",
    "updated_at": "2016-08-02T18:37:37Z",
    "author_association": "CONTRIBUTOR",
    "body": "Also this reproduces with other operating systems, not just Ubuntu 14.04. Ubuntu 16.04 reproduces the problem, which gives me better tools to debug that.\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/237413347",
    "html_url": "https://github.com/grpc/grpc/issues/7608#issuecomment-237413347",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/7608",
    "id": 237413347,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNzQxMzM0Nw==",
    "user": {
      "login": "nicolasnoble",
      "id": 7281574,
      "node_id": "MDQ6VXNlcjcyODE1NzQ=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/7281574?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nicolasnoble",
      "html_url": "https://github.com/nicolasnoble",
      "followers_url": "https://api.github.com/users/nicolasnoble/followers",
      "following_url": "https://api.github.com/users/nicolasnoble/following{/other_user}",
      "gists_url": "https://api.github.com/users/nicolasnoble/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nicolasnoble/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nicolasnoble/subscriptions",
      "organizations_url": "https://api.github.com/users/nicolasnoble/orgs",
      "repos_url": "https://api.github.com/users/nicolasnoble/repos",
      "events_url": "https://api.github.com/users/nicolasnoble/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nicolasnoble/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-04T00:09:16Z",
    "updated_at": "2016-08-04T00:09:16Z",
    "author_association": "CONTRIBUTOR",
    "body": "I feel I am missing something drastically simple here. The async resolver callback enqueues the \"done\" callback, but instead of being executed on the pluck call, it's getting picked up by the executor thread instead. And I don't see why.\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/237418124",
    "html_url": "https://github.com/grpc/grpc/issues/7608#issuecomment-237418124",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/7608",
    "id": 237418124,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNzQxODEyNA==",
    "user": {
      "login": "nicolasnoble",
      "id": 7281574,
      "node_id": "MDQ6VXNlcjcyODE1NzQ=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/7281574?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nicolasnoble",
      "html_url": "https://github.com/nicolasnoble",
      "followers_url": "https://api.github.com/users/nicolasnoble/followers",
      "following_url": "https://api.github.com/users/nicolasnoble/following{/other_user}",
      "gists_url": "https://api.github.com/users/nicolasnoble/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nicolasnoble/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nicolasnoble/subscriptions",
      "organizations_url": "https://api.github.com/users/nicolasnoble/orgs",
      "repos_url": "https://api.github.com/users/nicolasnoble/repos",
      "events_url": "https://api.github.com/users/nicolasnoble/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nicolasnoble/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-04T00:42:42Z",
    "updated_at": "2016-08-04T00:42:42Z",
    "author_association": "CONTRIBUTOR",
    "body": "Or rather, what I don't understand is the other way around. I don't understand how in the \"working\" case we're supposed to end up with that callback happening during the pluck call.\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/239326444",
    "html_url": "https://github.com/grpc/grpc/issues/7608#issuecomment-239326444",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/7608",
    "id": 239326444,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzOTMyNjQ0NA==",
    "user": {
      "login": "stanley-cheung",
      "id": 11674202,
      "node_id": "MDQ6VXNlcjExNjc0MjAy",
      "avatar_url": "https://avatars2.githubusercontent.com/u/11674202?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stanley-cheung",
      "html_url": "https://github.com/stanley-cheung",
      "followers_url": "https://api.github.com/users/stanley-cheung/followers",
      "following_url": "https://api.github.com/users/stanley-cheung/following{/other_user}",
      "gists_url": "https://api.github.com/users/stanley-cheung/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stanley-cheung/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stanley-cheung/subscriptions",
      "organizations_url": "https://api.github.com/users/stanley-cheung/orgs",
      "repos_url": "https://api.github.com/users/stanley-cheung/repos",
      "events_url": "https://api.github.com/users/stanley-cheung/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stanley-cheung/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-11T23:45:09Z",
    "updated_at": "2016-08-11T23:45:09Z",
    "author_association": "CONTRIBUTOR",
    "body": "After some discussion, Nico thinks that it's not a guarantee that the metadata plugin callback will happen in the main thread (the one executing grpc_completion_queue_pluck).\n\nTo solve this, we might have to add some mechanism to make sure we only execute the metadata plugin callback in the main thread.\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/255985457",
    "html_url": "https://github.com/grpc/grpc/issues/7608#issuecomment-255985457",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/7608",
    "id": 255985457,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1NTk4NTQ1Nw==",
    "user": {
      "login": "MrMoose",
      "id": 1109555,
      "node_id": "MDQ6VXNlcjExMDk1NTU=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1109555?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MrMoose",
      "html_url": "https://github.com/MrMoose",
      "followers_url": "https://api.github.com/users/MrMoose/followers",
      "following_url": "https://api.github.com/users/MrMoose/following{/other_user}",
      "gists_url": "https://api.github.com/users/MrMoose/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MrMoose/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MrMoose/subscriptions",
      "organizations_url": "https://api.github.com/users/MrMoose/orgs",
      "repos_url": "https://api.github.com/users/MrMoose/repos",
      "events_url": "https://api.github.com/users/MrMoose/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MrMoose/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-10-25T09:32:40Z",
    "updated_at": "2016-10-25T09:51:07Z",
    "author_association": "NONE",
    "body": "I came here investigating a very similar scenario. We are using grpc in C++ though, on Ubuntu Linux (built with clang) and Windows (MSVC14). No Python involved but the symptoms are familiar.\n\nThe crashes are not reproducible but seem to occur only when built in Release Mode. I have only seen two quite corrupted stack traces which I cannot produce anymore.\n\nAlso, it seems to me like if it crashes it does so quite early after starting the server process. It will generally crash within the first hour or so. If it has been running for, say, 6 hours or more I haven't seen any such crash. After that time it will generally behave. \n I have seen this happening mostly under a little load. Not when idle. The process in question runs 2 GRPC servers, each in their own thread. Looking at the garbled stack traces I got and the logs around it I can be reasonably sure it is not in my user code but somewhere in the grpc/protobuf stack. I've seen it happening with versions starting from 0.15 all the way until current master.\n\nI continue to investigate this and will post further info once I get some.\n\nEdit:\nLooking through other bugs I found #8388 which fits my problem much better. It may or may not be related to this.\n"
  }
]
