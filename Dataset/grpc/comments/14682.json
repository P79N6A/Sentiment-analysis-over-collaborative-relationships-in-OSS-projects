[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/372515060",
    "html_url": "https://github.com/grpc/grpc/issues/14682#issuecomment-372515060",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14682",
    "id": 372515060,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MjUxNTA2MA==",
    "user": {
      "login": "ZhouyihaiDing",
      "id": 28968539,
      "node_id": "MDQ6VXNlcjI4OTY4NTM5",
      "avatar_url": "https://avatars3.githubusercontent.com/u/28968539?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ZhouyihaiDing",
      "html_url": "https://github.com/ZhouyihaiDing",
      "followers_url": "https://api.github.com/users/ZhouyihaiDing/followers",
      "following_url": "https://api.github.com/users/ZhouyihaiDing/following{/other_user}",
      "gists_url": "https://api.github.com/users/ZhouyihaiDing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ZhouyihaiDing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ZhouyihaiDing/subscriptions",
      "organizations_url": "https://api.github.com/users/ZhouyihaiDing/orgs",
      "repos_url": "https://api.github.com/users/ZhouyihaiDing/repos",
      "events_url": "https://api.github.com/users/ZhouyihaiDing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ZhouyihaiDing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-13T01:25:02Z",
    "updated_at": "2018-03-13T01:25:02Z",
    "author_association": "CONTRIBUTOR",
    "body": "The way to access the environment is in the comment at the bottom of https://github.com/grpc/grpc/issues/14601"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/372515408",
    "html_url": "https://github.com/grpc/grpc/issues/14682#issuecomment-372515408",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14682",
    "id": 372515408,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MjUxNTQwOA==",
    "user": {
      "login": "yashykt",
      "id": 4181124,
      "node_id": "MDQ6VXNlcjQxODExMjQ=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/4181124?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yashykt",
      "html_url": "https://github.com/yashykt",
      "followers_url": "https://api.github.com/users/yashykt/followers",
      "following_url": "https://api.github.com/users/yashykt/following{/other_user}",
      "gists_url": "https://api.github.com/users/yashykt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yashykt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yashykt/subscriptions",
      "organizations_url": "https://api.github.com/users/yashykt/orgs",
      "repos_url": "https://api.github.com/users/yashykt/repos",
      "events_url": "https://api.github.com/users/yashykt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yashykt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-13T01:27:12Z",
    "updated_at": "2018-03-14T18:50:36Z",
    "author_association": "MEMBER",
    "body": "I just verified on that system that it has a faulty sched_getcpu syscall. It ends up returning a value more than the maximum number of cpus which leads to accessing unintended memory, and finally a segfault. This seems like a linux kernel issue, or maybe broken configuration.\r\n\r\nUpdate -\r\nThis looks like a case of cpu hotplugging where sysconf(_SC_NPROCESSORS_CONF) does not count the number of possible hotplugged cpus."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/372873008",
    "html_url": "https://github.com/grpc/grpc/issues/14682#issuecomment-372873008",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14682",
    "id": 372873008,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3Mjg3MzAwOA==",
    "user": {
      "login": "ZhouyihaiDing",
      "id": 28968539,
      "node_id": "MDQ6VXNlcjI4OTY4NTM5",
      "avatar_url": "https://avatars3.githubusercontent.com/u/28968539?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ZhouyihaiDing",
      "html_url": "https://github.com/ZhouyihaiDing",
      "followers_url": "https://api.github.com/users/ZhouyihaiDing/followers",
      "following_url": "https://api.github.com/users/ZhouyihaiDing/following{/other_user}",
      "gists_url": "https://api.github.com/users/ZhouyihaiDing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ZhouyihaiDing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ZhouyihaiDing/subscriptions",
      "organizations_url": "https://api.github.com/users/ZhouyihaiDing/orgs",
      "repos_url": "https://api.github.com/users/ZhouyihaiDing/repos",
      "events_url": "https://api.github.com/users/ZhouyihaiDing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ZhouyihaiDing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-14T01:22:15Z",
    "updated_at": "2018-03-14T01:22:15Z",
    "author_association": "CONTRIBUTOR",
    "body": "gRPC 1.6.0 works fine in such system while 1.7.0 start segment fault randomly. They both has this [syscall](https://github.com/grpc/grpc/blob/v1.6.0/src/core/lib/support/cpu_linux.c), is the usage of this number changes starting from 1.7.0?"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/372874515",
    "html_url": "https://github.com/grpc/grpc/issues/14682#issuecomment-372874515",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14682",
    "id": 372874515,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3Mjg3NDUxNQ==",
    "user": {
      "login": "yashykt",
      "id": 4181124,
      "node_id": "MDQ6VXNlcjQxODExMjQ=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/4181124?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yashykt",
      "html_url": "https://github.com/yashykt",
      "followers_url": "https://api.github.com/users/yashykt/followers",
      "following_url": "https://api.github.com/users/yashykt/following{/other_user}",
      "gists_url": "https://api.github.com/users/yashykt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yashykt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yashykt/subscriptions",
      "organizations_url": "https://api.github.com/users/yashykt/orgs",
      "repos_url": "https://api.github.com/users/yashykt/repos",
      "events_url": "https://api.github.com/users/yashykt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yashykt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-14T01:31:23Z",
    "updated_at": "2018-03-14T01:31:23Z",
    "author_association": "MEMBER",
    "body": "gRPC 1.6.0 was probably not using sched_getcpu as much as in 1.7.0."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/372917317",
    "html_url": "https://github.com/grpc/grpc/issues/14682#issuecomment-372917317",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14682",
    "id": 372917317,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MjkxNzMxNw==",
    "user": {
      "login": "svycka",
      "id": 1270782,
      "node_id": "MDQ6VXNlcjEyNzA3ODI=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/1270782?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/svycka",
      "html_url": "https://github.com/svycka",
      "followers_url": "https://api.github.com/users/svycka/followers",
      "following_url": "https://api.github.com/users/svycka/following{/other_user}",
      "gists_url": "https://api.github.com/users/svycka/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/svycka/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/svycka/subscriptions",
      "organizations_url": "https://api.github.com/users/svycka/orgs",
      "repos_url": "https://api.github.com/users/svycka/repos",
      "events_url": "https://api.github.com/users/svycka/events{/privacy}",
      "received_events_url": "https://api.github.com/users/svycka/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-14T06:22:48Z",
    "updated_at": "2018-03-14T06:22:48Z",
    "author_association": "NONE",
    "body": "what does it mean? Won't it be fixed in `grpc` and should be fixed somewhere else? Just wondering if I will have to change my hosting provider or this will be fixed soon in `grpc` in meantime I can use an older version but that's not a long-term solution."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/373138894",
    "html_url": "https://github.com/grpc/grpc/issues/14682#issuecomment-373138894",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14682",
    "id": 373138894,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MzEzODg5NA==",
    "user": {
      "login": "yashykt",
      "id": 4181124,
      "node_id": "MDQ6VXNlcjQxODExMjQ=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/4181124?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yashykt",
      "html_url": "https://github.com/yashykt",
      "followers_url": "https://api.github.com/users/yashykt/followers",
      "following_url": "https://api.github.com/users/yashykt/following{/other_user}",
      "gists_url": "https://api.github.com/users/yashykt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yashykt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yashykt/subscriptions",
      "organizations_url": "https://api.github.com/users/yashykt/orgs",
      "repos_url": "https://api.github.com/users/yashykt/repos",
      "events_url": "https://api.github.com/users/yashykt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yashykt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-14T19:02:54Z",
    "updated_at": "2018-03-14T19:02:54Z",
    "author_association": "MEMBER",
    "body": "It definitely looks like a case of CPU hotplugging and sysconf(_SC_NPROCESSORS_CONF) not returning the maximum number of possible CPUs.\r\nCreated PR #14712 to fix this issue in gRPC. Manually verified that the fix works on the system. Tracking this separately in #14711. Please use gRPC 1.6 till the pull request gets merged."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/373515351",
    "html_url": "https://github.com/grpc/grpc/issues/14682#issuecomment-373515351",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14682",
    "id": 373515351,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MzUxNTM1MQ==",
    "user": {
      "login": "ZhouyihaiDing",
      "id": 28968539,
      "node_id": "MDQ6VXNlcjI4OTY4NTM5",
      "avatar_url": "https://avatars3.githubusercontent.com/u/28968539?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ZhouyihaiDing",
      "html_url": "https://github.com/ZhouyihaiDing",
      "followers_url": "https://api.github.com/users/ZhouyihaiDing/followers",
      "following_url": "https://api.github.com/users/ZhouyihaiDing/following{/other_user}",
      "gists_url": "https://api.github.com/users/ZhouyihaiDing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ZhouyihaiDing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ZhouyihaiDing/subscriptions",
      "organizations_url": "https://api.github.com/users/ZhouyihaiDing/orgs",
      "repos_url": "https://api.github.com/users/ZhouyihaiDing/repos",
      "events_url": "https://api.github.com/users/ZhouyihaiDing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ZhouyihaiDing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-15T20:39:08Z",
    "updated_at": "2018-03-15T20:39:08Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thanks @yashykt . This PR solve the `grpc_completion_queue_create_for_pluck` segment fault in php extension.\r\nIs it possibel that `grpc_completion_queue_shutdown(completion_queue);` is having the same issue? Because I noticed that the segment fault still there in php extension unless comment this function too. As well as `grpc_completion_queue_destroy`\r\nHi @svycka , it is strange that the syscall returns a wrong value. Maybe it will cause other errors not only in gRPC, but also somewhere else. Maybe you can confirm it with your hosting provide to see if they can fix it?\r\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/373518538",
    "html_url": "https://github.com/grpc/grpc/issues/14682#issuecomment-373518538",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14682",
    "id": 373518538,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MzUxODUzOA==",
    "user": {
      "login": "yashykt",
      "id": 4181124,
      "node_id": "MDQ6VXNlcjQxODExMjQ=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/4181124?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yashykt",
      "html_url": "https://github.com/yashykt",
      "followers_url": "https://api.github.com/users/yashykt/followers",
      "following_url": "https://api.github.com/users/yashykt/following{/other_user}",
      "gists_url": "https://api.github.com/users/yashykt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yashykt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yashykt/subscriptions",
      "organizations_url": "https://api.github.com/users/yashykt/orgs",
      "repos_url": "https://api.github.com/users/yashykt/repos",
      "events_url": "https://api.github.com/users/yashykt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yashykt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-15T20:50:40Z",
    "updated_at": "2018-03-15T20:50:40Z",
    "author_association": "MEMBER",
    "body": "@ZhouyihaiDing The PR makes it returns a default value of 0 for when the system has cpu hot-plugging, and so the same issue should not be occurring in other parts. As far as the hosting goes, I'm not sure what they can do to solve this issue. It's more of providing a way to determine the maximum number of hot-plugged CPUs at grpc initialization."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/373525026",
    "html_url": "https://github.com/grpc/grpc/issues/14682#issuecomment-373525026",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14682",
    "id": 373525026,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MzUyNTAyNg==",
    "user": {
      "login": "ZhouyihaiDing",
      "id": 28968539,
      "node_id": "MDQ6VXNlcjI4OTY4NTM5",
      "avatar_url": "https://avatars3.githubusercontent.com/u/28968539?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ZhouyihaiDing",
      "html_url": "https://github.com/ZhouyihaiDing",
      "followers_url": "https://api.github.com/users/ZhouyihaiDing/followers",
      "following_url": "https://api.github.com/users/ZhouyihaiDing/following{/other_user}",
      "gists_url": "https://api.github.com/users/ZhouyihaiDing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ZhouyihaiDing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ZhouyihaiDing/subscriptions",
      "organizations_url": "https://api.github.com/users/ZhouyihaiDing/orgs",
      "repos_url": "https://api.github.com/users/ZhouyihaiDing/repos",
      "events_url": "https://api.github.com/users/ZhouyihaiDing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ZhouyihaiDing/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-15T21:14:17Z",
    "updated_at": "2018-03-15T21:14:17Z",
    "author_association": "CONTRIBUTOR",
    "body": "Maybe `grpc_completion_queue_shutdown` segment fault is caused by other syscall? Can you please help to test this 3 lines together when you have time? Thank you!\r\n```\r\ngrpc_completion_queue_create_for_pluck\r\ngrpc_completion_queue_shutdown\r\ngrpc_completion_queue_destroy\r\n```"
  }
]
