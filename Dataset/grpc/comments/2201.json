[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/114977860",
    "html_url": "https://github.com/grpc/grpc/issues/2201#issuecomment-114977860",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/2201",
    "id": 114977860,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExNDk3Nzg2MA==",
    "user": {
      "login": "dhermes",
      "id": 520669,
      "node_id": "MDQ6VXNlcjUyMDY2OQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/520669?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dhermes",
      "html_url": "https://github.com/dhermes",
      "followers_url": "https://api.github.com/users/dhermes/followers",
      "following_url": "https://api.github.com/users/dhermes/following{/other_user}",
      "gists_url": "https://api.github.com/users/dhermes/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dhermes/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dhermes/subscriptions",
      "organizations_url": "https://api.github.com/users/dhermes/orgs",
      "repos_url": "https://api.github.com/users/dhermes/repos",
      "events_url": "https://api.github.com/users/dhermes/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dhermes/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-06-24T18:47:19Z",
    "updated_at": "2015-06-24T18:47:19Z",
    "author_association": "NONE",
    "body": "I just filed google/protobuf#539 as well over there.\n\nEven if `protobuf` was already installed, if `--cpp_implementation` was not passed `grpc` may still want to do something like\n\n``` bash\npip install --ignore-installed protobuf==3.0.0a3 --install-option=\"--cpp_implementation\"\n```\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/115026036",
    "html_url": "https://github.com/grpc/grpc/issues/2201#issuecomment-115026036",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/2201",
    "id": 115026036,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExNTAyNjAzNg==",
    "user": {
      "login": "soltanmm",
      "id": 4889063,
      "node_id": "MDQ6VXNlcjQ4ODkwNjM=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/4889063?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/soltanmm",
      "html_url": "https://github.com/soltanmm",
      "followers_url": "https://api.github.com/users/soltanmm/followers",
      "following_url": "https://api.github.com/users/soltanmm/following{/other_user}",
      "gists_url": "https://api.github.com/users/soltanmm/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/soltanmm/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/soltanmm/subscriptions",
      "organizations_url": "https://api.github.com/users/soltanmm/orgs",
      "repos_url": "https://api.github.com/users/soltanmm/repos",
      "events_url": "https://api.github.com/users/soltanmm/events{/privacy}",
      "received_events_url": "https://api.github.com/users/soltanmm/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-06-24T22:12:46Z",
    "updated_at": "2015-06-24T22:17:43Z",
    "author_association": "CONTRIBUTOR",
    "body": "I'm not sure we can tackle this from our end. [This](https://github.com/pypa/pip/pull/2537) appears to be a fairly recent (note: not necessarily widely available) addition to `pip`. Additionally, there's [this](http://stackoverflow.com/questions/17045817/setuptools-and-passing-options-to-dependencies) two-year-old unanswered question on StackOverflow (which I've not been able to find the answer to either).\n\nIt's also interesting to note that eventually wanting to support this in the `requirements.txt` file would nix my arguments [here](https://github.com/grpc/grpc/pull/1717#issuecomment-104478472).\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/115032813",
    "html_url": "https://github.com/grpc/grpc/issues/2201#issuecomment-115032813",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/2201",
    "id": 115032813,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExNTAzMjgxMw==",
    "user": {
      "login": "dhermes",
      "id": 520669,
      "node_id": "MDQ6VXNlcjUyMDY2OQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/520669?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dhermes",
      "html_url": "https://github.com/dhermes",
      "followers_url": "https://api.github.com/users/dhermes/followers",
      "following_url": "https://api.github.com/users/dhermes/following{/other_user}",
      "gists_url": "https://api.github.com/users/dhermes/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dhermes/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dhermes/subscriptions",
      "organizations_url": "https://api.github.com/users/dhermes/orgs",
      "repos_url": "https://api.github.com/users/dhermes/repos",
      "events_url": "https://api.github.com/users/dhermes/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dhermes/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-06-24T22:31:53Z",
    "updated_at": "2015-06-24T22:31:53Z",
    "author_association": "NONE",
    "body": "I didn't realize `--install-option` was so new. You could still manually download the [source](https://pypi.python.org/packages/source/p/protobuf/protobuf-3.0.0a3.tar.gz#md5=6674fa7452ebf066b767075db96a7ee0) from PyPI and then run `setup.py` with the necessary flag.\n\n---\n\nAs for your comment\n1.  The `CFLAGS` and `LD_LIBRARY_PATH` path can be mitigated if\n   1.  NPN is supported, allowing the installed version of `openssl` to be used instead of shadowing with `openssl 1.0.2` to gain ALPN\n   2.  The latest version of `protobuf` is installed as a system library (I'm unclear why it needs to be siloed with homebrew, but maybe there is a reason?)\n   3.  The `grpc` source is installed as a system library (again not sure why you don't want this)\n   4.  FWIW, under this scenario it'd just be\n      \n      ``` bash\n      curl -fsSL https://goo.gl/getgrpc | sudo bash  # To install JUST system libs\n      # All dependencies can be found or install fails with helpful message\n      [sudo] pip install grpcio\n      ```\n2.  You could (should?) use `tox` for tests, then you don't need to worry about `requirements.txt`.\n3.  I'm not sure what you mean by `application` in your 2.\n4.  See how inheritance [works with `tox`](https://github.com/GoogleCloudPlatform/gcloud-python/blob/b975d9cf81c177f38336e4d3ce1fecc7eb692ad3/tox.ini#L20-L21).\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/115054451",
    "html_url": "https://github.com/grpc/grpc/issues/2201#issuecomment-115054451",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/2201",
    "id": 115054451,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExNTA1NDQ1MQ==",
    "user": {
      "login": "soltanmm",
      "id": 4889063,
      "node_id": "MDQ6VXNlcjQ4ODkwNjM=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/4889063?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/soltanmm",
      "html_url": "https://github.com/soltanmm",
      "followers_url": "https://api.github.com/users/soltanmm/followers",
      "following_url": "https://api.github.com/users/soltanmm/following{/other_user}",
      "gists_url": "https://api.github.com/users/soltanmm/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/soltanmm/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/soltanmm/subscriptions",
      "organizations_url": "https://api.github.com/users/soltanmm/orgs",
      "repos_url": "https://api.github.com/users/soltanmm/repos",
      "events_url": "https://api.github.com/users/soltanmm/events{/privacy}",
      "received_events_url": "https://api.github.com/users/soltanmm/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-06-25T00:31:18Z",
    "updated_at": "2015-06-25T00:38:08Z",
    "author_association": "CONTRIBUTOR",
    "body": "> You could still manually download the source from PyPI and then run setup.py with the necessary flag.\n\nI'm not sure how to interpret that with respect to the perspective of a user/dev trying to use/develop-for our package.\n\n> You could (should?) use tox for tests, then you don't need to worry about `requirements.txt`.\n\nI haven't looked into reconciling that with our (as in the overall project team's) use of the `tools/run_tests/run_tests.py` script with respect to separating out the individual jobs in such a way that `run_tests` is aware of those individual test jobs being separate. Maybe at some point in the future. Or we could drop `run_tests` entirely. Who knows.\n\n> I'm not sure what you mean by application in your 2.\n\nI was being abstract (but why are we discussing this _here_?).\n\n---\n\nI'll look into `tox` at some point, but overall this seems like an enhancement we can put off for a later date.\n\nEDIT: Ah, I feel I was unclear. I didn't mean at all that the points I linked to were worth keeping around, rather that solving this issue would indirectly make them obsolete.\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/115364346",
    "html_url": "https://github.com/grpc/grpc/issues/2201#issuecomment-115364346",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/2201",
    "id": 115364346,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExNTM2NDM0Ng==",
    "user": {
      "login": "soltanmm",
      "id": 4889063,
      "node_id": "MDQ6VXNlcjQ4ODkwNjM=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/4889063?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/soltanmm",
      "html_url": "https://github.com/soltanmm",
      "followers_url": "https://api.github.com/users/soltanmm/followers",
      "following_url": "https://api.github.com/users/soltanmm/following{/other_user}",
      "gists_url": "https://api.github.com/users/soltanmm/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/soltanmm/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/soltanmm/subscriptions",
      "organizations_url": "https://api.github.com/users/soltanmm/orgs",
      "repos_url": "https://api.github.com/users/soltanmm/repos",
      "events_url": "https://api.github.com/users/soltanmm/events{/privacy}",
      "received_events_url": "https://api.github.com/users/soltanmm/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-06-25T19:05:08Z",
    "updated_at": "2015-06-25T19:07:07Z",
    "author_association": "CONTRIBUTOR",
    "body": "Actually, reading the following made me think of something else:\n\n> iii. The grpc source is installed as a system library (again not sure why you don't want this)\n\nWe _could_ install it directly into the virtualenv (I think that works linker-wise? still seems a bit futzy). We don't install it as a system library because we don't want to install libraries under test in such locations (a lot of stuff has been exposed in the C core via the wrapping libraries) and because someone shouldn't need `sudo` to build/run our tests (sans each user bumbling about their individual environment variables). Changing the install prefix and `make install`ing could clean that up.\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/115376212",
    "html_url": "https://github.com/grpc/grpc/issues/2201#issuecomment-115376212",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/2201",
    "id": 115376212,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExNTM3NjIxMg==",
    "user": {
      "login": "dhermes",
      "id": 520669,
      "node_id": "MDQ6VXNlcjUyMDY2OQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/520669?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dhermes",
      "html_url": "https://github.com/dhermes",
      "followers_url": "https://api.github.com/users/dhermes/followers",
      "following_url": "https://api.github.com/users/dhermes/following{/other_user}",
      "gists_url": "https://api.github.com/users/dhermes/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dhermes/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dhermes/subscriptions",
      "organizations_url": "https://api.github.com/users/dhermes/orgs",
      "repos_url": "https://api.github.com/users/dhermes/repos",
      "events_url": "https://api.github.com/users/dhermes/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dhermes/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-06-25T19:53:47Z",
    "updated_at": "2015-06-25T19:53:47Z",
    "author_association": "NONE",
    "body": "RE: installing in test, you can have an optional prefix that defaults to `/usr` or `/usr/local` and just have the test runner set the environment variable.\n\n---\n\nAs for C++ extensions, yes it is something you could put off (or just hope the `protobuf` folks take care of it).\n\nAs for \"I'm not sure how to interpret that with respect to the perspective of a user/dev trying\", I had in mind a simple line in `setup.py` which performed this before the rest of the install. But again it'd be much easier if the `protobuf` folks handled it natively.\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/115397002",
    "html_url": "https://github.com/grpc/grpc/issues/2201#issuecomment-115397002",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/2201",
    "id": 115397002,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExNTM5NzAwMg==",
    "user": {
      "login": "soltanmm",
      "id": 4889063,
      "node_id": "MDQ6VXNlcjQ4ODkwNjM=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/4889063?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/soltanmm",
      "html_url": "https://github.com/soltanmm",
      "followers_url": "https://api.github.com/users/soltanmm/followers",
      "following_url": "https://api.github.com/users/soltanmm/following{/other_user}",
      "gists_url": "https://api.github.com/users/soltanmm/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/soltanmm/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/soltanmm/subscriptions",
      "organizations_url": "https://api.github.com/users/soltanmm/orgs",
      "repos_url": "https://api.github.com/users/soltanmm/repos",
      "events_url": "https://api.github.com/users/soltanmm/events{/privacy}",
      "received_events_url": "https://api.github.com/users/soltanmm/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-06-25T21:00:13Z",
    "updated_at": "2015-06-25T21:00:56Z",
    "author_association": "CONTRIBUTOR",
    "body": "> you can have an optional prefix that defaults to /usr or /usr/local and just have the test runner set the environment variable.\n\nWe have that. We just happen to arbitrarily have the test builder and runner set up to use env-vars to point to the build directories (because the build step is separated out s.t. `make` is invoked by the project-wide `run_tests` and not our build script).\n\n> it'd be much easier if the protobuf folks handled it natively\n\nI also think that's the more 'right' course of action.\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/115397976",
    "html_url": "https://github.com/grpc/grpc/issues/2201#issuecomment-115397976",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/2201",
    "id": 115397976,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExNTM5Nzk3Ng==",
    "user": {
      "login": "dhermes",
      "id": 520669,
      "node_id": "MDQ6VXNlcjUyMDY2OQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/520669?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dhermes",
      "html_url": "https://github.com/dhermes",
      "followers_url": "https://api.github.com/users/dhermes/followers",
      "following_url": "https://api.github.com/users/dhermes/following{/other_user}",
      "gists_url": "https://api.github.com/users/dhermes/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dhermes/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dhermes/subscriptions",
      "organizations_url": "https://api.github.com/users/dhermes/orgs",
      "repos_url": "https://api.github.com/users/dhermes/repos",
      "events_url": "https://api.github.com/users/dhermes/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dhermes/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-06-25T21:03:25Z",
    "updated_at": "2015-06-25T21:03:25Z",
    "author_association": "NONE",
    "body": "We should just close this out and let google/protobuf#539 run its course.\n\n---\n\nAs a follow-up I'd love to open an issue / discussion about what we (myself and @tseaver) see as the \"right\" way to install for Python:\n\n```\ncurl -fsSL https://goo.gl/getgrpc | sudo bash  # To install JUST system libs\n# All dependencies can be found or install fails with helpful message\n[sudo] pip install grpcio\n```\n\n(This is of course contingent on `openssl` / NPN issues since we don't want to shadow existing system libs. This may also be an issue with `protobuf` system libs but I don't think so.)\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/115398218",
    "html_url": "https://github.com/grpc/grpc/issues/2201#issuecomment-115398218",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/2201",
    "id": 115398218,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExNTM5ODIxOA==",
    "user": {
      "login": "soltanmm",
      "id": 4889063,
      "node_id": "MDQ6VXNlcjQ4ODkwNjM=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/4889063?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/soltanmm",
      "html_url": "https://github.com/soltanmm",
      "followers_url": "https://api.github.com/users/soltanmm/followers",
      "following_url": "https://api.github.com/users/soltanmm/following{/other_user}",
      "gists_url": "https://api.github.com/users/soltanmm/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/soltanmm/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/soltanmm/subscriptions",
      "organizations_url": "https://api.github.com/users/soltanmm/orgs",
      "repos_url": "https://api.github.com/users/soltanmm/repos",
      "events_url": "https://api.github.com/users/soltanmm/events{/privacy}",
      "received_events_url": "https://api.github.com/users/soltanmm/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-06-25T21:04:50Z",
    "updated_at": "2015-06-25T21:04:50Z",
    "author_association": "CONTRIBUTOR",
    "body": "Sure.\n"
  }
]
