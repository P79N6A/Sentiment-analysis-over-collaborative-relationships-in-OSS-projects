[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/472062396",
    "html_url": "https://github.com/grpc/grpc/issues/18335#issuecomment-472062396",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/18335",
    "id": 472062396,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3MjA2MjM5Ng==",
    "user": {
      "login": "muxi",
      "id": 1054404,
      "node_id": "MDQ6VXNlcjEwNTQ0MDQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1054404?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/muxi",
      "html_url": "https://github.com/muxi",
      "followers_url": "https://api.github.com/users/muxi/followers",
      "following_url": "https://api.github.com/users/muxi/following{/other_user}",
      "gists_url": "https://api.github.com/users/muxi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/muxi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/muxi/subscriptions",
      "organizations_url": "https://api.github.com/users/muxi/orgs",
      "repos_url": "https://api.github.com/users/muxi/repos",
      "events_url": "https://api.github.com/users/muxi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/muxi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-12T15:59:38Z",
    "updated_at": "2019-03-12T15:59:38Z",
    "author_association": "MEMBER",
    "body": "According to offline discussions related to #18336, when `pem_root_certs` is provided, the certificates are not cached in core. Likely certificate cache related."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/472092434",
    "html_url": "https://github.com/grpc/grpc/issues/18335#issuecomment-472092434",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/18335",
    "id": 472092434,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3MjA5MjQzNA==",
    "user": {
      "login": "jiangtaoli2016",
      "id": 19913700,
      "node_id": "MDQ6VXNlcjE5OTEzNzAw",
      "avatar_url": "https://avatars2.githubusercontent.com/u/19913700?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jiangtaoli2016",
      "html_url": "https://github.com/jiangtaoli2016",
      "followers_url": "https://api.github.com/users/jiangtaoli2016/followers",
      "following_url": "https://api.github.com/users/jiangtaoli2016/following{/other_user}",
      "gists_url": "https://api.github.com/users/jiangtaoli2016/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jiangtaoli2016/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jiangtaoli2016/subscriptions",
      "organizations_url": "https://api.github.com/users/jiangtaoli2016/orgs",
      "repos_url": "https://api.github.com/users/jiangtaoli2016/repos",
      "events_url": "https://api.github.com/users/jiangtaoli2016/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jiangtaoli2016/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-12T17:06:59Z",
    "updated_at": "2019-03-12T17:14:53Z",
    "author_association": "CONTRIBUTOR",
    "body": "This issue is somewhat misleading. Let me explain how root certificate works in gRPC. \r\n\r\nIf `grpc_ssl_credential_create` has `pem_root_certs = nullptr` as input, the default root certificates will be used. gRPC not only caches the root certificate string, but also caches the root certificate in `X509_STORE` if using BoringSSL or OpenSSL 1.1+.\r\n\r\nIf user decides to pass his or her own `pem_root_certs`, then gRPC could not use the default cached `X509_STORE`. Instead, gRPC will create `X509_STORE` from the user inputted `pem_root_certs` and used it in `SSL_CTX` of each sub-channel.\r\n\r\nFor example, if user provided `pem_root_certs` is about 270KB, then `X509_STORE` would be ~1MB. If gRPC creates 10 sub-channels in parallel, then ~10MB will be created. "
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/472094012",
    "html_url": "https://github.com/grpc/grpc/issues/18335#issuecomment-472094012",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/18335",
    "id": 472094012,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3MjA5NDAxMg==",
    "user": {
      "login": "jiangtaoli2016",
      "id": 19913700,
      "node_id": "MDQ6VXNlcjE5OTEzNzAw",
      "avatar_url": "https://avatars2.githubusercontent.com/u/19913700?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jiangtaoli2016",
      "html_url": "https://github.com/jiangtaoli2016",
      "followers_url": "https://api.github.com/users/jiangtaoli2016/followers",
      "following_url": "https://api.github.com/users/jiangtaoli2016/following{/other_user}",
      "gists_url": "https://api.github.com/users/jiangtaoli2016/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jiangtaoli2016/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jiangtaoli2016/subscriptions",
      "organizations_url": "https://api.github.com/users/jiangtaoli2016/orgs",
      "repos_url": "https://api.github.com/users/jiangtaoli2016/repos",
      "events_url": "https://api.github.com/users/jiangtaoli2016/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jiangtaoli2016/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-12T17:10:55Z",
    "updated_at": "2019-03-12T17:15:37Z",
    "author_association": "CONTRIBUTOR",
    "body": "I would say it is intended behavior for now. One possible way to improve is if user provides his/her own `pem_root_certs`, gRPC tries to create one copy of `X509_STORE` and share between all sub-channels. It is quite hard to do based on the current security API in gRPC."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/472095189",
    "html_url": "https://github.com/grpc/grpc/issues/18335#issuecomment-472095189",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/18335",
    "id": 472095189,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3MjA5NTE4OQ==",
    "user": {
      "login": "muxi",
      "id": 1054404,
      "node_id": "MDQ6VXNlcjEwNTQ0MDQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1054404?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/muxi",
      "html_url": "https://github.com/muxi",
      "followers_url": "https://api.github.com/users/muxi/followers",
      "following_url": "https://api.github.com/users/muxi/following{/other_user}",
      "gists_url": "https://api.github.com/users/muxi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/muxi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/muxi/subscriptions",
      "organizations_url": "https://api.github.com/users/muxi/orgs",
      "repos_url": "https://api.github.com/users/muxi/repos",
      "events_url": "https://api.github.com/users/muxi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/muxi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-12T17:13:50Z",
    "updated_at": "2019-03-12T17:13:50Z",
    "author_association": "MEMBER",
    "body": "Ah that makes much more sense! Thanks for explaining it. In that case I agree it's intended behavior."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/472537043",
    "html_url": "https://github.com/grpc/grpc/issues/18335#issuecomment-472537043",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/18335",
    "id": 472537043,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3MjUzNzA0Mw==",
    "user": {
      "login": "gnossen",
      "id": 1644595,
      "node_id": "MDQ6VXNlcjE2NDQ1OTU=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1644595?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gnossen",
      "html_url": "https://github.com/gnossen",
      "followers_url": "https://api.github.com/users/gnossen/followers",
      "following_url": "https://api.github.com/users/gnossen/following{/other_user}",
      "gists_url": "https://api.github.com/users/gnossen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gnossen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gnossen/subscriptions",
      "organizations_url": "https://api.github.com/users/gnossen/orgs",
      "repos_url": "https://api.github.com/users/gnossen/repos",
      "events_url": "https://api.github.com/users/gnossen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gnossen/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-13T17:57:16Z",
    "updated_at": "2019-03-13T17:57:16Z",
    "author_association": "CONTRIBUTOR",
    "body": "@muxi Sounds like this issue is resolved. Closing for now. Please feel free to reopen if anything else comes up."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/472544006",
    "html_url": "https://github.com/grpc/grpc/issues/18335#issuecomment-472544006",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/18335",
    "id": 472544006,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3MjU0NDAwNg==",
    "user": {
      "login": "muxi",
      "id": 1054404,
      "node_id": "MDQ6VXNlcjEwNTQ0MDQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1054404?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/muxi",
      "html_url": "https://github.com/muxi",
      "followers_url": "https://api.github.com/users/muxi/followers",
      "following_url": "https://api.github.com/users/muxi/following{/other_user}",
      "gists_url": "https://api.github.com/users/muxi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/muxi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/muxi/subscriptions",
      "organizations_url": "https://api.github.com/users/muxi/orgs",
      "repos_url": "https://api.github.com/users/muxi/repos",
      "events_url": "https://api.github.com/users/muxi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/muxi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-13T18:15:13Z",
    "updated_at": "2019-03-13T18:15:13Z",
    "author_association": "MEMBER",
    "body": "@gnossen thanks but there's still some enhancement that could be done. Let's keep it open to keep track of it."
  }
]
