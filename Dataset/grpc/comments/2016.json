[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/110531050",
    "html_url": "https://github.com/grpc/grpc/issues/2016#issuecomment-110531050",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/2016",
    "id": 110531050,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExMDUzMTA1MA==",
    "user": {
      "login": "vjpai",
      "id": 8864912,
      "node_id": "MDQ6VXNlcjg4NjQ5MTI=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/8864912?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vjpai",
      "html_url": "https://github.com/vjpai",
      "followers_url": "https://api.github.com/users/vjpai/followers",
      "following_url": "https://api.github.com/users/vjpai/following{/other_user}",
      "gists_url": "https://api.github.com/users/vjpai/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vjpai/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vjpai/subscriptions",
      "organizations_url": "https://api.github.com/users/vjpai/orgs",
      "repos_url": "https://api.github.com/users/vjpai/repos",
      "events_url": "https://api.github.com/users/vjpai/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vjpai/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-06-09T23:24:37Z",
    "updated_at": "2015-06-09T23:24:37Z",
    "author_association": "MEMBER",
    "body": "I'd like to take this; I think there are some data structure tricks that will be fine here. Correct me if I'm wrong, but there's no requirement for ordering among delayed_cbs, is there? They're currently maintained as a FIFO, but I think there is no semantic reason for imposing that.\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/110532236",
    "html_url": "https://github.com/grpc/grpc/issues/2016#issuecomment-110532236",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/2016",
    "id": 110532236,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExMDUzMjIzNg==",
    "user": {
      "login": "vjpai",
      "id": 8864912,
      "node_id": "MDQ6VXNlcjg4NjQ5MTI=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/8864912?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vjpai",
      "html_url": "https://github.com/vjpai",
      "followers_url": "https://api.github.com/users/vjpai/followers",
      "following_url": "https://api.github.com/users/vjpai/following{/other_user}",
      "gists_url": "https://api.github.com/users/vjpai/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vjpai/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vjpai/subscriptions",
      "organizations_url": "https://api.github.com/users/vjpai/orgs",
      "repos_url": "https://api.github.com/users/vjpai/repos",
      "events_url": "https://api.github.com/users/vjpai/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vjpai/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-06-09T23:29:31Z",
    "updated_at": "2015-06-09T23:29:31Z",
    "author_association": "MEMBER",
    "body": "Fun fact: allow_synchronous_callbacks is always false. This doesn't cost any locks but it does force an extra (highly-predictable) branch.\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/110532267",
    "html_url": "https://github.com/grpc/grpc/issues/2016#issuecomment-110532267",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/2016",
    "id": 110532267,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExMDUzMjI2Nw==",
    "user": {
      "login": "ctiller",
      "id": 10120821,
      "node_id": "MDQ6VXNlcjEwMTIwODIx",
      "avatar_url": "https://avatars3.githubusercontent.com/u/10120821?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ctiller",
      "html_url": "https://github.com/ctiller",
      "followers_url": "https://api.github.com/users/ctiller/followers",
      "following_url": "https://api.github.com/users/ctiller/following{/other_user}",
      "gists_url": "https://api.github.com/users/ctiller/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ctiller/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ctiller/subscriptions",
      "organizations_url": "https://api.github.com/users/ctiller/orgs",
      "repos_url": "https://api.github.com/users/ctiller/repos",
      "events_url": "https://api.github.com/users/ctiller/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ctiller/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-06-09T23:29:51Z",
    "updated_at": "2015-06-09T23:29:51Z",
    "author_association": "MEMBER",
    "body": "I don't think there are: the easy experiment is to turn it into a LIFO and observe the results.\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/110532351",
    "html_url": "https://github.com/grpc/grpc/issues/2016#issuecomment-110532351",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/2016",
    "id": 110532351,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExMDUzMjM1MQ==",
    "user": {
      "login": "ctiller",
      "id": 10120821,
      "node_id": "MDQ6VXNlcjEwMTIwODIx",
      "avatar_url": "https://avatars3.githubusercontent.com/u/10120821?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ctiller",
      "html_url": "https://github.com/ctiller",
      "followers_url": "https://api.github.com/users/ctiller/followers",
      "following_url": "https://api.github.com/users/ctiller/following{/other_user}",
      "gists_url": "https://api.github.com/users/ctiller/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ctiller/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ctiller/subscriptions",
      "organizations_url": "https://api.github.com/users/ctiller/orgs",
      "repos_url": "https://api.github.com/users/ctiller/repos",
      "events_url": "https://api.github.com/users/ctiller/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ctiller/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-06-09T23:30:29Z",
    "updated_at": "2015-06-09T23:30:29Z",
    "author_association": "MEMBER",
    "body": "RE: allow_synchronous_callbacks - that seems odd and worth understanding also. It's definitely a latency hit.\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/110533048",
    "html_url": "https://github.com/grpc/grpc/issues/2016#issuecomment-110533048",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/2016",
    "id": 110533048,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExMDUzMzA0OA==",
    "user": {
      "login": "ctiller",
      "id": 10120821,
      "node_id": "MDQ6VXNlcjEwMTIwODIx",
      "avatar_url": "https://avatars3.githubusercontent.com/u/10120821?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ctiller",
      "html_url": "https://github.com/ctiller",
      "followers_url": "https://api.github.com/users/ctiller/followers",
      "following_url": "https://api.github.com/users/ctiller/following{/other_user}",
      "gists_url": "https://api.github.com/users/ctiller/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ctiller/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ctiller/subscriptions",
      "organizations_url": "https://api.github.com/users/ctiller/orgs",
      "repos_url": "https://api.github.com/users/ctiller/repos",
      "events_url": "https://api.github.com/users/ctiller/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ctiller/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-06-09T23:33:07Z",
    "updated_at": "2015-06-09T23:33:07Z",
    "author_association": "MEMBER",
    "body": "allow_synchronous_callbacks is 1 if called through pollset->maybe_work (maps to multipoll_with_epoll_pollset_maybe_work) then grpc_fd_become_{readable,writable}.\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/110534865",
    "html_url": "https://github.com/grpc/grpc/issues/2016#issuecomment-110534865",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/2016",
    "id": 110534865,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExMDUzNDg2NQ==",
    "user": {
      "login": "vjpai",
      "id": 8864912,
      "node_id": "MDQ6VXNlcjg4NjQ5MTI=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/8864912?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vjpai",
      "html_url": "https://github.com/vjpai",
      "followers_url": "https://api.github.com/users/vjpai/followers",
      "following_url": "https://api.github.com/users/vjpai/following{/other_user}",
      "gists_url": "https://api.github.com/users/vjpai/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vjpai/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vjpai/subscriptions",
      "organizations_url": "https://api.github.com/users/vjpai/orgs",
      "repos_url": "https://api.github.com/users/vjpai/repos",
      "events_url": "https://api.github.com/users/vjpai/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vjpai/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-06-09T23:47:32Z",
    "updated_at": "2015-06-09T23:47:32Z",
    "author_association": "MEMBER",
    "body": "Ok, didn't see that one. Nevertheless, I will look into that one and see if it's actually needed.\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/110536113",
    "html_url": "https://github.com/grpc/grpc/issues/2016#issuecomment-110536113",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/2016",
    "id": 110536113,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExMDUzNjExMw==",
    "user": {
      "login": "ctiller",
      "id": 10120821,
      "node_id": "MDQ6VXNlcjEwMTIwODIx",
      "avatar_url": "https://avatars3.githubusercontent.com/u/10120821?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ctiller",
      "html_url": "https://github.com/ctiller",
      "followers_url": "https://api.github.com/users/ctiller/followers",
      "following_url": "https://api.github.com/users/ctiller/following{/other_user}",
      "gists_url": "https://api.github.com/users/ctiller/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ctiller/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ctiller/subscriptions",
      "organizations_url": "https://api.github.com/users/ctiller/orgs",
      "repos_url": "https://api.github.com/users/ctiller/repos",
      "events_url": "https://api.github.com/users/ctiller/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ctiller/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-06-09T23:54:00Z",
    "updated_at": "2015-06-09T23:54:00Z",
    "author_association": "MEMBER",
    "body": "It's absolutely needed... not doing so means (likely) losing thread locality... I'd be more in favor of working towards getting more code able to allow_synchronous_callback than to reducing its use.\n\nNot doing the synchronous callback means we would need to unroll stack to the completion queue and then repeat all the checks that we made coming down before we got a chance to do the work.\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/110537250",
    "html_url": "https://github.com/grpc/grpc/issues/2016#issuecomment-110537250",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/2016",
    "id": 110537250,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExMDUzNzI1MA==",
    "user": {
      "login": "ctiller",
      "id": 10120821,
      "node_id": "MDQ6VXNlcjEwMTIwODIx",
      "avatar_url": "https://avatars3.githubusercontent.com/u/10120821?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ctiller",
      "html_url": "https://github.com/ctiller",
      "followers_url": "https://api.github.com/users/ctiller/followers",
      "following_url": "https://api.github.com/users/ctiller/following{/other_user}",
      "gists_url": "https://api.github.com/users/ctiller/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ctiller/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ctiller/subscriptions",
      "organizations_url": "https://api.github.com/users/ctiller/orgs",
      "repos_url": "https://api.github.com/users/ctiller/repos",
      "events_url": "https://api.github.com/users/ctiller/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ctiller/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-06-09T23:56:50Z",
    "updated_at": "2015-06-09T23:56:50Z",
    "author_association": "MEMBER",
    "body": "For reference: this is what I was originally considering implementing:\nhttp://www.1024cores.net/home/lock-free-algorithms/queues/intrusive-mpsc-node-based-queue\n\nProbably with modifications to make it multiple-consumer instead of single consumer, but I figured V1 could punt.\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/110538995",
    "html_url": "https://github.com/grpc/grpc/issues/2016#issuecomment-110538995",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/2016",
    "id": 110538995,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExMDUzODk5NQ==",
    "user": {
      "login": "vjpai",
      "id": 8864912,
      "node_id": "MDQ6VXNlcjg4NjQ5MTI=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/8864912?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vjpai",
      "html_url": "https://github.com/vjpai",
      "followers_url": "https://api.github.com/users/vjpai/followers",
      "following_url": "https://api.github.com/users/vjpai/following{/other_user}",
      "gists_url": "https://api.github.com/users/vjpai/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vjpai/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vjpai/subscriptions",
      "organizations_url": "https://api.github.com/users/vjpai/orgs",
      "repos_url": "https://api.github.com/users/vjpai/repos",
      "events_url": "https://api.github.com/users/vjpai/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vjpai/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-06-10T00:04:38Z",
    "updated_at": "2015-06-10T00:04:38Z",
    "author_association": "MEMBER",
    "body": "Yes, I also found some research papers on related topics and was looking them over. Most are focused on high-perf SPSC but some look at other variations. Atomic CAS instructions are definitely our friends.\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/110598646",
    "html_url": "https://github.com/grpc/grpc/issues/2016#issuecomment-110598646",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/2016",
    "id": 110598646,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExMDU5ODY0Ng==",
    "user": {
      "login": "vjpai",
      "id": 8864912,
      "node_id": "MDQ6VXNlcjg4NjQ5MTI=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/8864912?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vjpai",
      "html_url": "https://github.com/vjpai",
      "followers_url": "https://api.github.com/users/vjpai/followers",
      "following_url": "https://api.github.com/users/vjpai/following{/other_user}",
      "gists_url": "https://api.github.com/users/vjpai/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vjpai/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vjpai/subscriptions",
      "organizations_url": "https://api.github.com/users/vjpai/orgs",
      "repos_url": "https://api.github.com/users/vjpai/repos",
      "events_url": "https://api.github.com/users/vjpai/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vjpai/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-06-10T05:49:38Z",
    "updated_at": "2015-06-10T05:49:38Z",
    "author_association": "MEMBER",
    "body": "I will work toward an implementation based on the 1996 PODC paper by Valois from RPI.\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/113785717",
    "html_url": "https://github.com/grpc/grpc/issues/2016#issuecomment-113785717",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/2016",
    "id": 113785717,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExMzc4NTcxNw==",
    "user": {
      "login": "ctiller",
      "id": 10120821,
      "node_id": "MDQ6VXNlcjEwMTIwODIx",
      "avatar_url": "https://avatars3.githubusercontent.com/u/10120821?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ctiller",
      "html_url": "https://github.com/ctiller",
      "followers_url": "https://api.github.com/users/ctiller/followers",
      "following_url": "https://api.github.com/users/ctiller/following{/other_user}",
      "gists_url": "https://api.github.com/users/ctiller/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ctiller/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ctiller/subscriptions",
      "organizations_url": "https://api.github.com/users/ctiller/orgs",
      "repos_url": "https://api.github.com/users/ctiller/repos",
      "events_url": "https://api.github.com/users/ctiller/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ctiller/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-06-20T15:50:06Z",
    "updated_at": "2015-06-20T15:50:06Z",
    "author_association": "MEMBER",
    "body": "Thinking about this a little more... We probably want to go one better and provide multiple worklists. If we had a worklists per completion queue we could cover all per call use cases, and one per channel could cover other uses.\n\nI think one per channel ends up requiring an eventfd per open socket however. I'm starting to feel like this is justified to preserve our work isolation story. Would certainly make the transport work easier: if we have an acceptable work spilling mechanism I think I can bring transport level synchronization down to a few CAS operations.\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/120561579",
    "html_url": "https://github.com/grpc/grpc/issues/2016#issuecomment-120561579",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/2016",
    "id": 120561579,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyMDU2MTU3OQ==",
    "user": {
      "login": "vjpai",
      "id": 8864912,
      "node_id": "MDQ6VXNlcjg4NjQ5MTI=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/8864912?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vjpai",
      "html_url": "https://github.com/vjpai",
      "followers_url": "https://api.github.com/users/vjpai/followers",
      "following_url": "https://api.github.com/users/vjpai/following{/other_user}",
      "gists_url": "https://api.github.com/users/vjpai/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vjpai/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vjpai/subscriptions",
      "organizations_url": "https://api.github.com/users/vjpai/orgs",
      "repos_url": "https://api.github.com/users/vjpai/repos",
      "events_url": "https://api.github.com/users/vjpai/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vjpai/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-07-11T01:33:27Z",
    "updated_at": "2015-07-11T01:33:27Z",
    "author_association": "MEMBER",
    "body": "So, pull request #2383 may need to be adjusted to support this, since that's a lockfree stack of short ints (meant to work in another context) and this would not be.\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/244589350",
    "html_url": "https://github.com/grpc/grpc/issues/2016#issuecomment-244589350",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/2016",
    "id": 244589350,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0NDU4OTM1MA==",
    "user": {
      "login": "vjpai",
      "id": 8864912,
      "node_id": "MDQ6VXNlcjg4NjQ5MTI=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/8864912?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vjpai",
      "html_url": "https://github.com/vjpai",
      "followers_url": "https://api.github.com/users/vjpai/followers",
      "following_url": "https://api.github.com/users/vjpai/following{/other_user}",
      "gists_url": "https://api.github.com/users/vjpai/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vjpai/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vjpai/subscriptions",
      "organizations_url": "https://api.github.com/users/vjpai/orgs",
      "repos_url": "https://api.github.com/users/vjpai/repos",
      "events_url": "https://api.github.com/users/vjpai/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vjpai/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-09-04T07:57:49Z",
    "updated_at": "2016-09-04T07:57:49Z",
    "author_association": "MEMBER",
    "body": "When complete and merged, #7279 will resolve this issue. Closing it as obsolete for now.\n"
  }
]
