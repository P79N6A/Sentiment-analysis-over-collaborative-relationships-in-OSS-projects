[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/389338473",
    "html_url": "https://github.com/grpc/grpc/issues/15148#issuecomment-389338473",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15148",
    "id": 389338473,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4OTMzODQ3Mw==",
    "user": {
      "login": "nicolasnoble",
      "id": 7281574,
      "node_id": "MDQ6VXNlcjcyODE1NzQ=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/7281574?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nicolasnoble",
      "html_url": "https://github.com/nicolasnoble",
      "followers_url": "https://api.github.com/users/nicolasnoble/followers",
      "following_url": "https://api.github.com/users/nicolasnoble/following{/other_user}",
      "gists_url": "https://api.github.com/users/nicolasnoble/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nicolasnoble/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nicolasnoble/subscriptions",
      "organizations_url": "https://api.github.com/users/nicolasnoble/orgs",
      "repos_url": "https://api.github.com/users/nicolasnoble/repos",
      "events_url": "https://api.github.com/users/nicolasnoble/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nicolasnoble/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-15T22:50:20Z",
    "updated_at": "2018-05-15T22:50:20Z",
    "author_association": "CONTRIBUTOR",
    "body": "@Qining the issue is similar to that of Windows, and there's currently some amount of code to do this. The line you are referring to does exactly this.\r\n\r\nI don't know what the Bazel's selector for Android would be, but it'd need to be added there."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/389350367",
    "html_url": "https://github.com/grpc/grpc/issues/15148#issuecomment-389350367",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15148",
    "id": 389350367,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4OTM1MDM2Nw==",
    "user": {
      "login": "Qining",
      "id": 2983685,
      "node_id": "MDQ6VXNlcjI5ODM2ODU=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/2983685?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Qining",
      "html_url": "https://github.com/Qining",
      "followers_url": "https://api.github.com/users/Qining/followers",
      "following_url": "https://api.github.com/users/Qining/following{/other_user}",
      "gists_url": "https://api.github.com/users/Qining/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Qining/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Qining/subscriptions",
      "organizations_url": "https://api.github.com/users/Qining/orgs",
      "repos_url": "https://api.github.com/users/Qining/repos",
      "events_url": "https://api.github.com/users/Qining/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Qining/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-15T23:52:19Z",
    "updated_at": "2018-05-15T23:52:19Z",
    "author_association": "NONE",
    "body": "Hi @nicolasnoble, I found many Google code repos uses this to check if the build target is for Android:\r\n```\r\nconfig_setting(\r\n    name = \"android\",\r\n    values = {\"crosstool_top\": \"//external:android/crosstool\"}\r\n)\r\n```\r\nOne such example can be found at boringssl: https://github.com/google/boringssl/blob/master-with-bazel/BUILD#L49\r\nAnd there are many other repos using the same thing.\r\nAnd, I can also find it in Bazel's code: https://source.bazel.build/bazel/+/master:third_party/protobuf/3.4.0/BUILD;l=174\r\nEspecially this one, looks like this is sort of builtin.\r\nhttps://source.bazel.build/bazel/+/master:src/main/java/com/google/devtools/build/lib/bazel/rules/android/AndroidNdkRepositoryRule.java;l=41\r\n\r\nFor our project: GAPID: https://github.com/google/gapid, we need more detailed info for the CPU, so we use our more specific version:\r\nhttps://github.com/google/gapid/blob/master/tools/build/BUILD.bazel#L65\r\n\r\nAs for Windows, as GAPID need to be run on Win/Mac/Linux, we somehow made it work. The code is still in review, but generally we overwrite the BUILD file and some rules to make it work: https://github.com/google/gapid/pull/1861\r\nI just copy-paste and modified a little bit for Windows and Android. The `grpc_cc_library` is modified in grpc_c++.bzl to do the job.\r\n\r\nHope this helps\r\n\r\n"
  }
]
