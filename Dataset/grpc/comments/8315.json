[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/252139511",
    "html_url": "https://github.com/grpc/grpc/issues/8315#issuecomment-252139511",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/8315",
    "id": 252139511,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1MjEzOTUxMQ==",
    "user": {
      "login": "thomasvl",
      "id": 5279928,
      "node_id": "MDQ6VXNlcjUyNzk5Mjg=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/5279928?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thomasvl",
      "html_url": "https://github.com/thomasvl",
      "followers_url": "https://api.github.com/users/thomasvl/followers",
      "following_url": "https://api.github.com/users/thomasvl/following{/other_user}",
      "gists_url": "https://api.github.com/users/thomasvl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thomasvl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thomasvl/subscriptions",
      "organizations_url": "https://api.github.com/users/thomasvl/orgs",
      "repos_url": "https://api.github.com/users/thomasvl/repos",
      "events_url": "https://api.github.com/users/thomasvl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thomasvl/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-10-07T02:33:00Z",
    "updated_at": "2016-10-07T02:33:00Z",
    "author_association": "NONE",
    "body": "I don't believe you need to make an `NSData` subclass (and it likely wouldn't hurt to avoid it), instead you can create a composite out of the chunks.  We explicitly did this in some of [our tests](https://github.com/google/gtm-session-fetcher/blob/master/Source/UnitTests/GTMMIMEDocumentTest.m#L741-L756) to ensure we got parsing with `enumerateByteRangesUsingBlock` correct.  The only catch is making sure your pointers stay valid as long as the data does.\n\nThose tests also show casting to an NSData to take advantage of the toll free bridging.\n\nTo your questions - no, the ObjC protobuf code would end up causing NSData to auto merge this, but we can revisit seeing if we could use `enumerateByteRangesUsingBlock`.  Even without the protobuf code being changed, it seems like it might be worth doing in grpc just so anyone using it has the option of doing better code.\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/252153259",
    "html_url": "https://github.com/grpc/grpc/issues/8315#issuecomment-252153259",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/8315",
    "id": 252153259,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1MjE1MzI1OQ==",
    "user": {
      "login": "jcanizales",
      "id": 5120183,
      "node_id": "MDQ6VXNlcjUxMjAxODM=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/5120183?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jcanizales",
      "html_url": "https://github.com/jcanizales",
      "followers_url": "https://api.github.com/users/jcanizales/followers",
      "following_url": "https://api.github.com/users/jcanizales/following{/other_user}",
      "gists_url": "https://api.github.com/users/jcanizales/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jcanizales/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jcanizales/subscriptions",
      "organizations_url": "https://api.github.com/users/jcanizales/orgs",
      "repos_url": "https://api.github.com/users/jcanizales/repos",
      "events_url": "https://api.github.com/users/jcanizales/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jcanizales/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-10-07T04:58:50Z",
    "updated_at": "2016-10-07T04:59:29Z",
    "author_association": "CONTRIBUTOR",
    "body": "To create a composite of `dispatch_data_t` out of the chunks, we need to traverse the whole `grpc_byte_buffer`. Which is cheaper than a copy (O(num of chunks) instead of O(num of bytes)), but is avoidable. C gRPC's interface for reading `grpc_byte_buffer`'s  is similar to `NSData`'s `enumerateByteRangesUsingBlock:` but, conveniently, uses an external iterator. So implementing the internal iteration of `enumerateByteRangesUsingBlock:` with it might end up being pretty simple (famous last words).\n"
  }
]
