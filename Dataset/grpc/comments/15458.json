[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/390370823",
    "html_url": "https://github.com/grpc/grpc/issues/15458#issuecomment-390370823",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15458",
    "id": 390370823,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MDM3MDgyMw==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-19T02:04:58Z",
    "updated_at": "2018-05-19T02:04:58Z",
    "author_association": "CONTRIBUTOR",
    "body": "CC @dgquintas  I think you were looking into this before, do you have any insights?"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/390370917",
    "html_url": "https://github.com/grpc/grpc/issues/15458#issuecomment-390370917",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15458",
    "id": 390370917,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MDM3MDkxNw==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-19T02:06:31Z",
    "updated_at": "2018-05-19T02:06:31Z",
    "author_association": "CONTRIBUTOR",
    "body": "This is failing for 10% of builds on master, raising to P1."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/390371058",
    "html_url": "https://github.com/grpc/grpc/issues/15458#issuecomment-390371058",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15458",
    "id": 390371058,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MDM3MTA1OA==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-19T02:09:04Z",
    "updated_at": "2018-05-19T02:10:01Z",
    "author_association": "CONTRIBUTOR",
    "body": "There's actually two different inputs failing:\r\nhttps://source.cloud.google.com/results/invocations/f8c9ff45-28de-4cc8-ac48-2b4dd42f16ac\r\n\r\nand https://source.cloud.google.com/results/invocations/b3e7528d-b4cf-40ea-bc16-9008038ccf98\r\n\r\n(but they both end up with the same failure)"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/390500790",
    "html_url": "https://github.com/grpc/grpc/issues/15458#issuecomment-390500790",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15458",
    "id": 390500790,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MDUwMDc5MA==",
    "user": {
      "login": "dgquintas",
      "id": 120217,
      "node_id": "MDQ6VXNlcjEyMDIxNw==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/120217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dgquintas",
      "html_url": "https://github.com/dgquintas",
      "followers_url": "https://api.github.com/users/dgquintas/followers",
      "following_url": "https://api.github.com/users/dgquintas/following{/other_user}",
      "gists_url": "https://api.github.com/users/dgquintas/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dgquintas/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dgquintas/subscriptions",
      "organizations_url": "https://api.github.com/users/dgquintas/orgs",
      "repos_url": "https://api.github.com/users/dgquintas/repos",
      "events_url": "https://api.github.com/users/dgquintas/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dgquintas/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-20T18:17:01Z",
    "updated_at": "2018-05-20T18:17:01Z",
    "author_association": "NONE",
    "body": "What I've found out is that, for msan builds (it doesn't repro for asan, for example, neither for opt, etc), the completion queue [on this line](https://github.com/grpc/grpc/blob/2266fd4f51735e39b5298c1b6cb688206edd2726/test/core/end2end/fuzzers/server_fuzzer.cc#L107) contains events of type TIMEOUT instead of COMPLETE. Apparently @jtattermusch already encountered this problem in the past. My guess is that the delays introduced by msan affects when things are put into the completion queue, so that when we go and do a cq_next at a point where the event should logically be in the CQ, it still is not. @sreecha , do you think this is a plausible scenario?  "
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/390659814",
    "html_url": "https://github.com/grpc/grpc/issues/15458#issuecomment-390659814",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15458",
    "id": 390659814,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MDY1OTgxNA==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-21T13:52:16Z",
    "updated_at": "2018-05-21T13:52:16Z",
    "author_association": "CONTRIBUTOR",
    "body": "have we tried to debug with gdb?"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/390827979",
    "html_url": "https://github.com/grpc/grpc/issues/15458#issuecomment-390827979",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15458",
    "id": 390827979,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MDgyNzk3OQ==",
    "user": {
      "login": "yashykt",
      "id": 4181124,
      "node_id": "MDQ6VXNlcjQxODExMjQ=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/4181124?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yashykt",
      "html_url": "https://github.com/yashykt",
      "followers_url": "https://api.github.com/users/yashykt/followers",
      "following_url": "https://api.github.com/users/yashykt/following{/other_user}",
      "gists_url": "https://api.github.com/users/yashykt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yashykt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yashykt/subscriptions",
      "organizations_url": "https://api.github.com/users/yashykt/orgs",
      "repos_url": "https://api.github.com/users/yashykt/repos",
      "events_url": "https://api.github.com/users/yashykt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yashykt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-22T00:47:04Z",
    "updated_at": "2018-05-22T00:47:04Z",
    "author_association": "MEMBER",
    "body": "Do we have a way to reproduce this?"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/390828204",
    "html_url": "https://github.com/grpc/grpc/issues/15458#issuecomment-390828204",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15458",
    "id": 390828204,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MDgyODIwNA==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-22T00:48:42Z",
    "updated_at": "2018-05-22T00:48:42Z",
    "author_association": "CONTRIBUTOR",
    "body": "@yashykt  yes, just run the test under msan locally."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/390862721",
    "html_url": "https://github.com/grpc/grpc/issues/15458#issuecomment-390862721",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15458",
    "id": 390862721,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MDg2MjcyMQ==",
    "user": {
      "login": "yashykt",
      "id": 4181124,
      "node_id": "MDQ6VXNlcjQxODExMjQ=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/4181124?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yashykt",
      "html_url": "https://github.com/yashykt",
      "followers_url": "https://api.github.com/users/yashykt/followers",
      "following_url": "https://api.github.com/users/yashykt/following{/other_user}",
      "gists_url": "https://api.github.com/users/yashykt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yashykt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yashykt/subscriptions",
      "organizations_url": "https://api.github.com/users/yashykt/orgs",
      "repos_url": "https://api.github.com/users/yashykt/repos",
      "events_url": "https://api.github.com/users/yashykt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yashykt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-22T04:56:35Z",
    "updated_at": "2018-05-22T04:56:35Z",
    "author_association": "MEMBER",
    "body": "Here's what happens on a normal run -\r\n1) The server requests a call with a tag of 1.\r\n2) The data provided by the fuzzer is written to the server.\r\n3) The server performs a cq_next to perform the READ_INITIAL_METADATA op. The op completes and the cq returns GRPC_OP_COMPLETE with the tag of 1.\r\n4) The server performs another cq_next which ends in a GRPC_QUEUE_TIMEOUT.\r\n5) The server then begins shutdown by calling grpc_server_shutdown_and_notify and then cancels all calls.\r\n6) It performs another cq_next and expects to receive GRPC_OP_COMPLETE with the shutdown tag.\r\n7) Finally, it shuts down its completion queues and performs another cq_next expecting the GRPC_QUEUE_SHUTDOWN result.\r\n\r\nIn the error case, a deadline timer is started after reading the initial metadata. This deadline timer fires and the timer thread grabs a few references to the call stack and tries to perform a CANCEL op. While this is progress, the server tries to complete steps 5 and 6, but since the timer thread is owning references to the callstack, the server thread cannot finish shutting down with a single non-polling completion queue. It needs to wait for the timer thread to give up the references before finishing."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/391166187",
    "html_url": "https://github.com/grpc/grpc/issues/15458#issuecomment-391166187",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15458",
    "id": 391166187,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MTE2NjE4Nw==",
    "user": {
      "login": "yashykt",
      "id": 4181124,
      "node_id": "MDQ6VXNlcjQxODExMjQ=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/4181124?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yashykt",
      "html_url": "https://github.com/yashykt",
      "followers_url": "https://api.github.com/users/yashykt/followers",
      "following_url": "https://api.github.com/users/yashykt/following{/other_user}",
      "gists_url": "https://api.github.com/users/yashykt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yashykt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yashykt/subscriptions",
      "organizations_url": "https://api.github.com/users/yashykt/orgs",
      "repos_url": "https://api.github.com/users/yashykt/repos",
      "events_url": "https://api.github.com/users/yashykt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yashykt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-22T22:53:18Z",
    "updated_at": "2018-05-22T22:53:18Z",
    "author_association": "MEMBER",
    "body": "@jtattermusch (message stuck in drafts)\r\nThanks! It failed quite early with an antagonist setting of 20 :D"
  }
]
