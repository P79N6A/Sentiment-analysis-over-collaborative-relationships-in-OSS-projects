[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/469319536",
    "html_url": "https://github.com/grpc/grpc/issues/18233#issuecomment-469319536",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/18233",
    "id": 469319536,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2OTMxOTUzNg==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-04T16:33:01Z",
    "updated_at": "2019-03-04T16:33:01Z",
    "author_association": "CONTRIBUTOR",
    "body": "not sure what you mean by \"status monitoring\", but it looks like you should just use ServerCallContext.CancellationToken to get the signal you need. On the server side, this signals that the call was interrupted with an error (client cancelled, connections lost, ..) and that's all the information you can get. The status is only sent from the server to the client, so there's no way of providing more details about the nature of an error (and it's probably also not very useful for the server to know).\r\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/469392215",
    "html_url": "https://github.com/grpc/grpc/issues/18233#issuecomment-469392215",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/18233",
    "id": 469392215,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2OTM5MjIxNQ==",
    "user": {
      "login": "rolfik",
      "id": 4658651,
      "node_id": "MDQ6VXNlcjQ2NTg2NTE=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/4658651?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rolfik",
      "html_url": "https://github.com/rolfik",
      "followers_url": "https://api.github.com/users/rolfik/followers",
      "following_url": "https://api.github.com/users/rolfik/following{/other_user}",
      "gists_url": "https://api.github.com/users/rolfik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rolfik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rolfik/subscriptions",
      "organizations_url": "https://api.github.com/users/rolfik/orgs",
      "repos_url": "https://api.github.com/users/rolfik/repos",
      "events_url": "https://api.github.com/users/rolfik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rolfik/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-04T19:39:34Z",
    "updated_at": "2019-03-04T19:41:18Z",
    "author_association": "NONE",
    "body": "Actually I am testing gRPC server streaming to clients.\r\n\r\nClients connect to server via rpc call getting server stream of notifications.\r\nServer notifies connected clients.\r\nI have found that some response streams used by the server may become unusable during client restarts etc. even though I discard response streams when the ServerCallContext.CancellationToken signals its cancellation...\r\n\r\nHow to detect client disconnection in such server streaming calls?\r\nHow to detect server disconnection in such server stream consumptions by clients?\r\nI want to automatically reconnect clients to notification streams whenever connection to server is lost (server restarts etc.)."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/469402627",
    "html_url": "https://github.com/grpc/grpc/issues/18233#issuecomment-469402627",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/18233",
    "id": 469402627,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2OTQwMjYyNw==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-04T20:07:20Z",
    "updated_at": "2019-03-04T20:07:20Z",
    "author_association": "CONTRIBUTOR",
    "body": "when a TCP/IP connection breaks, it necessarily makes the RPC fail (and you might want to setup RPC keepalive intervals or just send heartbeat messages yourself).\r\n- on the serverside, the serverCallContext.CancellationToken will be triggered.\r\n- on client side, you'll see the call end with an error status. If that's what you see, just start a new RPC on the client.\r\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/469712796",
    "html_url": "https://github.com/grpc/grpc/issues/18233#issuecomment-469712796",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/18233",
    "id": 469712796,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2OTcxMjc5Ng==",
    "user": {
      "login": "rolfik",
      "id": 4658651,
      "node_id": "MDQ6VXNlcjQ2NTg2NTE=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/4658651?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rolfik",
      "html_url": "https://github.com/rolfik",
      "followers_url": "https://api.github.com/users/rolfik/followers",
      "following_url": "https://api.github.com/users/rolfik/following{/other_user}",
      "gists_url": "https://api.github.com/users/rolfik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rolfik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rolfik/subscriptions",
      "organizations_url": "https://api.github.com/users/rolfik/orgs",
      "repos_url": "https://api.github.com/users/rolfik/repos",
      "events_url": "https://api.github.com/users/rolfik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rolfik/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-05T15:01:40Z",
    "updated_at": "2019-03-05T15:05:29Z",
    "author_association": "NONE",
    "body": "@jtattermusch Thank you for the comments.\r\n\r\nI have isolated my gRPC testing into separate solution:\r\nhttps://github.com/rolfik/gRPC.Test\r\n\r\nThe problem I had was caused in my Monitor method server implementation returning with completed Task just after registering a calling client internally and later notifications were written by server to the provided response streams - at that time, those streams were not usable anymore.\r\nSee that implementation at:\r\nhttps://github.com/rolfik/gRPC.Test/tree/452205410718b733f4404300223f9d0210fc96ad\r\n\r\nAfter adding helper ServerStreamingCall wrapper to wrap client calls on server and returning uncompleted ServerStreamingCall.Task from server Monitor method, all started to work as expected:\r\n- after closing clients, server receives cancellation via ServerCallContext.CancellationToken\r\n- after restarting server, clients reconnect after failures via new Monitor server calls\r\n\r\nNow I wonder how to do your suggestions in the gRPC C# framework:\r\n\r\n> when a TCP/IP connection breaks, it necessarily makes the RPC fail (and you might want to setup RPC keepalive intervals or just send heartbeat messages yourself).\r\n\r\nWhen server notifies clients via response streams about changes occasionally, will the connection be kept alive by the framework like in WCF, or will it break after some idle time?\r\nWhat are the gRPC settings regarding this?\r\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/470055958",
    "html_url": "https://github.com/grpc/grpc/issues/18233#issuecomment-470055958",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/18233",
    "id": 470055958,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3MDA1NTk1OA==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-06T10:32:06Z",
    "updated_at": "2019-03-06T10:32:06Z",
    "author_association": "CONTRIBUTOR",
    "body": "https://github.com/grpc/grpc/blob/56006f0c532fd98a2b327852c763778279616e01/doc/keepalive.md\r\n\r\nall these options can be used from C# via ChannelOptions."
  }
]
