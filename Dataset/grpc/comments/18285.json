[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/473149581",
    "html_url": "https://github.com/grpc/grpc/pull/18285#issuecomment-473149581",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/18285",
    "id": 473149581,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3MzE0OTU4MQ==",
    "user": {
      "login": "apolcyn",
      "id": 9566254,
      "node_id": "MDQ6VXNlcjk1NjYyNTQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9566254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apolcyn",
      "html_url": "https://github.com/apolcyn",
      "followers_url": "https://api.github.com/users/apolcyn/followers",
      "following_url": "https://api.github.com/users/apolcyn/following{/other_user}",
      "gists_url": "https://api.github.com/users/apolcyn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apolcyn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apolcyn/subscriptions",
      "organizations_url": "https://api.github.com/users/apolcyn/orgs",
      "repos_url": "https://api.github.com/users/apolcyn/repos",
      "events_url": "https://api.github.com/users/apolcyn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apolcyn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-15T03:53:03Z",
    "updated_at": "2019-03-15T03:53:03Z",
    "author_association": "CONTRIBUTOR",
    "body": "While looking into a test, noticed that the `is_msvc` introduced in this PR always evaluates truthy, so [this line](https://github.com/grpc/grpc/blob/master/bazel/grpc_build_system.bzl#L172) is always false, and so we're not running tests with all POLLERS anymore.\r\n\r\nCan we fix forward soon, or revert this PR?"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/473157678",
    "html_url": "https://github.com/grpc/grpc/pull/18285#issuecomment-473157678",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/18285",
    "id": 473157678,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3MzE1NzY3OA==",
    "user": {
      "login": "nicolasnoble",
      "id": 7281574,
      "node_id": "MDQ6VXNlcjcyODE1NzQ=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/7281574?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nicolasnoble",
      "html_url": "https://github.com/nicolasnoble",
      "followers_url": "https://api.github.com/users/nicolasnoble/followers",
      "following_url": "https://api.github.com/users/nicolasnoble/following{/other_user}",
      "gists_url": "https://api.github.com/users/nicolasnoble/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nicolasnoble/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nicolasnoble/subscriptions",
      "organizations_url": "https://api.github.com/users/nicolasnoble/orgs",
      "repos_url": "https://api.github.com/users/nicolasnoble/repos",
      "events_url": "https://api.github.com/users/nicolasnoble/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nicolasnoble/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-15T04:48:24Z",
    "updated_at": "2019-03-15T04:48:24Z",
    "author_association": "CONTRIBUTOR",
    "body": "Can you explain how it always evaluates truthy?"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/473162107",
    "html_url": "https://github.com/grpc/grpc/pull/18285#issuecomment-473162107",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/18285",
    "id": 473162107,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3MzE2MjEwNw==",
    "user": {
      "login": "apolcyn",
      "id": 9566254,
      "node_id": "MDQ6VXNlcjk1NjYyNTQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9566254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apolcyn",
      "html_url": "https://github.com/apolcyn",
      "followers_url": "https://api.github.com/users/apolcyn/followers",
      "following_url": "https://api.github.com/users/apolcyn/following{/other_user}",
      "gists_url": "https://api.github.com/users/apolcyn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apolcyn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apolcyn/subscriptions",
      "organizations_url": "https://api.github.com/users/apolcyn/orgs",
      "repos_url": "https://api.github.com/users/apolcyn/repos",
      "events_url": "https://api.github.com/users/apolcyn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apolcyn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-15T05:18:19Z",
    "updated_at": "2019-03-15T07:17:37Z",
    "author_association": "CONTRIBUTOR",
    "body": "AFAIU, basically the behavior of `select` in bazel is unintuitive, and it only works how one would think it would when used in an attribute assignment statement. Outside of one, like in:\r\n\r\n```\r\nif uses_polling and not is_msvc():\r\n```\r\n\r\nit evaluates to this bazel select object, which is truthy."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/473163156",
    "html_url": "https://github.com/grpc/grpc/pull/18285#issuecomment-473163156",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/18285",
    "id": 473163156,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3MzE2MzE1Ng==",
    "user": {
      "login": "apolcyn",
      "id": 9566254,
      "node_id": "MDQ6VXNlcjk1NjYyNTQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9566254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apolcyn",
      "html_url": "https://github.com/apolcyn",
      "followers_url": "https://api.github.com/users/apolcyn/followers",
      "following_url": "https://api.github.com/users/apolcyn/following{/other_user}",
      "gists_url": "https://api.github.com/users/apolcyn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apolcyn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apolcyn/subscriptions",
      "organizations_url": "https://api.github.com/users/apolcyn/orgs",
      "repos_url": "https://api.github.com/users/apolcyn/repos",
      "events_url": "https://api.github.com/users/apolcyn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apolcyn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-15T05:25:34Z",
    "updated_at": "2019-03-15T05:25:34Z",
    "author_association": "CONTRIBUTOR",
    "body": "To repro, attempting to run a test like so:\r\n\r\n```\r\nbazel --bazelrc=tools/remote_build/manual.bazelrc test --config=asan //test/cpp/naming:cancel_ares_query_test@poller=epollex\r\n```\r\n\r\n.. failed with \"no such target '//test/cpp/naming:cancel_ares_query_test@poller=epollex'\"\r\n\r\nEditting `is_msvc` to hardcode a return value of `False`, and also editing [this line](https://github.com/grpc/grpc/blob/master/bazel/grpc_build_system.bzl#L173) to remove the explicit `tags` attribute setting (which was also added here), allows that test to run as normal/before."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/473343731",
    "html_url": "https://github.com/grpc/grpc/pull/18285#issuecomment-473343731",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/18285",
    "id": 473343731,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3MzM0MzczMQ==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-15T16:01:51Z",
    "updated_at": "2019-03-15T16:01:51Z",
    "author_association": "CONTRIBUTOR",
    "body": "@apolcyn  interesting finding! \r\nOne strange thing is that on master, I'm seeing some tests with other pollers running:\r\nhttps://source.cloud.google.com/results/invocations/42dd63a2-1cc5-4352-bf56-a3003654c8be/targets\r\nIn the target list I don't see the test you're mentioning though."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/473348625",
    "html_url": "https://github.com/grpc/grpc/pull/18285#issuecomment-473348625",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/18285",
    "id": 473348625,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3MzM0ODYyNQ==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-15T16:15:05Z",
    "updated_at": "2019-03-15T16:15:05Z",
    "author_association": "CONTRIBUTOR",
    "body": "I checked the foundry build history and some tests indeed stopped being run after merging this PR:\r\n\r\nSee build before:\r\nhttps://source.cloud.google.com/results/invocations/92976cb4-5c91-47b5-86e2-9c2af7b85d12/targets\r\nand after:\r\nhttps://source.cloud.google.com/results/invocations/870d918e-2ab8-48e7-a148-6c6642437976/targets\r\n\r\nThe diff:\r\nhttps://fusion.corp.google.com/projectanalysis/history/KOKORO/prod%3Agrpc%2Fcore%2Fmaster%2Flinux%2Fbazel_rbe%2Fremote_bazel_tests_dbg"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/473379793",
    "html_url": "https://github.com/grpc/grpc/pull/18285#issuecomment-473379793",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/18285",
    "id": 473379793,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3MzM3OTc5Mw==",
    "user": {
      "login": "apolcyn",
      "id": 9566254,
      "node_id": "MDQ6VXNlcjk1NjYyNTQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9566254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apolcyn",
      "html_url": "https://github.com/apolcyn",
      "followers_url": "https://api.github.com/users/apolcyn/followers",
      "following_url": "https://api.github.com/users/apolcyn/following{/other_user}",
      "gists_url": "https://api.github.com/users/apolcyn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apolcyn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apolcyn/subscriptions",
      "organizations_url": "https://api.github.com/users/apolcyn/orgs",
      "repos_url": "https://api.github.com/users/apolcyn/repos",
      "events_url": "https://api.github.com/users/apolcyn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apolcyn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-15T17:40:34Z",
    "updated_at": "2019-03-15T17:40:34Z",
    "author_association": "CONTRIBUTOR",
    "body": "Interesting, @jtattermusch it looks like all of the tests that were still running with `@<poller>` variations were from the C `test/core/end2end` framework - and those tests have their own way of generating bazel test rules: https://github.com/grpc/grpc/blob/master/test/core/end2end/generate_tests.bzl#L411.... so only tests that used `grpc_cc_test` were affected"
  }
]
