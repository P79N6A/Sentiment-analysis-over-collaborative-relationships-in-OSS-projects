[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/452015451",
    "html_url": "https://github.com/grpc/grpc/issues/17646#issuecomment-452015451",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/17646",
    "id": 452015451,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MjAxNTQ1MQ==",
    "user": {
      "login": "yihuazhang",
      "id": 26934891,
      "node_id": "MDQ6VXNlcjI2OTM0ODkx",
      "avatar_url": "https://avatars2.githubusercontent.com/u/26934891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yihuazhang",
      "html_url": "https://github.com/yihuazhang",
      "followers_url": "https://api.github.com/users/yihuazhang/followers",
      "following_url": "https://api.github.com/users/yihuazhang/following{/other_user}",
      "gists_url": "https://api.github.com/users/yihuazhang/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yihuazhang/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yihuazhang/subscriptions",
      "organizations_url": "https://api.github.com/users/yihuazhang/orgs",
      "repos_url": "https://api.github.com/users/yihuazhang/repos",
      "events_url": "https://api.github.com/users/yihuazhang/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yihuazhang/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-07T17:33:37Z",
    "updated_at": "2019-01-07T17:33:37Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thanks @jaaant for reporting the issue. \r\n\r\n1) When you say \"duplicates\", does it mean those certificates have the same content or different contents but for the same CA? In both cases, if all \"duplicate\" certificates are valid, I do not think there will be a problem. But, the problem happens when one of them is invalid (e.g., expired), and that's the one used for validation. \r\n\r\n2) gRPC also ships its own valid root certificate list, and is it possible to use them instead? \r\n\r\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/452040759",
    "html_url": "https://github.com/grpc/grpc/issues/17646#issuecomment-452040759",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/17646",
    "id": 452040759,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MjA0MDc1OQ==",
    "user": {
      "login": "yihuazhang",
      "id": 26934891,
      "node_id": "MDQ6VXNlcjI2OTM0ODkx",
      "avatar_url": "https://avatars2.githubusercontent.com/u/26934891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yihuazhang",
      "html_url": "https://github.com/yihuazhang",
      "followers_url": "https://api.github.com/users/yihuazhang/followers",
      "following_url": "https://api.github.com/users/yihuazhang/following{/other_user}",
      "gists_url": "https://api.github.com/users/yihuazhang/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yihuazhang/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yihuazhang/subscriptions",
      "organizations_url": "https://api.github.com/users/yihuazhang/orgs",
      "repos_url": "https://api.github.com/users/yihuazhang/repos",
      "events_url": "https://api.github.com/users/yihuazhang/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yihuazhang/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-07T18:52:06Z",
    "updated_at": "2019-01-07T18:52:22Z",
    "author_association": "CONTRIBUTOR",
    "body": "Let me take back my argument on 1. In `ssl_transport_security.cc`, it uses `X509_STORE_add_cert` to add each root certificate to the cert store, and if there is any duplication in contents,  `x509_store_load_certs` will return an error. So I assume in your use case, all duplicates will have the same contents. "
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/452214157",
    "html_url": "https://github.com/grpc/grpc/issues/17646#issuecomment-452214157",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/17646",
    "id": 452214157,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MjIxNDE1Nw==",
    "user": {
      "login": "jaaant",
      "id": 46447092,
      "node_id": "MDQ6VXNlcjQ2NDQ3MDky",
      "avatar_url": "https://avatars3.githubusercontent.com/u/46447092?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jaaant",
      "html_url": "https://github.com/jaaant",
      "followers_url": "https://api.github.com/users/jaaant/followers",
      "following_url": "https://api.github.com/users/jaaant/following{/other_user}",
      "gists_url": "https://api.github.com/users/jaaant/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jaaant/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jaaant/subscriptions",
      "organizations_url": "https://api.github.com/users/jaaant/orgs",
      "repos_url": "https://api.github.com/users/jaaant/repos",
      "events_url": "https://api.github.com/users/jaaant/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jaaant/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-08T08:28:40Z",
    "updated_at": "2019-01-08T08:28:40Z",
    "author_association": "NONE",
    "body": "1. The problem is indeed caused by same certificate contents. It is not a validation failure; the client doesn't even initiate a TCP connection, and never sees the server certificate.\r\n\r\n2. The built-in certificate list is probably not going to be sufficient for our purposes. In any case, we can use the Windows certificate store now that we filter out the duplicates, but the issue might cause trouble for other users."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/452408931",
    "html_url": "https://github.com/grpc/grpc/issues/17646#issuecomment-452408931",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/17646",
    "id": 452408931,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MjQwODkzMQ==",
    "user": {
      "login": "yihuazhang",
      "id": 26934891,
      "node_id": "MDQ6VXNlcjI2OTM0ODkx",
      "avatar_url": "https://avatars2.githubusercontent.com/u/26934891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yihuazhang",
      "html_url": "https://github.com/yihuazhang",
      "followers_url": "https://api.github.com/users/yihuazhang/followers",
      "following_url": "https://api.github.com/users/yihuazhang/following{/other_user}",
      "gists_url": "https://api.github.com/users/yihuazhang/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yihuazhang/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yihuazhang/subscriptions",
      "organizations_url": "https://api.github.com/users/yihuazhang/orgs",
      "repos_url": "https://api.github.com/users/yihuazhang/repos",
      "events_url": "https://api.github.com/users/yihuazhang/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yihuazhang/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-08T18:48:15Z",
    "updated_at": "2019-01-08T18:48:15Z",
    "author_association": "CONTRIBUTOR",
    "body": "Could you please try #17664, and see if the problem goes away? "
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/452615395",
    "html_url": "https://github.com/grpc/grpc/issues/17646#issuecomment-452615395",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/17646",
    "id": 452615395,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MjYxNTM5NQ==",
    "user": {
      "login": "jaaant",
      "id": 46447092,
      "node_id": "MDQ6VXNlcjQ2NDQ3MDky",
      "avatar_url": "https://avatars3.githubusercontent.com/u/46447092?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jaaant",
      "html_url": "https://github.com/jaaant",
      "followers_url": "https://api.github.com/users/jaaant/followers",
      "following_url": "https://api.github.com/users/jaaant/following{/other_user}",
      "gists_url": "https://api.github.com/users/jaaant/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jaaant/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jaaant/subscriptions",
      "organizations_url": "https://api.github.com/users/jaaant/orgs",
      "repos_url": "https://api.github.com/users/jaaant/repos",
      "events_url": "https://api.github.com/users/jaaant/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jaaant/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-09T08:40:33Z",
    "updated_at": "2019-01-09T08:40:33Z",
    "author_association": "NONE",
    "body": "That does seem to fix the problem."
  }
]
