[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/382784329",
    "html_url": "https://github.com/grpc/grpc/issues/15118#issuecomment-382784329",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15118",
    "id": 382784329,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4Mjc4NDMyOQ==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-19T15:44:04Z",
    "updated_at": "2018-04-19T15:44:04Z",
    "author_association": "CONTRIBUTOR",
    "body": "@AspirinSJL   any ideas?"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/382785012",
    "html_url": "https://github.com/grpc/grpc/issues/15118#issuecomment-382785012",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15118",
    "id": 382785012,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4Mjc4NTAxMg==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-19T15:46:09Z",
    "updated_at": "2018-04-19T15:46:09Z",
    "author_association": "CONTRIBUTOR",
    "body": "https://github.com/grpc/grpc/blob/959e04ffb8fceb7f3554131fbbf4e9a406615a01/src/core/ext/filters/client_channel/resolver/dns/native/dns_resolver.cc#L212"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/382798742",
    "html_url": "https://github.com/grpc/grpc/issues/15118#issuecomment-382798742",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15118",
    "id": 382798742,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4Mjc5ODc0Mg==",
    "user": {
      "login": "AspirinSJL",
      "id": 3314176,
      "node_id": "MDQ6VXNlcjMzMTQxNzY=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/3314176?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AspirinSJL",
      "html_url": "https://github.com/AspirinSJL",
      "followers_url": "https://api.github.com/users/AspirinSJL/followers",
      "following_url": "https://api.github.com/users/AspirinSJL/following{/other_user}",
      "gists_url": "https://api.github.com/users/AspirinSJL/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AspirinSJL/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AspirinSJL/subscriptions",
      "organizations_url": "https://api.github.com/users/AspirinSJL/orgs",
      "repos_url": "https://api.github.com/users/AspirinSJL/repos",
      "events_url": "https://api.github.com/users/AspirinSJL/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AspirinSJL/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-19T16:28:48Z",
    "updated_at": "2018-04-19T16:28:48Z",
    "author_association": "MEMBER",
    "body": "Sounds like a bug caused by re-resolution. Looking."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/382825874",
    "html_url": "https://github.com/grpc/grpc/issues/15118#issuecomment-382825874",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15118",
    "id": 382825874,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MjgyNTg3NA==",
    "user": {
      "login": "AspirinSJL",
      "id": 3314176,
      "node_id": "MDQ6VXNlcjMzMTQxNzY=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/3314176?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AspirinSJL",
      "html_url": "https://github.com/AspirinSJL",
      "followers_url": "https://api.github.com/users/AspirinSJL/followers",
      "following_url": "https://api.github.com/users/AspirinSJL/following{/other_user}",
      "gists_url": "https://api.github.com/users/AspirinSJL/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AspirinSJL/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AspirinSJL/subscriptions",
      "organizations_url": "https://api.github.com/users/AspirinSJL/orgs",
      "repos_url": "https://api.github.com/users/AspirinSJL/repos",
      "events_url": "https://api.github.com/users/AspirinSJL/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AspirinSJL/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-19T17:56:04Z",
    "updated_at": "2018-04-19T17:56:04Z",
    "author_association": "MEMBER",
    "body": "So this might be a bug in our implementation of DNS cooldown. \r\n\r\nAs I understand it, our resolution steps (timer starts, timer fires, start resolution, resolved, next resolution...) are sequential. But this bug shows that the timer may be on when we finishes a resolution. \r\n\r\nI checked the code about how the steps are managed. I don't see any apparent bug. \r\n\r\n@jtattermusch How should I reproduce this bug?"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/382837318",
    "html_url": "https://github.com/grpc/grpc/issues/15118#issuecomment-382837318",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15118",
    "id": 382837318,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MjgzNzMxOA==",
    "user": {
      "login": "AspirinSJL",
      "id": 3314176,
      "node_id": "MDQ6VXNlcjMzMTQxNzY=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/3314176?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AspirinSJL",
      "html_url": "https://github.com/AspirinSJL",
      "followers_url": "https://api.github.com/users/AspirinSJL/followers",
      "following_url": "https://api.github.com/users/AspirinSJL/following{/other_user}",
      "gists_url": "https://api.github.com/users/AspirinSJL/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AspirinSJL/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AspirinSJL/subscriptions",
      "organizations_url": "https://api.github.com/users/AspirinSJL/orgs",
      "repos_url": "https://api.github.com/users/AspirinSJL/repos",
      "events_url": "https://api.github.com/users/AspirinSJL/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AspirinSJL/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-19T18:33:38Z",
    "updated_at": "2018-04-19T18:33:38Z",
    "author_association": "MEMBER",
    "body": "My best guess without running any reproduction is that this is a timer race.\r\n\r\nThe closure of `on_next_resolution_`  is scheduled but not yet run, so `have_next_resolution_timer_` is still true. In the mean time, a re-resolution is requested and done, because it's passed the cooldown period. But the re-resolution fails quickly and triggers this assertion, before the `on_next_resolution_` closure is run. \r\n\r\nThis timing should be rare.. but possible. "
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/382978994",
    "html_url": "https://github.com/grpc/grpc/issues/15118#issuecomment-382978994",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15118",
    "id": 382978994,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4Mjk3ODk5NA==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-20T05:13:30Z",
    "updated_at": "2018-04-20T05:13:30Z",
    "author_association": "CONTRIBUTOR",
    "body": "I haven't really measured, but I estimate that in my setup I'm seeing this ~20% of time when all the backends go down - so quite often."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/382992072",
    "html_url": "https://github.com/grpc/grpc/issues/15118#issuecomment-382992072",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15118",
    "id": 382992072,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4Mjk5MjA3Mg==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-20T06:22:57Z",
    "updated_at": "2018-04-20T06:22:57Z",
    "author_association": "CONTRIBUTOR",
    "body": "More details about the repro.\r\n\r\nScenario 1 (works fine):\r\n1. start a client that tries to connect to a non-existent DNS name\r\n2. DNS resolution will fail, but the client keeps trying forever.\r\n\r\nScenario 2 (crashes):\r\n1. start a client that connects to a DNS name that resolves to 1 backend.\r\n2. client works normally\r\n3. remove the DNS record so that the name no longer resolves to any backends\r\n4. when a call is attempted, client will continue trying to re-resolve (because there are no backends), eventually hitting the assertion error (within a minute in my case).\r\n\r\nI'm testing this on Kubernetes cluster, where it's easy to create & remove DNS records for a backend by adding and removing replicas of a service. I start with replicas=1  and then scale down to replicas=2, which triggers Scenario 2."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/383116461",
    "html_url": "https://github.com/grpc/grpc/issues/15118#issuecomment-383116461",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15118",
    "id": 383116461,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MzExNjQ2MQ==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-20T14:36:02Z",
    "updated_at": "2018-04-20T14:36:02Z",
    "author_association": "CONTRIBUTOR",
    "body": "I was able to reproduce outside kubernetes environment.  Besides everything I stated above, lb_policy needs to be set to `round_robin` (I wasn't able to reproduce with `pick_first`)."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/383142420",
    "html_url": "https://github.com/grpc/grpc/issues/15118#issuecomment-383142420",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15118",
    "id": 383142420,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MzE0MjQyMA==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-20T16:00:23Z",
    "updated_at": "2018-04-20T16:00:23Z",
    "author_association": "CONTRIBUTOR",
    "body": "A detailed log  (some extra debug messages added;  first few times the ares resolution fails and re-resolution is scheduled, but eventually  `OnResolvedLocked()` is called when `r->have_next_resolution_timer_ is` still true   (before `OnNextResolutionLocked()` would set it to false.\r\nAs mentioned before, the same issue has been observed for both  ares resolver and the default DNS resolver, which makes me suspect that the bug is elsewhere in client_channel code (the problems seems specific to round_robin  LB policy).\r\n\r\n```\r\nD0420 17:15:05.698892 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/dns_resolver_ares.cc:291: AresDnsResolver::OnResolvedLocked() is called.\r\nD0420 17:15:05.699042 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/dns_resolver_ares.cc:339: dns resolution failed: {\"created\":\"@1524237305.698594518\",\"description\":\"C-ares TXT lookup status is not ARES_SUCCESS: Domain name not found\",\"file\":\"src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_wrapper.cc\",\"file_line\":362,\"referenced_errors\":[{\"created\":\"@1524237305.698535702\",\"description\":\"C-ares status is not ARES_SUCCESS: DNS server returned answer with no data\",\"file\":\"src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_wrapper.cc\",\"file_line\":258,\"referenced_errors\":[{\"created\":\"@1524237305.697032250\",\"description\":\"C-ares status is not ARES_SUCCESS: DNS server returned answer with no data\",\"file\":\"src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_wrapper.cc\",\"file_line\":258,\"referenced_errors\":[{\"created\":\"@1524237305.690343974\",\"description\":\"C-ares status is not ARES_SUCCESS: Domain name not found\",\"file\":\"src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_wrapper.cc\",\"file_line\":303}]}]}]}\r\nI0420 17:15:05.699232 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/dns_resolver_ares.cc:342: dns resolution failed (will retry): {\"created\":\"@1524237305.698594518\",\"description\":\"C-ares TXT lookup status is not ARES_SUCCESS: Domain name not found\",\"file\":\"src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_wrapper.cc\",\"file_line\":362,\"referenced_errors\":[{\"created\":\"@1524237305.698535702\",\"description\":\"C-ares status is not ARES_SUCCESS: DNS server returned answer with no data\",\"file\":\"src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_wrapper.cc\",\"file_line\":258,\"referenced_errors\":[{\"created\":\"@1524237305.697032250\",\"description\":\"C-ares status is not ARES_SUCCESS: DNS server returned answer with no data\",\"file\":\"src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_wrapper.cc\",\"file_line\":258,\"referenced_errors\":[{\"created\":\"@1524237305.690343974\",\"description\":\"C-ares status is not ARES_SUCCESS: Domain name not found\",\"file\":\"src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_wrapper.cc\",\"file_line\":303}]}]}]}\r\nD0420 17:15:05.699319 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/dns_resolver_ares.cc:345: set: have_next_resolution_timer_ = true\r\nD0420 17:15:05.699369 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/dns_resolver_ares.cc:353: retrying in 1000 milliseconds\r\nD0420 17:15:05.699421 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/dns_resolver_ares.cc:428: AresDnsResolver::MaybeFinishNextLocked() is called.\r\nD0420 17:15:05.699457 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/dns_resolver_ares.cc:433: AresDnsResolver::MaybeFinishNextLocked()\r\nD0420 17:15:05.699501 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/dns_resolver_ares.cc:367: AresDnsResolver::OnResolvedLocked() returning.\r\nD0420 17:15:05.699557 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/dns_resolver_ares.cc:174: AresDnsResolver::NextLocked() is called.\r\nD0420 17:15:05.699600 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/dns_resolver_ares.cc:428: AresDnsResolver::MaybeFinishNextLocked() is called.\r\nI0420 17:15:06.687484 139938741843712 src/core/ext/filters/client_channel/subchannel.cc:425: Failed to connect to channel, retrying\r\nI0420 17:15:06.687936 139938741843712 src/core/ext/filters/client_channel/subchannel.cc:646: Connect failed: {\"created\":\"@1524237306.687846768\",\"description\":\"Failed to connect to remote host: OS Error\",\"errno\":111,\"file\":\"src/core/lib/iomgr/tcp_client_posix.cc\",\"file_line\":201,\"os_error\":\"Connection refused\",\"syscall\":\"connect\",\"target_address\":\"ipv4:127.0.0.1:23456\"}\r\nI0420 17:15:06.688040 139938741843712 src/core/ext/filters/client_channel/subchannel.cc:470: Subchannel 0x7f4600008ee0: Retry in 1332 milliseconds\r\nD0420 17:15:06.688128 139938741843712 src/core/ext/filters/client_channel/resolver/dns/c_ares/dns_resolver_ares.cc:371: AresDnsResolver::MaybeStartResolvingLocked() is called.\r\nD0420 17:15:06.688345 139938741843712 src/core/ext/filters/client_channel/resolver/dns/c_ares/dns_resolver_ares.cc:409: AresDnsResolver::StartResolvingLocked() is called.\r\nD0420 17:15:06.688620 139938741843712 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:131: grpc_ares_ev_driver_create\r\nI0420 17:15:06.688678 139938741843712 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_wrapper.cc:423: Using DNS server 127.0.0.1:12345\r\nD0420 17:15:06.688941 139938741843712 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:286: new fd: 11\r\nD0420 17:15:06.689021 139938741843712 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:84: Ref ev_driver 139938087578480\r\nD0420 17:15:06.689102 139938741843712 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:308: notify read on: 11\r\nD0420 17:15:06.689150 139938741843712 src/core/ext/filters/client_channel/resolver/dns/c_ares/dns_resolver_ares.cc:424: AresDnsResolver::StartResolvingLocked() returning.\r\nD0420 17:15:06.689201 139938741843712 src/core/ext/filters/client_channel/resolver/dns/c_ares/dns_resolver_ares.cc:405: AresDnsResolver::MaybeStartResolvingLocked() returning.\r\nD0420 17:15:06.693994 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:213: readable on 11\r\nD0420 17:15:06.694268 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_wrapper.cc:274: on_query_srv_done_cb\r\nD0420 17:15:06.694469 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:84: Ref ev_driver 139938087578480\r\nD0420 17:15:06.694623 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:308: notify read on: 11\r\nD0420 17:15:06.694758 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:90: Unref ev_driver 139938087578480\r\nD0420 17:15:06.694937 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:213: readable on 11\r\nD0420 17:15:06.695232 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:84: Ref ev_driver 139938087578480\r\nD0420 17:15:06.695386 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:308: notify read on: 11\r\nD0420 17:15:06.695521 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:90: Unref ev_driver 139938087578480\r\nD0420 17:15:06.695666 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:213: readable on 11\r\nD0420 17:15:06.695863 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:84: Ref ev_driver 139938087578480\r\nD0420 17:15:06.696003 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:308: notify read on: 11\r\nD0420 17:15:06.696141 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:90: Unref ev_driver 139938087578480\r\nD0420 17:15:06.696291 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:213: readable on 11\r\nD0420 17:15:06.696474 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:84: Ref ev_driver 139938087578480\r\nD0420 17:15:06.696617 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:308: notify read on: 11\r\nD0420 17:15:06.696758 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:90: Unref ev_driver 139938087578480\r\nD0420 17:15:06.696903 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:213: readable on 11\r\nD0420 17:15:06.697106 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:84: Ref ev_driver 139938087578480\r\nD0420 17:15:06.697220 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:308: notify read on: 11\r\nD0420 17:15:06.697263 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:90: Unref ev_driver 139938087578480\r\nD0420 17:15:06.697605 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:213: readable on 11\r\nD0420 17:15:06.697711 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:84: Ref ev_driver 139938087578480\r\nD0420 17:15:06.697750 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:308: notify read on: 11\r\nD0420 17:15:06.697785 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:90: Unref ev_driver 139938087578480\r\nD0420 17:15:06.698148 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:213: readable on 11\r\nD0420 17:15:06.698267 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:84: Ref ev_driver 139938087578480\r\nD0420 17:15:06.698316 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:308: notify read on: 11\r\nD0420 17:15:06.698372 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:90: Unref ev_driver 139938087578480\r\nD0420 17:15:06.698453 139938972559104 src/core/ext/filters/client_channel/resolver/dns/c_ares/dns_resolver_ares.cc:207: AresDnsResolver::OnNextResolutionLocked() is called.\r\nD0420 17:15:06.698504 139938972559104 src/core/ext/filters/client_channel/resolver/dns/c_ares/dns_resolver_ares.cc:209: set: have_next_resolution_timer_ = false\r\nD0420 17:15:06.698567 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:213: readable on 11\r\nException caught Status(StatusCode=Unavailable, Detail=\"Connect Failed\")\r\nD0420 17:15:06.698647 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:84: Ref ev_driver 139938087578480\r\nD0420 17:15:06.698691 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:308: notify read on: 11\r\nD0420 17:15:06.698728 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:90: Unref ev_driver 139938087578480\r\nD0420 17:15:06.698954 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:213: readable on 11\r\nD0420 17:15:06.699031 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:84: Ref ev_driver 139938087578480\r\nD0420 17:15:06.699067 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:308: notify read on: 11\r\nD0420 17:15:06.699100 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:90: Unref ev_driver 139938087578480\r\nD0420 17:15:06.699339 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:213: readable on 11\r\nD0420 17:15:06.699410 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:84: Ref ev_driver 139938087578480\r\nD0420 17:15:06.699445 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:308: notify read on: 11\r\nD0420 17:15:06.699479 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:90: Unref ev_driver 139938087578480\r\nD0420 17:15:06.699701 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:213: readable on 11\r\nD0420 17:15:06.699793 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:84: Ref ev_driver 139938087578480\r\nD0420 17:15:06.699832 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:308: notify read on: 11\r\nD0420 17:15:06.699865 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:90: Unref ev_driver 139938087578480\r\nD0420 17:15:06.700083 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:213: readable on 11\r\nD0420 17:15:06.700151 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:84: Ref ev_driver 139938087578480\r\nD0420 17:15:06.700196 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:308: notify read on: 11\r\nD0420 17:15:06.700230 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:90: Unref ev_driver 139938087578480\r\nD0420 17:15:06.700462 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:213: readable on 11\r\nD0420 17:15:06.700509 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:84: Ref ev_driver 139938087578480\r\nD0420 17:15:06.700553 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:308: notify read on: 11\r\nD0420 17:15:06.700586 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:90: Unref ev_driver 139938087578480\r\nD0420 17:15:06.700841 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:213: readable on 11\r\nD0420 17:15:06.700899 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:84: Ref ev_driver 139938087578480\r\nD0420 17:15:06.700931 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:308: notify read on: 11\r\nD0420 17:15:06.700968 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:90: Unref ev_driver 139938087578480\r\nD0420 17:15:06.701216 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:213: readable on 11\r\nD0420 17:15:06.701262 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_wrapper.cc:318: on_txt_done_cb\r\nD0420 17:15:06.701304 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:90: Unref ev_driver 139938087578480\r\nD0420 17:15:06.701365 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:101: delete fd: 11\r\nD0420 17:15:06.701396 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:338: ev driver stop working\r\nD0420 17:15:06.701433 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:90: Unref ev_driver 139938087578480\r\nD0420 17:15:06.701466 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:92: destroy ev_driver 139938087578480\r\nD0420 17:15:06.701534 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/dns_resolver_ares.cc:291: AresDnsResolver::OnResolvedLocked() is called.\r\nD0420 17:15:06.701644 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/dns_resolver_ares.cc:339: dns resolution failed: {\"created\":\"@1524237306.701292288\",\"description\":\"C-ares TXT lookup status is not ARES_SUCCESS: Domain name not found\",\"file\":\"src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_wrapper.cc\",\"file_line\":362,\"referenced_errors\":[{\"created\":\"@1524237306.700877450\",\"description\":\"C-ares status is not ARES_SUCCESS: DNS server returned answer with no data\",\"file\":\"src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_wrapper.cc\",\"file_line\":258,\"referenced_errors\":[{\"created\":\"@1524237306.700497340\",\"description\":\"C-ares status is not ARES_SUCCESS: DNS server returned answer with no data\",\"file\":\"src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_wrapper.cc\",\"file_line\":258,\"referenced_errors\":[{\"created\":\"@1524237306.694408200\",\"description\":\"C-ares status is not ARES_SUCCESS: Domain name not found\",\"file\":\"src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_wrapper.cc\",\"file_line\":303}]}]}]}\r\nI0420 17:15:06.701709 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/dns_resolver_ares.cc:342: dns resolution failed (will retry): {\"created\":\"@1524237306.701292288\",\"description\":\"C-ares TXT lookup status is not ARES_SUCCESS: Domain name not found\",\"file\":\"src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_wrapper.cc\",\"file_line\":362,\"referenced_errors\":[{\"created\":\"@1524237306.700877450\",\"description\":\"C-ares status is not ARES_SUCCESS: DNS server returned answer with no data\",\"file\":\"src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_wrapper.cc\",\"file_line\":258,\"referenced_errors\":[{\"created\":\"@1524237306.700497340\",\"description\":\"C-ares status is not ARES_SUCCESS: DNS server returned answer with no data\",\"file\":\"src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_wrapper.cc\",\"file_line\":258,\"referenced_errors\":[{\"created\":\"@1524237306.694408200\",\"description\":\"C-ares status is not ARES_SUCCESS: Domain name not found\",\"file\":\"src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_wrapper.cc\",\"file_line\":303}]}]}]}\r\nD0420 17:15:06.701762 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/dns_resolver_ares.cc:345: set: have_next_resolution_timer_ = true\r\nD0420 17:15:06.701803 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/dns_resolver_ares.cc:353: retrying in 1733 milliseconds\r\nD0420 17:15:06.701850 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/dns_resolver_ares.cc:428: AresDnsResolver::MaybeFinishNextLocked() is called.\r\nD0420 17:15:06.701880 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/dns_resolver_ares.cc:433: AresDnsResolver::MaybeFinishNextLocked()\r\nD0420 17:15:06.701918 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/dns_resolver_ares.cc:367: AresDnsResolver::OnResolvedLocked() returning.\r\nD0420 17:15:06.701968 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/dns_resolver_ares.cc:174: AresDnsResolver::NextLocked() is called.\r\nD0420 17:15:06.702003 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/dns_resolver_ares.cc:428: AresDnsResolver::MaybeFinishNextLocked() is called.\r\nI0420 17:15:08.019437 139938741843712 src/core/ext/filters/client_channel/subchannel.cc:425: Failed to connect to channel, retrying\r\nI0420 17:15:08.019948 139938964166400 src/core/ext/filters/client_channel/subchannel.cc:646: Connect failed: {\"created\":\"@1524237308.019819074\",\"description\":\"Failed to connect to remote host: OS Error\",\"errno\":111,\"file\":\"src/core/lib/iomgr/tcp_client_posix.cc\",\"file_line\":201,\"os_error\":\"Connection refused\",\"syscall\":\"connect\",\"target_address\":\"ipv4:127.0.0.1:23456\"}\r\nI0420 17:15:08.020055 139938964166400 src/core/ext/filters/client_channel/subchannel.cc:470: Subchannel 0x7f4600008ee0: Retry in 2386 milliseconds\r\nD0420 17:15:08.020120 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/dns_resolver_ares.cc:371: AresDnsResolver::MaybeStartResolvingLocked() is called.\r\nD0420 17:15:08.020161 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/dns_resolver_ares.cc:409: AresDnsResolver::StartResolvingLocked() is called.\r\nD0420 17:15:08.020385 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:131: grpc_ares_ev_driver_create\r\nI0420 17:15:08.020437 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_wrapper.cc:423: Using DNS server 127.0.0.1:12345\r\nD0420 17:15:08.020737 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:286: new fd: 11\r\nD0420 17:15:08.020813 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:84: Ref ev_driver 139938624478720\r\nD0420 17:15:08.020862 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:308: notify read on: 11\r\nD0420 17:15:08.020905 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/dns_resolver_ares.cc:424: AresDnsResolver::StartResolvingLocked() returning.\r\nD0420 17:15:08.020946 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/dns_resolver_ares.cc:405: AresDnsResolver::MaybeStartResolvingLocked() returning.\r\nException caught Status(StatusCode=Unavailable, Detail=\"Connect Failed\")\r\nD0420 17:15:08.021572 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:213: readable on 11\r\nD0420 17:15:08.021723 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:84: Ref ev_driver 139938624478720\r\nD0420 17:15:08.021782 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:308: notify read on: 11\r\nD0420 17:15:08.021823 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:90: Unref ev_driver 139938624478720\r\nD0420 17:15:08.022215 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:213: readable on 11\r\nD0420 17:15:08.022362 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:84: Ref ev_driver 139938624478720\r\nD0420 17:15:08.022422 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:308: notify read on: 11\r\nD0420 17:15:08.022462 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:90: Unref ev_driver 139938624478720\r\nD0420 17:15:08.022832 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:213: readable on 11\r\nD0420 17:15:08.022927 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_wrapper.cc:274: on_query_srv_done_cb\r\nD0420 17:15:08.023007 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:84: Ref ev_driver 139938624478720\r\nD0420 17:15:08.023048 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:308: notify read on: 11\r\nD0420 17:15:08.023097 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:90: Unref ev_driver 139938624478720\r\nD0420 17:15:08.023350 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:213: readable on 11\r\nD0420 17:15:08.023472 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:84: Ref ev_driver 139938624478720\r\nD0420 17:15:08.023519 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:308: notify read on: 11\r\nD0420 17:15:08.023563 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:90: Unref ev_driver 139938624478720\r\nD0420 17:15:08.024294 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:213: readable on 11\r\nD0420 17:15:08.024452 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:84: Ref ev_driver 139938624478720\r\nD0420 17:15:08.024505 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:308: notify read on: 11\r\nD0420 17:15:08.024553 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:90: Unref ev_driver 139938624478720\r\nD0420 17:15:08.024824 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:213: readable on 11\r\nD0420 17:15:08.024945 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:84: Ref ev_driver 139938624478720\r\nD0420 17:15:08.024997 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:308: notify read on: 11\r\nD0420 17:15:08.025036 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:90: Unref ev_driver 139938624478720\r\nD0420 17:15:08.025442 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:213: readable on 11\r\nD0420 17:15:08.025582 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:84: Ref ev_driver 139938624478720\r\nD0420 17:15:08.025638 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:308: notify read on: 11\r\nD0420 17:15:08.025676 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:90: Unref ev_driver 139938624478720\r\nD0420 17:15:08.025951 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:213: readable on 11\r\nD0420 17:15:08.026049 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:84: Ref ev_driver 139938624478720\r\nD0420 17:15:08.026099 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:308: notify read on: 11\r\nD0420 17:15:08.026133 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:90: Unref ev_driver 139938624478720\r\nD0420 17:15:08.026501 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:213: readable on 11\r\nD0420 17:15:08.026605 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:84: Ref ev_driver 139938624478720\r\nD0420 17:15:08.026658 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:308: notify read on: 11\r\nD0420 17:15:08.026695 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:90: Unref ev_driver 139938624478720\r\nD0420 17:15:08.027091 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:213: readable on 11\r\nD0420 17:15:08.027239 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:84: Ref ev_driver 139938624478720\r\nD0420 17:15:08.027308 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:308: notify read on: 11\r\nD0420 17:15:08.027347 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:90: Unref ev_driver 139938624478720\r\nD0420 17:15:08.027609 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:213: readable on 11\r\nD0420 17:15:08.027708 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:84: Ref ev_driver 139938624478720\r\nD0420 17:15:08.027787 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:308: notify read on: 11\r\nD0420 17:15:08.027834 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:90: Unref ev_driver 139938624478720\r\nD0420 17:15:08.028285 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:213: readable on 11\r\nD0420 17:15:08.028430 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:84: Ref ev_driver 139938624478720\r\nD0420 17:15:08.028481 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:308: notify read on: 11\r\nD0420 17:15:08.028522 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:90: Unref ev_driver 139938624478720\r\nD0420 17:15:08.028798 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:213: readable on 11\r\nD0420 17:15:08.028905 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:84: Ref ev_driver 139938624478720\r\nD0420 17:15:08.028948 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:308: notify read on: 11\r\nD0420 17:15:08.028987 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:90: Unref ev_driver 139938624478720\r\nD0420 17:15:08.029387 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:213: readable on 11\r\nD0420 17:15:08.029536 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:84: Ref ev_driver 139938624478720\r\nD0420 17:15:08.029586 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:308: notify read on: 11\r\nD0420 17:15:08.029630 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:90: Unref ev_driver 139938624478720\r\nD0420 17:15:08.029879 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:213: readable on 11\r\nD0420 17:15:08.029987 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:84: Ref ev_driver 139938624478720\r\nD0420 17:15:08.030030 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:308: notify read on: 11\r\nD0420 17:15:08.030071 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:90: Unref ev_driver 139938624478720\r\nD0420 17:15:08.030434 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:213: readable on 11\r\nD0420 17:15:08.030541 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:84: Ref ev_driver 139938624478720\r\nD0420 17:15:08.030583 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:308: notify read on: 11\r\nD0420 17:15:08.030623 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:90: Unref ev_driver 139938624478720\r\nD0420 17:15:08.031006 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:213: readable on 11\r\nD0420 17:15:08.031127 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:84: Ref ev_driver 139938624478720\r\nD0420 17:15:08.031178 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:308: notify read on: 11\r\nD0420 17:15:08.031215 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:90: Unref ev_driver 139938624478720\r\nD0420 17:15:08.031566 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:213: readable on 11\r\nD0420 17:15:08.031642 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:84: Ref ev_driver 139938624478720\r\nD0420 17:15:08.031686 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:308: notify read on: 11\r\nD0420 17:15:08.031719 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:90: Unref ev_driver 139938624478720\r\nD0420 17:15:08.032175 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:213: readable on 11\r\nD0420 17:15:08.032262 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_wrapper.cc:318: on_txt_done_cb\r\nD0420 17:15:08.032322 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:90: Unref ev_driver 139938624478720\r\nD0420 17:15:08.032384 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:101: delete fd: 11\r\nD0420 17:15:08.032428 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:338: ev driver stop working\r\nD0420 17:15:08.032463 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:90: Unref ev_driver 139938624478720\r\nD0420 17:15:08.032500 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:92: destroy ev_driver 139938624478720\r\nD0420 17:15:08.032570 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/dns_resolver_ares.cc:291: AresDnsResolver::OnResolvedLocked() is called.\r\nD0420 17:15:08.032760 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/dns_resolver_ares.cc:339: dns resolution failed: {\"created\":\"@1524237308.032301259\",\"description\":\"C-ares TXT lookup status is not ARES_SUCCESS: Domain name not found\",\"file\":\"src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_wrapper.cc\",\"file_line\":362,\"referenced_errors\":[{\"created\":\"@1524237308.031622045\",\"description\":\"C-ares status is not ARES_SUCCESS: DNS server returned answer with no data\",\"file\":\"src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_wrapper.cc\",\"file_line\":258,\"referenced_errors\":[{\"created\":\"@1524237308.031101901\",\"description\":\"C-ares status is not ARES_SUCCESS: DNS server returned answer with no data\",\"file\":\"src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_wrapper.cc\",\"file_line\":258,\"referenced_errors\":[{\"created\":\"@1524237308.022980868\",\"description\":\"C-ares status is not ARES_SUCCESS: Domain name not found\",\"file\":\"src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_wrapper.cc\",\"file_line\":303}]}]}]}\r\nI0420 17:15:08.032860 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/dns_resolver_ares.cc:342: dns resolution failed (will retry): {\"created\":\"@1524237308.032301259\",\"description\":\"C-ares TXT lookup status is not ARES_SUCCESS: Domain name not found\",\"file\":\"src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_wrapper.cc\",\"file_line\":362,\"referenced_errors\":[{\"created\":\"@1524237308.031622045\",\"description\":\"C-ares status is not ARES_SUCCESS: DNS server returned answer with no data\",\"file\":\"src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_wrapper.cc\",\"file_line\":258,\"referenced_errors\":[{\"created\":\"@1524237308.031101901\",\"description\":\"C-ares status is not ARES_SUCCESS: DNS server returned answer with no data\",\"file\":\"src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_wrapper.cc\",\"file_line\":258,\"referenced_errors\":[{\"created\":\"@1524237308.022980868\",\"description\":\"C-ares status is not ARES_SUCCESS: Domain name not found\",\"file\":\"src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_wrapper.cc\",\"file_line\":303}]}]}]}\r\nE0420 17:15:08.033224 139938964166400 src/core/ext/filters/client_channel/resolver/dns/c_ares/dns_resolver_ares.cc:344: assertion failed: !r->have_next_resolution_timer_\r\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/383190353",
    "html_url": "https://github.com/grpc/grpc/issues/15118#issuecomment-383190353",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15118",
    "id": 383190353,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MzE5MDM1Mw==",
    "user": {
      "login": "AspirinSJL",
      "id": 3314176,
      "node_id": "MDQ6VXNlcjMzMTQxNzY=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/3314176?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AspirinSJL",
      "html_url": "https://github.com/AspirinSJL",
      "followers_url": "https://api.github.com/users/AspirinSJL/followers",
      "following_url": "https://api.github.com/users/AspirinSJL/following{/other_user}",
      "gists_url": "https://api.github.com/users/AspirinSJL/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AspirinSJL/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AspirinSJL/subscriptions",
      "organizations_url": "https://api.github.com/users/AspirinSJL/orgs",
      "repos_url": "https://api.github.com/users/AspirinSJL/repos",
      "events_url": "https://api.github.com/users/AspirinSJL/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AspirinSJL/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-20T18:55:41Z",
    "updated_at": "2018-04-20T18:55:41Z",
    "author_association": "MEMBER",
    "body": "I looked at the log above first, and I'm pretty sure the root cause lies in the cooldown code. \r\n\r\nThere is a conflict between the retry logic and the cooldown logic. If we already have a retry timer set when we receive a re-resolution request which falls behind the cooldown period, we will do re-resolution immediately. That is expected, but we also need to cancel the retry timer. Otherwise, when the re-resolution is done, we may find the timer is still on and trigger this assertion failure.\r\n\r\n@jtattermusch I will add a test to reproduce it using fake resolver response generator. It's very likely that it can be fixed within next week.\r\n\r\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/383193554",
    "html_url": "https://github.com/grpc/grpc/issues/15118#issuecomment-383193554",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15118",
    "id": 383193554,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MzE5MzU1NA==",
    "user": {
      "login": "AspirinSJL",
      "id": 3314176,
      "node_id": "MDQ6VXNlcjMzMTQxNzY=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/3314176?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AspirinSJL",
      "html_url": "https://github.com/AspirinSJL",
      "followers_url": "https://api.github.com/users/AspirinSJL/followers",
      "following_url": "https://api.github.com/users/AspirinSJL/following{/other_user}",
      "gists_url": "https://api.github.com/users/AspirinSJL/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AspirinSJL/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AspirinSJL/subscriptions",
      "organizations_url": "https://api.github.com/users/AspirinSJL/orgs",
      "repos_url": "https://api.github.com/users/AspirinSJL/repos",
      "events_url": "https://api.github.com/users/AspirinSJL/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AspirinSJL/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-20T19:08:40Z",
    "updated_at": "2018-04-20T19:08:40Z",
    "author_association": "MEMBER",
    "body": "This is the timeline according to the log above. You can see that the first round of re-resolution is fine because the retry timer is set for only 1s. But the next one will be 1.733s, so the timer remains active when the second re-resolution is done.\r\n\r\n![img_20180420_120152](https://user-images.githubusercontent.com/3314176/39069042-4a073846-4493-11e8-9ae6-f8728db3c2d9.jpg)\r\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/383216595",
    "html_url": "https://github.com/grpc/grpc/issues/15118#issuecomment-383216595",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15118",
    "id": 383216595,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MzIxNjU5NQ==",
    "user": {
      "login": "AspirinSJL",
      "id": 3314176,
      "node_id": "MDQ6VXNlcjMzMTQxNzY=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/3314176?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AspirinSJL",
      "html_url": "https://github.com/AspirinSJL",
      "followers_url": "https://api.github.com/users/AspirinSJL/followers",
      "following_url": "https://api.github.com/users/AspirinSJL/following{/other_user}",
      "gists_url": "https://api.github.com/users/AspirinSJL/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AspirinSJL/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AspirinSJL/subscriptions",
      "organizations_url": "https://api.github.com/users/AspirinSJL/orgs",
      "repos_url": "https://api.github.com/users/AspirinSJL/repos",
      "events_url": "https://api.github.com/users/AspirinSJL/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AspirinSJL/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-20T20:41:53Z",
    "updated_at": "2018-04-20T20:41:53Z",
    "author_association": "MEMBER",
    "body": "I just realized that the fake resolver we use in testing doesn't have any cooldown logic (because it doesn't need to do any real resolving). So I will just use the manual testing steps to verify the fix. "
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/383281820",
    "html_url": "https://github.com/grpc/grpc/issues/15118#issuecomment-383281820",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/15118",
    "id": 383281820,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MzI4MTgyMA==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-21T09:46:54Z",
    "updated_at": "2018-04-21T09:46:54Z",
    "author_association": "CONTRIBUTOR",
    "body": "@AspirinSJL  thanks for the analysis! I can help verifying the fix once we have a PR - just let me know."
  }
]
