[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/324658694",
    "html_url": "https://github.com/grpc/grpc/issues/12238#issuecomment-324658694",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/12238",
    "id": 324658694,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNDY1ODY5NA==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-24T14:51:37Z",
    "updated_at": "2017-08-24T14:51:51Z",
    "author_association": "CONTRIBUTOR",
    "body": "Seen same problem for csharp.Grpc.IntegrationTesting.GeneratedServiceBaseTest:\r\nhttps://sponge.corp.google.com/target?id=5add19b1-67fd-4938-a3cc-a6e2ca76e8a1&target=github/grpc/csharp_windows_dbg_native&searchFor=&show=FAILED&sortBy=STATUS"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/349719457",
    "html_url": "https://github.com/grpc/grpc/issues/12238#issuecomment-349719457",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/12238",
    "id": 349719457,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0OTcxOTQ1Nw==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-06T17:46:07Z",
    "updated_at": "2017-12-06T17:46:07Z",
    "author_association": "CONTRIBUTOR",
    "body": "The problem seems to be:\r\n```\r\n1) Error : Grpc.Core.Tests.ClientServerTest.Channel_ConnectAsync\r\nTearDown : System.AggregateException : One or more errors occurred.\r\n  ----> System.Exception : Shutdown check: Detected 1 pending batch completions.\r\n```\r\nI am able to reproduce locally. Investigating."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/350004876",
    "html_url": "https://github.com/grpc/grpc/issues/12238#issuecomment-350004876",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/12238",
    "id": 350004876,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MDAwNDg3Ng==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-07T15:40:46Z",
    "updated_at": "2017-12-07T15:54:18Z",
    "author_association": "CONTRIBUTOR",
    "body": "It looks like this is what's happening:\r\n1. channel is created, that immediately starts RunConnectivityWatcherAsync (which runs grpc_channel_watch_connectivity_state in a loop).\r\n2. the test succeeds, \r\n3. as part of cleanup, the grpc_channel_destroy is called, which immediately results in channel state change that wakes up RunConnectivityWatcherAsync, and that one immediately invokes \r\ngrpc_channel_watch_connectivity_state which registers a completion in a cq. \r\n4. that completion gets never returned from cq.next(), even though cq will be shutdown shortly.\r\n\r\nSo this looks like some kind of race between invoking grpc_channel_shutdown and grpc_channel_watch_connectivity_state, that results in the watch_connectivity_state completion to never be returned from the cq.\r\n"
  }
]
