[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/193782708",
    "html_url": "https://github.com/grpc/grpc/issues/5644#issuecomment-193782708",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/5644",
    "id": 193782708,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5Mzc4MjcwOA==",
    "user": {
      "login": "alamaison",
      "id": 596743,
      "node_id": "MDQ6VXNlcjU5Njc0Mw==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/596743?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alamaison",
      "html_url": "https://github.com/alamaison",
      "followers_url": "https://api.github.com/users/alamaison/followers",
      "following_url": "https://api.github.com/users/alamaison/following{/other_user}",
      "gists_url": "https://api.github.com/users/alamaison/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alamaison/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alamaison/subscriptions",
      "organizations_url": "https://api.github.com/users/alamaison/orgs",
      "repos_url": "https://api.github.com/users/alamaison/repos",
      "events_url": "https://api.github.com/users/alamaison/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alamaison/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-03-08T13:20:59Z",
    "updated_at": "2016-03-08T13:20:59Z",
    "author_association": "CONTRIBUTOR",
    "body": "CC @csdigi\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/193829678",
    "html_url": "https://github.com/grpc/grpc/issues/5644#issuecomment-193829678",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/5644",
    "id": 193829678,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5MzgyOTY3OA==",
    "user": {
      "login": "alamaison",
      "id": 596743,
      "node_id": "MDQ6VXNlcjU5Njc0Mw==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/596743?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alamaison",
      "html_url": "https://github.com/alamaison",
      "followers_url": "https://api.github.com/users/alamaison/followers",
      "following_url": "https://api.github.com/users/alamaison/following{/other_user}",
      "gists_url": "https://api.github.com/users/alamaison/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alamaison/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alamaison/subscriptions",
      "organizations_url": "https://api.github.com/users/alamaison/orgs",
      "repos_url": "https://api.github.com/users/alamaison/repos",
      "events_url": "https://api.github.com/users/alamaison/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alamaison/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-03-08T15:44:41Z",
    "updated_at": "2016-03-08T15:44:41Z",
    "author_association": "CONTRIBUTOR",
    "body": "Forgot to mention this is with 0.12\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/193881070",
    "html_url": "https://github.com/grpc/grpc/issues/5644#issuecomment-193881070",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/5644",
    "id": 193881070,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5Mzg4MTA3MA==",
    "user": {
      "login": "soltanmm",
      "id": 4889063,
      "node_id": "MDQ6VXNlcjQ4ODkwNjM=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/4889063?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/soltanmm",
      "html_url": "https://github.com/soltanmm",
      "followers_url": "https://api.github.com/users/soltanmm/followers",
      "following_url": "https://api.github.com/users/soltanmm/following{/other_user}",
      "gists_url": "https://api.github.com/users/soltanmm/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/soltanmm/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/soltanmm/subscriptions",
      "organizations_url": "https://api.github.com/users/soltanmm/orgs",
      "repos_url": "https://api.github.com/users/soltanmm/repos",
      "events_url": "https://api.github.com/users/soltanmm/events{/privacy}",
      "received_events_url": "https://api.github.com/users/soltanmm/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-03-08T17:32:35Z",
    "updated_at": "2016-03-08T17:33:07Z",
    "author_association": "CONTRIBUTOR",
    "body": "I believe this is a reference cycle being formed among classes with `__del__` methods (a lot of gRPC Python's classes). The Python GC never collects these objects because they have `__del__` methods and the only way to handle cycles is to arbitrarily break cycles thus making `__del__` invocations a Bad Ideaâ„¢. Underlying queues in gRPC core are thus never pumped, and thus the program never finishes.\n\nYou can avoid this by using the explicit `with` form of stubs.\n\n... Though I'm now of the opinion that we shouldn't even be allowing this kind of construction to begin with...\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/193883984",
    "html_url": "https://github.com/grpc/grpc/issues/5644#issuecomment-193883984",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/5644",
    "id": 193883984,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5Mzg4Mzk4NA==",
    "user": {
      "login": "alamaison",
      "id": 596743,
      "node_id": "MDQ6VXNlcjU5Njc0Mw==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/596743?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alamaison",
      "html_url": "https://github.com/alamaison",
      "followers_url": "https://api.github.com/users/alamaison/followers",
      "following_url": "https://api.github.com/users/alamaison/following{/other_user}",
      "gists_url": "https://api.github.com/users/alamaison/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alamaison/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alamaison/subscriptions",
      "organizations_url": "https://api.github.com/users/alamaison/orgs",
      "repos_url": "https://api.github.com/users/alamaison/repos",
      "events_url": "https://api.github.com/users/alamaison/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alamaison/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-03-08T17:40:31Z",
    "updated_at": "2016-03-08T17:40:39Z",
    "author_association": "CONTRIBUTOR",
    "body": "> You can avoid this by using the explicit with form of stubs\n\nIt's not clear how to use context management properly with futures.  A `while` block around `GetTest.future` results in `LocalShutdownError` again (unsurprising because that destroys the stub before the future has finished).  Explicitly calling `stub.__exit__()` in a callback registered with `add_done_callback` results in the same hang as before because, again, a reference to the stub is used in the callback.\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/193888906",
    "html_url": "https://github.com/grpc/grpc/issues/5644#issuecomment-193888906",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/5644",
    "id": 193888906,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5Mzg4ODkwNg==",
    "user": {
      "login": "soltanmm",
      "id": 4889063,
      "node_id": "MDQ6VXNlcjQ4ODkwNjM=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/4889063?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/soltanmm",
      "html_url": "https://github.com/soltanmm",
      "followers_url": "https://api.github.com/users/soltanmm/followers",
      "following_url": "https://api.github.com/users/soltanmm/following{/other_user}",
      "gists_url": "https://api.github.com/users/soltanmm/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/soltanmm/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/soltanmm/subscriptions",
      "organizations_url": "https://api.github.com/users/soltanmm/orgs",
      "repos_url": "https://api.github.com/users/soltanmm/repos",
      "events_url": "https://api.github.com/users/soltanmm/events{/privacy}",
      "received_events_url": "https://api.github.com/users/soltanmm/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-03-08T17:51:06Z",
    "updated_at": "2016-03-08T17:53:32Z",
    "author_association": "CONTRIBUTOR",
    "body": "One idea is to queue up your finished event in some other Python object and to use that object to exit the stub (externalizing the reference). You could alternatively make a [weak reference](https://docs.python.org/2/library/weakref.html) to the stub and use that in your callback instead (n.b. I've not tried this particular construction yet).\n\nAddendum: I'm not sure how the weak reference mechanism interacts with the garbage collector w.r.t. the `__del__` methods. I like to think that it'd behave similarly to C++'s `shared_ptr`/`weak_ptr` pair, but I've, again, not tried it yet.\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/224758946",
    "html_url": "https://github.com/grpc/grpc/issues/5644#issuecomment-224758946",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/5644",
    "id": 224758946,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyNDc1ODk0Ng==",
    "user": {
      "login": "hsaliak",
      "id": 150108,
      "node_id": "MDQ6VXNlcjE1MDEwOA==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/150108?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hsaliak",
      "html_url": "https://github.com/hsaliak",
      "followers_url": "https://api.github.com/users/hsaliak/followers",
      "following_url": "https://api.github.com/users/hsaliak/following{/other_user}",
      "gists_url": "https://api.github.com/users/hsaliak/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hsaliak/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hsaliak/subscriptions",
      "organizations_url": "https://api.github.com/users/hsaliak/orgs",
      "repos_url": "https://api.github.com/users/hsaliak/repos",
      "events_url": "https://api.github.com/users/hsaliak/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hsaliak/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-06-08T23:13:20Z",
    "updated_at": "2016-06-08T23:13:20Z",
    "author_association": "MEMBER",
    "body": "Probably fixed with the recent refactoring changes. \n@alamaison would you be able to verify?\nAssigning to @kpayson64 \n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/224890463",
    "html_url": "https://github.com/grpc/grpc/issues/5644#issuecomment-224890463",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/5644",
    "id": 224890463,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyNDg5MDQ2Mw==",
    "user": {
      "login": "alamaison",
      "id": 596743,
      "node_id": "MDQ6VXNlcjU5Njc0Mw==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/596743?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alamaison",
      "html_url": "https://github.com/alamaison",
      "followers_url": "https://api.github.com/users/alamaison/followers",
      "following_url": "https://api.github.com/users/alamaison/following{/other_user}",
      "gists_url": "https://api.github.com/users/alamaison/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alamaison/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alamaison/subscriptions",
      "organizations_url": "https://api.github.com/users/alamaison/orgs",
      "repos_url": "https://api.github.com/users/alamaison/repos",
      "events_url": "https://api.github.com/users/alamaison/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alamaison/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-06-09T13:14:23Z",
    "updated_at": "2016-06-09T13:14:23Z",
    "author_association": "CONTRIBUTOR",
    "body": "@hsaliak Confirmed this is fixed in latest master\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/225301663",
    "html_url": "https://github.com/grpc/grpc/issues/5644#issuecomment-225301663",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/5644",
    "id": 225301663,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyNTMwMTY2Mw==",
    "user": {
      "login": "kpayson64",
      "id": 18316330,
      "node_id": "MDQ6VXNlcjE4MzE2MzMw",
      "avatar_url": "https://avatars2.githubusercontent.com/u/18316330?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kpayson64",
      "html_url": "https://github.com/kpayson64",
      "followers_url": "https://api.github.com/users/kpayson64/followers",
      "following_url": "https://api.github.com/users/kpayson64/following{/other_user}",
      "gists_url": "https://api.github.com/users/kpayson64/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kpayson64/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kpayson64/subscriptions",
      "organizations_url": "https://api.github.com/users/kpayson64/orgs",
      "repos_url": "https://api.github.com/users/kpayson64/repos",
      "events_url": "https://api.github.com/users/kpayson64/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kpayson64/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-06-10T21:34:51Z",
    "updated_at": "2016-06-10T21:34:51Z",
    "author_association": "CONTRIBUTOR",
    "body": "I've also verified the fix.  The fix will be included in the 0.15 release.\n"
  }
]
