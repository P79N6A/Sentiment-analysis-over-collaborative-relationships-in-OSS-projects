[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/259176328",
    "html_url": "https://github.com/grpc/grpc/issues/8673#issuecomment-259176328",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/8673",
    "id": 259176328,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1OTE3NjMyOA==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-11-08T15:58:38Z",
    "updated_at": "2016-11-08T15:58:38Z",
    "author_association": "CONTRIBUTOR",
    "body": "To clarify the scope:\nIs this happening only with C#? If this also happens with other languages, it's most likely an issue in C core.\nIs it only Windows specific?\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/259179882",
    "html_url": "https://github.com/grpc/grpc/issues/8673#issuecomment-259179882",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/8673",
    "id": 259179882,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1OTE3OTg4Mg==",
    "user": {
      "login": "amitwaisel",
      "id": 21170412,
      "node_id": "MDQ6VXNlcjIxMTcwNDEy",
      "avatar_url": "https://avatars2.githubusercontent.com/u/21170412?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/amitwaisel",
      "html_url": "https://github.com/amitwaisel",
      "followers_url": "https://api.github.com/users/amitwaisel/followers",
      "following_url": "https://api.github.com/users/amitwaisel/following{/other_user}",
      "gists_url": "https://api.github.com/users/amitwaisel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/amitwaisel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/amitwaisel/subscriptions",
      "organizations_url": "https://api.github.com/users/amitwaisel/orgs",
      "repos_url": "https://api.github.com/users/amitwaisel/repos",
      "events_url": "https://api.github.com/users/amitwaisel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/amitwaisel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-11-08T16:10:36Z",
    "updated_at": "2016-11-08T16:10:36Z",
    "author_association": "NONE",
    "body": "It happens when the server is C# (but it might happen on other languages) and the clients are either C++ or C# (happens in both cases). It was tested only on Windows.\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/259180934",
    "html_url": "https://github.com/grpc/grpc/issues/8673#issuecomment-259180934",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/8673",
    "id": 259180934,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1OTE4MDkzNA==",
    "user": {
      "login": "ctiller",
      "id": 10120821,
      "node_id": "MDQ6VXNlcjEwMTIwODIx",
      "avatar_url": "https://avatars3.githubusercontent.com/u/10120821?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ctiller",
      "html_url": "https://github.com/ctiller",
      "followers_url": "https://api.github.com/users/ctiller/followers",
      "following_url": "https://api.github.com/users/ctiller/following{/other_user}",
      "gists_url": "https://api.github.com/users/ctiller/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ctiller/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ctiller/subscriptions",
      "organizations_url": "https://api.github.com/users/ctiller/orgs",
      "repos_url": "https://api.github.com/users/ctiller/repos",
      "events_url": "https://api.github.com/users/ctiller/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ctiller/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-11-08T16:14:15Z",
    "updated_at": "2016-11-08T16:14:15Z",
    "author_association": "MEMBER",
    "body": "Smells like a bug in the iomgr polling or endpoint code for Windows.\nConfirming it does or doesn't happen on another platform would be helpful.\n\nOn Tue, Nov 8, 2016 at 8:10 AM amitwaisel notifications@github.com wrote:\n\n> It happens when the server is C# (but it might happen on other languages)\n> and the clients are either C++ or C# (happens in both cases). It was tested\n> only on Windows.\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> https://github.com/grpc/grpc/issues/8673#issuecomment-259179882, or mute\n> the thread\n> https://github.com/notifications/unsubscribe-auth/AJpudWgZxm13MVwMy3rhFROx_GSDr2jGks5q8J8HgaJpZM4KsQGr\n> .\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/259215268",
    "html_url": "https://github.com/grpc/grpc/issues/8673#issuecomment-259215268",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/8673",
    "id": 259215268,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1OTIxNTI2OA==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-11-08T18:16:22Z",
    "updated_at": "2016-11-08T18:16:22Z",
    "author_association": "CONTRIBUTOR",
    "body": "Btw, the error \"An established connection was aborted by the software in your host machine\" seems to be often associated with a windows firewall. Have you tried disabling it and re-running the test?\n\nhttps://social.msdn.microsoft.com/Forums/en-US/212feb8f-cf96-4561-9953-40a21d21ea47/exception-an-established-connection-was-aborted-by-the-software-in-your-host-machine?forum=netfxnetcom\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/259219041",
    "html_url": "https://github.com/grpc/grpc/issues/8673#issuecomment-259219041",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/8673",
    "id": 259219041,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1OTIxOTA0MQ==",
    "user": {
      "login": "amitwaisel",
      "id": 21170412,
      "node_id": "MDQ6VXNlcjIxMTcwNDEy",
      "avatar_url": "https://avatars2.githubusercontent.com/u/21170412?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/amitwaisel",
      "html_url": "https://github.com/amitwaisel",
      "followers_url": "https://api.github.com/users/amitwaisel/followers",
      "following_url": "https://api.github.com/users/amitwaisel/following{/other_user}",
      "gists_url": "https://api.github.com/users/amitwaisel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/amitwaisel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/amitwaisel/subscriptions",
      "organizations_url": "https://api.github.com/users/amitwaisel/orgs",
      "repos_url": "https://api.github.com/users/amitwaisel/repos",
      "events_url": "https://api.github.com/users/amitwaisel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/amitwaisel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-11-08T18:30:22Z",
    "updated_at": "2016-11-08T18:30:22Z",
    "author_association": "NONE",
    "body": "The \"established connection\" message was received on one occasion, I think on a machine with Kaspersky. But, the most common errors are either \"data corrupted\", \"socket shutdown\" and the most common - \"end of TCP stream\". Those happen on a machine without any AV or firewall (a dedicated testing VM, Win7x86)\n\n> On 8 Nov 2016, at 20:16, Jan Tattermusch notifications@github.com wrote:\n> \n> Btw, the error \"An established connection was aborted by the software in your host machine\" seems to be often associated with a windows firewall. Have you tried disabling it and re-running the test?\n> \n> https://social.msdn.microsoft.com/Forums/en-US/212feb8f-cf96-4561-9953-40a21d21ea47/exception-an-established-connection-was-aborted-by-the-software-in-your-host-machine?forum=netfxnetcom\n> \n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/259465242",
    "html_url": "https://github.com/grpc/grpc/issues/8673#issuecomment-259465242",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/8673",
    "id": 259465242,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1OTQ2NTI0Mg==",
    "user": {
      "login": "rmartin7c",
      "id": 15822854,
      "node_id": "MDQ6VXNlcjE1ODIyODU0",
      "avatar_url": "https://avatars2.githubusercontent.com/u/15822854?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rmartin7c",
      "html_url": "https://github.com/rmartin7c",
      "followers_url": "https://api.github.com/users/rmartin7c/followers",
      "following_url": "https://api.github.com/users/rmartin7c/following{/other_user}",
      "gists_url": "https://api.github.com/users/rmartin7c/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rmartin7c/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rmartin7c/subscriptions",
      "organizations_url": "https://api.github.com/users/rmartin7c/orgs",
      "repos_url": "https://api.github.com/users/rmartin7c/repos",
      "events_url": "https://api.github.com/users/rmartin7c/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rmartin7c/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-11-09T16:56:21Z",
    "updated_at": "2016-11-09T16:56:21Z",
    "author_association": "NONE",
    "body": "I'm seeing something similar from an iOS ObjC client. It happens intermittently, usually either on initial app startup and connection to the gRPC server, or else after the app resumes from background.\n\n> E1109 11:47:53.498008000 123145302917120 handshake.c:128] Security handshake failed: {\"created\":\"@1478710073.497969000\",\"description\":\"Handshake read failed\",\"file\":\"/Users/rmartin/src/POM-Chewy-iOS/Pods/gRPC-Core/src/core/lib/security/transport/handshake.c\",\"file_line\":237,\"referenced_errors\":[{\"created\":\"@1478710073.497965000\",\"description\":\"FD shutdown\",\"file\":\"/Users/rmartin/src/POM-Chewy-iOS/Pods/gRPC-Core/src/core/lib/iomgr/ev_poll_posix.c\",\"file_line\":427}]}\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/259489740",
    "html_url": "https://github.com/grpc/grpc/issues/8673#issuecomment-259489740",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/8673",
    "id": 259489740,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1OTQ4OTc0MA==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-11-09T18:36:45Z",
    "updated_at": "2016-11-09T18:36:45Z",
    "author_association": "CONTRIBUTOR",
    "body": "If you don't mind, I'll restrict scope of this issue to \"SSL/TSI data corruption\" as we already have an issue filed for the parallel connects (#8382). I adjusted the name of this issue.\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/259490216",
    "html_url": "https://github.com/grpc/grpc/issues/8673#issuecomment-259490216",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/8673",
    "id": 259490216,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1OTQ5MDIxNg==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-11-09T18:38:36Z",
    "updated_at": "2016-11-09T18:38:36Z",
    "author_association": "CONTRIBUTOR",
    "body": "So far I wasn't able to reproduce the \"TSI_DATA_CORRUPTED\" issue. It makes me think that perhaps it might be causes by forcefully closing the connection if a connection attempt times out (and when only part of the data is sent?)\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/259490949",
    "html_url": "https://github.com/grpc/grpc/issues/8673#issuecomment-259490949",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/8673",
    "id": 259490949,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1OTQ5MDk0OQ==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-11-09T18:41:24Z",
    "updated_at": "2016-11-09T18:41:24Z",
    "author_association": "CONTRIBUTOR",
    "body": "@rmartin7c  can you please check if what I commented on #8382 helps in your situation?\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/259512313",
    "html_url": "https://github.com/grpc/grpc/issues/8673#issuecomment-259512313",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/8673",
    "id": 259512313,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1OTUxMjMxMw==",
    "user": {
      "login": "rmartin7c",
      "id": 15822854,
      "node_id": "MDQ6VXNlcjE1ODIyODU0",
      "avatar_url": "https://avatars2.githubusercontent.com/u/15822854?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rmartin7c",
      "html_url": "https://github.com/rmartin7c",
      "followers_url": "https://api.github.com/users/rmartin7c/followers",
      "following_url": "https://api.github.com/users/rmartin7c/following{/other_user}",
      "gists_url": "https://api.github.com/users/rmartin7c/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rmartin7c/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rmartin7c/subscriptions",
      "organizations_url": "https://api.github.com/users/rmartin7c/orgs",
      "repos_url": "https://api.github.com/users/rmartin7c/repos",
      "events_url": "https://api.github.com/users/rmartin7c/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rmartin7c/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-11-09T20:05:41Z",
    "updated_at": "2016-11-09T20:05:41Z",
    "author_association": "NONE",
    "body": "@jtattermusch we are trying to do so, but it doesn't appear that the grpc.initial_reconnect_backoff_ms channelArg is exposed in the ObjC wrapper. See [GRPCCall+ChannelArg.h](https://github.com/grpc/grpc/src/objective-c/GRPCClient/GRPCCall+ChannelArg.h). Do you have any advice on how to set this param in ObjC, or are we going to have to add a method manually to test this?\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/259533985",
    "html_url": "https://github.com/grpc/grpc/issues/8673#issuecomment-259533985",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/8673",
    "id": 259533985,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1OTUzMzk4NQ==",
    "user": {
      "login": "amitwaisel",
      "id": 21170412,
      "node_id": "MDQ6VXNlcjIxMTcwNDEy",
      "avatar_url": "https://avatars2.githubusercontent.com/u/21170412?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/amitwaisel",
      "html_url": "https://github.com/amitwaisel",
      "followers_url": "https://api.github.com/users/amitwaisel/followers",
      "following_url": "https://api.github.com/users/amitwaisel/following{/other_user}",
      "gists_url": "https://api.github.com/users/amitwaisel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/amitwaisel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/amitwaisel/subscriptions",
      "organizations_url": "https://api.github.com/users/amitwaisel/orgs",
      "repos_url": "https://api.github.com/users/amitwaisel/repos",
      "events_url": "https://api.github.com/users/amitwaisel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/amitwaisel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-11-09T21:38:56Z",
    "updated_at": "2016-11-09T21:38:56Z",
    "author_association": "NONE",
    "body": "@jtattermusch It appears like the TSI_DATA_CORRUPTED error happens after all connections are initialized, and data was already sent on all subchannels successfully. I will try to change the channel's reconnect backoff and update you soon\n@rmartin7c This channel argument is not formally exposed. Note that all exposed arguments are actually translated to a string that formed like \"grpc.XXX\" so you can, in fact, change inner arguments just by knowing the exact string that describe them. (That's the case in C#)\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/271511008",
    "html_url": "https://github.com/grpc/grpc/issues/8673#issuecomment-271511008",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/8673",
    "id": 271511008,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3MTUxMTAwOA==",
    "user": {
      "login": "amitwaisel",
      "id": 21170412,
      "node_id": "MDQ6VXNlcjIxMTcwNDEy",
      "avatar_url": "https://avatars2.githubusercontent.com/u/21170412?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/amitwaisel",
      "html_url": "https://github.com/amitwaisel",
      "followers_url": "https://api.github.com/users/amitwaisel/followers",
      "following_url": "https://api.github.com/users/amitwaisel/following{/other_user}",
      "gists_url": "https://api.github.com/users/amitwaisel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/amitwaisel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/amitwaisel/subscriptions",
      "organizations_url": "https://api.github.com/users/amitwaisel/orgs",
      "repos_url": "https://api.github.com/users/amitwaisel/repos",
      "events_url": "https://api.github.com/users/amitwaisel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/amitwaisel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-01-10T08:06:38Z",
    "updated_at": "2017-01-10T09:44:47Z",
    "author_association": "NONE",
    "body": "@jtattermusch Seems like the decryption errors happen when a large number of gRPC streams are active between the server and multiple clients.\r\nEach one of the following errors (`TSI_INTERNAL_ERROR` and `TSI_DATA_CORRUPTED`) cause the connection to be dropped:\r\n\r\n> E0109 19:55:23.606337 0 c:\\jenkins\\workspace\\gRPC_build_artifacts\\architecture\\x86\\language\\csharp\\platform\\windows\\vsprojects\\..\\src\\core\\lib\\security\\transport\\secure_endpoint.c:176: Decryption error: TSI_INTERNAL_ERROR\r\n\r\n> E0109 19:55:23.613337 0 c:\\jenkins\\workspace\\gRPC_build_artifacts\\architecture\\x86\\language\\csharp\\platform\\windows\\vsprojects\\..\\src\\core\\lib\\security\\transport\\secure_endpoint.c:176: Decryption error: TSI_DATA_CORRUPTED\r\n\r\n> E0110 00:28:25.214079 0 c:\\jenkins\\workspace\\gRPC_build_artifacts\\architecture\\x86\\language\\csharp\\platform\\windows\\vsprojects\\..\\src\\core\\lib\\tsi\\ssl_transport_security.c:425: error:1409442E:SSL routines:ssl3_read_bytes:tlsv1 alert protocol version\r\n\r\nAs for the encryption, `SslCredentials` are used. The server uses the CA certificate + server's certificate + server private key, and the client uses only the CA certificate + client's certificate.\r\n\r\n**UPDATE**\r\n\r\n1. It appears the server's `TSI_INTERNAL_ERROR` is matched with client's `TSI_DATA_CORRUPTED`. It causes the connection to be closed from the client side. The client sends `Encrypted Alert` TSL packet, then `FIN,ACK` from the client with `ACK` response from the server. Then, the client sends `RST,ACK` and `RST` packets (probably because of the server's last `ACK`).\r\n2. It appears the `TSI_DATA_CORRUPTED`, which follows the error trace `error:1409442E:SSL routines:ssl3_read_bytes:tlsv1 alert protocol version`, causes the connection to be closed from the server side.\r\n\r\nServer is written in C#. Client is written in C++.\r\n\r\nThanks"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/272103092",
    "html_url": "https://github.com/grpc/grpc/issues/8673#issuecomment-272103092",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/8673",
    "id": 272103092,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3MjEwMzA5Mg==",
    "user": {
      "login": "amitwaisel",
      "id": 21170412,
      "node_id": "MDQ6VXNlcjIxMTcwNDEy",
      "avatar_url": "https://avatars2.githubusercontent.com/u/21170412?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/amitwaisel",
      "html_url": "https://github.com/amitwaisel",
      "followers_url": "https://api.github.com/users/amitwaisel/followers",
      "following_url": "https://api.github.com/users/amitwaisel/following{/other_user}",
      "gists_url": "https://api.github.com/users/amitwaisel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/amitwaisel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/amitwaisel/subscriptions",
      "organizations_url": "https://api.github.com/users/amitwaisel/orgs",
      "repos_url": "https://api.github.com/users/amitwaisel/repos",
      "events_url": "https://api.github.com/users/amitwaisel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/amitwaisel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-01-12T08:26:53Z",
    "updated_at": "2017-01-12T08:27:05Z",
    "author_association": "NONE",
    "body": "@jtattermusch As far as I can tell, this issue happens because of some race condition in OpenSSL library, which is used only on Windows (issue #9085 describes the linkage spaghetti). gRPC uses version 1.0.2d which is over 1.5 years old, and might not support multithreading well (for example, I found a bug in memory release inside crypto/err.c, which is not well-thread-protected in version 1.0.2d).\r\nAfter some manual work, I managed **linking gRPC libraries with BoringSSL** (on Windows) rather than OpenSSL.\r\n1. C++ code requires linking with `ssl.lib` and `crypto.lib` instead of `libeay32.lib` and `ssleay32.lib`, and **building gRPC libraries with the corresponding BoringSSL headers**.\r\n2. C# code requires rebuilding `grpc_csharp_ext.dll` (which is C++ code) with `ssl.lib` and `crypto.lib` and overriding `grpc_csharp_ext.[x86|x64].dll` from NuGet with the manually-built library, in the OutputDirectory.\r\n\r\nMaybe this is the way to solve the issue in future gRPC releases? In any case, gRPC 1.0.1 (and even the master branch as far as I can tell) currently contains a mesh up of BoringSSL and OpenSSL (issue #9085 - links with OpenSSL from gRPC.dependencies.openssl..., but uses BoringSSL headers).\r\nIn addition, I have a feeling it might solve #8405 as well (as I said, I found a race condition in a heap-free function in OpenSSL, which causes heap corruption from time to time)."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/278409606",
    "html_url": "https://github.com/grpc/grpc/issues/8673#issuecomment-278409606",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/8673",
    "id": 278409606,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3ODQwOTYwNg==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-08T17:58:12Z",
    "updated_at": "2017-02-08T17:58:12Z",
    "author_association": "CONTRIBUTOR",
    "body": "Update: After making major improvements to our cmake build on Windows, I am getting closer to a point where I will be able to produce grpc_csharp_ext.dll   that uses boringssl  instead of openssl. That will probably become the authoritative version of grpc_csharp_ext.dll  that will also be part of our C# packages."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/279091934",
    "html_url": "https://github.com/grpc/grpc/issues/8673#issuecomment-279091934",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/8673",
    "id": 279091934,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3OTA5MTkzNA==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-10T23:11:54Z",
    "updated_at": "2017-02-10T23:11:54Z",
    "author_association": "CONTRIBUTOR",
    "body": "This issue should be fixed once https://github.com/grpc/grpc/pull/9665 is merged."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/279102351",
    "html_url": "https://github.com/grpc/grpc/issues/8673#issuecomment-279102351",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/8673",
    "id": 279102351,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3OTEwMjM1MQ==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-11T00:23:30Z",
    "updated_at": "2017-02-11T00:23:30Z",
    "author_association": "CONTRIBUTOR",
    "body": "#9665 just got merged, can you please verify the fix? You can use experimental nugets here:\r\nhttps://grpc-testing.appspot.com/view/Artifacts/job/gRPC_build_packages/2747/platform=windows/"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/282175110",
    "html_url": "https://github.com/grpc/grpc/issues/8673#issuecomment-282175110",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/8673",
    "id": 282175110,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4MjE3NTExMA==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-24T01:19:58Z",
    "updated_at": "2017-02-24T01:19:58Z",
    "author_association": "CONTRIBUTOR",
    "body": "@amitwaisel  please let me know if this was fixed."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/286034198",
    "html_url": "https://github.com/grpc/grpc/issues/8673#issuecomment-286034198",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/8673",
    "id": 286034198,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NjAzNDE5OA==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-13T07:36:02Z",
    "updated_at": "2017-03-13T07:36:02Z",
    "author_association": "CONTRIBUTOR",
    "body": "Got a confirmation from @amitwaisel  that this was fixed."
  }
]
