[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/75697206",
    "html_url": "https://github.com/grpc/grpc/issues/546#issuecomment-75697206",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/546",
    "id": 75697206,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1Njk3MjA2",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-02-24T04:20:39Z",
    "updated_at": "2015-02-24T04:20:39Z",
    "author_association": "CONTRIBUTOR",
    "body": "After some investigation (where it turns out it's actually quite hard to force gpr output logs to NUnit console), it seems the crash is not within grpc_shutdown.\n\nThe log from test that creates a server and immediately shuts it down:\nThe main problem seems to be \"assertion failed: !info->cb\"\n\nI0223 20:08:15.715000000  8228 c:\\users\\jtattermusch\\github\\grpc\\src\\core\\iomgr\\resolve_address_windows.c:115: logspam: getaddrinfo(localhost, 0) resolved 2 addrs in 16ms:\nI0223 20:08:15.715000000  8228 c:\\users\\jtattermusch\\github\\grpc\\src\\core\\iomgr\\resolve_address_windows.c:121: logspam:   [0] [::1]:0\nI0223 20:08:15.715000000  8228 c:\\users\\jtattermusch\\github\\grpc\\src\\core\\iomgr\\resolve_address_windows.c:121: logspam:   [1] 127.0.0.1:0\nD0223 20:08:15.715000000  8228 c:\\users\\jtattermusch\\github\\grpc\\src\\core\\iomgr\\socket_windows.c:49: grpc_winsocket_create\nD0223 20:08:15.715000000  8228 c:\\users\\jtattermusch\\github\\grpc\\src\\core\\iomgr\\socket_windows.c:49: grpc_winsocket_create\nD0223 20:08:15.715000000  8228 c:\\users\\jtattermusch\\github\\grpc\\src\\core\\iomgr\\iocp_windows.c:196: grpc_socket_notify_on_read\nD0223 20:08:15.715000000  8228 c:\\users\\jtattermusch\\github\\grpc\\src\\core\\iomgr\\iocp_windows.c:182: socket_notify_on_iocp - queued\nD0223 20:08:15.715000000  8228 c:\\users\\jtattermusch\\github\\grpc\\src\\core\\iomgr\\iocp_windows.c:196: grpc_socket_notify_on_read\nD0223 20:08:15.715000000  8228 c:\\users\\jtattermusch\\github\\grpc\\src\\core\\iomgr\\iocp_windows.c:182: socket_notify_on_iocp - queued\nD0223 20:08:15.730000000  8228 c:\\users\\jtattermusch\\github\\grpc\\src\\core\\iomgr\\socket_windows.c:64: grpc_winsocket_shutdown\nD0223 20:08:15.730000000  8228 c:\\users\\jtattermusch\\github\\grpc\\src\\core\\iomgr\\socket_windows.c:64: grpc_winsocket_shutdown\nD0223 20:08:15.730000000  7564 c:\\users\\jtattermusch\\github\\grpc\\src\\core\\iomgr\\tcp_server_windows.c:239: on_accept: shutting down\nD0223 20:08:15.730000000  7564 c:\\users\\jtattermusch\\github\\grpc\\src\\core\\iomgr\\iocp_windows.c:196: grpc_socket_notify_on_read\nE0223 20:08:15.730000000  7564 c:\\users\\jtattermusch\\github\\grpc\\src\\core\\iomgr\\iocp_windows.c:173: assertion failed: !info->cb\nD0223 20:08:15.730000000 10192 c:\\users\\jtattermusch\\github\\grpc\\src\\core\\iomgr\\iocp_windows.c:92: do_iocp_work - got read packet\nD0223 20:08:15.730000000 10192 c:\\users\\jtattermusch\\github\\grpc\\src\\core\\iomgr\\iocp_windows.c:100: bytes: 0, flags: 0 - op failed\nE0223 20:08:15.730000000 10192 c:\\users\\jtattermusch\\github\\grpc\\src\\core\\iomgr\\tcp_server_windows.c:231: on_accept error: The I/O operation has been aborted because of either a thread exit or an application request.\n\nD0223 20:08:15.730000000 10192 c:\\users\\jtattermusch\\github\\grpc\\src\\core\\iomgr\\iocp_windows.c:196: grpc_socket_notify_on_read\nD0223 20:08:15.730000000 10192 c:\\users\\jtattermusch\\github\\grpc\\src\\core\\iomgr\\iocp_windows.c:182: socket_notify_on_iocp - queued\nD0223 20:08:15.730000000 10192 c:\\users\\jtattermusch\\github\\grpc\\src\\core\\iomgr\\tcp_server_windows.c:239: on_accept: shutting down\nD0223 20:08:15.730000000 10192 c:\\users\\jtattermusch\\github\\grpc\\src\\core\\iomgr\\iocp_windows.c:196: grpc_socket_notify_on_read\nE0223 20:08:15.730000000 10192 c:\\users\\jtattermusch\\github\\grpc\\src\\core\\iomgr\\iocp_windows.c:173: assertion failed: !info->cb\nD0223 20:08:15.730000000  8228 c:\\users\\jtattermusch\\github\\grpc\\src\\core\\iomgr\\socket_windows.c:70: grpc_winsocket_orphan\nD0223 20:08:15.730000000  8228 c:\\users\\jtattermusch\\github\\grpc\\src\\core\\iomgr\\socket_windows.c:70: grpc_winsocket_orphan\n\nCallstack:\n    grpc_csharp_ext.dll!socket_notify_on_iocp(grpc_winsocket \\* socket, void (void *, int) \\* cb, void \\* opaque, grpc_winsocket_callback_info \\* info) Line 173    C\n    grpc_csharp_ext.dll!grpc_socket_notify_on_read(grpc_winsocket \\* socket, void (void *, int) \\* cb, void \\* opaque) Line 197    C\n    grpc_csharp_ext.dll!start_accept(server_port \\* port) Line 206   C\n    grpc_csharp_ext.dll!on_accept(void \\* arg, int success) Line 249 C\n    grpc_csharp_ext.dll!background_callback_executor(void \\* ignored) Line 72    C\n    grpc_csharp_ext.dll!thread_body(void \\* v) Line 54   C\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/76862900",
    "html_url": "https://github.com/grpc/grpc/issues/546#issuecomment-76862900",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/546",
    "id": 76862900,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc2ODYyOTAw",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-03-03T00:37:32Z",
    "updated_at": "2015-03-03T00:37:32Z",
    "author_association": "CONTRIBUTOR",
    "body": "ping?\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/77568439",
    "html_url": "https://github.com/grpc/grpc/issues/546#issuecomment-77568439",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/546",
    "id": 77568439,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3NTY4NDM5",
    "user": {
      "login": "codeandroid",
      "id": 4274006,
      "node_id": "MDQ6VXNlcjQyNzQwMDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/4274006?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/codeandroid",
      "html_url": "https://github.com/codeandroid",
      "followers_url": "https://api.github.com/users/codeandroid/followers",
      "following_url": "https://api.github.com/users/codeandroid/following{/other_user}",
      "gists_url": "https://api.github.com/users/codeandroid/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/codeandroid/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/codeandroid/subscriptions",
      "organizations_url": "https://api.github.com/users/codeandroid/orgs",
      "repos_url": "https://api.github.com/users/codeandroid/repos",
      "events_url": "https://api.github.com/users/codeandroid/events{/privacy}",
      "received_events_url": "https://api.github.com/users/codeandroid/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-03-06T14:39:21Z",
    "updated_at": "2015-03-06T14:40:00Z",
    "author_association": "NONE",
    "body": "I can reproduce the exact same assertion with a minimal program containing just a server with a single service and a single client executing one rpc call.\n\nChanging my test code to only create the server with a single service and immediately shutdown again, reproducibly results in crash in gpr_mu_lock(mu) when accessing mu->cs because mu is 0.\nCallstack:\n\n>   model_server.exe!gpr_mu_lock(gpr_mu \\* mu) Line 55   C\n>     model_server.exe!do_iocp_work(...) Line 106 C\n>     model_server.exe!iocp_loop(void \\* p) Line 121   C\n>     model_server.exe!thread_body(void \\* v) Line 56  C\n\nsync_win32.c:\n\n> void gpr_mu_lock(gpr_mu *mu) {\n>   EnterCriticalSection(&mu->cs); // <= Crashes here because mu is 0.\n>   GPR_ASSERT(!mu->locked);\n>   mu->locked = 1;\n> }\n\nI tried to find out what's causing it but did not make much progress. Feel free to ping me if I can be of help (e.g. testing...).\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/77596549",
    "html_url": "https://github.com/grpc/grpc/issues/546#issuecomment-77596549",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/546",
    "id": 77596549,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3NTk2NTQ5",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-03-06T17:13:56Z",
    "updated_at": "2015-03-06T17:13:56Z",
    "author_association": "CONTRIBUTOR",
    "body": "Can you please send me the entire code that reproduces the issue. You can create a PR against my fork of the main repo https://github.com/jtattermusch/grpc.\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/77953227",
    "html_url": "https://github.com/grpc/grpc/issues/546#issuecomment-77953227",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/546",
    "id": 77953227,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3OTUzMjI3",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-03-09T22:02:43Z",
    "updated_at": "2015-03-09T22:02:43Z",
    "author_association": "CONTRIBUTOR",
    "body": "Seems I can't see it. Can you please send a link?\n\nOn Mon, Mar 9, 2015 at 2:38 PM, codeandroid notifications@github.com\nwrote:\n\n> I did (hopefully... as I'm still new to the PR workflow).\n> \n> —\n> Reply to this email directly or view it on GitHub\n> https://github.com/grpc/grpc/issues/546#issuecomment-77948676.\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/77957793",
    "html_url": "https://github.com/grpc/grpc/issues/546#issuecomment-77957793",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/546",
    "id": 77957793,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3OTU3Nzkz",
    "user": {
      "login": "codeandroid",
      "id": 4274006,
      "node_id": "MDQ6VXNlcjQyNzQwMDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/4274006?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/codeandroid",
      "html_url": "https://github.com/codeandroid",
      "followers_url": "https://api.github.com/users/codeandroid/followers",
      "following_url": "https://api.github.com/users/codeandroid/following{/other_user}",
      "gists_url": "https://api.github.com/users/codeandroid/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/codeandroid/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/codeandroid/subscriptions",
      "organizations_url": "https://api.github.com/users/codeandroid/orgs",
      "repos_url": "https://api.github.com/users/codeandroid/repos",
      "events_url": "https://api.github.com/users/codeandroid/events{/privacy}",
      "received_events_url": "https://api.github.com/users/codeandroid/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-03-09T22:26:33Z",
    "updated_at": "2015-03-09T22:26:33Z",
    "author_association": "NONE",
    "body": "Sorry, I'm new to the PR workflow so I may have made an error.\n\nHere's a link to the commit with the example: https://github.com/codeandroid/grpc/commit/39927f522599e33f7c1f94aeb55fde77302f22dd\n\nWhat's the workflow, should I create project files, too? I looked into generate_projects.sh and the mako templates. I can probably get it done that way, though locally I simply used premake5 to generate them.\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/78025696",
    "html_url": "https://github.com/grpc/grpc/issues/546#issuecomment-78025696",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/546",
    "id": 78025696,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4MDI1Njk2",
    "user": {
      "login": "codeandroid",
      "id": 4274006,
      "node_id": "MDQ6VXNlcjQyNzQwMDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/4274006?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/codeandroid",
      "html_url": "https://github.com/codeandroid",
      "followers_url": "https://api.github.com/users/codeandroid/followers",
      "following_url": "https://api.github.com/users/codeandroid/following{/other_user}",
      "gists_url": "https://api.github.com/users/codeandroid/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/codeandroid/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/codeandroid/subscriptions",
      "organizations_url": "https://api.github.com/users/codeandroid/orgs",
      "repos_url": "https://api.github.com/users/codeandroid/repos",
      "events_url": "https://api.github.com/users/codeandroid/events{/privacy}",
      "received_events_url": "https://api.github.com/users/codeandroid/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-03-10T10:09:26Z",
    "updated_at": "2015-03-10T10:09:26Z",
    "author_association": "NONE",
    "body": "I ran the C# Grpc.IntegrationTesting.Server and Client which exhibits similar behavior during shutdown:\n\n> \\src\\core\\support\\sync_win32.c:55: assertion failed: !mu->locked\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/78166809",
    "html_url": "https://github.com/grpc/grpc/issues/546#issuecomment-78166809",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/546",
    "id": 78166809,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4MTY2ODA5",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-03-10T22:57:59Z",
    "updated_at": "2015-03-10T22:57:59Z",
    "author_association": "CONTRIBUTOR",
    "body": "So you are using C++ code and you are able to compile (we don't support yet actually)? Could you please provide a snapshot of your whole example including the project files - everything that's needed to actually run the test code. We could use that example to debug the issue.\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/78233001",
    "html_url": "https://github.com/grpc/grpc/issues/546#issuecomment-78233001",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/546",
    "id": 78233001,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4MjMzMDAx",
    "user": {
      "login": "codeandroid",
      "id": 4274006,
      "node_id": "MDQ6VXNlcjQyNzQwMDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/4274006?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/codeandroid",
      "html_url": "https://github.com/codeandroid",
      "followers_url": "https://api.github.com/users/codeandroid/followers",
      "following_url": "https://api.github.com/users/codeandroid/following{/other_user}",
      "gists_url": "https://api.github.com/users/codeandroid/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/codeandroid/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/codeandroid/subscriptions",
      "organizations_url": "https://api.github.com/users/codeandroid/orgs",
      "repos_url": "https://api.github.com/users/codeandroid/repos",
      "events_url": "https://api.github.com/users/codeandroid/events{/privacy}",
      "received_events_url": "https://api.github.com/users/codeandroid/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-03-11T09:50:06Z",
    "updated_at": "2015-03-11T09:50:06Z",
    "author_association": "NONE",
    "body": "I will add the C++ projects, yes.\n\nStill, the C# code exhibits the same crash and it does not use the C++ layer.\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/85205841",
    "html_url": "https://github.com/grpc/grpc/issues/546#issuecomment-85205841",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/546",
    "id": 85205841,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg1MjA1ODQx",
    "user": {
      "login": "codeandroid",
      "id": 4274006,
      "node_id": "MDQ6VXNlcjQyNzQwMDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/4274006?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/codeandroid",
      "html_url": "https://github.com/codeandroid",
      "followers_url": "https://api.github.com/users/codeandroid/followers",
      "following_url": "https://api.github.com/users/codeandroid/following{/other_user}",
      "gists_url": "https://api.github.com/users/codeandroid/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/codeandroid/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/codeandroid/subscriptions",
      "organizations_url": "https://api.github.com/users/codeandroid/orgs",
      "repos_url": "https://api.github.com/users/codeandroid/repos",
      "events_url": "https://api.github.com/users/codeandroid/events{/privacy}",
      "received_events_url": "https://api.github.com/users/codeandroid/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-03-23T21:29:29Z",
    "updated_at": "2015-03-23T21:38:05Z",
    "author_association": "NONE",
    "body": "Tested https://github.com/grpc/grpc/pull/1114:\n\nGrpc.IntegrationTesting.Client.exe shuts down cleanly, as far as I can tell. Yay!\nGrpc.IntegrationTesting.Server.exe stops by crashing vshost32.exe (\"vshost32.exe has stopped working\") - exit code 0x4000001f :\n\nLast line of log:\n\n> src\\core\\iomgr\\tcp_windows.c:129: on_read\n\nEdit: Used the native debugger to track it into grpc_csharp_ext.dll:\n\nCallstack:\n\n>   grpc_csharp_ext.dll!on_read(void \\* tcpp, int success) Line 134  C\n>     grpc_csharp_ext.dll!do_iocp_work(...) Line 121  C\n>     grpc_csharp_ext.dll!iocp_loop(void \\* p) Line 128    C\n>     grpc_csharp_ext.dll!thread_body(void \\* v) Line 54   C\n\nCode tcp_windows.c - __debugbreak() is triggered:\n\n>   gpr_log(GPR_DEBUG, \"on_read\");\n>   tcp->outstanding_read = 0;\n>   if (socket->read_info.wsa_error != 0) {\n>     char *utf8_message = gpr_format_message(info->wsa_error);\n>     __debugbreak(); // <-------- That's the one!\n>     gpr_log(GPR_ERROR, \"ReadFile overlapped error: %s\", utf8_message);\n>     gpr_free(utf8_message);\n>     status = GRPC_ENDPOINT_CB_ERROR;\n>   } else {\n\nutf8_message reads:\n\n> \"An existing connection was forcibly closed by the remote host.\\r\\n\"\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/85235386",
    "html_url": "https://github.com/grpc/grpc/issues/546#issuecomment-85235386",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/546",
    "id": 85235386,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg1MjM1Mzg2",
    "user": {
      "login": "nicolasnoble",
      "id": 7281574,
      "node_id": "MDQ6VXNlcjcyODE1NzQ=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/7281574?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nicolasnoble",
      "html_url": "https://github.com/nicolasnoble",
      "followers_url": "https://api.github.com/users/nicolasnoble/followers",
      "following_url": "https://api.github.com/users/nicolasnoble/following{/other_user}",
      "gists_url": "https://api.github.com/users/nicolasnoble/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nicolasnoble/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nicolasnoble/subscriptions",
      "organizations_url": "https://api.github.com/users/nicolasnoble/orgs",
      "repos_url": "https://api.github.com/users/nicolasnoble/repos",
      "events_url": "https://api.github.com/users/nicolasnoble/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nicolasnoble/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-03-23T22:40:42Z",
    "updated_at": "2015-03-23T22:40:42Z",
    "author_association": "CONTRIBUTOR",
    "body": "That debugbreak is here because I had no idea how to provoke that codepath - and I wanted to test it. None of my tests were able to. Just remove that line - it might just work :-)\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/85236486",
    "html_url": "https://github.com/grpc/grpc/issues/546#issuecomment-85236486",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/546",
    "id": 85236486,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg1MjM2NDg2",
    "user": {
      "login": "nicolasnoble",
      "id": 7281574,
      "node_id": "MDQ6VXNlcjcyODE1NzQ=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/7281574?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nicolasnoble",
      "html_url": "https://github.com/nicolasnoble",
      "followers_url": "https://api.github.com/users/nicolasnoble/followers",
      "following_url": "https://api.github.com/users/nicolasnoble/following{/other_user}",
      "gists_url": "https://api.github.com/users/nicolasnoble/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nicolasnoble/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nicolasnoble/subscriptions",
      "organizations_url": "https://api.github.com/users/nicolasnoble/orgs",
      "repos_url": "https://api.github.com/users/nicolasnoble/repos",
      "events_url": "https://api.github.com/users/nicolasnoble/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nicolasnoble/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-03-23T22:47:23Z",
    "updated_at": "2015-03-23T22:47:23Z",
    "author_association": "CONTRIBUTOR",
    "body": "In fact, there's 4 other debugbreaks I've left in the Windows port. All of them are codepaths I couldn't test, and I don't like not having good code coverage at least during my development. But each of these codepaths should in fact gracefully recover. Should. As I couldn't test, I can't be 100% sure.\n\nBut feel free to remove all of them. Maybe I should put them in a macro or something if people are actually using that Windows port :-)\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/94962820",
    "html_url": "https://github.com/grpc/grpc/issues/546#issuecomment-94962820",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/546",
    "id": 94962820,
    "node_id": "MDEyOklzc3VlQ29tbWVudDk0OTYyODIw",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-04-21T22:37:10Z",
    "updated_at": "2015-04-21T22:38:11Z",
    "author_association": "CONTRIBUTOR",
    "body": "So, the __debugbreak() problem is unrelated to the issue. The actual problem is what I have already described:\nE4/21/2015 2:20:06 PM 108558992 c:\\users\\jtattermusch\\github\\grpc\\src\\core\\iomgr\\iocp_windows.c:188: assertion failed: !info->cb\n\n```\ngrpc_csharp_ext.dll!socket_notify_on_iocp(grpc_winsocket * socket, void (void *, int) * cb, void * opaque, grpc_winsocket_callback_info * info) Line 188    C\ngrpc_csharp_ext.dll!grpc_socket_notify_on_read(grpc_winsocket * socket, void (void *, int) * cb, void * opaque) Line 212    C\ngrpc_csharp_ext.dll!start_accept(server_port * port) Line 214   C\n```\n\n>   grpc_csharp_ext.dll!on_accept(void \\* arg, int success) Line 260 C\n>     grpc_csharp_ext.dll!grpc_maybe_call_delayed_callbacks(gpr_mu \\* drop_mu, int success) Line 209   C\n>     grpc_csharp_ext.dll!grpc_pollset_work(grpc_pollset \\* pollset, gpr_timespec deadline) Line 66    C\n>     grpc_csharp_ext.dll!grpc_completion_queue_next(grpc_completion_queue \\* cc, gpr_timespec deadline) Line 311  C\n>     grpc_csharp_ext.dll!grpcsharp_completion_queue_next_with_callback(grpc_completion_queue \\* cq) Line 310  C\n\nHow to reproduce: basically run any C# test (I ran MathClientServerTest.Div1).\n\nIt looks like this can be prevented by adding \nif (success) for start_accept(sp)  in tcp_server_windows.c:259\n\nAfter doing that, you will run into several other issues:\n\na) either things work fine but iocp_windows.c: do_iocp_work will never terminate (it gets a kick and then goes to sleep again because of handling of orphan sockets).\n\nb) or you get access violation exception at \nsuccess = port->AcceptEx(port->socket->socket, ...  because port->socket = 0xfeeefeee (which most likely means it has been freed before).\nstacktrace:\n    grpc_csharp_ext.dll!start_accept(server_port \\* port) Line 201   C\n    grpc_csharp_ext.dll!on_accept(void \\* arg, int success) Line 260 C\n    grpc_csharp_ext.dll!do_iocp_work(...) Line 122  C\n    grpc_csharp_ext.dll!iocp_loop(void \\* p) Line 129    C\n    grpc_csharp_ext.dll!thread_body(void \\* v) Line 72   C\n\nc) you get and error: c:\\users\\jtattermusch\\github\\grpc\\src\\core\\iomgr\\tcp_server_windows.c:238: on_accept error: An operation was attempted on something that is not a socket.  (which might be connected to the fact that the socket has been freed before).\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/95268049",
    "html_url": "https://github.com/grpc/grpc/issues/546#issuecomment-95268049",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/546",
    "id": 95268049,
    "node_id": "MDEyOklzc3VlQ29tbWVudDk1MjY4MDQ5",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-04-22T17:12:50Z",
    "updated_at": "2015-04-22T17:13:24Z",
    "author_association": "CONTRIBUTOR",
    "body": "Added bug for the use-after-free problem separately https://github.com/grpc/grpc/issues/1346\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/98867862",
    "html_url": "https://github.com/grpc/grpc/issues/546#issuecomment-98867862",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/546",
    "id": 98867862,
    "node_id": "MDEyOklzc3VlQ29tbWVudDk4ODY3ODYy",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-05-04T22:21:59Z",
    "updated_at": "2015-05-04T22:21:59Z",
    "author_association": "CONTRIBUTOR",
    "body": "Resolved by #1454.\n"
  }
]
