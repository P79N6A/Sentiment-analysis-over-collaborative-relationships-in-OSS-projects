[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/414410488",
    "html_url": "https://github.com/grpc/grpc/issues/16381#issuecomment-414410488",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/16381",
    "id": 414410488,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxNDQxMDQ4OA==",
    "user": {
      "login": "muxi",
      "id": 1054404,
      "node_id": "MDQ6VXNlcjEwNTQ0MDQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1054404?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/muxi",
      "html_url": "https://github.com/muxi",
      "followers_url": "https://api.github.com/users/muxi/followers",
      "following_url": "https://api.github.com/users/muxi/following{/other_user}",
      "gists_url": "https://api.github.com/users/muxi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/muxi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/muxi/subscriptions",
      "organizations_url": "https://api.github.com/users/muxi/orgs",
      "repos_url": "https://api.github.com/users/muxi/repos",
      "events_url": "https://api.github.com/users/muxi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/muxi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-20T18:08:34Z",
    "updated_at": "2018-08-20T18:08:34Z",
    "author_association": "MEMBER",
    "body": "@mqingli - Did it work for you before? The C++ API surprises me a bit since I thought on grpc c++ Cronet just links to a dummy interface. How are you linking Cronet?\r\n\r\n@gcasto - I see you added the c++ API a while ago. Is it supposed to work? Is it not using [this fake interface](https://github.com/grpc/grpc/blob/master/src/core/ext/transport/cronet/transport/cronet_api_dummy.cc) on github?"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/414422751",
    "html_url": "https://github.com/grpc/grpc/issues/16381#issuecomment-414422751",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/16381",
    "id": 414422751,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxNDQyMjc1MQ==",
    "user": {
      "login": "mqingli",
      "id": 42475716,
      "node_id": "MDQ6VXNlcjQyNDc1NzE2",
      "avatar_url": "https://avatars2.githubusercontent.com/u/42475716?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mqingli",
      "html_url": "https://github.com/mqingli",
      "followers_url": "https://api.github.com/users/mqingli/followers",
      "following_url": "https://api.github.com/users/mqingli/following{/other_user}",
      "gists_url": "https://api.github.com/users/mqingli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mqingli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mqingli/subscriptions",
      "organizations_url": "https://api.github.com/users/mqingli/orgs",
      "repos_url": "https://api.github.com/users/mqingli/repos",
      "events_url": "https://api.github.com/users/mqingli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mqingli/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-20T18:48:51Z",
    "updated_at": "2018-08-20T18:48:51Z",
    "author_association": "NONE",
    "body": "@muxi thanks for your response. we linked with grpc.a, grpc++.a, grpc_cronet.a and grpc++_cronet.a in our C++ library. RPC call via cronet channel works. But grpc library errored out or crashed as long as we call cronet channel's NotifyOnStateChange or getState.Briefly checked the related grpc library code, looks like cronet channel has the GRPC_CLIENT_DIRECT_CHANNEL type. It doesn't not registered with grpc_client_channel_filter filter, which handles channel state.\r\n\r\nIf this doesn't work, I'm wondering any alternative way that we can watch cronet channel state? "
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/414459439",
    "html_url": "https://github.com/grpc/grpc/issues/16381#issuecomment-414459439",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/16381",
    "id": 414459439,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxNDQ1OTQzOQ==",
    "user": {
      "login": "muxi",
      "id": 1054404,
      "node_id": "MDQ6VXNlcjEwNTQ0MDQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1054404?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/muxi",
      "html_url": "https://github.com/muxi",
      "followers_url": "https://api.github.com/users/muxi/followers",
      "following_url": "https://api.github.com/users/muxi/following{/other_user}",
      "gists_url": "https://api.github.com/users/muxi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/muxi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/muxi/subscriptions",
      "organizations_url": "https://api.github.com/users/muxi/orgs",
      "repos_url": "https://api.github.com/users/muxi/repos",
      "events_url": "https://api.github.com/users/muxi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/muxi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-20T20:53:17Z",
    "updated_at": "2018-08-20T20:53:17Z",
    "author_association": "MEMBER",
    "body": "Thanks for the info. It is interesting to see rpc call works.\r\n\r\nYou are right that direct channel is not associated with client channel filter since the channel is not a gRPC managed channel. Cronet manages channels by itself which is transparent to gRPC. Cronet API does not provide that information.\r\n\r\nIf you could share us your crash stack with us, we might confirm that was the reason of the crash and make the API work better than simply crashing, but I'm afraid the channel state information is not available."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/415175646",
    "html_url": "https://github.com/grpc/grpc/issues/16381#issuecomment-415175646",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/16381",
    "id": 415175646,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxNTE3NTY0Ng==",
    "user": {
      "login": "mqingli",
      "id": 42475716,
      "node_id": "MDQ6VXNlcjQyNDc1NzE2",
      "avatar_url": "https://avatars2.githubusercontent.com/u/42475716?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mqingli",
      "html_url": "https://github.com/mqingli",
      "followers_url": "https://api.github.com/users/mqingli/followers",
      "following_url": "https://api.github.com/users/mqingli/following{/other_user}",
      "gists_url": "https://api.github.com/users/mqingli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mqingli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mqingli/subscriptions",
      "organizations_url": "https://api.github.com/users/mqingli/orgs",
      "repos_url": "https://api.github.com/users/mqingli/repos",
      "events_url": "https://api.github.com/users/mqingli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mqingli/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-22T20:52:11Z",
    "updated_at": "2018-08-22T20:52:11Z",
    "author_association": "NONE",
    "body": "Hi @muxi , sorry for the late reply. Here is the crash stack from grpc library. \r\n\r\n#0\t0x000000018381d2e0 in __pthread_kill ()\r\n#1\t0x00000001839be288 in pthread_kill$VARIANT$mp ()\r\n#2\t0x000000018378bd0c in abort ()\r\n#3\t0x00000001060a66c8 in ::grpc_channel_watch_connectivity_state(grpc_channel *, grpc_connectivity_state, gpr_timespec, grpc_completion_queue *, void *) at grpc/src/core/ext/filters/client_channel/channel_connectivity.cc:246\r\n#4\t0x00000001082d0940 in void grpc::ChannelInterface::NotifyOnStateChange<std::__1::chrono::time_point<std::__1::chrono::system_clock, std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000l> > > >(grpc_connectivity_state, std::__1::chrono::time_point<std::__1::chrono::system_clock, std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000l> > >, grpc::CompletionQueue*, void*) at grpcpp/impl/codegen/channel_interface.h:68\r\n------------------------------------------------------------------------------\r\n#5 client function calling channel->NotifyOnStateChange(GRPC_CHANNEL_IDLE, deadline, cq, tag)\r\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/477691508",
    "html_url": "https://github.com/grpc/grpc/issues/16381#issuecomment-477691508",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/16381",
    "id": 477691508,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NzY5MTUwOA==",
    "user": {
      "login": "muxi",
      "id": 1054404,
      "node_id": "MDQ6VXNlcjEwNTQ0MDQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1054404?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/muxi",
      "html_url": "https://github.com/muxi",
      "followers_url": "https://api.github.com/users/muxi/followers",
      "following_url": "https://api.github.com/users/muxi/following{/other_user}",
      "gists_url": "https://api.github.com/users/muxi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/muxi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/muxi/subscriptions",
      "organizations_url": "https://api.github.com/users/muxi/orgs",
      "repos_url": "https://api.github.com/users/muxi/repos",
      "events_url": "https://api.github.com/users/muxi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/muxi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-28T17:19:10Z",
    "updated_at": "2019-03-28T17:19:10Z",
    "author_association": "MEMBER",
    "body": "Sorry for missing the message for so long, but (as you probably already find out) Cronet does not support the connectivity_state watch. Closing this issue unless there's other concern being raised."
  }
]
