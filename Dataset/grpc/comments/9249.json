[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/275442787",
    "html_url": "https://github.com/grpc/grpc/issues/9249#issuecomment-275442787",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/9249",
    "id": 275442787,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3NTQ0Mjc4Nw==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-01-26T16:53:58Z",
    "updated_at": "2017-01-26T16:53:58Z",
    "author_association": "CONTRIBUTOR",
    "body": "So the program doesn't actually hang, it just keeps retrying to resolve the invalid hostname repeatedly.\r\n\r\nafter setting the environment variable `GRPC_VERBOSITY=DEBUG` and enabling logging in gRPC C#\r\n`GrpcEnvironment.SetLogger(new Grpc.Core.Logging.ConsoleLogger());`, you can see this output:\r\n\r\n```\r\nI0126 17:43:23.623398 140668953523968 src/core/ext/resolver/dns/native/dns_resolver.c:191: dns resolution failed (will retry): {\"created\":\"@1485449003.623299649\",\"description\":\"OS Error\",\"errno\":-2,\"file\":\"src/core/lib/iomgr/resolve_address_posix.c\",\"file_line\":115,\"os_error\":\"Name or service not known\",\"syscall\":\"getaddrinfo\",\"target_address\":\"nonexistenthost.com:23456\"}\r\nD0126 17:43:23.623450 140668953523968 src/core/ext/resolver/dns/native/dns_resolver.c:197: retrying in 1.000000000 seconds\r\nI0126 17:43:24.624561 140668953523968 src/core/ext/resolver/dns/native/dns_resolver.c:191: dns resolution failed (will retry): {\"created\":\"@1485449004.624465594\",\"description\":\"OS Error\",\"errno\":-2,\"file\":\"src/core/lib/iomgr/resolve_address_posix.c\",\"file_line\":115,\"os_error\":\"Name or service not known\",\"syscall\":\"getaddrinfo\",\"target_address\":\"nonexistenthost.com:23456\"}\r\nD0126 17:43:24.624619 140668953523968 src/core/ext/resolver/dns/native/dns_resolver.c:197: retrying in 1.000000000 seconds\r\nI0126 17:43:25.625591 140668953523968 src/core/ext/resolver/dns/native/dns_resolver.c:191: dns resolution failed (will retry): {\"created\":\"@1485449005.625488591\",\"description\":\"OS Error\",\"errno\":-2,\"file\":\"src/core/lib/iomgr/resolve_address_posix.c\",\"file_line\":115,\"os_error\":\"Name or service not known\",\"syscall\":\"getaddrinfo\",\"target_address\":\"nonexistenthost.com:23456\"}\r\nD0126 17:43:25.625661 140668953523968 src/core/ext/resolver/dns/native/dns_resolver.c:197: retrying in 1.000000000 seconds\r\nI0126 17:43:26.626921 140668953523968 src/core/ext/resolver/dns/native/dns_resolver.c:191: dns resolution failed (will retry): {\"created\":\"@1485449006.626816840\",\"description\":\"OS Error\",\"errno\":-2,\"file\":\"src/core/lib/iomgr/resolve_address_posix.c\",\"file_line\":115,\"os_error\":\"Name or service not known\",\"syscall\":\"getaddrinfo\",\"target_address\":\"nonexistenthost.com:23456\"}\r\nD0126 17:43:26.626988 140668953523968 src/core/ext/resolver/dns/native/dns_resolver.c:197: retrying in 1.000000000 seconds\r\n```\r\n\r\nYour code for detecting if it's possible to connect to the host seems reasonable (the code itself has some async antipatterns in it - instead, you should run in the async context and shouldn't use Wait(). But the idea is alright). Alternatively, you could assign a deadline to your calls (so that they would fail if once fails to resolve the name for too long). You can also start a probing call with a short deadline to see if you can connect to the backend.\r\n\r\nAlso, I believe that the retries for DNS resolver are configurable (through `ChannelOption`s?), but I am not sure how that's done. @dgquintas, are the DNS resolver retries configurable by the enduser?"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/275452554",
    "html_url": "https://github.com/grpc/grpc/issues/9249#issuecomment-275452554",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/9249",
    "id": 275452554,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3NTQ1MjU1NA==",
    "user": {
      "login": "dgquintas",
      "id": 120217,
      "node_id": "MDQ6VXNlcjEyMDIxNw==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/120217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dgquintas",
      "html_url": "https://github.com/dgquintas",
      "followers_url": "https://api.github.com/users/dgquintas/followers",
      "following_url": "https://api.github.com/users/dgquintas/following{/other_user}",
      "gists_url": "https://api.github.com/users/dgquintas/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dgquintas/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dgquintas/subscriptions",
      "organizations_url": "https://api.github.com/users/dgquintas/orgs",
      "repos_url": "https://api.github.com/users/dgquintas/repos",
      "events_url": "https://api.github.com/users/dgquintas/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dgquintas/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-01-26T17:27:41Z",
    "updated_at": "2017-01-26T17:27:41Z",
    "author_association": "NONE",
    "body": "No, the number of retries is not configurable. The knobs we currently have are for the backoff retry timer (initial delay, multiplier, etc) but those are not yet exposed through channel args.\r\n\r\nI do find it surprising that the retry deadline is not increasing with every failure. Which version of core is this on?"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/275453377",
    "html_url": "https://github.com/grpc/grpc/issues/9249#issuecomment-275453377",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/9249",
    "id": 275453377,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3NTQ1MzM3Nw==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-01-26T17:30:41Z",
    "updated_at": "2017-01-26T17:30:41Z",
    "author_association": "CONTRIBUTOR",
    "body": "Should it ever time-out? It doesn't seem that is happening (unless the total timeout is very high)."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/275454319",
    "html_url": "https://github.com/grpc/grpc/issues/9249#issuecomment-275454319",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/9249",
    "id": 275454319,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3NTQ1NDMxOQ==",
    "user": {
      "login": "dgquintas",
      "id": 120217,
      "node_id": "MDQ6VXNlcjEyMDIxNw==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/120217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dgquintas",
      "html_url": "https://github.com/dgquintas",
      "followers_url": "https://api.github.com/users/dgquintas/followers",
      "following_url": "https://api.github.com/users/dgquintas/following{/other_user}",
      "gists_url": "https://api.github.com/users/dgquintas/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dgquintas/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dgquintas/subscriptions",
      "organizations_url": "https://api.github.com/users/dgquintas/orgs",
      "repos_url": "https://api.github.com/users/dgquintas/repos",
      "events_url": "https://api.github.com/users/dgquintas/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dgquintas/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-01-26T17:34:08Z",
    "updated_at": "2017-01-26T17:34:08Z",
    "author_association": "NONE",
    "body": "No, it doesn't time out on its own. For as long as the call is alive, it'll continue to retry."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/275515399",
    "html_url": "https://github.com/grpc/grpc/issues/9249#issuecomment-275515399",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/9249",
    "id": 275515399,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3NTUxNTM5OQ==",
    "user": {
      "login": "Azert-Mark",
      "id": 17311972,
      "node_id": "MDQ6VXNlcjE3MzExOTcy",
      "avatar_url": "https://avatars1.githubusercontent.com/u/17311972?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Azert-Mark",
      "html_url": "https://github.com/Azert-Mark",
      "followers_url": "https://api.github.com/users/Azert-Mark/followers",
      "following_url": "https://api.github.com/users/Azert-Mark/following{/other_user}",
      "gists_url": "https://api.github.com/users/Azert-Mark/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Azert-Mark/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Azert-Mark/subscriptions",
      "organizations_url": "https://api.github.com/users/Azert-Mark/orgs",
      "repos_url": "https://api.github.com/users/Azert-Mark/repos",
      "events_url": "https://api.github.com/users/Azert-Mark/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Azert-Mark/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-01-26T21:13:04Z",
    "updated_at": "2017-01-26T21:13:04Z",
    "author_association": "NONE",
    "body": "Hi @jtattermusch, thanks for getting back. I knew someone would point out not running it in an async context, this is due to this code running in a synchronous Castle Windsor installer, it doesn't have an async version unfortunately.\r\n\r\n@dgquintas this is on the latest core currently available on Nuget, 1.0.1 at time of writing.\r\n\r\nI guess my question is, should this try indefinitely and if it should, we need a way to limit either number of retries, or duration of retries. If the DNS doesn't exist at the start of the calls, the likelihood of it ever existing is quite slim I would assume.\r\n\r\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/275616159",
    "html_url": "https://github.com/grpc/grpc/issues/9249#issuecomment-275616159",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/9249",
    "id": 275616159,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3NTYxNjE1OQ==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-01-27T08:47:58Z",
    "updated_at": "2017-01-27T08:47:58Z",
    "author_association": "CONTRIBUTOR",
    "body": "I created the issue https://github.com/grpc/grpc/issues/9481 to look more into DNS resolver behavior.\r\nClosing this issue."
  }
]
