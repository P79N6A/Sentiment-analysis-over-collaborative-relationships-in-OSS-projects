[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/459638326",
    "html_url": "https://github.com/grpc/grpc/pull/17895#issuecomment-459638326",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/17895",
    "id": 459638326,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1OTYzODMyNg==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-01T07:59:37Z",
    "updated_at": "2019-02-01T07:59:37Z",
    "author_association": "CONTRIBUTOR",
    "body": "@rmstar  please provide more detail about what you want to test and how. Also, it's unlikely you'll need iptables in all the docker images out there.  Can you add iptables where you really need them (e.g. just to the C++ docker image).\r\nBtw, these tests won't work with bazel RBE, are you planning to just disable them in bazel?"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/459834406",
    "html_url": "https://github.com/grpc/grpc/pull/17895#issuecomment-459834406",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/17895",
    "id": 459834406,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1OTgzNDQwNg==",
    "user": {
      "login": "rmstar",
      "id": 2873805,
      "node_id": "MDQ6VXNlcjI4NzM4MDU=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/2873805?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rmstar",
      "html_url": "https://github.com/rmstar",
      "followers_url": "https://api.github.com/users/rmstar/followers",
      "following_url": "https://api.github.com/users/rmstar/following{/other_user}",
      "gists_url": "https://api.github.com/users/rmstar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rmstar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rmstar/subscriptions",
      "organizations_url": "https://api.github.com/users/rmstar/orgs",
      "repos_url": "https://api.github.com/users/rmstar/repos",
      "events_url": "https://api.github.com/users/rmstar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rmstar/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-01T19:11:42Z",
    "updated_at": "2019-02-01T19:11:42Z",
    "author_association": "CONTRIBUTOR",
    "body": "@jtattermusch I want to test the behavior of gRPC when the network connection is flaky. This is especially relevant to mobile, where network blips can expose issues in core.  See #17226 for example. \r\nI have a PR open for my test: #17903.\r\n\r\nI just need iptables in the container that runs C++ tests. So I need to update `templates/tools/dockerfile/cxx_deps.include`?\r\nAlso, can you please explain why the tests won't work with bazel RBE? Thanks!"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/460525898",
    "html_url": "https://github.com/grpc/grpc/pull/17895#issuecomment-460525898",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/17895",
    "id": 460525898,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2MDUyNTg5OA==",
    "user": {
      "login": "rmstar",
      "id": 2873805,
      "node_id": "MDQ6VXNlcjI4NzM4MDU=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/2873805?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rmstar",
      "html_url": "https://github.com/rmstar",
      "followers_url": "https://api.github.com/users/rmstar/followers",
      "following_url": "https://api.github.com/users/rmstar/following{/other_user}",
      "gists_url": "https://api.github.com/users/rmstar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rmstar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rmstar/subscriptions",
      "organizations_url": "https://api.github.com/users/rmstar/orgs",
      "repos_url": "https://api.github.com/users/rmstar/repos",
      "events_url": "https://api.github.com/users/rmstar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rmstar/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-05T06:15:32Z",
    "updated_at": "2019-02-05T06:15:32Z",
    "author_association": "CONTRIBUTOR",
    "body": "objc_macos_opt_native failure looks like #17814\r\n```\r\nTesting failed:\r\n\tNo such file or directory: '/Volumes/BuildData/tmpfs/src/github/grpc/workspace_objc_macos_opt_native/src/core/lib/gpr/log_posix.cc'\r\n\tNo input files\r\n** TEST FAILED **\r\n```\r\n\r\ngrpc_python_bazel_test failed with error: \r\n```\r\nFAIL: //src/python/grpcio_tests/tests/unit:_abort_test (see /root/.cache/bazel/_bazel_root/d2dc70c3d9da3fab488ba0dcbbd35051/execroot/com_github_grpc_grpc/bazel-out/k8-fastbuild/testlogs/src/python/grpcio_tests/tests/unit/_abort_test/test.log)\r\nINFO: From Testing //src/python/grpcio_tests/tests/unit:_abort_test:\r\n==================== Test output for //src/python/grpcio_tests/tests/unit:_abort_test:\r\ntest_abort (__main__.AbortTest) ... ok\r\ntest_abort_does_not_leak_local_vars (__main__.AbortTest) ... FAIL\r\ntest_abort_with_status (__main__.AbortTest) ... ok\r\ntest_invalid_code (__main__.AbortTest) ... ok\r\n======================================================================\r\nFAIL: test_abort_does_not_leak_local_vars (__main__.AbortTest)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/root/.cache/bazel/_bazel_root/d2dc70c3d9da3fab488ba0dcbbd35051/execroot/com_github_grpc_grpc/bazel-out/k8-fastbuild/bin/src/python/grpcio_tests/tests/unit/_abort_test.runfiles/com_github_grpc_grpc/src/python/grpcio_tests/tests/unit/_abort_test.py\", line 130, in test_abort_does_not_leak_local_vars\r\n    self.assertIsNone(weak_ref())\r\nAssertionError: <__main__._Object object at 0x7fc0eee5bd50> is not None\r\n----------------------------------------------------------------------\r\nRan 4 tests in 0.116s\r\nFAILED (failures=1)\r\n``` \r\nI don't see an open issue for this, will open one.\r\n\r\nTSAN C++ failure is #17335.\r\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/460526308",
    "html_url": "https://github.com/grpc/grpc/pull/17895#issuecomment-460526308",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/17895",
    "id": 460526308,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2MDUyNjMwOA==",
    "user": {
      "login": "rmstar",
      "id": 2873805,
      "node_id": "MDQ6VXNlcjI4NzM4MDU=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/2873805?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rmstar",
      "html_url": "https://github.com/rmstar",
      "followers_url": "https://api.github.com/users/rmstar/followers",
      "following_url": "https://api.github.com/users/rmstar/following{/other_user}",
      "gists_url": "https://api.github.com/users/rmstar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rmstar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rmstar/subscriptions",
      "organizations_url": "https://api.github.com/users/rmstar/orgs",
      "repos_url": "https://api.github.com/users/rmstar/repos",
      "events_url": "https://api.github.com/users/rmstar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rmstar/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-05T06:17:55Z",
    "updated_at": "2019-02-05T06:17:55Z",
    "author_association": "CONTRIBUTOR",
    "body": "@jtattermusch I have restricted my changes to templates/tools/dockerfile/test/cxx_jessie_x64/Dockerfile.template, so only the container used for running c++ tests will be updated."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/461195391",
    "html_url": "https://github.com/grpc/grpc/pull/17895#issuecomment-461195391",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/17895",
    "id": 461195391,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2MTE5NTM5MQ==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-06T21:31:04Z",
    "updated_at": "2019-02-06T21:31:04Z",
    "author_association": "CONTRIBUTOR",
    "body": "> @jtattermusch I want to test the behavior of gRPC when the network connection is flaky. This is especially relevant to mobile, where network blips can expose issues in core. See #17226 for example.\r\n> I have a PR open for my test: #17903.\r\n> \r\n> I just need iptables in the container that runs C++ tests. So I need to update `templates/tools/dockerfile/cxx_deps.include`?\r\n> Also, can you please explain why the tests won't work with bazel RBE? Thanks!\r\n\r\nBazel RBE is a managed test execution framework and I think the capabilities are somewhat restricted.\r\nThat said, the tests on Bazel RBE do run exclusively (1VM executes just one test at a time), but I don't think they run as root (which is a good thing in general) and it might not be possible to run set all the settings the way you need to. Also, setting a custom image for Bazel RBE (one that has iptables) is something we haven't tried."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/463328456",
    "html_url": "https://github.com/grpc/grpc/pull/17895#issuecomment-463328456",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/17895",
    "id": 463328456,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2MzMyODQ1Ng==",
    "user": {
      "login": "rmstar",
      "id": 2873805,
      "node_id": "MDQ6VXNlcjI4NzM4MDU=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/2873805?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rmstar",
      "html_url": "https://github.com/rmstar",
      "followers_url": "https://api.github.com/users/rmstar/followers",
      "following_url": "https://api.github.com/users/rmstar/following{/other_user}",
      "gists_url": "https://api.github.com/users/rmstar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rmstar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rmstar/subscriptions",
      "organizations_url": "https://api.github.com/users/rmstar/orgs",
      "repos_url": "https://api.github.com/users/rmstar/repos",
      "events_url": "https://api.github.com/users/rmstar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rmstar/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-13T19:14:02Z",
    "updated_at": "2019-02-13T19:14:02Z",
    "author_association": "CONTRIBUTOR",
    "body": "This change is not required because we're installing iptables as part of the test setup in #17903. I'll close this PR."
  }
]
