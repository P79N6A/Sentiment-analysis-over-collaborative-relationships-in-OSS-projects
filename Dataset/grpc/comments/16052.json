[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/406366317",
    "html_url": "https://github.com/grpc/grpc/issues/16052#issuecomment-406366317",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/16052",
    "id": 406366317,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNjM2NjMxNw==",
    "user": {
      "login": "nmartelwork",
      "id": 41381793,
      "node_id": "MDQ6VXNlcjQxMzgxNzkz",
      "avatar_url": "https://avatars0.githubusercontent.com/u/41381793?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nmartelwork",
      "html_url": "https://github.com/nmartelwork",
      "followers_url": "https://api.github.com/users/nmartelwork/followers",
      "following_url": "https://api.github.com/users/nmartelwork/following{/other_user}",
      "gists_url": "https://api.github.com/users/nmartelwork/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nmartelwork/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nmartelwork/subscriptions",
      "organizations_url": "https://api.github.com/users/nmartelwork/orgs",
      "repos_url": "https://api.github.com/users/nmartelwork/repos",
      "events_url": "https://api.github.com/users/nmartelwork/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nmartelwork/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-19T18:09:49Z",
    "updated_at": "2018-07-19T18:09:49Z",
    "author_association": "NONE",
    "body": "Interesting... I tried v1.13.1 branch after seeing a handful of reports indicating cross platform build issues.  This worked a tad better in that the first project ZLIB built, but then died in the alloc.cc compilation due to the same error as above.  The <grpc/support/port_platform.h> was not found.  What is this build looking for? I assume there is something in the environment that identifies what the target build is looking for and that maybe a path is altered based upon that target?\r\nHere is the snip from the failure:\r\nnmartel@ubuntu:~/grpc$ make HAS_PKG_CONFIG=false \\\r\n>     CPPFLAGS=\"-I/home/nmartel/grpc/include/grpc++ -I/opt/windriver/wrlinux/10.17.41/sysroots/corei7-64-wrs-linux/usr/include\" \\\r\n>     CC=x86_64-wrs-linux-gcc \\\r\n>     CXX=x86_64-wrs-linux-g++ \\\r\n>     RANLIB=x86_64-wrs-linux-ranlib \\\r\n>     LD=x86_64-wrs-linux-ld \\\r\n>     LDXX=x86_64-wrs-linux-g++ \\\r\n>     AR=x86_64-wrs-linux-ar \\\r\n>     STRIP=x86_64-wrs-linux-strip \\\r\n>     PROTOBUF_CONFIG_OPTS=\"--host=x86_64-wrs-linux-gnueabi --with protoc=/usr/local/bin/protoc\" static\r\n[MAKE]    Generating /home/nmartel/grpc/libs/opt/pkgconfig/grpc.pc\r\n[MAKE]    Generating /home/nmartel/grpc/libs/opt/pkgconfig/grpc_unsecure.pc\r\n[MAKE]    Generating cache.mk\r\n[C]       Compiling third_party/zlib/adler32.c\r\n[C]       Compiling third_party/zlib/compress.c\r\n[C]       Compiling third_party/zlib/crc32.c\r\n[C]       Compiling third_party/zlib/deflate.c\r\n[C]       Compiling third_party/zlib/gzclose.c\r\n[C]       Compiling third_party/zlib/gzlib.c\r\n[C]       Compiling third_party/zlib/gzread.c\r\n[C]       Compiling third_party/zlib/gzwrite.c\r\n[C]       Compiling third_party/zlib/infback.c\r\n[C]       Compiling third_party/zlib/inffast.c\r\n[C]       Compiling third_party/zlib/inflate.c\r\n[C]       Compiling third_party/zlib/inftrees.c\r\n[C]       Compiling third_party/zlib/trees.c\r\n[C]       Compiling third_party/zlib/uncompr.c\r\n[C]       Compiling third_party/zlib/zutil.c\r\n[AR]      Creating /home/nmartel/grpc/libs/opt/libz.a\r\n[CXX]     Compiling src/core/lib/gpr/alloc.cc\r\nsrc/core/lib/gpr/alloc.cc:19:10: fatal error: grpc/support/port_platform.h: No such file or directory\r\n #include <grpc/support/port_platform.h>\r\n          ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\ncompilation terminated.\r\nMakefile:2836: recipe for target '/home/nmartel/grpc/objs/opt/src/core/lib/gpr/alloc.o' failed\r\nmake: *** [/home/nmartel/grpc/objs/opt/src/core/lib/gpr/alloc.o] Error 1\r\nnmartel@ubuntu:~/grpc$ \r\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/413626659",
    "html_url": "https://github.com/grpc/grpc/issues/16052#issuecomment-413626659",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/16052",
    "id": 413626659,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMzYyNjY1OQ==",
    "user": {
      "login": "nmartelwork",
      "id": 41381793,
      "node_id": "MDQ6VXNlcjQxMzgxNzkz",
      "avatar_url": "https://avatars0.githubusercontent.com/u/41381793?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nmartelwork",
      "html_url": "https://github.com/nmartelwork",
      "followers_url": "https://api.github.com/users/nmartelwork/followers",
      "following_url": "https://api.github.com/users/nmartelwork/following{/other_user}",
      "gists_url": "https://api.github.com/users/nmartelwork/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nmartelwork/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nmartelwork/subscriptions",
      "organizations_url": "https://api.github.com/users/nmartelwork/orgs",
      "repos_url": "https://api.github.com/users/nmartelwork/repos",
      "events_url": "https://api.github.com/users/nmartelwork/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nmartelwork/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-16T17:39:33Z",
    "updated_at": "2018-08-16T18:19:17Z",
    "author_association": "NONE",
    "body": "I've come back around to this task... it is now blocking my development.\r\nI checked out what seems to be the latest stable branch (v1.14.x).\r\nI checked out a fresh copy of gRPC with the third party tools.  Then, descended into protobuf.\r\nDoing the following:\r\n> make clean\r\nConfigured to install to another prefix, targeting the Yocto cross-toolchain\r\n> ./configure --disable-shared --with-protoc=protoc --enable-static --prefix=\"/opt/windriver/wrlinux/10.17.41/sysroots/i686-wrlinuxsdk-linux\"\r\n> source /opt/windriver/wrlinux/10.17.41/environment-setup-core2-32-wrs-linux\r\nSets me up with an appropriately configured environment for a cross build.\r\n> make && make check \r\nthese now finish cleanly.\r\n> sudo make install \r\nFails with the following message:\r\ncyber_build@ubuntu:~/grpc/third_party/protobuf$ sudo make install\r\n[sudo] password for cyber_build: \r\nMaking install in .\r\nmake[1]: Entering directory '/home/cyber_build/grpc/third_party/protobuf'\r\nmake[2]: Entering directory '/home/cyber_build/grpc/third_party/protobuf'\r\nmake[2]: Nothing to be done for 'install-exec-am'.\r\n /bin/mkdir -p '/opt/windriver/wrlinux/10.17.41/sysroots/i686-wrlinuxsdk-linux/lib/pkgconfig'\r\n /usr/bin/install -c -m 644 protobuf.pc protobuf-lite.pc '/opt/windriver/wrlinux/10.17.41/sysroots/i686-wrlinuxsdk-linux/lib/pkgconfig'\r\nmake[2]: Leaving directory '/home/cyber_build/grpc/third_party/protobuf'\r\nmake[1]: Leaving directory '/home/cyber_build/grpc/third_party/protobuf'\r\nMaking install in src\r\nmake[1]: Entering directory '/home/cyber_build/grpc/third_party/protobuf/src'\r\nmake  install-am\r\nmake[2]: Entering directory '/home/cyber_build/grpc/third_party/protobuf/src'\r\nmake[3]: Entering directory '/home/cyber_build/grpc/third_party/protobuf/src'\r\n /bin/mkdir -p '/opt/windriver/wrlinux/10.17.41/sysroots/i686-wrlinuxsdk-linux/lib'\r\n /bin/bash ../libtool   --mode=install /usr/bin/install -c   libprotobuf-lite.la libprotobuf.la libprotoc.la '/opt/windriver/wrlinux/10.17.41/sysroots/i686-wrlinuxsdk-linux/lib'\r\nlibtool: install: /usr/bin/install -c .libs/libprotobuf-lite.lai /opt/windriver/wrlinux/10.17.41/sysroots/i686-wrlinuxsdk-linux/lib/libprotobuf-lite.la\r\nlibtool: install: /usr/bin/install -c .libs/libprotobuf.lai /opt/windriver/wrlinux/10.17.41/sysroots/i686-wrlinuxsdk-linux/lib/libprotobuf.la\r\nlibtool: install: /usr/bin/install -c .libs/libprotoc.lai /opt/windriver/wrlinux/10.17.41/sysroots/i686-wrlinuxsdk-linux/lib/libprotoc.la\r\nlibtool: install: /usr/bin/install -c .libs/libprotobuf-lite.a /opt/windriver/wrlinux/10.17.41/sysroots/i686-wrlinuxsdk-linux/lib/libprotobuf-lite.a\r\nlibtool: install: chmod 644 /opt/windriver/wrlinux/10.17.41/sysroots/i686-wrlinuxsdk-linux/lib/libprotobuf-lite.a\r\nlibtool: install: i686-wrs-linux-ranlib /opt/windriver/wrlinux/10.17.41/sysroots/i686-wrlinuxsdk-linux/lib/libprotobuf-lite.a\r\n../libtool: line 1734: i686-wrs-linux-ranlib: command not found\r\nMakefile:2142: recipe for target 'install-libLTLIBRARIES' failed\r\nmake[3]: *** [install-libLTLIBRARIES] Error 127\r\nmake[3]: Leaving directory '/home/cyber_build/grpc/third_party/protobuf/src'\r\nMakefile:8027: recipe for target 'install-am' failed\r\nmake[2]: *** [install-am] Error 2\r\nmake[2]: Leaving directory '/home/cyber_build/grpc/third_party/protobuf/src'\r\nMakefile:8021: recipe for target 'install' failed\r\nmake[1]: *** [install] Error 2\r\nmake[1]: Leaving directory '/home/cyber_build/grpc/third_party/protobuf/src'\r\nMakefile:1558: recipe for target 'install-recursive' failed\r\nmake: *** [install-recursive] Error 1\r\n\r\nTwo observations:\r\n1) Even though I specified a prefix, the copy didn't go a fully proper destination.\r\nlibtool: install: /usr/bin/install -c .libs/libprotoc.lai /opt/windriver/wrlinux/10.17.41/sysroots/i686-wrlinuxsdk-linux/lib/libprotoc.la   should really be ending up in .../usr/lib  or .../usr/local/lib ?\r\n2) ../libtool: line 1734: i686-wrs-linux-ranlib: command not found\r\nThe cross toolchain does specify ranlib.  So is the environment variable being used to call this out wrong?  OR is there something else wrong and the toolname is just a red herring?\r\n\r\nNote that the environment setup did properly define the RANLIB environment variable.\r\ncyber_build@ubuntu:~/grpc/third_party/protobuf$ env | grep RANLIB\r\nRANLIB=i686-wrs-linux-ranlib\r\n"
  }
]
