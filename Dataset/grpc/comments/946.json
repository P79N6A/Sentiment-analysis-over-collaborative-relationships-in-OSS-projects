[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/77206241",
    "html_url": "https://github.com/grpc/grpc/issues/946#issuecomment-77206241",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/946",
    "id": 77206241,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3MjA2MjQx",
    "user": {
      "login": "ctiller",
      "id": 10120821,
      "node_id": "MDQ6VXNlcjEwMTIwODIx",
      "avatar_url": "https://avatars3.githubusercontent.com/u/10120821?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ctiller",
      "html_url": "https://github.com/ctiller",
      "followers_url": "https://api.github.com/users/ctiller/followers",
      "following_url": "https://api.github.com/users/ctiller/following{/other_user}",
      "gists_url": "https://api.github.com/users/ctiller/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ctiller/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ctiller/subscriptions",
      "organizations_url": "https://api.github.com/users/ctiller/orgs",
      "repos_url": "https://api.github.com/users/ctiller/repos",
      "events_url": "https://api.github.com/users/ctiller/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ctiller/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-03-04T17:40:01Z",
    "updated_at": "2015-03-04T17:40:01Z",
    "author_association": "MEMBER",
    "body": "Do you happen to have a client that reproduces this available? (It'd save\nme a little time)\n\nMy guess is that we're hitting an already deleted call, which would\nprobably be a bug in the core library. I'm going to run it under ASAN (make\nCONFIG=asan buildtests_c) and see if anything shows up.\n\nOn Wed, Mar 4, 2015 at 8:40 AM Martin Kustermann notifications@github.com\nwrote:\n\n> Using grpc at 1acbf43\n> https://github.com/grpc/grpc/commit/1acbf435748b310a11af018dbd3793edf5b42732\n> and running the C++ grpc-common/cpp/helloworld example segfaults when\n> hitting it very hard at roughly 15k requests/second.\n> \n> $ gdb --args ./greetings_server\n> (gdb) r\n> ...\n> Server listening on 0.0.0.0:50051\n> E0304 17:34:00.805358617   30051 sync_posix.c:55] assertion failed: result == 0\n> (gdb) bt\n> #0  0x00007ffff696dcc9 in __GI_raise (sig=sig@entry=6) at ../nptl/sysdeps/unix/sysv/linux/raise.c:56\n> #1  0x00007ffff69710d8 in __GI_abort () at abort.c:89\n> #2  0x00007ffff62fbfa8 in gpr_mu_lock (mu=mu@entry=0x7fffb00bdc28) at src/core/support/sync_posix.c:55\n> #3  0x00007ffff79d9716 in lock (call=0x7fffb00bdc10) at src/core/surface/call.c:360\n> #4  unlock (call=call@entry=0x7fffb00bdc10) at src/core/surface/call.c:406\n> #5  0x00007ffff79d9b6d in grpc_call_start_ioreq_and_call_back (call=0x7fffb00bdc10, reqs=reqs@entry=0x7fffe65c6af0,\n>     nreqs=nreqs@entry=2, on_complete=on_complete@entry=0x7ffff79dca20 <publish_registered_or_batch>, user_data=0x6143f0)\n>     at src/core/surface/call.c:809\n> #6  0x00007ffff79dd722 in begin_call (calld=calld@entry=0x7fffb00be0e8, rc=rc@entry=0x7fffe65c6b80, server=0x6142e0)\n>     at src/core/surface/server.c:1073\n> #7  0x00007ffff79dd8aa in queue_call_request (server=server@entry=0x6142e0, rc=rc@entry=0x7fffe65c6b80)\n>     at src/core/surface/server.c:950\n> #8  0x00007ffff79dea45 in grpc_server_request_registered_call (server=0x6142e0, rm=0x611dd0, call=0x614410, deadline=0x614418,\n>     initial_metadata=0x614428, optional_payload=0x614440, cq_bind=0x7fff6c00cbd0, tag=0x6143f0) at src/core/surface/server.c:990\n> #9  0x00007ffff776b1a2 in Request (server=0x6142e0, this=0x6143f0) at src/cpp/server/server.cc:82\n> #10 grpc::Server::RunRpc (this=0x619530) at src/cpp/server/server.cc:392\n> #11 0x00007ffff776d641 in operator() (this=0x7fffe65c6e50) at /usr/include/c++/4.8/functional:2464\n> #12 operator() (__closure=0x613140) at src/cpp/server/thread_pool.cc:54\n> #13 _M_invoke<> (this=0x613140) at /usr/include/c++/4.8/functional:1732\n> #14 operator() (this=0x613140) at /usr/include/c++/4.8/functional:1720\n> #15 std::thread::_Implstd::_Bind_simple<grpc::ThreadPool::ThreadPool(int)::__lambda0() >::_M_run(void) (this=0x613128)\n>     at /usr/include/c++/4.8/thread:115\n> #16 0x00007ffff6fc3bf0 in ?? () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n> #17 0x00007ffff6508182 in start_thread (arg=0x7fffe65c7700) at pthread_create.c:312\n> #18 0x00007ffff6a3147d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\n> \n> I've added a small printf() statement to get the return value of\n> pthread_mutex_lock and it turns out to be 22 which means EINVAL.\n> \n> â€”\n> Reply to this email directly or view it on GitHub\n> https://github.com/grpc/grpc/issues/946.\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/77344043",
    "html_url": "https://github.com/grpc/grpc/issues/946#issuecomment-77344043",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/946",
    "id": 77344043,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3MzQ0MDQz",
    "user": {
      "login": "mkustermann",
      "id": 5757092,
      "node_id": "MDQ6VXNlcjU3NTcwOTI=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/5757092?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mkustermann",
      "html_url": "https://github.com/mkustermann",
      "followers_url": "https://api.github.com/users/mkustermann/followers",
      "following_url": "https://api.github.com/users/mkustermann/following{/other_user}",
      "gists_url": "https://api.github.com/users/mkustermann/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mkustermann/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mkustermann/subscriptions",
      "organizations_url": "https://api.github.com/users/mkustermann/orgs",
      "repos_url": "https://api.github.com/users/mkustermann/repos",
      "events_url": "https://api.github.com/users/mkustermann/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mkustermann/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-03-05T10:53:06Z",
    "updated_at": "2015-03-05T10:53:06Z",
    "author_association": "NONE",
    "body": "I've sent you a reproduction of the bug via email.\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/77386213",
    "html_url": "https://github.com/grpc/grpc/issues/946#issuecomment-77386213",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/946",
    "id": 77386213,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3Mzg2MjEz",
    "user": {
      "login": "vjpai",
      "id": 8864912,
      "node_id": "MDQ6VXNlcjg4NjQ5MTI=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/8864912?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vjpai",
      "html_url": "https://github.com/vjpai",
      "followers_url": "https://api.github.com/users/vjpai/followers",
      "following_url": "https://api.github.com/users/vjpai/following{/other_user}",
      "gists_url": "https://api.github.com/users/vjpai/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vjpai/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vjpai/subscriptions",
      "organizations_url": "https://api.github.com/users/vjpai/orgs",
      "repos_url": "https://api.github.com/users/vjpai/repos",
      "events_url": "https://api.github.com/users/vjpai/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vjpai/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-03-05T15:40:21Z",
    "updated_at": "2015-03-05T15:40:21Z",
    "author_association": "MEMBER",
    "body": "I'll be looking at it now.\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/77426953",
    "html_url": "https://github.com/grpc/grpc/issues/946#issuecomment-77426953",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/946",
    "id": 77426953,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3NDI2OTUz",
    "user": {
      "login": "vjpai",
      "id": 8864912,
      "node_id": "MDQ6VXNlcjg4NjQ5MTI=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/8864912?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vjpai",
      "html_url": "https://github.com/vjpai",
      "followers_url": "https://api.github.com/users/vjpai/followers",
      "following_url": "https://api.github.com/users/vjpai/following{/other_user}",
      "gists_url": "https://api.github.com/users/vjpai/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vjpai/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vjpai/subscriptions",
      "organizations_url": "https://api.github.com/users/vjpai/orgs",
      "repos_url": "https://api.github.com/users/vjpai/repos",
      "events_url": "https://api.github.com/users/vjpai/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vjpai/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-03-05T18:59:49Z",
    "updated_at": "2015-03-05T19:00:04Z",
    "author_association": "MEMBER",
    "body": "Ok, so I've seen that your custom HTTP/2 client seems to wrap the HTTP/2 stream ID after 24-bits. This is non-compliant with the spec (as the stream ID is supposed to keep increasing), but we need to be checking for it also in the gRPC libary. I've created a separate issue #957 for us to deal with that problem. I believe that recent changes in HEAD plus the changes that will be needed for #957 should solve the current problem, but I will keep checking it out. Thanks for sending your code.\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/124263225",
    "html_url": "https://github.com/grpc/grpc/issues/946#issuecomment-124263225",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/946",
    "id": 124263225,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyNDI2MzIyNQ==",
    "user": {
      "login": "mikepb",
      "id": 637039,
      "node_id": "MDQ6VXNlcjYzNzAzOQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/637039?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mikepb",
      "html_url": "https://github.com/mikepb",
      "followers_url": "https://api.github.com/users/mikepb/followers",
      "following_url": "https://api.github.com/users/mikepb/following{/other_user}",
      "gists_url": "https://api.github.com/users/mikepb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mikepb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mikepb/subscriptions",
      "organizations_url": "https://api.github.com/users/mikepb/orgs",
      "repos_url": "https://api.github.com/users/mikepb/repos",
      "events_url": "https://api.github.com/users/mikepb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mikepb/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-07-23T23:13:17Z",
    "updated_at": "2015-07-23T23:13:17Z",
    "author_association": "NONE",
    "body": "I have also run into this issue using the iOS binding. The bug is reproducible on the latest master after attempting multiple connections to the RPC server within 30 seconds.\n\n```\n#2  0x000000019411eb18 in abort ()\n#3  0x000000010016db94 in gpr_mu_lock at /Users/mikepb/Developer/M2Demo/Pods/gRPC/src/core/support/sync_posix.c:48\n#4  0x000000010015bb68 in grpc_pollset_add_fd at /Users/mikepb/Developer/M2Demo/Pods/gRPC/src/core/iomgr/pollset_posix.c:107\n#5  0x000000010015ccc8 in grpc_pollset_set_add_fd at /Users/mikepb/Developer/M2Demo/Pods/gRPC/src/core/iomgr/pollset_set_posix.c:105\n#6  0x000000010016e0d0 in grpc_tcp_client_connect at /Users/mikepb/Developer/M2Demo/Pods/gRPC/src/core/iomgr/tcp_client_posix.c:243\n#7  0x0000000100143b4c in connector_connect at /Users/mikepb/Developer/M2Demo/Pods/gRPC/src/core/surface/channel_create.c:99\n#8  0x000000010014a8c8 in grpc_connector_connect at /Users/mikepb/Developer/M2Demo/Pods/gRPC/src/core/client_config/connector.c:48\n#9  0x000000010016d470 in continue_connect at /Users/mikepb/Developer/M2Demo/Pods/gRPC/src/core/client_config/subchannel.c:298\n#10 0x000000010016cbfc in start_connect at /Users/mikepb/Developer/M2Demo/Pods/gRPC/src/core/client_config/subchannel.c:307\n#11 0x000000010016ca20 in grpc_subchannel_create_call at /Users/mikepb/Developer/M2Demo/Pods/gRPC/src/core/client_config/subchannel.c:349\n#12 0x000000010014946c in picked_target at /Users/mikepb/Developer/M2Demo/Pods/gRPC/src/core/channel/client_channel.c:232\n#13 0x000000010015a16c in pf_pick at /Users/mikepb/Developer/M2Demo/Pods/gRPC/src/core/client_config/lb_policies/pick_first.c:109\n#14 0x0000000100154e88 in grpc_lb_policy_pick at /Users/mikepb/Developer/M2Demo/Pods/gRPC/src/core/client_config/lb_policy.c:74\n#15 0x0000000100149254 in pick_target at /Users/mikepb/Developer/M2Demo/Pods/gRPC/src/core/channel/client_channel.c:250\n#16 0x0000000100148bf4 in perform_transport_stream_op at /Users/mikepb/Developer/M2Demo/Pods/gRPC/src/core/channel/client_channel.c:366\n#17 0x0000000100147f18 in cc_start_transport_stream_op at /Users/mikepb/Developer/M2Demo/Pods/gRPC/src/core/channel/client_channel.c:392\n#18 0x00000001001422b0 in execute_op at /Users/mikepb/Developer/M2Demo/Pods/gRPC/src/core/surface/call.c:1163\n#19 0x000000010013f31c in unlock at /Users/mikepb/Developer/M2Demo/Pods/gRPC/src/core/surface/call.c:524\n#20 0x000000010013f714 in grpc_call_start_ioreq_and_call_back at /Users/mikepb/Developer/M2Demo/Pods/gRPC/src/core/surface/call.c:1083\n#21 0x00000001001402fc in grpc_call_start_batch at /Users/mikepb/Developer/M2Demo/Pods/gRPC/src/core/surface/call.c:1471\n#22 0x0000000100136584 in -[GRPCWrappedCall startBatchWithOperations:errorHandler:] at /Users/mikepb/Developer/M2Demo/Pods/gRPC/src/objective-c/GRPCClient/private/GRPCWrappedCall.m:269\n#23 0x000000010013626c in -[GRPCWrappedCall startBatchWithOperations:] at /Users/mikepb/Developer/M2Demo/Pods/gRPC/src/objective-c/GRPCClient/private/GRPCWrappedCall.m:259\n#24 0x00000001001309c8 in -[GRPCCall sendHeaders:] at /Users/mikepb/Developer/M2Demo/Pods/gRPC/src/objective-c/GRPCClient/GRPCCall.m:231\n#25 0x0000000100131f5c in -[GRPCCall startWithWriteable:] at /Users/mikepb/Developer/M2Demo/Pods/gRPC/src/objective-c/GRPCClient/GRPCCall.m:344\n```\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/128456087",
    "html_url": "https://github.com/grpc/grpc/issues/946#issuecomment-128456087",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/946",
    "id": 128456087,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyODQ1NjA4Nw==",
    "user": {
      "login": "vjpai",
      "id": 8864912,
      "node_id": "MDQ6VXNlcjg4NjQ5MTI=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/8864912?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vjpai",
      "html_url": "https://github.com/vjpai",
      "followers_url": "https://api.github.com/users/vjpai/followers",
      "following_url": "https://api.github.com/users/vjpai/following{/other_user}",
      "gists_url": "https://api.github.com/users/vjpai/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vjpai/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vjpai/subscriptions",
      "organizations_url": "https://api.github.com/users/vjpai/orgs",
      "repos_url": "https://api.github.com/users/vjpai/repos",
      "events_url": "https://api.github.com/users/vjpai/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vjpai/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-08-06T17:43:49Z",
    "updated_at": "2015-08-06T17:43:49Z",
    "author_association": "MEMBER",
    "body": "I believe that the initial reported bug is now working. Issue #957 was addressed in the code, but further tests are necessary and have been pushed to GA. I recommend closing this issue and reopening a new issue with the problem reported by @mikepb as I don't think that they are the same codepath at all.\n\nIs everyone ok with that?\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/128470806",
    "html_url": "https://github.com/grpc/grpc/issues/946#issuecomment-128470806",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/946",
    "id": 128470806,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyODQ3MDgwNg==",
    "user": {
      "login": "mikepb",
      "id": 637039,
      "node_id": "MDQ6VXNlcjYzNzAzOQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/637039?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mikepb",
      "html_url": "https://github.com/mikepb",
      "followers_url": "https://api.github.com/users/mikepb/followers",
      "following_url": "https://api.github.com/users/mikepb/following{/other_user}",
      "gists_url": "https://api.github.com/users/mikepb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mikepb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mikepb/subscriptions",
      "organizations_url": "https://api.github.com/users/mikepb/orgs",
      "repos_url": "https://api.github.com/users/mikepb/repos",
      "events_url": "https://api.github.com/users/mikepb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mikepb/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-08-06T18:42:55Z",
    "updated_at": "2015-08-06T18:42:55Z",
    "author_association": "NONE",
    "body": "Sounds great. I found that using the gRPC client to connect to a `http://` server that does not implement gRPC reliably triggers the bug.\n"
  }
]
