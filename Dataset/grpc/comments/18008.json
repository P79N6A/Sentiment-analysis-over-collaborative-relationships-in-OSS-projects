[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/462525641",
    "html_url": "https://github.com/grpc/grpc/issues/18008#issuecomment-462525641",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/18008",
    "id": 462525641,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2MjUyNTY0MQ==",
    "user": {
      "login": "markdroth",
      "id": 18664614,
      "node_id": "MDQ6VXNlcjE4NjY0NjE0",
      "avatar_url": "https://avatars2.githubusercontent.com/u/18664614?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/markdroth",
      "html_url": "https://github.com/markdroth",
      "followers_url": "https://api.github.com/users/markdroth/followers",
      "following_url": "https://api.github.com/users/markdroth/following{/other_user}",
      "gists_url": "https://api.github.com/users/markdroth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/markdroth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/markdroth/subscriptions",
      "organizations_url": "https://api.github.com/users/markdroth/orgs",
      "repos_url": "https://api.github.com/users/markdroth/repos",
      "events_url": "https://api.github.com/users/markdroth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/markdroth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-11T22:46:41Z",
    "updated_at": "2019-02-11T22:46:41Z",
    "author_association": "MEMBER",
    "body": "Another example:\r\n\r\nhttps://source.cloud.google.com/results/invocations/1067ccad-33f1-4f7e-8c8b-c9cf2f574b03/targets/github%2Fgrpc%2Fc_linux_tsan_native_x64_clang7.0/tests\r\n\r\n```\r\n==================\r\nWARNING: ThreadSanitizer: heap-use-after-free (pid=17012)\r\n  Read of size 8 at 0x7b5400630300 by thread T97:\r\n    #0 grpc_core::RefCountedPtr<grpc_core::channelz::SubchannelNode>::get() const /var/local/git/grpc/./src/core/lib/gprpp/ref_counted_ptr.h:142:27 (concurrent_connectivity_test+0x59ce82)\r\n    #1 grpc_core::Subchannel::channelz_node() /var/local/git/grpc/src/core/ext/filters/client_channel/subchannel.cc:739:25 (concurrent_connectivity_test+0x59ab2f)\r\n    #2 grpc_core::SubchannelList<grpc_core::(anonymous namespace)::PickFirst::PickFirstSubchannelList, grpc_core::(anonymous namespace)::PickFirst::PickFirstSubchannelData>::PopulateChildRefsList(grpc_core::InlinedVector<long, 10ul>*) /var/local/git/grpc/./src/core/ext/filters/client_channel/lb_policy/subchannel_list.h:206:43 (concurrent_connectivity_test+0x6e2dfa)\r\n    #3 grpc_core::(anonymous namespace)::PickFirst::UpdateChildRefsLocked() /var/local/git/grpc/src/core/ext/filters/client_channel/lb_policy/pick_first/pick_first.cc:327:23 (concurrent_connectivity_test+0x6e2c95)\r\n    #4 grpc_core::(anonymous namespace)::PickFirst::AutoChildRefsUpdater::~AutoChildRefsUpdater() /var/local/git/grpc/src/core/ext/filters/client_channel/lb_policy/pick_first/pick_first.cc:124:36 (concurrent_connectivity_test+0x6de92e)\r\n    #5 grpc_core::(anonymous namespace)::PickFirst::PickFirstSubchannelData::ProcessConnectivityChangeLocked(grpc_connectivity_state, grpc_error*) /var/local/git/grpc/src/core/ext/filters/client_channel/lb_policy/pick_first/pick_first.cc:554:1 (concurrent_connectivity_test+0x6e09dd)\r\n    #6 grpc_core::SubchannelData<grpc_core::(anonymous namespace)::PickFirst::PickFirstSubchannelList, grpc_core::(anonymous namespace)::PickFirst::PickFirstSubchannelData>::OnConnectivityChangedLocked(void*, grpc_error*) /var/local/git/grpc/./src/core/ext/filters/client_channel/lb_policy/subchannel_list.h:465:7 (concurrent_connectivity_test+0x6e1b39)\r\n    #7 grpc_combiner_continue_exec_ctx() /var/local/git/grpc/src/core/lib/iomgr/combiner.cc:268:5 (concurrent_connectivity_test+0x5bb3d2)\r\n    #8 grpc_core::ExecCtx::Flush() /var/local/git/grpc/src/core/lib/iomgr/exec_ctx.cc:151:17 (concurrent_connectivity_test+0x5246aa)\r\n    #9 grpc_core::ExecCtx::~ExecCtx() /var/local/git/grpc/./src/core/lib/iomgr/exec_ctx.h:108:5 (concurrent_connectivity_test+0x5163c2)\r\n    #10 grpc_channel_check_connectivity_state /var/local/git/grpc/src/core/ext/filters/client_channel/channel_connectivity.cc:55:1 (concurrent_connectivity_test+0x56f6db)\r\n    #11 create_loop_destroy(void*) /var/local/git/grpc/test/core/surface/concurrent_connectivity_test.cc:71:11 (concurrent_connectivity_test+0x514952)\r\n    #12 grpc_core::(anonymous namespace)::ThreadInternalsPosix::ThreadInternalsPosix(char const*, void (*)(void*), void*, bool*)::{lambda(void*)#1}::operator()(void*) const /var/local/git/grpc/src/core/lib/gprpp/thd_posix.cc:100:27 (concurrent_connectivity_test+0x62545c)\r\n    #13 grpc_core::(anonymous namespace)::ThreadInternalsPosix::ThreadInternalsPosix(char const*, void (*)(void*), void*, bool*)::{lambda(void*)#1}::__invoke(void*) /var/local/git/grpc/src/core/lib/gprpp/thd_posix.cc:74:25 (concurrent_connectivity_test+0x6252f8)\r\n\r\n  Previous write of size 8 at 0x7b5400630300 by thread T111:\r\n    #0 free /tmp/clang-build/src/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:709:3 (concurrent_connectivity_test+0x4ab914)\r\n    #1 gpr_free /var/local/git/grpc/src/core/lib/gpr/alloc.cc:77:3 (concurrent_connectivity_test+0x61c204)\r\n    #2 void grpc_core::Delete<grpc_core::Subchannel>(grpc_core::Subchannel*) /var/local/git/grpc/./src/core/lib/gprpp/memory.h:55:3 (concurrent_connectivity_test+0x59d551)\r\n    #3 grpc_core::(anonymous namespace)::subchannel_destroy(void*, grpc_error*) /var/local/git/grpc/src/core/ext/filters/client_channel/subchannel.cc:687:3 (concurrent_connectivity_test+0x59a75c)\r\n    #4 closure_impl::closure_wrapper(void*, grpc_error*) /var/local/git/grpc/./src/core/lib/iomgr/closure.h:151:3 (concurrent_connectivity_test+0x516dfe)\r\n    #5 exec_ctx_run(grpc_closure*, grpc_error*) /var/local/git/grpc/src/core/lib/iomgr/exec_ctx.cc:40:3 (concurrent_connectivity_test+0x524909)\r\n    #6 grpc_core::ExecCtx::Flush() /var/local/git/grpc/src/core/lib/iomgr/exec_ctx.cc:148:9 (concurrent_connectivity_test+0x524693)\r\n    #7 grpc_core::Executor::RunClosures(char const*, grpc_closure_list) /var/local/git/grpc/src/core/lib/iomgr/executor.cc:136:32 (concurrent_connectivity_test+0x5bf5f3)\r\n    #8 grpc_core::Executor::ThreadMain(void*) /var/local/git/grpc/src/core/lib/iomgr/executor.cc:248:22 (concurrent_connectivity_test+0x5bfcf8)\r\n    #9 grpc_core::(anonymous namespace)::ThreadInternalsPosix::ThreadInternalsPosix(char const*, void (*)(void*), void*, bool*)::{lambda(void*)#1}::operator()(void*) const /var/local/git/grpc/src/core/lib/gprpp/thd_posix.cc:100:27 (concurrent_connectivity_test+0x62545c)\r\n    #10 grpc_core::(anonymous namespace)::ThreadInternalsPosix::ThreadInternalsPosix(char const*, void (*)(void*), void*, bool*)::{lambda(void*)#1}::__invoke(void*) /var/local/git/grpc/src/core/lib/gprpp/thd_posix.cc:74:25 (concurrent_connectivity_test+0x6252f8)\r\n\r\n  Thread T97 'grpc_wave_3' (tid=18614, running) created by main thread at:\r\n    #0 pthread_create /tmp/clang-build/src/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:992:3 (concurrent_connectivity_test+0x4acfa5)\r\n    #1 grpc_core::(anonymous namespace)::ThreadInternalsPosix::ThreadInternalsPosix(char const*, void (*)(void*), void*, bool*) /var/local/git/grpc/src/core/lib/gprpp/thd_posix.cc:73:10 (concurrent_connectivity_test+0x625006)\r\n    #2 grpc_core::(anonymous namespace)::ThreadInternalsPosix* grpc_core::New<grpc_core::(anonymous namespace)::ThreadInternalsPosix, char const*&, void (*&)(void*), void*&, bool*>(char const*&, void (*&)(void*), void*&, bool*&&) /var/local/git/grpc/./src/core/lib/gprpp/memory.h:47:18 (concurrent_connectivity_test+0x624cc3)\r\n    #3 grpc_core::Thread::Thread(char const*, void (*)(void*), void*, bool*) /var/local/git/grpc/src/core/lib/gprpp/thd_posix.cc:142:7 (concurrent_connectivity_test+0x624ae4)\r\n    #4 run_concurrent_connectivity_test() /var/local/git/grpc/test/core/surface/concurrent_connectivity_test.cc:230:12 (concurrent_connectivity_test+0x515961)\r\n    #5 main /var/local/git/grpc/test/core/surface/concurrent_connectivity_test.cc:305:3 (concurrent_connectivity_test+0x51613d)\r\n\r\n  Thread T111 'default-executo' (tid=19154, running) created by thread T102 at:\r\n    #0 pthread_create /tmp/clang-build/src/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:992:3 (concurrent_connectivity_test+0x4acfa5)\r\n    #1 grpc_core::(anonymous namespace)::ThreadInternalsPosix::ThreadInternalsPosix(char const*, void (*)(void*), void*, bool*) /var/local/git/grpc/src/core/lib/gprpp/thd_posix.cc:73:10 (concurrent_connectivity_test+0x625006)\r\n    #2 grpc_core::(anonymous namespace)::ThreadInternalsPosix* grpc_core::New<grpc_core::(anonymous namespace)::ThreadInternalsPosix, char const*&, void (*&)(void*), void*&, bool*>(char const*&, void (*&)(void*), void*&, bool*&&) /var/local/git/grpc/./src/core/lib/gprpp/memory.h:47:18 (concurrent_connectivity_test+0x624cc3)\r\n    #3 grpc_core::Thread::Thread(char const*, void (*)(void*), void*, bool*) /var/local/git/grpc/src/core/lib/gprpp/thd_posix.cc:142:7 (concurrent_connectivity_test+0x624ae4)\r\n    #4 grpc_core::Executor::Enqueue(grpc_closure*, grpc_error*, bool) /var/local/git/grpc/src/core/lib/iomgr/executor.cc:363:44 (concurrent_connectivity_test+0x5c0747)\r\n    #5 grpc_core::(anonymous namespace)::default_enqueue_short(grpc_closure*, grpc_error*) /var/local/git/grpc/src/core/lib/iomgr/executor.cc:56:58 (concurrent_connectivity_test+0x5c0f23)\r\n    #6 grpc_closure_sched(char const*, int, grpc_closure*, grpc_error*) /var/local/git/grpc/./src/core/lib/iomgr/closure.h:299:5 (concurrent_connectivity_test+0x51b96b)\r\n    #7 queue_offload(grpc_combiner*) /var/local/git/grpc/src/core/lib/iomgr/combiner.cc:210:3 (concurrent_connectivity_test+0x5bb8f2)\r\n    #8 grpc_combiner_continue_exec_ctx() /var/local/git/grpc/src/core/lib/iomgr/combiner.cc:244:5 (concurrent_connectivity_test+0x5bb1e9)\r\n    #9 grpc_core::ExecCtx::Flush() /var/local/git/grpc/src/core/lib/iomgr/exec_ctx.cc:151:17 (concurrent_connectivity_test+0x5246aa)\r\n    #10 pollset_work(grpc_pollset*, grpc_pollset_worker**, long) /var/local/git/grpc/src/core/lib/iomgr/ev_poll_posix.cc:1133:49 (concurrent_connectivity_test+0x608588)\r\n    #11 pollset_work(grpc_pollset*, grpc_pollset_worker**, long) /var/local/git/grpc/src/core/lib/iomgr/ev_posix.cc:321:21 (concurrent_connectivity_test+0x5bdbe4)\r\n    #12 grpc_pollset_work(grpc_pollset*, grpc_pollset_worker**, long) /var/local/git/grpc/src/core/lib/iomgr/pollset.cc:48:10 (concurrent_connectivity_test+0x526414)\r\n    #13 cq_next(grpc_completion_queue*, gpr_timespec, void*) /var/local/git/grpc/src/core/lib/surface/completion_queue.cc:1035:23 (concurrent_connectivity_test+0x55612e)\r\n    #14 grpc_completion_queue_next /var/local/git/grpc/src/core/lib/surface/completion_queue.cc:1111:10 (concurrent_connectivity_test+0x554c46)\r\n    #15 create_loop_destroy(void*) /var/local/git/grpc/test/core/surface/concurrent_connectivity_test.cc:76:7 (concurrent_connectivity_test+0x514a13)\r\n    #16 grpc_core::(anonymous namespace)::ThreadInternalsPosix::ThreadInternalsPosix(char const*, void (*)(void*), void*, bool*)::{lambda(void*)#1}::operator()(void*) const /var/local/git/grpc/src/core/lib/gprpp/thd_posix.cc:100:27 (concurrent_connectivity_test+0x62545c)\r\n    #17 grpc_core::(anonymous namespace)::ThreadInternalsPosix::ThreadInternalsPosix(char const*, void (*)(void*), void*, bool*)::{lambda(void*)#1}::__invoke(void*) /var/local/git/grpc/src/core/lib/gprpp/thd_posix.cc:74:25 (concurrent_connectivity_test+0x6252f8)\r\n\r\nSUMMARY: ThreadSanitizer: heap-use-after-free /var/local/git/grpc/./src/core/lib/gprpp/ref_counted_ptr.h:142:27 in grpc_core::RefCountedPtr<grpc_core::channelz::SubchannelNode>::get() const\r\n==================\r\n```"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/462530269",
    "html_url": "https://github.com/grpc/grpc/issues/18008#issuecomment-462530269",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/18008",
    "id": 462530269,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2MjUzMDI2OQ==",
    "user": {
      "login": "vjpai",
      "id": 8864912,
      "node_id": "MDQ6VXNlcjg4NjQ5MTI=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/8864912?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vjpai",
      "html_url": "https://github.com/vjpai",
      "followers_url": "https://api.github.com/users/vjpai/followers",
      "following_url": "https://api.github.com/users/vjpai/following{/other_user}",
      "gists_url": "https://api.github.com/users/vjpai/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vjpai/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vjpai/subscriptions",
      "organizations_url": "https://api.github.com/users/vjpai/orgs",
      "repos_url": "https://api.github.com/users/vjpai/repos",
      "events_url": "https://api.github.com/users/vjpai/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vjpai/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-11T23:02:33Z",
    "updated_at": "2019-02-11T23:02:33Z",
    "author_association": "MEMBER",
    "body": "https://source.cloud.google.com/results/invocations/d894bbe3-552d-48f5-98e9-407326381e21/targets/github%2Fgrpc%2Fc_linux_asan_native_x64_clang7.0/tests"
  }
]
