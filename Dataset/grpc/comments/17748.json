[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/455252610",
    "html_url": "https://github.com/grpc/grpc/issues/17748#issuecomment-455252610",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/17748",
    "id": 455252610,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1NTI1MjYxMA==",
    "user": {
      "login": "sanjaypujare",
      "id": 14166415,
      "node_id": "MDQ6VXNlcjE0MTY2NDE1",
      "avatar_url": "https://avatars0.githubusercontent.com/u/14166415?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sanjaypujare",
      "html_url": "https://github.com/sanjaypujare",
      "followers_url": "https://api.github.com/users/sanjaypujare/followers",
      "following_url": "https://api.github.com/users/sanjaypujare/following{/other_user}",
      "gists_url": "https://api.github.com/users/sanjaypujare/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sanjaypujare/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sanjaypujare/subscriptions",
      "organizations_url": "https://api.github.com/users/sanjaypujare/orgs",
      "repos_url": "https://api.github.com/users/sanjaypujare/repos",
      "events_url": "https://api.github.com/users/sanjaypujare/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sanjaypujare/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-17T17:12:52Z",
    "updated_at": "2019-01-17T17:12:52Z",
    "author_association": "CONTRIBUTOR",
    "body": "@apolcyn @gbulfon pls adjust priority as needed"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/455281993",
    "html_url": "https://github.com/grpc/grpc/issues/17748#issuecomment-455281993",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/17748",
    "id": 455281993,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1NTI4MTk5Mw==",
    "user": {
      "login": "apolcyn",
      "id": 9566254,
      "node_id": "MDQ6VXNlcjk1NjYyNTQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9566254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apolcyn",
      "html_url": "https://github.com/apolcyn",
      "followers_url": "https://api.github.com/users/apolcyn/followers",
      "following_url": "https://api.github.com/users/apolcyn/following{/other_user}",
      "gists_url": "https://api.github.com/users/apolcyn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apolcyn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apolcyn/subscriptions",
      "organizations_url": "https://api.github.com/users/apolcyn/orgs",
      "repos_url": "https://api.github.com/users/apolcyn/repos",
      "events_url": "https://api.github.com/users/apolcyn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apolcyn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-17T18:41:08Z",
    "updated_at": "2019-01-17T18:41:08Z",
    "author_association": "CONTRIBUTOR",
    "body": "@gbulfon do you mean that you would like new `gem install grpc` commands to use your system libraries? E.g., use the system openssl rather than boringssl? Or that you would like the re-use build artifacts from previous `gem install grpc`s on the same system? The former is doable but the latter likely isn't possible."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/455287008",
    "html_url": "https://github.com/grpc/grpc/issues/17748#issuecomment-455287008",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/17748",
    "id": 455287008,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1NTI4NzAwOA==",
    "user": {
      "login": "gbulfon",
      "id": 4189468,
      "node_id": "MDQ6VXNlcjQxODk0Njg=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/4189468?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gbulfon",
      "html_url": "https://github.com/gbulfon",
      "followers_url": "https://api.github.com/users/gbulfon/followers",
      "following_url": "https://api.github.com/users/gbulfon/following{/other_user}",
      "gists_url": "https://api.github.com/users/gbulfon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gbulfon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gbulfon/subscriptions",
      "organizations_url": "https://api.github.com/users/gbulfon/orgs",
      "repos_url": "https://api.github.com/users/gbulfon/repos",
      "events_url": "https://api.github.com/users/gbulfon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gbulfon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-17T18:53:31Z",
    "updated_at": "2019-01-17T18:53:48Z",
    "author_association": "NONE",
    "body": "Hi, former I think.\r\nI mantain the XStreamOS distribution packages, so I already prepared all the required ones, including grpc as system libraries.\r\nOnce I gem install grpc with \"--use-system-libraries\", it sill tries to build some third party stuff.\r\nFor example, I already built and installed c-ares, but still it's trying to build it internally : I had to bring my own ares_config.h from my userland build into the installing machine to see it continue building its own ares (beacuse it has no clue about Solaris), but then ended with errors because it needs some of my tricks to build (which I already did on my own build, installed in the system).\r\nAlso zlib is built, which I have, so for no reason."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/455288496",
    "html_url": "https://github.com/grpc/grpc/issues/17748#issuecomment-455288496",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/17748",
    "id": 455288496,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1NTI4ODQ5Ng==",
    "user": {
      "login": "gbulfon",
      "id": 4189468,
      "node_id": "MDQ6VXNlcjQxODk0Njg=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/4189468?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gbulfon",
      "html_url": "https://github.com/gbulfon",
      "followers_url": "https://api.github.com/users/gbulfon/followers",
      "following_url": "https://api.github.com/users/gbulfon/following{/other_user}",
      "gists_url": "https://api.github.com/users/gbulfon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gbulfon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gbulfon/subscriptions",
      "organizations_url": "https://api.github.com/users/gbulfon/orgs",
      "repos_url": "https://api.github.com/users/gbulfon/repos",
      "events_url": "https://api.github.com/users/gbulfon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gbulfon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-17T18:57:16Z",
    "updated_at": "2019-01-17T18:57:16Z",
    "author_association": "NONE",
    "body": "Or alternatively, build my own gem in the grpc component source tree, now that I have the \"gmake install\" done, but containing references to my own system libs."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/456032433",
    "html_url": "https://github.com/grpc/grpc/issues/17748#issuecomment-456032433",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/17748",
    "id": 456032433,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1NjAzMjQzMw==",
    "user": {
      "login": "gbulfon",
      "id": 4189468,
      "node_id": "MDQ6VXNlcjQxODk0Njg=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/4189468?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gbulfon",
      "html_url": "https://github.com/gbulfon",
      "followers_url": "https://api.github.com/users/gbulfon/followers",
      "following_url": "https://api.github.com/users/gbulfon/following{/other_user}",
      "gists_url": "https://api.github.com/users/gbulfon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gbulfon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gbulfon/subscriptions",
      "organizations_url": "https://api.github.com/users/gbulfon/orgs",
      "repos_url": "https://api.github.com/users/gbulfon/repos",
      "events_url": "https://api.github.com/users/gbulfon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gbulfon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-21T10:55:07Z",
    "updated_at": "2019-01-21T10:55:07Z",
    "author_association": "NONE",
    "body": "Hi, could you help me how to achieve \"use all available system libraries\" on \"gem install grpc\"?"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/456355566",
    "html_url": "https://github.com/grpc/grpc/issues/17748#issuecomment-456355566",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/17748",
    "id": 456355566,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1NjM1NTU2Ng==",
    "user": {
      "login": "gbulfon",
      "id": 4189468,
      "node_id": "MDQ6VXNlcjQxODk0Njg=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/4189468?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gbulfon",
      "html_url": "https://github.com/gbulfon",
      "followers_url": "https://api.github.com/users/gbulfon/followers",
      "following_url": "https://api.github.com/users/gbulfon/following{/other_user}",
      "gists_url": "https://api.github.com/users/gbulfon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gbulfon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gbulfon/subscriptions",
      "organizations_url": "https://api.github.com/users/gbulfon/orgs",
      "repos_url": "https://api.github.com/users/gbulfon/repos",
      "events_url": "https://api.github.com/users/gbulfon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gbulfon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-22T10:49:21Z",
    "updated_at": "2019-01-22T10:50:26Z",
    "author_association": "NONE",
    "body": "I've seen many \"HAS_SYSTEM...\" variables in the Makefile building the third_party libs.\r\nI'm trying to pass these to \"gem install\" so that it will reach gmake, but I can't do it.\r\nHere I'm trying it directly as call env, but as you can see it's still going into zlib:\r\n\r\n```\r\nsonicle@cloudserver:~/.bundle$ PATH=/usr/gnu/bin:$PATH HAS_PKG_CONFIG=true HAS_SYSTEM_CARES=true HAS_SYSTEM_ZLIB=true gem install grpc\r\nBuilding native extensions.  This could take a while...\r\nERROR:  Error installing grpc:\r\n        ERROR: Failed to build gem native extension.\r\n\r\n    current directory: /usr/ruby/2.3/lib/ruby/gems/2.3.0/gems/grpc-1.18.0/src/ruby/ext/grpc\r\n/usr/ruby/2.3/bin/ruby -r ./siteconf20190122-7000-1xnwebw.rb extconf.rb\r\nBuilding internal gRPC into /usr/ruby/2.3/lib/ruby/gems/2.3.0/gems/grpc-1.18.0/src/ruby/ext/grpc/libs/opt\r\nmake: Entering directory '/usr/ruby/2.3/lib/ruby/gems/2.3.0/gems/grpc-1.18.0'\r\n[C]       Compiling third_party/zlib/adler32.c\r\n[C]       Compiling third_party/zlib/compress.c\r\nmkdir -p `dirname /usr/ruby/2.3/lib/ruby/gems/2.3.0/gems/grpc-1.18.0/src/ruby/ext/grpc/objs/opt/third_party/zlib/adler32.o`\r\n[C]       Compiling third_party/zlib/crc32.c\r\nmkdir -p `dirname /usr/ruby/2.3/lib/ruby/gems/2.3.0/gems/grpc-1.18.0/src/ruby/ext/grpc/objs/opt/third_party/zlib/compress.o`\r\n[C]       Compiling third_party/zlib/deflate.c\r\nmkdir -p `dirname /usr/ruby/2.3/lib/ruby/gems/2.3.0/gems/grpc-1.18.0/src/ruby/ext/grpc/objs/opt/third_party/zlib/deflate.o`\r\nmkdir -p `dirname /usr/ruby/2.3/lib/ruby/gems/2.3.0/gems/grpc-1.18.0/src/ruby/ext/grpc/objs/opt/third_party/zlib/crc32.o`\r\n[C]       Compiling third_party/zlib/gzclose.c\r\n....\r\n\r\n```\r\nbut they're also inside the bundle config file as:\r\n\r\n`BUNDLE_BUILD__GRPC: \"--use-system-libraries HAS_PKG_CONFIG=true HAS_SYSTEM_CARES=true HAS_SYSTEM_ZLIB=true\"`\r\n\r\n\r\nAny idea how to pass these to gem install up to gmake and let it skip building of third_party libs which I already have in my system???"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/456685737",
    "html_url": "https://github.com/grpc/grpc/issues/17748#issuecomment-456685737",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/17748",
    "id": 456685737,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1NjY4NTczNw==",
    "user": {
      "login": "apolcyn",
      "id": 9566254,
      "node_id": "MDQ6VXNlcjk1NjYyNTQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9566254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apolcyn",
      "html_url": "https://github.com/apolcyn",
      "followers_url": "https://api.github.com/users/apolcyn/followers",
      "following_url": "https://api.github.com/users/apolcyn/following{/other_user}",
      "gists_url": "https://api.github.com/users/apolcyn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apolcyn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apolcyn/subscriptions",
      "organizations_url": "https://api.github.com/users/apolcyn/orgs",
      "repos_url": "https://api.github.com/users/apolcyn/repos",
      "events_url": "https://api.github.com/users/apolcyn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apolcyn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-23T06:26:36Z",
    "updated_at": "2019-01-23T06:26:36Z",
    "author_association": "CONTRIBUTOR",
    "body": "I <i>think</i> we can just make this `EMBED_*` settings overrideable in https://github.com/grpc/grpc/blob/master/src/ruby/ext/grpc/extconf.rb#L34\r\n\r\ne.g., we could change:\r\n\r\n```\r\nENV['EMBED_OPENSSL'] = 'true'\r\nENV['EMBED_ZLIB'] = 'true'\r\nENV['EMBED_CARES'] = 'true'\r\n```\r\n\r\nto something like:\r\n\r\n```\r\nif ENV['GRPC_EMBED_OPENSSL'].nil?\r\n  ENV['EMBED_OPENSSL'] = 'true'\r\nelse\r\n  ENV['EMBED_OPENSSL'] = ENV['GRPC_EMBED_OPENSSL']\r\nend\r\nif ENV['GRPC_EMBED_CARES'].nil?\r\n  ENV['EMBED_CARES'] = 'true'\r\nelse\r\n  ENV['EMBED_CARES'] = ENV['GRPC_EMBED_CARES']\r\nend\r\n...\r\n```\r\n\r\nthen, if the system libraries are found by our Makefile and pass our minimum version requirements, then you should be able to override at least these libraries.\r\n\r\nAs for overridding the grpc library itself, e.g. `librgrpc.a` - I'm not sure I would recommend this. The interface of the grpc core library isn't necessarily as stable as the rest of the system libraries mentioned, and the grpc-ruby C-extension, which uses it, is only tested against the version of the grpc core library that's from the same git commit."
  }
]
