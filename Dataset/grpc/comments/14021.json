[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/358981984",
    "html_url": "https://github.com/grpc/grpc/issues/14021#issuecomment-358981984",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14021",
    "id": 358981984,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1ODk4MTk4NA==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-19T14:33:36Z",
    "updated_at": "2018-01-19T14:33:36Z",
    "author_association": "CONTRIBUTOR",
    "body": "@mehrdada  we should fix this for v1.9.x release."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/358986233",
    "html_url": "https://github.com/grpc/grpc/issues/14021#issuecomment-358986233",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14021",
    "id": 358986233,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1ODk4NjIzMw==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-19T14:49:00Z",
    "updated_at": "2018-01-19T14:49:00Z",
    "author_association": "CONTRIBUTOR",
    "body": "Possibly related https://github.com/grpc/grpc/issues/13941"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/358987242",
    "html_url": "https://github.com/grpc/grpc/issues/14021#issuecomment-358987242",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14021",
    "id": 358987242,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1ODk4NzI0Mg==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-19T14:52:31Z",
    "updated_at": "2018-01-19T14:52:31Z",
    "author_association": "CONTRIBUTOR",
    "body": "I believe a the problem you are describing with 1.7.0 (when MoveNext is omitted) is https://github.com/grpc/grpc/issues/8451.\r\n\r\nI am looking into the 1.8.x leak."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/359017220",
    "html_url": "https://github.com/grpc/grpc/issues/14021#issuecomment-359017220",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14021",
    "id": 359017220,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1OTAxNzIyMA==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-19T16:27:58Z",
    "updated_at": "2018-01-19T16:27:58Z",
    "author_association": "CONTRIBUTOR",
    "body": "I know what's going on here:\r\n- After in v1.8.x I've introduced to PRs for pooling BatchContextSafeHandle and RequestCallContextSafeHandle objects: (https://github.com/grpc/grpc/pull/13476, https://github.com/grpc/grpc/pull/13521).\r\n- the cleanup of the thread local pools from DefaultObjectPool seems not to be working well after the threads finish (the expectation was that after the thread finishes, the thread local objects stop being reachable at they will get garbage collected, but that might not be happening).\r\n- GrpcEnviroment is a reference-counted singleton (channel and server creation increment the refcount, channel and server shutdown decrement). So in this particular example, because there's only 1 channel at a time and it gets created and shutdown multiple times, in each loop the GrpcEnviroment is shutdown and initialized again (which involves creation of GrpcThreadPool). \r\n- the combination of the previous factors means that each loop of the test creates several new threads and leaks the thread local objects for them and they are never cleaned up, so memory use keeps growing.\r\n\r\nI'm still thinking what would be the best way to fix the problem (rolling back the 2 PRs that are not independent seems a bit tricky).\r\n\r\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/359019512",
    "html_url": "https://github.com/grpc/grpc/issues/14021#issuecomment-359019512",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14021",
    "id": 359019512,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1OTAxOTUxMg==",
    "user": {
      "login": "mehrdada",
      "id": 900411,
      "node_id": "MDQ6VXNlcjkwMDQxMQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/900411?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mehrdada",
      "html_url": "https://github.com/mehrdada",
      "followers_url": "https://api.github.com/users/mehrdada/followers",
      "following_url": "https://api.github.com/users/mehrdada/following{/other_user}",
      "gists_url": "https://api.github.com/users/mehrdada/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mehrdada/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mehrdada/subscriptions",
      "organizations_url": "https://api.github.com/users/mehrdada/orgs",
      "repos_url": "https://api.github.com/users/mehrdada/repos",
      "events_url": "https://api.github.com/users/mehrdada/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mehrdada/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-19T16:35:16Z",
    "updated_at": "2018-01-19T16:36:17Z",
    "author_association": "CONTRIBUTOR",
    "body": "@jtattermusch sounds good. Do we need to delay the branch cut as well as the release? I was hoping to cut the branch, and we can ship a separate RC for C# a bit later, as this gives more time for RC of other languages? (Specifically, @apolcyn needs to cut the branch to enable Ruby 2.5 (I think) and people have been expecting a prerelease package that contains it for a while)."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/359022953",
    "html_url": "https://github.com/grpc/grpc/issues/14021#issuecomment-359022953",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14021",
    "id": 359022953,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1OTAyMjk1Mw==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-19T16:46:06Z",
    "updated_at": "2018-01-19T16:46:06Z",
    "author_association": "CONTRIBUTOR",
    "body": "@mehrdada  Feel free to cut the branch, we can always backport the fix (or fix directly in the release branch and then upport) - but I hope I'll come up with something better than reverting the 2 PRs as it would be a real mess dealing with quite complex reverts in both release branch and master."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/359095473",
    "html_url": "https://github.com/grpc/grpc/issues/14021#issuecomment-359095473",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14021",
    "id": 359095473,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1OTA5NTQ3Mw==",
    "user": {
      "login": "mehrdada",
      "id": 900411,
      "node_id": "MDQ6VXNlcjkwMDQxMQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/900411?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mehrdada",
      "html_url": "https://github.com/mehrdada",
      "followers_url": "https://api.github.com/users/mehrdada/followers",
      "following_url": "https://api.github.com/users/mehrdada/following{/other_user}",
      "gists_url": "https://api.github.com/users/mehrdada/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mehrdada/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mehrdada/subscriptions",
      "organizations_url": "https://api.github.com/users/mehrdada/orgs",
      "repos_url": "https://api.github.com/users/mehrdada/repos",
      "events_url": "https://api.github.com/users/mehrdada/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mehrdada/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-19T21:34:52Z",
    "updated_at": "2018-01-19T21:34:52Z",
    "author_association": "CONTRIBUTOR",
    "body": "Ok. Cutting the branch now..."
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/359732008",
    "html_url": "https://github.com/grpc/grpc/issues/14021#issuecomment-359732008",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14021",
    "id": 359732008,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1OTczMjAwOA==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-23T09:31:52Z",
    "updated_at": "2018-01-23T09:31:58Z",
    "author_association": "CONTRIBUTOR",
    "body": "Fixed by #14113.\r\nThe fix will be released in v1.9.0-pre2"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/360387394",
    "html_url": "https://github.com/grpc/grpc/issues/14021#issuecomment-360387394",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/14021",
    "id": 360387394,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MDM4NzM5NA==",
    "user": {
      "login": "jtattermusch",
      "id": 9939684,
      "node_id": "MDQ6VXNlcjk5Mzk2ODQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9939684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtattermusch",
      "html_url": "https://github.com/jtattermusch",
      "followers_url": "https://api.github.com/users/jtattermusch/followers",
      "following_url": "https://api.github.com/users/jtattermusch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtattermusch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtattermusch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtattermusch/subscriptions",
      "organizations_url": "https://api.github.com/users/jtattermusch/orgs",
      "repos_url": "https://api.github.com/users/jtattermusch/repos",
      "events_url": "https://api.github.com/users/jtattermusch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtattermusch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-25T07:49:44Z",
    "updated_at": "2018-01-25T07:49:44Z",
    "author_association": "CONTRIBUTOR",
    "body": "@jskeet   the v1.9.0-pre2 packages have been pushed."
  }
]
