[
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/243186577",
    "html_url": "https://github.com/grpc/grpc/issues/7876#issuecomment-243186577",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/7876",
    "id": 243186577,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0MzE4NjU3Nw==",
    "user": {
      "login": "apolcyn",
      "id": 9566254,
      "node_id": "MDQ6VXNlcjk1NjYyNTQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9566254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apolcyn",
      "html_url": "https://github.com/apolcyn",
      "followers_url": "https://api.github.com/users/apolcyn/followers",
      "following_url": "https://api.github.com/users/apolcyn/following{/other_user}",
      "gists_url": "https://api.github.com/users/apolcyn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apolcyn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apolcyn/subscriptions",
      "organizations_url": "https://api.github.com/users/apolcyn/orgs",
      "repos_url": "https://api.github.com/users/apolcyn/repos",
      "events_url": "https://api.github.com/users/apolcyn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apolcyn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-29T17:05:47Z",
    "updated_at": "2016-08-29T17:06:48Z",
    "author_association": "CONTRIBUTOR",
    "body": "with grpc built with debug symbols, the relevant stack trace, starting with `grpc_rb_call_run_batch` is:\n\n```\nProgram received signal SIGSEGV, Segmentation fault.\n0x00007ffff7bc61db in free () from /opt/google-fluentd/embedded/lib/libjemalloc.so\n(gdb) bt\n#0  0x00007ffff7bc61db in free () from /opt/google-fluentd/embedded/lib/libjemalloc.so\n#1  0x00007ffff74f559a in get_cached_stack (memp=<synthetic pointer>, sizep=<synthetic pointer>)\n    at allocatestack.c:248\n#2  allocate_stack (stack=<synthetic pointer>, pdp=<synthetic pointer>, attr=0x7ffff51f8ac0)\n    at allocatestack.c:501\n#3  __pthread_create_2_1 (newthread=0x7ffff51f8ab0, attr=<optimized out>, \n    start_routine=0x7fffef451a1a <thread_body>, arg=0x7fffebbdf9b0) at pthread_create.c:495\n#4  0x00007fffef451bdc in gpr_thd_new (t=0x7fffef7f9680 <g_executor+32>, \n    thd_body=0x7fffef4114a8 <closure_exec_thread_func>, arg=0x0, options=0x7fffef7f9688 <g_executor+40>)\n    at src/core/lib/support/thd_posix.c:81\n#5  0x00007fffef41163b in maybe_spawn_locked () at src/core/lib/iomgr/executor.c:110\n#6  0x00007fffef41168e in grpc_executor_push (closure=0x7fffeceae6c0, error=0x0)\n    at src/core/lib/iomgr/executor.c:119\n#7  0x00007fffef4af978 in resolve_address_impl (exec_ctx=0x7ffff51f8fd0, \n    name=0x7fffebbfb300 \"logging.googleapis.com\", default_port=0x7fffebbdca70 \"https\", on_done=0x7fffebbfae60, \n    addrs=0x7fffebba25c8) at src/core/lib/iomgr/resolve_address_posix.c:192\n#8  0x00007fffef4b9547 in dns_start_resolving_locked (exec_ctx=0x7ffff51f8fd0, r=0x7fffebba24c0)\n    at src/core/ext/resolver/dns/native/dns_resolver.c:223\n#9  0x00007fffef4b907f in dns_next (exec_ctx=0x7ffff51f8fd0, resolver=0x7fffebba24c0, \n    target_config=0x7fffeb873510, on_complete=0x7fffeb873528)\n    at src/core/ext/resolver/dns/native/dns_resolver.c:142\n#10 0x00007fffef4470a5 in grpc_resolver_next (exec_ctx=0x7ffff51f8fd0, resolver=0x7fffebba24c0, \n    target_config=0x7fffeb873510, on_complete=0x7fffeb873528) at src/core/ext/client_config/resolver.c:81\n#11 0x00007fffef4462ab in cc_pick_subchannel (exec_ctx=0x7ffff51f8fd0, elemp=0x7fffeb850c08, \n    initial_metadata=0x7fffeb8508d8, initial_metadata_flags=0, connected_subchannel=0x7fffeb850ea8, \n    on_ready=0x7fffeb850ed0) at src/core/ext/client_config/client_channel.c:410\n#12 0x00007fffef4492b4 in grpc_subchannel_call_holder_perform_op (exec_ctx=0x7ffff51f8fd0, holder=0x7fffeb850e60, \n    op=0x7ffff51f8ef0) at src/core/ext/client_config/subchannel_call_holder.c:153\n#13 0x00007fffef445655 in cc_start_transport_stream_op (exec_ctx=0x7ffff51f8fd0, elem=0x7fffeb850c08, \n    op=0x7ffff51f8ef0) at src/core/ext/client_config/client_channel.c:110\n#14 0x00007fffef40ac4e in grpc_call_next_op (exec_ctx=0x7ffff51f8fd0, elem=0x7fffeb850bf0, op=0x7ffff51f8ef0)\n    at src/core/lib/channel/channel_stack.c:236\n#15 0x00007fffef40bdae in compress_start_transport_stream_op (exec_ctx=0x7ffff51f8fd0, elem=0x7fffeb850bf0, \n    op=0x7ffff51f8ef0) at src/core/lib/channel/compress_filter.c:252\n#16 0x00007fffef416fa7 in execute_op (exec_ctx=0x7ffff51f8fd0, call=0x7fffeb850600, op=0x7ffff51f8ef0)\n---Type <return> to continue, or q <return> to quit---\n    at src/core/lib/surface/call.c:847\n#17 0x00007fffef419069 in call_start_batch (exec_ctx=0x7ffff51f8fd0, call=0x7fffeb850600, ops=0x7ffff51f9070, \n    nops=1, notify_tag=0x7fffed416190, is_notify_tag_closure=0) at src/core/lib/surface/call.c:1636\n#18 0x00007fffef419243 in grpc_call_start_batch (call=0x7fffeb850600, ops=0x7ffff51f9070, nops=1, \n    tag=0x7fffed416190, reserved=0x0) at src/core/lib/surface/call.c:1682\n#19 0x00007fffef406024 in grpc_rb_call_run_batch (self=140737173873360, cqueue=140737173873400, \n    tag=140737173873040, timeout=140737303459240, ops_hash=140737173872920)\n```\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/243896050",
    "html_url": "https://github.com/grpc/grpc/issues/7876#issuecomment-243896050",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/7876",
    "id": 243896050,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0Mzg5NjA1MA==",
    "user": {
      "login": "apolcyn",
      "id": 9566254,
      "node_id": "MDQ6VXNlcjk1NjYyNTQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9566254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apolcyn",
      "html_url": "https://github.com/apolcyn",
      "followers_url": "https://api.github.com/users/apolcyn/followers",
      "following_url": "https://api.github.com/users/apolcyn/following{/other_user}",
      "gists_url": "https://api.github.com/users/apolcyn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apolcyn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apolcyn/subscriptions",
      "organizations_url": "https://api.github.com/users/apolcyn/orgs",
      "repos_url": "https://api.github.com/users/apolcyn/repos",
      "events_url": "https://api.github.com/users/apolcyn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apolcyn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-31T20:47:13Z",
    "updated_at": "2016-08-31T20:47:13Z",
    "author_association": "CONTRIBUTOR",
    "body": "I'm wondering if this has to do with the specific jemalloc version here. Tried using different versions of libjemalloc (latest 4.2.1, 4.0.0, and 3.4.1) and I'm not seeing the segfault with them.\n\nWondering what version is /opt/google-fluentd/embedded/lib/libjemalloc.so?\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/243917293",
    "html_url": "https://github.com/grpc/grpc/issues/7876#issuecomment-243917293",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/7876",
    "id": 243917293,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0MzkxNzI5Mw==",
    "user": {
      "login": "igorpeshansky",
      "id": 7594381,
      "node_id": "MDQ6VXNlcjc1OTQzODE=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/7594381?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/igorpeshansky",
      "html_url": "https://github.com/igorpeshansky",
      "followers_url": "https://api.github.com/users/igorpeshansky/followers",
      "following_url": "https://api.github.com/users/igorpeshansky/following{/other_user}",
      "gists_url": "https://api.github.com/users/igorpeshansky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/igorpeshansky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/igorpeshansky/subscriptions",
      "organizations_url": "https://api.github.com/users/igorpeshansky/orgs",
      "repos_url": "https://api.github.com/users/igorpeshansky/repos",
      "events_url": "https://api.github.com/users/igorpeshansky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/igorpeshansky/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-31T22:05:30Z",
    "updated_at": "2016-08-31T22:05:30Z",
    "author_association": "CONTRIBUTOR",
    "body": "Ah, that may explain it. The version used for google-fluentd is ancient (2.2.5). Upstream has just updated to 4.2.1 a couple of weeks ago to fix [another issue](https://github.com/treasure-data/omnibus-td-agent/issues/87). I'll work on updating. Thanks for helping track this down and sorry for the noise.\n"
  },
  {
    "url": "https://api.github.com/repos/grpc/grpc/issues/comments/243922277",
    "html_url": "https://github.com/grpc/grpc/issues/7876#issuecomment-243922277",
    "issue_url": "https://api.github.com/repos/grpc/grpc/issues/7876",
    "id": 243922277,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0MzkyMjI3Nw==",
    "user": {
      "login": "apolcyn",
      "id": 9566254,
      "node_id": "MDQ6VXNlcjk1NjYyNTQ=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9566254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apolcyn",
      "html_url": "https://github.com/apolcyn",
      "followers_url": "https://api.github.com/users/apolcyn/followers",
      "following_url": "https://api.github.com/users/apolcyn/following{/other_user}",
      "gists_url": "https://api.github.com/users/apolcyn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apolcyn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apolcyn/subscriptions",
      "organizations_url": "https://api.github.com/users/apolcyn/orgs",
      "repos_url": "https://api.github.com/users/apolcyn/repos",
      "events_url": "https://api.github.com/users/apolcyn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apolcyn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-31T22:28:54Z",
    "updated_at": "2016-08-31T22:28:54Z",
    "author_association": "CONTRIBUTOR",
    "body": "Great! Just tried a fresh build of 2.2.5 jemalloc to confirm, indeed that one does have the segfault. It appears to be fixed between 2.2.5 and 3.0.0.\n"
  }
]
