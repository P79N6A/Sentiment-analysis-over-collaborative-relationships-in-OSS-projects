[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/419720275",
    "html_url": "https://github.com/pandas-dev/pandas/issues/17969#issuecomment-419720275",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17969",
    "id": 419720275,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxOTcyMDI3NQ==",
    "user": {
      "login": "simonjayhawkins",
      "id": 13159005,
      "node_id": "MDQ6VXNlcjEzMTU5MDA1",
      "avatar_url": "https://avatars0.githubusercontent.com/u/13159005?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/simonjayhawkins",
      "html_url": "https://github.com/simonjayhawkins",
      "followers_url": "https://api.github.com/users/simonjayhawkins/followers",
      "following_url": "https://api.github.com/users/simonjayhawkins/following{/other_user}",
      "gists_url": "https://api.github.com/users/simonjayhawkins/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/simonjayhawkins/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/simonjayhawkins/subscriptions",
      "organizations_url": "https://api.github.com/users/simonjayhawkins/orgs",
      "repos_url": "https://api.github.com/users/simonjayhawkins/repos",
      "events_url": "https://api.github.com/users/simonjayhawkins/events{/privacy}",
      "received_events_url": "https://api.github.com/users/simonjayhawkins/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-09-09T14:38:05Z",
    "updated_at": "2018-09-09T14:38:05Z",
    "author_association": "CONTRIBUTOR",
    "body": "i'm unable to reproduce this if i change the read method as suggested by @WDBell.\r\n\r\nthe issue appears to be that the FileWrap object fails the is_file_like test:\r\n\r\n```python\r\n>>> from pandas.core.dtypes.inference import is_file_like\r\n>>>\r\n>>> class FileWrap:\r\n...     def __init__(self, path):\r\n...         self.file = open(path)\r\n...     def read(self):\r\n...         return self.file.read()\r\n...\r\n>>> is_file_like(FileWrap)\r\nFalse\r\n>>>\r\n```\r\n\r\nhttps://github.com/pandas-dev/pandas/blob/fac819692bd22d93e34dbcb207e43960147a6f17/pandas/core/dtypes/inference.py#L158-L167\r\n\r\n\r\nshould the documentation for pandas.read_csv be updated to reference the `hasattr(obj, \"__iter__\")` requirement for a file like object?"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/419728060",
    "html_url": "https://github.com/pandas-dev/pandas/issues/17969#issuecomment-419728060",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17969",
    "id": 419728060,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxOTcyODA2MA==",
    "user": {
      "login": "simonjayhawkins",
      "id": 13159005,
      "node_id": "MDQ6VXNlcjEzMTU5MDA1",
      "avatar_url": "https://avatars0.githubusercontent.com/u/13159005?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/simonjayhawkins",
      "html_url": "https://github.com/simonjayhawkins",
      "followers_url": "https://api.github.com/users/simonjayhawkins/followers",
      "following_url": "https://api.github.com/users/simonjayhawkins/following{/other_user}",
      "gists_url": "https://api.github.com/users/simonjayhawkins/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/simonjayhawkins/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/simonjayhawkins/subscriptions",
      "organizations_url": "https://api.github.com/users/simonjayhawkins/orgs",
      "repos_url": "https://api.github.com/users/simonjayhawkins/repos",
      "events_url": "https://api.github.com/users/simonjayhawkins/events{/privacy}",
      "received_events_url": "https://api.github.com/users/simonjayhawkins/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-09-09T16:37:43Z",
    "updated_at": "2018-09-09T16:37:43Z",
    "author_association": "CONTRIBUTOR",
    "body": "if the object does contain an __iter__ method then the read method DOES still need *args, but not **kwargs\r\n\r\n``` python\r\n>>>\r\n>>> import pandas as pd\r\n>>>\r\n>>> file_name = 'temp.txt'\r\n>>>\r\n>>> class FileWrap:\r\n...     def __init__(self, path):\r\n...         self.file = open(path)\r\n...     def read(self, *args):\r\n...         return self.file.read()\r\n...     def __iter__(self):\r\n...         pass\r\n...\r\n...\r\n>>> df = pd.read_csv(FileWrap(file_name), header=None)\r\n>>> print (df)\r\n   0  1\r\n0  a  b\r\n>>>\r\n```\r\n\r\notherwise:\r\n\r\n```python\r\n>>>\r\n>>>\r\n>>> import pandas as pd\r\n>>>\r\n>>> file_name = 'temp.txt'\r\n>>>\r\n>>> class FileWrap:\r\n...     def __init__(self, path):\r\n...         self.file = open(path)\r\n...     def read(self):\r\n...         return self.file.read()\r\n...     def __iter__(self):\r\n...         pass\r\n...\r\n...\r\n>>> df = pd.read_csv(FileWrap(file_name), header=None)\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"C:\\Users\\simon\\Anaconda3\\envs\\pandas-dev\\lib\\site-packages\\pandas\\io\\parsers.py\", line 678, in parser_f\r\n    return _read(filepath_or_buffer, kwds)\r\n  File \"C:\\Users\\simon\\Anaconda3\\envs\\pandas-dev\\lib\\site-packages\\pandas\\io\\parsers.py\", line 440, in _read\r\n    parser = TextFileReader(filepath_or_buffer, **kwds)\r\n  File \"C:\\Users\\simon\\Anaconda3\\envs\\pandas-dev\\lib\\site-packages\\pandas\\io\\parsers.py\", line 787, in __init__\r\n    self._make_engine(self.engine)\r\n  File \"C:\\Users\\simon\\Anaconda3\\envs\\pandas-dev\\lib\\site-packages\\pandas\\io\\parsers.py\", line 1014, in _make_engine\r\n    self._engine = CParserWrapper(self.f, **self.options)\r\n  File \"C:\\Users\\simon\\Anaconda3\\envs\\pandas-dev\\lib\\site-packages\\pandas\\io\\parsers.py\", line 1708, in __init__\r\n    self._reader = parsers.TextReader(src, **kwds)\r\n  File \"pandas\\_libs\\parsers.pyx\", line 539, in pandas._libs.parsers.TextReader.__cinit__\r\n  File \"pandas\\_libs\\parsers.pyx\", line 829, in pandas._libs.parsers.TextReader._get_header\r\n  File \"pandas\\_libs\\parsers.pyx\", line 932, in pandas._libs.parsers.TextReader._tokenize_rows\r\n  File \"pandas\\_libs\\parsers.pyx\", line 2098, in pandas._libs.parsers.raise_parser_error\r\nTypeError: read() takes 1 positional argument but 2 were given\r\n>>>\r\n```\r\n\r\nand just for completeness, without __iter__ method:\r\n\r\n```python\r\n>>>\r\n>>> import pandas as pd\r\n>>>\r\n>>> file_name = 'temp.txt'\r\n>>>\r\n>>> class FileWrap:\r\n...     def __init__(self, path):\r\n...         self.file = open(path)\r\n...     def read(self, *args):\r\n...         return self.file.read()\r\n...\r\n>>> df = pd.read_csv(FileWrap(file_name), header=None)\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"C:\\Users\\simon\\Anaconda3\\envs\\pandas-dev\\lib\\site-packages\\pandas\\io\\parsers.py\", line 678, in parser_f\r\n    return _read(filepath_or_buffer, kwds)\r\n  File \"C:\\Users\\simon\\Anaconda3\\envs\\pandas-dev\\lib\\site-packages\\pandas\\io\\parsers.py\", line 424, in _read\r\n    filepath_or_buffer, encoding, compression)\r\n  File \"C:\\Users\\simon\\Anaconda3\\envs\\pandas-dev\\lib\\site-packages\\pandas\\io\\common.py\", line 218, in get_filepath_or_buffer\r\n    raise ValueError(msg.format(_type=type(filepath_or_buffer)))\r\nValueError: Invalid file path or buffer object type: <class '__main__.FileWrap'>\r\n>>>\r\n```\r\n\r\n"
  }
]
