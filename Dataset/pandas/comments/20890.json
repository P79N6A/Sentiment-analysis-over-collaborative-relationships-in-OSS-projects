[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/385557257",
    "html_url": "https://github.com/pandas-dev/pandas/issues/20890#issuecomment-385557257",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/20890",
    "id": 385557257,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4NTU1NzI1Nw==",
    "user": {
      "login": "jlwaldeck",
      "id": 36897909,
      "node_id": "MDQ6VXNlcjM2ODk3OTA5",
      "avatar_url": "https://avatars3.githubusercontent.com/u/36897909?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jlwaldeck",
      "html_url": "https://github.com/jlwaldeck",
      "followers_url": "https://api.github.com/users/jlwaldeck/followers",
      "following_url": "https://api.github.com/users/jlwaldeck/following{/other_user}",
      "gists_url": "https://api.github.com/users/jlwaldeck/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jlwaldeck/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jlwaldeck/subscriptions",
      "organizations_url": "https://api.github.com/users/jlwaldeck/orgs",
      "repos_url": "https://api.github.com/users/jlwaldeck/repos",
      "events_url": "https://api.github.com/users/jlwaldeck/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jlwaldeck/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-30T23:21:08Z",
    "updated_at": "2018-04-30T23:21:08Z",
    "author_association": "NONE",
    "body": "cc: @vmuriart"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/385592353",
    "html_url": "https://github.com/pandas-dev/pandas/issues/20890#issuecomment-385592353",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/20890",
    "id": 385592353,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4NTU5MjM1Mw==",
    "user": {
      "login": "WillAyd",
      "id": 609873,
      "node_id": "MDQ6VXNlcjYwOTg3Mw==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/609873?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/WillAyd",
      "html_url": "https://github.com/WillAyd",
      "followers_url": "https://api.github.com/users/WillAyd/followers",
      "following_url": "https://api.github.com/users/WillAyd/following{/other_user}",
      "gists_url": "https://api.github.com/users/WillAyd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/WillAyd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/WillAyd/subscriptions",
      "organizations_url": "https://api.github.com/users/WillAyd/orgs",
      "repos_url": "https://api.github.com/users/WillAyd/repos",
      "events_url": "https://api.github.com/users/WillAyd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/WillAyd/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-01T03:43:54Z",
    "updated_at": "2018-05-01T03:43:54Z",
    "author_association": "MEMBER",
    "body": "I ran this on v0.22 and master and both were fine. Can you try upgrading to see if it resolves the issue?"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/385601275",
    "html_url": "https://github.com/pandas-dev/pandas/issues/20890#issuecomment-385601275",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/20890",
    "id": 385601275,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4NTYwMTI3NQ==",
    "user": {
      "login": "jschendel",
      "id": 5332445,
      "node_id": "MDQ6VXNlcjUzMzI0NDU=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/5332445?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jschendel",
      "html_url": "https://github.com/jschendel",
      "followers_url": "https://api.github.com/users/jschendel/followers",
      "following_url": "https://api.github.com/users/jschendel/following{/other_user}",
      "gists_url": "https://api.github.com/users/jschendel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jschendel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jschendel/subscriptions",
      "organizations_url": "https://api.github.com/users/jschendel/orgs",
      "repos_url": "https://api.github.com/users/jschendel/repos",
      "events_url": "https://api.github.com/users/jschendel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jschendel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-01T05:15:36Z",
    "updated_at": "2018-05-01T05:15:36Z",
    "author_association": "MEMBER",
    "body": "I can reproduce this on both master and 0.22.0.\r\n```python\r\nIn [2]: pd.__version__\r\nOut[2]: '0.23.0.dev0+815.gf799916'\r\n\r\nIn [3]: pd.eval('exp(2)')\r\nOut[3]: 7.0\r\n\r\nIn [4]: pd.eval('exp(2.0)')\r\nOut[4]: 7.3890560989306504\r\n\r\nIn [5]: pd.eval('sqrt(6)')\r\nOut[5]: 2.0\r\n\r\nIn [6]: pd.eval('sqrt(6.0)')\r\nOut[6]: 2.4494897427831779\r\n\r\nIn [7]: pd.eval('log(6)')\r\nOut[7]: 1.0\r\n\r\nIn [8]: pd.eval('log(6.0)')\r\nOut[8]: 1.791759469228055\r\n```\r\n\r\nSeems to be limited to `engine='numexpr'`, so it might not be reproducible without `numexpr`:\r\n```python\r\nIn [9]: pd.eval('exp(2)', parser='pandas', engine='numexpr')\r\nOut[9]: 7.0\r\n\r\nIn [10]: pd.eval('exp(2)', parser='python', engine='numexpr')\r\nOut[10]: 7.0\r\n\r\nIn [11]: pd.eval('exp(2)', parser='pandas', engine='python')\r\nOut[11]: 7.3890560989306504\r\n\r\nIn [12]: pd.eval('exp(2)', parser='python', engine='python')\r\nOut[12]: 7.3890560989306504\r\n```\r\n\r\nDirectly using `numexpr` seems fine though:\r\n```python\r\nIn [16]: ne.evaluate('exp(2)')\r\nOut[16]: array(7.38905609893065)\r\n```"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/385769828",
    "html_url": "https://github.com/pandas-dev/pandas/issues/20890#issuecomment-385769828",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/20890",
    "id": 385769828,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4NTc2OTgyOA==",
    "user": {
      "login": "vmuriart",
      "id": 13303020,
      "node_id": "MDQ6VXNlcjEzMzAzMDIw",
      "avatar_url": "https://avatars1.githubusercontent.com/u/13303020?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vmuriart",
      "html_url": "https://github.com/vmuriart",
      "followers_url": "https://api.github.com/users/vmuriart/followers",
      "following_url": "https://api.github.com/users/vmuriart/following{/other_user}",
      "gists_url": "https://api.github.com/users/vmuriart/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vmuriart/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vmuriart/subscriptions",
      "organizations_url": "https://api.github.com/users/vmuriart/orgs",
      "repos_url": "https://api.github.com/users/vmuriart/repos",
      "events_url": "https://api.github.com/users/vmuriart/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vmuriart/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-01T19:47:39Z",
    "updated_at": "2018-05-01T19:54:41Z",
    "author_association": "NONE",
    "body": "The call in [_evaluate](https://github.com/pandas-dev/pandas/blob/d198a6efd5a3d2e7d5afb4a3cf556507c7501dd4/pandas/core/computation/engines.py#L123) returns the correct answer as well.\r\n\r\nThe issue shows up after the call into [`_reconstruct_object(...)`](https://github.com/pandas-dev/pandas/blob/d198a6efd5a3d2e7d5afb4a3cf556507c7501dd4/pandas/core/computation/engines.py#L77) from within the `evaluate` function. The python engine doesn't have this issue since it overrides `evaluate` on its definition. \r\n\r\nIt looks like the float is being forced back into an integer on that call. \r\n"
  }
]
