[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/36479174",
    "html_url": "https://github.com/pandas-dev/pandas/issues/6523#issuecomment-36479174",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/6523",
    "id": 36479174,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2NDc5MTc0",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-03-03T03:31:35Z",
    "updated_at": "2014-03-03T03:31:35Z",
    "author_association": "CONTRIBUTOR",
    "body": "it would be helpful to post the complete code that reproduces this\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/36486462",
    "html_url": "https://github.com/pandas-dev/pandas/issues/6523#issuecomment-36486462",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/6523",
    "id": 36486462,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2NDg2NDYy",
    "user": {
      "login": "timeislove",
      "id": 6835259,
      "node_id": "MDQ6VXNlcjY4MzUyNTk=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/6835259?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/timeislove",
      "html_url": "https://github.com/timeislove",
      "followers_url": "https://api.github.com/users/timeislove/followers",
      "following_url": "https://api.github.com/users/timeislove/following{/other_user}",
      "gists_url": "https://api.github.com/users/timeislove/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/timeislove/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/timeislove/subscriptions",
      "organizations_url": "https://api.github.com/users/timeislove/orgs",
      "repos_url": "https://api.github.com/users/timeislove/repos",
      "events_url": "https://api.github.com/users/timeislove/events{/privacy}",
      "received_events_url": "https://api.github.com/users/timeislove/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-03-03T07:19:07Z",
    "updated_at": "2014-03-03T07:19:07Z",
    "author_association": "NONE",
    "body": "ok i tried to quote the relevant code as much as possible\n\nhere is the function to retriever historical quote from stored csv or from web directly:\n\ndef readStockPrice(stock,period=200,delay=1):\n\n```\n#define the period for stock filtering\nnow=dt.date.today()\nend=now.strftime(\"%Y-%m-%d\")\n#start=(now-dt.timedelta(days=period)).strftime(\"%Y-%m-%d\")\n\nif os.path.isfile('cache/'+stock+'.csv'):\n    df=pd.read_csv('cache/'+stock+'.csv',index_col=0,parse_dates=True)\n    lastrecorddate=df.index.to_pydatetime()[-1].date()\n    delta=(now-lastrecorddate).days\n    if delta>delay:\n\n        #print(\"retrieving \"+stock+\" quotes from the web\")\n        start=(lastrecorddate+dt.timedelta(days=1)).strftime(\"%Y-%m-%d\")\n        try:\n            df_delta=web.get_data_yahoo(stock,start,end)\n            df=df.append(df_delta)\n            df_delta.to_csv('cache/'+stock+'.csv',header=False,mode='a')\n        except IOError:\n            return pd.DataFrame()\nelse:\n    #print(\"retrieving \"+stock+\" quotes from the web\")\n    start=(now-dt.timedelta(days=period)).strftime(\"%Y-%m-%d\")\n    try:\n        df=web.get_data_yahoo(stock,start,end)\n        if not df.empty:\n            df.to_csv('cache/'+stock+'.csv')\n    except IOError:\n        return pd.DataFrame()\n\nreturn df\n```\n\nand here is the code in main to call the function and try to align(select) the quotes only on trading days.\n\n```\nfirsthsidate=hsi.index.to_pydatetime()[0].date()\nlasthsidate=hsi.index.to_pydatetime()[-1].date()\n#now=dt.date.today()\nhsidelay=(now-lasthsidate).days\ntrading_days=hsi.index\nfor stocknum in ssynos[0:]:\n    nosofstock+=1\n    df=readStockPrice(stocknum,delay=hsidelay)\n    if df.empty:\n        errlist.append(stocknum)\n        continue\n    #excluding non-trading days quotes\n    stock=df.loc[trading_days]\n    lastprice=stock.iloc[-1]['Close']\n```\n\nthe outputs and the snap shot of the stored csv had been posted to the stackoverflow quoted in the original post. two things could be noted.\n1. only a few out of 1200+ stocks, the datetimeindex strangely changed to epoch like int after the selection by the trading days datetimeitem.\n2. the stored csv of historical quotes mixed with record of diff datetimeindex format. actually i used the same code (function call) to store and retrieve the quotes, it was just after the upgrade from 10.1 to 13.1, the delta (the latest quotes) i retrieved from the web were stored in form without the time info.\n\ni bet the problem is due to the pt2, but the interesting thing is, though all stored csv are with mixed format datatime index, only a few of the stock caused the problem...\n\nif you need me any further info, pls let me know...\n\ntkyou!\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/36496379",
    "html_url": "https://github.com/pandas-dev/pandas/issues/6523#issuecomment-36496379",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/6523",
    "id": 36496379,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2NDk2Mzc5",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-03-03T10:11:07Z",
    "updated_at": "2014-03-03T10:11:07Z",
    "author_association": "CONTRIBUTOR",
    "body": "pls put your exact parameters \nthis is impossible to test unless I can simply copy and paste your example\n\neg hsiindex, now, ssynos, trading_days are all undefined \n\nand narrow it down to where reproduces exactly with a single stock / small number\n\nyou should be able to copy and paste your text and have the error pop up\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/39670474",
    "html_url": "https://github.com/pandas-dev/pandas/issues/6523#issuecomment-39670474",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/6523",
    "id": 39670474,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NjcwNDc0",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-04-06T14:58:42Z",
    "updated_at": "2014-04-06T14:58:42Z",
    "author_association": "CONTRIBUTOR",
    "body": "need more imformation as requested. pls reopen if you continue to have issues.\n"
  }
]
