[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/353801958",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18930#issuecomment-353801958",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18930",
    "id": 353801958,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MzgwMTk1OA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-24T20:31:45Z",
    "updated_at": "2017-12-24T20:31:45Z",
    "author_association": "CONTRIBUTOR",
    "body": "pls show a copy pastable example"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/353802602",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18930#issuecomment-353802602",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18930",
    "id": 353802602,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MzgwMjYwMg==",
    "user": {
      "login": "zfrenchee",
      "id": 2761597,
      "node_id": "MDQ6VXNlcjI3NjE1OTc=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/2761597?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zfrenchee",
      "html_url": "https://github.com/zfrenchee",
      "followers_url": "https://api.github.com/users/zfrenchee/followers",
      "following_url": "https://api.github.com/users/zfrenchee/following{/other_user}",
      "gists_url": "https://api.github.com/users/zfrenchee/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zfrenchee/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zfrenchee/subscriptions",
      "organizations_url": "https://api.github.com/users/zfrenchee/orgs",
      "repos_url": "https://api.github.com/users/zfrenchee/repos",
      "events_url": "https://api.github.com/users/zfrenchee/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zfrenchee/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-24T20:49:22Z",
    "updated_at": "2017-12-24T20:49:37Z",
    "author_association": "CONTRIBUTOR",
    "body": "```\r\ndf = pd.DataFrame({'A':{'a':1,'b':2},'B':{'a':1,'b':2},'C':{'a':1,'b':2}})\r\ndf.groupby('A')[['B','C']].apply(lambda x: x.to_records())  # => TypeError\r\ndf.groupby('A').apply(lambda x: x[['B','C']].to_records())  # => Succeeds\r\n```"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/353998255",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18930#issuecomment-353998255",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18930",
    "id": 353998255,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1Mzk5ODI1NQ==",
    "user": {
      "login": "bobhaffner",
      "id": 8531623,
      "node_id": "MDQ6VXNlcjg1MzE2MjM=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/8531623?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bobhaffner",
      "html_url": "https://github.com/bobhaffner",
      "followers_url": "https://api.github.com/users/bobhaffner/followers",
      "following_url": "https://api.github.com/users/bobhaffner/following{/other_user}",
      "gists_url": "https://api.github.com/users/bobhaffner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bobhaffner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bobhaffner/subscriptions",
      "organizations_url": "https://api.github.com/users/bobhaffner/orgs",
      "repos_url": "https://api.github.com/users/bobhaffner/repos",
      "events_url": "https://api.github.com/users/bobhaffner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bobhaffner/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-26T18:27:28Z",
    "updated_at": "2017-12-26T18:27:28Z",
    "author_association": "CONTRIBUTOR",
    "body": "I had some time this morning so I looked at this.  Here's what I found out.\r\n\r\nThis looks like the line where things head south.\r\nhttps://github.com/pandas-dev/pandas/blob/ee9c7e9b19a1fa3c4499d10885dec72f1d651832/pandas/core/series.py#L248\r\n\r\nThe successful line below has name = None\r\n`df.groupby('A').apply(lambda x: x[['B','C']].to_records())  # => Succeeds`\r\n\r\nand the line that errors has a name = ['B', 'C']  \r\n`df.groupby('A')[['B','C']].apply(lambda x: x.to_records())  # => TypeError`\r\n\r\nps. swapping out `to_records` for something similar like `to_dict` does work\r\n`df.groupby('A')['B','C'].apply(lambda x: x.to_dict())` "
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/354296487",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18930#issuecomment-354296487",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18930",
    "id": 354296487,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NDI5NjQ4Nw==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-28T14:26:23Z",
    "updated_at": "2017-12-28T14:26:23Z",
    "author_association": "CONTRIBUTOR",
    "body": "hmm, it maybe that the rec-array is not handled correctly."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/354566324",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18930#issuecomment-354566324",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18930",
    "id": 354566324,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NDU2NjMyNA==",
    "user": {
      "login": "bobhaffner",
      "id": 8531623,
      "node_id": "MDQ6VXNlcjg1MzE2MjM=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/8531623?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bobhaffner",
      "html_url": "https://github.com/bobhaffner",
      "followers_url": "https://api.github.com/users/bobhaffner/followers",
      "following_url": "https://api.github.com/users/bobhaffner/following{/other_user}",
      "gists_url": "https://api.github.com/users/bobhaffner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bobhaffner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bobhaffner/subscriptions",
      "organizations_url": "https://api.github.com/users/bobhaffner/orgs",
      "repos_url": "https://api.github.com/users/bobhaffner/repos",
      "events_url": "https://api.github.com/users/bobhaffner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bobhaffner/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-30T20:21:54Z",
    "updated_at": "2017-12-30T20:21:54Z",
    "author_association": "CONTRIBUTOR",
    "body": "Here's what I'm thinking\r\n\r\nModify the `NDFrameGroupBy` class method called `_wrap_applied_output` to deal with recarrays\r\n\r\nMaybe something like the following which fixes this issue and all current tests in `test_groupby.py` still pass.   \r\n\r\nAny feedback?\r\n\r\n```\r\ngit diff ..upstream/master -- pandas/core/groupby.py \r\n\r\ndiff --git a/pandas/core/groupby.py b/pandas/core/groupby.py\r\nindex 6a2f49a89..041239ed0 100644\r\n--- a/pandas/core/groupby.py\r\n+++ b/pandas/core/groupby.py\r\n@@ -3977,8 +3977,6 @@ class NDFrameGroupBy(GroupBy):\r\n                         return self._concat_objects(\r\n                             keys, values, not_indexed_same=True,\r\n                         )\r\n-                if isinstance(v, np.recarray):\r\n-                    return Series(values, index=key_index)\r\n \r\n                 try:\r\n                     if self.axis == 0:\r\n\r\n```"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/354566394",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18930#issuecomment-354566394",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18930",
    "id": 354566394,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NDU2NjM5NA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-30T20:23:43Z",
    "updated_at": "2017-12-30T20:23:43Z",
    "author_association": "CONTRIBUTOR",
    "body": "NO. don't specifically deal with recarrays, you can possibly handle an array separaly though (recarray is a sub-class)."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/354567160",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18930#issuecomment-354567160",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18930",
    "id": 354567160,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NDU2NzE2MA==",
    "user": {
      "login": "zfrenchee",
      "id": 2761597,
      "node_id": "MDQ6VXNlcjI3NjE1OTc=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/2761597?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zfrenchee",
      "html_url": "https://github.com/zfrenchee",
      "followers_url": "https://api.github.com/users/zfrenchee/followers",
      "following_url": "https://api.github.com/users/zfrenchee/following{/other_user}",
      "gists_url": "https://api.github.com/users/zfrenchee/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zfrenchee/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zfrenchee/subscriptions",
      "organizations_url": "https://api.github.com/users/zfrenchee/orgs",
      "repos_url": "https://api.github.com/users/zfrenchee/repos",
      "events_url": "https://api.github.com/users/zfrenchee/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zfrenchee/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-30T20:40:25Z",
    "updated_at": "2017-12-30T20:40:25Z",
    "author_association": "CONTRIBUTOR",
    "body": "This is all above my pay-grade, but I'd like to suggest that part of the fix involves adding a test which covers this call pattern. From what I'm reading here, it sounds like this behavior isn't covered. "
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/354568250",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18930#issuecomment-354568250",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18930",
    "id": 354568250,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NDU2ODI1MA==",
    "user": {
      "login": "bobhaffner",
      "id": 8531623,
      "node_id": "MDQ6VXNlcjg1MzE2MjM=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/8531623?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bobhaffner",
      "html_url": "https://github.com/bobhaffner",
      "followers_url": "https://api.github.com/users/bobhaffner/followers",
      "following_url": "https://api.github.com/users/bobhaffner/following{/other_user}",
      "gists_url": "https://api.github.com/users/bobhaffner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bobhaffner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bobhaffner/subscriptions",
      "organizations_url": "https://api.github.com/users/bobhaffner/orgs",
      "repos_url": "https://api.github.com/users/bobhaffner/repos",
      "events_url": "https://api.github.com/users/bobhaffner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bobhaffner/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-30T21:03:55Z",
    "updated_at": "2017-12-30T21:03:55Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hi Jeff, thanks for the quick reply.  Let me attempt to add some context.   I was trying to follow the existing logic found [here](https://github.com/pandas-dev/pandas/blob/35443b517df127642b338e630fc05339b411eaa1/pandas/core/groupby.py#L3941)  \r\n\r\n```\r\nif isinstance(v, (np.ndarray, Index, Series)):\r\n    if isinstance(v, Series):\r\n        ...\r\n    if isinstance(v, np.recarray):  #proposed addition\r\n        return Series(values, index=key_index)                \r\n```"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/354568342",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18930#issuecomment-354568342",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18930",
    "id": 354568342,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NDU2ODM0Mg==",
    "user": {
      "login": "bobhaffner",
      "id": 8531623,
      "node_id": "MDQ6VXNlcjg1MzE2MjM=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/8531623?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bobhaffner",
      "html_url": "https://github.com/bobhaffner",
      "followers_url": "https://api.github.com/users/bobhaffner/followers",
      "following_url": "https://api.github.com/users/bobhaffner/following{/other_user}",
      "gists_url": "https://api.github.com/users/bobhaffner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bobhaffner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bobhaffner/subscriptions",
      "organizations_url": "https://api.github.com/users/bobhaffner/orgs",
      "repos_url": "https://api.github.com/users/bobhaffner/repos",
      "events_url": "https://api.github.com/users/bobhaffner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bobhaffner/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-30T21:05:57Z",
    "updated_at": "2017-12-30T21:05:57Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hi @zfrenchee  probably above mine too  :-)\r\n\r\nbut yes, it's typical to add tests to cover additions.  Thanks for submitting this by the way."
  }
]
