[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/62375070",
    "html_url": "https://github.com/pandas-dev/pandas/issues/8770#issuecomment-62375070",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/8770",
    "id": 62375070,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyMzc1MDcw",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-11-10T12:01:30Z",
    "updated_at": "2014-11-10T12:01:30Z",
    "author_association": "CONTRIBUTOR",
    "body": "cc @behzadnouri\n\nI marked this as a bug. But on second thought I think this is correct and the prior behavior was wrong.\n\nYou are grouping with 2 anonymous arrays (well a Series and an array). Neither of which exist in the grouped object. By definition groupby will make the groupers into the result index. But since you are dropping it (with `as_index=False`), then they are removed.\n\nYou can add these groupers as columns to preserver them, or use `as_index=True` (and then `reset_index`).\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/62378464",
    "html_url": "https://github.com/pandas-dev/pandas/issues/8770#issuecomment-62378464",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/8770",
    "id": 62378464,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyMzc4NDY0",
    "user": {
      "login": "behzadnouri",
      "id": 1288998,
      "node_id": "MDQ6VXNlcjEyODg5OTg=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1288998?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/behzadnouri",
      "html_url": "https://github.com/behzadnouri",
      "followers_url": "https://api.github.com/users/behzadnouri/followers",
      "following_url": "https://api.github.com/users/behzadnouri/following{/other_user}",
      "gists_url": "https://api.github.com/users/behzadnouri/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/behzadnouri/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/behzadnouri/subscriptions",
      "organizations_url": "https://api.github.com/users/behzadnouri/orgs",
      "repos_url": "https://api.github.com/users/behzadnouri/repos",
      "events_url": "https://api.github.com/users/behzadnouri/events{/privacy}",
      "received_events_url": "https://api.github.com/users/behzadnouri/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-11-10T12:36:13Z",
    "updated_at": "2014-11-10T12:36:13Z",
    "author_association": "CONTRIBUTOR",
    "body": "yes, this was changed by https://github.com/pydata/pandas/pull/8585 in order to have\n- consistency between aggregating methods: for example `max` and `idxmax` which does not add the grouper to the frame; as in https://github.com/pydata/pandas/issues/8582\n- not to have a new column with `NaN` name added to the frame (when the grouper series has no name)\n- adding the `grouper` will break `groupby` ops if the grouper name conflicts with column names in the resulting frame; as in https://github.com/pydata/pandas/issues/7115\n- consistency with api documentation which [says](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.groupby.html#pandas.DataFrame.groupby):\n\n> as_index=False is effectively “SQL-style” grouped output\n\nAs @jreback mentioned, for the old behaviour, you can either do `as_index=True` followed by `reset_index` or add the groupers as new columns to the frame, and do `groupby` by the columns:\n\n```\nIn [19]: groups = df.groupby([pd.cut(df['Foo'], ls), 'Bar'], as_index=True)\n\nIn [20]: groups['Baz'].agg({'Mean Baz': 'mean'}).reset_index()\nOut[20]: \n        Foo Bar  Mean Baz\n0    (0, 5]  AA        20\n1    (0, 5]  BB        45\n2   (5, 10]  BB        60\n3  (10, 15]  CC        70\n```\n\nor,\n\n```\nIn [21]: df['Foo.1'] = pd.cut(df['Foo'], ls)\n\nIn [22]: groups = df.groupby(['Foo.1', 'Bar'], as_index=False)\n\nIn [23]: groups['Baz'].agg({'Mean Baz': 'mean'})\nOut[23]: \n      Foo.1 Bar  Mean Baz\n0    (0, 5]  AA        20\n1    (0, 5]  BB        45\n2   (5, 10]  BB        60\n3  (10, 15]  CC        70\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/62378520",
    "html_url": "https://github.com/pandas-dev/pandas/issues/8770#issuecomment-62378520",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/8770",
    "id": 62378520,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyMzc4NTIw",
    "user": {
      "login": "aimboden",
      "id": 8589139,
      "node_id": "MDQ6VXNlcjg1ODkxMzk=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/8589139?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aimboden",
      "html_url": "https://github.com/aimboden",
      "followers_url": "https://api.github.com/users/aimboden/followers",
      "following_url": "https://api.github.com/users/aimboden/following{/other_user}",
      "gists_url": "https://api.github.com/users/aimboden/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aimboden/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aimboden/subscriptions",
      "organizations_url": "https://api.github.com/users/aimboden/orgs",
      "repos_url": "https://api.github.com/users/aimboden/repos",
      "events_url": "https://api.github.com/users/aimboden/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aimboden/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-11-10T12:36:51Z",
    "updated_at": "2014-11-10T12:36:51Z",
    "author_association": "NONE",
    "body": "@jreback \n\nIf you think the previous behavior was wrong, I can live with that using `reset_index`.\n\nHowever, I still think that it is inconsistent. Why would the categorical that we are grouping with be dropped, while the Series that is also used as a grouper ('Bar') is kept?\n\nIf we follow through with your logic, then shouldn't the result simply be\n\n|  | Mean Baz |\n| --- | --- |\n| 0 | 20 |\n| 1 | 45 |\n| 2 | 60 |\n| 3 | 70 |\n\n, since both groupers would then be dropped from the resulting DataFrame?\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/62379666",
    "html_url": "https://github.com/pandas-dev/pandas/issues/8770#issuecomment-62379666",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/8770",
    "id": 62379666,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyMzc5NjY2",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-11-10T12:48:27Z",
    "updated_at": "2014-11-10T12:48:27Z",
    "author_association": "CONTRIBUTOR",
    "body": "@Gimli510 no, the 'Bar' is added back, as a named grouper is not excluded. I could see that this is confusing.  @behzadnouri ?\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/62379766",
    "html_url": "https://github.com/pandas-dev/pandas/issues/8770#issuecomment-62379766",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/8770",
    "id": 62379766,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyMzc5NzY2",
    "user": {
      "login": "aimboden",
      "id": 8589139,
      "node_id": "MDQ6VXNlcjg1ODkxMzk=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/8589139?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aimboden",
      "html_url": "https://github.com/aimboden",
      "followers_url": "https://api.github.com/users/aimboden/followers",
      "following_url": "https://api.github.com/users/aimboden/following{/other_user}",
      "gists_url": "https://api.github.com/users/aimboden/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aimboden/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aimboden/subscriptions",
      "organizations_url": "https://api.github.com/users/aimboden/orgs",
      "repos_url": "https://api.github.com/users/aimboden/repos",
      "events_url": "https://api.github.com/users/aimboden/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aimboden/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-11-10T12:49:31Z",
    "updated_at": "2014-11-10T12:50:54Z",
    "author_association": "NONE",
    "body": "@behzadnouri \nThanks for explaining the rationale behind this change, which makes sense regarding the issues encountered. Maybe there is no better way? I still feel that this should be documented.\n\nMaybe the API changes section of the release notes should be updated? \nIt states that\n\ngroupby with as_index=False will not add erroneous extra columns to result\n\nI couldn't find any hint that the addition of the grouper to the resulting DataFrame was an erroneous extra column. The \"SQL-Style\" grouped output of the documentation is also not very telling to the mere user that I am :/\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/62380256",
    "html_url": "https://github.com/pandas-dev/pandas/issues/8770#issuecomment-62380256",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/8770",
    "id": 62380256,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyMzgwMjU2",
    "user": {
      "login": "aimboden",
      "id": 8589139,
      "node_id": "MDQ6VXNlcjg1ODkxMzk=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/8589139?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aimboden",
      "html_url": "https://github.com/aimboden",
      "followers_url": "https://api.github.com/users/aimboden/followers",
      "following_url": "https://api.github.com/users/aimboden/following{/other_user}",
      "gists_url": "https://api.github.com/users/aimboden/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aimboden/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aimboden/subscriptions",
      "organizations_url": "https://api.github.com/users/aimboden/orgs",
      "repos_url": "https://api.github.com/users/aimboden/repos",
      "events_url": "https://api.github.com/users/aimboden/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aimboden/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-11-10T12:54:28Z",
    "updated_at": "2014-11-10T12:54:28Z",
    "author_association": "NONE",
    "body": "@jreback but the grouper does have a name in this case, doesn't it?\n\n``` python\n>>> grouper = pd.cut(df['Foo'], ls)\n>>> grouper\n0      (0, 5]\n1      (0, 5]\n2      (0, 5]\n3      (0, 5]\n4      (0, 5]\n5     (5, 10]\n6    (10, 15]\nName: Foo, dtype: category\nCategories (6, object): [(0, 5] < (5, 10] < (10, 15] < (15, 20] < (20, 25] < (25, 30]]\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/403151714",
    "html_url": "https://github.com/pandas-dev/pandas/issues/8770#issuecomment-403151714",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/8770",
    "id": 403151714,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwMzE1MTcxNA==",
    "user": {
      "login": "wesm",
      "id": 329591,
      "node_id": "MDQ6VXNlcjMyOTU5MQ==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/329591?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wesm",
      "html_url": "https://github.com/wesm",
      "followers_url": "https://api.github.com/users/wesm/followers",
      "following_url": "https://api.github.com/users/wesm/following{/other_user}",
      "gists_url": "https://api.github.com/users/wesm/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wesm/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wesm/subscriptions",
      "organizations_url": "https://api.github.com/users/wesm/orgs",
      "repos_url": "https://api.github.com/users/wesm/repos",
      "events_url": "https://api.github.com/users/wesm/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wesm/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-06T21:30:00Z",
    "updated_at": "2018-07-06T21:30:00Z",
    "author_association": "MEMBER",
    "body": "Closing. I welcome anyone who wishes to revisit this with pandas >= 0.23.2"
  }
]
