[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/391055556",
    "html_url": "https://github.com/pandas-dev/pandas/issues/21172#issuecomment-391055556",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/21172",
    "id": 391055556,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MTA1NTU1Ng==",
    "user": {
      "login": "WillAyd",
      "id": 609873,
      "node_id": "MDQ6VXNlcjYwOTg3Mw==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/609873?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/WillAyd",
      "html_url": "https://github.com/WillAyd",
      "followers_url": "https://api.github.com/users/WillAyd/followers",
      "following_url": "https://api.github.com/users/WillAyd/following{/other_user}",
      "gists_url": "https://api.github.com/users/WillAyd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/WillAyd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/WillAyd/subscriptions",
      "organizations_url": "https://api.github.com/users/WillAyd/orgs",
      "repos_url": "https://api.github.com/users/WillAyd/repos",
      "events_url": "https://api.github.com/users/WillAyd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/WillAyd/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-22T16:29:40Z",
    "updated_at": "2018-05-22T16:29:40Z",
    "author_association": "MEMBER",
    "body": "Can you simplify your example? Ideally focus on one copy / paste-able example that outlines the issue and expected result.\r\n\r\nBe sure to check out the contributing guide for proper bug reporting:\r\n\r\nhttps://pandas.pydata.org/pandas-docs/stable/contributing.html#bug-reports-and-enhancement-requests"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/391058373",
    "html_url": "https://github.com/pandas-dev/pandas/issues/21172#issuecomment-391058373",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/21172",
    "id": 391058373,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MTA1ODM3Mw==",
    "user": {
      "login": "babky",
      "id": 12639564,
      "node_id": "MDQ6VXNlcjEyNjM5NTY0",
      "avatar_url": "https://avatars1.githubusercontent.com/u/12639564?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/babky",
      "html_url": "https://github.com/babky",
      "followers_url": "https://api.github.com/users/babky/followers",
      "following_url": "https://api.github.com/users/babky/following{/other_user}",
      "gists_url": "https://api.github.com/users/babky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/babky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/babky/subscriptions",
      "organizations_url": "https://api.github.com/users/babky/orgs",
      "repos_url": "https://api.github.com/users/babky/repos",
      "events_url": "https://api.github.com/users/babky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/babky/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-22T16:38:18Z",
    "updated_at": "2018-05-22T16:45:37Z",
    "author_association": "CONTRIBUTOR",
    "body": "The most prominent sample is this one\r\n```python\r\nimport pandas as pd\r\n\r\nprint(pd.SparseDataFrame({\"F1\": [float('nan'), float('nan')], \"F2\": [0, 1]}).dropna(axis=1, inplace=False, how='all'))\r\n```\r\noutputs\r\n```\r\n   F1\r\n0 NaN\r\n1 NaN\r\n```\r\nThat means that after dropping fields having NaNs a field having all `NaN`s is returned instead of the field `F2`. It should have dropped field `F1`."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/391076626",
    "html_url": "https://github.com/pandas-dev/pandas/issues/21172#issuecomment-391076626",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/21172",
    "id": 391076626,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MTA3NjYyNg==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-22T17:34:48Z",
    "updated_at": "2018-05-22T17:34:48Z",
    "author_association": "CONTRIBUTOR",
    "body": "Is this new in 0.23?"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/391088262",
    "html_url": "https://github.com/pandas-dev/pandas/issues/21172#issuecomment-391088262",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/21172",
    "id": 391088262,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MTA4ODI2Mg==",
    "user": {
      "login": "babky",
      "id": 12639564,
      "node_id": "MDQ6VXNlcjEyNjM5NTY0",
      "avatar_url": "https://avatars1.githubusercontent.com/u/12639564?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/babky",
      "html_url": "https://github.com/babky",
      "followers_url": "https://api.github.com/users/babky/followers",
      "following_url": "https://api.github.com/users/babky/following{/other_user}",
      "gists_url": "https://api.github.com/users/babky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/babky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/babky/subscriptions",
      "organizations_url": "https://api.github.com/users/babky/orgs",
      "repos_url": "https://api.github.com/users/babky/repos",
      "events_url": "https://api.github.com/users/babky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/babky/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-22T18:11:05Z",
    "updated_at": "2018-05-22T18:11:05Z",
    "author_association": "CONTRIBUTOR",
    "body": "Exactly I tried it in a new virtualenv and pandas v 0.23.0 has this issue and v 0.22.0 does not."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/391116840",
    "html_url": "https://github.com/pandas-dev/pandas/issues/21172#issuecomment-391116840",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/21172",
    "id": 391116840,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MTExNjg0MA==",
    "user": {
      "login": "WillAyd",
      "id": 609873,
      "node_id": "MDQ6VXNlcjYwOTg3Mw==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/609873?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/WillAyd",
      "html_url": "https://github.com/WillAyd",
      "followers_url": "https://api.github.com/users/WillAyd/followers",
      "following_url": "https://api.github.com/users/WillAyd/following{/other_user}",
      "gists_url": "https://api.github.com/users/WillAyd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/WillAyd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/WillAyd/subscriptions",
      "organizations_url": "https://api.github.com/users/WillAyd/orgs",
      "repos_url": "https://api.github.com/users/WillAyd/repos",
      "events_url": "https://api.github.com/users/WillAyd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/WillAyd/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-22T19:44:29Z",
    "updated_at": "2018-05-22T19:44:29Z",
    "author_association": "MEMBER",
    "body": "Thanks for the example / report. Investigation / PRs are always welcome!"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/391117920",
    "html_url": "https://github.com/pandas-dev/pandas/issues/21172#issuecomment-391117920",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/21172",
    "id": 391117920,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MTExNzkyMA==",
    "user": {
      "login": "babky",
      "id": 12639564,
      "node_id": "MDQ6VXNlcjEyNjM5NTY0",
      "avatar_url": "https://avatars1.githubusercontent.com/u/12639564?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/babky",
      "html_url": "https://github.com/babky",
      "followers_url": "https://api.github.com/users/babky/followers",
      "following_url": "https://api.github.com/users/babky/following{/other_user}",
      "gists_url": "https://api.github.com/users/babky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/babky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/babky/subscriptions",
      "organizations_url": "https://api.github.com/users/babky/orgs",
      "repos_url": "https://api.github.com/users/babky/repos",
      "events_url": "https://api.github.com/users/babky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/babky/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-22T19:48:28Z",
    "updated_at": "2018-05-22T19:48:28Z",
    "author_association": "CONTRIBUTOR",
    "body": "To conclude. I've isolated this issue into this code. A mask - SparseArray of the fields to which should be preserved is created. The mask is called `nonzero` operation, however that is buggy even in 0.22.0. And in both versions this code\r\n```python\r\nimport pandas as pd\r\n\r\nsa = pd.SparseArray([float('nan'), float('nan'), 1, 0, 0, 2, 0, 0, 0, 3, 0, 0])\r\nsa = sa.nonzero()\r\nprint(sa)\r\n```\r\n\r\noutputs `0, 3, 7`. The correct result would be `2, 5, 9` - shifted by two. In pandas 0.22.0 this was resolved by using `to_dense()` in the process.\r\n\r\nTo resolve this - one could use `to_dense()` and `dropna()` would work and `SparseArray` would remain buggy. What would be of a greater value is fixing `SparseArray`."
  }
]
