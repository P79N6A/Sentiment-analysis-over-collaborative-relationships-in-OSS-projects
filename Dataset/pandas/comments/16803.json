[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/312205855",
    "html_url": "https://github.com/pandas-dev/pandas/issues/16803#issuecomment-312205855",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/16803",
    "id": 312205855,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxMjIwNTg1NQ==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-06-30T08:17:18Z",
    "updated_at": "2017-06-30T08:17:18Z",
    "author_association": "MEMBER",
    "body": "One of the things I already have thought about before is that we probably can do less in the `setup` ? \r\nI mean, is it needed to create the DataFrames in a setup (which gets repeated a lot), or would it be sufficient to just create them once in the file? (as long as the benchmarks don't modify it)\r\n\r\nEg https://github.com/pandas-dev/pandas/blob/master/asv_bench/benchmarks/groupby.py#L399 we could do the actual creation of the frame outside setup, and in the setup only pick the right one based on the parameters."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/312251283",
    "html_url": "https://github.com/pandas-dev/pandas/issues/16803#issuecomment-312251283",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/16803",
    "id": 312251283,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxMjI1MTI4Mw==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-06-30T12:12:20Z",
    "updated_at": "2017-06-30T12:12:20Z",
    "author_association": "CONTRIBUTOR",
    "body": "There's also the setup_cache method, which executes once\n\n> On Jun 30, 2017, at 3:17 AM, Joris Van den Bossche <notifications@github.com> wrote:\n> \n> One of the things I already have thought about before is that we probably can do less in the setup ?\n> I mean, is it needed to create the DataFrames in a setup (which gets repeated a lot), or would it be sufficient to just create them once in the file? (as long as the benchmarks don't modify it)\n> \n> Eg https://github.com/pandas-dev/pandas/blob/master/asv_bench/benchmarks/groupby.py#L399 we could do the actual creation of the frame outside setup, and in the setup only pick the right one based on the parameters.\n> \n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/312418392",
    "html_url": "https://github.com/pandas-dev/pandas/issues/16803#issuecomment-312418392",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/16803",
    "id": 312418392,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxMjQxODM5Mg==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-07-01T08:11:33Z",
    "updated_at": "2017-07-01T08:11:33Z",
    "author_association": "CONTRIBUTOR",
    "body": "is this actually a big deal? "
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/318861353",
    "html_url": "https://github.com/pandas-dev/pandas/issues/16803#issuecomment-318861353",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/16803",
    "id": 318861353,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxODg2MTM1Mw==",
    "user": {
      "login": "jbrockmendel",
      "id": 8078968,
      "node_id": "MDQ6VXNlcjgwNzg5Njg=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/8078968?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jbrockmendel",
      "html_url": "https://github.com/jbrockmendel",
      "followers_url": "https://api.github.com/users/jbrockmendel/followers",
      "following_url": "https://api.github.com/users/jbrockmendel/following{/other_user}",
      "gists_url": "https://api.github.com/users/jbrockmendel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jbrockmendel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jbrockmendel/subscriptions",
      "organizations_url": "https://api.github.com/users/jbrockmendel/orgs",
      "repos_url": "https://api.github.com/users/jbrockmendel/repos",
      "events_url": "https://api.github.com/users/jbrockmendel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jbrockmendel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-07-29T21:38:39Z",
    "updated_at": "2017-07-29T21:38:39Z",
    "author_association": "MEMBER",
    "body": "Is there a measure of the relative importance of these benchmarks?  i.e. if I find improvements in subset A and slowdowns in subset B, when can this count as a win?"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/318868173",
    "html_url": "https://github.com/pandas-dev/pandas/issues/16803#issuecomment-318868173",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/16803",
    "id": 318868173,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxODg2ODE3Mw==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-07-30T00:13:16Z",
    "updated_at": "2017-07-30T00:13:16Z",
    "author_association": "MEMBER",
    "body": "@jbrockmendel there is no 'measure' for that, apart from common sense. \r\n\r\nBut note that this is issue is not about that, it is about the fact that some tests take a long time to run (not because of pandas being too slow, but because of the set-up of the test)"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/344096153",
    "html_url": "https://github.com/pandas-dev/pandas/issues/16803#issuecomment-344096153",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/16803",
    "id": 344096153,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NDA5NjE1Mw==",
    "user": {
      "login": "jbrockmendel",
      "id": 8078968,
      "node_id": "MDQ6VXNlcjgwNzg5Njg=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/8078968?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jbrockmendel",
      "html_url": "https://github.com/jbrockmendel",
      "followers_url": "https://api.github.com/users/jbrockmendel/followers",
      "following_url": "https://api.github.com/users/jbrockmendel/following{/other_user}",
      "gists_url": "https://api.github.com/users/jbrockmendel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jbrockmendel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jbrockmendel/subscriptions",
      "organizations_url": "https://api.github.com/users/jbrockmendel/orgs",
      "repos_url": "https://api.github.com/users/jbrockmendel/repos",
      "events_url": "https://api.github.com/users/jbrockmendel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jbrockmendel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-13T23:39:12Z",
    "updated_at": "2017-11-13T23:39:12Z",
    "author_association": "MEMBER",
    "body": "For some of these, e.g. reindex.Reindexing, there is a lot of unnecessary setup being done.  `df2` is constructed for every call of all three benchmarks, but is only used in one.  Same for `s1` and `s2`.  It isn't obvious how much mileage can be gained by trimming these down though."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/344125126",
    "html_url": "https://github.com/pandas-dev/pandas/issues/16803#issuecomment-344125126",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/16803",
    "id": 344125126,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NDEyNTEyNg==",
    "user": {
      "login": "jbrockmendel",
      "id": 8078968,
      "node_id": "MDQ6VXNlcjgwNzg5Njg=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/8078968?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jbrockmendel",
      "html_url": "https://github.com/jbrockmendel",
      "followers_url": "https://api.github.com/users/jbrockmendel/followers",
      "following_url": "https://api.github.com/users/jbrockmendel/following{/other_user}",
      "gists_url": "https://api.github.com/users/jbrockmendel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jbrockmendel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jbrockmendel/subscriptions",
      "organizations_url": "https://api.github.com/users/jbrockmendel/orgs",
      "repos_url": "https://api.github.com/users/jbrockmendel/repos",
      "events_url": "https://api.github.com/users/jbrockmendel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jbrockmendel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-14T02:22:52Z",
    "updated_at": "2017-11-14T02:22:52Z",
    "author_association": "MEMBER",
    "body": "@TomAugspurger  can you post the hack you used to measure setup time?  I'm poking at this instead of doing real work."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/344126208",
    "html_url": "https://github.com/pandas-dev/pandas/issues/16803#issuecomment-344126208",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/16803",
    "id": 344126208,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NDEyNjIwOA==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-14T02:29:28Z",
    "updated_at": "2017-11-14T02:29:41Z",
    "author_association": "CONTRIBUTOR",
    "body": "Happy to encourage productive procrastination :)\r\n\r\nThis is the diff in my local copy (which is based on a pretty old commit now)\r\n\r\n```diff\r\ndiff --git a/asv/benchmarks.py b/asv/benchmarks.py\r\nindex 60442b9..b3b96ba 100644\r\n--- a/asv/benchmarks.py\r\n+++ b/asv/benchmarks.py\r\n@@ -89,6 +89,8 @@ def run_benchmark(benchmark, root, env, show_stderr=False,\r\n \r\n         - `errcode`: Error return code.\r\n     \"\"\"\r\n+    import time\r\n+    t0 = time.time()\r\n     name = benchmark['name']\r\n     result = {'stderr': '', 'profile': None, 'errcode': 0}\r\n     bench_results = []\r\n@@ -230,6 +232,10 @@ def run_benchmark(benchmark, root, env, show_stderr=False,\r\n             with log.indent():\r\n                 log.error(result['stderr'])\r\n \r\n+        t1 = time.time()\r\n+        line = '{},{}\\n'.format(name, t1 - t0)\r\n+        with open(\"log.csv\", \"a\") as f:\r\n+            f.write(line)\r\n         return result\r\n \r\n \r\n@@ -535,7 +541,6 @@ class Benchmarks(dict):\r\n               and be a byte string containing the cProfile data.\r\n         \"\"\"\r\n         log.info(\"Benchmarking {0}\".format(env.name))\r\n-\r\n         with log.indent():\r\n             benchmarks = sorted(list(six.iteritems(self)))\r\n \r\n```"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/344317044",
    "html_url": "https://github.com/pandas-dev/pandas/issues/16803#issuecomment-344317044",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/16803",
    "id": 344317044,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NDMxNzA0NA==",
    "user": {
      "login": "jbrockmendel",
      "id": 8078968,
      "node_id": "MDQ6VXNlcjgwNzg5Njg=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/8078968?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jbrockmendel",
      "html_url": "https://github.com/jbrockmendel",
      "followers_url": "https://api.github.com/users/jbrockmendel/followers",
      "following_url": "https://api.github.com/users/jbrockmendel/following{/other_user}",
      "gists_url": "https://api.github.com/users/jbrockmendel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jbrockmendel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jbrockmendel/subscriptions",
      "organizations_url": "https://api.github.com/users/jbrockmendel/orgs",
      "repos_url": "https://api.github.com/users/jbrockmendel/repos",
      "events_url": "https://api.github.com/users/jbrockmendel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jbrockmendel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-14T16:35:28Z",
    "updated_at": "2017-11-14T16:35:28Z",
    "author_association": "MEMBER",
    "body": "Thanks, worked like a charm.  What _didn't_ work was my attempt to short-cut `setup` calls by defining attributes at the class level."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/344318079",
    "html_url": "https://github.com/pandas-dev/pandas/issues/16803#issuecomment-344318079",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/16803",
    "id": 344318079,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NDMxODA3OQ==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-14T16:38:22Z",
    "updated_at": "2017-11-14T16:38:22Z",
    "author_association": "MEMBER",
    "body": "> Thanks, worked like a charm. What didn't work was my attempt to short-cut setup calls by defining attributes at the class level.\r\n\r\nI think using 'global' data works, so defined on the module level (as long as it is only used for benchmarks that don't modify data). In some cases (if the module is not too long, something generic can be reused) that can be used I think."
  }
]
