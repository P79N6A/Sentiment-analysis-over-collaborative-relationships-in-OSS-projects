[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/75020621",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9519#issuecomment-75020621",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9519",
    "id": 75020621,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1MDIwNjIx",
    "user": {
      "login": "shoyer",
      "id": 1217238,
      "node_id": "MDQ6VXNlcjEyMTcyMzg=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1217238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shoyer",
      "html_url": "https://github.com/shoyer",
      "followers_url": "https://api.github.com/users/shoyer/followers",
      "following_url": "https://api.github.com/users/shoyer/following{/other_user}",
      "gists_url": "https://api.github.com/users/shoyer/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shoyer/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shoyer/subscriptions",
      "organizations_url": "https://api.github.com/users/shoyer/orgs",
      "repos_url": "https://api.github.com/users/shoyer/repos",
      "events_url": "https://api.github.com/users/shoyer/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shoyer/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-02-19T09:27:23Z",
    "updated_at": "2015-02-19T09:27:23Z",
    "author_association": "MEMBER",
    "body": "I agree, this is messy.\n\n_However_, I don't think we can change the behavior of `s.loc[2]`. The location based indexer primarily exists for pulling out individual values -- indexes with duplicate values are a bit of a special case. Changing this would break a huge amount of existing code.\n\nTo get your desired behavior, you could use a list/array instead of a single value:\n\n```\nIn [10]: s.loc[[1]]\nOut[10]:\n1    1\n1    2\ndtype: int64\n\nIn [11]: s.loc[[2]]\nOut[11]:\n2    3\ndtype: int64\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/75021487",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9519#issuecomment-75021487",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9519",
    "id": 75021487,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1MDIxNDg3",
    "user": {
      "login": "toobaz",
      "id": 1224492,
      "node_id": "MDQ6VXNlcjEyMjQ0OTI=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1224492?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/toobaz",
      "html_url": "https://github.com/toobaz",
      "followers_url": "https://api.github.com/users/toobaz/followers",
      "following_url": "https://api.github.com/users/toobaz/following{/other_user}",
      "gists_url": "https://api.github.com/users/toobaz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/toobaz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/toobaz/subscriptions",
      "organizations_url": "https://api.github.com/users/toobaz/orgs",
      "repos_url": "https://api.github.com/users/toobaz/repos",
      "events_url": "https://api.github.com/users/toobaz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/toobaz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-02-19T09:34:09Z",
    "updated_at": "2015-02-19T09:34:09Z",
    "author_association": "MEMBER",
    "body": "Sorry, I was not clear. I don't think the behavior of s.loc[2] should change in general, but just that it should depend on s.index.is_unique (i.e. taking care of what you rightly mention as a \"special case\"), not on the count of \"2\" in the index.\n\n(sorry again if this was obvious)\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/75023531",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9519#issuecomment-75023531",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9519",
    "id": 75023531,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1MDIzNTMx",
    "user": {
      "login": "shoyer",
      "id": 1217238,
      "node_id": "MDQ6VXNlcjEyMTcyMzg=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1217238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shoyer",
      "html_url": "https://github.com/shoyer",
      "followers_url": "https://api.github.com/users/shoyer/followers",
      "following_url": "https://api.github.com/users/shoyer/following{/other_user}",
      "gists_url": "https://api.github.com/users/shoyer/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shoyer/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shoyer/subscriptions",
      "organizations_url": "https://api.github.com/users/shoyer/orgs",
      "repos_url": "https://api.github.com/users/shoyer/repos",
      "events_url": "https://api.github.com/users/shoyer/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shoyer/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-02-19T09:50:12Z",
    "updated_at": "2015-02-19T09:50:12Z",
    "author_association": "MEMBER",
    "body": "Oh, okay. I could get behind that change.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/75023910",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9519#issuecomment-75023910",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9519",
    "id": 75023910,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1MDIzOTEw",
    "user": {
      "login": "toobaz",
      "id": 1224492,
      "node_id": "MDQ6VXNlcjEyMjQ0OTI=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1224492?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/toobaz",
      "html_url": "https://github.com/toobaz",
      "followers_url": "https://api.github.com/users/toobaz/followers",
      "following_url": "https://api.github.com/users/toobaz/following{/other_user}",
      "gists_url": "https://api.github.com/users/toobaz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/toobaz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/toobaz/subscriptions",
      "organizations_url": "https://api.github.com/users/toobaz/orgs",
      "repos_url": "https://api.github.com/users/toobaz/repos",
      "events_url": "https://api.github.com/users/toobaz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/toobaz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-02-19T09:53:10Z",
    "updated_at": "2015-02-19T09:53:10Z",
    "author_association": "MEMBER",
    "body": "(great... by the way: it will also be coherent with\n\n```\nIn [2]: type(Series([1,2,3], index=MultiIndex.from_tuples([('A', 'a'), ('A', 'b'), ('C', 'a')]))['C'])\nOut[2]: pandas.core.series.Series\n```\n\n)\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/75025313",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9519#issuecomment-75025313",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9519",
    "id": 75025313,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1MDI1MzEz",
    "user": {
      "login": "shoyer",
      "id": 1217238,
      "node_id": "MDQ6VXNlcjEyMTcyMzg=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1217238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shoyer",
      "html_url": "https://github.com/shoyer",
      "followers_url": "https://api.github.com/users/shoyer/followers",
      "following_url": "https://api.github.com/users/shoyer/following{/other_user}",
      "gists_url": "https://api.github.com/users/shoyer/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shoyer/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shoyer/subscriptions",
      "organizations_url": "https://api.github.com/users/shoyer/orgs",
      "repos_url": "https://api.github.com/users/shoyer/repos",
      "events_url": "https://api.github.com/users/shoyer/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shoyer/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-02-19T10:01:36Z",
    "updated_at": "2015-02-19T10:01:36Z",
    "author_association": "MEMBER",
    "body": "If you want to give this a go, I believe it should suffice to change this line and the same corresponding lines in the other `_maybe_get_bool_indexer` methods in that file: https://github.com/pydata/pandas/blob/bceb342d76ca4061fc8d3a1089bc4e83a32da656/pandas/index.pyx#L202\n\nInstead of `return last_true`, you want `return slice(last_true, last_true + 1)`. Using a slice with a single item is just as fast as indexing with an integer, but doesn't remove a dimension.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/75038304",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9519#issuecomment-75038304",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9519",
    "id": 75038304,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1MDM4MzA0",
    "user": {
      "login": "toobaz",
      "id": 1224492,
      "node_id": "MDQ6VXNlcjEyMjQ0OTI=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1224492?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/toobaz",
      "html_url": "https://github.com/toobaz",
      "followers_url": "https://api.github.com/users/toobaz/followers",
      "following_url": "https://api.github.com/users/toobaz/following{/other_user}",
      "gists_url": "https://api.github.com/users/toobaz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/toobaz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/toobaz/subscriptions",
      "organizations_url": "https://api.github.com/users/toobaz/orgs",
      "repos_url": "https://api.github.com/users/toobaz/repos",
      "events_url": "https://api.github.com/users/toobaz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/toobaz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-02-19T11:38:52Z",
    "updated_at": "2015-02-19T11:38:52Z",
    "author_association": "MEMBER",
    "body": "Ouch... I had wrongly assumed that each call to .loc was preceded by setting \"is_unique\".\n\nSo the change I am proposing would make the first use of \".loc\" on any given index cost O(log(N)) rather than O(N). Even considering that in unique indices it would then allow a speedup of ~ 2x for any subsequent call to \".loc\", I doubt this is acceptable.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/75040062",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9519#issuecomment-75040062",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9519",
    "id": 75040062,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1MDQwMDYy",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-02-19T11:53:32Z",
    "updated_at": "2015-02-19T11:53:32Z",
    "author_association": "CONTRIBUTOR",
    "body": "@toobaz the perf impact or getting s single element is generally irrelevant\nif you need to do this multiple times you would do it as a list-like (or Boolean) selection which has much better perf guarantees\n\nand you pay the indexing cost on the first use always\nwe always determine uniqueness via a hashtable \nindexing into a duplicate indexing is almost always O(n)\n\nthis API change is good idea but if u care about perf you shouldn't use duplicates in a single level of an index\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/75046432",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9519#issuecomment-75046432",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9519",
    "id": 75046432,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1MDQ2NDMy",
    "user": {
      "login": "toobaz",
      "id": 1224492,
      "node_id": "MDQ6VXNlcjEyMjQ0OTI=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1224492?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/toobaz",
      "html_url": "https://github.com/toobaz",
      "followers_url": "https://api.github.com/users/toobaz/followers",
      "following_url": "https://api.github.com/users/toobaz/following{/other_user}",
      "gists_url": "https://api.github.com/users/toobaz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/toobaz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/toobaz/subscriptions",
      "organizations_url": "https://api.github.com/users/toobaz/orgs",
      "repos_url": "https://api.github.com/users/toobaz/repos",
      "events_url": "https://api.github.com/users/toobaz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/toobaz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-02-19T12:48:22Z",
    "updated_at": "2015-02-19T12:48:22Z",
    "author_association": "MEMBER",
    "body": "@jreback Sorry. I had missed the fact that the first call to .loc creates the hashtable _anyway_ (through IndexEngine.__contains__). So forget my last message, I'll send a PR tonight.\n\nJust one question: shouldn't \nhttps://github.com/pydata/pandas/blob/bceb342d76ca4061fc8d3a1089bc4e83a32da656/pandas/index.pyx#L272\nhave one less indentation level?\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/75138734",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9519#issuecomment-75138734",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9519",
    "id": 75138734,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1MTM4NzM0",
    "user": {
      "login": "toobaz",
      "id": 1224492,
      "node_id": "MDQ6VXNlcjEyMjQ0OTI=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1224492?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/toobaz",
      "html_url": "https://github.com/toobaz",
      "followers_url": "https://api.github.com/users/toobaz/followers",
      "following_url": "https://api.github.com/users/toobaz/following{/other_user}",
      "gists_url": "https://api.github.com/users/toobaz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/toobaz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/toobaz/subscriptions",
      "organizations_url": "https://api.github.com/users/toobaz/orgs",
      "repos_url": "https://api.github.com/users/toobaz/repos",
      "events_url": "https://api.github.com/users/toobaz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/toobaz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-02-19T21:22:23Z",
    "updated_at": "2015-02-19T21:22:23Z",
    "author_association": "MEMBER",
    "body": "Not so easy as I hoped. I applied the suggested fixes and catched one more:\nhttps://github.com/toobaz/pandas/tree/nonuniqueslices\n... they are sufficient for .loc[label], but not for .loc[:,label], which passes to the IndexEngine an already filtered index. I won't have much time to investigate in the next few days.\n\nThe good/scaring part is that all (previously existing) tests pass.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/333359882",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9519#issuecomment-333359882",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9519",
    "id": 333359882,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMzM1OTg4Mg==",
    "user": {
      "login": "toobaz",
      "id": 1224492,
      "node_id": "MDQ6VXNlcjEyMjQ0OTI=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1224492?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/toobaz",
      "html_url": "https://github.com/toobaz",
      "followers_url": "https://api.github.com/users/toobaz/followers",
      "following_url": "https://api.github.com/users/toobaz/following{/other_user}",
      "gists_url": "https://api.github.com/users/toobaz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/toobaz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/toobaz/subscriptions",
      "organizations_url": "https://api.github.com/users/toobaz/orgs",
      "repos_url": "https://api.github.com/users/toobaz/repos",
      "events_url": "https://api.github.com/users/toobaz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/toobaz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-01T07:47:50Z",
    "updated_at": "2017-10-01T07:47:50Z",
    "author_association": "MEMBER",
    "body": "It is worth mentioning that ``MultiIndex``es already work as desired:\r\n\r\n``` python\r\nIn [2]: s = pd.Series(range(4),\r\n                      index=pd.MultiIndex.from_tuples([(1,2), (1, 2), (3, 4), (5, 6)]))\r\n\r\nIn [3]: s.loc[1,2].shape\r\nOut[3]: (2,)\r\n\r\nIn [4]: s.loc[3,4].shape\r\nOut[4]: (1,)\r\n```"
  }
]
