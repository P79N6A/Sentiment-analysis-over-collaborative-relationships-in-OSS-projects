[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/410577659",
    "html_url": "https://github.com/pandas-dev/pandas/issues/22206#issuecomment-410577659",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/22206",
    "id": 410577659,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMDU3NzY1OQ==",
    "user": {
      "login": "WillAyd",
      "id": 609873,
      "node_id": "MDQ6VXNlcjYwOTg3Mw==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/609873?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/WillAyd",
      "html_url": "https://github.com/WillAyd",
      "followers_url": "https://api.github.com/users/WillAyd/followers",
      "following_url": "https://api.github.com/users/WillAyd/following{/other_user}",
      "gists_url": "https://api.github.com/users/WillAyd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/WillAyd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/WillAyd/subscriptions",
      "organizations_url": "https://api.github.com/users/WillAyd/orgs",
      "repos_url": "https://api.github.com/users/WillAyd/repos",
      "events_url": "https://api.github.com/users/WillAyd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/WillAyd/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-06T03:16:23Z",
    "updated_at": "2018-08-06T03:16:23Z",
    "author_association": "MEMBER",
    "body": "I am not able to reproduce this as the below works after creating a small table called `foo` locally - can you try and craft a more minimal and reproducible example?\r\n\r\n```python\r\nIn [11]: db = sqlite3.connect('test_db')\r\nIn [12]: pd.read_sql_query('SELECT * from foo', db)\r\nOut[12]: \r\nEmpty DataFrame\r\nColumns: [id]\r\nIndex: []\r\n\r\nIn [14]: for _ in range(1):\r\n    ...:     for tbl in ('foo',):\r\n    ...:         print(pd.read_sql_query(f'SELECT * from {tbl}', db))\r\n    ...:         \r\n    ...:     \r\nEmpty DataFrame\r\nColumns: [id]\r\nIndex: []\r\n```\r\n\r\n<details>\r\n\r\nINSTALLED VERSIONS\r\n------------------\r\ncommit: 776fed3ab63d74ddef6e5af1a702b10c2a30bbb6\r\npython: 3.7.0.final.0\r\npython-bits: 64\r\nOS: Darwin\r\nOS-release: 17.7.0\r\nmachine: x86_64\r\nprocessor: i386\r\nbyteorder: little\r\nLC_ALL: None\r\nLANG: en_US.UTF-8\r\nLOCALE: en_US.UTF-8\r\n\r\npandas: 0.24.0.dev0+418.g776fed3ab\r\npytest: None\r\npip: 18.0\r\nsetuptools: 40.0.0\r\nCython: 0.28.5\r\nnumpy: 1.15.0\r\nscipy: None\r\npyarrow: None\r\nxarray: None\r\nIPython: 6.5.0\r\nsphinx: None\r\npatsy: None\r\ndateutil: 2.7.3\r\npytz: 2018.5\r\nblosc: None\r\nbottleneck: None\r\ntables: None\r\nnumexpr: None\r\nfeather: None\r\nmatplotlib: None\r\nopenpyxl: None\r\nxlrd: None\r\nxlwt: None\r\nxlsxwriter: None\r\nlxml: None\r\nbs4: None\r\nhtml5lib: None\r\nsqlalchemy: None\r\npymysql: None\r\npsycopg2: None\r\njinja2: None\r\ns3fs: None\r\nfastparquet: None\r\npandas_gbq: None\r\npandas_datareader: None\r\ngcsfs: None\r\n\r\n</details>"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/410977946",
    "html_url": "https://github.com/pandas-dev/pandas/issues/22206#issuecomment-410977946",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/22206",
    "id": 410977946,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMDk3Nzk0Ng==",
    "user": {
      "login": "xslates",
      "id": 8994002,
      "node_id": "MDQ6VXNlcjg5OTQwMDI=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/8994002?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/xslates",
      "html_url": "https://github.com/xslates",
      "followers_url": "https://api.github.com/users/xslates/followers",
      "following_url": "https://api.github.com/users/xslates/following{/other_user}",
      "gists_url": "https://api.github.com/users/xslates/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/xslates/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/xslates/subscriptions",
      "organizations_url": "https://api.github.com/users/xslates/orgs",
      "repos_url": "https://api.github.com/users/xslates/repos",
      "events_url": "https://api.github.com/users/xslates/events{/privacy}",
      "received_events_url": "https://api.github.com/users/xslates/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-07T08:31:04Z",
    "updated_at": "2018-08-07T08:31:04Z",
    "author_association": "NONE",
    "body": "Hi @WillAyd thank you for the reply. \r\n\r\nI'm attaching a zip file of the dataset I'm trying to query. \r\n\r\n```python\r\ntickers = ['NLY', 'SYF', 'TPX']\r\n\r\ndef fins(tickers, dbname):\r\n    '''retrieve dataset of financial statements'''\r\n\r\n    db = sqlite3.connect(f'dbname')\r\n    dataset = []\r\n    tables = ['_balance_sheet', '_cash_flow', '_income_statement']\r\n    \r\n    for i in tickers: \r\n        for j in tables:\r\n            SQL = f'SELECT * FROM {i}{j}'\r\n            print(SQL)\r\n            pd.read_sql_query(SQL, db)\r\n\r\n# error happens when you call this\r\nfins(tickers, 'financials.db')\r\n```\r\nWhen I run the function on this data, it says that the table(s) don't exist. I've been squinting at this for a bit so maybe I'm missing something obvious.\r\n\r\n[financials.db.zip](https://github.com/pandas-dev/pandas/files/2265631/financials.db.zip)\r\n\r\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/411110788",
    "html_url": "https://github.com/pandas-dev/pandas/issues/22206#issuecomment-411110788",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/22206",
    "id": 411110788,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMTExMDc4OA==",
    "user": {
      "login": "WillAyd",
      "id": 609873,
      "node_id": "MDQ6VXNlcjYwOTg3Mw==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/609873?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/WillAyd",
      "html_url": "https://github.com/WillAyd",
      "followers_url": "https://api.github.com/users/WillAyd/followers",
      "following_url": "https://api.github.com/users/WillAyd/following{/other_user}",
      "gists_url": "https://api.github.com/users/WillAyd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/WillAyd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/WillAyd/subscriptions",
      "organizations_url": "https://api.github.com/users/WillAyd/orgs",
      "repos_url": "https://api.github.com/users/WillAyd/repos",
      "events_url": "https://api.github.com/users/WillAyd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/WillAyd/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-07T16:05:21Z",
    "updated_at": "2018-08-07T16:05:21Z",
    "author_association": "MEMBER",
    "body": "Hmm still unable to replicate:\r\n\r\n```python\r\nIn [8]:     for i in tickers: \r\n   ...:         for j in tables:\r\n   ...:             SQL = f'SELECT * FROM {i}{j}'\r\n   ...:             print(SQL)\r\n   ...:             print(pd.read_sql_query(SQL, db).loc[0, 'title'])\r\n   ...:         \r\n   ...:         \r\nSELECT * FROM NLY_balance_sheet\r\nAssets\r\nSELECT * FROM NLY_cash_flow\r\nCash Flows From Operating Activities\r\nSELECT * FROM NLY_income_statement\r\nRevenue\r\nSELECT * FROM SYF_balance_sheet\r\nAssets\r\nSELECT * FROM SYF_cash_flow\r\nCash Flows From Operating Activities\r\nSELECT * FROM SYF_income_statement\r\nRevenue\r\nSELECT * FROM TPX_balance_sheet\r\nAssets\r\nSELECT * FROM TPX_cash_flow\r\nCash Flows From Operating Activities\r\nSELECT * FROM TPX_income_statement\r\nRevenue\r\n```\r\n\r\nTried on Python 3.6 and 3.7 so no difference there. Can you try on master and see if that resolves for you?\r\n\r\n<details>\r\n\r\nINSTALLED VERSIONS\r\n------------------\r\ncommit: 2156431c3a673fbfb720983474d3cb4edc92c332\r\npython: 3.7.0.final.0\r\npython-bits: 64\r\nOS: Darwin\r\nOS-release: 17.7.0\r\nmachine: x86_64\r\nprocessor: i386\r\nbyteorder: little\r\nLC_ALL: None\r\nLANG: en_US.UTF-8\r\nLOCALE: en_US.UTF-8\r\n\r\npandas: 0.24.0.dev0+422.g2156431c3\r\npytest: None\r\npip: 10.0.1\r\nsetuptools: 39.2.0\r\nCython: 0.28.5\r\nnumpy: 1.15.0\r\nscipy: None\r\npyarrow: None\r\nxarray: None\r\nIPython: 6.5.0\r\nsphinx: None\r\npatsy: None\r\ndateutil: 2.7.3\r\npytz: 2018.5\r\nblosc: None\r\nbottleneck: None\r\ntables: None\r\nnumexpr: None\r\nfeather: None\r\nmatplotlib: None\r\nopenpyxl: None\r\nxlrd: None\r\nxlwt: None\r\nxlsxwriter: None\r\nlxml: None\r\nbs4: None\r\nhtml5lib: None\r\nsqlalchemy: None\r\npymysql: None\r\npsycopg2: None\r\njinja2: None\r\ns3fs: None\r\nfastparquet: None\r\npandas_gbq: None\r\npandas_datareader: None\r\ngcsfs: None\r\n\r\n</details>"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/412028019",
    "html_url": "https://github.com/pandas-dev/pandas/issues/22206#issuecomment-412028019",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/22206",
    "id": 412028019,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMjAyODAxOQ==",
    "user": {
      "login": "xslates",
      "id": 8994002,
      "node_id": "MDQ6VXNlcjg5OTQwMDI=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/8994002?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/xslates",
      "html_url": "https://github.com/xslates",
      "followers_url": "https://api.github.com/users/xslates/followers",
      "following_url": "https://api.github.com/users/xslates/following{/other_user}",
      "gists_url": "https://api.github.com/users/xslates/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/xslates/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/xslates/subscriptions",
      "organizations_url": "https://api.github.com/users/xslates/orgs",
      "repos_url": "https://api.github.com/users/xslates/repos",
      "events_url": "https://api.github.com/users/xslates/events{/privacy}",
      "received_events_url": "https://api.github.com/users/xslates/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-10T09:21:24Z",
    "updated_at": "2018-08-10T09:21:24Z",
    "author_association": "NONE",
    "body": "That's strange :/ \r\n\r\nThen it must be something that does weird stuff in the background of my sessions. That'll teach me to use Jupyter Notebooks. I'll close this then. Thank you for your help."
  }
]
