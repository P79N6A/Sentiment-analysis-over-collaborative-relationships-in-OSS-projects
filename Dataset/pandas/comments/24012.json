[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/443192738",
    "html_url": "https://github.com/pandas-dev/pandas/issues/24012#issuecomment-443192738",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/24012",
    "id": 443192738,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MzE5MjczOA==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-30T12:43:32Z",
    "updated_at": "2018-11-30T12:43:32Z",
    "author_association": "CONTRIBUTOR",
    "body": "I know that @msarahan has been doing a lot of work to speed up parts of conda, which will be available in the next conda release. \r\n\r\n@msarahan does anything in https://github.com/pandas-dev/pandas/blob/master/environment.yml stand out to you? It's a mix of defaults and conda-forge. I'm timing it now locally."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/443193293",
    "html_url": "https://github.com/pandas-dev/pandas/issues/24012#issuecomment-443193293",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/24012",
    "id": 443193293,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MzE5MzI5Mw==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-30T12:46:04Z",
    "updated_at": "2018-11-30T12:46:04Z",
    "author_association": "CONTRIBUTOR",
    "body": "Though I can already say that solving didn't take long locally, less than a minute or two (on my Mac)."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/443193754",
    "html_url": "https://github.com/pandas-dev/pandas/issues/24012#issuecomment-443193754",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/24012",
    "id": 443193754,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MzE5Mzc1NA==",
    "user": {
      "login": "datapythonista",
      "id": 10058240,
      "node_id": "MDQ6VXNlcjEwMDU4MjQw",
      "avatar_url": "https://avatars2.githubusercontent.com/u/10058240?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/datapythonista",
      "html_url": "https://github.com/datapythonista",
      "followers_url": "https://api.github.com/users/datapythonista/followers",
      "following_url": "https://api.github.com/users/datapythonista/following{/other_user}",
      "gists_url": "https://api.github.com/users/datapythonista/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/datapythonista/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/datapythonista/subscriptions",
      "organizations_url": "https://api.github.com/users/datapythonista/orgs",
      "repos_url": "https://api.github.com/users/datapythonista/repos",
      "events_url": "https://api.github.com/users/datapythonista/events{/privacy}",
      "received_events_url": "https://api.github.com/users/datapythonista/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-30T12:48:10Z",
    "updated_at": "2018-11-30T12:48:10Z",
    "author_association": "MEMBER",
    "body": "May be it's Linux specific then, both locally and on the azure job takes a lot of time."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/443195913",
    "html_url": "https://github.com/pandas-dev/pandas/issues/24012#issuecomment-443195913",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/24012",
    "id": 443195913,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MzE5NTkxMw==",
    "user": {
      "login": "msarahan",
      "id": 38393,
      "node_id": "MDQ6VXNlcjM4Mzkz",
      "avatar_url": "https://avatars3.githubusercontent.com/u/38393?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/msarahan",
      "html_url": "https://github.com/msarahan",
      "followers_url": "https://api.github.com/users/msarahan/followers",
      "following_url": "https://api.github.com/users/msarahan/following{/other_user}",
      "gists_url": "https://api.github.com/users/msarahan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/msarahan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/msarahan/subscriptions",
      "organizations_url": "https://api.github.com/users/msarahan/orgs",
      "repos_url": "https://api.github.com/users/msarahan/repos",
      "events_url": "https://api.github.com/users/msarahan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/msarahan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-30T12:57:09Z",
    "updated_at": "2018-11-30T12:57:09Z",
    "author_association": "NONE",
    "body": "Timestamp maximization is an accurate identification of the issue. PR to disable it at https://github.com/conda/conda/pull/7895/files\r\n\r\nThat maximization is important at build time, especially locally as you iterate on recipes, but probably not for you here.\r\n\r\nThe problem as I understand is that conda is not eliminating package choices prior to the timestamp optimization time. Basically, all the solver data is collected at once, when really we should be doing an initial reduction based on all the other constraints, then applying timestamp info only as a tiebreaker.\r\n\r\nI don't know why this is only just now popping up for you, but it happens when we have packages with \"variants.\" For example, if you have libnetcdf that has two variants for hdf5 (1.8, 1.10), this triggers the problem.\r\n\r\nPlease consider applying the PR above in the short term. In the long term, a better filtering scheme will be a better fix than just turning it off."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/443198672",
    "html_url": "https://github.com/pandas-dev/pandas/issues/24012#issuecomment-443198672",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/24012",
    "id": 443198672,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MzE5ODY3Mg==",
    "user": {
      "login": "datapythonista",
      "id": 10058240,
      "node_id": "MDQ6VXNlcjEwMDU4MjQw",
      "avatar_url": "https://avatars2.githubusercontent.com/u/10058240?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/datapythonista",
      "html_url": "https://github.com/datapythonista",
      "followers_url": "https://api.github.com/users/datapythonista/followers",
      "following_url": "https://api.github.com/users/datapythonista/following{/other_user}",
      "gists_url": "https://api.github.com/users/datapythonista/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/datapythonista/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/datapythonista/subscriptions",
      "organizations_url": "https://api.github.com/users/datapythonista/orgs",
      "repos_url": "https://api.github.com/users/datapythonista/repos",
      "events_url": "https://api.github.com/users/datapythonista/events{/privacy}",
      "received_events_url": "https://api.github.com/users/datapythonista/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-30T13:09:07Z",
    "updated_at": "2018-11-30T13:09:07Z",
    "author_association": "MEMBER",
    "body": "Thanks for the detailed info @msarahan. Applying the PR could be an option for the CI, but new contributors to pandas also create a conda environment with that file to set up the environment, and making them apply the PR doesn't sound reasonable.\r\n\r\nIf I understand correctly, the problem is that conda can choose among more than one version of a given package. That makes sense to me, as my guess was that the problem started because a new release. So, does it make sense to you, that I try to identify a package or packages with more than one version available, which can be causing the problem, and I just pin them to a specific version in the file?"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/443211320",
    "html_url": "https://github.com/pandas-dev/pandas/issues/24012#issuecomment-443211320",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/24012",
    "id": 443211320,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MzIxMTMyMA==",
    "user": {
      "login": "msarahan",
      "id": 38393,
      "node_id": "MDQ6VXNlcjM4Mzkz",
      "avatar_url": "https://avatars3.githubusercontent.com/u/38393?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/msarahan",
      "html_url": "https://github.com/msarahan",
      "followers_url": "https://api.github.com/users/msarahan/followers",
      "following_url": "https://api.github.com/users/msarahan/following{/other_user}",
      "gists_url": "https://api.github.com/users/msarahan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/msarahan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/msarahan/subscriptions",
      "organizations_url": "https://api.github.com/users/msarahan/orgs",
      "repos_url": "https://api.github.com/users/msarahan/repos",
      "events_url": "https://api.github.com/users/msarahan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/msarahan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-30T13:59:03Z",
    "updated_at": "2018-11-30T13:59:03Z",
    "author_association": "NONE",
    "body": "Unfortunately, because of the way things work in conda, I don't think that will be a fix.  I'm not really suggesting that you incorporate the application of that PR to conda as a standard thing for all pandas devs.  I agree that's silly, and we need a fix on the conda side soon.  If we merge that PR, there will probably be warnings and/or errors about multiple solutions from conda.  That's why we haven't merged it. \r\n I'd like to tell you that there is an immediate solution, but aside from my crummy hack of applying that PR, I don't have one right now.  We're working on it, and hope to have a fix quickly, but it will require a new version of conda, and depending on the changes necessary, that new version may need to go through a lengthy QA time."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/443220613",
    "html_url": "https://github.com/pandas-dev/pandas/issues/24012#issuecomment-443220613",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/24012",
    "id": 443220613,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MzIyMDYxMw==",
    "user": {
      "login": "datapythonista",
      "id": 10058240,
      "node_id": "MDQ6VXNlcjEwMDU4MjQw",
      "avatar_url": "https://avatars2.githubusercontent.com/u/10058240?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/datapythonista",
      "html_url": "https://github.com/datapythonista",
      "followers_url": "https://api.github.com/users/datapythonista/followers",
      "following_url": "https://api.github.com/users/datapythonista/following{/other_user}",
      "gists_url": "https://api.github.com/users/datapythonista/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/datapythonista/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/datapythonista/subscriptions",
      "organizations_url": "https://api.github.com/users/datapythonista/orgs",
      "repos_url": "https://api.github.com/users/datapythonista/repos",
      "events_url": "https://api.github.com/users/datapythonista/events{/privacy}",
      "received_events_url": "https://api.github.com/users/datapythonista/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-30T14:31:53Z",
    "updated_at": "2018-11-30T14:31:53Z",
    "author_association": "MEMBER",
    "body": "I checked, and the number of candidates the the optimization receives for some packages is huge, like numpy:\r\n```\r\nnumpy                 453\r\nhypothesis            164\r\nsetuptools             55\r\nscipy                  51\r\nscikit                 50\r\nnotebook               49\r\ncryptography           47\r\nsphinx                 46\r\nwidgetsnbextension     45\r\npandas                 40\r\n```\r\n\r\nI pinned the ones with more candidates, so only the last versions are considered, removed couple of packages that I don't think we need, and the number of packages that the optimization receives decreased from around 2,500 to 800. And the process is not super fast, but I think the solver takes couple of minutes, which is perfectly fine compared to the 45 minutes.\r\n\r\nSo, looks like this should work as a temporary solution.\r\n\r\nAnd I totally understand that you can't merge that PR. I was more interested in an immediate workaround from our side."
  }
]
