[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/294206500",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15999#issuecomment-294206500",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15999",
    "id": 294206500,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5NDIwNjUwMA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-04-14T18:16:13Z",
    "updated_at": "2017-04-14T18:16:13Z",
    "author_association": "CONTRIBUTOR",
    "body": "why would you do this?"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/294207889",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15999#issuecomment-294207889",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15999",
    "id": 294207889,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5NDIwNzg4OQ==",
    "user": {
      "login": "dhimmel",
      "id": 1117703,
      "node_id": "MDQ6VXNlcjExMTc3MDM=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1117703?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dhimmel",
      "html_url": "https://github.com/dhimmel",
      "followers_url": "https://api.github.com/users/dhimmel/followers",
      "following_url": "https://api.github.com/users/dhimmel/following{/other_user}",
      "gists_url": "https://api.github.com/users/dhimmel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dhimmel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dhimmel/subscriptions",
      "organizations_url": "https://api.github.com/users/dhimmel/orgs",
      "repos_url": "https://api.github.com/users/dhimmel/repos",
      "events_url": "https://api.github.com/users/dhimmel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dhimmel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-04-14T18:23:41Z",
    "updated_at": "2017-04-14T18:23:41Z",
    "author_association": "CONTRIBUTOR",
    "body": "I've ran into this issue several times with `collections.Counter`. Most recently see [cell 6 of this notebook](https://github.com/greenelab/crossref/blob/dc4df4abcaf550ccc5a9a2757895238b22b46734/2.types-to-dataframe.ipynb). With counters, if you haven't observed a key, it defaults to zero (since they're used for counting occurrences).\r\n\r\nBy using a defaultdict or Counter, the user has chosen that they would like default values. If they don't want defaults, they should just convert or use dict."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/294208208",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15999#issuecomment-294208208",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15999",
    "id": 294208208,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5NDIwODIwOA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-04-14T18:25:18Z",
    "updated_at": "2017-04-14T18:25:18Z",
    "author_association": "CONTRIBUTOR",
    "body": "``.map`` does not accept a ``Counter``, sure its dictlike but not sure why you would actually do this anyhow."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/294208328",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15999#issuecomment-294208328",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15999",
    "id": 294208328,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5NDIwODMyOA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-04-14T18:25:55Z",
    "updated_at": "2017-04-14T18:25:55Z",
    "author_association": "CONTRIBUTOR",
    "body": "looks like you just should do ``.groupby(...).value_counts()`` anyhow."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/294212119",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15999#issuecomment-294212119",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15999",
    "id": 294212119,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5NDIxMjExOQ==",
    "user": {
      "login": "dhimmel",
      "id": 1117703,
      "node_id": "MDQ6VXNlcjExMTc3MDM=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1117703?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dhimmel",
      "html_url": "https://github.com/dhimmel",
      "followers_url": "https://api.github.com/users/dhimmel/followers",
      "following_url": "https://api.github.com/users/dhimmel/following{/other_user}",
      "gists_url": "https://api.github.com/users/dhimmel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dhimmel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dhimmel/subscriptions",
      "organizations_url": "https://api.github.com/users/dhimmel/orgs",
      "repos_url": "https://api.github.com/users/dhimmel/repos",
      "events_url": "https://api.github.com/users/dhimmel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dhimmel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-04-14T18:45:16Z",
    "updated_at": "2017-04-14T19:27:16Z",
    "author_association": "CONTRIBUTOR",
    "body": "> not sure why you would actually do this anyhow\r\n\r\nBecause I have a counter of occurrences that I want to add as a column to a dataframe. In many cases the counter cannot be created in pandas using `.value_counts()`. For example:\r\n\r\n+ the counter is created by iteratively reading a file that won't fit in memory\r\n+ code must deal with a counter that is returned by another function\r\n\r\nNow you could always use `series.map(counter).fillna(0).astype(int)` but this forces the user to deal with the conversion of ints to float when there's missing data (which is one of the must frustrating aspects of pandas and should be avoided when possible).\r\n\r\n> .map does not accept a Counter\r\n\r\nMap does accept a Counter, since it's a subclass of dict, and provides no warning."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/294218071",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15999#issuecomment-294218071",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15999",
    "id": 294218071,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5NDIxODA3MQ==",
    "user": {
      "login": "chris-b1",
      "id": 1924092,
      "node_id": "MDQ6VXNlcjE5MjQwOTI=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1924092?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chris-b1",
      "html_url": "https://github.com/chris-b1",
      "followers_url": "https://api.github.com/users/chris-b1/followers",
      "following_url": "https://api.github.com/users/chris-b1/following{/other_user}",
      "gists_url": "https://api.github.com/users/chris-b1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chris-b1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chris-b1/subscriptions",
      "organizations_url": "https://api.github.com/users/chris-b1/orgs",
      "repos_url": "https://api.github.com/users/chris-b1/repos",
      "events_url": "https://api.github.com/users/chris-b1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chris-b1/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-04-14T19:18:06Z",
    "updated_at": "2017-04-14T19:18:06Z",
    "author_association": "CONTRIBUTOR",
    "body": "Right now we take a fastpath, building an `Index` out of the dict keys.\r\nhttps://github.com/pandas-dev/pandas/blob/614a48e3e6640b5694fd1ed6cbe56a760e89dd50/pandas/core/series.py#L2137\r\n\r\nSo probably either should add a slowpath that respects full semantics if passed a dict subclass, or just raise."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/294218936",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15999#issuecomment-294218936",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15999",
    "id": 294218936,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5NDIxODkzNg==",
    "user": {
      "login": "dhimmel",
      "id": 1117703,
      "node_id": "MDQ6VXNlcjExMTc3MDM=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1117703?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dhimmel",
      "html_url": "https://github.com/dhimmel",
      "followers_url": "https://api.github.com/users/dhimmel/followers",
      "following_url": "https://api.github.com/users/dhimmel/following{/other_user}",
      "gists_url": "https://api.github.com/users/dhimmel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dhimmel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dhimmel/subscriptions",
      "organizations_url": "https://api.github.com/users/dhimmel/orgs",
      "repos_url": "https://api.github.com/users/dhimmel/repos",
      "events_url": "https://api.github.com/users/dhimmel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dhimmel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-04-14T19:23:14Z",
    "updated_at": "2017-04-14T19:25:43Z",
    "author_association": "CONTRIBUTOR",
    "body": "> So probably either should add a slowpath that respects full semantics if passed a dict subclass, or just raise.\r\n\r\nWhat about adding the following to the head of the function?\r\n\r\n```python\r\nif isinstance(arg, (collections.Counter, collections.defaultdict)):\r\n    dictionary = arg\r\n    arg = lambda x: dictionary[x]\r\n```\r\n\r\nNote there are other ways of simplifying the function's code I would also explore.\r\n\r\nI'm happy to submit a PR and add tests if this is an enhancement that would be accepted."
  }
]
