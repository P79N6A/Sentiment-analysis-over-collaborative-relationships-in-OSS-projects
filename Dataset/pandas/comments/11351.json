[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/148893550",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11351#issuecomment-148893550",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11351",
    "id": 148893550,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0ODg5MzU1MA==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-10-17T07:46:47Z",
    "updated_at": "2015-10-17T07:46:47Z",
    "author_association": "MEMBER",
    "body": "Note that also with other dtypes there are some of the same 'inconsistencies', casting when assigning and not with fillna:\n\n```\nIn [36]: s = pd.Series([1.4, np.nan])\n\nIn [37]: s.fillna('3')\nOut[37]:\n0    1.4\n1      3\ndtype: object\n\nIn [38]: s[1] = '3'\n\nIn [39]: s\nOut[39]:\n0    1.4\n1    3.0\ndtype: float64\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/148921883",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11351#issuecomment-148921883",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11351",
    "id": 148921883,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0ODkyMTg4Mw==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-10-17T15:01:42Z",
    "updated_at": "2015-10-17T15:01:42Z",
    "author_association": "CONTRIBUTOR",
    "body": "@jorisvandenbossche your last example is numpy conversion at work, we _could_ fix it, but IMHO nor really worth it.\n\nOption 1 is already selected, and reaffirmed in #11329 \n\nSo the general rule for `fillna/replace` is that downcasting happens when possible where no loss of information occurs:\n\n```\nIn [3]: s = pd.Series([pd.Timestamp('2011-01-01'), pd.NaT],dtype='object')\n\nIn [4]: s\nOut[4]: \n0    2011-01-01 00:00:00\n1                    NaT\ndtype: object\n\nIn [5]: s.fillna(Timestamp('20130101'))\nOut[5]: \n0   2011-01-01\n1   2013-01-01\ndtype: datetime64[ns]\n```\n\nAll other cases are converted to `object`, e.g. when using mixed timezones for example (or naive and a tz), or mixed numbers/strings.\n\nI will leave this issue open to discuss a possibility of using Option 3 on a specific case (explicity raising an error) (or having a `raise_on_error` flag to `fillna/replace` or somesuch.\n\nusing `.fillna` with a naive tz with a tz based Series (or vice-versa) should really just raise the error and not convert to `object` as this is almost certainly a user error, though its ok as we have it now.\n\n[4] above\n\n```\nIn [1]:  s = pd.Series([pd.Timestamp('2011-01-01',tz='US/Eastern'), pd.NaT])\n\nIn [2]: s\nOut[2]: \n0   2011-01-01 00:00:00-05:00\n1                         NaT\ndtype: datetime64[ns, US/Eastern]\n\nIn [3]: s.fillna(Timestamp('20130101'))\nOut[3]: \n0    2011-01-01 00:00:00-05:00\n1          2013-01-01 00:00:00\ndtype: object\n\nIn [4]: s.fillna(Timestamp('20130101',tz='US/Pacific'))\nOut[4]: \n0    2011-01-01 00:00:00-05:00\n1    2013-01-01 00:00:00-08:00\ndtype: object\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/148921990",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11351#issuecomment-148921990",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11351",
    "id": 148921990,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0ODkyMTk5MA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-10-17T15:04:02Z",
    "updated_at": "2015-10-17T15:04:02Z",
    "author_association": "CONTRIBUTOR",
    "body": "@sinhrks \n\n[3] - we actually allow this and just convert things to `object` dtype, so that is a bug as well (again maybe we should have an option to these, then change the default to raise)\n[4] is a bug, pls open a separate issue for that.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/399909031",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11351#issuecomment-399909031",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11351",
    "id": 399909031,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5OTkwOTAzMQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-25T10:41:47Z",
    "updated_at": "2018-06-25T10:41:47Z",
    "author_association": "CONTRIBUTOR",
    "body": "cc @mroeschke some of these might be closable as already fixed (future PR)"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/401250985",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11351#issuecomment-401250985",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11351",
    "id": 401250985,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwMTI1MDk4NQ==",
    "user": {
      "login": "mroeschke",
      "id": 10647082,
      "node_id": "MDQ6VXNlcjEwNjQ3MDgy",
      "avatar_url": "https://avatars0.githubusercontent.com/u/10647082?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mroeschke",
      "html_url": "https://github.com/mroeschke",
      "followers_url": "https://api.github.com/users/mroeschke/followers",
      "following_url": "https://api.github.com/users/mroeschke/following{/other_user}",
      "gists_url": "https://api.github.com/users/mroeschke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mroeschke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mroeschke/subscriptions",
      "organizations_url": "https://api.github.com/users/mroeschke/orgs",
      "repos_url": "https://api.github.com/users/mroeschke/repos",
      "events_url": "https://api.github.com/users/mroeschke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mroeschke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-29T05:24:34Z",
    "updated_at": "2018-06-29T05:24:34Z",
    "author_association": "MEMBER",
    "body": "Everything looks tested and fixed but [3], opened up #21671 for a more specific issue."
  }
]
