[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/135863397",
    "html_url": "https://github.com/pandas-dev/pandas/issues/10923#issuecomment-135863397",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/10923",
    "id": 135863397,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzNTg2MzM5Nw==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-08-28T19:13:25Z",
    "updated_at": "2015-08-28T19:13:25Z",
    "author_association": "CONTRIBUTOR",
    "body": "I think we already have an issue for this - can u check?\n\nagree that could be a nicer error message / better behavior\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/135878450",
    "html_url": "https://github.com/pandas-dev/pandas/issues/10923#issuecomment-135878450",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/10923",
    "id": 135878450,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzNTg3ODQ1MA==",
    "user": {
      "login": "briangerke",
      "id": 8347463,
      "node_id": "MDQ6VXNlcjgzNDc0NjM=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/8347463?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/briangerke",
      "html_url": "https://github.com/briangerke",
      "followers_url": "https://api.github.com/users/briangerke/followers",
      "following_url": "https://api.github.com/users/briangerke/following{/other_user}",
      "gists_url": "https://api.github.com/users/briangerke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/briangerke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/briangerke/subscriptions",
      "organizations_url": "https://api.github.com/users/briangerke/orgs",
      "repos_url": "https://api.github.com/users/briangerke/repos",
      "events_url": "https://api.github.com/users/briangerke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/briangerke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-08-28T20:18:43Z",
    "updated_at": "2015-08-28T20:18:43Z",
    "author_association": "NONE",
    "body": "Whoops, you're right. Sorry, I should have searched more thoroughly. This duplicates #9941.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/318143468",
    "html_url": "https://github.com/pandas-dev/pandas/issues/10923#issuecomment-318143468",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/10923",
    "id": 318143468,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxODE0MzQ2OA==",
    "user": {
      "login": "chbrandt",
      "id": 482051,
      "node_id": "MDQ6VXNlcjQ4MjA1MQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/482051?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chbrandt",
      "html_url": "https://github.com/chbrandt",
      "followers_url": "https://api.github.com/users/chbrandt/followers",
      "following_url": "https://api.github.com/users/chbrandt/following{/other_user}",
      "gists_url": "https://api.github.com/users/chbrandt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chbrandt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chbrandt/subscriptions",
      "organizations_url": "https://api.github.com/users/chbrandt/orgs",
      "repos_url": "https://api.github.com/users/chbrandt/repos",
      "events_url": "https://api.github.com/users/chbrandt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chbrandt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-07-26T18:35:08Z",
    "updated_at": "2017-07-26T18:37:02Z",
    "author_association": "NONE",
    "body": "I have a similar issue here. \r\n\r\nLet's consider the following data:\r\n```python\r\nimport numpy\r\nimport pandas\r\ndf = pandas.DataFrame({'A':numpy.random.rand(20),\r\n                       'B':numpy.random.rand(20)*10,\r\n                       'C':numpy.random.randint(0,5,20)})\r\ndf.loc[:4,'C']=None\r\n```\r\n\r\nNow, there are two code lines below that do the same think: to output the average of groups as the new rows values. The first one uses a `string function name`, the second one, a `lambda` function. The first one works, the second, doesn't.\r\n\r\n```python\r\nIn [41]: df.groupby('C')['B'].transform('mean')\r\nOut[41]: \r\n0          NaN\r\n1          NaN\r\n2          NaN\r\n3          NaN\r\n4          NaN\r\n5     5.670891\r\n6     5.335332\r\n7     0.580197\r\n8     5.670891\r\n9     5.670891\r\n10    1.628290\r\n11    1.628290\r\n12    5.670891\r\n13    8.493416\r\n14    5.670891\r\n15    8.493416\r\n16    5.335332\r\n17    5.670891\r\n18    5.670891\r\n19    5.335332\r\nName: B, dtype: float64\r\n```\r\n\r\n```python\r\nIn [42]: df.groupby('C')['B'].transform(lambda x:x.mean())\r\n---------------------------------------------------------------------------\r\nValueError                                Traceback (most recent call last)\r\n<ipython-input-42-87c87c7a22f4> in <module>()\r\n----> 1 df.groupby('C')['B'].transform(lambda x:x.mean())\r\n\r\n~/.conda/envs/myroot/lib/python3.6/site-packages/pandas/core/groupby.py in transform(self, func, *args, **kwargs)\r\n   3061 \r\n   3062         result.name = self._selected_obj.name\r\n-> 3063         result.index = self._selected_obj.index\r\n   3064         return result\r\n   3065 \r\n\r\n~/.conda/envs/myroot/lib/python3.6/site-packages/pandas/core/generic.py in __setattr__(self, name, value)\r\n   3092         try:\r\n   3093             object.__getattribute__(self, name)\r\n-> 3094             return object.__setattr__(self, name, value)\r\n   3095         except AttributeError:\r\n   3096             pass\r\n\r\npandas/_libs/src/properties.pyx in pandas._libs.lib.AxisProperty.__set__ (pandas/_libs/lib.c:45255)()\r\n\r\n~/.conda/envs/myroot/lib/python3.6/site-packages/pandas/core/series.py in _set_axis(self, axis, labels, fastpath)\r\n    306         object.__setattr__(self, '_index', labels)\r\n    307         if not fastpath:\r\n--> 308             self._data.set_axis(axis, labels)\r\n    309 \r\n    310     def _set_subtyp(self, is_all_dates):\r\n\r\n~/.conda/envs/myroot/lib/python3.6/site-packages/pandas/core/internals.py in set_axis(self, axis, new_labels)\r\n   2834             raise ValueError('Length mismatch: Expected axis has %d elements, '\r\n   2835                              'new values have %d elements' %\r\n-> 2836                              (old_len, new_len))\r\n   2837 \r\n   2838         self.axes[axis] = new_labels\r\n\r\nValueError: Length mismatch: Expected axis has 15 elements, new values have 20 elements\r\n```\r\n\r\nThe first one, using `'mean'` is what I was expecting.\r\n\r\nI first posted this question to SO: https://stackoverflow.com/questions/45333681/handling-na-in-groupby-transform . After some discussion there I started to think that a bug is around.\r\n\r\nThanks"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/318164623",
    "html_url": "https://github.com/pandas-dev/pandas/issues/10923#issuecomment-318164623",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/10923",
    "id": 318164623,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxODE2NDYyMw==",
    "user": {
      "login": "gfyoung",
      "id": 9273653,
      "node_id": "MDQ6VXNlcjkyNzM2NTM=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/9273653?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gfyoung",
      "html_url": "https://github.com/gfyoung",
      "followers_url": "https://api.github.com/users/gfyoung/followers",
      "following_url": "https://api.github.com/users/gfyoung/following{/other_user}",
      "gists_url": "https://api.github.com/users/gfyoung/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gfyoung/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gfyoung/subscriptions",
      "organizations_url": "https://api.github.com/users/gfyoung/orgs",
      "repos_url": "https://api.github.com/users/gfyoung/repos",
      "events_url": "https://api.github.com/users/gfyoung/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gfyoung/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-07-26T19:57:19Z",
    "updated_at": "2017-07-26T19:57:19Z",
    "author_association": "MEMBER",
    "body": "I suspect it has to deal with the way in which we aggregate results at the end.  Post this as a separate issue and reference this one."
  }
]
