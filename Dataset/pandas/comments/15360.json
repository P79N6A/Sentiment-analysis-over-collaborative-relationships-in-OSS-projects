[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/278751847",
    "html_url": "https://github.com/pandas-dev/pandas/pull/15360#issuecomment-278751847",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15360",
    "id": 278751847,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3ODc1MTg0Nw==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-09T19:48:25Z",
    "updated_at": "2017-02-09T19:48:25Z",
    "author_association": "CONTRIBUTOR",
    "body": "lgtm. can you add a whatsnew note? (Bug fix is fine)"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/278820139",
    "html_url": "https://github.com/pandas-dev/pandas/pull/15360#issuecomment-278820139",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15360",
    "id": 278820139,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3ODgyMDEzOQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-10T00:21:13Z",
    "updated_at": "2017-02-10T00:21:13Z",
    "author_association": "CONTRIBUTOR",
    "body": "https://travis-ci.org/pandas-dev/pandas/jobs/200143310\r\n\r\nwe have a c-linter :<"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/278931629",
    "html_url": "https://github.com/pandas-dev/pandas/pull/15360#issuecomment-278931629",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15360",
    "id": 278931629,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3ODkzMTYyOQ==",
    "user": {
      "login": "tobgu",
      "id": 485836,
      "node_id": "MDQ6VXNlcjQ4NTgzNg==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/485836?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tobgu",
      "html_url": "https://github.com/tobgu",
      "followers_url": "https://api.github.com/users/tobgu/followers",
      "following_url": "https://api.github.com/users/tobgu/following{/other_user}",
      "gists_url": "https://api.github.com/users/tobgu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tobgu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tobgu/subscriptions",
      "organizations_url": "https://api.github.com/users/tobgu/orgs",
      "repos_url": "https://api.github.com/users/tobgu/repos",
      "events_url": "https://api.github.com/users/tobgu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tobgu/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-10T12:30:41Z",
    "updated_at": "2017-02-10T12:30:41Z",
    "author_association": "CONTRIBUTOR",
    "body": "Ouch :-). Hopefully fixed now."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/278951994",
    "html_url": "https://github.com/pandas-dev/pandas/pull/15360#issuecomment-278951994",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15360",
    "id": 278951994,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3ODk1MTk5NA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-10T14:17:43Z",
    "updated_at": "2017-02-10T14:17:43Z",
    "author_association": "CONTRIBUTOR",
    "body": "thanks @tobgu \r\n\r\nkeep em coming!\r\n\r\nI am still puzzled why the encoding of a new UTF8 string, that returns a new reference is affecting existing references. Though this maybe some deep things going on that I don't understand. If you have time I would search / post an issue on CPython to understand the semantics here. Its also possible that this is the reason this function is being deprecated (because of these side effects).\r\n\r\n```\r\nPyObject* PyUnicode_EncodeUTF8(const Py_UNICODE *s, Py_ssize_t size, const char *errors)\r\nReturn value: New reference.\r\nEncode the Py_UNICODE buffer s of the given size using UTF-8 and return a Python bytes object. Return NULL if an exception was raised by the codec.\r\n\r\nPart of the old-style Py_UNICODE API; please migrate to using PyUnicode_AsUTF8String() or PyUnicode_AsUTF8AndSize().\r\nDeprecated since version 3.3, will be removed in version 4.0.\r\n```"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/279066956",
    "html_url": "https://github.com/pandas-dev/pandas/pull/15360#issuecomment-279066956",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15360",
    "id": 279066956,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3OTA2Njk1Ng==",
    "user": {
      "login": "tobgu",
      "id": 485836,
      "node_id": "MDQ6VXNlcjQ4NTgzNg==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/485836?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tobgu",
      "html_url": "https://github.com/tobgu",
      "followers_url": "https://api.github.com/users/tobgu/followers",
      "following_url": "https://api.github.com/users/tobgu/following{/other_user}",
      "gists_url": "https://api.github.com/users/tobgu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tobgu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tobgu/subscriptions",
      "organizations_url": "https://api.github.com/users/tobgu/orgs",
      "repos_url": "https://api.github.com/users/tobgu/repos",
      "events_url": "https://api.github.com/users/tobgu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tobgu/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-10T21:12:15Z",
    "updated_at": "2017-02-10T21:12:15Z",
    "author_association": "CONTRIBUTOR",
    "body": "I think the culprit in this case is the `PyUnicode_AS_UNICODE` macro that's described as inefficient and something you should migrate away from:\r\nhttps://www.python.org/dev/peps/pep-0393/#porting-guidelines\r\nhttps://docs.python.org/3/c-api/unicode.html#c.PyUnicode_AS_UNICODE\r\n\r\nIt seems like there's actually an allocation for a full strlen*4 byte unicode string here that would be the root cause of the observed behaviour:\r\nhttps://github.com/python/cpython-mirror/blob/9aa885c9df5b6895f70272b6abc24ef0b1fb8b46/Objects/unicodeobject.c#L4089\r\n\r\nHaven't dug into it further than that...\r\n\r\nThanks @jreback and @chris-b1 for helping out with this! It would have been a show stopper for the application that I'm currently working on. Hope to see it released soon! :-)"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/279072621",
    "html_url": "https://github.com/pandas-dev/pandas/pull/15360#issuecomment-279072621",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15360",
    "id": 279072621,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3OTA3MjYyMQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-10T21:36:15Z",
    "updated_at": "2017-02-10T21:36:15Z",
    "author_association": "CONTRIBUTOR",
    "body": "thanks for looking @tobgu, that is some *nasty* code.\r\n"
  }
]
