[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/382454396",
    "html_url": "https://github.com/pandas-dev/pandas/issues/20728#issuecomment-382454396",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/20728",
    "id": 382454396,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MjQ1NDM5Ng==",
    "user": {
      "login": "WillAyd",
      "id": 609873,
      "node_id": "MDQ6VXNlcjYwOTg3Mw==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/609873?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/WillAyd",
      "html_url": "https://github.com/WillAyd",
      "followers_url": "https://api.github.com/users/WillAyd/followers",
      "following_url": "https://api.github.com/users/WillAyd/following{/other_user}",
      "gists_url": "https://api.github.com/users/WillAyd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/WillAyd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/WillAyd/subscriptions",
      "organizations_url": "https://api.github.com/users/WillAyd/orgs",
      "repos_url": "https://api.github.com/users/WillAyd/repos",
      "events_url": "https://api.github.com/users/WillAyd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/WillAyd/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-18T16:50:04Z",
    "updated_at": "2018-04-18T16:50:04Z",
    "author_association": "MEMBER",
    "body": "Unfortunately this is tough to work with...do you have any way of isolating this from mod_wsgi? Otherwise how do you know its a pandas issue and not with that package?"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/382455786",
    "html_url": "https://github.com/pandas-dev/pandas/issues/20728#issuecomment-382455786",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/20728",
    "id": 382455786,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MjQ1NTc4Ng==",
    "user": {
      "login": "akrherz",
      "id": 210858,
      "node_id": "MDQ6VXNlcjIxMDg1OA==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/210858?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/akrherz",
      "html_url": "https://github.com/akrherz",
      "followers_url": "https://api.github.com/users/akrherz/followers",
      "following_url": "https://api.github.com/users/akrherz/following{/other_user}",
      "gists_url": "https://api.github.com/users/akrherz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/akrherz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/akrherz/subscriptions",
      "organizations_url": "https://api.github.com/users/akrherz/orgs",
      "repos_url": "https://api.github.com/users/akrherz/repos",
      "events_url": "https://api.github.com/users/akrherz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/akrherz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-18T16:54:48Z",
    "updated_at": "2018-04-18T16:54:48Z",
    "author_association": "NONE",
    "body": "@WillAyd yeah, I understand :( I've been trying to create a reproducer without much luck :(  As a comment, if I remove `default_handler=str` from `to_json` this issue goes away, but eventually I hit `OverflowErrors` as in #14256.  A workaround is to set the number of requests per mod-wsgi process to a very low number, like 100."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/382526813",
    "html_url": "https://github.com/pandas-dev/pandas/issues/20728#issuecomment-382526813",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/20728",
    "id": 382526813,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MjUyNjgxMw==",
    "user": {
      "login": "WillAyd",
      "id": 609873,
      "node_id": "MDQ6VXNlcjYwOTg3Mw==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/609873?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/WillAyd",
      "html_url": "https://github.com/WillAyd",
      "followers_url": "https://api.github.com/users/WillAyd/followers",
      "following_url": "https://api.github.com/users/WillAyd/following{/other_user}",
      "gists_url": "https://api.github.com/users/WillAyd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/WillAyd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/WillAyd/subscriptions",
      "organizations_url": "https://api.github.com/users/WillAyd/orgs",
      "repos_url": "https://api.github.com/users/WillAyd/repos",
      "events_url": "https://api.github.com/users/WillAyd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/WillAyd/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-18T20:56:59Z",
    "updated_at": "2018-04-18T20:56:59Z",
    "author_association": "MEMBER",
    "body": "Maybe trying another serving option like gunicorn? Whether that works or not could clue in on any potential issue.\r\n\r\nI haven't used pandas extensively with any kind of deployed server before. You may also want to join the Gitter channel to see if anyone out there has expertise to offer"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/382758087",
    "html_url": "https://github.com/pandas-dev/pandas/issues/20728#issuecomment-382758087",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/20728",
    "id": 382758087,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4Mjc1ODA4Nw==",
    "user": {
      "login": "chris-b1",
      "id": 1924092,
      "node_id": "MDQ6VXNlcjE5MjQwOTI=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1924092?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chris-b1",
      "html_url": "https://github.com/chris-b1",
      "followers_url": "https://api.github.com/users/chris-b1/followers",
      "following_url": "https://api.github.com/users/chris-b1/following{/other_user}",
      "gists_url": "https://api.github.com/users/chris-b1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chris-b1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chris-b1/subscriptions",
      "organizations_url": "https://api.github.com/users/chris-b1/orgs",
      "repos_url": "https://api.github.com/users/chris-b1/repos",
      "events_url": "https://api.github.com/users/chris-b1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chris-b1/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-19T14:29:31Z",
    "updated_at": "2018-04-19T14:31:16Z",
    "author_association": "CONTRIBUTOR",
    "body": "`mod_wsgi` in some configurations uses python sub-interpreters, which results in global c extension state, might be something in our json code that hits that, it's a bit more finicky than threading.\r\n\r\nCan you adding this to your apache config - would confirm that's the issue, if it fixes\r\n```\r\nWSGIApplicationGroup %{GLOBAL}\r\n```\r\nhttp://modwsgi.readthedocs.io/en/develop/configuration-directives/WSGIApplicationGroup.html\r\n\r\nFor reference ran into something similar in arrow\r\nhttps://issues.apache.org/jira/browse/ARROW-1327"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/382824052",
    "html_url": "https://github.com/pandas-dev/pandas/issues/20728#issuecomment-382824052",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/20728",
    "id": 382824052,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MjgyNDA1Mg==",
    "user": {
      "login": "akrherz",
      "id": 210858,
      "node_id": "MDQ6VXNlcjIxMDg1OA==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/210858?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/akrherz",
      "html_url": "https://github.com/akrherz",
      "followers_url": "https://api.github.com/users/akrherz/followers",
      "following_url": "https://api.github.com/users/akrherz/following{/other_user}",
      "gists_url": "https://api.github.com/users/akrherz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/akrherz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/akrherz/subscriptions",
      "organizations_url": "https://api.github.com/users/akrherz/orgs",
      "repos_url": "https://api.github.com/users/akrherz/repos",
      "events_url": "https://api.github.com/users/akrherz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/akrherz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-19T17:50:29Z",
    "updated_at": "2018-04-19T17:50:29Z",
    "author_association": "NONE",
    "body": "Thank you @chris-b1 for the suggestion.  I think I have implemented your suggestion and the watched pot has yet to boil for this issue.  My apache config now looks like\r\n```apache\r\nWSGIDaemonProcess iemwsgi_iws processes=15 threads=1 display-name=%{GROUP} maximum-requests=10000\r\n<VirtualHost...>\r\n\r\n <Directory...>\r\n      SetHandler wsgi-script\r\n      WSGIApplicationGroup %{GLOBAL}\r\n      WSGIProcessGroup iemwsgi_iws\r\n  </Directory>\r\n</VirtualHost>\r\n```\r\nwill update after running this a few days without issue, I typically would see it happen once or twice per day."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/383082468",
    "html_url": "https://github.com/pandas-dev/pandas/issues/20728#issuecomment-383082468",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/20728",
    "id": 383082468,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MzA4MjQ2OA==",
    "user": {
      "login": "akrherz",
      "id": 210858,
      "node_id": "MDQ6VXNlcjIxMDg1OA==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/210858?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/akrherz",
      "html_url": "https://github.com/akrherz",
      "followers_url": "https://api.github.com/users/akrherz/followers",
      "following_url": "https://api.github.com/users/akrherz/following{/other_user}",
      "gists_url": "https://api.github.com/users/akrherz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/akrherz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/akrherz/subscriptions",
      "organizations_url": "https://api.github.com/users/akrherz/orgs",
      "repos_url": "https://api.github.com/users/akrherz/repos",
      "events_url": "https://api.github.com/users/akrherz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/akrherz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-20T12:38:02Z",
    "updated_at": "2018-04-20T12:38:02Z",
    "author_association": "NONE",
    "body": "Well, so far so good with the `WSGIApplicationGroup %{GLOBAL}` setting.  At the risk of hijacking my own issue and conflating things, it may be useful to note for others reading this thread that if I set `WSGIDaemonProcess` `threads` to some larger than 1 number, I end up getting \"random\" deadlocks/hangs within `pandas.io.sql.read_sql` which may be issues with `psycopg2`.  I have not tried this new `WSGIApplicationGroup` and more than one thread yet, I am just giddy that the JSON dumping now consistently works!"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/386047722",
    "html_url": "https://github.com/pandas-dev/pandas/issues/20728#issuecomment-386047722",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/20728",
    "id": 386047722,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4NjA0NzcyMg==",
    "user": {
      "login": "akrherz",
      "id": 210858,
      "node_id": "MDQ6VXNlcjIxMDg1OA==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/210858?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/akrherz",
      "html_url": "https://github.com/akrherz",
      "followers_url": "https://api.github.com/users/akrherz/followers",
      "following_url": "https://api.github.com/users/akrherz/following{/other_user}",
      "gists_url": "https://api.github.com/users/akrherz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/akrherz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/akrherz/subscriptions",
      "organizations_url": "https://api.github.com/users/akrherz/orgs",
      "repos_url": "https://api.github.com/users/akrherz/repos",
      "events_url": "https://api.github.com/users/akrherz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/akrherz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-02T16:58:51Z",
    "updated_at": "2018-05-02T16:58:51Z",
    "author_association": "NONE",
    "body": "Zero issues noted since the change to `WSGIApplicationGroup %{GLOBAL}`"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/386157688",
    "html_url": "https://github.com/pandas-dev/pandas/issues/20728#issuecomment-386157688",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/20728",
    "id": 386157688,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4NjE1NzY4OA==",
    "user": {
      "login": "chris-b1",
      "id": 1924092,
      "node_id": "MDQ6VXNlcjE5MjQwOTI=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1924092?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chris-b1",
      "html_url": "https://github.com/chris-b1",
      "followers_url": "https://api.github.com/users/chris-b1/followers",
      "following_url": "https://api.github.com/users/chris-b1/following{/other_user}",
      "gists_url": "https://api.github.com/users/chris-b1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chris-b1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chris-b1/subscriptions",
      "organizations_url": "https://api.github.com/users/chris-b1/orgs",
      "repos_url": "https://api.github.com/users/chris-b1/repos",
      "events_url": "https://api.github.com/users/chris-b1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chris-b1/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-03T00:04:30Z",
    "updated_at": "2018-05-03T00:04:30Z",
    "author_association": "CONTRIBUTOR",
    "body": "Cool, if you're feeling brave would welcome any debugging/investigation to see what the underlying issue is.  Not entirely sure what the best way do that is, may be some helpful pointers here\r\nhttps://emptysqua.re/blog/python-c-extensions-and-mod-wsgi/"
  }
]
