[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/343690251",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18190#issuecomment-343690251",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18190",
    "id": 343690251,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0MzY5MDI1MQ==",
    "user": {
      "login": "WillAyd",
      "id": 609873,
      "node_id": "MDQ6VXNlcjYwOTg3Mw==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/609873?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/WillAyd",
      "html_url": "https://github.com/WillAyd",
      "followers_url": "https://api.github.com/users/WillAyd/followers",
      "following_url": "https://api.github.com/users/WillAyd/following{/other_user}",
      "gists_url": "https://api.github.com/users/WillAyd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/WillAyd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/WillAyd/subscriptions",
      "organizations_url": "https://api.github.com/users/WillAyd/orgs",
      "repos_url": "https://api.github.com/users/WillAyd/repos",
      "events_url": "https://api.github.com/users/WillAyd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/WillAyd/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-11T19:59:19Z",
    "updated_at": "2017-11-11T19:59:19Z",
    "author_association": "MEMBER",
    "body": "I could take a stab at this. What private module do you want the decorators to be in? Something like `_test_decorators.py` to enable `from pandas.util._test_decorators import *`?"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/343690693",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18190#issuecomment-343690693",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18190",
    "id": 343690693,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0MzY5MDY5Mw==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-11T20:06:58Z",
    "updated_at": "2017-11-11T20:06:58Z",
    "author_association": "CONTRIBUTOR",
    "body": "i wouldnâ€™t import * them but the name is ok "
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/346217444",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18190#issuecomment-346217444",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18190",
    "id": 346217444,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NjIxNzQ0NA==",
    "user": {
      "login": "WillAyd",
      "id": 609873,
      "node_id": "MDQ6VXNlcjYwOTg3Mw==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/609873?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/WillAyd",
      "html_url": "https://github.com/WillAyd",
      "followers_url": "https://api.github.com/users/WillAyd/followers",
      "following_url": "https://api.github.com/users/WillAyd/following{/other_user}",
      "gists_url": "https://api.github.com/users/WillAyd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/WillAyd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/WillAyd/subscriptions",
      "organizations_url": "https://api.github.com/users/WillAyd/orgs",
      "repos_url": "https://api.github.com/users/WillAyd/repos",
      "events_url": "https://api.github.com/users/WillAyd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/WillAyd/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-22T01:43:32Z",
    "updated_at": "2017-11-22T01:43:32Z",
    "author_association": "MEMBER",
    "body": "For the skipif decorators, we need to provide a function that evaluates to ``True`` to get it to skip whatever is being wrapped. A lot of the pandas-internal skip functions use pytest's ``importorskip``, which raises a ``Skipped`` when the required module cannot be imported.\r\n\r\nI would propose here to catch a ``Skipped`` in the decorator function and return ``True`` if that occurs. Sample code is provided below to illustrate for mpl.\r\n\r\nBefore I go too far - do you agree with this direction? I'm somewhat hesitant to use it given the ``Skipped`` exception needs to be imported from ``_pytest``. However, the alternative would be to refactor the existing functions to not use importorskip, which has its own downsides. FWIW if we wanted to go with the try...except methodology I'd create a wrapper function internal to the _test_decorators module to handle that rather than coding that block for each decorator that we want to create\r\n\r\n    import pytest\r\n    from _pytest.outcomes import Skipped\r\n\r\n    def _skip_if_no_mpl():\r\n        try:\r\n            mpl = pytest.importorskip(\"matplotlib\")\r\n            mpl.use(\"Agg\", warn=False)\r\n        except Skipped:\r\n            return True\r\n    \r\n    skip_if_no_mpl = pytest.mark.skipif(_skip_if_no_mpl(), reason=\"No matplotlib\")\r\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/346319358",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18190#issuecomment-346319358",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18190",
    "id": 346319358,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NjMxOTM1OA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-22T11:10:22Z",
    "updated_at": "2017-11-22T11:10:22Z",
    "author_association": "CONTRIBUTOR",
    "body": "I would refactor like your 2nd method, IOW have a safe importer that returns a boolean, then you could actually auto-create the functions & skip decorators."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/346319640",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18190#issuecomment-346319640",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18190",
    "id": 346319640,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NjMxOTY0MA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-22T11:11:30Z",
    "updated_at": "2017-11-22T11:11:30Z",
    "author_association": "CONTRIBUTOR",
    "body": "certainly if you want a PR for a simple version would be great to see before you convert everything.\r\n\r\nkey is that *has* to be a separate module that is *only* imported when tests are run and not in pandas import (so deps are not imported until then)"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/349029822",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18190#issuecomment-349029822",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18190",
    "id": 349029822,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0OTAyOTgyMg==",
    "user": {
      "login": "WillAyd",
      "id": 609873,
      "node_id": "MDQ6VXNlcjYwOTg3Mw==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/609873?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/WillAyd",
      "html_url": "https://github.com/WillAyd",
      "followers_url": "https://api.github.com/users/WillAyd/followers",
      "following_url": "https://api.github.com/users/WillAyd/following{/other_user}",
      "gists_url": "https://api.github.com/users/WillAyd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/WillAyd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/WillAyd/subscriptions",
      "organizations_url": "https://api.github.com/users/WillAyd/orgs",
      "repos_url": "https://api.github.com/users/WillAyd/repos",
      "events_url": "https://api.github.com/users/WillAyd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/WillAyd/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-04T17:06:22Z",
    "updated_at": "2017-12-19T13:41:25Z",
    "author_association": "MEMBER",
    "body": "EDIT - moved checklist to top of thread"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/352487820",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18190#issuecomment-352487820",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18190",
    "id": 352487820,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MjQ4NzgyMA==",
    "user": {
      "login": "WillAyd",
      "id": 609873,
      "node_id": "MDQ6VXNlcjYwOTg3Mw==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/609873?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/WillAyd",
      "html_url": "https://github.com/WillAyd",
      "followers_url": "https://api.github.com/users/WillAyd/followers",
      "following_url": "https://api.github.com/users/WillAyd/following{/other_user}",
      "gists_url": "https://api.github.com/users/WillAyd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/WillAyd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/WillAyd/subscriptions",
      "organizations_url": "https://api.github.com/users/WillAyd/orgs",
      "repos_url": "https://api.github.com/users/WillAyd/repos",
      "events_url": "https://api.github.com/users/WillAyd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/WillAyd/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-18T16:58:25Z",
    "updated_at": "2017-12-18T16:58:25Z",
    "author_association": "MEMBER",
    "body": "@jreback as far as the ``max_version`` argument goes in the current testing module's ``skip_if_no_package`` function I only since one usage in the following location:\r\n\r\nhttps://github.com/pandas-dev/pandas/blob/7a0ee19e95e29042c3373a1d912d2db27108c828/pandas/tests/sparse/test_frame.py#L1234\r\n\r\nI believe that was introduced by 56b5a30937e79335029b1727a80f109b7eb0840a and I looked through the related comments in #15668 but am not clear on why that particular test needs the v <= 0.19.0 criteria. Any insight as to if that is needed or not?\r\n\r\nFWIW that test runs on my machine with SciPy 1.0, save the ``dok_matrix`` fixture which may have an unrelated issue."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/352722512",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18190#issuecomment-352722512",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18190",
    "id": 352722512,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MjcyMjUxMg==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-19T11:31:51Z",
    "updated_at": "2017-12-19T11:31:51Z",
    "author_association": "CONTRIBUTOR",
    "body": "@WillAyd I updated the top list, but I think I missed a couple."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/353459455",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18190#issuecomment-353459455",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18190",
    "id": 353459455,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MzQ1OTQ1NQ==",
    "user": {
      "login": "max-sixty",
      "id": 5635139,
      "node_id": "MDQ6VXNlcjU2MzUxMzk=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/5635139?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/max-sixty",
      "html_url": "https://github.com/max-sixty",
      "followers_url": "https://api.github.com/users/max-sixty/followers",
      "following_url": "https://api.github.com/users/max-sixty/following{/other_user}",
      "gists_url": "https://api.github.com/users/max-sixty/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/max-sixty/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/max-sixty/subscriptions",
      "organizations_url": "https://api.github.com/users/max-sixty/orgs",
      "repos_url": "https://api.github.com/users/max-sixty/repos",
      "events_url": "https://api.github.com/users/max-sixty/events{/privacy}",
      "received_events_url": "https://api.github.com/users/max-sixty/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-21T21:15:05Z",
    "updated_at": "2017-12-21T21:16:13Z",
    "author_association": "CONTRIBUTOR",
    "body": "I'm looking at how we should skip tests in [xarray](https://github.com/pydata/xarray/pull/1640#discussion_r158364899). \r\n\r\nWhy did you do this rather than pytest's [`importorskip`](https://docs.pytest.org/en/latest/skipping.html#skipping-on-a-missing-import-dependency)? "
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/353460062",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18190#issuecomment-353460062",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18190",
    "id": 353460062,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MzQ2MDA2Mg==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-21T21:18:07Z",
    "updated_at": "2017-12-21T21:18:07Z",
    "author_association": "CONTRIBUTOR",
    "body": "importerskip is a hammer\r\nwe need fine grain skipping "
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/353462762",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18190#issuecomment-353462762",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18190",
    "id": 353462762,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MzQ2Mjc2Mg==",
    "user": {
      "login": "WillAyd",
      "id": 609873,
      "node_id": "MDQ6VXNlcjYwOTg3Mw==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/609873?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/WillAyd",
      "html_url": "https://github.com/WillAyd",
      "followers_url": "https://api.github.com/users/WillAyd/followers",
      "following_url": "https://api.github.com/users/WillAyd/following{/other_user}",
      "gists_url": "https://api.github.com/users/WillAyd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/WillAyd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/WillAyd/subscriptions",
      "organizations_url": "https://api.github.com/users/WillAyd/orgs",
      "repos_url": "https://api.github.com/users/WillAyd/repos",
      "events_url": "https://api.github.com/users/WillAyd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/WillAyd/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-21T21:32:00Z",
    "updated_at": "2017-12-21T21:32:00Z",
    "author_association": "MEMBER",
    "body": "Some other things to consider:\r\n\r\n- The mark option is easy to apply to functions or classes interchangeably\r\n- If using ``importorskip`` for a class (in the setup) you lose visibility to how many tests get skipped\r\n- The mark option gives you metadata about your tests you miss out on with importorskip"
  }
]
