[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/88677907",
    "html_url": "https://github.com/pandas-dev/pandas/pull/9783#issuecomment-88677907",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9783",
    "id": 88677907,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg4Njc3OTA3",
    "user": {
      "login": "shoyer",
      "id": 1217238,
      "node_id": "MDQ6VXNlcjEyMTcyMzg=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1217238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shoyer",
      "html_url": "https://github.com/shoyer",
      "followers_url": "https://api.github.com/users/shoyer/followers",
      "following_url": "https://api.github.com/users/shoyer/following{/other_user}",
      "gists_url": "https://api.github.com/users/shoyer/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shoyer/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shoyer/subscriptions",
      "organizations_url": "https://api.github.com/users/shoyer/orgs",
      "repos_url": "https://api.github.com/users/shoyer/repos",
      "events_url": "https://api.github.com/users/shoyer/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shoyer/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-04-02T00:57:57Z",
    "updated_at": "2015-04-02T00:57:57Z",
    "author_association": "MEMBER",
    "body": "Could you please add tests for these? Looks like this functionality was not tested before.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/88678041",
    "html_url": "https://github.com/pandas-dev/pandas/pull/9783#issuecomment-88678041",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9783",
    "id": 88678041,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg4Njc4MDQx",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-04-02T00:58:31Z",
    "updated_at": "2015-04-02T00:58:31Z",
    "author_association": "CONTRIBUTOR",
    "body": "this needs some tests\nand a perf check \n\nthey were not in the local imports originally because of perf\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/88678247",
    "html_url": "https://github.com/pandas-dev/pandas/pull/9783#issuecomment-88678247",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9783",
    "id": 88678247,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg4Njc4MjQ3",
    "user": {
      "login": "invisibleroads",
      "id": 266668,
      "node_id": "MDQ6VXNlcjI2NjY2OA==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/266668?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/invisibleroads",
      "html_url": "https://github.com/invisibleroads",
      "followers_url": "https://api.github.com/users/invisibleroads/followers",
      "following_url": "https://api.github.com/users/invisibleroads/following{/other_user}",
      "gists_url": "https://api.github.com/users/invisibleroads/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/invisibleroads/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/invisibleroads/subscriptions",
      "organizations_url": "https://api.github.com/users/invisibleroads/orgs",
      "repos_url": "https://api.github.com/users/invisibleroads/repos",
      "events_url": "https://api.github.com/users/invisibleroads/events{/privacy}",
      "received_events_url": "https://api.github.com/users/invisibleroads/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-04-02T00:59:20Z",
    "updated_at": "2015-04-02T00:59:20Z",
    "author_association": "CONTRIBUTOR",
    "body": "What's a perf check?\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/88679163",
    "html_url": "https://github.com/pandas-dev/pandas/pull/9783#issuecomment-88679163",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9783",
    "id": 88679163,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg4Njc5MTYz",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-04-02T01:02:36Z",
    "updated_at": "2015-04-02T01:02:36Z",
    "author_association": "CONTRIBUTOR",
    "body": "since this is importing each time in a lower level function I would like to see if that impacts things\n\nshow to/from msgpack with a good sized frame with mixed types with compression and without \n\nlook at prun and see if the imports cause an issue\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/88679810",
    "html_url": "https://github.com/pandas-dev/pandas/pull/9783#issuecomment-88679810",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9783",
    "id": 88679810,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg4Njc5ODEw",
    "user": {
      "login": "invisibleroads",
      "id": 266668,
      "node_id": "MDQ6VXNlcjI2NjY2OA==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/266668?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/invisibleroads",
      "html_url": "https://github.com/invisibleroads",
      "followers_url": "https://api.github.com/users/invisibleroads/followers",
      "following_url": "https://api.github.com/users/invisibleroads/following{/other_user}",
      "gists_url": "https://api.github.com/users/invisibleroads/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/invisibleroads/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/invisibleroads/subscriptions",
      "organizations_url": "https://api.github.com/users/invisibleroads/orgs",
      "repos_url": "https://api.github.com/users/invisibleroads/repos",
      "events_url": "https://api.github.com/users/invisibleroads/events{/privacy}",
      "received_events_url": "https://api.github.com/users/invisibleroads/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-04-02T01:09:56Z",
    "updated_at": "2015-04-02T01:11:24Z",
    "author_association": "CONTRIBUTOR",
    "body": "What is prun?\n\nIn my experience, module initialization happens only on the first import.\nhttp://stackoverflow.com/questions/296036/does-python-optimize-modules-when-they-are-imported-multiple-times\n\nYou can test this by creating `a.py`\n\n```\nprint 'hey'\n```\n\nand creating `b.py`\n\n```\nimport a\nimport a\n```\n\nand then run `python b.py` to see that \"hey\" only prints once.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/88680132",
    "html_url": "https://github.com/pandas-dev/pandas/pull/9783#issuecomment-88680132",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9783",
    "id": 88680132,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg4NjgwMTMy",
    "user": {
      "login": "invisibleroads",
      "id": 266668,
      "node_id": "MDQ6VXNlcjI2NjY2OA==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/266668?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/invisibleroads",
      "html_url": "https://github.com/invisibleroads",
      "followers_url": "https://api.github.com/users/invisibleroads/followers",
      "following_url": "https://api.github.com/users/invisibleroads/following{/other_user}",
      "gists_url": "https://api.github.com/users/invisibleroads/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/invisibleroads/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/invisibleroads/subscriptions",
      "organizations_url": "https://api.github.com/users/invisibleroads/orgs",
      "repos_url": "https://api.github.com/users/invisibleroads/repos",
      "events_url": "https://api.github.com/users/invisibleroads/events{/privacy}",
      "received_events_url": "https://api.github.com/users/invisibleroads/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-04-02T01:13:34Z",
    "updated_at": "2015-04-02T01:13:34Z",
    "author_association": "CONTRIBUTOR",
    "body": "The following code also only prints \"hey\" once.\n\n```\nimport a\nimport a\n\ndef f():\n    import a\n\nf()\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/88680266",
    "html_url": "https://github.com/pandas-dev/pandas/pull/9783#issuecomment-88680266",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9783",
    "id": 88680266,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg4NjgwMjY2",
    "user": {
      "login": "invisibleroads",
      "id": 266668,
      "node_id": "MDQ6VXNlcjI2NjY2OA==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/266668?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/invisibleroads",
      "html_url": "https://github.com/invisibleroads",
      "followers_url": "https://api.github.com/users/invisibleroads/followers",
      "following_url": "https://api.github.com/users/invisibleroads/following{/other_user}",
      "gists_url": "https://api.github.com/users/invisibleroads/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/invisibleroads/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/invisibleroads/subscriptions",
      "organizations_url": "https://api.github.com/users/invisibleroads/orgs",
      "repos_url": "https://api.github.com/users/invisibleroads/repos",
      "events_url": "https://api.github.com/users/invisibleroads/events{/privacy}",
      "received_events_url": "https://api.github.com/users/invisibleroads/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-04-02T01:15:07Z",
    "updated_at": "2015-04-02T01:16:13Z",
    "author_association": "CONTRIBUTOR",
    "body": "Lastly, this variation also only prints \"hey\" once.\n\n```\ndef f():\n    import a\n\ndef g():\n    import a\n\nf()\ng()\n```\n\nThese examples hold true for python2.7 and python3.4.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/88680365",
    "html_url": "https://github.com/pandas-dev/pandas/pull/9783#issuecomment-88680365",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9783",
    "id": 88680365,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg4NjgwMzY1",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-04-02T01:16:04Z",
    "updated_at": "2015-04-02T01:16:04Z",
    "author_association": "CONTRIBUTOR",
    "body": "use ipython\n\nof course they are only imported once \n\nbut the function call and import checks themselves are non trivial \n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/88680472",
    "html_url": "https://github.com/pandas-dev/pandas/pull/9783#issuecomment-88680472",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9783",
    "id": 88680472,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg4NjgwNDcy",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-04-02T01:17:16Z",
    "updated_at": "2015-04-02T01:17:16Z",
    "author_association": "CONTRIBUTOR",
    "body": "https://github.com/pydata/pandas/wiki/Performance-Testing\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/88721496",
    "html_url": "https://github.com/pandas-dev/pandas/pull/9783#issuecomment-88721496",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9783",
    "id": 88721496,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg4NzIxNDk2",
    "user": {
      "login": "invisibleroads",
      "id": 266668,
      "node_id": "MDQ6VXNlcjI2NjY2OA==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/266668?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/invisibleroads",
      "html_url": "https://github.com/invisibleroads",
      "followers_url": "https://api.github.com/users/invisibleroads/followers",
      "following_url": "https://api.github.com/users/invisibleroads/following{/other_user}",
      "gists_url": "https://api.github.com/users/invisibleroads/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/invisibleroads/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/invisibleroads/subscriptions",
      "organizations_url": "https://api.github.com/users/invisibleroads/orgs",
      "repos_url": "https://api.github.com/users/invisibleroads/repos",
      "events_url": "https://api.github.com/users/invisibleroads/events{/privacy}",
      "received_events_url": "https://api.github.com/users/invisibleroads/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-04-02T04:13:24Z",
    "updated_at": "2015-04-02T04:19:26Z",
    "author_association": "CONTRIBUTOR",
    "body": "Here are some performance results using the following code saved as `compress.py`.\n\n```\nfrom cStringIO import StringIO\nfrom pandas import read_csv, read_msgpack\nfrom urllib2 import urlopen\n\nurl = 'http://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_month.csv'\ntable = read_csv(StringIO(urlopen(url).read()))\nprint 'prun z = read_msgpack(table.to_msgpack())'\n```\n\n## When zlib and blosc are imported globally\n\n$ ipython -i compress.py \nIn [1]: prun z = read_msgpack(table.to_msgpack())\n\n```\n500 function calls (492 primitive calls) in 0.030 seconds\nOrdered by: internal time\nncalls  tottime  percall  cumtime  percall filename:lineno(function)\n     1    0.022    0.022    0.025    0.025 packers.py:134(read)\n     1    0.002    0.002    0.003    0.003 {method 'pack' of 'pandas.msgpack.Packer' objects}\n    15    0.001    0.000    0.001    0.000 {method 'get' of 'dict' objects}\n    15    0.001    0.000    0.001    0.000 {numpy.core.multiarray.array}\n     2    0.000    0.000    0.000    0.000 {method 'encode' of 'unicode' objects}\n```\n\n$ ipython -i compress.py \nIn [1]: prun z = read_msgpack(table.to_msgpack(compress='zlib'))\n\n```\n508 function calls (500 primitive calls) in 0.059 seconds\nOrdered by: internal time\nncalls  tottime  percall  cumtime  percall filename:lineno(function)\n     2    0.027    0.013    0.027    0.013 {zlib.compress}\n     1    0.024    0.024    0.027    0.027 packers.py:134(read)\n     1    0.003    0.003    0.031    0.031 {method 'pack' of 'pandas.msgpack.Packer' objects}\n     2    0.002    0.001    0.002    0.001 {zlib.decompress}\n    15    0.001    0.000    0.001    0.000 {method 'get' of 'dict' objects}\n```\n\n$ ipython -i compress.py \nIn [1]: prun z = read_msgpack(table.to_msgpack(compress='blosc'))\n\n```\n532 function calls (524 primitive calls) in 0.053 seconds\nOrdered by: internal time\nncalls  tottime  percall  cumtime  percall filename:lineno(function)\n     1    0.042    0.042    0.046    0.046 packers.py:134(read)\n     1    0.003    0.003    0.005    0.005 {method 'pack' of 'pandas.msgpack.Packer' objects}\n     2    0.001    0.001    0.001    0.001 {blosc.blosc_extension.compress}\n    15    0.001    0.000    0.001    0.000 {method 'get' of 'dict' objects}\n    15    0.001    0.000    0.001    0.000 {numpy.core.multiarray.array}\n```\n\n```\n$ ipython -i compress.py \nIn [1]: timeit read_msgpack(table.to_msgpack())\n10 loops, best of 3: 27.7 ms per loop\n\n$ ipython -i compress.py \nIn [1]: timeit read_msgpack(table.to_msgpack(compress='zlib'))\n10 loops, best of 3: 49.4 ms per loop\n\n$ ipython -i compress.py \nIn [1]: timeit read_msgpack(table.to_msgpack(compress='blosc'))\n10 loops, best of 3: 28.7 ms per loop\n```\n\n## When zlib and blosc are imported locally\n\nprun z = read_msgpack(table.to_msgpack())\n\n```\n500 function calls (492 primitive calls) in 0.029 seconds\nOrdered by: internal time\nncalls  tottime  percall  cumtime  percall filename:lineno(function)\n     1    0.022    0.022    0.025    0.025 packers.py:133(read)\n     1    0.002    0.002    0.003    0.003 {method 'pack' of 'pandas.msgpack.Packer' objects}\n    15    0.001    0.000    0.001    0.000 {method 'get' of 'dict' objects}\n    15    0.001    0.000    0.001    0.000 {numpy.core.multiarray.array}\n     2    0.001    0.000    0.001    0.000 index.py:1508(get_indexer)\n```\n\n$ ipython -i compress.py \nIn [1]: prun z = read_msgpack(table.to_msgpack(compress='zlib'))\nIn [2]: prun z = read_msgpack(table.to_msgpack(compress='zlib'))\nIn [3]: prun z = read_msgpack(table.to_msgpack(compress='zlib'))\n\n```\n509 function calls (501 primitive calls) in 0.081 seconds\nOrdered by: internal time\nncalls  tottime  percall  cumtime  percall filename:lineno(function)\n     1    0.043    0.043    0.048    0.048 packers.py:133(read)\n     2    0.027    0.013    0.027    0.013 {zlib.compress}\n     1    0.004    0.004    0.031    0.031 {method 'pack' of 'pandas.msgpack.Packer' objects}\n     2    0.002    0.001    0.002    0.001 {zlib.decompress}\n    15    0.001    0.000    0.001    0.000 {numpy.core.multiarray.array}\n\n479 function calls (471 primitive calls) in 0.053 seconds\nOrdered by: internal time\nncalls  tottime  percall  cumtime  percall filename:lineno(function)\n     2    0.022    0.011    0.022    0.011 {zlib.compress}\n     1    0.022    0.022    0.025    0.025 packers.py:133(read)\n     1    0.002    0.002    0.025    0.025 {method 'pack' of 'pandas.msgpack.Packer' objects}\n     2    0.002    0.001    0.002    0.001 {zlib.decompress}\n     1    0.001    0.001    0.053    0.053 <string>:1(<module>)\n\n479 function calls (471 primitive calls) in 0.053 seconds\nOrdered by: internal time\nncalls  tottime  percall  cumtime  percall filename:lineno(function)\n     2    0.022    0.011    0.022    0.011 {zlib.compress}\n     1    0.022    0.022    0.025    0.025 packers.py:133(read)\n     1    0.002    0.002    0.025    0.025 {method 'pack' of 'pandas.msgpack.Packer' objects}\n     2    0.002    0.001    0.002    0.001 {zlib.decompress}\n     1    0.002    0.002    0.053    0.053 <string>:1(<module>)\n```\n\n$ ipython -i compress.py \nIn [1]: prun z = read_msgpack(table.to_msgpack(compress='blosc'))\nIn [2]: prun z = read_msgpack(table.to_msgpack(compress='blosc'))\nIn [3]: prun z = read_msgpack(table.to_msgpack(compress='blosc'))\n\n```\n596 function calls (588 primitive calls) in 0.056 seconds\nOrdered by: internal time\nncalls  tottime  percall  cumtime  percall filename:lineno(function)\n     1    0.043    0.043    0.047    0.047 packers.py:133(read)\n     1    0.003    0.003    0.007    0.007 {method 'pack' of 'pandas.msgpack.Packer' objects}\n     2    0.002    0.001    0.002    0.001 {blosc.blosc_extension.compress}\n    15    0.001    0.000    0.001    0.000 {method 'get' of 'dict' objects}\n    15    0.001    0.000    0.001    0.000 {numpy.core.multiarray.array}\n\n503 function calls (495 primitive calls) in 0.055 seconds\nOrdered by: internal time\nncalls  tottime  percall  cumtime  percall filename:lineno(function)\n     1    0.043    0.043    0.046    0.046 packers.py:133(read)\n     1    0.003    0.003    0.006    0.006 {method 'pack' of 'pandas.msgpack.Packer' objects}\n     1    0.002    0.002    0.055    0.055 <string>:1(<module>)\n     2    0.002    0.001    0.002    0.001 {blosc.blosc_extension.compress}\n    13    0.001    0.000    0.001    0.000 {method 'get' of 'dict' objects}\n\n503 function calls (495 primitive calls) in 0.054 seconds\nOrdered by: internal time\nncalls  tottime  percall  cumtime  percall filename:lineno(function)\n     1    0.042    0.042    0.045    0.045 packers.py:133(read)\n     1    0.003    0.003    0.006    0.006 {method 'pack' of 'pandas.msgpack.Packer' objects}\n     1    0.002    0.002    0.054    0.054 <string>:1(<module>)\n     2    0.002    0.001    0.002    0.001 {blosc.blosc_extension.compress}\n    13    0.001    0.000    0.001    0.000 {method 'get' of 'dict' objects}\n```\n\n```\n$ ipython -i compress.py \nIn [1]: timeit read_msgpack(table.to_msgpack())\n10 loops, best of 3: 28.2 ms per loop\n\n$ ipython -i compress.py \nIn [1]: timeit read_msgpack(table.to_msgpack(compress='zlib'))\n10 loops, best of 3: 49.1 ms per loop\n\n$ ipython -i compress.py \nIn [1]: timeit read_msgpack(table.to_msgpack(compress='blosc'))\n10 loops, best of 3: 29.5 ms per loop\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/88722008",
    "html_url": "https://github.com/pandas-dev/pandas/pull/9783#issuecomment-88722008",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9783",
    "id": 88722008,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg4NzIyMDA4",
    "user": {
      "login": "invisibleroads",
      "id": 266668,
      "node_id": "MDQ6VXNlcjI2NjY2OA==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/266668?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/invisibleroads",
      "html_url": "https://github.com/invisibleroads",
      "followers_url": "https://api.github.com/users/invisibleroads/followers",
      "following_url": "https://api.github.com/users/invisibleroads/following{/other_user}",
      "gists_url": "https://api.github.com/users/invisibleroads/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/invisibleroads/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/invisibleroads/subscriptions",
      "organizations_url": "https://api.github.com/users/invisibleroads/orgs",
      "repos_url": "https://api.github.com/users/invisibleroads/repos",
      "events_url": "https://api.github.com/users/invisibleroads/events{/privacy}",
      "received_events_url": "https://api.github.com/users/invisibleroads/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-04-02T04:16:32Z",
    "updated_at": "2015-04-02T04:16:32Z",
    "author_association": "CONTRIBUTOR",
    "body": "I didn't expect such a quick response to the pull request.  Thanks for maintaining the pandas package.  \n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/88877594",
    "html_url": "https://github.com/pandas-dev/pandas/pull/9783#issuecomment-88877594",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9783",
    "id": 88877594,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg4ODc3NTk0",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-04-02T11:57:37Z",
    "updated_at": "2015-04-02T11:57:37Z",
    "author_association": "CONTRIBUTOR",
    "body": "ok, seems reasonable to use the local imports.\n- remove some of the blosc imports (e.g. from 2.6, 2.7_LOCALE). Then in the tests test for blosc imports, if it fails, skip the test.\n- add a release note in v0.16.1, you can put it in bug fixes, use this issue number as the reference number\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/88893488",
    "html_url": "https://github.com/pandas-dev/pandas/pull/9783#issuecomment-88893488",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9783",
    "id": 88893488,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg4ODkzNDg4",
    "user": {
      "login": "invisibleroads",
      "id": 266668,
      "node_id": "MDQ6VXNlcjI2NjY2OA==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/266668?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/invisibleroads",
      "html_url": "https://github.com/invisibleroads",
      "followers_url": "https://api.github.com/users/invisibleroads/followers",
      "following_url": "https://api.github.com/users/invisibleroads/following{/other_user}",
      "gists_url": "https://api.github.com/users/invisibleroads/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/invisibleroads/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/invisibleroads/subscriptions",
      "organizations_url": "https://api.github.com/users/invisibleroads/orgs",
      "repos_url": "https://api.github.com/users/invisibleroads/repos",
      "events_url": "https://api.github.com/users/invisibleroads/events{/privacy}",
      "received_events_url": "https://api.github.com/users/invisibleroads/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-04-02T13:19:59Z",
    "updated_at": "2015-04-02T13:19:59Z",
    "author_association": "CONTRIBUTOR",
    "body": "This seems to be a documented issue between blosc and conda.\nhttps://groups.google.com/a/continuum.io/forum/#!topic/conda/2a9Fyvzedug\nSpecifically, conda only installs c-blosc and not python-blosc.  Hmm.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/88895550",
    "html_url": "https://github.com/pandas-dev/pandas/pull/9783#issuecomment-88895550",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9783",
    "id": 88895550,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg4ODk1NTUw",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-04-02T13:25:04Z",
    "updated_at": "2015-04-02T13:25:04Z",
    "author_association": "CONTRIBUTOR",
    "body": "hmm ok let me see if I can have this fixed\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/89041296",
    "html_url": "https://github.com/pandas-dev/pandas/pull/9783#issuecomment-89041296",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9783",
    "id": 89041296,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg5MDQxMjk2",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-04-02T20:49:08Z",
    "updated_at": "2015-04-02T20:49:55Z",
    "author_association": "CONTRIBUTOR",
    "body": "@invisibleroads this looks good!\n\nThis needs to be tested slightly differently. `encode_decode` passes the kwargs thru, so what you are doing is fine. \n\nBUT, you are adding the compression type to the objects themselves (again which is ok), I don't think this is actually used on decompression (its not tested that way now). AND I am not sure that you CAN use it, as you would have to decompress first, look at the compression variable, but then you are done already.\n\nSo I am not sure how to get around this problem, other than having a top-level section which has some uncompressed attributes.\n\nSo either we need to take off the `compress : ....` on the objects themselves as it doesn't serve any purpose or test it (and/or figure out how to encode the compression).\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/89119013",
    "html_url": "https://github.com/pandas-dev/pandas/pull/9783#issuecomment-89119013",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9783",
    "id": 89119013,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg5MTE5MDEz",
    "user": {
      "login": "invisibleroads",
      "id": 266668,
      "node_id": "MDQ6VXNlcjI2NjY2OA==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/266668?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/invisibleroads",
      "html_url": "https://github.com/invisibleroads",
      "followers_url": "https://api.github.com/users/invisibleroads/followers",
      "following_url": "https://api.github.com/users/invisibleroads/following{/other_user}",
      "gists_url": "https://api.github.com/users/invisibleroads/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/invisibleroads/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/invisibleroads/subscriptions",
      "organizations_url": "https://api.github.com/users/invisibleroads/orgs",
      "repos_url": "https://api.github.com/users/invisibleroads/repos",
      "events_url": "https://api.github.com/users/invisibleroads/events{/privacy}",
      "received_events_url": "https://api.github.com/users/invisibleroads/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-04-03T02:00:02Z",
    "updated_at": "2015-04-03T13:47:46Z",
    "author_association": "CONTRIBUTOR",
    "body": "I added the `compress` attributes because `read_msgpack` was throwing an exception.  Specifically, `to_msgpack` compressed the table indices without setting the `compress` attribute and `read_msgpack > unconvert > np.fromstring` was throwing an exception because it did not know that the data had been compressed.  You can recreate this exception by reverting the extra `compress` attributes.\n\nAfter realizing this, I added the `compress` attribute for every object type where `encode` applies `convert` (which does the actual compression) to `obj.values`.  I also checked that `decode` applies the `unconvert` function to these same object types.  You can see this if you search for all the uses of `convert` and `unconvert` in `packers.py`.\n\n```\ndef encode(obj):\n    if isinstance(obj, Index):\n        return {\n            'data': convert(obj.values),\n            'compress': compressor,\n        }\n\ndef decode(obj):\n    elif typ == 'index':\n        data = unconvert(\n            obj['data'],\n            np.typeDict[obj['dtype']],\n            obj.get('compress'))\n```\n\nI think the `compress` attributes are necessary whenever `convert/unconvert` are used, but I'm not sure how or whether these attributes need to be tested explicitly.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/89120016",
    "html_url": "https://github.com/pandas-dev/pandas/pull/9783#issuecomment-89120016",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9783",
    "id": 89120016,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg5MTIwMDE2",
    "user": {
      "login": "invisibleroads",
      "id": 266668,
      "node_id": "MDQ6VXNlcjI2NjY2OA==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/266668?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/invisibleroads",
      "html_url": "https://github.com/invisibleroads",
      "followers_url": "https://api.github.com/users/invisibleroads/followers",
      "following_url": "https://api.github.com/users/invisibleroads/following{/other_user}",
      "gists_url": "https://api.github.com/users/invisibleroads/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/invisibleroads/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/invisibleroads/subscriptions",
      "organizations_url": "https://api.github.com/users/invisibleroads/orgs",
      "repos_url": "https://api.github.com/users/invisibleroads/repos",
      "events_url": "https://api.github.com/users/invisibleroads/events{/privacy}",
      "received_events_url": "https://api.github.com/users/invisibleroads/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-04-03T02:05:16Z",
    "updated_at": "2015-04-03T02:05:16Z",
    "author_association": "CONTRIBUTOR",
    "body": "The other alternative is to remove `convert/unconvert` from those object types that you do not want compressed.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/91275962",
    "html_url": "https://github.com/pandas-dev/pandas/pull/9783#issuecomment-91275962",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9783",
    "id": 91275962,
    "node_id": "MDEyOklzc3VlQ29tbWVudDkxMjc1OTYy",
    "user": {
      "login": "invisibleroads",
      "id": 266668,
      "node_id": "MDQ6VXNlcjI2NjY2OA==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/266668?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/invisibleroads",
      "html_url": "https://github.com/invisibleroads",
      "followers_url": "https://api.github.com/users/invisibleroads/followers",
      "following_url": "https://api.github.com/users/invisibleroads/following{/other_user}",
      "gists_url": "https://api.github.com/users/invisibleroads/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/invisibleroads/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/invisibleroads/subscriptions",
      "organizations_url": "https://api.github.com/users/invisibleroads/orgs",
      "repos_url": "https://api.github.com/users/invisibleroads/repos",
      "events_url": "https://api.github.com/users/invisibleroads/events{/privacy}",
      "received_events_url": "https://api.github.com/users/invisibleroads/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-04-09T16:07:52Z",
    "updated_at": "2015-04-09T16:07:52Z",
    "author_association": "CONTRIBUTOR",
    "body": "Are you at PyCon?  Maybe we can negotiate this during sprints on Monday.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/91302058",
    "html_url": "https://github.com/pandas-dev/pandas/pull/9783#issuecomment-91302058",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9783",
    "id": 91302058,
    "node_id": "MDEyOklzc3VlQ29tbWVudDkxMzAyMDU4",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-04-09T17:30:13Z",
    "updated_at": "2015-04-09T17:30:13Z",
    "author_association": "CONTRIBUTOR",
    "body": "sure at pycon starting tomorrow (thru Tuesday)\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/92386379",
    "html_url": "https://github.com/pandas-dev/pandas/pull/9783#issuecomment-92386379",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9783",
    "id": 92386379,
    "node_id": "MDEyOklzc3VlQ29tbWVudDkyMzg2Mzc5",
    "user": {
      "login": "invisibleroads",
      "id": 266668,
      "node_id": "MDQ6VXNlcjI2NjY2OA==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/266668?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/invisibleroads",
      "html_url": "https://github.com/invisibleroads",
      "followers_url": "https://api.github.com/users/invisibleroads/followers",
      "following_url": "https://api.github.com/users/invisibleroads/following{/other_user}",
      "gists_url": "https://api.github.com/users/invisibleroads/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/invisibleroads/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/invisibleroads/subscriptions",
      "organizations_url": "https://api.github.com/users/invisibleroads/orgs",
      "repos_url": "https://api.github.com/users/invisibleroads/repos",
      "events_url": "https://api.github.com/users/invisibleroads/events{/privacy}",
      "received_events_url": "https://api.github.com/users/invisibleroads/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-04-13T14:45:44Z",
    "updated_at": "2015-04-13T14:45:44Z",
    "author_association": "CONTRIBUTOR",
    "body": "@jreback \nYou suggested creating a compressed file with an earlier version of pandas to make sure that the newer version of pandas can decompress that file without error.  However, it doesn't seem like the user would have been able to compress the file in the first place because of the local import error, so luckily we won't need to include a try/except to cover that case.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/92395235",
    "html_url": "https://github.com/pandas-dev/pandas/pull/9783#issuecomment-92395235",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9783",
    "id": 92395235,
    "node_id": "MDEyOklzc3VlQ29tbWVudDkyMzk1MjM1",
    "user": {
      "login": "invisibleroads",
      "id": 266668,
      "node_id": "MDQ6VXNlcjI2NjY2OA==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/266668?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/invisibleroads",
      "html_url": "https://github.com/invisibleroads",
      "followers_url": "https://api.github.com/users/invisibleroads/followers",
      "following_url": "https://api.github.com/users/invisibleroads/following{/other_user}",
      "gists_url": "https://api.github.com/users/invisibleroads/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/invisibleroads/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/invisibleroads/subscriptions",
      "organizations_url": "https://api.github.com/users/invisibleroads/orgs",
      "repos_url": "https://api.github.com/users/invisibleroads/repos",
      "events_url": "https://api.github.com/users/invisibleroads/events{/privacy}",
      "received_events_url": "https://api.github.com/users/invisibleroads/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-04-13T15:12:05Z",
    "updated_at": "2015-04-13T15:12:05Z",
    "author_association": "CONTRIBUTOR",
    "body": "@jreback \nAs suggested, I tried compressing a dataframe using an earlier version of pandas to_msgpack (f2882b85c2f639bd8e296c4cc5febcb3289a0892) but was unable to decompress the same file using read_msgpack because _to_msgpack compresses indices (without indicating that they are compressed) and read_msgpack tried to load the indices (without knowing that they are compressed)_.\n\n```\nIn [10]: read_msgpack('timestamps-zlib.msg')\nValueError: string size must be a multiple of element size\n\nIn [11]: read_msgpack('timestamps-blosc.msg')\nValueError: Shape of passed values is (2, 13), indices imply (2, 15)\n```\n\nSince the user would not have been able to compress and decompress with to_msgpack/read_msgpack in any version of pandas, we decided that a try/except is not necessary and the code is good as is and is ready to be merged.\n"
  }
]
