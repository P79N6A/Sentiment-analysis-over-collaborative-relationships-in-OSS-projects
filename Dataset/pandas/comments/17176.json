[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/325214819",
    "html_url": "https://github.com/pandas-dev/pandas/issues/17176#issuecomment-325214819",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17176",
    "id": 325214819,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNTIxNDgxOQ==",
    "user": {
      "login": "jbrockmendel",
      "id": 8078968,
      "node_id": "MDQ6VXNlcjgwNzg5Njg=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/8078968?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jbrockmendel",
      "html_url": "https://github.com/jbrockmendel",
      "followers_url": "https://api.github.com/users/jbrockmendel/followers",
      "following_url": "https://api.github.com/users/jbrockmendel/following{/other_user}",
      "gists_url": "https://api.github.com/users/jbrockmendel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jbrockmendel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jbrockmendel/subscriptions",
      "organizations_url": "https://api.github.com/users/jbrockmendel/orgs",
      "repos_url": "https://api.github.com/users/jbrockmendel/repos",
      "events_url": "https://api.github.com/users/jbrockmendel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jbrockmendel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-27T18:12:01Z",
    "updated_at": "2017-08-27T18:12:01Z",
    "author_association": "MEMBER",
    "body": "There are some inconsistencies in how `offsets` handles `kwds` that need to be cleaned up if we want offsets to be immutable.  I have not found a way to clean them up that maintains backward compatibility in extremely weird corner cases.  Take `BusinessDay` as an example:\r\n\r\n```\r\nclass BusinessDay(SingleConstructorOffset):\r\n    def __init__(self, n=1, normalize=False, **kwds):\r\n        self.n = int(n)\r\n        self.normalize = normalize\r\n        self.kwds = kwds\r\n        self.offset = kwds.get('offset', timedelta(0))\r\n```\r\n\r\nI'd like to get a green-light to change this behavior:\r\n\r\n```\r\nIn [1]: from datetime import timedelta\r\nIn [2]: from pandas.tseries.offsets import *\r\nIn [3]: bd = BusinessDay()\r\nIn [4]: bd2 = BusinessDay(offset=timedelta(0))\r\n\r\nIn [5]: bd\r\nOut[5]: <BusinessDay>\r\n\r\nIn [6]: bd == bd2\r\nOut[6]: True\r\n\r\nIn [7]: bd.kwds\r\nOut[7]: {}\r\n\r\nIn [8]: bd2.kwds\r\nOut[8]: {'offset': datetime.timedelta(0)}\r\n\r\nIn [9]: bd - bd2\r\nOut[9]: <0 * BusinessDays>\r\n\r\nIn [10]: bd2 - bd\r\nOut[10]: <0 * BusinessDays>\r\n\r\nIn [11]: (bd - bd2).kwds\r\nOut[11]: {}\r\n\r\nIn [12]: (bd2 - bd).kwds\r\nOut[12]: {'offset': datetime.timedelta(0)}\r\n\r\n```\r\n\r\nSimilar behavior shows up in the other `BusinessFooOffset`s, `Week`, and `QuarterOffset`.  Many of the others will display unwanted behavior if users pass unsupported keyword args:\r\n\r\n```\r\nIn [33]: sms = SemiMonthBegin(clark='kent')\r\nIn [34]: sms\r\nOut[34]: <SemiMonthBegin: day_of_month=15, kwds={'clark': 'kent'}>\r\n```\r\n\r\nBest case I'd like to get rid of `DateOffset.kwds` altogether and explicitly specify the args/kwargs in the various `__init__` methods  (this will require patching a few other methods that check `self.kwds`, but that isn't a big deal).  That will break backward compat for any users who-- for some reason-- explicitly use that attribute.\r\n\r\nIf that is too big a break, the next-best option would be to\r\n\r\n1) add validation in `__init__` that only supported kwargs have been passed (this is done in a few existing code paths).  This will take care of the `SemiMonthBegin(clark='kent')` cases.\r\n\r\n2) ensure that default values for `kwds` are handled consistently.  e.g. in the `BusinessDay.__init__` example above, `kwds.get('offset', timedelta(0))` would be changed to `kwds.setdefault('offset', timedelta(0))`.\r\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/327653891",
    "html_url": "https://github.com/pandas-dev/pandas/issues/17176#issuecomment-327653891",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17176",
    "id": 327653891,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNzY1Mzg5MQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-07T01:10:16Z",
    "updated_at": "2017-09-07T01:10:16Z",
    "author_association": "CONTRIBUTOR",
    "body": "I agree that the whole kwds bizness is fishy. So would be ok with having actual signatures."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/327675506",
    "html_url": "https://github.com/pandas-dev/pandas/issues/17176#issuecomment-327675506",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17176",
    "id": 327675506,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNzY3NTUwNg==",
    "user": {
      "login": "jbrockmendel",
      "id": 8078968,
      "node_id": "MDQ6VXNlcjgwNzg5Njg=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/8078968?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jbrockmendel",
      "html_url": "https://github.com/jbrockmendel",
      "followers_url": "https://api.github.com/users/jbrockmendel/followers",
      "following_url": "https://api.github.com/users/jbrockmendel/following{/other_user}",
      "gists_url": "https://api.github.com/users/jbrockmendel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jbrockmendel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jbrockmendel/subscriptions",
      "organizations_url": "https://api.github.com/users/jbrockmendel/orgs",
      "repos_url": "https://api.github.com/users/jbrockmendel/repos",
      "events_url": "https://api.github.com/users/jbrockmendel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jbrockmendel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-07T03:42:53Z",
    "updated_at": "2017-09-07T03:42:53Z",
    "author_association": "MEMBER",
    "body": "> I agree that the whole kwds bizness is fishy. So would be ok with having actual signatures.\r\n\r\nGreat.  I'll start small implementing these one or two at a time to make sure we're on the same page."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/328292382",
    "html_url": "https://github.com/pandas-dev/pandas/issues/17176#issuecomment-328292382",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17176",
    "id": 328292382,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyODI5MjM4Mg==",
    "user": {
      "login": "jbrockmendel",
      "id": 8078968,
      "node_id": "MDQ6VXNlcjgwNzg5Njg=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/8078968?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jbrockmendel",
      "html_url": "https://github.com/jbrockmendel",
      "followers_url": "https://api.github.com/users/jbrockmendel/followers",
      "following_url": "https://api.github.com/users/jbrockmendel/following{/other_user}",
      "gists_url": "https://api.github.com/users/jbrockmendel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jbrockmendel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jbrockmendel/subscriptions",
      "organizations_url": "https://api.github.com/users/jbrockmendel/orgs",
      "repos_url": "https://api.github.com/users/jbrockmendel/repos",
      "events_url": "https://api.github.com/users/jbrockmendel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jbrockmendel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-09T17:37:34Z",
    "updated_at": "2017-09-09T17:37:34Z",
    "author_association": "MEMBER",
    "body": "There are two places in the tests with seemingly-incorrect behavior.  I'd like to confirm that these are incorrect and fix the tests before trying to fix the code.\r\n\r\nhttps://github.com/pandas-dev/pandas/blob/master/pandas/tests/tseries/test_offsets.py#L2632\r\n```\r\ndt = datetime(2007, 1, 1)\r\noffset = MonthEnd(day=20)\r\nresult = dt + offset\r\nassert result == Timestamp(2007, 1, 31)\r\nresult = result + offset\r\nassert result == Timestamp(2007, 2, 28)\r\n```\r\n\r\n`day` is not a valid argument for `MonthEnd`; this `offset` behaves the same as one with no `day` arg.\r\n\r\nhttps://github.com/pandas-dev/pandas/blob/master/pandas/tests/tseries/test_offsets.py#L3680\r\n```\r\noffset_n = FY5253(weekday=WeekDay.TUE, startingMonth=12,\r\n                          variation=\"nearest\", qtr_with_extra_week=4)\r\n```\r\n`qtr_with_extra_week` is a kwd for `FY5253Quarter`, not `FY5253`"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/328307913",
    "html_url": "https://github.com/pandas-dev/pandas/issues/17176#issuecomment-328307913",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17176",
    "id": 328307913,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyODMwNzkxMw==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-09T22:46:18Z",
    "updated_at": "2017-09-09T22:46:18Z",
    "author_association": "CONTRIBUTOR",
    "body": "yep those look wrong \r\n\r\nwhy don't do a PR just to fix those"
  }
]
