[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/238390665",
    "html_url": "https://github.com/pandas-dev/pandas/pull/13940#issuecomment-238390665",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13940",
    "id": 238390665,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzODM5MDY2NQ==",
    "user": {
      "login": "agraboso",
      "id": 7795093,
      "node_id": "MDQ6VXNlcjc3OTUwOTM=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/7795093?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/agraboso",
      "html_url": "https://github.com/agraboso",
      "followers_url": "https://api.github.com/users/agraboso/followers",
      "following_url": "https://api.github.com/users/agraboso/following{/other_user}",
      "gists_url": "https://api.github.com/users/agraboso/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/agraboso/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/agraboso/subscriptions",
      "organizations_url": "https://api.github.com/users/agraboso/orgs",
      "repos_url": "https://api.github.com/users/agraboso/repos",
      "events_url": "https://api.github.com/users/agraboso/events{/privacy}",
      "received_events_url": "https://api.github.com/users/agraboso/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-08T21:58:05Z",
    "updated_at": "2016-08-08T21:58:05Z",
    "author_association": "CONTRIBUTOR",
    "body": "Argh, there are still some `ResourceWarning`s left... Let me investigate.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/238404313",
    "html_url": "https://github.com/pandas-dev/pandas/pull/13940#issuecomment-238404313",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13940",
    "id": 238404313,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzODQwNDMxMw==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-08T23:04:25Z",
    "updated_at": "2016-08-08T23:04:25Z",
    "author_association": "CONTRIBUTOR",
    "body": "@agraboso looks a lot cleaner! https://travis-ci.org/pydata/pandas/jobs/150768150\n\nyou can leave the mmap one (if its not easy to fix). If you can get the stata ones would be great!.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/238404586",
    "html_url": "https://github.com/pandas-dev/pandas/pull/13940#issuecomment-238404586",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13940",
    "id": 238404586,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzODQwNDU4Ng==",
    "user": {
      "login": "codecov-io",
      "id": 8655789,
      "node_id": "MDQ6VXNlcjg2NTU3ODk=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/8655789?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/codecov-io",
      "html_url": "https://github.com/codecov-io",
      "followers_url": "https://api.github.com/users/codecov-io/followers",
      "following_url": "https://api.github.com/users/codecov-io/following{/other_user}",
      "gists_url": "https://api.github.com/users/codecov-io/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/codecov-io/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/codecov-io/subscriptions",
      "organizations_url": "https://api.github.com/users/codecov-io/orgs",
      "repos_url": "https://api.github.com/users/codecov-io/repos",
      "events_url": "https://api.github.com/users/codecov-io/events{/privacy}",
      "received_events_url": "https://api.github.com/users/codecov-io/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-08T23:05:56Z",
    "updated_at": "2016-08-11T00:11:00Z",
    "author_association": "NONE",
    "body": "## [Current coverage](https://codecov.io/gh/pydata/pandas/pull/13940?src=pr) is 85.31% (diff: 61.44%)\n\n> Merging [#13940](https://codecov.io/gh/pydata/pandas/pull/13940?src=pr) into [master](https://codecov.io/gh/pydata/pandas/branch/master?src=pr) will increase coverage by **0.02%**\n\n``` diff\n@@             master     #13940   diff @@\n==========================================\n  Files           139        139          \n  Lines         50162      50370   +208   \n  Methods           0          0          \n  Messages          0          0          \n  Branches          0          0          \n==========================================\n+ Hits          42785      42975   +190   \n- Misses         7377       7395    +18   \n  Partials          0          0          \n```\n\n> Powered by [Codecov](https://codecov.io?src=pr). Last update [5df9123...3fa7d25](https://codecov.io/gh/pydata/pandas/compare/5df9123e09168e130af0e73ba335d82f5c1a8d46...3fa7d25a00372a1312cd8fad0a82082e997f51a4?src=pr)\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/238659516",
    "html_url": "https://github.com/pandas-dev/pandas/pull/13940#issuecomment-238659516",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13940",
    "id": 238659516,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzODY1OTUxNg==",
    "user": {
      "login": "agraboso",
      "id": 7795093,
      "node_id": "MDQ6VXNlcjc3OTUwOTM=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/7795093?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/agraboso",
      "html_url": "https://github.com/agraboso",
      "followers_url": "https://api.github.com/users/agraboso/followers",
      "following_url": "https://api.github.com/users/agraboso/following{/other_user}",
      "gists_url": "https://api.github.com/users/agraboso/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/agraboso/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/agraboso/subscriptions",
      "organizations_url": "https://api.github.com/users/agraboso/orgs",
      "repos_url": "https://api.github.com/users/agraboso/repos",
      "events_url": "https://api.github.com/users/agraboso/events{/privacy}",
      "received_events_url": "https://api.github.com/users/agraboso/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-09T19:12:59Z",
    "updated_at": "2016-08-09T19:12:59Z",
    "author_association": "CONTRIBUTOR",
    "body": "@jreback The `mmap` one is fixed since the first commit &mdash; I was just making the point that it took me a while to understand what was wrong.\n\nI have fixed the `stata` cases too:\n- `StataWriter` was easy: I moved the opening of the file to the [`write_file`](https://github.com/agraboso/pandas/blob/509e2e628d8447198ef90bd63c8912e434beafa4/pandas/io/stata.py#L2078-L2093) method. The file is thus always opened and closed within it, whether errors are raised or not.\n- `StataReader` did not close the file when raising an error. I fixed it by wrapping most of the logic in its [`read`](https://github.com/agraboso/pandas/blob/509e2e628d8447198ef90bd63c8912e434beafa4/pandas/io/stata.py#L1406) method in a `try/except` block. This even takes care of closing the file when a `StopIteration` is raised.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/238724683",
    "html_url": "https://github.com/pandas-dev/pandas/pull/13940#issuecomment-238724683",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13940",
    "id": 238724683,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzODcyNDY4Mw==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-09T23:35:29Z",
    "updated_at": "2016-08-09T23:35:29Z",
    "author_association": "CONTRIBUTOR",
    "body": "I don't want to just wrap things at a high level, these should be as granular as possible.These can be actual errors (or errors in the tests, its hard to tell). Let uncaught resource warnings show thru (and then can investigate these individually). \n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/238727377",
    "html_url": "https://github.com/pandas-dev/pandas/pull/13940#issuecomment-238727377",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13940",
    "id": 238727377,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzODcyNzM3Nw==",
    "user": {
      "login": "agraboso",
      "id": 7795093,
      "node_id": "MDQ6VXNlcjc3OTUwOTM=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/7795093?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/agraboso",
      "html_url": "https://github.com/agraboso",
      "followers_url": "https://api.github.com/users/agraboso/followers",
      "following_url": "https://api.github.com/users/agraboso/following{/other_user}",
      "gists_url": "https://api.github.com/users/agraboso/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/agraboso/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/agraboso/subscriptions",
      "organizations_url": "https://api.github.com/users/agraboso/orgs",
      "repos_url": "https://api.github.com/users/agraboso/repos",
      "events_url": "https://api.github.com/users/agraboso/events{/privacy}",
      "received_events_url": "https://api.github.com/users/agraboso/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-09T23:50:54Z",
    "updated_at": "2016-08-09T23:50:54Z",
    "author_association": "CONTRIBUTOR",
    "body": "Notice that my proposal of wrapping most of `StataReader.read` in a `try/except` block had both a `self.close()` and a `raise`, so that we would still see all warnings and errors while making sure we do close the file.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/239021506",
    "html_url": "https://github.com/pandas-dev/pandas/pull/13940#issuecomment-239021506",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13940",
    "id": 239021506,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzOTAyMTUwNg==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-10T22:14:55Z",
    "updated_at": "2016-08-10T22:14:55Z",
    "author_association": "CONTRIBUTOR",
    "body": "hah! this turned into a rabbit hole!. lmk when you are ready.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/239049069",
    "html_url": "https://github.com/pandas-dev/pandas/pull/13940#issuecomment-239049069",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13940",
    "id": 239049069,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzOTA0OTA2OQ==",
    "user": {
      "login": "agraboso",
      "id": 7795093,
      "node_id": "MDQ6VXNlcjc3OTUwOTM=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/7795093?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/agraboso",
      "html_url": "https://github.com/agraboso",
      "followers_url": "https://api.github.com/users/agraboso/followers",
      "following_url": "https://api.github.com/users/agraboso/following{/other_user}",
      "gists_url": "https://api.github.com/users/agraboso/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/agraboso/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/agraboso/subscriptions",
      "organizations_url": "https://api.github.com/users/agraboso/orgs",
      "repos_url": "https://api.github.com/users/agraboso/repos",
      "events_url": "https://api.github.com/users/agraboso/events{/privacy}",
      "received_events_url": "https://api.github.com/users/agraboso/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-11T00:59:25Z",
    "updated_at": "2016-08-11T00:59:53Z",
    "author_association": "CONTRIBUTOR",
    "body": "> hah! this turned into a rabbit hole!\n\nTell me about it! It's possible that other parsers leave open files too, but I'd leave that for another PR. I think this one is ready.\n\n> lmk when you are ready.\n\nAnd it's all green!\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/239126585",
    "html_url": "https://github.com/pandas-dev/pandas/pull/13940#issuecomment-239126585",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13940",
    "id": 239126585,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzOTEyNjU4NQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-11T10:37:30Z",
    "updated_at": "2016-08-11T10:37:30Z",
    "author_association": "CONTRIBUTOR",
    "body": "thanks @agraboso I merged. left a couple comments that might be relevant for next PR :)\n\nwe need to try to fix remaining `ResourceWarnings` then raise if ANY are detected (its actually pretty easy). in `pandas.util.testing.TestCase.setUpClass` you can set the warning to error. This way its not set globally when `testing_mode()` is called (in case testing is just imported by a user and not actually run in the test suite).\n"
  }
]
