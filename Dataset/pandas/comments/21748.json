[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/402863704",
    "html_url": "https://github.com/pandas-dev/pandas/issues/21748#issuecomment-402863704",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/21748",
    "id": 402863704,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwMjg2MzcwNA==",
    "user": {
      "login": "gfyoung",
      "id": 9273653,
      "node_id": "MDQ6VXNlcjkyNzM2NTM=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/9273653?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gfyoung",
      "html_url": "https://github.com/gfyoung",
      "followers_url": "https://api.github.com/users/gfyoung/followers",
      "following_url": "https://api.github.com/users/gfyoung/following{/other_user}",
      "gists_url": "https://api.github.com/users/gfyoung/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gfyoung/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gfyoung/subscriptions",
      "organizations_url": "https://api.github.com/users/gfyoung/orgs",
      "repos_url": "https://api.github.com/users/gfyoung/repos",
      "events_url": "https://api.github.com/users/gfyoung/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gfyoung/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-05T21:52:16Z",
    "updated_at": "2018-07-05T21:52:16Z",
    "author_association": "MEMBER",
    "body": "https://github.com/pandas-dev/pandas/blob/master/pandas/io/formats/csvs.py#L144-L157\r\n\r\n@JacobHayes : So `mode` actually applies if we are creating the IO stream ourselves.  If the IO stream is provided, the `mode` parameter is in fact ignored.  At the very least, we should clarify this in the docs.\r\n\r\nI'm hesitant to actually \"patch\" this because `StringIO` is a specific (corner) case and this would not work for example on a file handler that was open in a different mode.  Perhaps others may disagree (@jreback @jorisvandenbossche thoughts?), but that is my current opinion on this.  How does that sound?"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/403230248",
    "html_url": "https://github.com/pandas-dev/pandas/issues/21748#issuecomment-403230248",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/21748",
    "id": 403230248,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwMzIzMDI0OA==",
    "user": {
      "login": "JacobHayes",
      "id": 2555532,
      "node_id": "MDQ6VXNlcjI1NTU1MzI=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/2555532?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JacobHayes",
      "html_url": "https://github.com/JacobHayes",
      "followers_url": "https://api.github.com/users/JacobHayes/followers",
      "following_url": "https://api.github.com/users/JacobHayes/following{/other_user}",
      "gists_url": "https://api.github.com/users/JacobHayes/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JacobHayes/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JacobHayes/subscriptions",
      "organizations_url": "https://api.github.com/users/JacobHayes/orgs",
      "repos_url": "https://api.github.com/users/JacobHayes/repos",
      "events_url": "https://api.github.com/users/JacobHayes/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JacobHayes/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-07T17:14:19Z",
    "updated_at": "2018-07-07T17:25:49Z",
    "author_association": "NONE",
    "body": "@gfyoung The IO stream isn't being created in pandas in either case, both StringIO and NamedTemporaryFile return opened IO streams that have the write methods.\r\n\r\n```\r\n>>> from io import StringIO\r\n>>> import tempfile\r\n>>>\r\n>>> s = StringIO()\r\n>>> f = open(\"f\", \"w+\")\r\n>>> tf = tempfile.NamedTemporaryFile(\"w+\")\r\n>>> s\r\n<_io.StringIO object at 0x10795f048>\r\n>>> f\r\n<_io.TextIOWrapper name='f' mode='w+' encoding='UTF-8'>\r\n>>> tf\r\n<tempfile._TemporaryFileWrapper object at 0x107e39358>\r\n>>> hasattr(s, \"write\")\r\nTrue\r\n>>> hasattr(f, \"write\")\r\nTrue\r\n>>> hasattr(tf, \"write\")\r\nTrue\r\n```\r\n\r\nI think the actual bug was that the file was being incorrectly truncated (meaning the StringIO had the desired behavior). This was tangentially fixed in v0.23.2 (pandas-dev/pandas#21478 I think), so I'll go ahead and close this issue."
  }
]
