[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/306600119",
    "html_url": "https://github.com/pandas-dev/pandas/issues/16615#issuecomment-306600119",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/16615",
    "id": 306600119,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwNjYwMDExOQ==",
    "user": {
      "login": "chris-b1",
      "id": 1924092,
      "node_id": "MDQ6VXNlcjE5MjQwOTI=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1924092?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chris-b1",
      "html_url": "https://github.com/chris-b1",
      "followers_url": "https://api.github.com/users/chris-b1/followers",
      "following_url": "https://api.github.com/users/chris-b1/following{/other_user}",
      "gists_url": "https://api.github.com/users/chris-b1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chris-b1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chris-b1/subscriptions",
      "organizations_url": "https://api.github.com/users/chris-b1/orgs",
      "repos_url": "https://api.github.com/users/chris-b1/repos",
      "events_url": "https://api.github.com/users/chris-b1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chris-b1/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-06-06T20:00:44Z",
    "updated_at": "2017-06-06T20:00:44Z",
    "author_association": "CONTRIBUTOR",
    "body": "Can you provide a data set that reproduces the issue?  Either something existing online, or you can attach to the issue."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/306626509",
    "html_url": "https://github.com/pandas-dev/pandas/issues/16615#issuecomment-306626509",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/16615",
    "id": 306626509,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwNjYyNjUwOQ==",
    "user": {
      "login": "Grinvydas",
      "id": 3864421,
      "node_id": "MDQ6VXNlcjM4NjQ0MjE=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/3864421?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Grinvydas",
      "html_url": "https://github.com/Grinvydas",
      "followers_url": "https://api.github.com/users/Grinvydas/followers",
      "following_url": "https://api.github.com/users/Grinvydas/following{/other_user}",
      "gists_url": "https://api.github.com/users/Grinvydas/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Grinvydas/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Grinvydas/subscriptions",
      "organizations_url": "https://api.github.com/users/Grinvydas/orgs",
      "repos_url": "https://api.github.com/users/Grinvydas/repos",
      "events_url": "https://api.github.com/users/Grinvydas/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Grinvydas/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-06-06T21:44:21Z",
    "updated_at": "2017-06-06T21:44:21Z",
    "author_association": "NONE",
    "body": "As always, when I try to re-create, it reads the file fine. I'll try to fetch the original file tomorrow and update."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/306819292",
    "html_url": "https://github.com/pandas-dev/pandas/issues/16615#issuecomment-306819292",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/16615",
    "id": 306819292,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwNjgxOTI5Mg==",
    "user": {
      "login": "Grinvydas",
      "id": 3864421,
      "node_id": "MDQ6VXNlcjM4NjQ0MjE=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/3864421?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Grinvydas",
      "html_url": "https://github.com/Grinvydas",
      "followers_url": "https://api.github.com/users/Grinvydas/followers",
      "following_url": "https://api.github.com/users/Grinvydas/following{/other_user}",
      "gists_url": "https://api.github.com/users/Grinvydas/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Grinvydas/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Grinvydas/subscriptions",
      "organizations_url": "https://api.github.com/users/Grinvydas/orgs",
      "repos_url": "https://api.github.com/users/Grinvydas/repos",
      "events_url": "https://api.github.com/users/Grinvydas/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Grinvydas/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-06-07T14:51:07Z",
    "updated_at": "2017-06-07T14:51:56Z",
    "author_association": "NONE",
    "body": "After some further investigation I think the problem could be elsewhere, not in New line or carriage return symbol. Actually all I needed is just to re-create the file with simple data step and after that the new data set is read properly by read_sas\r\n\r\ndata new_file;\r\nset old;\r\nrun;\r\n\r\nI'm attaching the problematic file which gives this error below:\r\n\r\nTraceback (most recent call last):\r\n  File \"isItemDsUpdated.py\", line 27, in <module>\r\n    status_log = pd.read_sas(sasfile, encoding='latin1').dropna()\r\n  File \"/projects/karegr01/anaconda3/lib/python3.6/site-packages/pandas/io/sas/sasreader.py\", line 61, in read_sas\r\n    data = reader.read()\r\n  File \"/projects/karegr01/anaconda3/lib/python3.6/site-packages/pandas/io/sas/sas7bdat.py\", line 614, in read\r\n    rslt = self._chunk_to_dataframe()\r\n  File \"/projects/karegr01/anaconda3/lib/python3.6/site-packages/pandas/io/sas/sas7bdat.py\", line 663, in _chunk_to_dataframe\r\n    rslt[name] = self._string_chunk[js, :]\r\n  File \"/projects/karegr01/anaconda3/lib/python3.6/site-packages/pandas/core/frame.py\", line 2419, in __setitem__\r\n    self._set_item(key, value)\r\n  File \"/projects/karegr01/anaconda3/lib/python3.6/site-packages/pandas/core/frame.py\", line 2485, in _set_item\r\n    value = self._sanitize_column(key, value)\r\n  File \"/projects/karegr01/anaconda3/lib/python3.6/site-packages/pandas/core/frame.py\", line 2656, in _sanitize_column\r\n    value = _sanitize_index(value, self.index, copy=False)\r\n  File \"/projects/karegr01/anaconda3/lib/python3.6/site-packages/pandas/core/series.py\", line 2800, in _sanitize_index\r\n    raise ValueError('Length of values does not match length of ' 'index')\r\nValueError: Length of values does not match length of index\r\n\r\n[load_log.zip](https://github.com/pandas-dev/pandas/files/1058392/load_log.zip)\r\n\r\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/308603530",
    "html_url": "https://github.com/pandas-dev/pandas/issues/16615#issuecomment-308603530",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/16615",
    "id": 308603530,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwODYwMzUzMA==",
    "user": {
      "login": "theianrobertson",
      "id": 8563602,
      "node_id": "MDQ6VXNlcjg1NjM2MDI=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/8563602?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theianrobertson",
      "html_url": "https://github.com/theianrobertson",
      "followers_url": "https://api.github.com/users/theianrobertson/followers",
      "following_url": "https://api.github.com/users/theianrobertson/following{/other_user}",
      "gists_url": "https://api.github.com/users/theianrobertson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theianrobertson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theianrobertson/subscriptions",
      "organizations_url": "https://api.github.com/users/theianrobertson/orgs",
      "repos_url": "https://api.github.com/users/theianrobertson/repos",
      "events_url": "https://api.github.com/users/theianrobertson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theianrobertson/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-06-15T01:33:38Z",
    "updated_at": "2017-06-15T01:33:38Z",
    "author_association": "NONE",
    "body": "Dug into this a bit because I was seeing a similar issue.  I think it's something to do with unexpected bytes - starting in row 1806 in your file there's a bunch of odd-looking bytes which the parser is choking on somehow.  I can't get something working, but as far as I can see:\r\n\r\n```python\r\nimport numpy as np\r\nfrom pandas.io.sas.sas7bdat import SAS7BDATReader\r\nfrom pandas.io.sas._sas import Parser\r\nreader = SAS7BDATReader('load_log.sas7bdat', index=None, encoding=None, chunksize=None)\r\nprint(reader.row_count)\r\n#2097\r\nnd = (reader.column_types == b'd').sum()\r\nns = (reader.column_types == b's').sum()\r\nnrows = reader.row_count\r\nreader._string_chunk = np.empty((ns, nrows), dtype=np.object)\r\nreader._byte_chunk = np.empty((nd, 8 * nrows), dtype=np.uint8)\r\nreader._current_row_in_chunk_index = 0\r\np = Parser(reader)\r\np.read(nrows)\r\nprint(reader._current_row_in_chunk_index)\r\n#1805\r\nprint(reader._current_row_in_file_index)\r\n#1805\r\n```\r\n\r\n- `SAS7BDATReader._string_chunk` is initialized with 2097 rows x 7 string columns (datetime not included) [here](https://github.com/pandas-dev/pandas/blob/e99f56e43ab65710a34440067efe372d5f74280b/pandas/io/sas/sas7bdat.py#L607)\r\n- [this call](https://github.com/pandas-dev/pandas/blob/e99f56e43ab65710a34440067efe372d5f74280b/pandas/io/sas/sas7bdat.py#L612) only reads up to line 1805 in the file (but silently returns that data), so when the 2097 rows of the first string column are matched up, that's why the exception is thrown\r\n- I think [this](https://github.com/pandas-dev/pandas/blob/e99f56e43ab65710a34440067efe372d5f74280b/pandas/io/sas/sas.pyx#L276) is what's returning early.  I'm not too familiar with how the byte patterns work, but is there maybe a control byte that's confusing the pagination functions?\r\n\r\nIterating through the `read_sas` call actually works, and you can see the bytes that are being read:\r\n\r\n```python\r\nimport pandas as pd\r\n\r\nrows = list(pd.read_sas('load_log.sas7bdat', iterator=True))\r\n\r\nprint(len(rows))\r\n#2097\r\nprint(rows[1804]['libname'])\r\n#1804    b'TRANS'\r\nprint(rows[1805]['libname'])\r\n#1805    b'\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00'\r\nodd_bytes = rows[1805]['libname'].iloc[0]\r\nprint(odd_bytes)\r\n#b'\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00'\r\nprint(odd_bytes.decode('latin-1'))\r\n#\r\nprint(len(odd_bytes.decode('latin-1')))\r\n#8\r\n```\r\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/308775415",
    "html_url": "https://github.com/pandas-dev/pandas/issues/16615#issuecomment-308775415",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/16615",
    "id": 308775415,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwODc3NTQxNQ==",
    "user": {
      "login": "Grinvydas",
      "id": 3864421,
      "node_id": "MDQ6VXNlcjM4NjQ0MjE=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/3864421?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Grinvydas",
      "html_url": "https://github.com/Grinvydas",
      "followers_url": "https://api.github.com/users/Grinvydas/followers",
      "following_url": "https://api.github.com/users/Grinvydas/following{/other_user}",
      "gists_url": "https://api.github.com/users/Grinvydas/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Grinvydas/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Grinvydas/subscriptions",
      "organizations_url": "https://api.github.com/users/Grinvydas/orgs",
      "repos_url": "https://api.github.com/users/Grinvydas/repos",
      "events_url": "https://api.github.com/users/Grinvydas/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Grinvydas/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-06-15T15:35:23Z",
    "updated_at": "2017-06-15T15:35:23Z",
    "author_association": "NONE",
    "body": "Thank you Ian, it seems \\x00 is a [NULL character](https://en.wikipedia.org/wiki/Null_character).\r\n\r\nIts interesting that SAS does not mind having NULL in the dataset, but it removes it during regular dataset rewrite. \r\n\r\nSo the question that's left is why read_sas behaves badly when encountering NULL character in the data.\r\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/370106992",
    "html_url": "https://github.com/pandas-dev/pandas/issues/16615#issuecomment-370106992",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/16615",
    "id": 370106992,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MDEwNjk5Mg==",
    "user": {
      "login": "sasutils",
      "id": 20906808,
      "node_id": "MDQ6VXNlcjIwOTA2ODA4",
      "avatar_url": "https://avatars0.githubusercontent.com/u/20906808?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sasutils",
      "html_url": "https://github.com/sasutils",
      "followers_url": "https://api.github.com/users/sasutils/followers",
      "following_url": "https://api.github.com/users/sasutils/following{/other_user}",
      "gists_url": "https://api.github.com/users/sasutils/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sasutils/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sasutils/subscriptions",
      "organizations_url": "https://api.github.com/users/sasutils/orgs",
      "repos_url": "https://api.github.com/users/sasutils/repos",
      "events_url": "https://api.github.com/users/sasutils/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sasutils/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-03T02:01:20Z",
    "updated_at": "2018-03-03T02:01:20Z",
    "author_association": "NONE",
    "body": "That sample SAS dataset has 9 deleted observations. At observation number 69,70.71.72,97,1218,1219,1220 and 1221.  Does this python package understand how to skip the deleted observations?"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/370107633",
    "html_url": "https://github.com/pandas-dev/pandas/issues/16615#issuecomment-370107633",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/16615",
    "id": 370107633,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MDEwNzYzMw==",
    "user": {
      "login": "sasutils",
      "id": 20906808,
      "node_id": "MDQ6VXNlcjIwOTA2ODA4",
      "avatar_url": "https://avatars0.githubusercontent.com/u/20906808?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sasutils",
      "html_url": "https://github.com/sasutils",
      "followers_url": "https://api.github.com/users/sasutils/followers",
      "following_url": "https://api.github.com/users/sasutils/following{/other_user}",
      "gists_url": "https://api.github.com/users/sasutils/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sasutils/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sasutils/subscriptions",
      "organizations_url": "https://api.github.com/users/sasutils/orgs",
      "repos_url": "https://api.github.com/users/sasutils/repos",
      "events_url": "https://api.github.com/users/sasutils/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sasutils/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-03T02:08:00Z",
    "updated_at": "2018-03-03T02:08:00Z",
    "author_association": "NONE",
    "body": "There are no null characters in any of the character variables in that SAS dataset. Unless they are in the 9 deleted observations.\r\n"
  }
]
