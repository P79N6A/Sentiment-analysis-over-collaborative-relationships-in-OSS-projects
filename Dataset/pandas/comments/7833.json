[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/50039829",
    "html_url": "https://github.com/pandas-dev/pandas/issues/7833#issuecomment-50039829",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/7833",
    "id": 50039829,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwMDM5ODI5",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-07-24T16:09:20Z",
    "updated_at": "2014-07-24T16:09:20Z",
    "author_association": "CONTRIBUTOR",
    "body": "this is actually a bit tricky, because you are passing an already localized tz, then what is the `tz='....'` doing? a conversion? (has to be, right?) or is this reallying localizing the UTC of the original value?\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/50040190",
    "html_url": "https://github.com/pandas-dev/pandas/issues/7833#issuecomment-50040190",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/7833",
    "id": 50040190,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwMDQwMTkw",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-07-24T16:11:47Z",
    "updated_at": "2014-07-24T16:12:23Z",
    "author_association": "CONTRIBUTOR",
    "body": "cc @rockg\ncc @sinhrks\ncc @adamgreenhall\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/50042819",
    "html_url": "https://github.com/pandas-dev/pandas/issues/7833#issuecomment-50042819",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/7833",
    "id": 50042819,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwMDQyODE5",
    "user": {
      "login": "ischwabacher",
      "id": 4306187,
      "node_id": "MDQ6VXNlcjQzMDYxODc=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/4306187?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ischwabacher",
      "html_url": "https://github.com/ischwabacher",
      "followers_url": "https://api.github.com/users/ischwabacher/followers",
      "following_url": "https://api.github.com/users/ischwabacher/following{/other_user}",
      "gists_url": "https://api.github.com/users/ischwabacher/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ischwabacher/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ischwabacher/subscriptions",
      "organizations_url": "https://api.github.com/users/ischwabacher/orgs",
      "repos_url": "https://api.github.com/users/ischwabacher/repos",
      "events_url": "https://api.github.com/users/ischwabacher/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ischwabacher/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-07-24T16:29:33Z",
    "updated_at": "2014-07-24T17:28:34Z",
    "author_association": "CONTRIBUTOR",
    "body": "But `-0500` _isn't_ a time zone-- it's just an offset.  It tells you how to convert _this_ time to UTC, but not this time plus an hour.  How do we want to handle `Timestamp('2013-11-3 01:30:00', tz='America/Chicago')`?  That time is ambiguous, but if we add `-0500` or `-0600`, it's not.  We also can't rely on time zone abbreviations-- `Timestamp('2013-11-3 01:30:00 CDT')` could be in `America/Havana`, and even `Timestamp('2013-11-3 01:30:00 CDT-0500')` could be in one of the Indiana time zones.  To make matters worse, not all local time discontinuities come from DST.\n\nI really think the only unambiguous way to construct an aware datetime from local time is if both the time zone _and_ the offset are also present.  Offset lets you convert to UTC, where you look up the correct offset for the time zone at that UTC time and compare it to the offset again.  If they match, great.  If they don't match, you can either correct the offset or give a NonExistentTime error, and which of these you do should probably be determined by a `strict=` kwarg.  Maybe you accept only the correct offset, or `Z` to construct from UTC + time zone.\n\nEDIT: Another benefit of fixing this:\n\n``` python\n\nIn [1]: from pandas import Timestamp\n\nIn [2]: Timestamp('2013-11-3', tz='America/Chicago')\nOut[2]: Timestamp('2013-11-03 00:00:00-0500', tz='America/Chicago')\n\nIn [3]: eval(repr(_))\nOut[3]: Timestamp('2013-11-02 23:09:00-0551', tz='America/Chicago')\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/50072011",
    "html_url": "https://github.com/pandas-dev/pandas/issues/7833#issuecomment-50072011",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/7833",
    "id": 50072011,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwMDcyMDEx",
    "user": {
      "login": "sinhrks",
      "id": 1696302,
      "node_id": "MDQ6VXNlcjE2OTYzMDI=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1696302?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sinhrks",
      "html_url": "https://github.com/sinhrks",
      "followers_url": "https://api.github.com/users/sinhrks/followers",
      "following_url": "https://api.github.com/users/sinhrks/following{/other_user}",
      "gists_url": "https://api.github.com/users/sinhrks/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sinhrks/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sinhrks/subscriptions",
      "organizations_url": "https://api.github.com/users/sinhrks/orgs",
      "repos_url": "https://api.github.com/users/sinhrks/repos",
      "events_url": "https://api.github.com/users/sinhrks/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sinhrks/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-07-24T20:17:00Z",
    "updated_at": "2014-07-24T20:17:14Z",
    "author_association": "MEMBER",
    "body": "It looks to be caused by `tslib._localize_tso` (in `Timestamp.__new__`) ignores current tz. May better to replace `_localize_tso` to `tz_convert`? And I think `-05:00` is timezone with fixed offset, by definition.\n\n```\nresult = pd.Timestamp('2013-11-01 00:00:00-05:00')\nresult, result.tz\n# Timestamp('2013-11-01 00:00:00-0500'), tzoffset(None, -18000)\n\nresult.tz_convert('America/Chicago')\n# 2013-11-01 00:00:00-05:00\nresult.tz_convert('America/Chicago')\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/50088292",
    "html_url": "https://github.com/pandas-dev/pandas/issues/7833#issuecomment-50088292",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/7833",
    "id": 50088292,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwMDg4Mjky",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-07-24T22:46:59Z",
    "updated_at": "2014-07-24T22:46:59Z",
    "author_association": "CONTRIBUTOR",
    "body": "@sinhrks yep\n\nyes I think if the current `tz` is not None then `tz_convert` it. But I might only do it if its a fixed offset (or a UTC). Not sure that you want implicit conversion just by passing a `tz`, so maybe raise `ValueError` if that is the case (and obviously its innocuous if you pass in the SAME tz as inferred from the stamp).\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/50165636",
    "html_url": "https://github.com/pandas-dev/pandas/issues/7833#issuecomment-50165636",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/7833",
    "id": 50165636,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwMTY1NjM2",
    "user": {
      "login": "ischwabacher",
      "id": 4306187,
      "node_id": "MDQ6VXNlcjQzMDYxODc=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/4306187?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ischwabacher",
      "html_url": "https://github.com/ischwabacher",
      "followers_url": "https://api.github.com/users/ischwabacher/followers",
      "following_url": "https://api.github.com/users/ischwabacher/following{/other_user}",
      "gists_url": "https://api.github.com/users/ischwabacher/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ischwabacher/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ischwabacher/subscriptions",
      "organizations_url": "https://api.github.com/users/ischwabacher/orgs",
      "repos_url": "https://api.github.com/users/ischwabacher/repos",
      "events_url": "https://api.github.com/users/ischwabacher/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ischwabacher/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-07-25T15:33:24Z",
    "updated_at": "2014-07-25T17:13:14Z",
    "author_association": "CONTRIBUTOR",
    "body": "It might be best if the conversion only happens when `ts_input` is a string object, `isinstance(ts_input.tzinfo, (dateutil.tz.tzoffset, dateutil.tz.tzutc))`, and `tz is not None`.  This test is awkward, but it lets us make sure we're only doing as much in the constructor as we need to.\n\nThen there's this problem:\n\n``` python\n\nIn [20]: dateutil.parser.parse('2013-11-3 00:00:00 CDT').tzinfo\nOut[20]: tzlocal()   # local TZ is America/Chicago\n\nIn [21]: dateutil.parser.parse('2013-11-3 00:00:00 EDT').tzinfo\n# None\n```\n\nSo I'm not sure we even _can_ do the right thing in all cases without messing with `dateutil.parser`.\n\nAlso, `tz_convert` is a a `Timestamp` method.  What are the consequences of calling methods on an object while it is still in `__new__`?  Are there any pitfalls we should be watching out for?\n\nEDIT: \n\n> And I think `-05:00` is timezone with fixed offset, by definition.\n\nI agree that this is how it's defined, but I think it's better to think about what information we need about a time in order to do what the user wants.  Ultimately, I think the user (and here I'm generalizing from a sample size of 'me') wants to be able to relate times in a particular place.  Fixed offset time zones are a tool for doing this (and I use them because I collect data using time-zone-naive devices for which the offset is only guaranteed to be correct at the start of the collection window), but in general I suspect that most of the time that a user gets a `Timestamp` with a fixed offset, the user is either going to 1) convert it to UTC, 2) convert it to the real time zone it was supposed to be in in the first place, or 3) write buggy DST-handling code.  Not every user can be saved from case 3), but I think we should make case 2) as attractive as possible.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/50166308",
    "html_url": "https://github.com/pandas-dev/pandas/issues/7833#issuecomment-50166308",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/7833",
    "id": 50166308,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwMTY2MzA4",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-07-25T15:38:30Z",
    "updated_at": "2014-07-25T15:38:30Z",
    "author_association": "CONTRIBUTOR",
    "body": "@ischwabacher, @sinhrks is talking about a much lower-level object, called a `TSObject`.\n\n`dateutil` is not used here, its parsed by the internal c-routines (as this is a standard format)\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/50169625",
    "html_url": "https://github.com/pandas-dev/pandas/issues/7833#issuecomment-50169625",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/7833",
    "id": 50169625,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwMTY5NjI1",
    "user": {
      "login": "ischwabacher",
      "id": 4306187,
      "node_id": "MDQ6VXNlcjQzMDYxODc=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/4306187?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ischwabacher",
      "html_url": "https://github.com/ischwabacher",
      "followers_url": "https://api.github.com/users/ischwabacher/followers",
      "following_url": "https://api.github.com/users/ischwabacher/following{/other_user}",
      "gists_url": "https://api.github.com/users/ischwabacher/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ischwabacher/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ischwabacher/subscriptions",
      "organizations_url": "https://api.github.com/users/ischwabacher/orgs",
      "repos_url": "https://api.github.com/users/ischwabacher/repos",
      "events_url": "https://api.github.com/users/ischwabacher/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ischwabacher/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-07-25T16:04:21Z",
    "updated_at": "2014-07-25T17:15:00Z",
    "author_association": "CONTRIBUTOR",
    "body": "`Timestamp.__new__` calls `dateutil.parser.parse` (for which `parse_date` is an alias) on its first argument if it's a string.  So in the string input case, the first argument to the low-level `convert_to_tsobject` call is a `datetime.datetime` with a `dateutil.tz` time zone.  It will never be a string object.\n\nEDIT: But I did fail to notice that there's a `tz_convert` that takes an `ndarray[int64_t]` as its first argument.  Is that what you were referring to?\n"
  }
]
