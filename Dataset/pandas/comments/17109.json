[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/321455468",
    "html_url": "https://github.com/pandas-dev/pandas/pull/17109#issuecomment-321455468",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17109",
    "id": 321455468,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMTQ1NTQ2OA==",
    "user": {
      "login": "mroeschke",
      "id": 10647082,
      "node_id": "MDQ6VXNlcjEwNjQ3MDgy",
      "avatar_url": "https://avatars0.githubusercontent.com/u/10647082?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mroeschke",
      "html_url": "https://github.com/mroeschke",
      "followers_url": "https://api.github.com/users/mroeschke/followers",
      "following_url": "https://api.github.com/users/mroeschke/following{/other_user}",
      "gists_url": "https://api.github.com/users/mroeschke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mroeschke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mroeschke/subscriptions",
      "organizations_url": "https://api.github.com/users/mroeschke/orgs",
      "repos_url": "https://api.github.com/users/mroeschke/repos",
      "events_url": "https://api.github.com/users/mroeschke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mroeschke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-10T05:36:09Z",
    "updated_at": "2017-08-10T05:36:09Z",
    "author_association": "MEMBER",
    "body": "I noticed that some IO SQL tests have been failing. \r\n\r\nIt appears that in the conversion from SQL to DataFrame the function [`_handle_date_column`](https://github.com/pandas-dev/pandas/blob/master/pandas/io/sql.py#L102) has `pd.to_datetime(..., utc=True)` hardcoded which is now localizing the columns to utc by default after this fix.\r\n\r\nI feel we shouldn't assume these database dates are utc by default i.e. remove hardcoded `utc=True`. Thoughts?"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/321501078",
    "html_url": "https://github.com/pandas-dev/pandas/pull/17109#issuecomment-321501078",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17109",
    "id": 321501078,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMTUwMTA3OA==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-10T09:30:35Z",
    "updated_at": "2017-08-10T09:30:35Z",
    "author_association": "MEMBER",
    "body": "@mroeschke yeah, that sql issue might be a tricky issue, as I recall we had a long discussion about that. The `utc=True` was added in https://github.com/pandas-dev/pandas/pull/7364. \r\nIt was done to deal with datetime objects with timezones coming from the database. The end result of using utc=True was that we always converted the timezone aware data to naive utc. \r\n\r\nBut, that also dates back from the time that a Series could not hold timezone aware data. So now, I think it would be OK (or even better) to have it as timezone aware but still UTC data (the reason that it has to be utc, if I recall, is that the database uses fixed offsets, which can lead to different timezones around DST, which results in errors when converting that to a datetime64 column. Therefore we decided to always convert timezone aware data to UTC)\r\n\r\nSo given that, it might be that we just need to update the tests?\r\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/321507566",
    "html_url": "https://github.com/pandas-dev/pandas/pull/17109#issuecomment-321507566",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17109",
    "id": 321507566,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMTUwNzU2Ng==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-10T09:58:32Z",
    "updated_at": "2017-08-10T09:58:32Z",
    "author_association": "CONTRIBUTOR",
    "body": "actually the db issue might be more complex and just changing tests is not the correct thing to do. See what is actually returned currently in the database.  IIRC postgres stores a datetime-aware tz, but its actually in the *local* timezone, IOW it loses the offset info (it *does* convert to UTC from wherever it was, it just *stores* it locally). SO you need to reverse this on de-serialization.\r\n\r\n@cpcloud "
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/321508753",
    "html_url": "https://github.com/pandas-dev/pandas/pull/17109#issuecomment-321508753",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17109",
    "id": 321508753,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMTUwODc1Mw==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-10T10:03:52Z",
    "updated_at": "2017-08-10T10:11:35Z",
    "author_association": "MEMBER",
    "body": "@jreback looking at the issues I linked to (but it is a long time ago I actually looked at it ..), the data we get from postgres are datetime objects with ~pytz~ psycopg2 fixed offsets (so no actual timezone). So I think converting to UTC is, as we decided back then, still the most sensible thing to do (up to now, it only looses the 'utc time zone' as Series back then didn't support having a timezone. So now we can still have a utc data, but just preserve the fact it is timezone aware)\r\n\r\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/321512964",
    "html_url": "https://github.com/pandas-dev/pandas/pull/17109#issuecomment-321512964",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17109",
    "id": 321512964,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMTUxMjk2NA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-10T10:23:44Z",
    "updated_at": "2017-08-10T10:23:44Z",
    "author_association": "CONTRIBUTOR",
    "body": "@jorisvandenbossche postgres loses information in the timezone. They *are* UTC dates, but in the local timezone. you need to match the existing behavior."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/321514565",
    "html_url": "https://github.com/pandas-dev/pandas/pull/17109#issuecomment-321514565",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17109",
    "id": 321514565,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMTUxNDU2NQ==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-10T10:31:33Z",
    "updated_at": "2017-08-10T10:32:27Z",
    "author_association": "MEMBER",
    "body": "> you need to match the existing behavior.\r\n\r\nSorry, what do you mean? Do you mean existing behaviour of `read_sql`? \r\nAs I already said, `read_sql` already returns utc data for 'timestamp with time zone' data (so how postgres stores them). It now only converts it to \"utc naive data\" (as Series could not hold timezone information), which is due to the changes in this PR changes to \"utc aware data\", so the same values, but now with the timezone information. \r\nIMO this change is not necessarily bad (I think it would have done that in #7364 if it had been possible at that time)"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/321940838",
    "html_url": "https://github.com/pandas-dev/pandas/pull/17109#issuecomment-321940838",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17109",
    "id": 321940838,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMTk0MDgzOA==",
    "user": {
      "login": "mroeschke",
      "id": 10647082,
      "node_id": "MDQ6VXNlcjEwNjQ3MDgy",
      "avatar_url": "https://avatars0.githubusercontent.com/u/10647082?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mroeschke",
      "html_url": "https://github.com/mroeschke",
      "followers_url": "https://api.github.com/users/mroeschke/followers",
      "following_url": "https://api.github.com/users/mroeschke/following{/other_user}",
      "gists_url": "https://api.github.com/users/mroeschke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mroeschke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mroeschke/subscriptions",
      "organizations_url": "https://api.github.com/users/mroeschke/orgs",
      "repos_url": "https://api.github.com/users/mroeschke/repos",
      "events_url": "https://api.github.com/users/mroeschke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mroeschke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-11T23:40:01Z",
    "updated_at": "2017-08-11T23:40:01Z",
    "author_association": "MEMBER",
    "body": "I agree with @jorisvandenbossche \r\n\r\nFor [reference](https://www.postgresql.org/docs/9.1/static/datatype-datetime.html), postgres `timestamp with time zone` is stored in UTC, and upon output: \r\n\r\n>  it is always converted from UTC to the current timezone zone, and displayed as local time in that zone\r\n\r\nBut more importantly, the psycopg2 driver [returns datetime objects with `psycopg2.tz.FixedOffsetTimezone`](http://initd.org/psycopg/docs/usage.html#time-zones-handling), and since this has historically been converted to UTC (naive), keeping it UTC sounds good to me (but now aware after this PR). I can add an additional note in the whatsnew"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/322375316",
    "html_url": "https://github.com/pandas-dev/pandas/pull/17109#issuecomment-322375316",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17109",
    "id": 322375316,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMjM3NTMxNg==",
    "user": {
      "login": "pep8speaks",
      "id": 24736507,
      "node_id": "MDQ6VXNlcjI0NzM2NTA3",
      "avatar_url": "https://avatars1.githubusercontent.com/u/24736507?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pep8speaks",
      "html_url": "https://github.com/pep8speaks",
      "followers_url": "https://api.github.com/users/pep8speaks/followers",
      "following_url": "https://api.github.com/users/pep8speaks/following{/other_user}",
      "gists_url": "https://api.github.com/users/pep8speaks/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pep8speaks/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pep8speaks/subscriptions",
      "organizations_url": "https://api.github.com/users/pep8speaks/orgs",
      "repos_url": "https://api.github.com/users/pep8speaks/repos",
      "events_url": "https://api.github.com/users/pep8speaks/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pep8speaks/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-15T04:35:05Z",
    "updated_at": "2017-09-01T07:00:19Z",
    "author_association": "NONE",
    "body": "Hello @mroeschke! Thanks for updating the PR.\n\n\n\n\n\n\n\n\n\n\n\nCheers ! There are no PEP8 issues in this Pull Request. :beers: \n\n##### Comment last updated on September 01, 2017 at 07:00 Hours UTC"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/322381363",
    "html_url": "https://github.com/pandas-dev/pandas/pull/17109#issuecomment-322381363",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17109",
    "id": 322381363,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMjM4MTM2Mw==",
    "user": {
      "login": "codecov[bot]",
      "id": 22429695,
      "node_id": "MDM6Qm90MjI0Mjk2OTU=",
      "avatar_url": "https://avatars2.githubusercontent.com/in/254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/codecov%5Bbot%5D",
      "html_url": "https://github.com/apps/codecov",
      "followers_url": "https://api.github.com/users/codecov%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/codecov%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/codecov%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/codecov%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/codecov%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/codecov%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/codecov%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/codecov%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/codecov%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2017-08-15T05:35:27Z",
    "updated_at": "2017-09-01T08:22:50Z",
    "author_association": "NONE",
    "body": "# [Codecov](https://codecov.io/gh/pandas-dev/pandas/pull/17109?src=pr&el=h1) Report\n> Merging [#17109](https://codecov.io/gh/pandas-dev/pandas/pull/17109?src=pr&el=desc) into [master](https://codecov.io/gh/pandas-dev/pandas/commit/062f6f118fe4ea439ae255a8ff886a532e20ecdb?src=pr&el=desc) will **decrease** coverage by `0.01%`.\n> The diff coverage is `100%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/pandas-dev/pandas/pull/17109/graphs/tree.svg?height=150&width=650&token=eZ4WkYLtcO&src=pr)](https://codecov.io/gh/pandas-dev/pandas/pull/17109?src=pr&el=tree)\n\n```diff\n@@            Coverage Diff             @@\n##           master   #17109      +/-   ##\n==========================================\n- Coverage   91.03%   91.02%   -0.02%     \n==========================================\n  Files         163      163              \n  Lines       49580    49581       +1     \n==========================================\n- Hits        45137    45130       -7     \n- Misses       4443     4451       +8\n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| #multiple | `88.8% <28.57%> (-0.01%)` | :arrow_down: |\n| #single | `40.26% <100%> (-0.06%)` | :arrow_down: |\n\n| [Impacted Files](https://codecov.io/gh/pandas-dev/pandas/pull/17109?src=pr&el=tree) | Coverage Δ | |\n|---|---|---|\n| [pandas/core/tools/datetimes.py](https://codecov.io/gh/pandas-dev/pandas/pull/17109?src=pr&el=tree#diff-cGFuZGFzL2NvcmUvdG9vbHMvZGF0ZXRpbWVzLnB5) | `67.3% <100%> (+0.27%)` | :arrow_up: |\n| [pandas/io/sql.py](https://codecov.io/gh/pandas-dev/pandas/pull/17109?src=pr&el=tree#diff-cGFuZGFzL2lvL3NxbC5weQ==) | `94.8% <100%> (ø)` | :arrow_up: |\n| [pandas/io/gbq.py](https://codecov.io/gh/pandas-dev/pandas/pull/17109?src=pr&el=tree#diff-cGFuZGFzL2lvL2dicS5weQ==) | `25% <0%> (-58.34%)` | :arrow_down: |\n| [pandas/core/frame.py](https://codecov.io/gh/pandas-dev/pandas/pull/17109?src=pr&el=tree#diff-cGFuZGFzL2NvcmUvZnJhbWUucHk=) | `97.72% <0%> (-0.1%)` | :arrow_down: |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/pandas-dev/pandas/pull/17109?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/pandas-dev/pandas/pull/17109?src=pr&el=footer). Last update [062f6f1...5eb7d9c](https://codecov.io/gh/pandas-dev/pandas/pull/17109?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/322610366",
    "html_url": "https://github.com/pandas-dev/pandas/pull/17109#issuecomment-322610366",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17109",
    "id": 322610366,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMjYxMDM2Ng==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-15T22:48:11Z",
    "updated_at": "2017-08-15T22:48:11Z",
    "author_association": "MEMBER",
    "body": "@mroeschke Based on the diff in the sql tests, it seems that you now have `read_sql` to return UTC aware data *always* (is this correct?), while IMO we should only return tz aware data when the SQL type is `timestamp with time zone`, and still return plain tz naive datetime data when the SQL type is just `timestamp`"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/322671858",
    "html_url": "https://github.com/pandas-dev/pandas/pull/17109#issuecomment-322671858",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17109",
    "id": 322671858,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMjY3MTg1OA==",
    "user": {
      "login": "mroeschke",
      "id": 10647082,
      "node_id": "MDQ6VXNlcjEwNjQ3MDgy",
      "avatar_url": "https://avatars0.githubusercontent.com/u/10647082?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mroeschke",
      "html_url": "https://github.com/mroeschke",
      "followers_url": "https://api.github.com/users/mroeschke/followers",
      "following_url": "https://api.github.com/users/mroeschke/following{/other_user}",
      "gists_url": "https://api.github.com/users/mroeschke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mroeschke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mroeschke/subscriptions",
      "organizations_url": "https://api.github.com/users/mroeschke/orgs",
      "repos_url": "https://api.github.com/users/mroeschke/repos",
      "events_url": "https://api.github.com/users/mroeschke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mroeschke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-16T05:43:32Z",
    "updated_at": "2017-08-16T05:44:42Z",
    "author_association": "MEMBER",
    "body": "@jorisvandenbossche Ah yes, you're right. I think I was too aggressive in changing the SQL tests. \r\n\r\nI will have to dig deeper into SQL routines to see if I can determine the original SQL type and pass that info along to the [`_handle_date_column`](https://github.com/pandas-dev/pandas/blob/793020293ee1e5fa023f45c12943a4ac51cc23d0/pandas/io/sql.py#L102) function which is now making datetime columns tz aware with `to_datetime(..., utc=True)`"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/322720950",
    "html_url": "https://github.com/pandas-dev/pandas/pull/17109#issuecomment-322720950",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17109",
    "id": 322720950,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMjcyMDk1MA==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-16T09:47:51Z",
    "updated_at": "2017-08-16T09:47:51Z",
    "author_association": "MEMBER",
    "body": "> I will have to dig deeper into SQL routines to see if I can determine the original SQL type and pass that info along to the _handle_date_column function which is now making datetime columns tz aware with to_datetime(..., utc=True)\r\n\r\nFor the case where we have sql type information, you have to look at `_harmonize_columns`. There is already a step were we handle datetime data, but just do the same thing for both aware and non-aware dtype (the difference is already detected). So there you can easily add a distinction.\r\n\r\nFor the case where that is not available (`read_sql_query`), I am not sure what currently actually happens."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/324452698",
    "html_url": "https://github.com/pandas-dev/pandas/pull/17109#issuecomment-324452698",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17109",
    "id": 324452698,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNDQ1MjY5OA==",
    "user": {
      "login": "mroeschke",
      "id": 10647082,
      "node_id": "MDQ6VXNlcjEwNjQ3MDgy",
      "avatar_url": "https://avatars0.githubusercontent.com/u/10647082?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mroeschke",
      "html_url": "https://github.com/mroeschke",
      "followers_url": "https://api.github.com/users/mroeschke/followers",
      "following_url": "https://api.github.com/users/mroeschke/following{/other_user}",
      "gists_url": "https://api.github.com/users/mroeschke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mroeschke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mroeschke/subscriptions",
      "organizations_url": "https://api.github.com/users/mroeschke/orgs",
      "repos_url": "https://api.github.com/users/mroeschke/repos",
      "events_url": "https://api.github.com/users/mroeschke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mroeschke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-23T20:27:35Z",
    "updated_at": "2017-08-23T20:27:35Z",
    "author_association": "MEMBER",
    "body": "Thanks for reviewing @jreback and @jorisvandenbossche. Apologies for being idle on this.\r\n\r\n@jorisvandenbossche A lot of the SQL tests check the conversion of a `DateCol` (native datetime column), so those tests do not need changes. but I need to double check the tests that convert `DateColWithTz` (tz aware datetime column). "
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/324556192",
    "html_url": "https://github.com/pandas-dev/pandas/pull/17109#issuecomment-324556192",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17109",
    "id": 324556192,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNDU1NjE5Mg==",
    "user": {
      "login": "mroeschke",
      "id": 10647082,
      "node_id": "MDQ6VXNlcjEwNjQ3MDgy",
      "avatar_url": "https://avatars0.githubusercontent.com/u/10647082?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mroeschke",
      "html_url": "https://github.com/mroeschke",
      "followers_url": "https://api.github.com/users/mroeschke/followers",
      "following_url": "https://api.github.com/users/mroeschke/following{/other_user}",
      "gists_url": "https://api.github.com/users/mroeschke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mroeschke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mroeschke/subscriptions",
      "organizations_url": "https://api.github.com/users/mroeschke/orgs",
      "repos_url": "https://api.github.com/users/mroeschke/repos",
      "events_url": "https://api.github.com/users/mroeschke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mroeschke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-24T07:28:01Z",
    "updated_at": "2017-08-24T07:28:01Z",
    "author_association": "MEMBER",
    "body": "@jorisvandenbossche There's a singular test, `test_datetime_with_timezone`, for all tz-aware datetime column tests which passed originally. I have added an additional (redundant) test to verify that the columns are being localized to UTC. That specific test were skipping locally, so waiting to see if passes on CI.\r\n\r\nP.S. To test the full suite of SQL tests locally, are there additional local configuration steps besides installing `requirements_all.txt`? "
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/324560300",
    "html_url": "https://github.com/pandas-dev/pandas/pull/17109#issuecomment-324560300",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17109",
    "id": 324560300,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNDU2MDMwMA==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-24T07:47:59Z",
    "updated_at": "2017-08-24T07:47:59Z",
    "author_association": "MEMBER",
    "body": "> P.S. To test the full suite of SQL tests locally, are there additional local configuration steps besides installing requirements_all.txt?\r\n\r\nI think you need to make a database called 'pandas_nosetest' (and that is accessible for the default postgres user). See here how it tries to connect to the database in the tests:\r\n\r\nhttps://github.com/pandas-dev/pandas/blob/66ec5f3e616f6449ef2c88401042cf2a282234d7/pandas/tests/io/test_sql.py#L1764\r\n\r\nand this is the setup on travis:\r\n\r\nhttps://github.com/pandas-dev/pandas/blob/66ec5f3e616f6449ef2c88401042cf2a282234d7/ci/install_db_travis.sh#L10\r\n\r\n(but it is a long time ago that I did ran those tests locally)\r\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/324828408",
    "html_url": "https://github.com/pandas-dev/pandas/pull/17109#issuecomment-324828408",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17109",
    "id": 324828408,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNDgyODQwOA==",
    "user": {
      "login": "mroeschke",
      "id": 10647082,
      "node_id": "MDQ6VXNlcjEwNjQ3MDgy",
      "avatar_url": "https://avatars0.githubusercontent.com/u/10647082?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mroeschke",
      "html_url": "https://github.com/mroeschke",
      "followers_url": "https://api.github.com/users/mroeschke/followers",
      "following_url": "https://api.github.com/users/mroeschke/following{/other_user}",
      "gists_url": "https://api.github.com/users/mroeschke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mroeschke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mroeschke/subscriptions",
      "organizations_url": "https://api.github.com/users/mroeschke/orgs",
      "repos_url": "https://api.github.com/users/mroeschke/repos",
      "events_url": "https://api.github.com/users/mroeschke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mroeschke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-25T05:38:04Z",
    "updated_at": "2017-08-25T05:38:04Z",
    "author_association": "MEMBER",
    "body": "The SQL tests with datetime tz-aware columns are passing and all green. Let me know if there's anything else I need to address. "
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/324858389",
    "html_url": "https://github.com/pandas-dev/pandas/pull/17109#issuecomment-324858389",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17109",
    "id": 324858389,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNDg1ODM4OQ==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-25T08:38:08Z",
    "updated_at": "2017-08-25T08:38:08Z",
    "author_association": "MEMBER",
    "body": "> You didn't have to change anything in the sql tests? That seems a bit suspicious to me (maybe indicating it is actually not working correctly now?)\r\n\r\nI looked into the `test_datetime_with_timezone` test, and I think you need to remove the astype in the following lines:\r\n\r\nhttps://github.com/pandas-dev/pandas/blob/f7216efdc5b8f21c903b8c6b425cdedc5e641f36/pandas/tests/io/test_sql.py#L1316-L1320\r\n\r\nDue to the astype, it converts the result always to UTC before asserting, so it does not assert it is already UTC as a result from `read_sql_table`.\r\n\r\nI assume with the changes that this test will still pass once corrected, but to correctly test the functionality, we need to update that one. You can maybe also add the `assert is_datetime64tz_dtype(col.dtype)` and `assert str(col.dt.tz) == 'UTC'` like a few lines above (to be explicit, although they are actually redundant with the assert_series_equal I think)"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/325263704",
    "html_url": "https://github.com/pandas-dev/pandas/pull/17109#issuecomment-325263704",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17109",
    "id": 325263704,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNTI2MzcwNA==",
    "user": {
      "login": "mroeschke",
      "id": 10647082,
      "node_id": "MDQ6VXNlcjEwNjQ3MDgy",
      "avatar_url": "https://avatars0.githubusercontent.com/u/10647082?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mroeschke",
      "html_url": "https://github.com/mroeschke",
      "followers_url": "https://api.github.com/users/mroeschke/followers",
      "following_url": "https://api.github.com/users/mroeschke/following{/other_user}",
      "gists_url": "https://api.github.com/users/mroeschke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mroeschke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mroeschke/subscriptions",
      "organizations_url": "https://api.github.com/users/mroeschke/orgs",
      "repos_url": "https://api.github.com/users/mroeschke/repos",
      "events_url": "https://api.github.com/users/mroeschke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mroeschke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-28T05:33:09Z",
    "updated_at": "2017-08-28T05:33:09Z",
    "author_association": "MEMBER",
    "body": "Fixed the `test_datetime_with_timezone` test and consolidated the others tests.  Appveyor had connectivity issues, but tests passed on other platforms."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/325893928",
    "html_url": "https://github.com/pandas-dev/pandas/pull/17109#issuecomment-325893928",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17109",
    "id": 325893928,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNTg5MzkyOA==",
    "user": {
      "login": "mroeschke",
      "id": 10647082,
      "node_id": "MDQ6VXNlcjEwNjQ3MDgy",
      "avatar_url": "https://avatars0.githubusercontent.com/u/10647082?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mroeschke",
      "html_url": "https://github.com/mroeschke",
      "followers_url": "https://api.github.com/users/mroeschke/followers",
      "following_url": "https://api.github.com/users/mroeschke/following{/other_user}",
      "gists_url": "https://api.github.com/users/mroeschke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mroeschke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mroeschke/subscriptions",
      "organizations_url": "https://api.github.com/users/mroeschke/orgs",
      "repos_url": "https://api.github.com/users/mroeschke/repos",
      "events_url": "https://api.github.com/users/mroeschke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mroeschke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-30T06:22:38Z",
    "updated_at": "2017-08-30T06:22:38Z",
    "author_association": "MEMBER",
    "body": "Addressed your comments @jorisvandenbossche and all green. "
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/326509152",
    "html_url": "https://github.com/pandas-dev/pandas/pull/17109#issuecomment-326509152",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17109",
    "id": 326509152,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNjUwOTE1Mg==",
    "user": {
      "login": "mroeschke",
      "id": 10647082,
      "node_id": "MDQ6VXNlcjEwNjQ3MDgy",
      "avatar_url": "https://avatars0.githubusercontent.com/u/10647082?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mroeschke",
      "html_url": "https://github.com/mroeschke",
      "followers_url": "https://api.github.com/users/mroeschke/followers",
      "following_url": "https://api.github.com/users/mroeschke/following{/other_user}",
      "gists_url": "https://api.github.com/users/mroeschke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mroeschke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mroeschke/subscriptions",
      "organizations_url": "https://api.github.com/users/mroeschke/orgs",
      "repos_url": "https://api.github.com/users/mroeschke/repos",
      "events_url": "https://api.github.com/users/mroeschke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mroeschke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-01T07:20:16Z",
    "updated_at": "2017-09-01T07:20:16Z",
    "author_association": "MEMBER",
    "body": "Fixed the whatsnew and extraneous comments and created additional tests for tz-aware strings and Series with `datetime[ns]` dtypes.\r\n\r\nI also stumbled upon this inconsistency when I was trying to add an additional test for `'datetime[ns, CET]'` dtype:\r\n\r\n```\r\nIn [3]: pd.Series(['2013-01-01 00:00:00'], dtype='datetime64[ns, CET]')\r\nOut[3]: \r\n0   2013-01-01 01:00:00+01:00\r\ndtype: datetime64[ns, CET]\r\n\r\nIn [4]: pd.Series([pd.Timestamp('2013-01-01 00:00:00', tz='CET')])\r\n   ...: \r\nOut[4]: \r\n0   2013-01-01 00:00:00+01:00\r\ndtype: datetime64[ns, CET]\r\n```\r\n\r\nI think these should be consistent and `Out[4]` should be the correct behavior. Thoughts? If so, I can add a new issue and maybe a test in this PR that will xfail due to this. "
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/326565111",
    "html_url": "https://github.com/pandas-dev/pandas/pull/17109#issuecomment-326565111",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17109",
    "id": 326565111,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNjU2NTExMQ==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-01T12:14:20Z",
    "updated_at": "2017-09-01T12:14:20Z",
    "author_association": "MEMBER",
    "body": "I think all outstanding comments were addressed now, so time to finally get this merged :-)\r\n\r\n> I also stumbled upon this inconsistency when I was trying to add an additional test for 'datetime[ns, CET]' dtype:\r\n\r\nI think Out[4] is certainly correct, for the `Out[3]:` I am not really sure. \r\n(but I would certainly keep this for a separate issue / PR)"
  }
]
