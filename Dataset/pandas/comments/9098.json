[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/187205780",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9098#issuecomment-187205780",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9098",
    "id": 187205780,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4NzIwNTc4MA==",
    "user": {
      "login": "VelizarVESSELINOV",
      "id": 8209940,
      "node_id": "MDQ6VXNlcjgyMDk5NDA=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/8209940?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/VelizarVESSELINOV",
      "html_url": "https://github.com/VelizarVESSELINOV",
      "followers_url": "https://api.github.com/users/VelizarVESSELINOV/followers",
      "following_url": "https://api.github.com/users/VelizarVESSELINOV/following{/other_user}",
      "gists_url": "https://api.github.com/users/VelizarVESSELINOV/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/VelizarVESSELINOV/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/VelizarVESSELINOV/subscriptions",
      "organizations_url": "https://api.github.com/users/VelizarVESSELINOV/orgs",
      "repos_url": "https://api.github.com/users/VelizarVESSELINOV/repos",
      "events_url": "https://api.github.com/users/VelizarVESSELINOV/events{/privacy}",
      "received_events_url": "https://api.github.com/users/VelizarVESSELINOV/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-02-22T14:33:09Z",
    "updated_at": "2016-02-22T14:33:09Z",
    "author_association": "NONE",
    "body": ":+1: \n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/333677100",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9098#issuecomment-333677100",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9098",
    "id": 333677100,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMzY3NzEwMA==",
    "user": {
      "login": "krassowski",
      "id": 5832902,
      "node_id": "MDQ6VXNlcjU4MzI5MDI=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/5832902?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/krassowski",
      "html_url": "https://github.com/krassowski",
      "followers_url": "https://api.github.com/users/krassowski/followers",
      "following_url": "https://api.github.com/users/krassowski/following{/other_user}",
      "gists_url": "https://api.github.com/users/krassowski/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/krassowski/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/krassowski/subscriptions",
      "organizations_url": "https://api.github.com/users/krassowski/orgs",
      "repos_url": "https://api.github.com/users/krassowski/repos",
      "events_url": "https://api.github.com/users/krassowski/events{/privacy}",
      "received_events_url": "https://api.github.com/users/krassowski/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-02T21:57:41Z",
    "updated_at": "2017-10-02T21:57:41Z",
    "author_association": "NONE",
    "body": "I wish we could fix this issue. I would like to contribute but the huge codebase looks intimidating.\r\n\r\nHere is what I noticed so far:\r\n\r\n1. `read_csv()` is in essence the same as `read_table(sep=',')`\r\n2. If `usecols` is a list of integers and the `index_col` is included in `usecols` everything works fine\r\n3. If `usecols` is a list of names and the `index_col` is included in `usecols`, we have #12408. This suggests that [`usecols_key`](https://github.com/pandas-dev/pandas/blob/def3bce010eb0eaea2580ad6b6f44c0318314296/pandas/io/parsers.py#L2488) does not know about the `index_col` and fixing this should help to make things right.\r\n4. If we fix the (3), we may reduce both the issues: `usecols=list of names` and `usecols=callable` to `usecols=list of ints`, because [`_evaluate_cols` uses `usecols_key` too](https://github.com/pandas-dev/pandas/blob/def3bce010eb0eaea2580ad6b6f44c0318314296/pandas/io/parsers.py#L2480).\r\n\r\nAnd here is the reduced reproduction test case for (4):\r\n\r\n```python\r\nimport pandas as pd\r\nfrom io import StringIO\r\n\r\ndata = \"\"\"\\\r\nGene\tControl_1\tControl_2\tTumour_1\tTumour_2\r\nTP53\t6\t6\t7\t6\r\nBRCA2\t6\t7\t7\t9\\\r\n\"\"\"\r\nexpected_result = {\r\n    'Control_1': {'TP53': 6, 'BRCA2': 6},\r\n    'Control_2': {'TP53': 6, 'BRCA2': 7},\r\n}\r\n\r\n# when index_col is in usecols: \r\ndf = pd.read_table(StringIO(data), usecols=[0, 1, 2], index_col=0, header=0)\r\nassert df.to_dict() == expected_result   # evaluates to True and passes :)\r\n\r\n# when index_col is not in usecols:\r\ndf = pd.read_table(StringIO(data), usecols=[1, 2], index_col=0, header=0)\r\nassert df.to_dict() == expected_result   # fails :(\r\n```\r\n\r\nFor the latter case df is malformed:\r\n```\r\n           Control_2\r\nControl_1           \r\n6                  6\r\n6                  7\r\n```\r\n\r\nand `to_dict()` returns `{'Control_2': {6: 7}}`.\r\n\r\nHere is my question (@jreback ?): is the latter case (when `index_col` is not in `usecols`) a correct use of `usecols` and `index_col` together? Am I correct to expect that it will work the same as when the  `index_col` is in `usecols` (which does not)?"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/333826449",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9098#issuecomment-333826449",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9098",
    "id": 333826449,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMzgyNjQ0OQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-03T12:29:27Z",
    "updated_at": "2017-10-03T12:29:27Z",
    "author_association": "CONTRIBUTOR",
    "body": "is your example on master? we have had a number of fixes related to ``usecols`` recently.\r\n\r\ncc @gfyoung "
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/333837362",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9098#issuecomment-333837362",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9098",
    "id": 333837362,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMzgzNzM2Mg==",
    "user": {
      "login": "krassowski",
      "id": 5832902,
      "node_id": "MDQ6VXNlcjU4MzI5MDI=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/5832902?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/krassowski",
      "html_url": "https://github.com/krassowski",
      "followers_url": "https://api.github.com/users/krassowski/followers",
      "following_url": "https://api.github.com/users/krassowski/following{/other_user}",
      "gists_url": "https://api.github.com/users/krassowski/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/krassowski/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/krassowski/subscriptions",
      "organizations_url": "https://api.github.com/users/krassowski/orgs",
      "repos_url": "https://api.github.com/users/krassowski/repos",
      "events_url": "https://api.github.com/users/krassowski/events{/privacy}",
      "received_events_url": "https://api.github.com/users/krassowski/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-03T13:13:48Z",
    "updated_at": "2017-10-03T13:13:48Z",
    "author_association": "NONE",
    "body": "I just cloned the repo and tested with `0.21.0.dev0+573.g9e67f4370` and the latter case: \r\n\r\n```python\r\npd.read_table(StringIO(data), usecols=[1, 2], index_col=0, header=0)\r\n```\r\nstill does not work as I would expect.\r\n\r\nImportantly the test cases from #12408 and from this issue run perfectly fine on version from master :)"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/333838317",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9098#issuecomment-333838317",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9098",
    "id": 333838317,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMzgzODMxNw==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-03T13:17:04Z",
    "updated_at": "2017-10-03T13:17:04Z",
    "author_association": "CONTRIBUTOR",
    "body": "@krassowski \r\n\r\nso what cases could we close if we have some validation tests?\r\nyou could also add the above as an xfail tests (and we can then point directly to it).\r\n\r\nwant to do a PR?\r\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/333885007",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9098#issuecomment-333885007",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9098",
    "id": 333885007,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMzg4NTAwNw==",
    "user": {
      "login": "gfyoung",
      "id": 9273653,
      "node_id": "MDQ6VXNlcjkyNzM2NTM=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/9273653?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gfyoung",
      "html_url": "https://github.com/gfyoung",
      "followers_url": "https://api.github.com/users/gfyoung/followers",
      "following_url": "https://api.github.com/users/gfyoung/following{/other_user}",
      "gists_url": "https://api.github.com/users/gfyoung/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gfyoung/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gfyoung/subscriptions",
      "organizations_url": "https://api.github.com/users/gfyoung/orgs",
      "repos_url": "https://api.github.com/users/gfyoung/repos",
      "events_url": "https://api.github.com/users/gfyoung/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gfyoung/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-03T15:47:31Z",
    "updated_at": "2017-10-03T15:48:21Z",
    "author_association": "MEMBER",
    "body": "`usecols` is a very powerful parameter.  It has a lot of say as to how the other parameters behave because it tells us the columns on which to operate in our data.  The reproducible examples <a href=\"https://github.com/pandas-dev/pandas/issues/9098#issuecomment-333677100\">above</a> fail to strike me as buggy in fact.\r\n\r\n`usecols=[1, 2]` means the data you're using is just columns 1 and 2.  Thus, `index_col=0` refers to the 1st column in your group of selected columns, column 1.\r\n\r\nThen again, given the confusion, we should either make this clear that `usecols` is a first-class parameter OR reconsider this behavior for subsequent versions."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/333895150",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9098#issuecomment-333895150",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9098",
    "id": 333895150,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMzg5NTE1MA==",
    "user": {
      "login": "krassowski",
      "id": 5832902,
      "node_id": "MDQ6VXNlcjU4MzI5MDI=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/5832902?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/krassowski",
      "html_url": "https://github.com/krassowski",
      "followers_url": "https://api.github.com/users/krassowski/followers",
      "following_url": "https://api.github.com/users/krassowski/following{/other_user}",
      "gists_url": "https://api.github.com/users/krassowski/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/krassowski/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/krassowski/subscriptions",
      "organizations_url": "https://api.github.com/users/krassowski/orgs",
      "repos_url": "https://api.github.com/users/krassowski/repos",
      "events_url": "https://api.github.com/users/krassowski/events{/privacy}",
      "received_events_url": "https://api.github.com/users/krassowski/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-03T16:21:12Z",
    "updated_at": "2017-10-03T16:21:12Z",
    "author_association": "NONE",
    "body": "@gfyoung that is really what I started to think after I submitted my comment. Thanks for clarification.\r\n\r\nProbably a sentence or two in the docs could improve the situation significantly."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/333896604",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9098#issuecomment-333896604",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9098",
    "id": 333896604,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMzg5NjYwNA==",
    "user": {
      "login": "krassowski",
      "id": 5832902,
      "node_id": "MDQ6VXNlcjU4MzI5MDI=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/5832902?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/krassowski",
      "html_url": "https://github.com/krassowski",
      "followers_url": "https://api.github.com/users/krassowski/followers",
      "following_url": "https://api.github.com/users/krassowski/following{/other_user}",
      "gists_url": "https://api.github.com/users/krassowski/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/krassowski/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/krassowski/subscriptions",
      "organizations_url": "https://api.github.com/users/krassowski/orgs",
      "repos_url": "https://api.github.com/users/krassowski/repos",
      "events_url": "https://api.github.com/users/krassowski/events{/privacy}",
      "received_events_url": "https://api.github.com/users/krassowski/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-03T16:26:23Z",
    "updated_at": "2017-10-03T16:26:23Z",
    "author_association": "NONE",
    "body": "> want to do a PR?\r\n\r\n@jreback, given what @gfyoung wrote I start to think that the changes should be made to documentation and the xfail test is not really needed. Is it?"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/333901912",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9098#issuecomment-333901912",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9098",
    "id": 333901912,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMzkwMTkxMg==",
    "user": {
      "login": "gfyoung",
      "id": 9273653,
      "node_id": "MDQ6VXNlcjkyNzM2NTM=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/9273653?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gfyoung",
      "html_url": "https://github.com/gfyoung",
      "followers_url": "https://api.github.com/users/gfyoung/followers",
      "following_url": "https://api.github.com/users/gfyoung/following{/other_user}",
      "gists_url": "https://api.github.com/users/gfyoung/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gfyoung/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gfyoung/subscriptions",
      "organizations_url": "https://api.github.com/users/gfyoung/orgs",
      "repos_url": "https://api.github.com/users/gfyoung/repos",
      "events_url": "https://api.github.com/users/gfyoung/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gfyoung/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-03T16:30:52Z",
    "updated_at": "2017-10-03T16:30:52Z",
    "author_association": "MEMBER",
    "body": "@krassowski : Add the test anyways (more tests are good), just without `xfail`.  Doc changes alongside that will be perfect for a PR."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/334829711",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9098#issuecomment-334829711",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9098",
    "id": 334829711,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzNDgyOTcxMQ==",
    "user": {
      "login": "laserson",
      "id": 118141,
      "node_id": "MDQ6VXNlcjExODE0MQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/118141?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laserson",
      "html_url": "https://github.com/laserson",
      "followers_url": "https://api.github.com/users/laserson/followers",
      "following_url": "https://api.github.com/users/laserson/following{/other_user}",
      "gists_url": "https://api.github.com/users/laserson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laserson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laserson/subscriptions",
      "organizations_url": "https://api.github.com/users/laserson/orgs",
      "repos_url": "https://api.github.com/users/laserson/repos",
      "events_url": "https://api.github.com/users/laserson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laserson/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-06T18:07:52Z",
    "updated_at": "2017-10-06T18:07:52Z",
    "author_association": "NONE",
    "body": "Just ran into this and reported here:\r\nhttps://github.com/pandas-dev/pandas/issues/2654#issuecomment-334829423"
  }
]
