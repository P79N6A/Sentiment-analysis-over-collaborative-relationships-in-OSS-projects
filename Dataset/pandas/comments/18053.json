[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/340883122",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18053#issuecomment-340883122",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18053",
    "id": 340883122,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0MDg4MzEyMg==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-31T19:37:37Z",
    "updated_at": "2017-10-31T19:37:37Z",
    "author_association": "CONTRIBUTOR",
    "body": "of course, Periods are object dtypes. "
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/340883815",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18053#issuecomment-340883815",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18053",
    "id": 340883815,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0MDg4MzgxNQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-31T19:40:09Z",
    "updated_at": "2017-10-31T19:40:09Z",
    "author_association": "CONTRIBUTOR",
    "body": "well its also related to the offset caching issues that @jbrockmendel has been looking at\r\n```\r\nncalls  tottime  percall  cumtime  percall filename:lineno(function)\r\n   400016    1.299    0.000    1.859    0.000 offsets.py:297(_params)\r\n   400016    0.273    0.000    0.273    0.000 offsets.py:302(<listcomp>)\r\n   200008    0.242    0.000    2.166    0.000 offsets.py:352(__eq__)\r\n        1    0.175    0.175    2.596    2.596 {method 'get_labels' of 'pandas._libs.hashtable.PyObjectHashTable' objects}\r\n   200021    0.137    0.000    0.186    0.000 offsets.py:487(freqstr)\r\n   400016    0.129    0.000    0.129    0.000 {built-in method builtins.sorted}\r\n  1200048    0.098    0.000    0.098    0.000 {method 'items' of 'dict' objects}\r\n   200008    0.068    0.000    2.234    0.000 offsets.py:366(__ne__)\r\n   400334    0.065    0.000    0.065    0.000 {built-in method builtins.isinstance}\r\n   400016    0.060    0.000    0.060    0.000 {built-in method builtins.vars}\r\n   200021    0.029    0.000    0.029    0.000 offsets.py:483(rule_code)\r\n   200021    0.021    0.000    0.021    0.000 offsets.py:508(_offset_str)\r\n ```"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/340884420",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18053#issuecomment-340884420",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18053",
    "id": 340884420,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0MDg4NDQyMA==",
    "user": {
      "login": "jbrockmendel",
      "id": 8078968,
      "node_id": "MDQ6VXNlcjgwNzg5Njg=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/8078968?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jbrockmendel",
      "html_url": "https://github.com/jbrockmendel",
      "followers_url": "https://api.github.com/users/jbrockmendel/followers",
      "following_url": "https://api.github.com/users/jbrockmendel/following{/other_user}",
      "gists_url": "https://api.github.com/users/jbrockmendel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jbrockmendel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jbrockmendel/subscriptions",
      "organizations_url": "https://api.github.com/users/jbrockmendel/orgs",
      "repos_url": "https://api.github.com/users/jbrockmendel/repos",
      "events_url": "https://api.github.com/users/jbrockmendel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jbrockmendel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-31T19:42:32Z",
    "updated_at": "2017-10-31T19:42:32Z",
    "author_association": "MEMBER",
    "body": "We're a few steps away from having this fixed.  In the interim the workaround I've been using is casting to strings, then groupby/sort/whatever, then cast back to Period."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/340893626",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18053#issuecomment-340893626",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18053",
    "id": 340893626,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0MDg5MzYyNg==",
    "user": {
      "login": "nmusolino",
      "id": 3150861,
      "node_id": "MDQ6VXNlcjMxNTA4NjE=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/3150861?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nmusolino",
      "html_url": "https://github.com/nmusolino",
      "followers_url": "https://api.github.com/users/nmusolino/followers",
      "following_url": "https://api.github.com/users/nmusolino/following{/other_user}",
      "gists_url": "https://api.github.com/users/nmusolino/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nmusolino/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nmusolino/subscriptions",
      "organizations_url": "https://api.github.com/users/nmusolino/orgs",
      "repos_url": "https://api.github.com/users/nmusolino/repos",
      "events_url": "https://api.github.com/users/nmusolino/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nmusolino/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-31T20:17:38Z",
    "updated_at": "2017-10-31T20:19:39Z",
    "author_association": "CONTRIBUTOR",
    "body": "@jreback, it is fine that a series of pandas Periods has dtype `object`.  \r\n\r\nBut grouping by `pandas.Period` objects is about 300 times slower than grouping by other series with `dtype: object`, such as series of `datetime.date` objects or simple tuples.   (I'm comparing 2.4 seconds to about 7 milliseconds; see the second timing invocation in the original report, or the example below.)\r\n\r\n```\r\nIn [25]: df['month_tuples'] = months\r\n\r\nIn [26]: df[['month_tuples', 'month_periods']].head()\r\nOut[26]:\r\n  month_tuples month_periods\r\n0    (2017, 1)       2017-01\r\n1    (2017, 2)       2017-02\r\n2    (2017, 3)       2017-03\r\n3    (2017, 4)       2017-04\r\n4    (2017, 5)       2017-05\r\n\r\nIn [27]: %timeit  df.groupby('month_tuples')['x'].sum()\r\n100 loops, best of 3: 7.18 ms per loop\r\n\r\nIn [28]: %timeit  df.groupby('month_periods')['x'].sum()\r\n1 loop, best of 3: 2.36 s per loop\r\n\r\nIn [29]: df[['month_tuples', 'month_periods']].dtypes\r\nOut[29]:\r\nmonth_tuples     object\r\nmonth_periods    object\r\ndtype: object\r\n```"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/340894718",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18053#issuecomment-340894718",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18053",
    "id": 340894718,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0MDg5NDcxOA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-31T20:21:47Z",
    "updated_at": "2017-10-31T20:21:47Z",
    "author_association": "CONTRIBUTOR",
    "body": "@nmusolino and you are welcome to have a look"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/433056098",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18053#issuecomment-433056098",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18053",
    "id": 433056098,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMzA1NjA5OA==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-25T13:43:06Z",
    "updated_at": "2018-10-25T13:43:06Z",
    "author_association": "CONTRIBUTOR",
    "body": "Some updated timings.\r\n\r\n```\r\nIn [2]: %timeit  df.groupby('month_int')['x'].sum()\r\n1.82 ms ± 65.2 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)\r\n\r\nIn [3]: %timeit  df.groupby('month_pydates')['x'].sum()\r\n6.13 ms ± 101 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)\r\n\r\nIn [2]: %timeit  df.groupby('month_periods')['x'].sum()\r\n161 ms ± 3.61 ms per loop (mean ± std. dev. of 7 runs, 10 loops each)\r\n```\r\n\r\nOn the PeriodArray PR, we're down to\r\n\r\n```python\r\nIn [4]: %timeit  df.groupby('month_periods')['x'].sum()\r\n6.2 ms ± 104 µs per loop (mean ± std. dev. of 7 runs, 100 loops each) \r\n```\r\n\r\nWhich I think is good enough to call this closed, though @nmusolino if you want to do more optimizations after #22862 lands, then feel free."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/433229792",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18053#issuecomment-433229792",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18053",
    "id": 433229792,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMzIyOTc5Mg==",
    "user": {
      "login": "nmusolino",
      "id": 3150861,
      "node_id": "MDQ6VXNlcjMxNTA4NjE=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/3150861?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nmusolino",
      "html_url": "https://github.com/nmusolino",
      "followers_url": "https://api.github.com/users/nmusolino/followers",
      "following_url": "https://api.github.com/users/nmusolino/following{/other_user}",
      "gists_url": "https://api.github.com/users/nmusolino/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nmusolino/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nmusolino/subscriptions",
      "organizations_url": "https://api.github.com/users/nmusolino/orgs",
      "repos_url": "https://api.github.com/users/nmusolino/repos",
      "events_url": "https://api.github.com/users/nmusolino/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nmusolino/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-25T22:42:46Z",
    "updated_at": "2018-10-25T22:42:46Z",
    "author_association": "CONTRIBUTOR",
    "body": "That's great news, thank you very much!"
  }
]
