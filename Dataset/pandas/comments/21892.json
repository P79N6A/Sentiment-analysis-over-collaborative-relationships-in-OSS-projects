[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/404821166",
    "html_url": "https://github.com/pandas-dev/pandas/issues/21892#issuecomment-404821166",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/21892",
    "id": 404821166,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNDgyMTE2Ng==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-13T12:37:04Z",
    "updated_at": "2018-07-13T12:37:04Z",
    "author_association": "CONTRIBUTOR",
    "body": "I suspect that was written before categorical were implemented.\r\n\r\nSomeone could fix this if they want, but we generally recommend the `table` orient if you need to roundtrip DataFrames\r\n\r\n```python\r\nIn [11]: df = pd.DataFrame({\"A\": pd.Categorical(['a', 'b', 'c'])})\r\n\r\nIn [12]: pd.read_json(df.to_json(orient='table'), orient='table').dtypes\r\nOut[12]:\r\nA    category\r\ndtype: object\r\n```\r\n\r\nor converting your strings to categoricals later if you don't control the source."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/404825057",
    "html_url": "https://github.com/pandas-dev/pandas/issues/21892#issuecomment-404825057",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/21892",
    "id": 404825057,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNDgyNTA1Nw==",
    "user": {
      "login": "alessandrobenedetti",
      "id": 513195,
      "node_id": "MDQ6VXNlcjUxMzE5NQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/513195?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alessandrobenedetti",
      "html_url": "https://github.com/alessandrobenedetti",
      "followers_url": "https://api.github.com/users/alessandrobenedetti/followers",
      "following_url": "https://api.github.com/users/alessandrobenedetti/following{/other_user}",
      "gists_url": "https://api.github.com/users/alessandrobenedetti/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alessandrobenedetti/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alessandrobenedetti/subscriptions",
      "organizations_url": "https://api.github.com/users/alessandrobenedetti/orgs",
      "repos_url": "https://api.github.com/users/alessandrobenedetti/repos",
      "events_url": "https://api.github.com/users/alessandrobenedetti/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alessandrobenedetti/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-13T12:54:23Z",
    "updated_at": "2018-07-13T12:54:23Z",
    "author_association": "NONE",
    "body": "Thanks Tom!\r\nI appreciate the work-around but I still believe it is a bug ( low priority of course).\r\n\r\nIn my case the Json source is external, imagine it as a log file.\r\nConverting the columns immediately after the parsing would be a fine option.\r\nI wanted to reduce the memory output as much as possible before starting the processing steps.\r\n\r\nThis should do the trick for the single valued categorical : \r\ninteractions[col] = interactions[col].astype('category')\r\n\r\nWhat about multi valued categoricals ? Where the value of a cell is a list of categories ?\r\nsuch as : ['item1','item2'].\r\nConsidering the fact that I later one hot encode them in separate columns, would be memory efficient to make them list of categories as soon as the Json parsing finishes?"
  }
]
