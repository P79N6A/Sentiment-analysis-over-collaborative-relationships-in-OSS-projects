[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/50234911",
    "html_url": "https://github.com/pandas-dev/pandas/issues/7762#issuecomment-50234911",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/7762",
    "id": 50234911,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwMjM0OTEx",
    "user": {
      "login": "danielballan",
      "id": 2279598,
      "node_id": "MDQ6VXNlcjIyNzk1OTg=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/2279598?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/danielballan",
      "html_url": "https://github.com/danielballan",
      "followers_url": "https://api.github.com/users/danielballan/followers",
      "following_url": "https://api.github.com/users/danielballan/following{/other_user}",
      "gists_url": "https://api.github.com/users/danielballan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/danielballan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/danielballan/subscriptions",
      "organizations_url": "https://api.github.com/users/danielballan/orgs",
      "repos_url": "https://api.github.com/users/danielballan/repos",
      "events_url": "https://api.github.com/users/danielballan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/danielballan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-07-26T14:03:58Z",
    "updated_at": "2014-07-26T14:03:58Z",
    "author_association": "CONTRIBUTOR",
    "body": "I see what you mean. Specifically, I see three different problems here:\n1. Pandas is confused by the nested headers. Pass `skiprows=2` and set the column names yourself.\n2. Pandas incorrectly tries to interpret some columns as dates, producing columns filled mostly with `NaT`. Passing `infer_types=False` fixes this. That option is marked for removal in version 0.14, but it still works for me in 0.14.1. I am not sure what the plans are there, but this example seems to illustrate that there is a still a need for this functionality.\n3. Wikipedia lets you interactively sort by the columns by incorporating a jquery `sortkey` in the table. This confuses the HTML parser in some instances (rank, land, water). It is mistakenly parsing the table-sorting code as part of the text. In the result, you can see the correct rank number in there, but it is prefixed by strings like `!B9993068528194`. Pandas string processing tools can recover this. Fixing the underlying parsing issue is probably up to the HTML parsers (html5lib, lxml, bs4) and not in scope for pandas.\n\nSo, to get your work done, add the kwargs `skiprows=2, infer_types=False`, and use string methods like `Series.str.extract` or `Series.str.split` to fix the rank, land, and water columns.\n\nCan any other pandas folks comment on the plans for `inter_types`?\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/50235166",
    "html_url": "https://github.com/pandas-dev/pandas/issues/7762#issuecomment-50235166",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/7762",
    "id": 50235166,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwMjM1MTY2",
    "user": {
      "login": "haraldschilly",
      "id": 207405,
      "node_id": "MDQ6VXNlcjIwNzQwNQ==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/207405?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/haraldschilly",
      "html_url": "https://github.com/haraldschilly",
      "followers_url": "https://api.github.com/users/haraldschilly/followers",
      "following_url": "https://api.github.com/users/haraldschilly/following{/other_user}",
      "gists_url": "https://api.github.com/users/haraldschilly/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/haraldschilly/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/haraldschilly/subscriptions",
      "organizations_url": "https://api.github.com/users/haraldschilly/orgs",
      "repos_url": "https://api.github.com/users/haraldschilly/repos",
      "events_url": "https://api.github.com/users/haraldschilly/events{/privacy}",
      "received_events_url": "https://api.github.com/users/haraldschilly/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-07-26T14:13:40Z",
    "updated_at": "2014-07-26T14:13:40Z",
    "author_association": "NONE",
    "body": "Thanks for looking into this. After reporting this I dug a bit into this and also noticed those odd sort columns and so on. So, well, it's not really up to pandas, but indeed part of what there is. On the other hand, if this \"table pattern\" is indeed very common to wikipedia, it could be worthwhile to implement a \"wikipedia\" mode to the parser? (Which is activated automatically for `*.wikipeida.org` URLs) â€¦ Just an idea, it would be cool, that's all :one: :up: :grinning: \n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/50235378",
    "html_url": "https://github.com/pandas-dev/pandas/issues/7762#issuecomment-50235378",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/7762",
    "id": 50235378,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwMjM1Mzc4",
    "user": {
      "login": "cpcloud",
      "id": 417981,
      "node_id": "MDQ6VXNlcjQxNzk4MQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/417981?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cpcloud",
      "html_url": "https://github.com/cpcloud",
      "followers_url": "https://api.github.com/users/cpcloud/followers",
      "following_url": "https://api.github.com/users/cpcloud/following{/other_user}",
      "gists_url": "https://api.github.com/users/cpcloud/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cpcloud/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cpcloud/subscriptions",
      "organizations_url": "https://api.github.com/users/cpcloud/orgs",
      "repos_url": "https://api.github.com/users/cpcloud/repos",
      "events_url": "https://api.github.com/users/cpcloud/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cpcloud/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-07-26T14:21:09Z",
    "updated_at": "2014-07-26T14:21:09Z",
    "author_association": "MEMBER",
    "body": "Hm `infer_types` is _supposed_ to be obviated by using `TextParser` (this is where `read_csv` goes eventually), but something is amiss here, I'm not totally sure why the dates are so \"greedy\". Let me take a look.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/50236119",
    "html_url": "https://github.com/pandas-dev/pandas/issues/7762#issuecomment-50236119",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/7762",
    "id": 50236119,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwMjM2MTE5",
    "user": {
      "login": "cpcloud",
      "id": 417981,
      "node_id": "MDQ6VXNlcjQxNzk4MQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/417981?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cpcloud",
      "html_url": "https://github.com/cpcloud",
      "followers_url": "https://api.github.com/users/cpcloud/followers",
      "following_url": "https://api.github.com/users/cpcloud/following{/other_user}",
      "gists_url": "https://api.github.com/users/cpcloud/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cpcloud/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cpcloud/subscriptions",
      "organizations_url": "https://api.github.com/users/cpcloud/orgs",
      "repos_url": "https://api.github.com/users/cpcloud/repos",
      "events_url": "https://api.github.com/users/cpcloud/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cpcloud/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-07-26T14:49:39Z",
    "updated_at": "2014-07-26T14:49:39Z",
    "author_association": "MEMBER",
    "body": "@danielballan thanks for the explanation!\n\n@danielballan @haraldschilly \n\ni put up a pr to fix this ... #7851, check it out at your leisure\n"
  }
]
