[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/292776152",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15947#issuecomment-292776152",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15947",
    "id": 292776152,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5Mjc3NjE1Mg==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-04-09T10:00:16Z",
    "updated_at": "2017-04-09T10:00:16Z",
    "author_association": "MEMBER",
    "body": "What would be the difference with just sorting it by those three columns? `df.sort_values(['A', 'B', 'C'])` ?\r\n\r\n(one possible difference I see is that you could retain the original order in `'A'` if you passed `sort=False` to the groupby, but not sure that is worth it)"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/292787218",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15947#issuecomment-292787218",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15947",
    "id": 292787218,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5Mjc4NzIxOA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-04-09T13:53:57Z",
    "updated_at": "2017-04-09T13:53:57Z",
    "author_association": "CONTRIBUTOR",
    "body": "@jorisvandenbossche NO, that's the point, it would basically be a convenience method to avoid exactly this problem. alternatively maybe we could just warn/raise.\r\n\r\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/292787705",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15947#issuecomment-292787705",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15947",
    "id": 292787705,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5Mjc4NzcwNQ==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-04-09T14:02:11Z",
    "updated_at": "2017-04-09T14:02:11Z",
    "author_association": "MEMBER",
    "body": "What do you mean with warn/raise? What is there to warn for?"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/292789707",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15947#issuecomment-292789707",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15947",
    "id": 292789707,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5Mjc4OTcwNw==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-04-09T14:37:51Z",
    "updated_at": "2017-04-09T14:37:51Z",
    "author_association": "CONTRIBUTOR",
    "body": "I mean sorting after grouping is non-performant, you should always sort *before*. we certainly *can* fix it here (by providing a convenience method). If we choose *not* to fix it directly, then I think showing a ``PerformanceWarning`` is appropriate (though maybe just fix it)."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/338199820",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15947#issuecomment-338199820",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15947",
    "id": 338199820,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzODE5OTgyMA==",
    "user": {
      "login": "randomgambit",
      "id": 8282510,
      "node_id": "MDQ6VXNlcjgyODI1MTA=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/8282510?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/randomgambit",
      "html_url": "https://github.com/randomgambit",
      "followers_url": "https://api.github.com/users/randomgambit/followers",
      "following_url": "https://api.github.com/users/randomgambit/following{/other_user}",
      "gists_url": "https://api.github.com/users/randomgambit/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/randomgambit/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/randomgambit/subscriptions",
      "organizations_url": "https://api.github.com/users/randomgambit/orgs",
      "repos_url": "https://api.github.com/users/randomgambit/repos",
      "events_url": "https://api.github.com/users/randomgambit/events{/privacy}",
      "received_events_url": "https://api.github.com/users/randomgambit/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-20T13:01:45Z",
    "updated_at": "2017-10-20T13:01:45Z",
    "author_association": "NONE",
    "body": "@jreback @jorisvandenbossche its funny because I was thinking about this problem this morning. \r\n\r\nHere is a very common set up. A large dataset contains news (identified by a `story_id`) and for the same news you have several entities (identified by an `entity_id`): IBM, APPLE, etc.\r\n\r\nWhat you wanna do is get the most **relevant** entity for each news. That is:\r\n\r\n`df.groupby('story_id').apply(lambda x:  x.sort_values(by = 'relevance', ascending = False))`\r\n\r\nfollowed by a `drop_duplicates(subset ='story_id', keep= 'first')`\r\n\r\nvery common use case"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/338206602",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15947#issuecomment-338206602",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15947",
    "id": 338206602,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzODIwNjYwMg==",
    "user": {
      "login": "randomgambit",
      "id": 8282510,
      "node_id": "MDQ6VXNlcjgyODI1MTA=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/8282510?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/randomgambit",
      "html_url": "https://github.com/randomgambit",
      "followers_url": "https://api.github.com/users/randomgambit/followers",
      "following_url": "https://api.github.com/users/randomgambit/following{/other_user}",
      "gists_url": "https://api.github.com/users/randomgambit/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/randomgambit/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/randomgambit/subscriptions",
      "organizations_url": "https://api.github.com/users/randomgambit/orgs",
      "repos_url": "https://api.github.com/users/randomgambit/repos",
      "events_url": "https://api.github.com/users/randomgambit/events{/privacy}",
      "received_events_url": "https://api.github.com/users/randomgambit/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-20T13:29:15Z",
    "updated_at": "2017-10-20T13:29:15Z",
    "author_association": "NONE",
    "body": "I confirm this is veeeeery slow :("
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/338210717",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15947#issuecomment-338210717",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15947",
    "id": 338210717,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzODIxMDcxNw==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-20T13:44:29Z",
    "updated_at": "2017-10-20T13:44:29Z",
    "author_association": "MEMBER",
    "body": "And again, why don't you use `df.sort_values(['story_id', 'relevance'])` ?"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/338211115",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15947#issuecomment-338211115",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15947",
    "id": 338211115,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzODIxMTExNQ==",
    "user": {
      "login": "randomgambit",
      "id": 8282510,
      "node_id": "MDQ6VXNlcjgyODI1MTA=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/8282510?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/randomgambit",
      "html_url": "https://github.com/randomgambit",
      "followers_url": "https://api.github.com/users/randomgambit/followers",
      "following_url": "https://api.github.com/users/randomgambit/following{/other_user}",
      "gists_url": "https://api.github.com/users/randomgambit/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/randomgambit/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/randomgambit/subscriptions",
      "organizations_url": "https://api.github.com/users/randomgambit/orgs",
      "repos_url": "https://api.github.com/users/randomgambit/repos",
      "events_url": "https://api.github.com/users/randomgambit/events{/privacy}",
      "received_events_url": "https://api.github.com/users/randomgambit/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-20T13:45:53Z",
    "updated_at": "2017-10-20T13:45:53Z",
    "author_association": "NONE",
    "body": "yes, I did. but I think @jreback 's point is that, while conceptually equivalent, the `groupby` solution is INSANELY slow :D"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/338215162",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15947#issuecomment-338215162",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15947",
    "id": 338215162,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzODIxNTE2Mg==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-20T14:00:44Z",
    "updated_at": "2017-10-20T14:00:44Z",
    "author_association": "MEMBER",
    "body": "OK, but my point originally was: if you can simply use `sort_values`, is there a *need* to add it to `groupby` ? (and thus when adding, doing effort to make sure it is not insanely slow)"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/338215647",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15947#issuecomment-338215647",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15947",
    "id": 338215647,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzODIxNTY0Nw==",
    "user": {
      "login": "randomgambit",
      "id": 8282510,
      "node_id": "MDQ6VXNlcjgyODI1MTA=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/8282510?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/randomgambit",
      "html_url": "https://github.com/randomgambit",
      "followers_url": "https://api.github.com/users/randomgambit/followers",
      "following_url": "https://api.github.com/users/randomgambit/following{/other_user}",
      "gists_url": "https://api.github.com/users/randomgambit/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/randomgambit/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/randomgambit/subscriptions",
      "organizations_url": "https://api.github.com/users/randomgambit/orgs",
      "repos_url": "https://api.github.com/users/randomgambit/repos",
      "events_url": "https://api.github.com/users/randomgambit/events{/privacy}",
      "received_events_url": "https://api.github.com/users/randomgambit/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-20T14:02:28Z",
    "updated_at": "2017-10-20T14:02:28Z",
    "author_association": "NONE",
    "body": "in my opinion, nope. just throw some performance warning like : \"hey dummy what are you doing??? just use sort_values!!!! \"\r\n\r\n;-)"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/389148905",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15947#issuecomment-389148905",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15947",
    "id": 389148905,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4OTE0ODkwNQ==",
    "user": {
      "login": "jacquespeeters",
      "id": 15957925,
      "node_id": "MDQ6VXNlcjE1OTU3OTI1",
      "avatar_url": "https://avatars1.githubusercontent.com/u/15957925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jacquespeeters",
      "html_url": "https://github.com/jacquespeeters",
      "followers_url": "https://api.github.com/users/jacquespeeters/followers",
      "following_url": "https://api.github.com/users/jacquespeeters/following{/other_user}",
      "gists_url": "https://api.github.com/users/jacquespeeters/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jacquespeeters/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jacquespeeters/subscriptions",
      "organizations_url": "https://api.github.com/users/jacquespeeters/orgs",
      "repos_url": "https://api.github.com/users/jacquespeeters/repos",
      "events_url": "https://api.github.com/users/jacquespeeters/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jacquespeeters/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-15T12:29:24Z",
    "updated_at": "2018-05-15T12:29:24Z",
    "author_association": "NONE",
    "body": "Because the sum of all sorting' complexity inside groups is lower than the sorting' complexity on the whole dataset. `groupby` complexity doesn't change.\r\n\r\nThere is a huge performance difference when dataset is big, and groups small. It is right now slower, not because of the complexity, but because of `apply()`.\r\n\r\nA good way to compare both operations complexity would be : \r\n```\r\ndf.groupby('story_id').apply(lambda x: x.sort_values(by = 'relevance', ascending = False))\r\ndf.apply(lambda x: x.sort_values(by = 'relevance', ascending = False)).groupby('story_id')\r\n```"
  }
]
