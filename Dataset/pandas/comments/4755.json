[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/23873020",
    "html_url": "https://github.com/pandas-dev/pandas/pull/4755#issuecomment-23873020",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/4755",
    "id": 23873020,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzODczMDIw",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-09-05T14:46:59Z",
    "updated_at": "2013-09-05T14:46:59Z",
    "author_association": "CONTRIBUTOR",
    "body": "@jtratner @cpcloud \n\ncan you guys have a look at this under py3. There are some 'errors' when I try to read a py2.7 in the compatibility mode (e.g. when I have to 'fake' a ndarray sub-class to make it work). Works fine for py2 reading py2 and py3 reading py3. But get a very strange error when reading py2 with py3.\n\nIt just prints the output for now.\n\nTry this (you can also drop into the debugger at the print statement as well)\n\n```\n[goat-jreback-~/pandas] nosetests-3.2 build/lib.linux-x86_64-3.2/pandas/io/tests/test_pickle.py -s\n\n(<class 'TypeError'>, TypeError('initializing object must be a string',), <traceback object at 0x456b8c0>)\n<built-in function scalar> (dtype('float64'), '\\x00\\x00\\x00\\x00\\x00\\x00ø\\x7f')\n/mnt/home/jreback/pandas/build/lib.linux-x86_64-3.2/pandas/io/tests/data/legacy_pickle/0.10.1/AMD64_windows_2.7.3.pickle : initializing object must be a string\n(<class 'TypeError'>, TypeError('initializing object must be a string',), <traceback object at 0x456b908>)\n<built-in function scalar> (dtype('float64'), '\\x00\\x00\\x00\\x00\\x00\\x00ø\\x7f')\n/mnt/home/jreback/pandas/build/lib.linux-x86_64-3.2/pandas/io/tests/data/legacy_pickle/0.10.1/x86_64_linux_2.7.3.pickle : initializing object must be a string\n./mnt/home/jreback/pandas/build/lib.linux-x86_64-3.2/pandas/io/tests/data/legacy_pickle/0.11.0/test.pickle : 'numpy.int64' object has no attribute 'items'\n(<class 'TypeError'>, TypeError('initializing object must be a string',), <traceback object at 0x457e3b0>)\n<built-in function scalar> (dtype('float64'), '\\x00\\x00\\x00\\x00\\x00\\x00ø\\x7f')\n/mnt/home/jreback/pandas/build/lib.linux-x86_64-3.2/pandas/io/tests/data/legacy_pickle/0.11.0/x86_64_linux_2.7.3.pickle : initializing object must be a string\n.(<class 'TypeError'>, TypeError('initializing object must be a string',), <traceback object at 0x45c4ef0>)\n<built-in function scalar> (dtype('float64'), '\\x00\\x00\\x00\\x00\\x00\\x00ø\\x7f')\n/mnt/home/jreback/pandas/build/lib.linux-x86_64-3.2/pandas/io/tests/data/legacy_pickle/0.12.0/0.12.0_i686_linux_2.7.3.pickle : initializing object must be a string\n(<class 'TypeError'>, TypeError('initializing object must be a string',), <traceback object at 0x45c4f80>)\n<built-in function scalar> (dtype('float64'), '\\x00\\x00\\x00\\x00\\x00\\x00ø\\x7f')\n/mnt/home/jreback/pandas/build/lib.linux-x86_64-3.2/pandas/io/tests/data/legacy_pickle/0.12.0/0.12.0_x86_64_linux_2.7.3.pickle : initializing object must be a string\n(<class 'TypeError'>, TypeError('initializing object must be a string',), <traceback object at 0x45c4b48>)\n<built-in function scalar> (dtype('float64'), '\\x00\\x00\\x00\\x00\\x00\\x00ø\\x7f')\n/mnt/home/jreback/pandas/build/lib.linux-x86_64-3.2/pandas/io/tests/data/legacy_pickle/0.12.0/x86_64_linux_2.7.3.pickle : initializing object must be a string\n..\n----------------------------------------------------------------------\nRan 4 tests in 0.125s\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/23913391",
    "html_url": "https://github.com/pandas-dev/pandas/pull/4755#issuecomment-23913391",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/4755",
    "id": 23913391,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzOTEzMzkx",
    "user": {
      "login": "jtratner",
      "id": 1598379,
      "node_id": "MDQ6VXNlcjE1OTgzNzk=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1598379?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtratner",
      "html_url": "https://github.com/jtratner",
      "followers_url": "https://api.github.com/users/jtratner/followers",
      "following_url": "https://api.github.com/users/jtratner/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtratner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtratner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtratner/subscriptions",
      "organizations_url": "https://api.github.com/users/jtratner/orgs",
      "repos_url": "https://api.github.com/users/jtratner/repos",
      "events_url": "https://api.github.com/users/jtratner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtratner/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-09-06T01:25:27Z",
    "updated_at": "2013-09-06T01:25:27Z",
    "author_association": "CONTRIBUTOR",
    "body": "I'll definitely take a look...\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/23932693",
    "html_url": "https://github.com/pandas-dev/pandas/pull/4755#issuecomment-23932693",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/4755",
    "id": 23932693,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzOTMyNjkz",
    "user": {
      "login": "jtratner",
      "id": 1598379,
      "node_id": "MDQ6VXNlcjE1OTgzNzk=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1598379?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtratner",
      "html_url": "https://github.com/jtratner",
      "followers_url": "https://api.github.com/users/jtratner/followers",
      "following_url": "https://api.github.com/users/jtratner/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtratner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtratner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtratner/subscriptions",
      "organizations_url": "https://api.github.com/users/jtratner/orgs",
      "repos_url": "https://api.github.com/users/jtratner/repos",
      "events_url": "https://api.github.com/users/jtratner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtratner/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-09-06T11:01:57Z",
    "updated_at": "2013-09-06T11:01:57Z",
    "author_association": "CONTRIBUTOR",
    "body": "@jreback the test cases are setup now such that they never fail :P (you need to add a `raise` after the print exception part or something...\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/23933442",
    "html_url": "https://github.com/pandas-dev/pandas/pull/4755#issuecomment-23933442",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/4755",
    "id": 23933442,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzOTMzNDQy",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-09-06T11:20:29Z",
    "updated_at": "2013-09-06T11:20:29Z",
    "author_association": "CONTRIBUTOR",
    "body": "that was on purpose, so u could look\n\nany idea about the unpickle error?\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/23934405",
    "html_url": "https://github.com/pandas-dev/pandas/pull/4755#issuecomment-23934405",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/4755",
    "id": 23934405,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzOTM0NDA1",
    "user": {
      "login": "jtratner",
      "id": 1598379,
      "node_id": "MDQ6VXNlcjE1OTgzNzk=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1598379?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtratner",
      "html_url": "https://github.com/jtratner",
      "followers_url": "https://api.github.com/users/jtratner/followers",
      "following_url": "https://api.github.com/users/jtratner/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtratner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtratner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtratner/subscriptions",
      "organizations_url": "https://api.github.com/users/jtratner/orgs",
      "repos_url": "https://api.github.com/users/jtratner/repos",
      "events_url": "https://api.github.com/users/jtratner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtratner/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-09-06T11:43:23Z",
    "updated_at": "2013-09-06T11:43:23Z",
    "author_association": "CONTRIBUTOR",
    "body": "ah okay - no I have no idea, I was trying to grep/grin around in the Python source to find what raises the error and I couldn't find anything with 'initializing object'. Any ideas on where it's raised?\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/23935064",
    "html_url": "https://github.com/pandas-dev/pandas/pull/4755#issuecomment-23935064",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/4755",
    "id": 23935064,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzOTM1MDY0",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-09-06T11:57:12Z",
    "updated_at": "2013-09-06T11:57:12Z",
    "author_association": "CONTRIBUTOR",
    "body": "yep that's the problem\nit's unpicking a np.dtype('float'64) object \nbut for some reason it has a weird string encoding - cant see any reason for that\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/23935643",
    "html_url": "https://github.com/pandas-dev/pandas/pull/4755#issuecomment-23935643",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/4755",
    "id": 23935643,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzOTM1NjQz",
    "user": {
      "login": "jtratner",
      "id": 1598379,
      "node_id": "MDQ6VXNlcjE1OTgzNzk=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1598379?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtratner",
      "html_url": "https://github.com/jtratner",
      "followers_url": "https://api.github.com/users/jtratner/followers",
      "following_url": "https://api.github.com/users/jtratner/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtratner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtratner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtratner/subscriptions",
      "organizations_url": "https://api.github.com/users/jtratner/orgs",
      "repos_url": "https://api.github.com/users/jtratner/repos",
      "events_url": "https://api.github.com/users/jtratner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtratner/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-09-06T12:11:55Z",
    "updated_at": "2013-09-06T12:11:55Z",
    "author_association": "CONTRIBUTOR",
    "body": "maybe you're overriding some part that sets an encoding internally in the pickle module?  Also, have you tried unpickling but removing pickle_compat? (do you still see the 'initialize string' error)?\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/23936045",
    "html_url": "https://github.com/pandas-dev/pandas/pull/4755#issuecomment-23936045",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/4755",
    "id": 23936045,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzOTM2MDQ1",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-09-06T12:21:42Z",
    "updated_at": "2013-09-06T12:21:42Z",
    "author_association": "CONTRIBUTOR",
    "body": "I first try regular unpickle (this is the `try_read` bizness in io/pickle.py, then fallback to the compat decoding, then try encoding in the same way.\n\nThis 'fails' on the final try, e.g. using pickle_compat with the encoding. AFAIK I am doing it correctly. for example. in 3.3 it correctly unpickles a 3.3 from 0.11.\n\nIts just the py2 with pickle_compat that is failing with something I am not even touching.....\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/23936901",
    "html_url": "https://github.com/pandas-dev/pandas/pull/4755#issuecomment-23936901",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/4755",
    "id": 23936901,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzOTM2OTAx",
    "user": {
      "login": "jtratner",
      "id": 1598379,
      "node_id": "MDQ6VXNlcjE1OTgzNzk=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1598379?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtratner",
      "html_url": "https://github.com/jtratner",
      "followers_url": "https://api.github.com/users/jtratner/followers",
      "following_url": "https://api.github.com/users/jtratner/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtratner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtratner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtratner/subscriptions",
      "organizations_url": "https://api.github.com/users/jtratner/orgs",
      "repos_url": "https://api.github.com/users/jtratner/repos",
      "events_url": "https://api.github.com/users/jtratner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtratner/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-09-06T12:39:43Z",
    "updated_at": "2013-09-06T12:39:43Z",
    "author_association": "CONTRIBUTOR",
    "body": "Whee... Did 3.3 unpickle a Python 2 Series pickle before you did the Series\nrefactor?\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/23937488",
    "html_url": "https://github.com/pandas-dev/pandas/pull/4755#issuecomment-23937488",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/4755",
    "id": 23937488,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzOTM3NDg4",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-09-06T12:52:04Z",
    "updated_at": "2013-09-06T12:52:04Z",
    "author_association": "CONTRIBUTOR",
    "body": "Found it. \n\n```\n(Pdb) p args[1]\n'\\x00\\x00\\x00\\x00\\x00\\x00ø\\x7f'\n(Pdb) p func(args[0],args[1].encode(self.encoding))\nnan\n```\n\nI think this might be a numpy/python bug. `args[0]` here is a `np.dtype('float64')` object and the value (`args[1]`) is a string. But the dtype is expecting bytes. So I just catch the error and reencode the strings and it works. \n\nreally odd, like the bytes were magically converted to a string w/o properly decoding. (and the result is a `nan`!)\n"
  }
]
