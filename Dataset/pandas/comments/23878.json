[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/441323567",
    "html_url": "https://github.com/pandas-dev/pandas/issues/23878#issuecomment-441323567",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23878",
    "id": 441323567,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MTMyMzU2Nw==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-23T22:09:27Z",
    "updated_at": "2018-11-23T22:09:27Z",
    "author_association": "CONTRIBUTOR",
    "body": "we already rejected PeriodDelta as pretty niche and not worth the supports costs\r\n\r\nthat said some of the above might be bugs"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/441334576",
    "html_url": "https://github.com/pandas-dev/pandas/issues/23878#issuecomment-441334576",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23878",
    "id": 441334576,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MTMzNDU3Ng==",
    "user": {
      "login": "ArtinSarraf",
      "id": 13501084,
      "node_id": "MDQ6VXNlcjEzNTAxMDg0",
      "avatar_url": "https://avatars1.githubusercontent.com/u/13501084?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ArtinSarraf",
      "html_url": "https://github.com/ArtinSarraf",
      "followers_url": "https://api.github.com/users/ArtinSarraf/followers",
      "following_url": "https://api.github.com/users/ArtinSarraf/following{/other_user}",
      "gists_url": "https://api.github.com/users/ArtinSarraf/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ArtinSarraf/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ArtinSarraf/subscriptions",
      "organizations_url": "https://api.github.com/users/ArtinSarraf/orgs",
      "repos_url": "https://api.github.com/users/ArtinSarraf/repos",
      "events_url": "https://api.github.com/users/ArtinSarraf/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ArtinSarraf/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-24T01:03:43Z",
    "updated_at": "2018-11-24T01:07:48Z",
    "author_association": "CONTRIBUTOR",
    "body": "I think that ints are fine to represent period differences except it needs some modifications/restrictions (of course, I'm not aware of any of the original decisions on how this should work, so please let me know if there is any reason these wouldn't work):\r\n1) The int should represent the number of scaled periods (since this is how addition works), not base periods\r\n2) Periods must be in phase - required for (1) to work. \r\n  - In phase: `pd.Period('20180101 09:00', freq='5H') - pd.Period('20180101 04:00', freq='5H')`\r\n  - Out of phase: `pd.Period('20180101 04:00', freq='5H') - pd.Period('20180101 00:00', freq='5H')`\r\n\r\nI would also consider allowing something like a 2-item tuple of ints, that __add__ would also understand, to allow for out of phase operations. Which would just be (<number of scaled periods>, <remainder in base periods>).\r\n\r\nThese would be easy to implement, add almost no support cost and also make the Period operations much more reliable.\r\n\r\nExample Implementation (allowing for out of phase arithmetic):\r\n```python\r\ndef __sub__(self, other):\r\n    ret_val = super().__sub__(other)  # not actually super, just placeholder for existing logic\r\n    return divmod(ret_val, self.freq_scaling_factor)  # not sure how to actually access this right now\r\n\r\ndef __add__(self, other):\r\n    if is_2_item_tuple_of_ints(other):\r\n        other_val = other[0] * self. self.freq_scaling_factor + other[1]\r\n        return (self.astype(self.base_freq) + other_val).astype(self.freq)  # not perfect, astype doesn't always behave how I would want for this to work off the bat\r\n    else:\r\n        return self + other\r\n```\r\n\r\nExample Implementation (for no out of phase operations):\r\n```python\r\ndef __sub__(self, other):\r\n    ret_val = super().__sub__(other)\r\n    periods, out_of_phase = divmod(ret_val, self.freq_scaling_factor)\r\n    if out_of_phase:\r\n        raise ValueError('out of phase')\r\n    return periods\r\n```\r\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/441336008",
    "html_url": "https://github.com/pandas-dev/pandas/issues/23878#issuecomment-441336008",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23878",
    "id": 441336008,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MTMzNjAwOA==",
    "user": {
      "login": "jbrockmendel",
      "id": 8078968,
      "node_id": "MDQ6VXNlcjgwNzg5Njg=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/8078968?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jbrockmendel",
      "html_url": "https://github.com/jbrockmendel",
      "followers_url": "https://api.github.com/users/jbrockmendel/followers",
      "following_url": "https://api.github.com/users/jbrockmendel/following{/other_user}",
      "gists_url": "https://api.github.com/users/jbrockmendel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jbrockmendel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jbrockmendel/subscriptions",
      "organizations_url": "https://api.github.com/users/jbrockmendel/orgs",
      "repos_url": "https://api.github.com/users/jbrockmendel/repos",
      "events_url": "https://api.github.com/users/jbrockmendel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jbrockmendel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-24T01:34:57Z",
    "updated_at": "2018-11-24T01:34:57Z",
    "author_association": "MEMBER",
    "body": "Is this in master?  We fixed a very similar bug recently (though that may have been for PeriodIndex and not Period)"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/441339599",
    "html_url": "https://github.com/pandas-dev/pandas/issues/23878#issuecomment-441339599",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23878",
    "id": 441339599,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MTMzOTU5OQ==",
    "user": {
      "login": "ArtinSarraf",
      "id": 13501084,
      "node_id": "MDQ6VXNlcjEzNTAxMDg0",
      "avatar_url": "https://avatars1.githubusercontent.com/u/13501084?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ArtinSarraf",
      "html_url": "https://github.com/ArtinSarraf",
      "followers_url": "https://api.github.com/users/ArtinSarraf/followers",
      "following_url": "https://api.github.com/users/ArtinSarraf/following{/other_user}",
      "gists_url": "https://api.github.com/users/ArtinSarraf/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ArtinSarraf/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ArtinSarraf/subscriptions",
      "organizations_url": "https://api.github.com/users/ArtinSarraf/orgs",
      "repos_url": "https://api.github.com/users/ArtinSarraf/repos",
      "events_url": "https://api.github.com/users/ArtinSarraf/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ArtinSarraf/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-24T03:03:59Z",
    "updated_at": "2018-11-25T23:28:43Z",
    "author_association": "CONTRIBUTOR",
    "body": "@jbrockmendel - I was on 23.4, but looks like Master is still wrong.\r\n\r\nSo from what I can tell the `pandas.tseries.offsets.Hour` object when added to a Period object, only factors in the base frequency. So you'll get this:\r\n\r\n    >>> str(pd.Period('20180101', freq='H') + Hour(10)) == str(pd.Period('20180101', freq='5H') + Hour(10))  # note the freqs\r\n\r\nThis would not be a problem (in fact it behaves the way I proposed in option 2 in the original post), however, it seems when diffing scaled freqs the scaling factor is multiplied by the base hours, this is unnecessary (and wrong) because of what was deomstrated above. **So all that would need to be done is remove the multiplication of the resulting offset.**\r\n\r\n    >>> pd.Period('20180101 00:00', freq='12H') - pd.Period('19700101 00:00', freq='12H')\r\n    <5049216 * Hours>  # should be 5049216/12\r\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/441483436",
    "html_url": "https://github.com/pandas-dev/pandas/issues/23878#issuecomment-441483436",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23878",
    "id": 441483436,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MTQ4MzQzNg==",
    "user": {
      "login": "ArtinSarraf",
      "id": 13501084,
      "node_id": "MDQ6VXNlcjEzNTAxMDg0",
      "avatar_url": "https://avatars1.githubusercontent.com/u/13501084?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ArtinSarraf",
      "html_url": "https://github.com/ArtinSarraf",
      "followers_url": "https://api.github.com/users/ArtinSarraf/followers",
      "following_url": "https://api.github.com/users/ArtinSarraf/following{/other_user}",
      "gists_url": "https://api.github.com/users/ArtinSarraf/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ArtinSarraf/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ArtinSarraf/subscriptions",
      "organizations_url": "https://api.github.com/users/ArtinSarraf/orgs",
      "repos_url": "https://api.github.com/users/ArtinSarraf/repos",
      "events_url": "https://api.github.com/users/ArtinSarraf/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ArtinSarraf/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-25T23:24:36Z",
    "updated_at": "2018-11-25T23:28:22Z",
    "author_association": "CONTRIBUTOR",
    "body": "@jbrockmendel - I believe the fix would just be to change the following line:\r\n\r\npandas/_libs/tslibs/period.pyx:1688\r\n\r\n    return (self.ordinal - other.ordinal) * self.freq\r\n\r\nTo \r\n\r\n    return (self.ordinal - other.ordinal) * type(self.freq)()  # couldn’t find a better way to get the base freq"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/441485162",
    "html_url": "https://github.com/pandas-dev/pandas/issues/23878#issuecomment-441485162",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23878",
    "id": 441485162,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MTQ4NTE2Mg==",
    "user": {
      "login": "jbrockmendel",
      "id": 8078968,
      "node_id": "MDQ6VXNlcjgwNzg5Njg=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/8078968?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jbrockmendel",
      "html_url": "https://github.com/jbrockmendel",
      "followers_url": "https://api.github.com/users/jbrockmendel/followers",
      "following_url": "https://api.github.com/users/jbrockmendel/following{/other_user}",
      "gists_url": "https://api.github.com/users/jbrockmendel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jbrockmendel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jbrockmendel/subscriptions",
      "organizations_url": "https://api.github.com/users/jbrockmendel/orgs",
      "repos_url": "https://api.github.com/users/jbrockmendel/repos",
      "events_url": "https://api.github.com/users/jbrockmendel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jbrockmendel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-25T23:49:49Z",
    "updated_at": "2018-11-25T23:49:49Z",
    "author_association": "MEMBER",
    "body": "Great, a PR would be welcome."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/441494576",
    "html_url": "https://github.com/pandas-dev/pandas/issues/23878#issuecomment-441494576",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23878",
    "id": 441494576,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MTQ5NDU3Ng==",
    "user": {
      "login": "ArtinSarraf",
      "id": 13501084,
      "node_id": "MDQ6VXNlcjEzNTAxMDg0",
      "avatar_url": "https://avatars1.githubusercontent.com/u/13501084?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ArtinSarraf",
      "html_url": "https://github.com/ArtinSarraf",
      "followers_url": "https://api.github.com/users/ArtinSarraf/followers",
      "following_url": "https://api.github.com/users/ArtinSarraf/following{/other_user}",
      "gists_url": "https://api.github.com/users/ArtinSarraf/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ArtinSarraf/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ArtinSarraf/subscriptions",
      "organizations_url": "https://api.github.com/users/ArtinSarraf/orgs",
      "repos_url": "https://api.github.com/users/ArtinSarraf/repos",
      "events_url": "https://api.github.com/users/ArtinSarraf/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ArtinSarraf/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-26T01:38:27Z",
    "updated_at": "2018-11-26T01:38:27Z",
    "author_association": "CONTRIBUTOR",
    "body": "@jbrockmendel - PR created https://github.com/pandas-dev/pandas/pull/23915"
  }
]
