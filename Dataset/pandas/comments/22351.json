[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/413040051",
    "html_url": "https://github.com/pandas-dev/pandas/issues/22351#issuecomment-413040051",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/22351",
    "id": 413040051,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMzA0MDA1MQ==",
    "user": {
      "login": "alimcmaster1",
      "id": 16733618,
      "node_id": "MDQ6VXNlcjE2NzMzNjE4",
      "avatar_url": "https://avatars1.githubusercontent.com/u/16733618?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alimcmaster1",
      "html_url": "https://github.com/alimcmaster1",
      "followers_url": "https://api.github.com/users/alimcmaster1/followers",
      "following_url": "https://api.github.com/users/alimcmaster1/following{/other_user}",
      "gists_url": "https://api.github.com/users/alimcmaster1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alimcmaster1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alimcmaster1/subscriptions",
      "organizations_url": "https://api.github.com/users/alimcmaster1/orgs",
      "repos_url": "https://api.github.com/users/alimcmaster1/repos",
      "events_url": "https://api.github.com/users/alimcmaster1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alimcmaster1/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-14T22:46:19Z",
    "updated_at": "2018-08-14T22:46:19Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hi, going forwards do you mind giving as little code as possible to reproduce the problem. There is alot of detail above which is related to your use case ( movies watched )\r\n\r\nSee [Stackoverflow](https://stackoverflow.com/questions/29700552/series-objects-are-mutable-and-cannot-be-hashed-error) for a decent answer to this question\r\n\r\nThanks!"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/413041342",
    "html_url": "https://github.com/pandas-dev/pandas/issues/22351#issuecomment-413041342",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/22351",
    "id": 413041342,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMzA0MTM0Mg==",
    "user": {
      "login": "WillAyd",
      "id": 609873,
      "node_id": "MDQ6VXNlcjYwOTg3Mw==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/609873?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/WillAyd",
      "html_url": "https://github.com/WillAyd",
      "followers_url": "https://api.github.com/users/WillAyd/followers",
      "following_url": "https://api.github.com/users/WillAyd/following{/other_user}",
      "gists_url": "https://api.github.com/users/WillAyd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/WillAyd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/WillAyd/subscriptions",
      "organizations_url": "https://api.github.com/users/WillAyd/orgs",
      "repos_url": "https://api.github.com/users/WillAyd/repos",
      "events_url": "https://api.github.com/users/WillAyd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/WillAyd/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-14T22:52:58Z",
    "updated_at": "2018-08-14T22:52:58Z",
    "author_association": "MEMBER",
    "body": "Please refer to the contributing guide for how to open a bug report:\r\n\r\nhttps://pandas.pydata.org/pandas-docs/stable/contributing.html#bug-reports-and-enhancement-requests\r\n\r\nAs mentioned above there is a lot missing here. Perhaps the SO article solves your problem but if not refer to the link above and feel free to re-open with required info"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/413045110",
    "html_url": "https://github.com/pandas-dev/pandas/issues/22351#issuecomment-413045110",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/22351",
    "id": 413045110,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMzA0NTExMA==",
    "user": {
      "login": "Lefatse",
      "id": 39564841,
      "node_id": "MDQ6VXNlcjM5NTY0ODQx",
      "avatar_url": "https://avatars0.githubusercontent.com/u/39564841?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Lefatse",
      "html_url": "https://github.com/Lefatse",
      "followers_url": "https://api.github.com/users/Lefatse/followers",
      "following_url": "https://api.github.com/users/Lefatse/following{/other_user}",
      "gists_url": "https://api.github.com/users/Lefatse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Lefatse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Lefatse/subscriptions",
      "organizations_url": "https://api.github.com/users/Lefatse/orgs",
      "repos_url": "https://api.github.com/users/Lefatse/repos",
      "events_url": "https://api.github.com/users/Lefatse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Lefatse/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-14T23:13:22Z",
    "updated_at": "2018-08-14T23:13:22Z",
    "author_association": "NONE",
    "body": "#This is the the entire code snippet \r\nimport pandas as pd\r\nimport numpy as np\r\nfrom surprise import Reader, Dataset, SVD, evaluate\r\nfrom sklearn.metrics.pairwise import linear_kernel, cosine_similarity\r\nfrom sklearn.feature_extraction.text import TfidfVectorizer, CountVectorizer\r\nimport warnings; warnings.simplefilter('ignore')\r\n\r\nreader = Reader()\r\n\r\nratings = pd.read_csv('ratings.csv')\r\nratings.head()\r\n\r\ndata = Dataset.load_from_df(ratings[['userId', 'movieId', 'rating']], reader)\r\ndata.split(n_folds=5)\r\n\r\nsvd = SVD()\r\nevaluate(svd, data, measures=['RMSE', 'MAE'])\r\n\r\nfrom surprise.model_selection import cross_validate\r\n\r\ncross_validate(svd, data, measures=['RMSE', 'MAE'], cv=5, verbose=True)\r\n\r\ntrainset = data.build_full_trainset()\r\nsvd.train(trainset)\r\n\r\nlinks_small = pd.read_csv('links_small.csv')\r\n\r\n\r\ndef convert_int(x):\r\n    try:\r\n        return int(x)\r\n    except:\r\n        return np.nan\r\n\r\nid_map = links_small[['movieId', 'tmdbId']]\r\nid_map['tmdbId'] = id_map['tmdbId'].apply(convert_int)\r\nid_map.columns = ['movieId', 'id']\r\n\r\nmd = pd. read_csv('movies_metadata.csv')\r\nmd.drop([19730, 29503, 35587], inplace=True)\r\nmd['id'] = md['id'].astype('int')\r\n\r\nlinks_small = pd.read_csv('links_small.csv')\r\n\r\nlinks_small = links_small[links_small['tmdbId'].notnull()]['tmdbId'].astype('int')\r\nsmd = md[md['id'].isin(links_small)]\r\n\r\nid_map = id_map.merge(smd[['title', 'id']], on='id').set_index('title')\r\n\r\ndef get_user_table(num):\r\n    def title(id_movie):\r\n        return id_map[id_map['movieId'] == id_movie].index[0]\r\n    \r\n    user_tbl = ratings[ratings['userId'] == num][['userId', 'movieId', 'rating']]\r\n    user_tbl['title'] = user_tbl.movieId.apply(title)\r\n\r\n    return user_tbl\r\n\r\nget_user_table(8).head()\r\n\r\ndef get_predict(user_id, title):\r\n    return svd.predict(user_id, id_map.loc[title, 'movieId']).est\r\n\r\ndef watched (user_id, title):\r\n    user_table = get_user_table(user_id)\r\n    if len(user_table[user_table['title'] == title])>0:\r\n        return 'Yes'\r\n    else:\r\n        return 'No'\r\n\r\n\r\ndef just_watch_it(user, rating_min):\r\n    should_watch = pd.DataFrame([], columns=['title', 'predicted rating'])\r\n    for i in range(len(id_map)):\r\n        if watched (user, id_map.iloc[i].name) == 'No':\r\n            predicted_rating = get_predict(user, id_map.iloc[i].name)\r\n            if predicted_rating >= rating_min:\r\n                should_watch.loc[len(should_watch.index)] = {'title':id_map.iloc[i].name, \r\n                                                            'predicted rating': predicted_rating}\r\n    \r\n    return should_watch\r\n\r\nlist_of_movies = just_watch_it(8, 4) #The error occurs when I execute this line"
  }
]
