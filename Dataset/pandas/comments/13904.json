[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/237625645",
    "html_url": "https://github.com/pandas-dev/pandas/issues/13904#issuecomment-237625645",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13904",
    "id": 237625645,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNzYyNTY0NQ==",
    "user": {
      "login": "PeterKucirek",
      "id": 9703332,
      "node_id": "MDQ6VXNlcjk3MDMzMzI=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/9703332?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/PeterKucirek",
      "html_url": "https://github.com/PeterKucirek",
      "followers_url": "https://api.github.com/users/PeterKucirek/followers",
      "following_url": "https://api.github.com/users/PeterKucirek/following{/other_user}",
      "gists_url": "https://api.github.com/users/PeterKucirek/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/PeterKucirek/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/PeterKucirek/subscriptions",
      "organizations_url": "https://api.github.com/users/PeterKucirek/orgs",
      "repos_url": "https://api.github.com/users/PeterKucirek/repos",
      "events_url": "https://api.github.com/users/PeterKucirek/events{/privacy}",
      "received_events_url": "https://api.github.com/users/PeterKucirek/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-04T17:34:39Z",
    "updated_at": "2016-08-04T17:34:39Z",
    "author_association": "NONE",
    "body": "I don't know much about the indexing internals, but is it possible to design a \"fast-path\" MultiIndex when, say, level arrays are all integers? And fall back on the original behaviour when the MultiIndex gets more complicated?\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/237674866",
    "html_url": "https://github.com/pandas-dev/pandas/issues/13904#issuecomment-237674866",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13904",
    "id": 237674866,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNzY3NDg2Ng==",
    "user": {
      "login": "chris-b1",
      "id": 1924092,
      "node_id": "MDQ6VXNlcjE5MjQwOTI=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1924092?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chris-b1",
      "html_url": "https://github.com/chris-b1",
      "followers_url": "https://api.github.com/users/chris-b1/followers",
      "following_url": "https://api.github.com/users/chris-b1/following{/other_user}",
      "gists_url": "https://api.github.com/users/chris-b1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chris-b1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chris-b1/subscriptions",
      "organizations_url": "https://api.github.com/users/chris-b1/orgs",
      "repos_url": "https://api.github.com/users/chris-b1/repos",
      "events_url": "https://api.github.com/users/chris-b1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chris-b1/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-04T20:33:46Z",
    "updated_at": "2016-08-04T20:33:46Z",
    "author_association": "CONTRIBUTOR",
    "body": "The problem here is that a array of tuples is created and cached on some operations.  But the tuples aren't needed for many things you'd do with a `MultiIndex`.  So an _ugly_ hack you could do to prevent this from happening is:\n\n```\ndef fail(self):\n    raise RuntimeError(\"Not allowing boxed MultiIndex\")\n\npd.MultiIndex.values = property(fail)\n```\n\nThen, you can still do _most_ things with the `MultiIndex`, but if you try something that would materialize the tuples, you'll get an error.  Not really recommended ... but kind of helps, or at least will let you know what step in your program is creating the tuples.\n\n```\nIn [9]: trips.head()\nOut[9]: \n                          origin  destination\nhhid pid tour_id trip_id                     \n0    0   0       0           107          122\n                 1           159          113\n                 2           115          152\n     1   0       0           178          188\n                 1           195          184\n\nIn [10]: idx = pd.IndexSlice\n\nIn [11]: trips.loc[idx[0, 1, :, 2], :]\nOut[11]: \n                          origin  destination\nhhid pid tour_id trip_id                     \n0    1   0       2           185          178\n\nIn [12]: trips.groupby(level='tour_id').sum()\nOut[12]: \n            origin  destination\ntour_id                        \n0        350398162    350323339\n1         52599924     52592203\n2         17548605     17554048\n\nIn [13]: trips.info()\n---------------------------------------------------------------------------\nRuntimeError                              Traceback (most recent call last)\n\nRuntimeError: Not allowing boxed MultiIndex\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/237675640",
    "html_url": "https://github.com/pandas-dev/pandas/issues/13904#issuecomment-237675640",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13904",
    "id": 237675640,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNzY3NTY0MA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-04T20:36:38Z",
    "updated_at": "2016-08-04T20:36:38Z",
    "author_association": "CONTRIBUTOR",
    "body": "can a simpler example be created for this? (simpler in that with no numba)\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/237675989",
    "html_url": "https://github.com/pandas-dev/pandas/issues/13904#issuecomment-237675989",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13904",
    "id": 237675989,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNzY3NTk4OQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-04T20:37:59Z",
    "updated_at": "2016-08-04T20:38:20Z",
    "author_association": "CONTRIBUTOR",
    "body": "yes, you don't _ever_ actually materalize the tuples, unless `.values` is called (at which point they are cached; a MI is immutable so this is feasible)\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/237676841",
    "html_url": "https://github.com/pandas-dev/pandas/issues/13904#issuecomment-237676841",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13904",
    "id": 237676841,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNzY3Njg0MQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-04T20:41:00Z",
    "updated_at": "2016-08-04T20:41:00Z",
    "author_association": "CONTRIBUTOR",
    "body": "the act of printing a frame is probably the culprit here\n\nsomewhere `.values` is called on the index when printing (and its prob _then_ sliced), this materializes it.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/237677297",
    "html_url": "https://github.com/pandas-dev/pandas/issues/13904#issuecomment-237677297",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13904",
    "id": 237677297,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNzY3NzI5Nw==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-04T20:42:33Z",
    "updated_at": "2016-08-04T20:42:33Z",
    "author_association": "CONTRIBUTOR",
    "body": "Actually one could try disabling the caching of `.values` altogether (or maybe only do it below some certain length in order to not sacrifice perf on 'small/medium' sized things).\n\nand see if perf suite suffers.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/237686105",
    "html_url": "https://github.com/pandas-dev/pandas/issues/13904#issuecomment-237686105",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13904",
    "id": 237686105,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNzY4NjEwNQ==",
    "user": {
      "login": "PeterKucirek",
      "id": 9703332,
      "node_id": "MDQ6VXNlcjk3MDMzMzI=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/9703332?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/PeterKucirek",
      "html_url": "https://github.com/PeterKucirek",
      "followers_url": "https://api.github.com/users/PeterKucirek/followers",
      "following_url": "https://api.github.com/users/PeterKucirek/following{/other_user}",
      "gists_url": "https://api.github.com/users/PeterKucirek/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/PeterKucirek/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/PeterKucirek/subscriptions",
      "organizations_url": "https://api.github.com/users/PeterKucirek/orgs",
      "repos_url": "https://api.github.com/users/PeterKucirek/repos",
      "events_url": "https://api.github.com/users/PeterKucirek/events{/privacy}",
      "received_events_url": "https://api.github.com/users/PeterKucirek/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-04T21:16:49Z",
    "updated_at": "2016-08-04T21:30:00Z",
    "author_association": "NONE",
    "body": "@jreback If dependence on Numba is a problem, then the `@nb.jit()` decorator can be removed and it should just work fine as a regular Python function, albeit a lot slower.\n\n@chris-b1 I tried your trick, but unfortunately it just breaks all sorts of things. \n\n~~For starters, I cannot even reproduce your index-slice (it makes a call to `values`)A `loc[]` lookup breaks if a column indexer is not specified. A call to `is_monotonic_increasing` also breaks.~~\n\nEDIT: Only `is_monotonic_increasing` breaks.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/237689561",
    "html_url": "https://github.com/pandas-dev/pandas/issues/13904#issuecomment-237689561",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13904",
    "id": 237689561,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNzY4OTU2MQ==",
    "user": {
      "login": "chris-b1",
      "id": 1924092,
      "node_id": "MDQ6VXNlcjE5MjQwOTI=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1924092?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chris-b1",
      "html_url": "https://github.com/chris-b1",
      "followers_url": "https://api.github.com/users/chris-b1/followers",
      "following_url": "https://api.github.com/users/chris-b1/following{/other_user}",
      "gists_url": "https://api.github.com/users/chris-b1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chris-b1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chris-b1/subscriptions",
      "organizations_url": "https://api.github.com/users/chris-b1/orgs",
      "repos_url": "https://api.github.com/users/chris-b1/repos",
      "events_url": "https://api.github.com/users/chris-b1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chris-b1/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-04T21:30:14Z",
    "updated_at": "2016-08-04T21:30:14Z",
    "author_association": "CONTRIBUTOR",
    "body": "I'm on 0.18.1 as well - the slice I wrote doesn't call `.values` but if you slice with a tuple it will.\n\n`is_monotonic_increasing` feels like it could/should be implemented without `.values`, but you're right, it does fail.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/237696144",
    "html_url": "https://github.com/pandas-dev/pandas/issues/13904#issuecomment-237696144",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13904",
    "id": 237696144,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNzY5NjE0NA==",
    "user": {
      "login": "PeterKucirek",
      "id": 9703332,
      "node_id": "MDQ6VXNlcjk3MDMzMzI=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/9703332?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/PeterKucirek",
      "html_url": "https://github.com/PeterKucirek",
      "followers_url": "https://api.github.com/users/PeterKucirek/followers",
      "following_url": "https://api.github.com/users/PeterKucirek/following{/other_user}",
      "gists_url": "https://api.github.com/users/PeterKucirek/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/PeterKucirek/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/PeterKucirek/subscriptions",
      "organizations_url": "https://api.github.com/users/PeterKucirek/orgs",
      "repos_url": "https://api.github.com/users/PeterKucirek/repos",
      "events_url": "https://api.github.com/users/PeterKucirek/events{/privacy}",
      "received_events_url": "https://api.github.com/users/PeterKucirek/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-04T21:57:29Z",
    "updated_at": "2016-08-04T21:57:29Z",
    "author_association": "NONE",
    "body": "I've also found that `values` gets called when using `MultiIndex.equals()`, which is another method that I feel could be implemented without the tuples.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/237702537",
    "html_url": "https://github.com/pandas-dev/pandas/issues/13904#issuecomment-237702537",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13904",
    "id": 237702537,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNzcwMjUzNw==",
    "user": {
      "login": "chris-b1",
      "id": 1924092,
      "node_id": "MDQ6VXNlcjE5MjQwOTI=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1924092?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chris-b1",
      "html_url": "https://github.com/chris-b1",
      "followers_url": "https://api.github.com/users/chris-b1/followers",
      "following_url": "https://api.github.com/users/chris-b1/following{/other_user}",
      "gists_url": "https://api.github.com/users/chris-b1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chris-b1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chris-b1/subscriptions",
      "organizations_url": "https://api.github.com/users/chris-b1/orgs",
      "repos_url": "https://api.github.com/users/chris-b1/repos",
      "events_url": "https://api.github.com/users/chris-b1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chris-b1/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-04T22:28:06Z",
    "updated_at": "2016-08-04T22:28:06Z",
    "author_association": "CONTRIBUTOR",
    "body": "Yeah, this is actually more problematic than I realized - it's the same problem noted in the original issue - that the tuples are what's being used for the underlying hash table - it's just that some ops, like groupby and slice, are smart enough to not need it.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/237874576",
    "html_url": "https://github.com/pandas-dev/pandas/issues/13904#issuecomment-237874576",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13904",
    "id": 237874576,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNzg3NDU3Ng==",
    "user": {
      "login": "PeterKucirek",
      "id": 9703332,
      "node_id": "MDQ6VXNlcjk3MDMzMzI=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/9703332?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/PeterKucirek",
      "html_url": "https://github.com/PeterKucirek",
      "followers_url": "https://api.github.com/users/PeterKucirek/followers",
      "following_url": "https://api.github.com/users/PeterKucirek/following{/other_user}",
      "gists_url": "https://api.github.com/users/PeterKucirek/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/PeterKucirek/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/PeterKucirek/subscriptions",
      "organizations_url": "https://api.github.com/users/PeterKucirek/orgs",
      "repos_url": "https://api.github.com/users/PeterKucirek/repos",
      "events_url": "https://api.github.com/users/PeterKucirek/events{/privacy}",
      "received_events_url": "https://api.github.com/users/PeterKucirek/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-05T15:03:18Z",
    "updated_at": "2016-08-05T15:03:18Z",
    "author_association": "NONE",
    "body": "It looks to me that, because of this problem, MultiIndex is fundamentally broken for large arrays. They just take up too much RAM to be useful in production code. Either MutliIndex needs be refactored so that PyTuples aren't used for `values` OR a number of methods need to be refactored to not call `values` at all. The former is more 'pure' and it sounds like @njsmith was looking into it when the original issue was raised (and @wesm agreed). \n\nI'm under a time crunch so the most I can do for the moment is refactor my code to drop as many MultiIndex's as possible (of which I am using many). But I'm interested in learning about the indexing internals so I may revisit this.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/237876493",
    "html_url": "https://github.com/pandas-dev/pandas/issues/13904#issuecomment-237876493",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13904",
    "id": 237876493,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNzg3NjQ5Mw==",
    "user": {
      "login": "chris-b1",
      "id": 1924092,
      "node_id": "MDQ6VXNlcjE5MjQwOTI=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1924092?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chris-b1",
      "html_url": "https://github.com/chris-b1",
      "followers_url": "https://api.github.com/users/chris-b1/followers",
      "following_url": "https://api.github.com/users/chris-b1/following{/other_user}",
      "gists_url": "https://api.github.com/users/chris-b1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chris-b1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chris-b1/subscriptions",
      "organizations_url": "https://api.github.com/users/chris-b1/orgs",
      "repos_url": "https://api.github.com/users/chris-b1/repos",
      "events_url": "https://api.github.com/users/chris-b1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chris-b1/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-05T15:10:30Z",
    "updated_at": "2016-08-05T15:10:30Z",
    "author_association": "CONTRIBUTOR",
    "body": "I agree that the underlying implementation just doesn't scale, and probably was always intended to be replaced.  \n\nI'm sure a well thought out PR fixing the internals would be accepted, but given the [discussion](https://mail.python.org/pipermail/pandas-dev/2016-July/000512.html) around internals refactoring, this might be the type of the thing that is punted to \"pandas 2.0\"\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/237878441",
    "html_url": "https://github.com/pandas-dev/pandas/issues/13904#issuecomment-237878441",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13904",
    "id": 237878441,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNzg3ODQ0MQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-05T15:17:36Z",
    "updated_at": "2016-08-05T15:17:52Z",
    "author_association": "CONTRIBUTOR",
    "body": "actually this could / should be done independtly or pandas 2.0. This is clearly an area that could have improvement, but the API is not touched.\n\nso @PeterKucirek @chris-b1 welcome improvements here in the current environment.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/237901601",
    "html_url": "https://github.com/pandas-dev/pandas/issues/13904#issuecomment-237901601",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13904",
    "id": 237901601,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNzkwMTYwMQ==",
    "user": {
      "login": "PeterKucirek",
      "id": 9703332,
      "node_id": "MDQ6VXNlcjk3MDMzMzI=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/9703332?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/PeterKucirek",
      "html_url": "https://github.com/PeterKucirek",
      "followers_url": "https://api.github.com/users/PeterKucirek/followers",
      "following_url": "https://api.github.com/users/PeterKucirek/following{/other_user}",
      "gists_url": "https://api.github.com/users/PeterKucirek/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/PeterKucirek/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/PeterKucirek/subscriptions",
      "organizations_url": "https://api.github.com/users/PeterKucirek/orgs",
      "repos_url": "https://api.github.com/users/PeterKucirek/repos",
      "events_url": "https://api.github.com/users/PeterKucirek/events{/privacy}",
      "received_events_url": "https://api.github.com/users/PeterKucirek/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-05T16:46:44Z",
    "updated_at": "2016-08-05T16:46:44Z",
    "author_association": "NONE",
    "body": "The previous thread contains a link to [ a stale branch which looks to implement a fix](https://github.com/njsmith/pandas/commits/smaller-multi-index). So anyone working on this may not have to start from zero.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/237919130",
    "html_url": "https://github.com/pandas-dev/pandas/issues/13904#issuecomment-237919130",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13904",
    "id": 237919130,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNzkxOTEzMA==",
    "user": {
      "login": "wesm",
      "id": 329591,
      "node_id": "MDQ6VXNlcjMyOTU5MQ==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/329591?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wesm",
      "html_url": "https://github.com/wesm",
      "followers_url": "https://api.github.com/users/wesm/followers",
      "following_url": "https://api.github.com/users/wesm/following{/other_user}",
      "gists_url": "https://api.github.com/users/wesm/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wesm/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wesm/subscriptions",
      "organizations_url": "https://api.github.com/users/wesm/orgs",
      "repos_url": "https://api.github.com/users/wesm/repos",
      "events_url": "https://api.github.com/users/wesm/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wesm/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-05T17:57:55Z",
    "updated_at": "2016-08-05T17:57:55Z",
    "author_association": "MEMBER",
    "body": "Totally with you on this. The complicated part is hashing, so we would need to devise a custom hash table implementation that does not rely on materialized PyTuple objects\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/275257100",
    "html_url": "https://github.com/pandas-dev/pandas/issues/13904#issuecomment-275257100",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13904",
    "id": 275257100,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3NTI1NzEwMA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-01-25T22:46:02Z",
    "updated_at": "2017-01-25T22:51:07Z",
    "author_association": "CONTRIBUTOR",
    "body": "so @PeterKucirek if you are interested in trying this out (still a WIP):\r\n\r\nhttps://github.com/pandas-dev/pandas/compare/master...jreback:mi\r\n\r\nthis uses the new-ish hashing algos ``pandas.tools.hashing`` to hash the values of the MI, directly as ``uint64`` (allowing the hashtable to be entirely done in a compact repr and w/o the gil), just like the other hashtables.\r\n\r\n- some tests still broken\r\n- doesn't handle non-unique MI's.\r\n- it doesn't *appear* to use that much less memory (its about 60% of prior), but then again ``.values`` *can* still be called (to instantiate tuples), it just isn't called on populating the hash table (but can be elsewhere, which is *still* problematic, but one step at a time).\r\n- this is about 2.5-3x faster for indexing than before. (and releases gil)"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/275258003",
    "html_url": "https://github.com/pandas-dev/pandas/issues/13904#issuecomment-275258003",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13904",
    "id": 275258003,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3NTI1ODAwMw==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-01-25T22:50:20Z",
    "updated_at": "2017-01-25T22:51:33Z",
    "author_association": "CONTRIBUTOR",
    "body": "Here's my simple test (all done in separate sessions)\r\n0.19.2\r\n\r\n```\r\nIn [1]: i = MultiIndex.from_product([np.arange(1000), np.arange(10), np.arange(10), np.arange(10), np.arange(3)])\r\n\r\nIn [3]: len(i)\r\nOut[3]: 3000000\r\n\r\nIn [2]: %time i.get_loc((0,0,1,0,1))\r\nCPU times: user 2.04 s, sys: 238 ms, total: 2.27 s\r\nWall time: 2.27 s\r\nOut[2]: 31\r\n\r\nIn [2]: %memit i.get_loc((0,0,1,0,1))\r\npeak memory: 583.14 MiB, increment: 486.66 MiB\r\n```\r\n\r\nThis PR\r\n\r\n```\r\nIn [2]: %time i.get_loc((0,0,1,0,1))\r\nCPU times: user 632 ms, sys: 286 ms, total: 918 ms\r\nWall time: 924 ms\r\nOut[2]: 31\r\n\r\nIn [3]: %memit i.get_loc((0,0,1,0,1))\r\npeak memory: 423.96 MiB, increment: 318.61 MiB\r\n```"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/275401643",
    "html_url": "https://github.com/pandas-dev/pandas/issues/13904#issuecomment-275401643",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13904",
    "id": 275401643,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3NTQwMTY0Mw==",
    "user": {
      "login": "PeterKucirek",
      "id": 9703332,
      "node_id": "MDQ6VXNlcjk3MDMzMzI=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/9703332?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/PeterKucirek",
      "html_url": "https://github.com/PeterKucirek",
      "followers_url": "https://api.github.com/users/PeterKucirek/followers",
      "following_url": "https://api.github.com/users/PeterKucirek/following{/other_user}",
      "gists_url": "https://api.github.com/users/PeterKucirek/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/PeterKucirek/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/PeterKucirek/subscriptions",
      "organizations_url": "https://api.github.com/users/PeterKucirek/orgs",
      "repos_url": "https://api.github.com/users/PeterKucirek/repos",
      "events_url": "https://api.github.com/users/PeterKucirek/events{/privacy}",
      "received_events_url": "https://api.github.com/users/PeterKucirek/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-01-26T14:30:58Z",
    "updated_at": "2017-01-26T14:30:58Z",
    "author_association": "NONE",
    "body": "Ok, I will try it out and report back."
  }
]
