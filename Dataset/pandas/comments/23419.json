[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/434358798",
    "html_url": "https://github.com/pandas-dev/pandas/issues/23419#issuecomment-434358798",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23419",
    "id": 434358798,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNDM1ODc5OA==",
    "user": {
      "login": "jbrockmendel",
      "id": 8078968,
      "node_id": "MDQ6VXNlcjgwNzg5Njg=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/8078968?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jbrockmendel",
      "html_url": "https://github.com/jbrockmendel",
      "followers_url": "https://api.github.com/users/jbrockmendel/followers",
      "following_url": "https://api.github.com/users/jbrockmendel/following{/other_user}",
      "gists_url": "https://api.github.com/users/jbrockmendel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jbrockmendel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jbrockmendel/subscriptions",
      "organizations_url": "https://api.github.com/users/jbrockmendel/orgs",
      "repos_url": "https://api.github.com/users/jbrockmendel/repos",
      "events_url": "https://api.github.com/users/jbrockmendel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jbrockmendel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-30T15:55:24Z",
    "updated_at": "2018-10-30T15:55:24Z",
    "author_association": "MEMBER",
    "body": "Iâ€™m guessing these subclass datetime.datetime?"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/434384131",
    "html_url": "https://github.com/pandas-dev/pandas/issues/23419#issuecomment-434384131",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23419",
    "id": 434384131,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNDM4NDEzMQ==",
    "user": {
      "login": "gfyoung",
      "id": 9273653,
      "node_id": "MDQ6VXNlcjkyNzM2NTM=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/9273653?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gfyoung",
      "html_url": "https://github.com/gfyoung",
      "followers_url": "https://api.github.com/users/gfyoung/followers",
      "following_url": "https://api.github.com/users/gfyoung/following{/other_user}",
      "gists_url": "https://api.github.com/users/gfyoung/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gfyoung/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gfyoung/subscriptions",
      "organizations_url": "https://api.github.com/users/gfyoung/orgs",
      "repos_url": "https://api.github.com/users/gfyoung/repos",
      "events_url": "https://api.github.com/users/gfyoung/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gfyoung/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-30T16:57:36Z",
    "updated_at": "2018-10-30T16:57:36Z",
    "author_association": "MEMBER",
    "body": "IIUC, this looks like an ask to support another class object for indexing purposes.  Not sure if that is something we want to do *per se*...\r\n\r\ncc @jreback "
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/434385309",
    "html_url": "https://github.com/pandas-dev/pandas/issues/23419#issuecomment-434385309",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23419",
    "id": 434385309,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNDM4NTMwOQ==",
    "user": {
      "login": "fmaussion",
      "id": 10050469,
      "node_id": "MDQ6VXNlcjEwMDUwNDY5",
      "avatar_url": "https://avatars3.githubusercontent.com/u/10050469?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fmaussion",
      "html_url": "https://github.com/fmaussion",
      "followers_url": "https://api.github.com/users/fmaussion/followers",
      "following_url": "https://api.github.com/users/fmaussion/following{/other_user}",
      "gists_url": "https://api.github.com/users/fmaussion/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fmaussion/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fmaussion/subscriptions",
      "organizations_url": "https://api.github.com/users/fmaussion/orgs",
      "repos_url": "https://api.github.com/users/fmaussion/repos",
      "events_url": "https://api.github.com/users/fmaussion/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fmaussion/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-30T17:00:33Z",
    "updated_at": "2018-10-30T17:00:33Z",
    "author_association": "NONE",
    "body": "cc @spencerkclark @jhamman as developers of cftime (https://github.com/Unidata/cftime) - indeed I'm not sure if this is a pandas issue or a cftime issue..."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/434389134",
    "html_url": "https://github.com/pandas-dev/pandas/issues/23419#issuecomment-434389134",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23419",
    "id": 434389134,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNDM4OTEzNA==",
    "user": {
      "login": "jbrockmendel",
      "id": 8078968,
      "node_id": "MDQ6VXNlcjgwNzg5Njg=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/8078968?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jbrockmendel",
      "html_url": "https://github.com/jbrockmendel",
      "followers_url": "https://api.github.com/users/jbrockmendel/followers",
      "following_url": "https://api.github.com/users/jbrockmendel/following{/other_user}",
      "gists_url": "https://api.github.com/users/jbrockmendel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jbrockmendel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jbrockmendel/subscriptions",
      "organizations_url": "https://api.github.com/users/jbrockmendel/orgs",
      "repos_url": "https://api.github.com/users/jbrockmendel/repos",
      "events_url": "https://api.github.com/users/jbrockmendel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jbrockmendel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-30T17:10:32Z",
    "updated_at": "2018-10-30T17:10:32Z",
    "author_association": "MEMBER",
    "body": "It looks like `real_datetime` does subclass `datetime.datetime`.  The issue is caused by the fact that pandas' timestamp-conversion functions uses a heuristic that assumes that any datetime-subclass is a `pd.Timestamp`.\r\n\r\n@TimoRoth can you try pinning a `nanosecond = 0` attribute to `real_datetime` and see if that solves the problem?"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/434392165",
    "html_url": "https://github.com/pandas-dev/pandas/issues/23419#issuecomment-434392165",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23419",
    "id": 434392165,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNDM5MjE2NQ==",
    "user": {
      "login": "jhamman",
      "id": 2443309,
      "node_id": "MDQ6VXNlcjI0NDMzMDk=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/2443309?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jhamman",
      "html_url": "https://github.com/jhamman",
      "followers_url": "https://api.github.com/users/jhamman/followers",
      "following_url": "https://api.github.com/users/jhamman/following{/other_user}",
      "gists_url": "https://api.github.com/users/jhamman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jhamman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jhamman/subscriptions",
      "organizations_url": "https://api.github.com/users/jhamman/orgs",
      "repos_url": "https://api.github.com/users/jhamman/repos",
      "events_url": "https://api.github.com/users/jhamman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jhamman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-30T17:18:24Z",
    "updated_at": "2018-10-30T17:18:24Z",
    "author_association": "NONE",
    "body": "@spencerkclark is going to be the definitive solution here. He wrote the [CFTimeIndex](http://xarray.pydata.org/en/latest/generated/xarray.CFTimeIndex.html#xarray.CFTimeIndex) to provide the sort of functionality that @TimoRoth is trying to achieve here."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/434426373",
    "html_url": "https://github.com/pandas-dev/pandas/issues/23419#issuecomment-434426373",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23419",
    "id": 434426373,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNDQyNjM3Mw==",
    "user": {
      "login": "TimoRoth",
      "id": 16896306,
      "node_id": "MDQ6VXNlcjE2ODk2MzA2",
      "avatar_url": "https://avatars1.githubusercontent.com/u/16896306?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TimoRoth",
      "html_url": "https://github.com/TimoRoth",
      "followers_url": "https://api.github.com/users/TimoRoth/followers",
      "following_url": "https://api.github.com/users/TimoRoth/following{/other_user}",
      "gists_url": "https://api.github.com/users/TimoRoth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TimoRoth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TimoRoth/subscriptions",
      "organizations_url": "https://api.github.com/users/TimoRoth/orgs",
      "repos_url": "https://api.github.com/users/TimoRoth/repos",
      "events_url": "https://api.github.com/users/TimoRoth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TimoRoth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-30T18:54:05Z",
    "updated_at": "2018-10-30T19:04:02Z",
    "author_association": "NONE",
    "body": "> @TimoRoth can you try pinning a `nanosecond = 0` attribute to `real_datetime` and see if that solves the problem?\r\n\r\nI added \"if not hasattr(t, 'nanosecond'): t.nanosecond = 0\" and it now runs through smoothly.\r\n\r\nAn idea I would have to address this on the pandas side would be to replace PyDateTime_CheckExact(val) check at\r\nhttps://github.com/pandas-dev/pandas/blob/7191af9b47f6f57991abdb20625d9563877370a2/pandas/_libs/tslib.pyx#L539\r\nwith a hasattr(val, 'nanosecond'), assuming that's possible in that context.\r\n\r\nThough I must say, I'm confused how it even gets past that check, even though it clearly is not exactly a datetime object. Did some recent python update break something?"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/434430293",
    "html_url": "https://github.com/pandas-dev/pandas/issues/23419#issuecomment-434430293",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23419",
    "id": 434430293,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNDQzMDI5Mw==",
    "user": {
      "login": "jbrockmendel",
      "id": 8078968,
      "node_id": "MDQ6VXNlcjgwNzg5Njg=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/8078968?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jbrockmendel",
      "html_url": "https://github.com/jbrockmendel",
      "followers_url": "https://api.github.com/users/jbrockmendel/followers",
      "following_url": "https://api.github.com/users/jbrockmendel/following{/other_user}",
      "gists_url": "https://api.github.com/users/jbrockmendel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jbrockmendel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jbrockmendel/subscriptions",
      "organizations_url": "https://api.github.com/users/jbrockmendel/orgs",
      "repos_url": "https://api.github.com/users/jbrockmendel/repos",
      "events_url": "https://api.github.com/users/jbrockmendel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jbrockmendel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-30T19:05:42Z",
    "updated_at": "2018-10-30T19:05:42Z",
    "author_association": "MEMBER",
    "body": "We considered that and decided against it because of the performance impact; `hasattr` is a python call whereas `PyDateTime_CheckExact` is a C call.\r\n\r\nWe may be able to figure out a C-speed way to do a check equivalent to `isinstance(obj, _Timestamp)`."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/434446646",
    "html_url": "https://github.com/pandas-dev/pandas/issues/23419#issuecomment-434446646",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23419",
    "id": 434446646,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNDQ0NjY0Ng==",
    "user": {
      "login": "spencerkclark",
      "id": 6628425,
      "node_id": "MDQ6VXNlcjY2Mjg0MjU=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/6628425?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/spencerkclark",
      "html_url": "https://github.com/spencerkclark",
      "followers_url": "https://api.github.com/users/spencerkclark/followers",
      "following_url": "https://api.github.com/users/spencerkclark/following{/other_user}",
      "gists_url": "https://api.github.com/users/spencerkclark/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/spencerkclark/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/spencerkclark/subscriptions",
      "organizations_url": "https://api.github.com/users/spencerkclark/orgs",
      "repos_url": "https://api.github.com/users/spencerkclark/repos",
      "events_url": "https://api.github.com/users/spencerkclark/events{/privacy}",
      "received_events_url": "https://api.github.com/users/spencerkclark/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-30T19:56:38Z",
    "updated_at": "2018-10-30T19:56:38Z",
    "author_association": "NONE",
    "body": "Yes, @TimoRoth, I would recommend trying an `xarray.CFTimeIndex`.  The one caveat is that it requires using purely objects that inherit from `cftime.datetime` objects (which mimic `datetime.datetime` objects, but don't ultimately inherit from them), but this is easily accomplished in recent versions of cftime which include an `only_use_cftime_datetimes` argument to `num2date`.  Here's a short example:\r\n```\r\nIn [1]: import cftime; import pandas as pd; import xarray as xr\r\n\r\nIn [2]: times = cftime.num2date([0,1,2,3,4,5,500,1000], units='days since 1801-10-01',\r\n   ...:                         only_use_cftime_datetimes=True)\r\n\r\nIn [3]: pd.Series(range(len(times)), index=xr.CFTimeIndex(times))\r\nOut[3]:\r\n1801-10-01 00:00:00    0\r\n1801-10-02 00:00:00    1\r\n1801-10-03 00:00:00    2\r\n1801-10-04 00:00:00    3\r\n1801-10-05 00:00:00    4\r\n1801-10-06 00:00:00    5\r\n1803-02-13 00:00:00    6\r\n1804-06-27 00:00:00    7\r\ndtype: int64\r\n```"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/436222504",
    "html_url": "https://github.com/pandas-dev/pandas/issues/23419#issuecomment-436222504",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23419",
    "id": 436222504,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNjIyMjUwNA==",
    "user": {
      "login": "fmaussion",
      "id": 10050469,
      "node_id": "MDQ6VXNlcjEwMDUwNDY5",
      "avatar_url": "https://avatars3.githubusercontent.com/u/10050469?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fmaussion",
      "html_url": "https://github.com/fmaussion",
      "followers_url": "https://api.github.com/users/fmaussion/followers",
      "following_url": "https://api.github.com/users/fmaussion/following{/other_user}",
      "gists_url": "https://api.github.com/users/fmaussion/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fmaussion/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fmaussion/subscriptions",
      "organizations_url": "https://api.github.com/users/fmaussion/orgs",
      "repos_url": "https://api.github.com/users/fmaussion/repos",
      "events_url": "https://api.github.com/users/fmaussion/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fmaussion/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-06T11:34:09Z",
    "updated_at": "2018-11-06T11:34:09Z",
    "author_association": "NONE",
    "body": "We have solved the issue downstream, but it still looks like a regression to me (it used to work - albeit possibly for the wrong reasons). Do you by chance know what broke here? Is it a change in netcdf4/cftime or a change in pandas? "
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/436223715",
    "html_url": "https://github.com/pandas-dev/pandas/issues/23419#issuecomment-436223715",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23419",
    "id": 436223715,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNjIyMzcxNQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-06T11:38:57Z",
    "updated_at": "2018-11-06T11:38:57Z",
    "author_association": "CONTRIBUTOR",
    "body": "I suppose we would take a patch to let arbitrary datetime like scalars here but these are not supported in any way"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/436238476",
    "html_url": "https://github.com/pandas-dev/pandas/issues/23419#issuecomment-436238476",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23419",
    "id": 436238476,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNjIzODQ3Ng==",
    "user": {
      "login": "spencerkclark",
      "id": 6628425,
      "node_id": "MDQ6VXNlcjY2Mjg0MjU=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/6628425?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/spencerkclark",
      "html_url": "https://github.com/spencerkclark",
      "followers_url": "https://api.github.com/users/spencerkclark/followers",
      "following_url": "https://api.github.com/users/spencerkclark/following{/other_user}",
      "gists_url": "https://api.github.com/users/spencerkclark/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/spencerkclark/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/spencerkclark/subscriptions",
      "organizations_url": "https://api.github.com/users/spencerkclark/orgs",
      "repos_url": "https://api.github.com/users/spencerkclark/repos",
      "events_url": "https://api.github.com/users/spencerkclark/events{/privacy}",
      "received_events_url": "https://api.github.com/users/spencerkclark/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-06T12:39:05Z",
    "updated_at": "2018-11-06T12:39:05Z",
    "author_association": "NONE",
    "body": "> Do you by chance know what broke here?\r\n\r\n@fmaussion it looks like a recent change in cftime broke this.  In the past for standard calendars, by default `cftime.num2date` would return an array of normal `datetime.datetime` objects.  As of https://github.com/Unidata/cftime/pull/66 it now returns an array of `cftime.real_datetime` objects (which subclass `datetime.datetime`).\r\n\r\nSo I agree with @jreback that this is not a pandas issue -- it might be worth bringing this up in the cftime issue tracker to discuss options there."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/436253839",
    "html_url": "https://github.com/pandas-dev/pandas/issues/23419#issuecomment-436253839",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23419",
    "id": 436253839,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNjI1MzgzOQ==",
    "user": {
      "login": "fmaussion",
      "id": 10050469,
      "node_id": "MDQ6VXNlcjEwMDUwNDY5",
      "avatar_url": "https://avatars3.githubusercontent.com/u/10050469?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fmaussion",
      "html_url": "https://github.com/fmaussion",
      "followers_url": "https://api.github.com/users/fmaussion/followers",
      "following_url": "https://api.github.com/users/fmaussion/following{/other_user}",
      "gists_url": "https://api.github.com/users/fmaussion/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fmaussion/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fmaussion/subscriptions",
      "organizations_url": "https://api.github.com/users/fmaussion/orgs",
      "repos_url": "https://api.github.com/users/fmaussion/repos",
      "events_url": "https://api.github.com/users/fmaussion/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fmaussion/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-06T13:33:54Z",
    "updated_at": "2018-11-06T13:33:54Z",
    "author_association": "NONE",
    "body": "Thanks panda team for the quick help! \r\n\r\nWe move the discussion to https://github.com/Unidata/cftime/issues/77 instead. \r\n\r\nFeel free to close the issue, for some reason I can't do it"
  }
]
