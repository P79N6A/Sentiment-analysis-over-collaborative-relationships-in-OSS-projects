[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/172811734",
    "html_url": "https://github.com/pandas-dev/pandas/issues/12089#issuecomment-172811734",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/12089",
    "id": 172811734,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3MjgxMTczNA==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-01-19T10:32:21Z",
    "updated_at": "2016-01-19T10:32:21Z",
    "author_association": "MEMBER",
    "body": "I can confirm this bug, also with current master. \n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/172834959",
    "html_url": "https://github.com/pandas-dev/pandas/issues/12089#issuecomment-172834959",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/12089",
    "id": 172834959,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3MjgzNDk1OQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-01-19T12:17:21Z",
    "updated_at": "2016-01-19T12:17:21Z",
    "author_association": "CONTRIBUTOR",
    "body": "just need a `try: except:` around line 1780 catching `IndexError` and passing if its caught.\n\n@JackKelly want to do a PR?\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/172835099",
    "html_url": "https://github.com/pandas-dev/pandas/issues/12089#issuecomment-172835099",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/12089",
    "id": 172835099,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3MjgzNTA5OQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-01-19T12:18:10Z",
    "updated_at": "2016-01-19T12:18:10Z",
    "author_association": "CONTRIBUTOR",
    "body": "tests can go in the same place as in #12054 \n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/172837135",
    "html_url": "https://github.com/pandas-dev/pandas/issues/12089#issuecomment-172837135",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/12089",
    "id": 172837135,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3MjgzNzEzNQ==",
    "user": {
      "login": "JackKelly",
      "id": 460756,
      "node_id": "MDQ6VXNlcjQ2MDc1Ng==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/460756?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JackKelly",
      "html_url": "https://github.com/JackKelly",
      "followers_url": "https://api.github.com/users/JackKelly/followers",
      "following_url": "https://api.github.com/users/JackKelly/following{/other_user}",
      "gists_url": "https://api.github.com/users/JackKelly/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JackKelly/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JackKelly/subscriptions",
      "organizations_url": "https://api.github.com/users/JackKelly/orgs",
      "repos_url": "https://api.github.com/users/JackKelly/repos",
      "events_url": "https://api.github.com/users/JackKelly/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JackKelly/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-01-19T12:29:47Z",
    "updated_at": "2016-01-19T12:29:47Z",
    "author_association": "CONTRIBUTOR",
    "body": "sure, I'll give it a go now...\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/172852534",
    "html_url": "https://github.com/pandas-dev/pandas/issues/12089#issuecomment-172852534",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/12089",
    "id": 172852534,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3Mjg1MjUzNA==",
    "user": {
      "login": "JackKelly",
      "id": 460756,
      "node_id": "MDQ6VXNlcjQ2MDc1Ng==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/460756?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JackKelly",
      "html_url": "https://github.com/JackKelly",
      "followers_url": "https://api.github.com/users/JackKelly/followers",
      "following_url": "https://api.github.com/users/JackKelly/following{/other_user}",
      "gists_url": "https://api.github.com/users/JackKelly/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JackKelly/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JackKelly/subscriptions",
      "organizations_url": "https://api.github.com/users/JackKelly/orgs",
      "repos_url": "https://api.github.com/users/JackKelly/repos",
      "events_url": "https://api.github.com/users/JackKelly/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JackKelly/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-01-19T13:27:53Z",
    "updated_at": "2016-01-19T13:27:53Z",
    "author_association": "CONTRIBUTOR",
    "body": "OK, I've attempted the fix.  [Here's the relevant commit on my fork of Pandas](https://github.com/JackKelly/pandas/commit/420c926932811d405c33d2c08bda122f6990684e).\n\nHowever, this hasn't fixed the issue and I'm not sure what's best to do.  My 'fix' has revealed a new issue.  The problem appears to be that, now, when we do `series['a']`, we get back a tz-_naive_ Timestamp (even though the `series` contains a bunch of tz-_aware_ datetime64s):\n\n``` python\nIn [5]: dates = pd.date_range(\"2011-01-01\", periods=3, tz='utc')\n\nIn [6]: dates\nOut[6]: DatetimeIndex(['2011-01-01', '2011-01-02', '2011-01-03'], dtype='datetime64[ns, UTC]', freq='D')\n\nIn [7]: series = pd.Series(dates, index=['a', 'b', 'c'])\n\n# Note the lack of timezone:\nIn [8]: series['a']\nOut[8]: Timestamp('2011-01-01 00:00:00')\n\n# But using `loc` we do get the timezone:\nIn [9]: series.loc['a']\nOut[9]: Timestamp('2011-01-01 00:00:00+0000', tz='UTC')\n\nIn [10]: series\nOut[10]: \na   2011-01-01 00:00:00+00:00\nb   2011-01-02 00:00:00+00:00\nc   2011-01-03 00:00:00+00:00\ndtype: datetime64[ns, UTC]\n\nIn [11]: series['a'] == series.loc['a']\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n<ipython-input-11-0de902e8919c> in <module>()\n----> 1 series['a'] == series.loc['a']\n\n/home/jack/workspace/python/pandas/pandas/tslib.pyx in pandas.tslib._Timestamp.__richcmp__ (pandas/tslib.c:19258)()\n    971                                 (type(self).__name__, type(other).__name__))\n    972 \n--> 973         self._assert_tzawareness_compat(other)\n    974         return _cmp_scalar(self.value, ots.value, op)\n    975 \n\n/home/jack/workspace/python/pandas/pandas/tslib.pyx in pandas.tslib._Timestamp._assert_tzawareness_compat (pandas/tslib.c:19638)()\n   1000         if self.tzinfo is None:\n   1001             if other.tzinfo is not None:\n-> 1002                 raise TypeError('Cannot compare tz-naive and tz-aware '\n   1003                                  'timestamps')\n   1004         elif other.tzinfo is None:\n\nTypeError: Cannot compare tz-naive and tz-aware timestamps\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/172904794",
    "html_url": "https://github.com/pandas-dev/pandas/issues/12089#issuecomment-172904794",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/12089",
    "id": 172904794,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3MjkwNDc5NA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-01-19T16:20:07Z",
    "updated_at": "2016-01-19T16:20:07Z",
    "author_association": "CONTRIBUTOR",
    "body": "yeh, prob some issues down the path. lmk if you get stuck.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/172977830",
    "html_url": "https://github.com/pandas-dev/pandas/issues/12089#issuecomment-172977830",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/12089",
    "id": 172977830,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3Mjk3NzgzMA==",
    "user": {
      "login": "JackKelly",
      "id": 460756,
      "node_id": "MDQ6VXNlcjQ2MDc1Ng==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/460756?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JackKelly",
      "html_url": "https://github.com/JackKelly",
      "followers_url": "https://api.github.com/users/JackKelly/followers",
      "following_url": "https://api.github.com/users/JackKelly/following{/other_user}",
      "gists_url": "https://api.github.com/users/JackKelly/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JackKelly/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JackKelly/subscriptions",
      "organizations_url": "https://api.github.com/users/JackKelly/orgs",
      "repos_url": "https://api.github.com/users/JackKelly/repos",
      "events_url": "https://api.github.com/users/JackKelly/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JackKelly/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-01-19T20:34:46Z",
    "updated_at": "2016-01-19T20:46:38Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hmm, I think this is way over my head to be honest.  I'm really not very familiar with Pandas' internals.  I have had a quick shot at getting to the bottom of it.  Not sure if I've found any bugs or not.  Here are my notes:\n\nSet up a debugging session in IPython like this:\n\n``` python\ndates_with_tz = pd.date_range(\"2011-01-01\", periods=3, tz=\"US/Eastern\")\ns_with_tz = pd.Series(dates_with_tz, index=['a', 'b', 'c'])\n%debug s_with_tz['a']\n```\n\nwe find that:\n\nIn `Index.get_value()`, the line `s = _values_from_object(series)` sets `s` to be:\n\n``` python\n['2011-01-01T05:00:00.000000000+0000' '2011-01-02T05:00:00.000000000+0000'\n '2011-01-03T05:00:00.000000000+0000']\n```\n\ni.e. timezone is switched from \"US/Eastern\" to UTC.  I've tried stepping into `_values_from_object(series)` to find where the timezone is switched but I'm not sure I understand what I'm looking at.  My only hunch is that the following is broken (because the timezone should still be US/Eastern, surely?):\n\n``` python\nIn [32]: s_with_tz._values._values\nOut[32]: \narray(['2011-01-01T05:00:00.000000000+0000',\n       '2011-01-02T05:00:00.000000000+0000',\n       '2011-01-03T05:00:00.000000000+0000'], dtype='datetime64[ns]')\n```\n\nbut I'm really not sure!  Is `s_with_tz._values._values` supposed to return an array where the timezone is set to UTC instead of 'US/Eastern'?  Here are the other values (which look correct to me):\n\n``` python\nIn [33]: s_with_tz._values\nOut[33]: \nDatetimeIndex(['2011-01-01 00:00:00-05:00', '2011-01-02 00:00:00-05:00',\n               '2011-01-03 00:00:00-05:00'],\n              dtype='datetime64[ns, US/Eastern]', freq='D')\n\nIn [34]: s_with_tz\nOut[34]: \na   2011-01-01 00:00:00-05:00\nb   2011-01-02 00:00:00-05:00\nc   2011-01-03 00:00:00-05:00\ndtype: datetime64[ns, US/Eastern]\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/175608970",
    "html_url": "https://github.com/pandas-dev/pandas/issues/12089#issuecomment-175608970",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/12089",
    "id": 175608970,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3NTYwODk3MA==",
    "user": {
      "login": "JackKelly",
      "id": 460756,
      "node_id": "MDQ6VXNlcjQ2MDc1Ng==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/460756?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JackKelly",
      "html_url": "https://github.com/JackKelly",
      "followers_url": "https://api.github.com/users/JackKelly/followers",
      "following_url": "https://api.github.com/users/JackKelly/following{/other_user}",
      "gists_url": "https://api.github.com/users/JackKelly/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JackKelly/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JackKelly/subscriptions",
      "organizations_url": "https://api.github.com/users/JackKelly/orgs",
      "repos_url": "https://api.github.com/users/JackKelly/repos",
      "events_url": "https://api.github.com/users/JackKelly/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JackKelly/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-01-27T13:03:32Z",
    "updated_at": "2016-01-27T13:03:32Z",
    "author_association": "CONTRIBUTOR",
    "body": "thank you @jreback :)\n"
  }
]
