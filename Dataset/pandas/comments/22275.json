[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/412229486",
    "html_url": "https://github.com/pandas-dev/pandas/issues/22275#issuecomment-412229486",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/22275",
    "id": 412229486,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMjIyOTQ4Ng==",
    "user": {
      "login": "drudd",
      "id": 4128715,
      "node_id": "MDQ6VXNlcjQxMjg3MTU=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/4128715?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/drudd",
      "html_url": "https://github.com/drudd",
      "followers_url": "https://api.github.com/users/drudd/followers",
      "following_url": "https://api.github.com/users/drudd/following{/other_user}",
      "gists_url": "https://api.github.com/users/drudd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/drudd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/drudd/subscriptions",
      "organizations_url": "https://api.github.com/users/drudd/orgs",
      "repos_url": "https://api.github.com/users/drudd/repos",
      "events_url": "https://api.github.com/users/drudd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/drudd/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-10T23:14:43Z",
    "updated_at": "2018-08-10T23:14:43Z",
    "author_association": "CONTRIBUTOR",
    "body": "Tracing through, the 'a' column appears to be dropped by this section of `NDFrameGroupBy. _cython_agg_blocks`:\r\n\r\n```\r\n        if numeric_only:\r\n            data = data.get_numeric_data(copy=False)\r\n```\r\nSpecifically this line: https://github.com/pandas-dev/pandas/blob/0409521665bd436a10aea7e06336066bf07ff057/pandas/core/groupby/groupby.py#L4006\r\n\r\nThis suggests to me that there's a mismatch with the logic that sets `numeric_only` (True), and `.get_numeric_data` which skips the Decimal field, encoded as objects."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/412230935",
    "html_url": "https://github.com/pandas-dev/pandas/issues/22275#issuecomment-412230935",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/22275",
    "id": 412230935,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMjIzMDkzNQ==",
    "user": {
      "login": "WillAyd",
      "id": 609873,
      "node_id": "MDQ6VXNlcjYwOTg3Mw==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/609873?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/WillAyd",
      "html_url": "https://github.com/WillAyd",
      "followers_url": "https://api.github.com/users/WillAyd/followers",
      "following_url": "https://api.github.com/users/WillAyd/following{/other_user}",
      "gists_url": "https://api.github.com/users/WillAyd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/WillAyd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/WillAyd/subscriptions",
      "organizations_url": "https://api.github.com/users/WillAyd/orgs",
      "repos_url": "https://api.github.com/users/WillAyd/repos",
      "events_url": "https://api.github.com/users/WillAyd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/WillAyd/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-10T23:26:09Z",
    "updated_at": "2018-08-10T23:26:09Z",
    "author_association": "MEMBER",
    "body": "There is no native support for Decimal types in NumPy and therefore it is also generally weakly supported in pandas. In theory a community-contributed Extension would help improve that.\r\n\r\nIn the meantime though I do agree that it's strange that there is a difference between the Series and DataFrame GroupBy mechanism's. Investigation and PRs to align that behavior are certainly welcome"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/412232013",
    "html_url": "https://github.com/pandas-dev/pandas/issues/22275#issuecomment-412232013",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/22275",
    "id": 412232013,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMjIzMjAxMw==",
    "user": {
      "login": "drudd",
      "id": 4128715,
      "node_id": "MDQ6VXNlcjQxMjg3MTU=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/4128715?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/drudd",
      "html_url": "https://github.com/drudd",
      "followers_url": "https://api.github.com/users/drudd/followers",
      "following_url": "https://api.github.com/users/drudd/following{/other_user}",
      "gists_url": "https://api.github.com/users/drudd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/drudd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/drudd/subscriptions",
      "organizations_url": "https://api.github.com/users/drudd/orgs",
      "repos_url": "https://api.github.com/users/drudd/repos",
      "events_url": "https://api.github.com/users/drudd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/drudd/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-10T23:35:15Z",
    "updated_at": "2018-08-10T23:35:15Z",
    "author_association": "CONTRIBUTOR",
    "body": "My above comment appears to be correct, `numeric_only = True` is set for `sum` when that groupby function is created:  \r\nhttps://github.com/pandas-dev/pandas/blob/0409521665bd436a10aea7e06336066bf07ff057/pandas/core/groupby/groupby.py#L1466\r\n\r\nWhich can be seen by using a non-numeric_only group function such as min:\r\n```\r\ndf.groupby('b')['a', 'c'].min()\r\n```\r\nproduces\r\n```\r\n      a  c\r\nb\r\n3  4.56  0\r\n4  4.56  1\r\n5  4.56  2\r\n```\r\n\r\nNot knowing this api very closely I'm surprised that an exception isn't raised earlier in the process if one of the fields is non-numeric (and would be happy if it did so rather than silently dropping data)."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/412232557",
    "html_url": "https://github.com/pandas-dev/pandas/issues/22275#issuecomment-412232557",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/22275",
    "id": 412232557,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMjIzMjU1Nw==",
    "user": {
      "login": "drudd",
      "id": 4128715,
      "node_id": "MDQ6VXNlcjQxMjg3MTU=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/4128715?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/drudd",
      "html_url": "https://github.com/drudd",
      "followers_url": "https://api.github.com/users/drudd/followers",
      "following_url": "https://api.github.com/users/drudd/following{/other_user}",
      "gists_url": "https://api.github.com/users/drudd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/drudd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/drudd/subscriptions",
      "organizations_url": "https://api.github.com/users/drudd/orgs",
      "repos_url": "https://api.github.com/users/drudd/repos",
      "events_url": "https://api.github.com/users/drudd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/drudd/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-10T23:40:06Z",
    "updated_at": "2018-08-10T23:40:06Z",
    "author_association": "CONTRIBUTOR",
    "body": "Another tactic would be to remove the `get_numeric_data` call and rely on the try/except later in the loop which should get raised if there is no appropriate aggregation function.\r\n\r\nI have tested this and it restores consistency between the two methods. Happy to PR if we can be confident this won't break other logic."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/412237359",
    "html_url": "https://github.com/pandas-dev/pandas/issues/22275#issuecomment-412237359",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/22275",
    "id": 412237359,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMjIzNzM1OQ==",
    "user": {
      "login": "WillAyd",
      "id": 609873,
      "node_id": "MDQ6VXNlcjYwOTg3Mw==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/609873?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/WillAyd",
      "html_url": "https://github.com/WillAyd",
      "followers_url": "https://api.github.com/users/WillAyd/followers",
      "following_url": "https://api.github.com/users/WillAyd/following{/other_user}",
      "gists_url": "https://api.github.com/users/WillAyd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/WillAyd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/WillAyd/subscriptions",
      "organizations_url": "https://api.github.com/users/WillAyd/orgs",
      "repos_url": "https://api.github.com/users/WillAyd/repos",
      "events_url": "https://api.github.com/users/WillAyd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/WillAyd/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-11T00:27:53Z",
    "updated_at": "2018-08-11T00:27:53Z",
    "author_association": "MEMBER",
    "body": "If you have something that works and doesn't break other tests locally feel free to submit as a PR"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/412240239",
    "html_url": "https://github.com/pandas-dev/pandas/issues/22275#issuecomment-412240239",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/22275",
    "id": 412240239,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMjI0MDIzOQ==",
    "user": {
      "login": "drudd",
      "id": 4128715,
      "node_id": "MDQ6VXNlcjQxMjg3MTU=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/4128715?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/drudd",
      "html_url": "https://github.com/drudd",
      "followers_url": "https://api.github.com/users/drudd/followers",
      "following_url": "https://api.github.com/users/drudd/following{/other_user}",
      "gists_url": "https://api.github.com/users/drudd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/drudd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/drudd/subscriptions",
      "organizations_url": "https://api.github.com/users/drudd/orgs",
      "repos_url": "https://api.github.com/users/drudd/repos",
      "events_url": "https://api.github.com/users/drudd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/drudd/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-11T01:06:56Z",
    "updated_at": "2018-08-11T01:06:56Z",
    "author_association": "CONTRIBUTOR",
    "body": "Unfortunately it causes a series of test failures, so the solution isn't quite so simple. "
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/412245841",
    "html_url": "https://github.com/pandas-dev/pandas/issues/22275#issuecomment-412245841",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/22275",
    "id": 412245841,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMjI0NTg0MQ==",
    "user": {
      "login": "drudd",
      "id": 4128715,
      "node_id": "MDQ6VXNlcjQxMjg3MTU=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/4128715?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/drudd",
      "html_url": "https://github.com/drudd",
      "followers_url": "https://api.github.com/users/drudd/followers",
      "following_url": "https://api.github.com/users/drudd/following{/other_user}",
      "gists_url": "https://api.github.com/users/drudd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/drudd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/drudd/subscriptions",
      "organizations_url": "https://api.github.com/users/drudd/orgs",
      "repos_url": "https://api.github.com/users/drudd/repos",
      "events_url": "https://api.github.com/users/drudd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/drudd/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-11T02:45:40Z",
    "updated_at": "2018-08-11T02:45:40Z",
    "author_association": "CONTRIBUTOR",
    "body": "This bug is similar to #21664 and I think the failing tests may be expecting \r\nhttp://pandas.pydata.org/pandas-docs/stable/groupby.html#automatic-exclusion-of-nuisance-columns"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/412311400",
    "html_url": "https://github.com/pandas-dev/pandas/issues/22275#issuecomment-412311400",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/22275",
    "id": 412311400,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMjMxMTQwMA==",
    "user": {
      "login": "jschendel",
      "id": 5332445,
      "node_id": "MDQ6VXNlcjUzMzI0NDU=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/5332445?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jschendel",
      "html_url": "https://github.com/jschendel",
      "followers_url": "https://api.github.com/users/jschendel/followers",
      "following_url": "https://api.github.com/users/jschendel/following{/other_user}",
      "gists_url": "https://api.github.com/users/jschendel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jschendel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jschendel/subscriptions",
      "organizations_url": "https://api.github.com/users/jschendel/orgs",
      "repos_url": "https://api.github.com/users/jschendel/repos",
      "events_url": "https://api.github.com/users/jschendel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jschendel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-12T01:04:48Z",
    "updated_at": "2018-08-12T01:04:48Z",
    "author_association": "MEMBER",
    "body": "> There is no native support for Decimal types in NumPy and therefore it is also generally weakly supported in pandas. In theory a community-contributed Extension would help improve that.\r\n\r\nAs a side note, we actually have this within our test suite, albeit in a fledgling state:\r\n\r\nhttps://github.com/pandas-dev/pandas/blob/0370740034978d3a63d4b8e5e2c96ff54e7e08ba/pandas/tests/extension/decimal/array.py#L37-L118\r\n\r\nThis doesn't quite get the job done though, as there's currently no way to dynamically alter `ExtensionBlock.is_numeric`, which currently is always `False`, and is what `get_numeric_data` is ultimately looking at for `DecimalArray`.\r\n\r\nWill open a separate issue for the above though, as it's only tangentially related to this issue, and using `DecimalArray` would really only resolve this issue for the `Decimal` case (i.e. a more generic solution for `object` dtype might be nice?)."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/422848340",
    "html_url": "https://github.com/pandas-dev/pandas/issues/22275#issuecomment-422848340",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/22275",
    "id": 422848340,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyMjg0ODM0MA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-09-19T15:31:34Z",
    "updated_at": "2018-09-19T15:31:34Z",
    "author_association": "CONTRIBUTOR",
    "body": "I think this will just work after #22762 (if constructed as a ``DecimalArray``)"
  }
]
