[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/279049334",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15364#issuecomment-279049334",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15364",
    "id": 279049334,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3OTA0OTMzNA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-10T19:53:32Z",
    "updated_at": "2017-02-10T19:53:32Z",
    "author_association": "CONTRIBUTOR",
    "body": "of course, you shouldn't use a non-unique MI."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/279049531",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15364#issuecomment-279049531",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15364",
    "id": 279049531,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3OTA0OTUzMQ==",
    "user": {
      "login": "horta",
      "id": 514522,
      "node_id": "MDQ6VXNlcjUxNDUyMg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/514522?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/horta",
      "html_url": "https://github.com/horta",
      "followers_url": "https://api.github.com/users/horta/followers",
      "following_url": "https://api.github.com/users/horta/following{/other_user}",
      "gists_url": "https://api.github.com/users/horta/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/horta/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/horta/subscriptions",
      "organizations_url": "https://api.github.com/users/horta/orgs",
      "repos_url": "https://api.github.com/users/horta/repos",
      "events_url": "https://api.github.com/users/horta/events{/privacy}",
      "received_events_url": "https://api.github.com/users/horta/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-10T19:54:16Z",
    "updated_at": "2017-02-10T19:54:16Z",
    "author_association": "NONE",
    "body": "Why not?"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/279049565",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15364#issuecomment-279049565",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15364",
    "id": 279049565,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3OTA0OTU2NQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-10T19:54:22Z",
    "updated_at": "2017-02-10T19:54:22Z",
    "author_association": "CONTRIBUTOR",
    "body": "if you have a perf fix, please submit a pull-request.\r\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/279049752",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15364#issuecomment-279049752",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15364",
    "id": 279049752,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3OTA0OTc1Mg==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-10T19:55:08Z",
    "updated_at": "2017-02-10T19:55:08Z",
    "author_association": "CONTRIBUTOR",
    "body": "@Horta well we use a hashtable to look up values in a unique MI. so this is quite performant. Non-unique are very uncommon , and hence don't get much attention. Indexing is hard / non-performant."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/279050350",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15364#issuecomment-279050350",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15364",
    "id": 279050350,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3OTA1MDM1MA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-10T19:57:32Z",
    "updated_at": "2017-02-10T19:57:32Z",
    "author_association": "CONTRIBUTOR",
    "body": "To be honest this has not come up before, and is not benchmarked at all. If you have a small example would be great. Better yet a soln!"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/279052694",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15364#issuecomment-279052694",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15364",
    "id": 279052694,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3OTA1MjY5NA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-10T20:07:33Z",
    "updated_at": "2017-02-10T20:07:33Z",
    "author_association": "CONTRIBUTOR",
    "body": "So I would buy that this is inefficient (it doesn't matter if its a MI or not, FYI)\r\n\r\n```\r\nIn [6]: Index(Index(np.arange(1000000)).tolist() + Index(np.arange(1000000)).tolist())\r\nOut[6]: \r\nInt64Index([     0,      1,      2,      3,      4,      5,      6,      7,      8,      9,\r\n            ...\r\n            999990, 999991, 999992, 999993, 999994, 999995, 999996, 999997, 999998, 999999],\r\n           dtype='int64', length=2000000)\r\n\r\nIn [7]: i = Index(Index(np.arange(1000000)).tolist() + Index(np.arange(1000000)).tolist())\r\n\r\nIn [8]: len(i)\r\nOut[8]: 2000000\r\n\r\nIn [9]: i.is_unique\r\nOut[9]: False\r\n\r\nIn [10]: %time i.get_indexer_non_unique(i[0:10000])\r\nCPU times: user 216 ms, sys: 10.1 ms, total: 226 ms\r\nWall time: 226 ms\r\nOut[10]: \r\n(Int64Index([      0, 1000000,       1, 1000001,       2, 1000002,       3, 1000003,       4, 1000004,\r\n             ...\r\n                9995, 1009995,    9996, 1009996,    9997, 1009997,    9998, 1009998,    9999, 1009999],\r\n            dtype='int64', length=20000), array([], dtype=int64))\r\n\r\nIn [11]: i = Index(Index(np.arange(1000000)).tolist() + Index(np.arange(1000000)).tolist())\r\n\r\nIn [12]: %time i.get_indexer_non_unique(i[0:100000])\r\nCPU times: user 372 ms, sys: 33.3 ms, total: 406 ms\r\nWall time: 406 ms\r\nOut[12]: \r\n(Int64Index([      0, 1000000,       1, 1000001,       2, 1000002,       3, 1000003,       4, 1000004,\r\n             ...\r\n               99995, 1099995,   99996, 1099996,   99997, 1099997,   99998, 1099998,   99999, 1099999],\r\n            dtype='int64', length=200000), array([], dtype=int64))\r\n\r\nIn [13]: i = Index(Index(np.arange(1000000)).tolist() + Index(np.arange(1000000)).tolist())\r\n\r\nIn [14]: %time i.get_indexer_non_unique(i[0:1000000])\r\nCPU times: user 2.7 s, sys: 1.35 s, total: 4.05 s\r\nWall time: 4.06 s\r\nOut[14]: \r\n(Int64Index([      0, 1000000,       1, 1000001,       2, 1000002,       3, 1000003,       4, 1000004,\r\n             ...\r\n              999995, 1999995,  999996, 1999996,  999997, 1999997,  999998, 1999998,  999999, 1999999],\r\n            dtype='int64', length=2000000), array([], dtype=int64))\r\n```\r\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/279053470",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15364#issuecomment-279053470",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15364",
    "id": 279053470,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3OTA1MzQ3MA==",
    "user": {
      "login": "horta",
      "id": 514522,
      "node_id": "MDQ6VXNlcjUxNDUyMg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/514522?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/horta",
      "html_url": "https://github.com/horta",
      "followers_url": "https://api.github.com/users/horta/followers",
      "following_url": "https://api.github.com/users/horta/following{/other_user}",
      "gists_url": "https://api.github.com/users/horta/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/horta/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/horta/subscriptions",
      "organizations_url": "https://api.github.com/users/horta/orgs",
      "repos_url": "https://api.github.com/users/horta/repos",
      "events_url": "https://api.github.com/users/horta/events{/privacy}",
      "received_events_url": "https://api.github.com/users/horta/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-10T20:10:45Z",
    "updated_at": "2017-02-10T20:10:45Z",
    "author_association": "NONE",
    "body": "omg that was quick o.o\r\n\r\nThanks for the feedback! I actually have an example that is taking like 30 minutes to finish, and I'm working with not so big indices. I will clean that example up and post here asap."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/279055510",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15364#issuecomment-279055510",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15364",
    "id": 279055510,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3OTA1NTUxMA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-10T20:19:55Z",
    "updated_at": "2017-02-10T20:21:10Z",
    "author_association": "CONTRIBUTOR",
    "body": "yeah this certainly can be fixed, but when I wrote this a while back it was quick and dirtly. Welcome to have you work on it!\r\n\r\nThat cython code is pretty inefficient actually. Need a better structure that can be completely in-lined."
  }
]
