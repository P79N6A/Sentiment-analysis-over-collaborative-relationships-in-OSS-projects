[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/52043159",
    "html_url": "https://github.com/pandas-dev/pandas/issues/8014#issuecomment-52043159",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/8014",
    "id": 52043159,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyMDQzMTU5",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-08-13T12:48:44Z",
    "updated_at": "2014-08-13T12:48:44Z",
    "author_association": "CONTRIBUTOR",
    "body": "you would need to narrow this down to a small reproducible example.\n- create a test frame\n- write to the store\n- read in chunks so the where _should_ encompass all values\n- concat the chunks to form a composite frame\n- compare versus the original\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/52097049",
    "html_url": "https://github.com/pandas-dev/pandas/issues/8014#issuecomment-52097049",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/8014",
    "id": 52097049,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyMDk3MDQ5",
    "user": {
      "login": "bboerner",
      "id": 1400227,
      "node_id": "MDQ6VXNlcjE0MDAyMjc=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1400227?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bboerner",
      "html_url": "https://github.com/bboerner",
      "followers_url": "https://api.github.com/users/bboerner/followers",
      "following_url": "https://api.github.com/users/bboerner/following{/other_user}",
      "gists_url": "https://api.github.com/users/bboerner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bboerner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bboerner/subscriptions",
      "organizations_url": "https://api.github.com/users/bboerner/orgs",
      "repos_url": "https://api.github.com/users/bboerner/repos",
      "events_url": "https://api.github.com/users/bboerner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bboerner/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-08-13T19:20:50Z",
    "updated_at": "2014-08-13T19:20:50Z",
    "author_association": "NONE",
    "body": "This _is_ the reproducible example which I did narrow down. As I noted simply writing test frames of length chunksize \\* some multiple followed by a DataFrame of len 64 does not reproduce the problem.\n\nI explained that the problem only occurs once 200000 + 58689 + 41375 rows are written.\n\nComparing the concatted frame to the original will fail because the concatted frame is missing the last 64 elements as I noted.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/52097362",
    "html_url": "https://github.com/pandas-dev/pandas/issues/8014#issuecomment-52097362",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/8014",
    "id": 52097362,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyMDk3MzYy",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-08-13T19:23:11Z",
    "updated_at": "2014-08-13T19:23:11Z",
    "author_association": "CONTRIBUTOR",
    "body": "@bboerner \n\nin order for this to be tested it has to be constructed as a test.\n\nOnce you have a test that reliably fails then you can debug.\n\nPls see the format here: https://github.com/pydata/pandas/blob/master/pandas/io/tests/test_pytables.py\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/52097464",
    "html_url": "https://github.com/pandas-dev/pandas/issues/8014#issuecomment-52097464",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/8014",
    "id": 52097464,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyMDk3NDY0",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-08-13T19:23:59Z",
    "updated_at": "2014-08-13T19:27:05Z",
    "author_association": "CONTRIBUTOR",
    "body": "It _looks_ like a bug, but it could be that your selection is simply incorrect. Hard to test w/o a reliable test.\nSimply comparing the length is not enough. What if each chunk is off by 1 in your selection (I am not saying it is), and the length compares equal (but is in fact right)? or vice-versa.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/52099449",
    "html_url": "https://github.com/pandas-dev/pandas/issues/8014#issuecomment-52099449",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/8014",
    "id": 52099449,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyMDk5NDQ5",
    "user": {
      "login": "bboerner",
      "id": 1400227,
      "node_id": "MDQ6VXNlcjE0MDAyMjc=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1400227?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bboerner",
      "html_url": "https://github.com/bboerner",
      "followers_url": "https://api.github.com/users/bboerner/followers",
      "following_url": "https://api.github.com/users/bboerner/following{/other_user}",
      "gists_url": "https://api.github.com/users/bboerner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bboerner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bboerner/subscriptions",
      "organizations_url": "https://api.github.com/users/bboerner/orgs",
      "repos_url": "https://api.github.com/users/bboerner/repos",
      "events_url": "https://api.github.com/users/bboerner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bboerner/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-08-13T19:39:21Z",
    "updated_at": "2014-08-13T19:39:21Z",
    "author_association": "NONE",
    "body": "@jreback, understood, I'll work up a test. Thanks.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/52144961",
    "html_url": "https://github.com/pandas-dev/pandas/issues/8014#issuecomment-52144961",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/8014",
    "id": 52144961,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyMTQ0OTYx",
    "user": {
      "login": "bboerner",
      "id": 1400227,
      "node_id": "MDQ6VXNlcjE0MDAyMjc=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1400227?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bboerner",
      "html_url": "https://github.com/bboerner",
      "followers_url": "https://api.github.com/users/bboerner/followers",
      "following_url": "https://api.github.com/users/bboerner/following{/other_user}",
      "gists_url": "https://api.github.com/users/bboerner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bboerner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bboerner/subscriptions",
      "organizations_url": "https://api.github.com/users/bboerner/orgs",
      "repos_url": "https://api.github.com/users/bboerner/repos",
      "events_url": "https://api.github.com/users/bboerner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bboerner/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-08-14T05:23:24Z",
    "updated_at": "2014-08-14T05:23:24Z",
    "author_association": "NONE",
    "body": "@jreback,\n\nThis can be added to https://github.com/pydata/pandas/blob/master/pandas/io/tests/test_pytables.py and reproduces the problem.\n\nRegards.\n\n```\n    def test_select_iterator_8014(self):\n\n        # single table\n        chunksize=1e4\n        with ensure_clean_store(self.path) as store:\n\n            df = tm.makeTimeDataFrame(100064, 'S')\n            _maybe_remove(store, 'df')\n            i = 0; ln = 58689\n            store.append('df', df[i:i+ln])\n            i = i+ln; ln = 41375\n            store.append('df', df[i:i+ln])\n            expected = df\n\n            beg_dt = expected.index[0]\n            end_dt = expected.index[-1]\n\n            #\n            # w/o iterator\n            #\n\n            # select w/o iteration and no where clause works\n            result = store.select('df')\n            tm.assert_frame_equal(expected, result)\n\n            # select w/o iterator and where clause, single term, begin\n            # of range, works\n            where = \"index >= '%s'\" % beg_dt\n            result = store.select('df',where=where)\n            tm.assert_frame_equal(expected, result)\n\n            # select w/o iterator and where clause, single term, end\n            # of range, works\n            where = \"index <= '%s'\" % end_dt\n            result = store.select('df',where=where)\n            tm.assert_frame_equal(expected, result)\n\n            # select w/o iterator and where clause, inclusive range,\n            # works\n            where = \"index >= '%s' & index <= '%s'\" % (beg_dt, end_dt)\n            result = store.select('df',where=where)\n            tm.assert_frame_equal(expected, result)\n\n            #\n            # with iterator\n            #\n\n            # select w/iterator and no where clause works\n            results = []\n            for s in store.select('df',iterator=True, chunksize=chunksize):\n                results.append(s)\n            result = concat(results)\n            tm.assert_frame_equal(expected, result)\n\n            # select w/iterator and where clause, single term, begin\n            # of range, fails\n            where = \"index >= '%s'\" % beg_dt\n            results = []\n            for s in store.select('df',where=where,iterator=True, chunksize=chunksize):\n                results.append(s)\n            result = concat(results)\n            tm.assert_frame_equal(expected, result)\n\n            # select w/iterator and where clause, single term, end of\n            # range, fails\n            where = \"index <= '%s'\" % end_dt\n            results = []\n            for s in store.select('df',where=where,iterator=True, chunksize=chunksize):\n                results.append(s)\n            result = concat(results)\n            tm.assert_frame_equal(expected, result)\n\n            # select w/iterator and where clause, inclusive range, fails\n            where = \"index >= '%s' & index <= '%s'\" % (beg_dt, end_dt)\n            results = []\n            for s in store.select('df',where=where,iterator=True, chunksize=chunksize):\n                results.append(s)\n            result = concat(results)\n            tm.assert_frame_equal(expected, result)\n\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/52191288",
    "html_url": "https://github.com/pandas-dev/pandas/issues/8014#issuecomment-52191288",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/8014",
    "id": 52191288,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyMTkxMjg4",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-08-14T14:36:54Z",
    "updated_at": "2014-08-14T14:36:54Z",
    "author_association": "CONTRIBUTOR",
    "body": "@bboerner ok, was very subtle, fixed in #8029 \n\nessentially if a chunk happened to select more than the chunksize (which happens in this example when  the date crosses a day boundary). This might actually be a bug in pytables, not sure.\n\nIn any event can completely bypass this but simply selecting the coordinates with the where up front, then using the chunksize to iterate over them (and selecting the data).\n\nalso this then conforms to the docs where you will get chunksize in every chunk (possibly less in the last one). OF THE RESULTS.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/52234751",
    "html_url": "https://github.com/pandas-dev/pandas/issues/8014#issuecomment-52234751",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/8014",
    "id": 52234751,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyMjM0NzUx",
    "user": {
      "login": "bboerner",
      "id": 1400227,
      "node_id": "MDQ6VXNlcjE0MDAyMjc=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1400227?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bboerner",
      "html_url": "https://github.com/bboerner",
      "followers_url": "https://api.github.com/users/bboerner/followers",
      "following_url": "https://api.github.com/users/bboerner/following{/other_user}",
      "gists_url": "https://api.github.com/users/bboerner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bboerner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bboerner/subscriptions",
      "organizations_url": "https://api.github.com/users/bboerner/orgs",
      "repos_url": "https://api.github.com/users/bboerner/repos",
      "events_url": "https://api.github.com/users/bboerner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bboerner/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-08-14T19:55:28Z",
    "updated_at": "2014-08-14T19:55:28Z",
    "author_association": "NONE",
    "body": "@jreback, thanks verified fix. Regards.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/52249173",
    "html_url": "https://github.com/pandas-dev/pandas/issues/8014#issuecomment-52249173",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/8014",
    "id": 52249173,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyMjQ5MTcz",
    "user": {
      "login": "bboerner",
      "id": 1400227,
      "node_id": "MDQ6VXNlcjE0MDAyMjc=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1400227?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bboerner",
      "html_url": "https://github.com/bboerner",
      "followers_url": "https://api.github.com/users/bboerner/followers",
      "following_url": "https://api.github.com/users/bboerner/following{/other_user}",
      "gists_url": "https://api.github.com/users/bboerner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bboerner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bboerner/subscriptions",
      "organizations_url": "https://api.github.com/users/bboerner/orgs",
      "repos_url": "https://api.github.com/users/bboerner/repos",
      "events_url": "https://api.github.com/users/bboerner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bboerner/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-08-14T21:43:54Z",
    "updated_at": "2014-08-14T21:43:54Z",
    "author_association": "NONE",
    "body": "@jreback, testing fix with my app I'm seeing another problem. I'll debug further and look for a reproducible test case.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/52249328",
    "html_url": "https://github.com/pandas-dev/pandas/issues/8014#issuecomment-52249328",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/8014",
    "id": 52249328,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyMjQ5MzI4",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-08-14T21:45:09Z",
    "updated_at": "2014-08-14T21:45:09Z",
    "author_association": "CONTRIBUTOR",
    "body": "ok, I haven't merged this yet as I cleaned up the code (but it passes the same tests).\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/52270816",
    "html_url": "https://github.com/pandas-dev/pandas/issues/8014#issuecomment-52270816",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/8014",
    "id": 52270816,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyMjcwODE2",
    "user": {
      "login": "bboerner",
      "id": 1400227,
      "node_id": "MDQ6VXNlcjE0MDAyMjc=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1400227?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bboerner",
      "html_url": "https://github.com/bboerner",
      "followers_url": "https://api.github.com/users/bboerner/followers",
      "following_url": "https://api.github.com/users/bboerner/following{/other_user}",
      "gists_url": "https://api.github.com/users/bboerner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bboerner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bboerner/subscriptions",
      "organizations_url": "https://api.github.com/users/bboerner/orgs",
      "repos_url": "https://api.github.com/users/bboerner/repos",
      "events_url": "https://api.github.com/users/bboerner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bboerner/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-08-15T03:21:10Z",
    "updated_at": "2014-08-15T03:21:10Z",
    "author_association": "NONE",
    "body": "@jreback, I've updated the test case to check for _subset_ of data - the result will be a \"hang\" in the list comprehension (the iterator never exits). I committed this to: https://github.com/bboerner/pandas/commit/8e24e8a489305b8ab7d4b87955a808537f70545b or can submit a pull request if you prefer (ignore the commit of test_pytables2.py ; that was a subset I was using and didn't mean to commit). Let me know.\n\nRegards.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/52270935",
    "html_url": "https://github.com/pandas-dev/pandas/issues/8014#issuecomment-52270935",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/8014",
    "id": 52270935,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyMjcwOTM1",
    "user": {
      "login": "bboerner",
      "id": 1400227,
      "node_id": "MDQ6VXNlcjE0MDAyMjc=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1400227?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bboerner",
      "html_url": "https://github.com/bboerner",
      "followers_url": "https://api.github.com/users/bboerner/followers",
      "following_url": "https://api.github.com/users/bboerner/following{/other_user}",
      "gists_url": "https://api.github.com/users/bboerner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bboerner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bboerner/subscriptions",
      "organizations_url": "https://api.github.com/users/bboerner/orgs",
      "repos_url": "https://api.github.com/users/bboerner/repos",
      "events_url": "https://api.github.com/users/bboerner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bboerner/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-08-15T03:23:54Z",
    "updated_at": "2014-08-15T03:23:54Z",
    "author_association": "NONE",
    "body": "Fix test case: https://github.com/bboerner/pandas/commit/7f7e1b544ba002d86d91604d13e4166ae758336d\n"
  }
]
