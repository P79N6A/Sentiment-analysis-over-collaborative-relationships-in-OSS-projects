[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/310043784",
    "html_url": "https://github.com/pandas-dev/pandas/issues/16741#issuecomment-310043784",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/16741",
    "id": 310043784,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxMDA0Mzc4NA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-06-21T10:59:50Z",
    "updated_at": "2017-06-21T10:59:50Z",
    "author_association": "CONTRIBUTOR",
    "body": "I suppose. This maybe non trivial to fix. Why would you do this anyhow? Storing non-scalar objects *inside* a pandas object is non-performant / generally has limited support.\r\n\r\n```\r\nIn [7]: df.groupby('uid')['color'].value_counts()\r\nOut[7]: \r\nuid  color\r\n0    0        1\r\n1    0        1\r\n     2        1\r\n     4        1\r\n2    3        3\r\n     1        1\r\n     2        1\r\n3    2        3\r\n     1        2\r\n4    0        2\r\n     3        2\r\n     4        2\r\nName: color, dtype: int64\r\n```"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/310085615",
    "html_url": "https://github.com/pandas-dev/pandas/issues/16741#issuecomment-310085615",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/16741",
    "id": 310085615,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxMDA4NTYxNQ==",
    "user": {
      "login": "FlorianWilhelm",
      "id": 3184072,
      "node_id": "MDQ6VXNlcjMxODQwNzI=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/3184072?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/FlorianWilhelm",
      "html_url": "https://github.com/FlorianWilhelm",
      "followers_url": "https://api.github.com/users/FlorianWilhelm/followers",
      "following_url": "https://api.github.com/users/FlorianWilhelm/following{/other_user}",
      "gists_url": "https://api.github.com/users/FlorianWilhelm/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/FlorianWilhelm/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/FlorianWilhelm/subscriptions",
      "organizations_url": "https://api.github.com/users/FlorianWilhelm/orgs",
      "repos_url": "https://api.github.com/users/FlorianWilhelm/repos",
      "events_url": "https://api.github.com/users/FlorianWilhelm/events{/privacy}",
      "received_events_url": "https://api.github.com/users/FlorianWilhelm/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-06-21T13:54:12Z",
    "updated_at": "2017-06-21T13:54:12Z",
    "author_association": "CONTRIBUTOR",
    "body": "@jreback Thanks for your fast reply. It seems that storing dictionaries in Pandas is allowed and internally I guess it will use some kind of pointer/reference to an outside object just like in the case of strings which makes it non-performant. Anyways, it used to work in version 0.19 and even in 0.20 it works for `apply` which makes it currently at least inconsistent. Also the step above is the final step of a UDAF (as explained below) and therefore there will be no future non-performant operations on these columns.\r\n\r\nMy actual use-case it that I am using Pandas inside a PySpark UDAF `mapPartitions` and in the end I want to construct a PySpark `Row` where each column is a `MapType`. It's easy to generate that object when you pass a dictionary to `Row` where the keys are the column names and the values are dictionaries which PySpark will convert automatically to `MapType` then. If I have in each Pandas column dictionaries as values as described above I can just call the `Row` constructor on each element of `df.to_dict('records')`."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/310399532",
    "html_url": "https://github.com/pandas-dev/pandas/issues/16741#issuecomment-310399532",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/16741",
    "id": 310399532,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxMDM5OTUzMg==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-06-22T14:36:42Z",
    "updated_at": "2017-06-22T14:36:42Z",
    "author_association": "CONTRIBUTOR",
    "body": "If you want to submit a PR for this would be great, to add back support for returning the dicts. This scenario It is obviously not tested. \r\n\r\nWhat you describe for your usecase is not very efficient, but that's up to you."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/310402490",
    "html_url": "https://github.com/pandas-dev/pandas/issues/16741#issuecomment-310402490",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/16741",
    "id": 310402490,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxMDQwMjQ5MA==",
    "user": {
      "login": "FlorianWilhelm",
      "id": 3184072,
      "node_id": "MDQ6VXNlcjMxODQwNzI=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/3184072?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/FlorianWilhelm",
      "html_url": "https://github.com/FlorianWilhelm",
      "followers_url": "https://api.github.com/users/FlorianWilhelm/followers",
      "following_url": "https://api.github.com/users/FlorianWilhelm/following{/other_user}",
      "gists_url": "https://api.github.com/users/FlorianWilhelm/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/FlorianWilhelm/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/FlorianWilhelm/subscriptions",
      "organizations_url": "https://api.github.com/users/FlorianWilhelm/orgs",
      "repos_url": "https://api.github.com/users/FlorianWilhelm/repos",
      "events_url": "https://api.github.com/users/FlorianWilhelm/events{/privacy}",
      "received_events_url": "https://api.github.com/users/FlorianWilhelm/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-06-22T14:46:42Z",
    "updated_at": "2017-06-22T14:46:42Z",
    "author_association": "CONTRIBUTOR",
    "body": "@jreback How would you do it then in a more efficient way? Thanks for any hints."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/310405951",
    "html_url": "https://github.com/pandas-dev/pandas/issues/16741#issuecomment-310405951",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/16741",
    "id": 310405951,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxMDQwNTk1MQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-06-22T14:58:04Z",
    "updated_at": "2017-06-22T14:58:04Z",
    "author_association": "CONTRIBUTOR",
    "body": "use the code I gave above."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/310458559",
    "html_url": "https://github.com/pandas-dev/pandas/issues/16741#issuecomment-310458559",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/16741",
    "id": 310458559,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxMDQ1ODU1OQ==",
    "user": {
      "login": "FlorianWilhelm",
      "id": 3184072,
      "node_id": "MDQ6VXNlcjMxODQwNzI=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/3184072?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/FlorianWilhelm",
      "html_url": "https://github.com/FlorianWilhelm",
      "followers_url": "https://api.github.com/users/FlorianWilhelm/followers",
      "following_url": "https://api.github.com/users/FlorianWilhelm/following{/other_user}",
      "gists_url": "https://api.github.com/users/FlorianWilhelm/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/FlorianWilhelm/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/FlorianWilhelm/subscriptions",
      "organizations_url": "https://api.github.com/users/FlorianWilhelm/orgs",
      "repos_url": "https://api.github.com/users/FlorianWilhelm/repos",
      "events_url": "https://api.github.com/users/FlorianWilhelm/events{/privacy}",
      "received_events_url": "https://api.github.com/users/FlorianWilhelm/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-06-22T18:08:41Z",
    "updated_at": "2017-06-22T18:08:53Z",
    "author_association": "CONTRIBUTOR",
    "body": "@jreback I started working on PR #16752. Let's see how far I make it."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/310499678",
    "html_url": "https://github.com/pandas-dev/pandas/issues/16741#issuecomment-310499678",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/16741",
    "id": 310499678,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxMDQ5OTY3OA==",
    "user": {
      "login": "FlorianWilhelm",
      "id": 3184072,
      "node_id": "MDQ6VXNlcjMxODQwNzI=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/3184072?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/FlorianWilhelm",
      "html_url": "https://github.com/FlorianWilhelm",
      "followers_url": "https://api.github.com/users/FlorianWilhelm/followers",
      "following_url": "https://api.github.com/users/FlorianWilhelm/following{/other_user}",
      "gists_url": "https://api.github.com/users/FlorianWilhelm/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/FlorianWilhelm/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/FlorianWilhelm/subscriptions",
      "organizations_url": "https://api.github.com/users/FlorianWilhelm/orgs",
      "repos_url": "https://api.github.com/users/FlorianWilhelm/repos",
      "events_url": "https://api.github.com/users/FlorianWilhelm/events{/privacy}",
      "received_events_url": "https://api.github.com/users/FlorianWilhelm/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-06-22T20:54:08Z",
    "updated_at": "2017-06-22T20:54:08Z",
    "author_association": "CONTRIBUTOR",
    "body": "@jreback I fixed the bug and it is actually only half a line of code and a unit test. Don't you think that this could also be integrated in the next bugfix/minor release?"
  }
]
