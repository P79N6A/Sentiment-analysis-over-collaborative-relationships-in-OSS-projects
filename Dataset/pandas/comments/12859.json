[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/208316986",
    "html_url": "https://github.com/pandas-dev/pandas/issues/12859#issuecomment-208316986",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/12859",
    "id": 208316986,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwODMxNjk4Ng==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-04-11T12:30:40Z",
    "updated_at": "2016-04-11T12:30:40Z",
    "author_association": "CONTRIBUTOR",
    "body": "Nothing to do with the index, just the fact that you have any float dtypes in the data\n\n```\ndata = {\"a\": [1.0,2,3,4,5], \"b\": [90,80,40,60,30]}\nIn [19]: df.to_dict(\"records\")\nOut[19]:\n[{'a': 1.0, 'b': 90.0},\n {'a': 2.0, 'b': 80.0},\n {'a': 3.0, 'b': 40.0},\n {'a': 4.0, 'b': 60.0},\n {'a': 5.0, 'b': 30.0}]\n```\n\nIf you look at the [code](https://github.com/pydata/pandas/blob/a1f5ef3b9dd02b0ca9a7bea74c30a7e24b4434d5/pandas/core/frame.py#L857), we use `DataFrame.values`, which returns a NumPy array, which must have a single dtype (float64 in this case).\n\nWe probably don't need to use `.values` here.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/208318197",
    "html_url": "https://github.com/pandas-dev/pandas/issues/12859#issuecomment-208318197",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/12859",
    "id": 208318197,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwODMxODE5Nw==",
    "user": {
      "login": "tsu-shiuan",
      "id": 16593552,
      "node_id": "MDQ6VXNlcjE2NTkzNTUy",
      "avatar_url": "https://avatars0.githubusercontent.com/u/16593552?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tsu-shiuan",
      "html_url": "https://github.com/tsu-shiuan",
      "followers_url": "https://api.github.com/users/tsu-shiuan/followers",
      "following_url": "https://api.github.com/users/tsu-shiuan/following{/other_user}",
      "gists_url": "https://api.github.com/users/tsu-shiuan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tsu-shiuan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tsu-shiuan/subscriptions",
      "organizations_url": "https://api.github.com/users/tsu-shiuan/orgs",
      "repos_url": "https://api.github.com/users/tsu-shiuan/repos",
      "events_url": "https://api.github.com/users/tsu-shiuan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tsu-shiuan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-04-11T12:33:59Z",
    "updated_at": "2016-04-11T12:33:59Z",
    "author_association": "NONE",
    "body": "Thanks for your response. It there a possible workaround that I can use in the meantime?\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/208319535",
    "html_url": "https://github.com/pandas-dev/pandas/issues/12859#issuecomment-208319535",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/12859",
    "id": 208319535,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwODMxOTUzNQ==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-04-11T12:37:53Z",
    "updated_at": "2016-04-11T12:37:53Z",
    "author_association": "CONTRIBUTOR",
    "body": "Something like\n\n``` python\nIn [28]: [x._asdict() for x in df.itertuples()]\nOut[28]:\n[OrderedDict([('Index', 0), ('a', 1.0), ('b', 90)]),\n OrderedDict([('Index', 1), ('a', 2.0), ('b', 80)]),\n OrderedDict([('Index', 2), ('a', 3.0), ('b', 40)]),\n OrderedDict([('Index', 3), ('a', 4.0), ('b', 60)]),\n OrderedDict([('Index', 4), ('a', 5.0), ('b', 30)])]\n```\n\nThat's an OrderedDict using `namedtuple._asdict`, you can write dict comprehension if you want a regular one.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/208320596",
    "html_url": "https://github.com/pandas-dev/pandas/issues/12859#issuecomment-208320596",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/12859",
    "id": 208320596,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwODMyMDU5Ng==",
    "user": {
      "login": "tsu-shiuan",
      "id": 16593552,
      "node_id": "MDQ6VXNlcjE2NTkzNTUy",
      "avatar_url": "https://avatars0.githubusercontent.com/u/16593552?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tsu-shiuan",
      "html_url": "https://github.com/tsu-shiuan",
      "followers_url": "https://api.github.com/users/tsu-shiuan/followers",
      "following_url": "https://api.github.com/users/tsu-shiuan/following{/other_user}",
      "gists_url": "https://api.github.com/users/tsu-shiuan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tsu-shiuan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tsu-shiuan/subscriptions",
      "organizations_url": "https://api.github.com/users/tsu-shiuan/orgs",
      "repos_url": "https://api.github.com/users/tsu-shiuan/repos",
      "events_url": "https://api.github.com/users/tsu-shiuan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tsu-shiuan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-04-11T12:40:34Z",
    "updated_at": "2016-04-11T12:40:34Z",
    "author_association": "NONE",
    "body": "Thanks :)\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/208321397",
    "html_url": "https://github.com/pandas-dev/pandas/issues/12859#issuecomment-208321397",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/12859",
    "id": 208321397,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwODMyMTM5Nw==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-04-11T12:43:09Z",
    "updated_at": "2016-04-11T12:43:09Z",
    "author_association": "CONTRIBUTOR",
    "body": "Though one could argue that this result is correct as we don't support mixed types in int-float when doing a cross-section, IOW:\n\n```\nIn [10]: (df*1.0).reset_index().iloc[1]\nOut[10]: \nindex     1.0\na         2.0\nb        80.0\nName: 1, dtype: float64\n```\n\nthis is somewhat related to #12532, meaning that we should be iterating directly over (which already does the proper coercion), rather that doing a specific coercion in `.to_dict()`.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/208321855",
    "html_url": "https://github.com/pandas-dev/pandas/issues/12859#issuecomment-208321855",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/12859",
    "id": 208321855,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwODMyMTg1NQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-04-11T12:44:58Z",
    "updated_at": "2016-04-11T12:44:58Z",
    "author_association": "CONTRIBUTOR",
    "body": "giong to mark this an an API issue that needs discussion. This would actually be a fairly large change to correctly change this (though to be honest I think the current behavior is fine).\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/304147158",
    "html_url": "https://github.com/pandas-dev/pandas/issues/12859#issuecomment-304147158",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/12859",
    "id": 304147158,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwNDE0NzE1OA==",
    "user": {
      "login": "makmanalp",
      "id": 161965,
      "node_id": "MDQ6VXNlcjE2MTk2NQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/161965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/makmanalp",
      "html_url": "https://github.com/makmanalp",
      "followers_url": "https://api.github.com/users/makmanalp/followers",
      "following_url": "https://api.github.com/users/makmanalp/following{/other_user}",
      "gists_url": "https://api.github.com/users/makmanalp/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/makmanalp/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/makmanalp/subscriptions",
      "organizations_url": "https://api.github.com/users/makmanalp/orgs",
      "repos_url": "https://api.github.com/users/makmanalp/repos",
      "events_url": "https://api.github.com/users/makmanalp/events{/privacy}",
      "received_events_url": "https://api.github.com/users/makmanalp/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-05-25T23:01:28Z",
    "updated_at": "2017-05-25T23:08:12Z",
    "author_association": "CONTRIBUTOR",
    "body": "Note for future seekers - I'm trying to combine multiple pandas objects into one nested json structure.\r\n\r\nSince to_json doesn't work in this case (manipulating json strings is hard), you might try to do to_dict(orient=\"records\"), and combine the results of the to_dict()s into a bigger object, and do `json.dumps` on that. But because of this bug, you can't do that without screwing with the types of everything.\r\n\r\nSo then you might try doing @TomAugspurger's solution but you might find that for some reason it won't convert numpy types to python types, like to_dict() does, which makes json.dumps() fail.\r\n\r\nMy workaround solution is to do to_json() which gives you a correct json string with correct types, then do json.loads() on that to get python objects corresponding to that string, which you then put together whichever way you want (e.g. `big_obj = {\"a\": df_a_json, \"b\": df_b_json}`) and then run json.dumps on the whole thing. It's roundabout but it's the closest general solution I found without having to muck about with type conversions myself!\r\n\r\n```python\r\ndef to_records(df):\r\n    \"\"\"Replacement for pandas' to_dict(orient=\"records\") which has trouble with\r\n    upcasting ints to floats in the case of other floats being there.\r\n\r\n    https://github.com/pandas-dev/pandas/issues/12859\r\n    \"\"\"\r\n    import json\r\n    return json.loads(df.to_json(orient=\"records\"))\r\n```"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/304298289",
    "html_url": "https://github.com/pandas-dev/pandas/issues/12859#issuecomment-304298289",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/12859",
    "id": 304298289,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwNDI5ODI4OQ==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-05-26T14:31:35Z",
    "updated_at": "2017-05-26T14:31:35Z",
    "author_association": "CONTRIBUTOR",
    "body": "👍  There is an issue somewhere `.to_dict` using python types. "
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/304301103",
    "html_url": "https://github.com/pandas-dev/pandas/issues/12859#issuecomment-304301103",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/12859",
    "id": 304301103,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwNDMwMTEwMw==",
    "user": {
      "login": "makmanalp",
      "id": 161965,
      "node_id": "MDQ6VXNlcjE2MTk2NQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/161965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/makmanalp",
      "html_url": "https://github.com/makmanalp",
      "followers_url": "https://api.github.com/users/makmanalp/followers",
      "following_url": "https://api.github.com/users/makmanalp/following{/other_user}",
      "gists_url": "https://api.github.com/users/makmanalp/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/makmanalp/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/makmanalp/subscriptions",
      "organizations_url": "https://api.github.com/users/makmanalp/orgs",
      "repos_url": "https://api.github.com/users/makmanalp/repos",
      "events_url": "https://api.github.com/users/makmanalp/events{/privacy}",
      "received_events_url": "https://api.github.com/users/makmanalp/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-05-26T14:42:23Z",
    "updated_at": "2017-05-26T14:42:23Z",
    "author_association": "CONTRIBUTOR",
    "body": "Seems like https://github.com/pandas-dev/pandas/issues/16048 and https://github.com/pandas-dev/pandas/issues/13258"
  }
]
