[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/70932561",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9330#issuecomment-70932561",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9330",
    "id": 70932561,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwOTMyNTYx",
    "user": {
      "login": "dalejung",
      "id": 610115,
      "node_id": "MDQ6VXNlcjYxMDExNQ==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/610115?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dalejung",
      "html_url": "https://github.com/dalejung",
      "followers_url": "https://api.github.com/users/dalejung/followers",
      "following_url": "https://api.github.com/users/dalejung/following{/other_user}",
      "gists_url": "https://api.github.com/users/dalejung/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dalejung/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dalejung/subscriptions",
      "organizations_url": "https://api.github.com/users/dalejung/orgs",
      "repos_url": "https://api.github.com/users/dalejung/repos",
      "events_url": "https://api.github.com/users/dalejung/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dalejung/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-01-21T22:13:33Z",
    "updated_at": "2015-01-21T22:13:33Z",
    "author_association": "CONTRIBUTOR",
    "body": "@jreback is the block-type order part of the `pandas` data model? As in should `IntBlock` always come before `ObjectBlock` in the `blocks` tuple. If so, maybe the ordering should be enforced in consolidation. \n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/70954003",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9330#issuecomment-70954003",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9330",
    "id": 70954003,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwOTU0MDAz",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-01-22T01:07:45Z",
    "updated_at": "2015-01-22T01:07:45Z",
    "author_association": "CONTRIBUTOR",
    "body": "ordering / consolidation is an impl detail only and does not impact equals\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/70987084",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9330#issuecomment-70987084",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9330",
    "id": 70987084,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwOTg3MDg0",
    "user": {
      "login": "wikiped",
      "id": 5990528,
      "node_id": "MDQ6VXNlcjU5OTA1Mjg=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/5990528?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wikiped",
      "html_url": "https://github.com/wikiped",
      "followers_url": "https://api.github.com/users/wikiped/followers",
      "following_url": "https://api.github.com/users/wikiped/following{/other_user}",
      "gists_url": "https://api.github.com/users/wikiped/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wikiped/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wikiped/subscriptions",
      "organizations_url": "https://api.github.com/users/wikiped/orgs",
      "repos_url": "https://api.github.com/users/wikiped/repos",
      "events_url": "https://api.github.com/users/wikiped/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wikiped/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-01-22T08:33:12Z",
    "updated_at": "2015-01-22T08:33:12Z",
    "author_association": "NONE",
    "body": "It also seems that only 'table' format is affected, because with `format='fixed'` there is no such issue. \n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/71007669",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9330#issuecomment-71007669",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9330",
    "id": 71007669,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxMDA3NjY5",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-01-22T11:33:49Z",
    "updated_at": "2015-01-22T11:33:49Z",
    "author_association": "CONTRIBUTOR",
    "body": "cc @unutbu\n\nI think this might be a bug/undefined situation. The equals comparator in `core/internals.py` should compare like blocks in order. But since their is no explicity guarantee of ordering in the consolidation this may be somewhat undefined.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/71008953",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9330#issuecomment-71008953",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9330",
    "id": 71008953,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxMDA4OTUz",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-01-22T11:46:17Z",
    "updated_at": "2015-01-22T11:46:17Z",
    "author_association": "CONTRIBUTOR",
    "body": "The order of writing blocks in hdf is arbitrary when `data_columns` is not fully specified, e.g. in the example above if `df.to_hdf(....., data_columns=True)`. Then the columns are written individually and thus the order is preserved. When data_columns is not or underspecified then the blocks are iterated, but  their is not a well-defined order.\n\nSo could do one of the following:\n- doc that `equals` is subject to block creation/consolidation order\n- have hdf iterate on blocks in a well defined order (not sure how to do this nicely though)\n- have equals try harder to compare blocks that are potentially in a different order (but this could still fail as the order within a block is subject to the order they are added)\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/87130939",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9330#issuecomment-87130939",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9330",
    "id": 87130939,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3MTMwOTM5",
    "user": {
      "login": "brandon-rhodes",
      "id": 166162,
      "node_id": "MDQ6VXNlcjE2NjE2Mg==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/166162?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brandon-rhodes",
      "html_url": "https://github.com/brandon-rhodes",
      "followers_url": "https://api.github.com/users/brandon-rhodes/followers",
      "following_url": "https://api.github.com/users/brandon-rhodes/following{/other_user}",
      "gists_url": "https://api.github.com/users/brandon-rhodes/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brandon-rhodes/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brandon-rhodes/subscriptions",
      "organizations_url": "https://api.github.com/users/brandon-rhodes/orgs",
      "repos_url": "https://api.github.com/users/brandon-rhodes/repos",
      "events_url": "https://api.github.com/users/brandon-rhodes/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brandon-rhodes/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-03-28T00:31:50Z",
    "updated_at": "2015-03-28T00:31:50Z",
    "author_association": "CONTRIBUTOR",
    "body": "Note that this bug can affect data frames that have nothing to do with HDF — simply taking a data frame, doing a few rotations on its columns, and sticking it back together can result in an (invisible) change to the order in which its blocks are listed in `_data` and thus lead `.equals()` to return `False` despite `==` returning only `True` values. An example:\n\n```\ncsv_text = \"\"\"\\\nTitle,Year,Director\nNorth by Northwest,1959,Alfred Hitchcock\nNotorious,1946,Alfred Hitchcock\nThe Philadelphia Story,1940,George Cukor\nTo Catch a Thief,1955,Alfred Hitchcock\nHis Girl Friday,1940,Howard Hawks\n\"\"\"\n\nimport pandas as pd\n\ndf1 = pd.read_csv('sample.csv')\ndf1.columns = map(str.lower, df1.columns)\nprint(df1)\nprint()\n\ndf2 = df1.groupby(['director', df1.index]).first()\ndf3 = df2.reset_index('director')\ndf4 = df3[['title', 'year', 'director']]\ndf5 = df4.sort_index()\nprint(df5)\nprint()\n\nprint(df1 == df5)\nprint()\n\nprint(df1.equals(df5))\n```\n\nresults in:\n\n```\n                    title  year          director\n0      North by Northwest  1959  Alfred Hitchcock\n1               Notorious  1946  Alfred Hitchcock\n2  The Philadelphia Story  1940      George Cukor\n3        To Catch a Thief  1955  Alfred Hitchcock\n4         His Girl Friday  1940      Howard Hawks\n\n                    title  year          director\n0      North by Northwest  1959  Alfred Hitchcock\n1               Notorious  1946  Alfred Hitchcock\n2  The Philadelphia Story  1940      George Cukor\n3        To Catch a Thief  1955  Alfred Hitchcock\n4         His Girl Friday  1940      Howard Hawks\n\n  title  year director\n0  True  True     True\n1  True  True     True\n2  True  True     True\n3  True  True     True\n4  True  True     True\n\nFalse\n```\n\nIt should probably be the responsibility of `.equals()` to ignore the block order, since block order is not part of its definition.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/87132894",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9330#issuecomment-87132894",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9330",
    "id": 87132894,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3MTMyODk0",
    "user": {
      "login": "dsm054",
      "id": 980054,
      "node_id": "MDQ6VXNlcjk4MDA1NA==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/980054?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dsm054",
      "html_url": "https://github.com/dsm054",
      "followers_url": "https://api.github.com/users/dsm054/followers",
      "following_url": "https://api.github.com/users/dsm054/following{/other_user}",
      "gists_url": "https://api.github.com/users/dsm054/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dsm054/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dsm054/subscriptions",
      "organizations_url": "https://api.github.com/users/dsm054/orgs",
      "repos_url": "https://api.github.com/users/dsm054/repos",
      "events_url": "https://api.github.com/users/dsm054/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dsm054/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-03-28T00:43:53Z",
    "updated_at": "2015-03-28T00:43:53Z",
    "author_association": "CONTRIBUTOR",
    "body": "Just as a UI issue, I think `DataFrame.equals` shouldn't care at all about any of this behind-the-scenes stuff.  If that means we replace it entirely with something which doesn't care -- something which checks index, columns, and data (with nan==nan) -- then so be it.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/87138076",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9330#issuecomment-87138076",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9330",
    "id": 87138076,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3MTM4MDc2",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-03-28T01:31:25Z",
    "updated_at": "2015-03-28T01:31:25Z",
    "author_association": "CONTRIBUTOR",
    "body": "this is pretty easy to fix, just consolidate then sort the blocks (on the block dtype) and then compare\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/87141287",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9330#issuecomment-87141287",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9330",
    "id": 87141287,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3MTQxMjg3",
    "user": {
      "login": "dsm054",
      "id": 980054,
      "node_id": "MDQ6VXNlcjk4MDA1NA==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/980054?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dsm054",
      "html_url": "https://github.com/dsm054",
      "followers_url": "https://api.github.com/users/dsm054/followers",
      "following_url": "https://api.github.com/users/dsm054/following{/other_user}",
      "gists_url": "https://api.github.com/users/dsm054/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dsm054/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dsm054/subscriptions",
      "organizations_url": "https://api.github.com/users/dsm054/orgs",
      "repos_url": "https://api.github.com/users/dsm054/repos",
      "events_url": "https://api.github.com/users/dsm054/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dsm054/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-03-28T01:51:10Z",
    "updated_at": "2015-03-28T01:56:31Z",
    "author_association": "CONTRIBUTOR",
    "body": "Yeah, I was thinking of something like\n\n```\n        # canonicalize block order\n        self_blocks = sorted(self.blocks, key=lambda x: x.dtype)\n        other_blocks = sorted(other.blocks, key=lambda x: x.dtype)\n        return all(block.equals(oblock) for block, oblock in\n                   zip(self_blocks, other_blocks))\n```\n\nsince it's already consolidating.\n\nActually, now that I think of it, do we know by this point that the number of blocks is the same?  Otherwise the `zip` will stop too early if `len(self.blocks) < len(other_blocks)`.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/89868385",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9330#issuecomment-89868385",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9330",
    "id": 89868385,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg5ODY4Mzg1",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-04-05T23:10:37Z",
    "updated_at": "2015-04-05T23:10:37Z",
    "author_association": "CONTRIBUTOR",
    "body": "closed by #9745 \n"
  }
]
