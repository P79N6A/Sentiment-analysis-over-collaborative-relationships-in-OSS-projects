[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/438488603",
    "html_url": "https://github.com/pandas-dev/pandas/issues/23676#issuecomment-438488603",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23676",
    "id": 438488603,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzODQ4ODYwMw==",
    "user": {
      "login": "jschendel",
      "id": 5332445,
      "node_id": "MDQ6VXNlcjUzMzI0NDU=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/5332445?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jschendel",
      "html_url": "https://github.com/jschendel",
      "followers_url": "https://api.github.com/users/jschendel/followers",
      "following_url": "https://api.github.com/users/jschendel/following{/other_user}",
      "gists_url": "https://api.github.com/users/jschendel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jschendel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jschendel/subscriptions",
      "organizations_url": "https://api.github.com/users/jschendel/orgs",
      "repos_url": "https://api.github.com/users/jschendel/repos",
      "events_url": "https://api.github.com/users/jschendel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jschendel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-14T00:15:32Z",
    "updated_at": "2018-11-14T00:15:32Z",
    "author_association": "MEMBER",
    "body": "I can confirm this on master.  For a more exact cutoff, a `Series` with length 16777216 looks produce valid results, and a `Series` of length 16777217 looks to be invalid:\r\n\r\n```python\r\nIn [1]: import pandas as pd; import numpy as np; pd.__version__\r\nOut[1]: '0.24.0.dev0+989.g2d4dd508f'\r\n\r\nIn [2]: def check_rank_pct(n):\r\n   ...:     data = np.concatenate([np.repeat(0, n-3), np.array([1, 2, 3])])\r\n   ...:     return pd.Series(data).rank(pct=True).tail().values\r\n\r\nIn [3]: check_rank_pct(16777216)\r\nOut[3]: array([ 0.49999994,  0.49999994,  0.99999988,  0.99999994,  1.        ])\r\n\r\nIn [4]: check_rank_pct(16777217)\r\nOut[4]: array([ 0.49999997,  0.49999997,  0.99999994,  1.        ,  1.00000006])\r\n```\r\nThis is interesting because 16777217 = 2\\*\\*24 + 1, which is the first integer that can't be exactly represented with 32-bit floating point.  I don't know this part of the codebase well enough to say where something like that comes into play, but hopefully this is a good clue for someone more knowledgeable.  At the very least, if we're able to get this up to the 64-bit floating point limit, we'd increase the cutoff to 2\\*\\*53 + 1."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/438563386",
    "html_url": "https://github.com/pandas-dev/pandas/issues/23676#issuecomment-438563386",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23676",
    "id": 438563386,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzODU2MzM4Ng==",
    "user": {
      "login": "jschendel",
      "id": 5332445,
      "node_id": "MDQ6VXNlcjUzMzI0NDU=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/5332445?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jschendel",
      "html_url": "https://github.com/jschendel",
      "followers_url": "https://api.github.com/users/jschendel/followers",
      "following_url": "https://api.github.com/users/jschendel/following{/other_user}",
      "gists_url": "https://api.github.com/users/jschendel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jschendel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jschendel/subscriptions",
      "organizations_url": "https://api.github.com/users/jschendel/orgs",
      "repos_url": "https://api.github.com/users/jschendel/repos",
      "events_url": "https://api.github.com/users/jschendel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jschendel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-14T07:22:36Z",
    "updated_at": "2018-11-14T07:22:36Z",
    "author_association": "MEMBER",
    "body": "This looks to be a dupe of #18271, so closing in favor of that issue.  Will open a PR to fix this soon though."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/438563825",
    "html_url": "https://github.com/pandas-dev/pandas/issues/23676#issuecomment-438563825",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23676",
    "id": 438563825,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzODU2MzgyNQ==",
    "user": {
      "login": "WillAyd",
      "id": 609873,
      "node_id": "MDQ6VXNlcjYwOTg3Mw==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/609873?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/WillAyd",
      "html_url": "https://github.com/WillAyd",
      "followers_url": "https://api.github.com/users/WillAyd/followers",
      "following_url": "https://api.github.com/users/WillAyd/following{/other_user}",
      "gists_url": "https://api.github.com/users/WillAyd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/WillAyd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/WillAyd/subscriptions",
      "organizations_url": "https://api.github.com/users/WillAyd/orgs",
      "repos_url": "https://api.github.com/users/WillAyd/repos",
      "events_url": "https://api.github.com/users/WillAyd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/WillAyd/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-14T07:24:35Z",
    "updated_at": "2018-11-14T07:24:35Z",
    "author_association": "MEMBER",
    "body": "@jschendel was simultaneously looking at this. Should post a PR in a few minutes"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/438564645",
    "html_url": "https://github.com/pandas-dev/pandas/issues/23676#issuecomment-438564645",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23676",
    "id": 438564645,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzODU2NDY0NQ==",
    "user": {
      "login": "jschendel",
      "id": 5332445,
      "node_id": "MDQ6VXNlcjUzMzI0NDU=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/5332445?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jschendel",
      "html_url": "https://github.com/jschendel",
      "followers_url": "https://api.github.com/users/jschendel/followers",
      "following_url": "https://api.github.com/users/jschendel/following{/other_user}",
      "gists_url": "https://api.github.com/users/jschendel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jschendel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jschendel/subscriptions",
      "organizations_url": "https://api.github.com/users/jschendel/orgs",
      "repos_url": "https://api.github.com/users/jschendel/repos",
      "events_url": "https://api.github.com/users/jschendel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jschendel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-14T07:28:24Z",
    "updated_at": "2018-11-14T07:28:24Z",
    "author_association": "MEMBER",
    "body": "@WillAyd : Oops, just saw this after posting a PR of my own!"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/438564744",
    "html_url": "https://github.com/pandas-dev/pandas/issues/23676#issuecomment-438564744",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23676",
    "id": 438564744,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzODU2NDc0NA==",
    "user": {
      "login": "WillAyd",
      "id": 609873,
      "node_id": "MDQ6VXNlcjYwOTg3Mw==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/609873?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/WillAyd",
      "html_url": "https://github.com/WillAyd",
      "followers_url": "https://api.github.com/users/WillAyd/followers",
      "following_url": "https://api.github.com/users/WillAyd/following{/other_user}",
      "gists_url": "https://api.github.com/users/WillAyd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/WillAyd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/WillAyd/subscriptions",
      "organizations_url": "https://api.github.com/users/WillAyd/orgs",
      "repos_url": "https://api.github.com/users/WillAyd/repos",
      "events_url": "https://api.github.com/users/WillAyd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/WillAyd/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-14T07:28:54Z",
    "updated_at": "2018-11-14T07:28:54Z",
    "author_association": "MEMBER",
    "body": "Ha no worries. Changes are exactly the same so gets to the same spot. Let's stick with yours"
  }
]
