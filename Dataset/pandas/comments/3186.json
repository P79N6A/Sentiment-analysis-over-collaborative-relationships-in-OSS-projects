[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/20683471",
    "html_url": "https://github.com/pandas-dev/pandas/issues/3186#issuecomment-20683471",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/3186",
    "id": 20683471,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwNjgzNDcx",
    "user": {
      "login": "cpcloud",
      "id": 417981,
      "node_id": "MDQ6VXNlcjQxNzk4MQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/417981?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cpcloud",
      "html_url": "https://github.com/cpcloud",
      "followers_url": "https://api.github.com/users/cpcloud/followers",
      "following_url": "https://api.github.com/users/cpcloud/following{/other_user}",
      "gists_url": "https://api.github.com/users/cpcloud/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cpcloud/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cpcloud/subscriptions",
      "organizations_url": "https://api.github.com/users/cpcloud/orgs",
      "repos_url": "https://api.github.com/users/cpcloud/repos",
      "events_url": "https://api.github.com/users/cpcloud/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cpcloud/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-07-09T15:44:20Z",
    "updated_at": "2013-07-09T15:44:20Z",
    "author_association": "MEMBER",
    "body": "what if you were to build up buffers of some specified chunk size using `iovec` structs and make a call into `writev`/`readv`, i.e. scatter/gather? is that what you mean by batched writes?\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/20718308",
    "html_url": "https://github.com/pandas-dev/pandas/issues/3186#issuecomment-20718308",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/3186",
    "id": 20718308,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwNzE4MzA4",
    "user": {
      "login": "ghost",
      "id": 10137,
      "node_id": "MDQ6VXNlcjEwMTM3",
      "avatar_url": "https://avatars3.githubusercontent.com/u/10137?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ghost",
      "html_url": "https://github.com/ghost",
      "followers_url": "https://api.github.com/users/ghost/followers",
      "following_url": "https://api.github.com/users/ghost/following{/other_user}",
      "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
      "organizations_url": "https://api.github.com/users/ghost/orgs",
      "repos_url": "https://api.github.com/users/ghost/repos",
      "events_url": "https://api.github.com/users/ghost/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ghost/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-07-10T02:30:31Z",
    "updated_at": "2013-11-28T18:40:16Z",
    "author_association": "NONE",
    "body": "By batched writes I meant that the c code does not buffer pending write data\nbefore issuing a `write`. presumably the OS might do this for you rather then\ngoing out to disk everytime, so it's just functional call overhead.\n\nThe iovec idea sound interesting, but how do you know the perf difference\nhas anything to do with the issue that addresses?\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/20720217",
    "html_url": "https://github.com/pandas-dev/pandas/issues/3186#issuecomment-20720217",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/3186",
    "id": 20720217,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwNzIwMjE3",
    "user": {
      "login": "cpcloud",
      "id": 417981,
      "node_id": "MDQ6VXNlcjQxNzk4MQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/417981?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cpcloud",
      "html_url": "https://github.com/cpcloud",
      "followers_url": "https://api.github.com/users/cpcloud/followers",
      "following_url": "https://api.github.com/users/cpcloud/following{/other_user}",
      "gists_url": "https://api.github.com/users/cpcloud/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cpcloud/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cpcloud/subscriptions",
      "organizations_url": "https://api.github.com/users/cpcloud/orgs",
      "repos_url": "https://api.github.com/users/cpcloud/repos",
      "events_url": "https://api.github.com/users/cpcloud/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cpcloud/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-07-10T03:50:52Z",
    "updated_at": "2013-07-10T03:50:52Z",
    "author_association": "MEMBER",
    "body": "what was the code you used to benchmark `to_csv`?\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/20723027",
    "html_url": "https://github.com/pandas-dev/pandas/issues/3186#issuecomment-20723027",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/3186",
    "id": 20723027,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwNzIzMDI3",
    "user": {
      "login": "ghost",
      "id": 10137,
      "node_id": "MDQ6VXNlcjEwMTM3",
      "avatar_url": "https://avatars3.githubusercontent.com/u/10137?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ghost",
      "html_url": "https://github.com/ghost",
      "followers_url": "https://api.github.com/users/ghost/followers",
      "following_url": "https://api.github.com/users/ghost/following{/other_user}",
      "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
      "organizations_url": "https://api.github.com/users/ghost/orgs",
      "repos_url": "https://api.github.com/users/ghost/repos",
      "events_url": "https://api.github.com/users/ghost/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ghost/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-07-10T05:54:41Z",
    "updated_at": "2013-07-10T05:54:41Z",
    "author_association": "NONE",
    "body": "I used iotop. \n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/20723241",
    "html_url": "https://github.com/pandas-dev/pandas/issues/3186#issuecomment-20723241",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/3186",
    "id": 20723241,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwNzIzMjQx",
    "user": {
      "login": "wesm",
      "id": 329591,
      "node_id": "MDQ6VXNlcjMyOTU5MQ==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/329591?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wesm",
      "html_url": "https://github.com/wesm",
      "followers_url": "https://api.github.com/users/wesm/followers",
      "following_url": "https://api.github.com/users/wesm/following{/other_user}",
      "gists_url": "https://api.github.com/users/wesm/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wesm/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wesm/subscriptions",
      "organizations_url": "https://api.github.com/users/wesm/orgs",
      "repos_url": "https://api.github.com/users/wesm/repos",
      "events_url": "https://api.github.com/users/wesm/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wesm/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-07-10T06:02:45Z",
    "updated_at": "2013-07-10T06:02:45Z",
    "author_association": "MEMBER",
    "body": "probably make sense to write a C to-csv routine for the simplest of to_csv outputs (maybe not support custom formatter functions to start) at some point. the IO cost will probably outweight the irregular memory access patterns. \n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/42725143",
    "html_url": "https://github.com/pandas-dev/pandas/issues/3186#issuecomment-42725143",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/3186",
    "id": 42725143,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNzI1MTQz",
    "user": {
      "login": "michaelaye",
      "id": 69774,
      "node_id": "MDQ6VXNlcjY5Nzc0",
      "avatar_url": "https://avatars1.githubusercontent.com/u/69774?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelaye",
      "html_url": "https://github.com/michaelaye",
      "followers_url": "https://api.github.com/users/michaelaye/followers",
      "following_url": "https://api.github.com/users/michaelaye/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelaye/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelaye/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelaye/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelaye/orgs",
      "repos_url": "https://api.github.com/users/michaelaye/repos",
      "events_url": "https://api.github.com/users/michaelaye/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelaye/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-05-09T23:59:15Z",
    "updated_at": "2014-05-09T23:59:15Z",
    "author_association": "CONTRIBUTOR",
    "body": "I'm interested in making this happen, here's what I found so far, most likely this is obvious to you, but I would need a hint to improve this:\n\n``` python\ndf = pd.DataFrame(randn(10000, 30))\n# this is the slow part, guess those loops are dodgy...\ndef df_to_string(df):\n    s = '\\n'.join([','.join(df.irow(i).astype('string')) for i in xrange(len(df))])\n    return s\n```\n\nThis is the fast part and I'm a cython noob, so be gentle:\n\n``` cython\ncimport cython\nfrom libc.stdio cimport fopen, FILE, fclose, fprintf\n\ndef c_write_to_file(filename, content):\n    filename_byte_string = filename.encode(\"UTF-8\")\n    cdef char* fname = filename_byte_string\n    cdef char* line = content\n\n    cdef FILE* cfile\n    cfile = fopen(fname, \"w\")\n    if cfile == NULL:\n        return\n\n    fprintf(cfile, line)\n    fclose(cfile)\n    return []\n```\n\nHere's some benchmarks I took:\n\n``` python\ndef df_to_csv_cython(df):\n    content = df_to_string(df)\n    c_write_to_file('test_out_c.txt', content)\n\n%timeit df_to_csv_cython(df):\n1 loops, best of 3: 1.67 s per loop\n\n%timeit df.to_csv('test_csv_out_pandas.csv')\n1 loops, best of 3: 416 ms per loop\n```\n\nSo, what needs to be improved is the dataframe to string conversion, but I guess you guys knew that already, I just had to dig down to what the actual bottleneck is.\nCan you provide any hints how I should proceed?\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/42725286",
    "html_url": "https://github.com/pandas-dev/pandas/issues/3186#issuecomment-42725286",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/3186",
    "id": 42725286,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNzI1Mjg2",
    "user": {
      "login": "michaelaye",
      "id": 69774,
      "node_id": "MDQ6VXNlcjY5Nzc0",
      "avatar_url": "https://avatars1.githubusercontent.com/u/69774?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelaye",
      "html_url": "https://github.com/michaelaye",
      "followers_url": "https://api.github.com/users/michaelaye/followers",
      "following_url": "https://api.github.com/users/michaelaye/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelaye/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelaye/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelaye/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelaye/orgs",
      "repos_url": "https://api.github.com/users/michaelaye/repos",
      "events_url": "https://api.github.com/users/michaelaye/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelaye/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-05-10T00:02:33Z",
    "updated_at": "2014-05-10T00:02:33Z",
    "author_association": "CONTRIBUTOR",
    "body": "Forgot the benchmarking of the cython write, it's blazing fast, once the `content` string is available:\n\n``` python\n%timeit c_write_to_file('test_out_cython.txt', content)\n100 loops, best of 3: 12.2 ms per loop\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/42725511",
    "html_url": "https://github.com/pandas-dev/pandas/issues/3186#issuecomment-42725511",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/3186",
    "id": 42725511,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNzI1NTEx",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-05-10T00:07:30Z",
    "updated_at": "2014-05-10T00:07:30Z",
    "author_association": "CONTRIBUTOR",
    "body": "no\n\nyou just need to change lib.write_rows_csv to a new version (it's a bit trickier because u have to decide a bit higher up in the formatted to user the fast path so u don't create the csv writer at all - but for proof of concept that didn't matter)\n\nall the conversions and such already happen by then \n\ntake the same data that is passed to write_rows_csv\n\nand just write a new version that takes that data and actually writes it to the file handle\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/42725599",
    "html_url": "https://github.com/pandas-dev/pandas/issues/3186#issuecomment-42725599",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/3186",
    "id": 42725599,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNzI1NTk5",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-05-10T00:09:58Z",
    "updated_at": "2014-05-10T00:09:58Z",
    "author_association": "CONTRIBUTOR",
    "body": "yep\n\nin fact u can almost reuse write_to_csv almost entirely\n\nit's the call to the write that is slow \n\n(because I think it does a lot of conversions  and such that don't matter for a plain vanilla csv)\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/43015749",
    "html_url": "https://github.com/pandas-dev/pandas/issues/3186#issuecomment-43015749",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/3186",
    "id": 43015749,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMDE1NzQ5",
    "user": {
      "login": "michaelaye",
      "id": 69774,
      "node_id": "MDQ6VXNlcjY5Nzc0",
      "avatar_url": "https://avatars1.githubusercontent.com/u/69774?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelaye",
      "html_url": "https://github.com/michaelaye",
      "followers_url": "https://api.github.com/users/michaelaye/followers",
      "following_url": "https://api.github.com/users/michaelaye/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelaye/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelaye/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelaye/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelaye/orgs",
      "repos_url": "https://api.github.com/users/michaelaye/repos",
      "events_url": "https://api.github.com/users/michaelaye/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelaye/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-05-13T21:31:04Z",
    "updated_at": "2014-05-13T21:32:14Z",
    "author_association": "CONTRIBUTOR",
    "body": "which 'write_to_csv' do you mean here? I think I understand now that I have to reimplement lib.pyx's `write_csv_rows` and make a `write_csv_rows_fast` there. But from below line profile I took for CSVFormatter._save_chunk() I guess I have to change _save_chunk() as well:\n\n``` python\nLine #      Hits         Time  Per Hit   % Time  Line Contents\n==============================================================\n  1279                                               def _save_chunk(self, start_i, end_i):\n  1280                                           \n  1281         4           11      2.8      0.0          data_index = self.data_index\n  1282                                           \n  1283                                                   # create the data for a chunk\n  1284         4            8      2.0      0.0          slicer = slice(start_i, end_i)\n  1285         8           20      2.5      0.0          for i in range(len(self.blocks)):\n  1286         4            4      1.0      0.0              b = self.blocks[i]\n  1287         4            5      1.2      0.0              d = b.to_native_types(slicer=slicer, na_rep=self.na_rep,\n  1288         4            4      1.0      0.0                                    float_format=self.float_format,\n  1289         4        59994  14998.5     13.6                                    date_format=self.date_format)\n  1290                                           \n  1291       124          296      2.4      0.1              for i, item in enumerate(b.items):\n  1292                                           \n  1293                                                           # self.data is a preallocated list\n  1294       120         3337     27.8      0.8                  self.data[self.column_map[b][i]] = d[i]\n  1295                                           \n  1296         4            9      2.2      0.0          ix = data_index.to_native_types(slicer=slicer, na_rep=self.na_rep,\n  1297         4            4      1.0      0.0                                          float_format=self.float_format,\n  1298         4         1010    252.5      0.2                                          date_format=self.date_format)\n  1299                                           \n  1300         4       377245  94311.2     85.4          lib.write_csv_rows(self.data, ix, self.nlevels, self.cols, self.writer)\n```\n\nAt least the b.to_native_types() takes quite some time.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/43018187",
    "html_url": "https://github.com/pandas-dev/pandas/issues/3186#issuecomment-43018187",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/3186",
    "id": 43018187,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMDE4MTg3",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-05-13T21:53:42Z",
    "updated_at": "2014-05-13T21:53:42Z",
    "author_association": "CONTRIBUTOR",
    "body": "no most of the slowness is with write_csv_rows\n\nsince _save_chunk calls this it is included in its time as well (a caller has the time of itself plus sum of its callees)\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/43023378",
    "html_url": "https://github.com/pandas-dev/pandas/issues/3186#issuecomment-43023378",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/3186",
    "id": 43023378,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMDIzMzc4",
    "user": {
      "login": "michaelaye",
      "id": 69774,
      "node_id": "MDQ6VXNlcjY5Nzc0",
      "avatar_url": "https://avatars1.githubusercontent.com/u/69774?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelaye",
      "html_url": "https://github.com/michaelaye",
      "followers_url": "https://api.github.com/users/michaelaye/followers",
      "following_url": "https://api.github.com/users/michaelaye/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelaye/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelaye/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelaye/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelaye/orgs",
      "repos_url": "https://api.github.com/users/michaelaye/repos",
      "events_url": "https://api.github.com/users/michaelaye/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelaye/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-05-13T22:53:09Z",
    "updated_at": "2014-05-17T01:15:19Z",
    "author_association": "CONTRIBUTOR",
    "body": "well, not even talking about absolute time, but isn't it correct that _save_chunk spends 13% of its time for the b.to_native_types() call? It is almost second order effect (85/13 = 6.5) but not completely negligible. Okay, so I assume in above comment you meant that I can reuse `lib.write_csv_rows()` and kickout what I don't need for a fast simple write-out? \n\nFunnily enough, I profiled that a python write of a long string is actually faster than a cython write-out of a long string, I guess due to cython overhead:\n\n``` python\n%timeit c_write_to_file('test_out_cython.txt', content)\n1 loops, best of 3: 144 ms per loop\n%timeit python_write_to_file('test_out_python.txt', content)\n10 loops, best of 3: 67 ms per loop\n```\n\nPS: mention myself to find this issue easier: @michaelaye\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/43023769",
    "html_url": "https://github.com/pandas-dev/pandas/issues/3186#issuecomment-43023769",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/3186",
    "id": 43023769,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMDIzNzY5",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-05-13T22:58:14Z",
    "updated_at": "2014-05-13T22:58:14Z",
    "author_association": "CONTRIBUTOR",
    "body": "I would simply copy lib.write_csv_rows and make a fast version\n\nconvert to native types is necessary for proper dtype handling \n\nworry about that later\n\nalways optimizes biggest time sync first\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/250610064",
    "html_url": "https://github.com/pandas-dev/pandas/issues/3186#issuecomment-250610064",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/3186",
    "id": 250610064,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1MDYxMDA2NA==",
    "user": {
      "login": "wesm",
      "id": 329591,
      "node_id": "MDQ6VXNlcjMyOTU5MQ==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/329591?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wesm",
      "html_url": "https://github.com/wesm",
      "followers_url": "https://api.github.com/users/wesm/followers",
      "following_url": "https://api.github.com/users/wesm/following{/other_user}",
      "gists_url": "https://api.github.com/users/wesm/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wesm/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wesm/subscriptions",
      "organizations_url": "https://api.github.com/users/wesm/orgs",
      "repos_url": "https://api.github.com/users/wesm/repos",
      "events_url": "https://api.github.com/users/wesm/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wesm/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-09-29T22:27:47Z",
    "updated_at": "2016-09-29T22:27:47Z",
    "author_association": "MEMBER",
    "body": "We will need to tackle this in the course of working on libpandas. I suggest we create a new set of issues around more optimally writing to CSV once we are ready to do that\n"
  }
]
