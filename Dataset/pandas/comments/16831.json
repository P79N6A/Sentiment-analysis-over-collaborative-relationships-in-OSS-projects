[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/313185908",
    "html_url": "https://github.com/pandas-dev/pandas/issues/16831#issuecomment-313185908",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/16831",
    "id": 313185908,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxMzE4NTkwOA==",
    "user": {
      "login": "cristianornelas",
      "id": 14530940,
      "node_id": "MDQ6VXNlcjE0NTMwOTQw",
      "avatar_url": "https://avatars1.githubusercontent.com/u/14530940?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cristianornelas",
      "html_url": "https://github.com/cristianornelas",
      "followers_url": "https://api.github.com/users/cristianornelas/followers",
      "following_url": "https://api.github.com/users/cristianornelas/following{/other_user}",
      "gists_url": "https://api.github.com/users/cristianornelas/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cristianornelas/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cristianornelas/subscriptions",
      "organizations_url": "https://api.github.com/users/cristianornelas/orgs",
      "repos_url": "https://api.github.com/users/cristianornelas/repos",
      "events_url": "https://api.github.com/users/cristianornelas/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cristianornelas/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-07-05T18:23:36Z",
    "updated_at": "2017-07-05T18:23:36Z",
    "author_association": "NONE",
    "body": "Same issue here."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/313187234",
    "html_url": "https://github.com/pandas-dev/pandas/issues/16831#issuecomment-313187234",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/16831",
    "id": 313187234,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxMzE4NzIzNA==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-07-05T18:28:41Z",
    "updated_at": "2017-07-05T18:28:41Z",
    "author_association": "CONTRIBUTOR",
    "body": "Can you make a complete example? Your `df` is undefined."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/313189812",
    "html_url": "https://github.com/pandas-dev/pandas/issues/16831#issuecomment-313189812",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/16831",
    "id": 313189812,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxMzE4OTgxMg==",
    "user": {
      "login": "gmatheus95",
      "id": 5377246,
      "node_id": "MDQ6VXNlcjUzNzcyNDY=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/5377246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gmatheus95",
      "html_url": "https://github.com/gmatheus95",
      "followers_url": "https://api.github.com/users/gmatheus95/followers",
      "following_url": "https://api.github.com/users/gmatheus95/following{/other_user}",
      "gists_url": "https://api.github.com/users/gmatheus95/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gmatheus95/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gmatheus95/subscriptions",
      "organizations_url": "https://api.github.com/users/gmatheus95/orgs",
      "repos_url": "https://api.github.com/users/gmatheus95/repos",
      "events_url": "https://api.github.com/users/gmatheus95/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gmatheus95/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-07-05T18:38:15Z",
    "updated_at": "2017-07-05T18:38:15Z",
    "author_association": "NONE",
    "body": "I cannot give you the actual dataframe I'm working with since it's private data, but here's a very naive executable code to illustrate the issue.\r\n\r\n```python\r\nimport pandas as pd\r\nimport numpy as np\r\nfrom datetime import datetime,timedelta\r\n\r\ntoday = datetime.today()\r\nx = [today] * 10000\r\ndf = pd.DataFrame({'date':x})\r\n\r\nthreshold = np.datetime64(datetime.today()+timedelta(weeks=3))\r\n\r\n#and then the comparisons:\r\ndf[threshold < df['date']]\r\ndf[df['date'] < threshold]\r\n```\r\nThanks."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/313195346",
    "html_url": "https://github.com/pandas-dev/pandas/issues/16831#issuecomment-313195346",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/16831",
    "id": 313195346,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxMzE5NTM0Ng==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-07-05T18:59:18Z",
    "updated_at": "2017-07-05T18:59:53Z",
    "author_association": "CONTRIBUTOR",
    "body": "Seems to be related to the numpy timestamp being  microsecond precision:\r\n\r\n```python\r\nIn [111]: np.datetime64(today + timedelta(weeks=3)) < pd.Series([today])\r\nOut[111]:\r\n0    True\r\ndtype: bool\r\n\r\nIn [112]: np.datetime64(today + timedelta(weeks=3)).astype(\"<M8[ns]\") < pd.Series([today])\r\nOut[112]:\r\n0    False\r\ndtype: bool\r\n```\r\n\r\nI'm not sure what the desired outcome is here. pandas only deals with nanosecond precision timestamps, so do we silently change the precision of the input, or raise an error?\r\n\r\nEither way, we need to fix things to be consistent between Series and DataFrame here."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/313197350",
    "html_url": "https://github.com/pandas-dev/pandas/issues/16831#issuecomment-313197350",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/16831",
    "id": 313197350,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxMzE5NzM1MA==",
    "user": {
      "login": "gmatheus95",
      "id": 5377246,
      "node_id": "MDQ6VXNlcjUzNzcyNDY=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/5377246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gmatheus95",
      "html_url": "https://github.com/gmatheus95",
      "followers_url": "https://api.github.com/users/gmatheus95/followers",
      "following_url": "https://api.github.com/users/gmatheus95/following{/other_user}",
      "gists_url": "https://api.github.com/users/gmatheus95/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gmatheus95/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gmatheus95/subscriptions",
      "organizations_url": "https://api.github.com/users/gmatheus95/orgs",
      "repos_url": "https://api.github.com/users/gmatheus95/repos",
      "events_url": "https://api.github.com/users/gmatheus95/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gmatheus95/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-07-05T19:06:59Z",
    "updated_at": "2017-07-05T19:06:59Z",
    "author_association": "NONE",
    "body": "I'm sorry, I don't get it. Even after adding **three weeks** of delta, why do I still get True in ``Out[111]`` because of timestamp precision? I'm sorry if it's a naive question, I'm not really experienced in numpy.\r\n\r\nThank you anyway for addressing the issue so fast!"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/313199192",
    "html_url": "https://github.com/pandas-dev/pandas/issues/16831#issuecomment-313199192",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/16831",
    "id": 313199192,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxMzE5OTE5Mg==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-07-05T19:14:31Z",
    "updated_at": "2017-07-05T19:14:31Z",
    "author_association": "CONTRIBUTOR",
    "body": "> I'm sorry, I don't get it. Even after adding three weeks of delta, why do I still get True in Out[111] because of timestamp precision?\r\n\r\nSorry if I wasn't clear, it's definitely a bug. It *should* be False (or maybe an exception).\r\n\r\nNumpy stores datetimes as int64s, where the exact datetime of an integer depends on the resolution.\r\n\r\n```python\r\nIn [119]: np.datetime64(today).view('i8')\r\nOut[119]: 1499262896667864\r\n\r\nIn [120]: np.datetime64(today).astype('<M8[ns]').view('i8')\r\nOut[120]: 1499262896667864000\r\n```\r\n\r\nIt's *possible* (haven't confirmed yet) that when you do `threshold < df['date']`, pandas looks at those integers without checking that they're at the same resolution. And since your `threshold` is in microseconds it's going to be smaller than the pandas one (which is in nanoseconds). This is guess a guess though."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/313199903",
    "html_url": "https://github.com/pandas-dev/pandas/issues/16831#issuecomment-313199903",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/16831",
    "id": 313199903,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxMzE5OTkwMw==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-07-05T19:17:36Z",
    "updated_at": "2017-07-05T19:17:36Z",
    "author_association": "CONTRIBUTOR",
    "body": "Ah, indeed this seems to be a duplicate of https://github.com/pandas-dev/pandas/issues/7996.\r\n\r\nFor now, you can workaround by converting `threshold` to a `pd.Timestamp`, which will ensure that you have nanosecond-precision datetimes everywhere."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/313205592",
    "html_url": "https://github.com/pandas-dev/pandas/issues/16831#issuecomment-313205592",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/16831",
    "id": 313205592,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxMzIwNTU5Mg==",
    "user": {
      "login": "gmatheus95",
      "id": 5377246,
      "node_id": "MDQ6VXNlcjUzNzcyNDY=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/5377246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gmatheus95",
      "html_url": "https://github.com/gmatheus95",
      "followers_url": "https://api.github.com/users/gmatheus95/followers",
      "following_url": "https://api.github.com/users/gmatheus95/following{/other_user}",
      "gists_url": "https://api.github.com/users/gmatheus95/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gmatheus95/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gmatheus95/subscriptions",
      "organizations_url": "https://api.github.com/users/gmatheus95/orgs",
      "repos_url": "https://api.github.com/users/gmatheus95/repos",
      "events_url": "https://api.github.com/users/gmatheus95/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gmatheus95/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-07-05T19:40:56Z",
    "updated_at": "2017-07-05T19:40:56Z",
    "author_association": "NONE",
    "body": "Oh now I get it, thanks again!!"
  }
]
