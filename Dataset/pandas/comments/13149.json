[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/218701105",
    "html_url": "https://github.com/pandas-dev/pandas/issues/13149#issuecomment-218701105",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13149",
    "id": 218701105,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIxODcwMTEwNQ==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-05-12T09:07:21Z",
    "updated_at": "2016-05-12T09:07:21Z",
    "author_association": "MEMBER",
    "body": "This is numpy behaviour:\n\n```\nIn [22]: np.array([np.nan, 1.]).astype(int)\nOut[22]: array([-2147483648,           1])\n```\n\nBut, we should probably check for the occurence of NaNs, just as we do for Series:\n\n```\nIn [29]: df.iloc[0,0] = np.nan\n\nIn [30]: df.a\nOut[30]:\nNaN   NaN\n 1      2\nName: a, dtype: float64\n\nIn [31]: df.a.astype(int)\n...\n\nC:\\Anaconda\\lib\\site-packages\\pandas\\core\\common.pyc in _astype_nansafe(arr, dty\npe, copy)\n   2726\n   2727         if np.isnan(arr).any():\n-> 2728             raise ValueError('Cannot convert NA to integer')\n   2729     elif arr.dtype == np.object_ and np.issubdtype(dtype.type, np.intege\nr):\n   2730         # work around NumPy brokenness, #1987\n\nValueError: Cannot convert NA to integer\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/219588167",
    "html_url": "https://github.com/pandas-dev/pandas/issues/13149#issuecomment-219588167",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13149",
    "id": 219588167,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIxOTU4ODE2Nw==",
    "user": {
      "login": "pijucha",
      "id": 9507544,
      "node_id": "MDQ6VXNlcjk1MDc1NDQ=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/9507544?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pijucha",
      "html_url": "https://github.com/pijucha",
      "followers_url": "https://api.github.com/users/pijucha/followers",
      "following_url": "https://api.github.com/users/pijucha/following{/other_user}",
      "gists_url": "https://api.github.com/users/pijucha/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pijucha/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pijucha/subscriptions",
      "organizations_url": "https://api.github.com/users/pijucha/orgs",
      "repos_url": "https://api.github.com/users/pijucha/repos",
      "events_url": "https://api.github.com/users/pijucha/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pijucha/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-05-17T00:32:22Z",
    "updated_at": "2016-05-17T00:32:22Z",
    "author_association": "CONTRIBUTOR",
    "body": "I wanted to fix this bug but noticed a similar behaviour of other objects: DatetimeIndex, TimedeltaIndex, Categorical, CategoricalIndex. Namely (all four of them behave identically):\n\n```\nA = pd.DatetimeIndex([1e10,2e10,None])\nA\nOut[76]: DatetimeIndex(['1970-01-01 00:00:10', '1970-01-01 00:00:20', 'NaT'], dtype='datetime64[ns]', freq=None)\nA.astype(int)\nOut[77]: array([         10000000000,          20000000000, -9223372036854775808])\n```\n\nHowever, unlike with Float64Index, this is invertible:\n\n```\npd.DatetimeIndex(A.astype(int))\nOut[78]: DatetimeIndex(['1970-01-01 00:00:10', '1970-01-01 00:00:20', 'NaT'], dtype='datetime64[ns]', freq=None)\n```\n\nMy question: is this behaviour also a bug and should be fixed the same way (raising a ValueError)? And if so, should all the fixes be placed into one commit/pull request?\n\nBy the way, there might be other objects with the same issue, which call numpy.ndarray.astype(). And numpy is also a bit inconsistent here:\n\n```\nnp.array([1,np.nan]).astype(int)\nOut[84]: array([                   1, -9223372036854775808])\nnp.array([1,np.nan], dtype = int)\nTraceback...\nValueError: cannot convert float NaN to integer\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/219722120",
    "html_url": "https://github.com/pandas-dev/pandas/issues/13149#issuecomment-219722120",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13149",
    "id": 219722120,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIxOTcyMjEyMA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-05-17T13:46:16Z",
    "updated_at": "2016-05-17T13:46:16Z",
    "author_association": "CONTRIBUTOR",
    "body": "@ch41rmn these are all as expected. converting to `int` converts to the underlying integer based representation. \n\nThe _only_ issue is that `Float64Index.astype(int)` should raise (as its effectively non-convertible).\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/219732591",
    "html_url": "https://github.com/pandas-dev/pandas/issues/13149#issuecomment-219732591",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13149",
    "id": 219732591,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIxOTczMjU5MQ==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-05-17T14:20:52Z",
    "updated_at": "2016-05-17T14:20:52Z",
    "author_association": "MEMBER",
    "body": "@jreback I actually think we should raise in the datetimeindex case as well (ideally). A `NaT` cannot be converted to int (just as float nan cannot be converted). There is the `asi8` attribute if you want this. \nBut, of course, that is not really back compat. Internally I think we consequently use `asi8`? But not sure about external use of course\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/219733188",
    "html_url": "https://github.com/pandas-dev/pandas/issues/13149#issuecomment-219733188",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13149",
    "id": 219733188,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIxOTczMzE4OA==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-05-17T14:22:41Z",
    "updated_at": "2016-05-17T14:22:41Z",
    "author_association": "MEMBER",
    "body": "Raising for CategoricalIndex seems less of a problem (not a common thing to do)\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/219751377",
    "html_url": "https://github.com/pandas-dev/pandas/issues/13149#issuecomment-219751377",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13149",
    "id": 219751377,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIxOTc1MTM3Nw==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-05-17T15:18:32Z",
    "updated_at": "2016-05-17T15:18:32Z",
    "author_association": "CONTRIBUTOR",
    "body": "This is excactly what should be returned (and is useful). yes its equivalen to internal `.asi8`, but I dont' see a good reason to NOT do this.\n\n```\nIn [20]: pd.DatetimeIndex([1e10,2e10,None]).astype(int)\nOut[20]: array([         10000000000,          20000000000, -9223372036854775808])\n```\n"
  }
]
