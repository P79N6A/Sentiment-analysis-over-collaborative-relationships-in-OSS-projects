[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/203905234",
    "html_url": "https://github.com/pandas-dev/pandas/issues/12755#issuecomment-203905234",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/12755",
    "id": 203905234,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwMzkwNTIzNA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-03-31T12:22:20Z",
    "updated_at": "2016-03-31T12:22:52Z",
    "author_association": "CONTRIBUTOR",
    "body": "operating on series involves `.align` them, basically they are reindexed to the union.\n\n```\nIn [23]: a = pd.Series(1, index=range(3))\n\nIn [24]: a = pd.Series(1, index=range(3))\n\nIn [25]: a2, b2 = a.align(b)\n\nIn [26]: a2\nOut[26]: \n0    1.0\n1    1.0\n2    1.0\n3    NaN\ndtype: float64\n\nIn [27]: b2\nOut[27]: \n0    2\n1    2\n2    2\n3    2\ndtype: int64\n```\n\nSo `a+b` is exactly right\n\n```\nIn [18]: b = pd.Series(2, index=range(4))\n\nIn [19]: a = pd.Series(1, index=range(3))\n\nIn [20]: a+b\nOut[20]: \n0    3.0\n1    3.0\n2    3.0\n3    NaN\ndtype: float64\n```\n\nLooks like this is just taking the a indices (and not aligning). This probably doesn't have as much test coverage. So I would call this a bug in that `a` should yield `a+b` here.\n\n```\nIn [21]: a+=b\n\nIn [22] a\nOut[22]: \n0    3.0\n1    3.0\n2    3.0\ndtype: float64\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/203929198",
    "html_url": "https://github.com/pandas-dev/pandas/issues/12755#issuecomment-203929198",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/12755",
    "id": 203929198,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwMzkyOTE5OA==",
    "user": {
      "login": "toobaz",
      "id": 1224492,
      "node_id": "MDQ6VXNlcjEyMjQ0OTI=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1224492?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/toobaz",
      "html_url": "https://github.com/toobaz",
      "followers_url": "https://api.github.com/users/toobaz/followers",
      "following_url": "https://api.github.com/users/toobaz/following{/other_user}",
      "gists_url": "https://api.github.com/users/toobaz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/toobaz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/toobaz/subscriptions",
      "organizations_url": "https://api.github.com/users/toobaz/orgs",
      "repos_url": "https://api.github.com/users/toobaz/repos",
      "events_url": "https://api.github.com/users/toobaz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/toobaz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-03-31T13:08:29Z",
    "updated_at": "2016-03-31T13:08:29Z",
    "author_association": "MEMBER",
    "body": "True, your proposed solution is coherent with `a = a+b`. Just one more argument in favour of my preferred one: coherence with `df['a'] = b`:\n\n```\nIn [2]: df = pd.DataFrame(index=range(3))\n\nIn [3]: df['a'] = 1\n\nIn [4]: b = pd.Series(5, index=range(4))\n\nIn [5]: df['a'] = b\n\nIn [6]: df\nOut[6]: \n   a\n0  5\n1  5\n2  5\n```\n\n... then, according to your solution (trivially extended to DataFrames), we would have:\n\n```\nIn [7]: df['a'] += b\n\nIn [8]: df\nOut[8]: \n      a\n0  10.0\n1  10.0\n2  10.0\n3  NaN\n```\n\n... while according to my proposal, we would have:\n\n```\nIn [7]: df['a'] += b\n\nIn [8]: df\nOut[8]: \n      a\n0  10\n1  10\n2  10\n```\n\nNotice that with neither of these `df['a'] += b` has the same effect of `df['a'] = a + b` anyway - which is instead true with the currently implemented behaviour. In other words: whatever decision is taken, there is some inconsistency. I like the option of not changing the dtype just because I think it is more useful.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/203950716",
    "html_url": "https://github.com/pandas-dev/pandas/issues/12755#issuecomment-203950716",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/12755",
    "id": 203950716,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwMzk1MDcxNg==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-03-31T13:53:03Z",
    "updated_at": "2016-03-31T13:53:03Z",
    "author_association": "CONTRIBUTOR",
    "body": "hmm, there might be some logic in an in-place op to always do left-align (only). I don't think we want to make\n`df['a'] += b` change the index as the `b` should get aligned to the `df.index`, NOT the union.\n\nso on second thought I don't think this is a bug, but rather an explict design decision.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/203955021",
    "html_url": "https://github.com/pandas-dev/pandas/issues/12755#issuecomment-203955021",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/12755",
    "id": 203955021,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwMzk1NTAyMQ==",
    "user": {
      "login": "toobaz",
      "id": 1224492,
      "node_id": "MDQ6VXNlcjEyMjQ0OTI=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1224492?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/toobaz",
      "html_url": "https://github.com/toobaz",
      "followers_url": "https://api.github.com/users/toobaz/followers",
      "following_url": "https://api.github.com/users/toobaz/following{/other_user}",
      "gists_url": "https://api.github.com/users/toobaz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/toobaz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/toobaz/subscriptions",
      "organizations_url": "https://api.github.com/users/toobaz/orgs",
      "repos_url": "https://api.github.com/users/toobaz/repos",
      "events_url": "https://api.github.com/users/toobaz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/toobaz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-03-31T14:06:13Z",
    "updated_at": "2016-03-31T14:06:13Z",
    "author_association": "MEMBER",
    "body": "I agree with you. So coming back to the dtype, OK for not changing it (when the casting is only a consequence of missing values)? Or talking about implementation: OK for calculating the operation **on the left axis**, _and then_ putting the values in the left series (rather than calculating the operation on the union and then putting only values corresponding to the left axis in the left series)?\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/203959801",
    "html_url": "https://github.com/pandas-dev/pandas/issues/12755#issuecomment-203959801",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/12755",
    "id": 203959801,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwMzk1OTgwMQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-03-31T14:19:50Z",
    "updated_at": "2016-03-31T14:19:50Z",
    "author_association": "CONTRIBUTOR",
    "body": "@toobaz I dont really recall this code path. If you can do this w/o jumping thru hoops then ok with changing impl to NOT change dtype. might be straghtforward.\n"
  }
]
