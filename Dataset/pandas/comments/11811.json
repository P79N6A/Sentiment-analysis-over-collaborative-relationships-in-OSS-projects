[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/163517711",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11811#issuecomment-163517711",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11811",
    "id": 163517711,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2MzUxNzcxMQ==",
    "user": {
      "login": "bobobo1618",
      "id": 707839,
      "node_id": "MDQ6VXNlcjcwNzgzOQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/707839?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bobobo1618",
      "html_url": "https://github.com/bobobo1618",
      "followers_url": "https://api.github.com/users/bobobo1618/followers",
      "following_url": "https://api.github.com/users/bobobo1618/following{/other_user}",
      "gists_url": "https://api.github.com/users/bobobo1618/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bobobo1618/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bobobo1618/subscriptions",
      "organizations_url": "https://api.github.com/users/bobobo1618/orgs",
      "repos_url": "https://api.github.com/users/bobobo1618/repos",
      "events_url": "https://api.github.com/users/bobobo1618/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bobobo1618/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-12-10T06:51:15Z",
    "updated_at": "2015-12-10T06:51:15Z",
    "author_association": "NONE",
    "body": "Seems `resample` with a custom `how` is broken too?\n\n``` python\n>>> rawdat.groupby(['Symbol']).resample('1M', label='right', how='sum')\n<Lots of data>\n>>> rawdat.groupby(['Symbol']).resample('1M', label='right', how=lambda period: (period[-1]/period[0]) - 1.0)\n<Empty>\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/163579152",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11811#issuecomment-163579152",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11811",
    "id": 163579152,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2MzU3OTE1Mg==",
    "user": {
      "login": "sinhrks",
      "id": 1696302,
      "node_id": "MDQ6VXNlcjE2OTYzMDI=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1696302?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sinhrks",
      "html_url": "https://github.com/sinhrks",
      "followers_url": "https://api.github.com/users/sinhrks/followers",
      "following_url": "https://api.github.com/users/sinhrks/following{/other_user}",
      "gists_url": "https://api.github.com/users/sinhrks/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sinhrks/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sinhrks/subscriptions",
      "organizations_url": "https://api.github.com/users/sinhrks/orgs",
      "repos_url": "https://api.github.com/users/sinhrks/repos",
      "events_url": "https://api.github.com/users/sinhrks/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sinhrks/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-12-10T11:00:29Z",
    "updated_at": "2015-12-10T11:00:29Z",
    "author_association": "MEMBER",
    "body": "Thanks for the report. Can you attach the content of `data.csv` as small copy-pastable format?\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/163683156",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11811#issuecomment-163683156",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11811",
    "id": 163683156,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2MzY4MzE1Ng==",
    "user": {
      "login": "bobobo1618",
      "id": 707839,
      "node_id": "MDQ6VXNlcjcwNzgzOQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/707839?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bobobo1618",
      "html_url": "https://github.com/bobobo1618",
      "followers_url": "https://api.github.com/users/bobobo1618/followers",
      "following_url": "https://api.github.com/users/bobobo1618/following{/other_user}",
      "gists_url": "https://api.github.com/users/bobobo1618/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bobobo1618/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bobobo1618/subscriptions",
      "organizations_url": "https://api.github.com/users/bobobo1618/orgs",
      "repos_url": "https://api.github.com/users/bobobo1618/repos",
      "events_url": "https://api.github.com/users/bobobo1618/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bobobo1618/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-12-10T16:44:17Z",
    "updated_at": "2015-12-10T16:44:17Z",
    "author_association": "NONE",
    "body": "I'm unable to provide the data itself because it's licensed (and several GB) unfortunately. \n\nWhen trying to give you a subset though, I discovered that the bug was only reproducible when I read more than 1032393 (an odd but specific number) rows from the CSV. If I read less, the functions above worked perfectly. If I read more, they all broke completely:\n\n``` python\n>>> rawdat = pd.read_csv('./data.csv', parse_dates=[1], index_col=[1], usecols=[0, 1, 12], nrows=1032393)\n>>> rawdat.groupby(['Symbol']).resample('1M', label='right', how=lambda period: (period[-1]/period[0]) - 1.0)\n<Data>\n>>> rawdat = pd.read_csv('./data.csv', parse_dates=[1], index_col=[1], usecols=[0, 1, 12], nrows=1032394)\n>>> rawdat.groupby(['Symbol']).resample('1M', label='right', how=lambda period: (period[-1]/period[0]) - 1.0)\n<Empty>\n```\n\nSince that number was so specific, I looked into the data and saw that at that row, there was a gap of a few months in that symbol's data:\n\n```\n2014-06-27  AMBCW   17.490000\n2014-09-24  AMBCW   13.500000\n```\n\nI skipped over that with `skiprows` and found a similar break at:\n\n```\n2004-12-16  AMBI    0.3000\n2005-02-28  AMBI    0.3000\n```\n\nSo I suspect that the problem is really the gap in the data.\n\nAlso though, I found that grouping by `multiindex` levels didn't work:\n\n``` python\n# Column 0 is a symbol. \n>>> rawdat = pd.read_csv('./data.csv', parse_dates=[1], index_col=[0, 1], usecols=[0, 1, 12], nrows=1000)\n>>> rawdat.reset_index(level=0).groupby(['Symbol']).resample('1M', label='right', how=lambda period: (period[-1]/period[0]) - 1.0)\n<Lots of data>\n>>> rawdat.groupby(level=0).resample('1M', label='right', how=lambda period: (period[-1]/period[0]) - 1.0)\n<Empty>\n```\n\nI can share 1000 rows with you so [here's](http://ix.io/mJE) all you need to reproduce the `multiindex` problem.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/164158285",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11811#issuecomment-164158285",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11811",
    "id": 164158285,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2NDE1ODI4NQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-12-12T14:26:27Z",
    "updated_at": "2015-12-12T14:26:27Z",
    "author_association": "CONTRIBUTOR",
    "body": "@bobobo1618 the last might be a bug. Can you put together a copy-pastable example that is reproducible.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/164178120",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11811#issuecomment-164178120",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11811",
    "id": 164178120,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2NDE3ODEyMA==",
    "user": {
      "login": "bobobo1618",
      "id": 707839,
      "node_id": "MDQ6VXNlcjcwNzgzOQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/707839?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bobobo1618",
      "html_url": "https://github.com/bobobo1618",
      "followers_url": "https://api.github.com/users/bobobo1618/followers",
      "following_url": "https://api.github.com/users/bobobo1618/following{/other_user}",
      "gists_url": "https://api.github.com/users/bobobo1618/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bobobo1618/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bobobo1618/subscriptions",
      "organizations_url": "https://api.github.com/users/bobobo1618/orgs",
      "repos_url": "https://api.github.com/users/bobobo1618/repos",
      "events_url": "https://api.github.com/users/bobobo1618/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bobobo1618/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-12-12T19:36:40Z",
    "updated_at": "2015-12-12T19:36:46Z",
    "author_association": "NONE",
    "body": "Replacing my function with this caused it to work:\n\n``` python\ndef month_change_resample(arraylike):\n    if len(arraylike) == 0:\n        return 0\n    return (arraylike[-1]/arraylike[0]) - 1.0\n```\n\nIt seems some of the arraylike objects were of length zero, which would have caused an IndexError during the execution. Is outputting nothing expected behaviour in that situation?\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/164200278",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11811#issuecomment-164200278",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11811",
    "id": 164200278,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2NDIwMDI3OA==",
    "user": {
      "login": "bobobo1618",
      "id": 707839,
      "node_id": "MDQ6VXNlcjcwNzgzOQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/707839?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bobobo1618",
      "html_url": "https://github.com/bobobo1618",
      "followers_url": "https://api.github.com/users/bobobo1618/followers",
      "following_url": "https://api.github.com/users/bobobo1618/following{/other_user}",
      "gists_url": "https://api.github.com/users/bobobo1618/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bobobo1618/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bobobo1618/subscriptions",
      "organizations_url": "https://api.github.com/users/bobobo1618/orgs",
      "repos_url": "https://api.github.com/users/bobobo1618/repos",
      "events_url": "https://api.github.com/users/bobobo1618/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bobobo1618/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-12-12T22:55:14Z",
    "updated_at": "2015-12-12T22:55:14Z",
    "author_association": "NONE",
    "body": "Ah sorry, no it didn't.\n\nCopy pastable example:\n\n``` bash\ncurl http://ix.io/mJE > data.csv\ncat << EOF > test.py\nimport pandas as pd\nrawdat = pd.read_csv('./data.csv', parse_dates=[1], index_col=[0, 1], usecols=[0, 1, 12], nrows=1000)\ndef month_change_resample(arraylike):\n    if len(arraylike) == 0:\n        return 0\n    return (arraylike[-1]/arraylike[0]) - 1.0\nprint(\"Level result: \")\nprint(rawdat.groupby(level=0).resample('1M', label='right', how=month_change_resample))\nprint(\"No level result:\")\nprint(rawdat.reset_index(level=0).groupby(['Symbol']).resample('1M', label='right', how=month_change_resample))\nEOF\npython test.py\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/164295819",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11811#issuecomment-164295819",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11811",
    "id": 164295819,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2NDI5NTgxOQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-12-13T20:31:43Z",
    "updated_at": "2015-12-13T20:31:52Z",
    "author_association": "CONTRIBUTOR",
    "body": "@bobobo1618 a copy-pastable example is one that I can actually copy and past.\n\nIOW, no files are involved. The dataframe should be much shorter.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/393122710",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11811#issuecomment-393122710",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11811",
    "id": 393122710,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MzEyMjcxMA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-30T11:11:42Z",
    "updated_at": "2018-05-30T11:11:42Z",
    "author_association": "CONTRIBUTOR",
    "body": "not reproducible and likely same issue as in #21200 "
  }
]
