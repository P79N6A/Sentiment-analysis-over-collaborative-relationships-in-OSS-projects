[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/472492807",
    "html_url": "https://github.com/pandas-dev/pandas/issues/25704#issuecomment-472492807",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/25704",
    "id": 472492807,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3MjQ5MjgwNw==",
    "user": {
      "login": "WillAyd",
      "id": 609873,
      "node_id": "MDQ6VXNlcjYwOTg3Mw==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/609873?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/WillAyd",
      "html_url": "https://github.com/WillAyd",
      "followers_url": "https://api.github.com/users/WillAyd/followers",
      "following_url": "https://api.github.com/users/WillAyd/following{/other_user}",
      "gists_url": "https://api.github.com/users/WillAyd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/WillAyd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/WillAyd/subscriptions",
      "organizations_url": "https://api.github.com/users/WillAyd/orgs",
      "repos_url": "https://api.github.com/users/WillAyd/repos",
      "events_url": "https://api.github.com/users/WillAyd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/WillAyd/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-13T16:13:41Z",
    "updated_at": "2019-03-13T16:14:01Z",
    "author_association": "MEMBER",
    "body": "You should get the desired behavior by selecting levels:\r\n\r\n```python\r\nIn [11]: data['N'].groupby(level=['date', 'name']).sum()\r\nOut[11]:\r\ndate        name\r\n2016-02-15  A       5\r\nName: N, dtype: int64\r\n```\r\n\r\nThis should be raising a `KeyError` as dates and names aren't actually column labels. \r\n\r\nPRs to make that happen would certainly be welcome"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/472504362",
    "html_url": "https://github.com/pandas-dev/pandas/issues/25704#issuecomment-472504362",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/25704",
    "id": 472504362,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3MjUwNDM2Mg==",
    "user": {
      "login": "vss888",
      "id": 20497083,
      "node_id": "MDQ6VXNlcjIwNDk3MDgz",
      "avatar_url": "https://avatars2.githubusercontent.com/u/20497083?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vss888",
      "html_url": "https://github.com/vss888",
      "followers_url": "https://api.github.com/users/vss888/followers",
      "following_url": "https://api.github.com/users/vss888/following{/other_user}",
      "gists_url": "https://api.github.com/users/vss888/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vss888/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vss888/subscriptions",
      "organizations_url": "https://api.github.com/users/vss888/orgs",
      "repos_url": "https://api.github.com/users/vss888/repos",
      "events_url": "https://api.github.com/users/vss888/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vss888/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-13T16:39:45Z",
    "updated_at": "2019-03-13T16:43:07Z",
    "author_association": "NONE",
    "body": "@WillAyd According to [Grouping DataFrame with Index Levels and Columns](http://pandas.pydata.org/pandas-docs/stable/user_guide/groupby.html#grouping-dataframe-with-index-levels-and-columns) : _\"Index level names may be specified as keys directly to groupby\"_ (starting with version 0.20, see **In/Out[51]** on the page). So, what I did should be correct. Am I misunderstanding anything?"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/472508127",
    "html_url": "https://github.com/pandas-dev/pandas/issues/25704#issuecomment-472508127",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/25704",
    "id": 472508127,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3MjUwODEyNw==",
    "user": {
      "login": "vss888",
      "id": 20497083,
      "node_id": "MDQ6VXNlcjIwNDk3MDgz",
      "avatar_url": "https://avatars2.githubusercontent.com/u/20497083?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vss888",
      "html_url": "https://github.com/vss888",
      "followers_url": "https://api.github.com/users/vss888/followers",
      "following_url": "https://api.github.com/users/vss888/following{/other_user}",
      "gists_url": "https://api.github.com/users/vss888/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vss888/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vss888/subscriptions",
      "organizations_url": "https://api.github.com/users/vss888/orgs",
      "repos_url": "https://api.github.com/users/vss888/repos",
      "events_url": "https://api.github.com/users/vss888/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vss888/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-13T16:48:31Z",
    "updated_at": "2019-03-13T16:49:55Z",
    "author_association": "NONE",
    "body": "I think, it has something to do with the following selection line in my example:\r\n``` python\r\ndata = data[ data.index.get_level_values('time')>=pd.to_timedelta('09:30:00') ]\r\n```\r\nWithout it, the code works correctly."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/472511574",
    "html_url": "https://github.com/pandas-dev/pandas/issues/25704#issuecomment-472511574",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/25704",
    "id": 472511574,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3MjUxMTU3NA==",
    "user": {
      "login": "vss888",
      "id": 20497083,
      "node_id": "MDQ6VXNlcjIwNDk3MDgz",
      "avatar_url": "https://avatars2.githubusercontent.com/u/20497083?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vss888",
      "html_url": "https://github.com/vss888",
      "followers_url": "https://api.github.com/users/vss888/followers",
      "following_url": "https://api.github.com/users/vss888/following{/other_user}",
      "gists_url": "https://api.github.com/users/vss888/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vss888/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vss888/subscriptions",
      "organizations_url": "https://api.github.com/users/vss888/orgs",
      "repos_url": "https://api.github.com/users/vss888/repos",
      "events_url": "https://api.github.com/users/vss888/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vss888/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-13T16:56:25Z",
    "updated_at": "2019-03-13T16:56:25Z",
    "author_association": "NONE",
    "body": "Or it might have something to do with the `Series` input to `groupby` having only two rows, since the following example (without any selection) also produces incorrect result:\r\n\r\n``` python\r\nimport pandas as pd\r\ndata = pd.DataFrame(data={'date':[pd.Timestamp('2016-02-15')]*2, \r\n    'time':[pd.Timedelta(x) for x in ('10:10:00','11:10:00')],'name':['A']*2, \r\n    'N':[2,3]}).set_index(['date','time','name']).sort_index()\r\ndataGB = data['N'].groupby(['date','name'])\r\nprint(data)\r\nprint('Number of groups:',len(dataGB))\r\nprint(dataGB.sum())\r\nprint(pd.__version__)\r\n```\r\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/472512919",
    "html_url": "https://github.com/pandas-dev/pandas/issues/25704#issuecomment-472512919",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/25704",
    "id": 472512919,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3MjUxMjkxOQ==",
    "user": {
      "login": "WillAyd",
      "id": 609873,
      "node_id": "MDQ6VXNlcjYwOTg3Mw==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/609873?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/WillAyd",
      "html_url": "https://github.com/WillAyd",
      "followers_url": "https://api.github.com/users/WillAyd/followers",
      "following_url": "https://api.github.com/users/WillAyd/following{/other_user}",
      "gists_url": "https://api.github.com/users/WillAyd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/WillAyd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/WillAyd/subscriptions",
      "organizations_url": "https://api.github.com/users/WillAyd/orgs",
      "repos_url": "https://api.github.com/users/WillAyd/repos",
      "events_url": "https://api.github.com/users/WillAyd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/WillAyd/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-13T16:59:19Z",
    "updated_at": "2019-03-13T16:59:19Z",
    "author_association": "MEMBER",
    "body": "Hmm OK thanks for sharing that. I see this was actually implemented in #14432\r\n\r\nLooking at the test coverage there I don't see anything that has multiple index levels without a column selection, so that may be the culprit here. Investigation and PRs would be welcome"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/473381914",
    "html_url": "https://github.com/pandas-dev/pandas/issues/25704#issuecomment-473381914",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/25704",
    "id": 473381914,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3MzM4MTkxNA==",
    "user": {
      "login": "ArtificialQualia",
      "id": 25773476,
      "node_id": "MDQ6VXNlcjI1NzczNDc2",
      "avatar_url": "https://avatars1.githubusercontent.com/u/25773476?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ArtificialQualia",
      "html_url": "https://github.com/ArtificialQualia",
      "followers_url": "https://api.github.com/users/ArtificialQualia/followers",
      "following_url": "https://api.github.com/users/ArtificialQualia/following{/other_user}",
      "gists_url": "https://api.github.com/users/ArtificialQualia/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ArtificialQualia/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ArtificialQualia/subscriptions",
      "organizations_url": "https://api.github.com/users/ArtificialQualia/orgs",
      "repos_url": "https://api.github.com/users/ArtificialQualia/repos",
      "events_url": "https://api.github.com/users/ArtificialQualia/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ArtificialQualia/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-15T17:46:34Z",
    "updated_at": "2019-03-15T17:46:34Z",
    "author_association": "CONTRIBUTOR",
    "body": "I can take this one, I see where the problem is.  It appears to be in `core/groupby/grouper.py:_get_grouper` where `all_in_columns_index` isn't properly checking for series like it does for DataFrame.  And since `len(keys) == len(group_axis)` in this specific case, it isn't grouping properly."
  }
]
