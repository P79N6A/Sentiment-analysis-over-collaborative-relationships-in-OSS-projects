[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/409451709",
    "html_url": "https://github.com/pandas-dev/pandas/issues/22150#issuecomment-409451709",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/22150",
    "id": 409451709,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwOTQ1MTcwOQ==",
    "user": {
      "login": "WillAyd",
      "id": 609873,
      "node_id": "MDQ6VXNlcjYwOTg3Mw==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/609873?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/WillAyd",
      "html_url": "https://github.com/WillAyd",
      "followers_url": "https://api.github.com/users/WillAyd/followers",
      "following_url": "https://api.github.com/users/WillAyd/following{/other_user}",
      "gists_url": "https://api.github.com/users/WillAyd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/WillAyd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/WillAyd/subscriptions",
      "organizations_url": "https://api.github.com/users/WillAyd/orgs",
      "repos_url": "https://api.github.com/users/WillAyd/repos",
      "events_url": "https://api.github.com/users/WillAyd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/WillAyd/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-01T05:12:59Z",
    "updated_at": "2018-08-01T05:12:59Z",
    "author_association": "MEMBER",
    "body": "Can you provide a more minimal example to reproduce the issue?"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/410211224",
    "html_url": "https://github.com/pandas-dev/pandas/issues/22150#issuecomment-410211224",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/22150",
    "id": 410211224,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMDIxMTIyNA==",
    "user": {
      "login": "dycw",
      "id": 10572122,
      "node_id": "MDQ6VXNlcjEwNTcyMTIy",
      "avatar_url": "https://avatars0.githubusercontent.com/u/10572122?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dycw",
      "html_url": "https://github.com/dycw",
      "followers_url": "https://api.github.com/users/dycw/followers",
      "following_url": "https://api.github.com/users/dycw/following{/other_user}",
      "gists_url": "https://api.github.com/users/dycw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dycw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dycw/subscriptions",
      "organizations_url": "https://api.github.com/users/dycw/orgs",
      "repos_url": "https://api.github.com/users/dycw/repos",
      "events_url": "https://api.github.com/users/dycw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dycw/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-03T10:18:26Z",
    "updated_at": "2018-08-03T10:28:28Z",
    "author_association": "NONE",
    "body": "Yes. I have reduced the conditions to the following:\r\n\r\n1. The `DatetimeIndex` is of length >= 3.\r\n2. The `DatetimeIndex` has an inferrable frequency.\r\n3. The `DataFrame` has >= 2 columns.\r\n\r\n```\r\nfrom hypothesis import given\r\nfrom hypothesis.strategies import composite, dates, integers, sampled_from\r\nfrom pandas import DataFrame, DatetimeIndex, Timestamp, date_range\r\n\r\n\r\n@composite\r\ndef indices(draw, max_length=5):\r\n    date = draw(\r\n        dates(\r\n            min_value=Timestamp.min.ceil(\"D\").to_pydatetime().date(),\r\n            max_value=Timestamp.max.floor(\"D\").to_pydatetime().date(),\r\n        ).map(Timestamp)\r\n    )\r\n    periods = draw(integers(0, max_length))\r\n    freq = draw(sampled_from(list(\"BDHTS\")))\r\n    dr = date_range(date, periods=periods, freq=freq)\r\n    return DatetimeIndex(list(dr))\r\n\r\n\r\n@given(index=indices(5), num_columns=integers(0, 5))\r\ndef test_main(index, num_columns):\r\n    original = index.copy()\r\n    df = DataFrame(True, index=index, columns=range(num_columns))\r\n    df.apply(lambda x: x)\r\n    assert index.freq == original.freq\r\n```\r\n\r\nOne example is\r\n\r\n```\r\nindex = DatetimeIndex(['2000-01-03', '2000-01-04', '2000-01-05'], dtype='datetime64[ns]', freq='D'), num_columns = 2\r\n\r\n    @given(index=indices(5), num_columns=integers(0, 5))\r\n    def test_main(index, num_columns):\r\n        original = index.copy()\r\n        df = DataFrame(True, index=index, columns=range(num_columns))\r\n        df.apply(lambda x: x)\r\n>       assert index.freq == original.freq\r\nE       AssertionError: assert <Day> == None\r\nE        +  where <Day> = DatetimeIndex(['2000-01-03', '2000-01-04', '2000-01-05'], dtype='datetime64[ns]', freq='D').freq\r\nE        +  and   None = DatetimeIndex(['2000-01-03', '2000-01-04', '2000-01-05'], dtype='datetime64[ns]', freq=None).freq\r\n```\r\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/410319629",
    "html_url": "https://github.com/pandas-dev/pandas/issues/22150#issuecomment-410319629",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/22150",
    "id": 410319629,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMDMxOTYyOQ==",
    "user": {
      "login": "mroeschke",
      "id": 10647082,
      "node_id": "MDQ6VXNlcjEwNjQ3MDgy",
      "avatar_url": "https://avatars0.githubusercontent.com/u/10647082?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mroeschke",
      "html_url": "https://github.com/mroeschke",
      "followers_url": "https://api.github.com/users/mroeschke/followers",
      "following_url": "https://api.github.com/users/mroeschke/following{/other_user}",
      "gists_url": "https://api.github.com/users/mroeschke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mroeschke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mroeschke/subscriptions",
      "organizations_url": "https://api.github.com/users/mroeschke/orgs",
      "repos_url": "https://api.github.com/users/mroeschke/repos",
      "events_url": "https://api.github.com/users/mroeschke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mroeschke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-03T17:17:27Z",
    "updated_at": "2018-08-03T17:37:59Z",
    "author_association": "MEMBER",
    "body": "Thanks @dycw. I can reproduce with a similar example:\r\n\r\n```\r\nIn [1]: index = pd.DatetimeIndex([\"1950-06-30\", \"1952-10-24\", \"1953-05-29\"])\r\n\r\nIn [2]: df = pd.DataFrame(1, index=index, columns=range(2))\r\n\r\nIn [3]: index\r\nOut[3]: DatetimeIndex(['1950-06-30', '1952-10-24', '1953-05-29'], dtype='datetime64[ns]', freq=None)\r\n\r\nIn [4]: df.apply(lambda x: x)\r\nOut[4]:\r\n            0  1\r\n1950-06-30  1  1\r\n1952-10-24  1  1\r\n1953-05-29  1  1\r\n\r\n# Gains a frequency\r\nIn [5]: index\r\nOut[5]: DatetimeIndex(['1950-06-30', '1952-10-24', '1953-05-29'], dtype='datetime64[ns]', freq='WOM-4FRI')\r\n\r\nIn [6]: pd.__version__\r\nOut[6]: '0.23.3'\r\n```\r\n\r\n#14927 _may_ be playing a role here somewhere. Investigation and PR' are always welcome!"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/412145273",
    "html_url": "https://github.com/pandas-dev/pandas/issues/22150#issuecomment-412145273",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/22150",
    "id": 412145273,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMjE0NTI3Mw==",
    "user": {
      "login": "HannahFerch",
      "id": 32065449,
      "node_id": "MDQ6VXNlcjMyMDY1NDQ5",
      "avatar_url": "https://avatars3.githubusercontent.com/u/32065449?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/HannahFerch",
      "html_url": "https://github.com/HannahFerch",
      "followers_url": "https://api.github.com/users/HannahFerch/followers",
      "following_url": "https://api.github.com/users/HannahFerch/following{/other_user}",
      "gists_url": "https://api.github.com/users/HannahFerch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/HannahFerch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/HannahFerch/subscriptions",
      "organizations_url": "https://api.github.com/users/HannahFerch/orgs",
      "repos_url": "https://api.github.com/users/HannahFerch/repos",
      "events_url": "https://api.github.com/users/HannahFerch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/HannahFerch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-10T17:06:17Z",
    "updated_at": "2018-08-10T17:06:17Z",
    "author_association": "CONTRIBUTOR",
    "body": "I would like to look into this, however, am quite new to open source - can I ask questions here if I get stuck or rather in another place, e.g. Gitter?"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/412146159",
    "html_url": "https://github.com/pandas-dev/pandas/issues/22150#issuecomment-412146159",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/22150",
    "id": 412146159,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMjE0NjE1OQ==",
    "user": {
      "login": "WillAyd",
      "id": 609873,
      "node_id": "MDQ6VXNlcjYwOTg3Mw==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/609873?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/WillAyd",
      "html_url": "https://github.com/WillAyd",
      "followers_url": "https://api.github.com/users/WillAyd/followers",
      "following_url": "https://api.github.com/users/WillAyd/following{/other_user}",
      "gists_url": "https://api.github.com/users/WillAyd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/WillAyd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/WillAyd/subscriptions",
      "organizations_url": "https://api.github.com/users/WillAyd/orgs",
      "repos_url": "https://api.github.com/users/WillAyd/repos",
      "events_url": "https://api.github.com/users/WillAyd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/WillAyd/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-10T17:09:52Z",
    "updated_at": "2018-08-10T17:09:52Z",
    "author_association": "MEMBER",
    "body": "@HannahFerch high level can ask questions here or on Gitter. For detailed code review it is easiest if you just push a PR and get feedback directly on that"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/412154312",
    "html_url": "https://github.com/pandas-dev/pandas/issues/22150#issuecomment-412154312",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/22150",
    "id": 412154312,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMjE1NDMxMg==",
    "user": {
      "login": "HannahFerch",
      "id": 32065449,
      "node_id": "MDQ6VXNlcjMyMDY1NDQ5",
      "avatar_url": "https://avatars3.githubusercontent.com/u/32065449?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/HannahFerch",
      "html_url": "https://github.com/HannahFerch",
      "followers_url": "https://api.github.com/users/HannahFerch/followers",
      "following_url": "https://api.github.com/users/HannahFerch/following{/other_user}",
      "gists_url": "https://api.github.com/users/HannahFerch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/HannahFerch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/HannahFerch/subscriptions",
      "organizations_url": "https://api.github.com/users/HannahFerch/orgs",
      "repos_url": "https://api.github.com/users/HannahFerch/repos",
      "events_url": "https://api.github.com/users/HannahFerch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/HannahFerch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-10T17:40:23Z",
    "updated_at": "2018-08-10T17:40:23Z",
    "author_association": "CONTRIBUTOR",
    "body": "@WillAyd Makes sense. Thanks!"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/415742349",
    "html_url": "https://github.com/pandas-dev/pandas/issues/22150#issuecomment-415742349",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/22150",
    "id": 415742349,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxNTc0MjM0OQ==",
    "user": {
      "login": "HannahFerch",
      "id": 32065449,
      "node_id": "MDQ6VXNlcjMyMDY1NDQ5",
      "avatar_url": "https://avatars3.githubusercontent.com/u/32065449?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/HannahFerch",
      "html_url": "https://github.com/HannahFerch",
      "followers_url": "https://api.github.com/users/HannahFerch/followers",
      "following_url": "https://api.github.com/users/HannahFerch/following{/other_user}",
      "gists_url": "https://api.github.com/users/HannahFerch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/HannahFerch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/HannahFerch/subscriptions",
      "organizations_url": "https://api.github.com/users/HannahFerch/orgs",
      "repos_url": "https://api.github.com/users/HannahFerch/repos",
      "events_url": "https://api.github.com/users/HannahFerch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/HannahFerch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-24T12:19:27Z",
    "updated_at": "2018-08-24T12:19:27Z",
    "author_association": "CONTRIBUTOR",
    "body": "I have been looking at the example of @mroeschke. The setting of the frequency takes place in pandas.core.apply.FrameRowApply when wrapping the results with wrap_results_for_axis(). This calls self.obj._constructor, which returns a results object with freq='WOM-4FRI' instead of the original freq='None' that went inside.\r\nShould the setting of the frequency be prevented at this point or better be set back to the original 'None' later on before returning the df?"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/415845711",
    "html_url": "https://github.com/pandas-dev/pandas/issues/22150#issuecomment-415845711",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/22150",
    "id": 415845711,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxNTg0NTcxMQ==",
    "user": {
      "login": "mroeschke",
      "id": 10647082,
      "node_id": "MDQ6VXNlcjEwNjQ3MDgy",
      "avatar_url": "https://avatars0.githubusercontent.com/u/10647082?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mroeschke",
      "html_url": "https://github.com/mroeschke",
      "followers_url": "https://api.github.com/users/mroeschke/followers",
      "following_url": "https://api.github.com/users/mroeschke/following{/other_user}",
      "gists_url": "https://api.github.com/users/mroeschke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mroeschke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mroeschke/subscriptions",
      "organizations_url": "https://api.github.com/users/mroeschke/orgs",
      "repos_url": "https://api.github.com/users/mroeschke/repos",
      "events_url": "https://api.github.com/users/mroeschke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mroeschke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-24T18:35:45Z",
    "updated_at": "2018-08-24T18:36:13Z",
    "author_association": "MEMBER",
    "body": "It would be more ideal to prevent `self.obj._constructor` from setting a new freq."
  }
]
