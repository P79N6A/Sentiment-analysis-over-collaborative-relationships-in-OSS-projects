[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/471480306",
    "html_url": "https://github.com/pandas-dev/pandas/pull/25651#issuecomment-471480306",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/25651",
    "id": 471480306,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3MTQ4MDMwNg==",
    "user": {
      "login": "codecov[bot]",
      "id": 22429695,
      "node_id": "MDM6Qm90MjI0Mjk2OTU=",
      "avatar_url": "https://avatars2.githubusercontent.com/in/254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/codecov%5Bbot%5D",
      "html_url": "https://github.com/apps/codecov",
      "followers_url": "https://api.github.com/users/codecov%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/codecov%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/codecov%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/codecov%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/codecov%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/codecov%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/codecov%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/codecov%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/codecov%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2019-03-11T10:13:56Z",
    "updated_at": "2019-03-11T10:13:56Z",
    "author_association": "NONE",
    "body": "# [Codecov](https://codecov.io/gh/pandas-dev/pandas/pull/25651?src=pr&el=h1) Report\n> Merging [#25651](https://codecov.io/gh/pandas-dev/pandas/pull/25651?src=pr&el=desc) into [master](https://codecov.io/gh/pandas-dev/pandas/commit/f88613929d6c83952cb5a6bf70678a78be480baa?src=pr&el=desc) will **decrease** coverage by `<.01%`.\n> The diff coverage is `100%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/pandas-dev/pandas/pull/25651/graphs/tree.svg?width=650&token=eZ4WkYLtcO&height=150&src=pr)](https://codecov.io/gh/pandas-dev/pandas/pull/25651?src=pr&el=tree)\n\n```diff\n@@            Coverage Diff             @@\n##           master   #25651      +/-   ##\n==========================================\n- Coverage   91.26%   91.26%   -0.01%     \n==========================================\n  Files         173      173              \n  Lines       52968    52965       -3     \n==========================================\n- Hits        48340    48337       -3     \n  Misses       4628     4628\n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| #multiple | `89.83% <100%> (-0.01%)` | :arrow_down: |\n| #single | `41.7% <100%> (-0.01%)` | :arrow_down: |\n\n| [Impacted Files](https://codecov.io/gh/pandas-dev/pandas/pull/25651?src=pr&el=tree) | Coverage Δ | |\n|---|---|---|\n| [pandas/core/arrays/timedeltas.py](https://codecov.io/gh/pandas-dev/pandas/pull/25651/diff?src=pr&el=tree#diff-cGFuZGFzL2NvcmUvYXJyYXlzL3RpbWVkZWx0YXMucHk=) | `88.13% <100%> (-0.07%)` | :arrow_down: |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/pandas-dev/pandas/pull/25651?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/pandas-dev/pandas/pull/25651?src=pr&el=footer). Last update [f886139...4e36a9b](https://codecov.io/gh/pandas-dev/pandas/pull/25651?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/471480308",
    "html_url": "https://github.com/pandas-dev/pandas/pull/25651#issuecomment-471480308",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/25651",
    "id": 471480308,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3MTQ4MDMwOA==",
    "user": {
      "login": "codecov[bot]",
      "id": 22429695,
      "node_id": "MDM6Qm90MjI0Mjk2OTU=",
      "avatar_url": "https://avatars2.githubusercontent.com/in/254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/codecov%5Bbot%5D",
      "html_url": "https://github.com/apps/codecov",
      "followers_url": "https://api.github.com/users/codecov%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/codecov%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/codecov%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/codecov%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/codecov%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/codecov%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/codecov%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/codecov%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/codecov%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2019-03-11T10:13:56Z",
    "updated_at": "2019-03-11T23:38:21Z",
    "author_association": "NONE",
    "body": "# [Codecov](https://codecov.io/gh/pandas-dev/pandas/pull/25651?src=pr&el=h1) Report\n> Merging [#25651](https://codecov.io/gh/pandas-dev/pandas/pull/25651?src=pr&el=desc) into [master](https://codecov.io/gh/pandas-dev/pandas/commit/21769e9622630ab12bdcb480da0779eea644b04a?src=pr&el=desc) will **increase** coverage by `<.01%`.\n> The diff coverage is `100%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/pandas-dev/pandas/pull/25651/graphs/tree.svg?width=650&token=eZ4WkYLtcO&height=150&src=pr)](https://codecov.io/gh/pandas-dev/pandas/pull/25651?src=pr&el=tree)\n\n```diff\n@@            Coverage Diff             @@\n##           master   #25651      +/-   ##\n==========================================\n+ Coverage   91.29%   91.29%   +<.01%     \n==========================================\n  Files         173      173              \n  Lines       52961    52965       +4     \n==========================================\n+ Hits        48349    48354       +5     \n+ Misses       4612     4611       -1\n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| #multiple | `89.87% <100%> (ø)` | :arrow_up: |\n| #single | `41.73% <83.33%> (-0.01%)` | :arrow_down: |\n\n| [Impacted Files](https://codecov.io/gh/pandas-dev/pandas/pull/25651?src=pr&el=tree) | Coverage Δ | |\n|---|---|---|\n| [pandas/core/arrays/timedeltas.py](https://codecov.io/gh/pandas-dev/pandas/pull/25651/diff?src=pr&el=tree#diff-cGFuZGFzL2NvcmUvYXJyYXlzL3RpbWVkZWx0YXMucHk=) | `88.29% <100%> (+0.09%)` | :arrow_up: |\n| [pandas/util/testing.py](https://codecov.io/gh/pandas-dev/pandas/pull/25651/diff?src=pr&el=tree#diff-cGFuZGFzL3V0aWwvdGVzdGluZy5weQ==) | `89.08% <0%> (+0.09%)` | :arrow_up: |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/pandas-dev/pandas/pull/25651?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/pandas-dev/pandas/pull/25651?src=pr&el=footer). Last update [21769e9...053df8d](https://codecov.io/gh/pandas-dev/pandas/pull/25651?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/471498980",
    "html_url": "https://github.com/pandas-dev/pandas/pull/25651#issuecomment-471498980",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/25651",
    "id": 471498980,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3MTQ5ODk4MA==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-11T11:15:05Z",
    "updated_at": "2019-03-11T11:15:05Z",
    "author_association": "MEMBER",
    "body": "So this has a performance impact for sure, and a quite big one apparently (around 300-400 x).\r\n\r\n> so you are causing a rather large perf regression by changing this\r\n\r\nCompared to 0.23.x and before, there is no performance regression. But let me look if the logic is easy to port to float branch of `sequence_to_td64ns`. \r\n(and I doubt this change was originally done with performance in mind, in any case that is not mentioned in the PR https://github.com/pandas-dev/pandas/pull/23539)\r\n\r\n> pls shown asv before / after\r\n\r\nWe don't have any benchmarks passing floating data to `to_timedelta` / `TimedeltaIndex`"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/471527718",
    "html_url": "https://github.com/pandas-dev/pandas/pull/25651#issuecomment-471527718",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/25651",
    "id": 471527718,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3MTUyNzcxOA==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-11T12:57:05Z",
    "updated_at": "2019-03-11T12:57:05Z",
    "author_association": "MEMBER",
    "body": "@jreback in the last commit (https://github.com/pandas-dev/pandas/pull/25651/commits/39b15aad475b016576a655dedbb445c3690ea23c), you can see what it would look like when using the same float-handling logic from timedeltas.pyx in `sequence_to_td64ns`. \r\n\r\nThis makes that the conversion is much faster compared to the old (pre 0.24.0) path, but should have the same result:\r\n\r\n```\r\nIn [1]: arr = np.arange(0, 1, 1e-6)\r\n\r\nIn [9]: %timeit pd.core.arrays.timedeltas.sequence_to_td64ns(arr, unit='s')[0] \r\n21.8 ms ± 200 µs per loop (mean ± std. dev. of 7 runs, 10 loops each)\r\n\r\nIn [10]: %timeit pd.core.arrays.timedeltas.objects_to_td64ns(arr, unit='s')  <-- basically what was being used < 0.24\r\n2.84 s ± 35.3 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)\r\n```\r\n\r\nOn master, the `sequence_to_td64ns` takes only around 8 ms, so this PR would still be a 2-3 times slowdown compared to master, but still give around 100 x speedup compared to < 0.24.0.\r\n\r\nThe only thing I didn't do yet is a proper way for writing `precision_from_unit`. Currently, it is basically a copy paste from the cdef inline function `cast_from_unit` below it. But this is not usable from python, and making it non-inline might have performance implications."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/471640584",
    "html_url": "https://github.com/pandas-dev/pandas/pull/25651#issuecomment-471640584",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/25651",
    "id": 471640584,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3MTY0MDU4NA==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-11T17:29:28Z",
    "updated_at": "2019-03-11T17:29:28Z",
    "author_association": "MEMBER",
    "body": "cc @jbrockmendel "
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/471780067",
    "html_url": "https://github.com/pandas-dev/pandas/pull/25651#issuecomment-471780067",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/25651",
    "id": 471780067,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3MTc4MDA2Nw==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-11T23:22:39Z",
    "updated_at": "2019-03-11T23:22:39Z",
    "author_association": "MEMBER",
    "body": ">  can u just run some quick timings to see if anything else is affected by this - it’s a heavily used routine\r\n\r\nI did some quick timings of `pd._libs.tslibs.timedeltas.array_to_timedelta64(arr, unit='s')` (with an all float array, the extreme case, which in practice will not go through this path any more) and of `pd.Timedelta(\"4 days 3 hours 2 minutes 1 second\")`, and for those, I don't see a significant difference."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/471780865",
    "html_url": "https://github.com/pandas-dev/pandas/pull/25651#issuecomment-471780865",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/25651",
    "id": 471780865,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3MTc4MDg2NQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-11T23:25:42Z",
    "updated_at": "2019-03-11T23:25:42Z",
    "author_association": "CONTRIBUTOR",
    "body": "ok then - lgtm thanks "
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/471988734",
    "html_url": "https://github.com/pandas-dev/pandas/pull/25651#issuecomment-471988734",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/25651",
    "id": 471988734,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3MTk4ODczNA==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-12T12:56:18Z",
    "updated_at": "2019-03-12T12:56:18Z",
    "author_association": "MEMBER",
    "body": "I also just ran the timedelta benchmarks for this branch compared to master, and it says nothing changed significantly (although I don't know if we are benchmarking a critical path that relies heavily on the changed function)"
  }
]
