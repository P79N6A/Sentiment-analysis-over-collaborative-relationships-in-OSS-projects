[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/395916164",
    "html_url": "https://github.com/pandas-dev/pandas/issues/21391#issuecomment-395916164",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/21391",
    "id": 395916164,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NTkxNjE2NA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-08T23:09:34Z",
    "updated_at": "2018-06-08T23:09:34Z",
    "author_association": "CONTRIBUTOR",
    "body": "you would have to provide a trivial example which reproduces\r\n\r\nyou should simply override set/get state if you are doing something complicated "
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/398075839",
    "html_url": "https://github.com/pandas-dev/pandas/issues/21391#issuecomment-398075839",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/21391",
    "id": 398075839,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5ODA3NTgzOQ==",
    "user": {
      "login": "hlums",
      "id": 16907204,
      "node_id": "MDQ6VXNlcjE2OTA3MjA0",
      "avatar_url": "https://avatars2.githubusercontent.com/u/16907204?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hlums",
      "html_url": "https://github.com/hlums",
      "followers_url": "https://api.github.com/users/hlums/followers",
      "following_url": "https://api.github.com/users/hlums/following{/other_user}",
      "gists_url": "https://api.github.com/users/hlums/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hlums/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hlums/subscriptions",
      "organizations_url": "https://api.github.com/users/hlums/orgs",
      "repos_url": "https://api.github.com/users/hlums/repos",
      "events_url": "https://api.github.com/users/hlums/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hlums/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-18T14:35:28Z",
    "updated_at": "2018-06-18T14:36:51Z",
    "author_association": "NONE",
    "body": "@jreback The code sample has been added. Sorry for the late reply. Our data structure is quite complicated, so it took some time to figure out the minimum amount of code  to reproduce the error. \r\nI prefer using pandas original \\_\\_setstate\\_\\_ and \\_\\_getstate\\_\\_  in case of future updates on pandas side. I think if the two bugs I mentioned are fixed, it will be sufficient for our need. \r\nThe reason I believe the error \"AttributeError: 'TSDF' object has no attribute '_data'\" is caused by a bug, is because in \\_\\_setstate\\_\\_, the comment says the internal names needs to be set in order in case of dependencies among them, but the code used a set operation to merge _internal_names and _meta_data, which obviously changes the order of the internal names.\r\nFor _item_cache, unless there is a reason to exclude it in \\_\\_getsate\\_\\_, I don't see any harm to include it in the returned dict. "
  }
]
