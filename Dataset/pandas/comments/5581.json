[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/29166568",
    "html_url": "https://github.com/pandas-dev/pandas/pull/5581#issuecomment-29166568",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/5581",
    "id": 29166568,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5MTY2NTY4",
    "user": {
      "login": "jtratner",
      "id": 1598379,
      "node_id": "MDQ6VXNlcjE1OTgzNzk=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1598379?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtratner",
      "html_url": "https://github.com/jtratner",
      "followers_url": "https://api.github.com/users/jtratner/followers",
      "following_url": "https://api.github.com/users/jtratner/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtratner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtratner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtratner/subscriptions",
      "organizations_url": "https://api.github.com/users/jtratner/orgs",
      "repos_url": "https://api.github.com/users/jtratner/repos",
      "events_url": "https://api.github.com/users/jtratner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtratner/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-11-24T21:26:09Z",
    "updated_at": "2013-11-24T21:26:09Z",
    "author_association": "CONTRIBUTOR",
    "body": "@TomAugspurger - please tell me whether this works for you and if it does I'll merge it.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/29167225",
    "html_url": "https://github.com/pandas-dev/pandas/pull/5581#issuecomment-29167225",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/5581",
    "id": 29167225,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5MTY3MjI1",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-11-24T21:49:31Z",
    "updated_at": "2013-11-24T21:49:31Z",
    "author_association": "CONTRIBUTOR",
    "body": "I'm not sure it got the entire stack. You can try it, I'm looking at the `test_index.py` file. Now it points to `pandas/core/indexing.py:343`, which I don't think is quite it.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/29167264",
    "html_url": "https://github.com/pandas-dev/pandas/pull/5581#issuecomment-29167264",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/5581",
    "id": 29167264,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5MTY3MjY0",
    "user": {
      "login": "jtratner",
      "id": 1598379,
      "node_id": "MDQ6VXNlcjE1OTgzNzk=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1598379?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtratner",
      "html_url": "https://github.com/jtratner",
      "followers_url": "https://api.github.com/users/jtratner/followers",
      "following_url": "https://api.github.com/users/jtratner/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtratner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtratner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtratner/subscriptions",
      "organizations_url": "https://api.github.com/users/jtratner/orgs",
      "repos_url": "https://api.github.com/users/jtratner/repos",
      "events_url": "https://api.github.com/users/jtratner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtratner/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-11-24T21:51:36Z",
    "updated_at": "2013-11-24T21:51:36Z",
    "author_association": "CONTRIBUTOR",
    "body": "Can you post the point you're looking at? It may be that different functions need to set different stack levels.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/29167298",
    "html_url": "https://github.com/pandas-dev/pandas/pull/5581#issuecomment-29167298",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/5581",
    "id": 29167298,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5MTY3Mjk4",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-11-24T21:53:08Z",
    "updated_at": "2013-11-24T21:53:08Z",
    "author_association": "CONTRIBUTOR",
    "body": "@jtratner you prob need to specify the stacklevel in core/indexing.py where the copy check routine is actually called\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/29167358",
    "html_url": "https://github.com/pandas-dev/pandas/pull/5581#issuecomment-29167358",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/5581",
    "id": 29167358,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5MTY3MzU4",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-11-24T21:55:27Z",
    "updated_at": "2013-11-24T21:55:57Z",
    "author_association": "CONTRIBUTOR",
    "body": "I'm just running \n\n```\n(pandas-dev) ~/E/p/l/p/s/p/p/tests (jtratner-fix-stacklevel-for-basic-setting=) nosetests test_index.py\n................................................................................................................................................................./Users/tom/Envs/pandas-dev/lib/python2.7/site-packages/pandas/pandas/core/indexing.py:343: SettingWithCopyWarning: A value is trying to be set on a copy of a slice from a DataFrame.\nTry using .loc[row_index,col_indexer] = value instead\n  self.obj[item] = s\n.................\n----------------------------------------------------------------------\nRan 178 tests in 0.927s\n\nOK\n```\n\nLooks like 8 was the correct `stack level` for this one. Hardcoding that pointed to `test_index.py:1385`, this function:\n\n``` python\n    def test_set_value_keeps_names(self):\n        # motivating example from #3742\n        lev1 = ['hans', 'hans', 'hans', 'grethe', 'grethe', 'grethe']\n        lev2 = ['1', '2', '3'] * 2\n        idx = pd.MultiIndex.from_arrays(\n            [lev1, lev2],\n            names=['Name', 'Number'])\n        df = pd.DataFrame(\n            np.random.randn(6, 4),\n            columns=['one', 'two', 'three', 'four'],\n            index=idx)\n        df = df.sortlevel()\n        self.assertEqual(df.index.names, ('Name', 'Number'))\n        df = df.set_value(('grethe', '4'), 'one', 99.34)\n        self.assertEqual(df.index.names, ('Name', 'Number'))\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/29167423",
    "html_url": "https://github.com/pandas-dev/pandas/pull/5581#issuecomment-29167423",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/5581",
    "id": 29167423,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5MTY3NDIz",
    "user": {
      "login": "jtratner",
      "id": 1598379,
      "node_id": "MDQ6VXNlcjE1OTgzNzk=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1598379?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtratner",
      "html_url": "https://github.com/jtratner",
      "followers_url": "https://api.github.com/users/jtratner/followers",
      "following_url": "https://api.github.com/users/jtratner/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtratner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtratner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtratner/subscriptions",
      "organizations_url": "https://api.github.com/users/jtratner/orgs",
      "repos_url": "https://api.github.com/users/jtratner/repos",
      "events_url": "https://api.github.com/users/jtratner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtratner/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-11-24T21:58:24Z",
    "updated_at": "2013-11-24T21:58:24Z",
    "author_association": "CONTRIBUTOR",
    "body": "I'm -1 on making that work, you'd have to have a separate function to set\nwith stacklevel, and it's not worth it when you can just change it to an\nerror instead:\n\n``` python\n            def setter(item, v):\n                s = self.obj[item]\n                pi = plane_indexer[0] if lplane_indexer == 1 else\nplane_indexer\n\n                # set the item, possibly having a dtype change\n                s = s.copy()\n                s._data = s._data.setitem(pi, v)\n                s._maybe_update_cacher(clear=True)\n                # would need to swap this out with a function to preserve\nstacklevel\n                self.obj[item] = s\n```\n\nAlso, the problem with this is that you'd end up trying to do heroic things\nto get it up to the code level, and that's not really pandas'\nresponsibility. The warning _should_ be produced at that last line, because\nthat's the behavior that's causing the error.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/29167486",
    "html_url": "https://github.com/pandas-dev/pandas/pull/5581#issuecomment-29167486",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/5581",
    "id": 29167486,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5MTY3NDg2",
    "user": {
      "login": "jtratner",
      "id": 1598379,
      "node_id": "MDQ6VXNlcjE1OTgzNzk=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1598379?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtratner",
      "html_url": "https://github.com/jtratner",
      "followers_url": "https://api.github.com/users/jtratner/followers",
      "following_url": "https://api.github.com/users/jtratner/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtratner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtratner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtratner/subscriptions",
      "organizations_url": "https://api.github.com/users/jtratner/orgs",
      "repos_url": "https://api.github.com/users/jtratner/repos",
      "events_url": "https://api.github.com/users/jtratner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtratner/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-11-24T22:00:29Z",
    "updated_at": "2013-11-24T22:00:29Z",
    "author_association": "CONTRIBUTOR",
    "body": "Isn't the actual issue that `df.set_value` is doing the setting incorrectly?\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/29167565",
    "html_url": "https://github.com/pandas-dev/pandas/pull/5581#issuecomment-29167565",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/5581",
    "id": 29167565,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5MTY3NTY1",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-11-24T22:03:30Z",
    "updated_at": "2013-11-24T22:03:30Z",
    "author_association": "CONTRIBUTOR",
    "body": "it's even more complicated than that\nit depends on the input how exactly this is called (eg a list or scalar)\n\nso I agree because the user can always make it raise and investigate \n\nit IS an error after all; I don't think there are very many false positives\n\n@TomAugspurger did you see where the error is coming from?\n\ncan u post to see the use case. is it a false positive? or actual error?\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/29167596",
    "html_url": "https://github.com/pandas-dev/pandas/pull/5581#issuecomment-29167596",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/5581",
    "id": 29167596,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5MTY3NTk2",
    "user": {
      "login": "jtratner",
      "id": 1598379,
      "node_id": "MDQ6VXNlcjE1OTgzNzk=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1598379?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtratner",
      "html_url": "https://github.com/jtratner",
      "followers_url": "https://api.github.com/users/jtratner/followers",
      "following_url": "https://api.github.com/users/jtratner/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtratner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtratner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtratner/subscriptions",
      "organizations_url": "https://api.github.com/users/jtratner/orgs",
      "repos_url": "https://api.github.com/users/jtratner/repos",
      "events_url": "https://api.github.com/users/jtratner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtratner/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-11-24T22:04:44Z",
    "updated_at": "2013-11-24T22:04:44Z",
    "author_association": "CONTRIBUTOR",
    "body": "And that warning at least shows you what is doing the setting, and for the majority of people who are doing something interactively, should be fine.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/29167752",
    "html_url": "https://github.com/pandas-dev/pandas/pull/5581#issuecomment-29167752",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/5581",
    "id": 29167752,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5MTY3NzUy",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-11-24T22:10:41Z",
    "updated_at": "2013-11-24T22:10:41Z",
    "author_association": "CONTRIBUTOR",
    "body": "This warning came from `test_index` line 1385I haven't looked closely at the code, but I think jtratner is correct that set_value is doing something funky. \n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/29167780",
    "html_url": "https://github.com/pandas-dev/pandas/pull/5581#issuecomment-29167780",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/5581",
    "id": 29167780,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5MTY3Nzgw",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-11-24T22:12:05Z",
    "updated_at": "2013-11-24T22:12:05Z",
    "author_association": "CONTRIBUTOR",
    "body": "Also, yes the place your PR points to should work well for most cases. This use was a bit odd since it was from a test. \n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/29168576",
    "html_url": "https://github.com/pandas-dev/pandas/pull/5581#issuecomment-29168576",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/5581",
    "id": 29168576,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5MTY4NTc2",
    "user": {
      "login": "jtratner",
      "id": 1598379,
      "node_id": "MDQ6VXNlcjE1OTgzNzk=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1598379?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtratner",
      "html_url": "https://github.com/jtratner",
      "followers_url": "https://api.github.com/users/jtratner/followers",
      "following_url": "https://api.github.com/users/jtratner/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtratner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtratner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtratner/subscriptions",
      "organizations_url": "https://api.github.com/users/jtratner/orgs",
      "repos_url": "https://api.github.com/users/jtratner/repos",
      "events_url": "https://api.github.com/users/jtratner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtratner/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-11-24T22:43:39Z",
    "updated_at": "2013-11-24T22:43:39Z",
    "author_association": "CONTRIBUTOR",
    "body": "@TomAugspurger good you noticed it though, because we should fix it so that `df.set_value()` it doesn't have that issue...\n"
  }
]
