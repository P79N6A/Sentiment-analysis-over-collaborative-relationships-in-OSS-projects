[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/69156107",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9212#issuecomment-69156107",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9212",
    "id": 69156107,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5MTU2MTA3",
    "user": {
      "login": "tlmaloney",
      "id": 1243750,
      "node_id": "MDQ6VXNlcjEyNDM3NTA=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/1243750?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tlmaloney",
      "html_url": "https://github.com/tlmaloney",
      "followers_url": "https://api.github.com/users/tlmaloney/followers",
      "following_url": "https://api.github.com/users/tlmaloney/following{/other_user}",
      "gists_url": "https://api.github.com/users/tlmaloney/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tlmaloney/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tlmaloney/subscriptions",
      "organizations_url": "https://api.github.com/users/tlmaloney/orgs",
      "repos_url": "https://api.github.com/users/tlmaloney/repos",
      "events_url": "https://api.github.com/users/tlmaloney/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tlmaloney/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-01-08T09:37:48Z",
    "updated_at": "2015-01-08T09:37:57Z",
    "author_association": "NONE",
    "body": "FWIW:\n\n```\n~\ntmaloney@aal-lpc-2-03$  locale\nLANG=en_US.UTF-8\nLANGUAGE=\nLC_CTYPE=\"en_US.UTF-8\"\nLC_NUMERIC=\"en_US.UTF-8\"\nLC_TIME=\"en_US.UTF-8\"\nLC_COLLATE=\"en_US.UTF-8\"\nLC_MONETARY=\"en_US.UTF-8\"\nLC_MESSAGES=\"en_US.UTF-8\"\nLC_PAPER=\"en_US.UTF-8\"\nLC_NAME=\"en_US.UTF-8\"\nLC_ADDRESS=\"en_US.UTF-8\"\nLC_TELEPHONE=\"en_US.UTF-8\"\nLC_MEASUREMENT=\"en_US.UTF-8\"\nLC_IDENTIFICATION=\"en_US.UTF-8\"\nLC_ALL=\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/69170694",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9212#issuecomment-69170694",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9212",
    "id": 69170694,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5MTcwNjk0",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-01-08T12:02:29Z",
    "updated_at": "2015-01-08T12:02:29Z",
    "author_association": "CONTRIBUTOR",
    "body": "under the hood this uses something like this: http://docs.scipy.org/doc/numpy/reference/generated/numpy.argsort.html\n\nthis is `kind=quicksort` by default, which does not preserve the original order for ties, while mergesort does. It is not possible to pass thru the option for kind in `sort_index`, you can specify it for `sort` though.\n\nSo i'll mark this an enhancement if you'd like to put forth a PR.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/69179385",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9212#issuecomment-69179385",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9212",
    "id": 69179385,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5MTc5Mzg1",
    "user": {
      "login": "tlmaloney",
      "id": 1243750,
      "node_id": "MDQ6VXNlcjEyNDM3NTA=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/1243750?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tlmaloney",
      "html_url": "https://github.com/tlmaloney",
      "followers_url": "https://api.github.com/users/tlmaloney/followers",
      "following_url": "https://api.github.com/users/tlmaloney/following{/other_user}",
      "gists_url": "https://api.github.com/users/tlmaloney/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tlmaloney/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tlmaloney/subscriptions",
      "organizations_url": "https://api.github.com/users/tlmaloney/orgs",
      "repos_url": "https://api.github.com/users/tlmaloney/repos",
      "events_url": "https://api.github.com/users/tlmaloney/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tlmaloney/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-01-08T13:36:22Z",
    "updated_at": "2015-01-08T13:36:22Z",
    "author_association": "NONE",
    "body": "I'll give a crack at it, thanks.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/69187382",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9212#issuecomment-69187382",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9212",
    "id": 69187382,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5MTg3Mzgy",
    "user": {
      "login": "tlmaloney",
      "id": 1243750,
      "node_id": "MDQ6VXNlcjEyNDM3NTA=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/1243750?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tlmaloney",
      "html_url": "https://github.com/tlmaloney",
      "followers_url": "https://api.github.com/users/tlmaloney/followers",
      "following_url": "https://api.github.com/users/tlmaloney/following{/other_user}",
      "gists_url": "https://api.github.com/users/tlmaloney/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tlmaloney/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tlmaloney/subscriptions",
      "organizations_url": "https://api.github.com/users/tlmaloney/orgs",
      "repos_url": "https://api.github.com/users/tlmaloney/repos",
      "events_url": "https://api.github.com/users/tlmaloney/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tlmaloney/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-01-08T14:40:31Z",
    "updated_at": "2015-01-08T14:40:31Z",
    "author_association": "NONE",
    "body": "I do see that `kind` is a variable that can be passed into `sort_index`, [see docs here](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.DataFrame.sort_index.html). Although it says that it does not apply to a MultiIndex.\n\nI'm not sure `kind` is the reason for the issue. I was able to get the behavior I want, although through a roundabout way, still using quicksort:\n\n```\nIn [1]: import pandas as pd\n\nIn [2]: tuples = [(' foo', 'bar'), ('foo', 'bar')]\n\nIn [3]: cols = pd.MultiIndex.from_tuples(tuples)\n\nIn [4]: df = pd.DataFrame(index=cols, data={'baz': [0, 1]})\n\nIn [5]: df.ix[(' foo ()', 'bar'), 'baz'] = 2\n\nIn [6]: df\nOut[6]: \n             baz\n foo    bar    0\nfoo     bar    1\n foo () bar    2\n\nIn [7]: df.reset_index()\nOut[7]: \n   level_0 level_1  baz\n0      foo     bar    0\n1      foo     bar    1\n2   foo ()     bar    2\n\nIn [8]: df.reset_index().sort(columns=['level_0', 'level_1'])\nOut[8]: \n   level_0 level_1  baz\n0      foo     bar    0\n2   foo ()     bar    2\n1      foo     bar    1\n\nIn [9]: df.reset_index().sort(columns=['level_0', 'level_1']).set_index(['level_0', 'level_1'])\nOut[9]: \n                 baz\nlevel_0 level_1     \n foo    bar        0\n foo () bar        2\nfoo     bar        1\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/69279616",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9212#issuecomment-69279616",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9212",
    "id": 69279616,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5Mjc5NjE2",
    "user": {
      "login": "tlmaloney",
      "id": 1243750,
      "node_id": "MDQ6VXNlcjEyNDM3NTA=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/1243750?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tlmaloney",
      "html_url": "https://github.com/tlmaloney",
      "followers_url": "https://api.github.com/users/tlmaloney/followers",
      "following_url": "https://api.github.com/users/tlmaloney/following{/other_user}",
      "gists_url": "https://api.github.com/users/tlmaloney/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tlmaloney/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tlmaloney/subscriptions",
      "organizations_url": "https://api.github.com/users/tlmaloney/orgs",
      "repos_url": "https://api.github.com/users/tlmaloney/repos",
      "events_url": "https://api.github.com/users/tlmaloney/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tlmaloney/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-01-09T01:17:07Z",
    "updated_at": "2015-01-09T01:17:07Z",
    "author_association": "NONE",
    "body": "This is also odd behavior. Adding a row doesn't simply append it to the bottom, it also switches the labels in the original two rows of the index.\n\n```\nIn [1]: import pandas as pd\n\nIn [2]: tuples = [('foo', 'bar'), (' foo', 'bar')]\n\nIn [3]: cols = pd.MultiIndex.from_tuples(tuples)\n\nIn [4]: df = pd.DataFrame(index=cols, data={'baz': [0, 1]})\n\nIn [5]: df\nOut[5]: \n          baz\nfoo  bar    0\n foo bar    1\n\nIn [6]: df.index\nOut[6]: \nMultiIndex(levels=[[u' foo', u'foo'], [u'bar']],\n           labels=[[1, 0], [0, 0]])\n\nIn [7]: df.ix[(' foo ()', 'bar'), 'baz'] = 2\n\nIn [8]: df\nOut[8]: \n             baz\n foo    bar    1\nfoo     bar    0\n foo () bar    2\n\nIn [9]: df.index\nOut[9]: \nMultiIndex(levels=[[u' foo', u'foo', u' foo ()'], [u'bar']],\n           labels=[[0, 1, 2], [0, 0, 0]])\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/69459970",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9212#issuecomment-69459970",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9212",
    "id": 69459970,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5NDU5OTcw",
    "user": {
      "login": "behzadnouri",
      "id": 1288998,
      "node_id": "MDQ6VXNlcjEyODg5OTg=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1288998?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/behzadnouri",
      "html_url": "https://github.com/behzadnouri",
      "followers_url": "https://api.github.com/users/behzadnouri/followers",
      "following_url": "https://api.github.com/users/behzadnouri/following{/other_user}",
      "gists_url": "https://api.github.com/users/behzadnouri/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/behzadnouri/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/behzadnouri/subscriptions",
      "organizations_url": "https://api.github.com/users/behzadnouri/orgs",
      "repos_url": "https://api.github.com/users/behzadnouri/repos",
      "events_url": "https://api.github.com/users/behzadnouri/events{/privacy}",
      "received_events_url": "https://api.github.com/users/behzadnouri/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-01-10T15:43:11Z",
    "updated_at": "2015-01-10T15:43:11Z",
    "author_association": "CONTRIBUTOR",
    "body": "This is a bug, and the problem is when the frame is modified, `df.index.lexsort_depth` becomes invalid, and that breaks `.sort_index`:\n\n```\n>>> pd.__version__\n'0.15.2-68-ge2b014c'\n>>> df = pd.DataFrame([['b', 'c', 1]],\n...                   columns=['1st', '2nd', '3rd']).set_index(['1st', '2nd'])\n>>> df\n         3rd\n1st 2nd     \nb   c      1\n>>> df.ix[('a', 'b'), '3rd'] = 0\n>>> df\n         3rd\n1st 2nd     \nb   c      1\na   b      0\n>>> df.index.lexsort_depth  #  <<< this is the BUG\n2\n>>> df.sort_index()\n         3rd\n1st 2nd     \nb   c      1\na   b      0\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/69461445",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9212#issuecomment-69461445",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9212",
    "id": 69461445,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5NDYxNDQ1",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-01-10T16:24:36Z",
    "updated_at": "2015-01-10T16:24:36Z",
    "author_association": "CONTRIBUTOR",
    "body": "hmm, looks like `sortorder` needs to be invalidated. (however, then we de-facto have a new index at that point, so may need to copy the index in this case).\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/69517876",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9212#issuecomment-69517876",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9212",
    "id": 69517876,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5NTE3ODc2",
    "user": {
      "login": "tlmaloney",
      "id": 1243750,
      "node_id": "MDQ6VXNlcjEyNDM3NTA=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/1243750?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tlmaloney",
      "html_url": "https://github.com/tlmaloney",
      "followers_url": "https://api.github.com/users/tlmaloney/followers",
      "following_url": "https://api.github.com/users/tlmaloney/following{/other_user}",
      "gists_url": "https://api.github.com/users/tlmaloney/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tlmaloney/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tlmaloney/subscriptions",
      "organizations_url": "https://api.github.com/users/tlmaloney/orgs",
      "repos_url": "https://api.github.com/users/tlmaloney/repos",
      "events_url": "https://api.github.com/users/tlmaloney/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tlmaloney/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-01-11T23:39:46Z",
    "updated_at": "2015-01-11T23:39:46Z",
    "author_association": "NONE",
    "body": "It looks like this has been an issue at least going back to v0.13.1:\n\n```\nIn [1]: import pandas as pd\n\nIn [2]: pd.__version__\nOut[2]: '0.13.1'\n\nIn [3]: df = pd.DataFrame([['b', 'c', 1]], columns=['1st', '2nd', '3rd']).set_index(['1st', '2nd'])\n\nIn [4]: df.ix[('a', 'b'), '3rd'] = 0\n\nIn [5]: df.index.is_lexsorted()\nOut[5]: True\n\nIn [6]: df\nOut[6]: \n         3rd\n1st 2nd     \nb   c      1\na   b      0\n```\n\nIn v0.12.0, setting values was not working with `.ix[...] =`, but using `set_value` to set the new row, `sort_index` does work as expected.\n\n```\nIn [1]: import pandas as pd\n\nIn [2]: pd.__version__\nOut[2]: '0.12.0'\n\nIn [3]: df = pd.DataFrame([['b', 'c', 1]], columns=['1st', '2nd', '3rd']).set_index(['1st', '2nd'])\n\nIn [4]: df.ix[('a', 'b'), '3rd'] = 0\n---------------------------------------------------------------------------\nKeyError                                  Traceback (most recent call last)\n<ipython-input-4-b91d80d789ee> in <module>()\n----> 1 df.ix[('a', 'b'), '3rd'] = 0\n\n/home/tmaloney/vedev/pandas-test-02/lib/python2.7/site-packages/pandas-0.12.0-py2.7-linux-x86_64.egg/pandas/core/indexing.pyc in __setitem__(self, key, value)\n     82                 raise IndexingError('only tuples of length <= %d supported',\n     83                                     self.ndim)\n---> 84             indexer = self._convert_tuple(key)\n     85         else:\n     86             indexer = self._convert_to_indexer(key)\n\n/home/tmaloney/vedev/pandas-test-02/lib/python2.7/site-packages/pandas-0.12.0-py2.7-linux-x86_64.egg/pandas/core/indexing.pyc in _convert_tuple(self, key)\n     94         keyidx = []\n     95         for i, k in enumerate(key):\n---> 96             idx = self._convert_to_indexer(k, axis=i)\n     97             keyidx.append(idx)\n     98         return tuple(keyidx)\n\n/home/tmaloney/vedev/pandas-test-02/lib/python2.7/site-packages/pandas-0.12.0-py2.7-linux-x86_64.egg/pandas/core/indexing.pyc in _convert_to_indexer(self, obj, axis)\n    608                 mask = check == -1\n    609                 if mask.any():\n--> 610                     raise KeyError('%s not in index' % objarr[mask])\n    611 \n    612                 return indexer\n\nKeyError: \"['a'] not in index\"\n\nIn [5]: df.set_value(('a', 'b'), '3rd', 0)\nOut[5]: \n     3rd\nb c    1\na b    0\n\nIn [6]: df = df.set_value(('a', 'b'), '3rd', 0)\n\nIn [7]: df\nOut[7]: \n     3rd\nb c    1\na b    0\n\nIn [8]: df.sort_index()\nOut[8]: \n     3rd\na b    0\nb c    1\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/69520924",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9212#issuecomment-69520924",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9212",
    "id": 69520924,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5NTIwOTI0",
    "user": {
      "login": "tlmaloney",
      "id": 1243750,
      "node_id": "MDQ6VXNlcjEyNDM3NTA=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/1243750?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tlmaloney",
      "html_url": "https://github.com/tlmaloney",
      "followers_url": "https://api.github.com/users/tlmaloney/followers",
      "following_url": "https://api.github.com/users/tlmaloney/following{/other_user}",
      "gists_url": "https://api.github.com/users/tlmaloney/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tlmaloney/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tlmaloney/subscriptions",
      "organizations_url": "https://api.github.com/users/tlmaloney/orgs",
      "repos_url": "https://api.github.com/users/tlmaloney/repos",
      "events_url": "https://api.github.com/users/tlmaloney/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tlmaloney/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-01-12T01:01:25Z",
    "updated_at": "2015-01-12T01:01:25Z",
    "author_association": "NONE",
    "body": "Looks like [GH4039](https://github.com/pydata/pandas/pull/4039) discussion is relevant. @jreback Should this issue be tagged as Bug instead of Enhancement?\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/69521080",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9212#issuecomment-69521080",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9212",
    "id": 69521080,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5NTIxMDgw",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-01-12T01:06:11Z",
    "updated_at": "2015-01-12T01:06:11Z",
    "author_association": "CONTRIBUTOR",
    "body": "The main issue I have with this is that you cannot simply resort the index after an append. It will be completely non-performant. So you can simply try to invalidate `sortorder` which will recompute the sort depth when it is called for.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/69521233",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9212#issuecomment-69521233",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9212",
    "id": 69521233,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5NTIxMjMz",
    "user": {
      "login": "tlmaloney",
      "id": 1243750,
      "node_id": "MDQ6VXNlcjEyNDM3NTA=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/1243750?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tlmaloney",
      "html_url": "https://github.com/tlmaloney",
      "followers_url": "https://api.github.com/users/tlmaloney/followers",
      "following_url": "https://api.github.com/users/tlmaloney/following{/other_user}",
      "gists_url": "https://api.github.com/users/tlmaloney/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tlmaloney/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tlmaloney/subscriptions",
      "organizations_url": "https://api.github.com/users/tlmaloney/orgs",
      "repos_url": "https://api.github.com/users/tlmaloney/repos",
      "events_url": "https://api.github.com/users/tlmaloney/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tlmaloney/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-01-12T01:10:25Z",
    "updated_at": "2015-01-12T01:10:25Z",
    "author_association": "NONE",
    "body": "Agreed. How do you invalidate the sortorder? I don't know what that means.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/69521558",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9212#issuecomment-69521558",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9212",
    "id": 69521558,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5NTIxNTU4",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-01-12T01:18:31Z",
    "updated_at": "2015-01-12T01:18:31Z",
    "author_association": "CONTRIBUTOR",
    "body": "sorry...misspoke, you need to invalid the cache on lexsort_depth\nyou can call `mi._reset_cache()` \n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/69522677",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9212#issuecomment-69522677",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9212",
    "id": 69522677,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5NTIyNjc3",
    "user": {
      "login": "tlmaloney",
      "id": 1243750,
      "node_id": "MDQ6VXNlcjEyNDM3NTA=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/1243750?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tlmaloney",
      "html_url": "https://github.com/tlmaloney",
      "followers_url": "https://api.github.com/users/tlmaloney/followers",
      "following_url": "https://api.github.com/users/tlmaloney/following{/other_user}",
      "gists_url": "https://api.github.com/users/tlmaloney/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tlmaloney/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tlmaloney/subscriptions",
      "organizations_url": "https://api.github.com/users/tlmaloney/orgs",
      "repos_url": "https://api.github.com/users/tlmaloney/repos",
      "events_url": "https://api.github.com/users/tlmaloney/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tlmaloney/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-01-12T01:47:44Z",
    "updated_at": "2015-01-12T01:47:44Z",
    "author_association": "NONE",
    "body": "I'm not sure that works.\n\n```\nIn [1]: import pandas as pd\n\nIn [2]: pd.__version__\nOut[2]: '0.15.2'\n\nIn [3]: df = pd.DataFrame([['b', 'c', 1]], columns=['1st', '2nd', '3rd']).set_index(['1st', '2nd'])\n\nIn [4]: df.ix[('a', 'b'), '3rd'] = 0\n\nIn [5]: df.index.is_lexsorted()\nOut[5]: True\n\nIn [6]: df.index._cache\nOut[6]: \n{'_engine': <pandas.index.ObjectEngine at 0x351c3f8>,\n 'is_unique': True,\n 'lexsort_depth': 2}\n\nIn [7]: df.index._res\ndf.index._reset_cache     df.index._reset_identity  \n\nIn [7]: df.index._reset_cache()\n\nIn [8]: df.index.is_lexsorted()\nOut[8]: True\n\nIn [9]: df\nOut[9]: \n         3rd\n1st 2nd     \nb   c      1\na   b      0\n\nIn [10]: df.index._cache\nOut[10]: {'lexsort_depth': 2}\n\nIn [11]: df.index._reset_cache()\n\nIn [12]: df.index._cache\nOut[12]: {}\n\nIn [13]: df\nOut[13]: \n         3rd\n1st 2nd     \nb   c      1\na   b      0\n\nIn [14]: df.sort_index()\nOut[14]: \n         3rd\n1st 2nd     \nb   c      1\na   b      0\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/70290719",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9212#issuecomment-70290719",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9212",
    "id": 70290719,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMjkwNzE5",
    "user": {
      "login": "behzadnouri",
      "id": 1288998,
      "node_id": "MDQ6VXNlcjEyODg5OTg=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1288998?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/behzadnouri",
      "html_url": "https://github.com/behzadnouri",
      "followers_url": "https://api.github.com/users/behzadnouri/followers",
      "following_url": "https://api.github.com/users/behzadnouri/following{/other_user}",
      "gists_url": "https://api.github.com/users/behzadnouri/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/behzadnouri/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/behzadnouri/subscriptions",
      "organizations_url": "https://api.github.com/users/behzadnouri/orgs",
      "repos_url": "https://api.github.com/users/behzadnouri/repos",
      "events_url": "https://api.github.com/users/behzadnouri/events{/privacy}",
      "received_events_url": "https://api.github.com/users/behzadnouri/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-01-16T17:37:53Z",
    "updated_at": "2015-01-16T17:37:53Z",
    "author_association": "CONTRIBUTOR",
    "body": "so this does not depend on cache, but also occurs on a freshly generated index:\n\n```\nIn [24]: mi = MultiIndex(levels=[['b', 'a'], ['b', 'a']],\n   ....:                 labels=[[0, 1], [0, 1]])\n\nIn [25]: df = DataFrame([[0], [1]], index=mi)\n\nIn [26]: df\nOut[26]:\n     0\nb b  0\na a  1\n\nIn [27]: df.sort_index()\nOut[27]:\n     0\nb b  0\na a  1\n```\n\n[`lexsort_depth`](https://github.com/pydata/pandas/blob/c1e52f15607296bba12601d6439c7de1752f02fb/pandas/core/index.py#L3442) is only based on _labels_ ( not levels ), so here the labels _are_ in fact lexically sorted:\n\n```\nIn [29]: df.index.labels\nOut[29]: FrozenList([[0, 1], [0, 1]])\n\nIn [30]: df.index.lexsort_depth\nOut[30]: 2\n```\n\n_it is worth inspecting that if anywhere else in the code base breaks if labels are lexically sorted, but not the levels._ (i.e. if they make the assumption that labels are always sorted)\n\n[`sort_index`](https://github.com/pydata/pandas/blob/c1e52f15607296bba12601d6439c7de1752f02fb/pandas/core/frame.py#L2884) also only looks at the labels; and since they are lexically sorted it stops there.\n\nif other places in the code also make the assumption that the labels are sorted then this should be fixed in `MultiIndex.__new__`; otherwise `sort_index` should also check levels in addition to labels.\n\ncomputationally, former path, is not very cheap, so it is worth confirming first that other places in the code depend on levels being sorted and break otherwise.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/70415302",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9212#issuecomment-70415302",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9212",
    "id": 70415302,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwNDE1MzAy",
    "user": {
      "login": "tlmaloney",
      "id": 1243750,
      "node_id": "MDQ6VXNlcjEyNDM3NTA=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/1243750?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tlmaloney",
      "html_url": "https://github.com/tlmaloney",
      "followers_url": "https://api.github.com/users/tlmaloney/followers",
      "following_url": "https://api.github.com/users/tlmaloney/following{/other_user}",
      "gists_url": "https://api.github.com/users/tlmaloney/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tlmaloney/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tlmaloney/subscriptions",
      "organizations_url": "https://api.github.com/users/tlmaloney/orgs",
      "repos_url": "https://api.github.com/users/tlmaloney/repos",
      "events_url": "https://api.github.com/users/tlmaloney/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tlmaloney/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-01-18T16:46:12Z",
    "updated_at": "2015-01-18T16:46:12Z",
    "author_association": "NONE",
    "body": "@behzadnouri Thanks for your looking more into this.\n\n@jreback\n\nI have a couple of comments. (FWIW, I've been using pandas since 0.9.1 but haven't had a need to dig in until now since it has really just worked. I hope to one day make a contribution myself. My mental model may be out of date with the fast pace of development.)\n1. This issue might have raised a couple of distinct issues, which may be worth breaking apart into separate issues.\n2. I'm trying to get the correct mental model of the MultiIndex. From here on out I'm thinking in terms of a MultiIndex in the `df.index` sense and not the `df.columns` sense. Essentially a MultiIndex is made up of labels (the rows, in my mind). A MultiIndex has a number of levels (the columns, in my mind). So when I see something like this I get confused:\n\n```\nIn [5]: mi = pd.MultiIndex(levels=[['a', 'b'], ['c', 'd'], ['e', 'f']], labels=[[0, 1], [0, 1], [0, 1]])\n\nIn [6]: mi\nOut[6]: \nMultiIndex(levels=[[u'a', u'b'], [u'c', u'd'], [u'e', u'f']],\n           labels=[[0, 1], [0, 1], [0, 1]])\n\nIn [7]: print mi\n\na  c  e\nb  d  f\n```\n\nBecause I think of `('a', 'c', 'e')` and `('b', 'd', 'f')` as the labels. I understand the above `__repr__` (line 6) is an internal representation. Am I wrong to think there's two labels, and not three? Perhaps this is a naming bug on `MultiIndex.labels`.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/70424074",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9212#issuecomment-70424074",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9212",
    "id": 70424074,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwNDI0MDc0",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-01-18T20:23:13Z",
    "updated_at": "2015-01-18T20:23:13Z",
    "author_association": "CONTRIBUTOR",
    "body": "@tlmaloney If you'd like to create a separate issue for a distince issue/bug, pls do so, keeping in mind that they should have reproducible examples. can always xref back to here if needed. Generally having 1 issue per 'thing' is a good idea.\n\nUsing another example with differnt label lenghts to clarify your mental model\n\n```\nIn [16]: mi = pd.MultiIndex(levels=[['a', 'b'], ['c', 'd'], ['e', 'f']], labels=[[0, 1], [0, 1], [0, 1]])\n\nIn [18]: mi.values\nOut[18]: array([('a', 'c', 'e'), ('b', 'd', 'f')], dtype=object)\n\nIn [20]: mi2 = pd.MultiIndex(levels=[['a', 'b'], ['c', 'd'], ['e', 'f']], labels=[[0, 1, 1], [0, 1, 1], [0, 0, 1]])\n\nIn [22]: mi2.values\nOut[22]: array([('a', 'c', 'e'), ('b', 'd', 'e'), ('b', 'd', 'f')], dtype=object)\n```\n\nSo you see that the labels define how long the combinations are, while the length of the labels/levels themselves are the number of levels in the MI. The labels are an indexer INTO the levels array. This is conceptually what a `Categorical` is (and is actually implemented like this, kind of an unrolled Categorical).\n\nNote that this has nothing to do with `df.index/df.columns`, they BOTH could be `MultiIndexes` or `Index`. The result of `mi2.values` are the column labels (or index labels), each TUPLE is a label (though its shown in a sparsified way and not a tuple).\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/70429808",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9212#issuecomment-70429808",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9212",
    "id": 70429808,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwNDI5ODA4",
    "user": {
      "login": "tlmaloney",
      "id": 1243750,
      "node_id": "MDQ6VXNlcjEyNDM3NTA=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/1243750?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tlmaloney",
      "html_url": "https://github.com/tlmaloney",
      "followers_url": "https://api.github.com/users/tlmaloney/followers",
      "following_url": "https://api.github.com/users/tlmaloney/following{/other_user}",
      "gists_url": "https://api.github.com/users/tlmaloney/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tlmaloney/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tlmaloney/subscriptions",
      "organizations_url": "https://api.github.com/users/tlmaloney/orgs",
      "repos_url": "https://api.github.com/users/tlmaloney/repos",
      "events_url": "https://api.github.com/users/tlmaloney/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tlmaloney/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-01-18T22:35:27Z",
    "updated_at": "2015-01-18T22:35:38Z",
    "author_association": "NONE",
    "body": "@jreback That's really interesting, I now understand what's going on a lot better, thanks. There is some cognitive dissonance in me with these two definitions:\n1. `Index.labels` as the indexer into the levels array\n2. [label as the key value in an Index](http://pandas.pydata.org/pandas-docs/version/0.15.2/indexing.html#selection-by-label)\n\nDo you also see how it could be a bit confusing? I think there is a naming bug, but since naming is hard and is unrelated to the original issue, if you agree I can create a separate issue and xref this one.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/70430076",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9212#issuecomment-70430076",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9212",
    "id": 70430076,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwNDMwMDc2",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-01-18T22:41:28Z",
    "updated_at": "2015-01-18T22:41:28Z",
    "author_association": "CONTRIBUTOR",
    "body": "`.labels` only exists on `MultiIndex`. I agree these are somewhat confusing, but these are internal references (e.g. `.levels/.labels`).\n\nWe _did_ change these for `Categorical`, e.g. `.categories` and `.codes` are the `.levels` and `.labels`. However for back-compat I don't think we are likely to change them for `MultiIndex`. (and even if we did, I think `.levels` is very natural, so I suppose `labels->codes` IS possible).\n\nThese are came original from R, fyi.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/70430203",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9212#issuecomment-70430203",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9212",
    "id": 70430203,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwNDMwMjAz",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-01-18T22:44:38Z",
    "updated_at": "2015-01-18T22:45:07Z",
    "author_association": "CONTRIBUTOR",
    "body": "you can see somewhat of a related discussion in #3268 \n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/70432188",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9212#issuecomment-70432188",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9212",
    "id": 70432188,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwNDMyMTg4",
    "user": {
      "login": "tlmaloney",
      "id": 1243750,
      "node_id": "MDQ6VXNlcjEyNDM3NTA=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/1243750?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tlmaloney",
      "html_url": "https://github.com/tlmaloney",
      "followers_url": "https://api.github.com/users/tlmaloney/followers",
      "following_url": "https://api.github.com/users/tlmaloney/following{/other_user}",
      "gists_url": "https://api.github.com/users/tlmaloney/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tlmaloney/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tlmaloney/subscriptions",
      "organizations_url": "https://api.github.com/users/tlmaloney/orgs",
      "repos_url": "https://api.github.com/users/tlmaloney/repos",
      "events_url": "https://api.github.com/users/tlmaloney/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tlmaloney/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-01-18T23:33:16Z",
    "updated_at": "2015-01-18T23:33:16Z",
    "author_association": "NONE",
    "body": "The last comment by @behzadnouri gets at the heart of the problem I think. I'm not sure why the sorting methods look at `.labels` instead of `.levels`.  Referencing `.labels` also seems to be an issue with `sortlevel`:\n\n```\nIn [1]: import pandas as pd\n\nIn [2]: pd.__version__\nOut[2]: '0.15.2-103-gfda5012'\n\nIn [3]: tuples = [('a', 'x'), ('c', 'x')]\n\nIn [4]: idx = pd.MultiIndex.from_tuples(tuples)\n\nIn [5]: df = pd.DataFrame(index=idx, data={'baz': [0, 1]})\n\nIn [6]: df\nOut[6]: \n     baz\na x    0\nc x    1\n\nIn [7]: df.index\nOut[7]: \nMultiIndex(levels=[[u'a', u'c'], [u'x']],\n           labels=[[0, 1], [0, 0]])\n\nIn [8]: df.ix[('b', 'x'), 'baz'] = 2\n\nIn [9]: df\nOut[9]: \n     baz\na x    0\nc x    1\nb x    2\n\nIn [10]: df.index\nOut[10]: \nMultiIndex(levels=[[u'a', u'c', u'b'], [u'x']],\n           labels=[[0, 1, 2], [0, 0, 0]])\n\nIn [11]: df.sort_index()\nOut[11]: \n     baz\na x    0\nc x    1\nb x    2\n\nIn [12]: df.ix[('a', 'y'), 'baz'] = 3\n\nIn [13]: df.index\nOut[13]: \nMultiIndex(levels=[[u'a', u'c', u'b'], [u'x', u'y']],\n           labels=[[0, 1, 2, 0], [0, 0, 0, 1]])\n\nIn [14]: df\nOut[14]: \n     baz\na x    0\nc x    1\nb x    2\na y    3\n\nIn [15]: df.sort_index()\nOut[15]: \n     baz\na x    0\n  y    3\nb x    2\nc x    1\n\nIn [16]: df\nOut[16]: \n     baz\na x    0\nc x    1\nb x    2\na y    3\n\nIn [17]: df.sortlevel(0)\nOut[17]: \n     baz\na x    0\n  y    3\nc x    1\nb x    2\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/70537361",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9212#issuecomment-70537361",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9212",
    "id": 70537361,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwNTM3MzYx",
    "user": {
      "login": "tlmaloney",
      "id": 1243750,
      "node_id": "MDQ6VXNlcjEyNDM3NTA=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/1243750?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tlmaloney",
      "html_url": "https://github.com/tlmaloney",
      "followers_url": "https://api.github.com/users/tlmaloney/followers",
      "following_url": "https://api.github.com/users/tlmaloney/following{/other_user}",
      "gists_url": "https://api.github.com/users/tlmaloney/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tlmaloney/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tlmaloney/subscriptions",
      "organizations_url": "https://api.github.com/users/tlmaloney/orgs",
      "repos_url": "https://api.github.com/users/tlmaloney/repos",
      "events_url": "https://api.github.com/users/tlmaloney/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tlmaloney/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-01-19T18:15:21Z",
    "updated_at": "2015-01-19T18:15:21Z",
    "author_association": "NONE",
    "body": "Similar discussion in #8017.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/70542446",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9212#issuecomment-70542446",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9212",
    "id": 70542446,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwNTQyNDQ2",
    "user": {
      "login": "tlmaloney",
      "id": 1243750,
      "node_id": "MDQ6VXNlcjEyNDM3NTA=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/1243750?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tlmaloney",
      "html_url": "https://github.com/tlmaloney",
      "followers_url": "https://api.github.com/users/tlmaloney/followers",
      "following_url": "https://api.github.com/users/tlmaloney/following{/other_user}",
      "gists_url": "https://api.github.com/users/tlmaloney/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tlmaloney/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tlmaloney/subscriptions",
      "organizations_url": "https://api.github.com/users/tlmaloney/orgs",
      "repos_url": "https://api.github.com/users/tlmaloney/repos",
      "events_url": "https://api.github.com/users/tlmaloney/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tlmaloney/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-01-19T18:54:38Z",
    "updated_at": "2015-01-19T21:01:20Z",
    "author_association": "NONE",
    "body": "@jreback @behzadnouri \n\nThe below highlights different behavior between the MultiIndex append method and setting with enlargement on a DataFrame with `.ix[...] =`. Compare `idx3` and `df.index` after line 13. Do you think this is getting closer to the problem?\n\n```\nIn [1]: import pandas as pd\n\nIn [2]: pd.__version__\nOut[2]: '0.15.2-103-gfda5012'\n\nIn [3]: tuples1 = [('a', 'x'), ('c', 'x')]\n\nIn [4]: tuples2 = [('b', 'x')]\n\nIn [5]: idx1 = pd.MultiIndex.from_tuples(tuples1)\n\nIn [6]: idx2 = pd.MultiIndex.from_tuples(tuples2)\n\nIn [7]: idx3 = idx1.append(idx2)\n\nIn [8]: idx1\nOut[8]: \nMultiIndex(levels=[[u'a', u'c'], [u'x']],\n           labels=[[0, 1], [0, 0]])\n\nIn [9]: idx2\nOut[9]: \nMultiIndex(levels=[[u'b'], [u'x']],\n           labels=[[0], [0]])\n\nIn [10]: idx3\nOut[10]: \nMultiIndex(levels=[[u'a', u'b', u'c'], [u'x']],\n           labels=[[0, 2, 1], [0, 0, 0]])\n\nIn [11]: df = pd.DataFrame(index=idx1, data={'baz': [0, 1]})\n\nIn [12]: df\nOut[12]: \n     baz\na x    0\nc x    1\n\nIn [13]: df.ix[('b', 'x'), 'baz'] = 2\n\nIn [14]: df\nOut[14]: \n     baz\na x    0\nc x    1\nb x    2\n\nIn [15]: df.index\nOut[15]: \nMultiIndex(levels=[[u'a', u'c', u'b'], [u'x']],\n           labels=[[0, 1, 2], [0, 0, 0]])\n\nIn [16]: idx3.values\nOut[16]: array([('a', 'x'), ('c', 'x'), ('b', 'x')], dtype=object)\n\nIn [17]: idx3.sortlevel(0)\nOut[17]: \n(MultiIndex(levels=[[u'a', u'b', u'c'], [u'x']],\n            labels=[[0, 1, 2], [0, 0, 0]]), array([0, 2, 1]))\n\nIn [18]: df.index.sortlevel(0)\nOut[18]: \n(MultiIndex(levels=[[u'a', u'c', u'b'], [u'x']],\n            labels=[[0, 1, 2], [0, 0, 0]]), array([0, 1, 2]))\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/70569249",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9212#issuecomment-70569249",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9212",
    "id": 70569249,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwNTY5MjQ5",
    "user": {
      "login": "tlmaloney",
      "id": 1243750,
      "node_id": "MDQ6VXNlcjEyNDM3NTA=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/1243750?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tlmaloney",
      "html_url": "https://github.com/tlmaloney",
      "followers_url": "https://api.github.com/users/tlmaloney/followers",
      "following_url": "https://api.github.com/users/tlmaloney/following{/other_user}",
      "gists_url": "https://api.github.com/users/tlmaloney/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tlmaloney/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tlmaloney/subscriptions",
      "organizations_url": "https://api.github.com/users/tlmaloney/orgs",
      "repos_url": "https://api.github.com/users/tlmaloney/repos",
      "events_url": "https://api.github.com/users/tlmaloney/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tlmaloney/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-01-19T22:01:45Z",
    "updated_at": "2015-01-19T22:01:45Z",
    "author_association": "NONE",
    "body": "Quick question: what does \"associated factor\" mean [here](http://pandas.pydata.org/pandas-docs/version/0.15.2/advanced.html#the-need-for-sortedness-with-multiindex)?\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/109292470",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9212#issuecomment-109292470",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9212",
    "id": 109292470,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwOTI5MjQ3MA==",
    "user": {
      "login": "8one6",
      "id": 4360170,
      "node_id": "MDQ6VXNlcjQzNjAxNzA=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/4360170?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/8one6",
      "html_url": "https://github.com/8one6",
      "followers_url": "https://api.github.com/users/8one6/followers",
      "following_url": "https://api.github.com/users/8one6/following{/other_user}",
      "gists_url": "https://api.github.com/users/8one6/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/8one6/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/8one6/subscriptions",
      "organizations_url": "https://api.github.com/users/8one6/orgs",
      "repos_url": "https://api.github.com/users/8one6/repos",
      "events_url": "https://api.github.com/users/8one6/events{/privacy}",
      "received_events_url": "https://api.github.com/users/8one6/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-06-05T13:27:31Z",
    "updated_at": "2015-06-05T13:27:31Z",
    "author_association": "NONE",
    "body": "What's the status on this one now?  Is anyone actively working on a fix of the underlying issue? And, separately, is there any workaround for when \"you just need to get the darn dataframe sorted\" while we wait for/work on a more permanent fix for sorting?\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/109296784",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9212#issuecomment-109296784",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9212",
    "id": 109296784,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwOTI5Njc4NA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-06-05T13:46:53Z",
    "updated_at": "2015-06-05T13:46:53Z",
    "author_association": "CONTRIBUTOR",
    "body": "@8one6 well its an active issue with no pr, so no-one is working on it. you are welcome to. `.sortlevel()` works just fine.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/109299310",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9212#issuecomment-109299310",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9212",
    "id": 109299310,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwOTI5OTMxMA==",
    "user": {
      "login": "8one6",
      "id": 4360170,
      "node_id": "MDQ6VXNlcjQzNjAxNzA=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/4360170?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/8one6",
      "html_url": "https://github.com/8one6",
      "followers_url": "https://api.github.com/users/8one6/followers",
      "following_url": "https://api.github.com/users/8one6/following{/other_user}",
      "gists_url": "https://api.github.com/users/8one6/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/8one6/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/8one6/subscriptions",
      "organizations_url": "https://api.github.com/users/8one6/orgs",
      "repos_url": "https://api.github.com/users/8one6/repos",
      "events_url": "https://api.github.com/users/8one6/events{/privacy}",
      "received_events_url": "https://api.github.com/users/8one6/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-06-05T13:51:51Z",
    "updated_at": "2015-06-05T13:52:00Z",
    "author_association": "NONE",
    "body": "Got it.  So in a pinch, I can just `sortlevel` on each level (starting from innermost) and that'll get the job done?\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/109300431",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9212#issuecomment-109300431",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9212",
    "id": 109300431,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwOTMwMDQzMQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-06-05T13:53:42Z",
    "updated_at": "2015-06-05T13:53:42Z",
    "author_association": "CONTRIBUTOR",
    "body": "no just `sortlevel`, you don't need to do anything special. this is a quite degenerate case.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/225447509",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9212#issuecomment-225447509",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9212",
    "id": 225447509,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyNTQ0NzUwOQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-06-12T16:50:05Z",
    "updated_at": "2016-06-12T16:50:05Z",
    "author_association": "CONTRIBUTOR",
    "body": "duplicate of #13431 \n"
  }
]
