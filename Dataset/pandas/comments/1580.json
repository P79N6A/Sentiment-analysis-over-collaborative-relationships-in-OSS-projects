[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/6826313",
    "html_url": "https://github.com/pandas-dev/pandas/issues/1580#issuecomment-6826313",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/1580",
    "id": 6826313,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4MjYzMTM=",
    "user": {
      "login": "danse",
      "id": 885935,
      "node_id": "MDQ6VXNlcjg4NTkzNQ==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/885935?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/danse",
      "html_url": "https://github.com/danse",
      "followers_url": "https://api.github.com/users/danse/followers",
      "following_url": "https://api.github.com/users/danse/following{/other_user}",
      "gists_url": "https://api.github.com/users/danse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/danse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/danse/subscriptions",
      "organizations_url": "https://api.github.com/users/danse/orgs",
      "repos_url": "https://api.github.com/users/danse/repos",
      "events_url": "https://api.github.com/users/danse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/danse/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-07-07T20:32:59Z",
    "updated_at": "2012-07-07T20:32:59Z",
    "author_association": "NONE",
    "body": "This is weird because all other sums look correct. Notice that the 2011-08-21 date has an entry out of order in the .csv file, but this is why I sort the frame before resampling.\n\nFor the 2012-02-02 entry, the behaviour is as such: the correct value (40) is shifted to the next day, and from that day to the end of the file, all entries are shifted by one day.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/6826342",
    "html_url": "https://github.com/pandas-dev/pandas/issues/1580#issuecomment-6826342",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/1580",
    "id": 6826342,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4MjYzNDI=",
    "user": {
      "login": "danse",
      "id": 885935,
      "node_id": "MDQ6VXNlcjg4NTkzNQ==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/885935?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/danse",
      "html_url": "https://github.com/danse",
      "followers_url": "https://api.github.com/users/danse/followers",
      "following_url": "https://api.github.com/users/danse/following{/other_user}",
      "gists_url": "https://api.github.com/users/danse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/danse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/danse/subscriptions",
      "organizations_url": "https://api.github.com/users/danse/orgs",
      "repos_url": "https://api.github.com/users/danse/repos",
      "events_url": "https://api.github.com/users/danse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/danse/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-07-07T20:38:02Z",
    "updated_at": "2012-07-07T20:38:02Z",
    "author_association": "NONE",
    "body": "I am using python 3.2.3\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/6912802",
    "html_url": "https://github.com/pandas-dev/pandas/issues/1580#issuecomment-6912802",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/1580",
    "id": 6912802,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5MTI4MDI=",
    "user": {
      "login": "changhiskhan",
      "id": 759245,
      "node_id": "MDQ6VXNlcjc1OTI0NQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/759245?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/changhiskhan",
      "html_url": "https://github.com/changhiskhan",
      "followers_url": "https://api.github.com/users/changhiskhan/followers",
      "following_url": "https://api.github.com/users/changhiskhan/following{/other_user}",
      "gists_url": "https://api.github.com/users/changhiskhan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/changhiskhan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/changhiskhan/subscriptions",
      "organizations_url": "https://api.github.com/users/changhiskhan/orgs",
      "repos_url": "https://api.github.com/users/changhiskhan/repos",
      "events_url": "https://api.github.com/users/changhiskhan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/changhiskhan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-07-11T17:02:28Z",
    "updated_at": "2012-07-11T17:02:28Z",
    "author_association": "CONTRIBUTOR",
    "body": "By default, DataFrame.sort is NOT inplace.\n\ntry f.sort().resample('D', how='sum')\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/6923099",
    "html_url": "https://github.com/pandas-dev/pandas/issues/1580#issuecomment-6923099",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/1580",
    "id": 6923099,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5MjMwOTk=",
    "user": {
      "login": "wesm",
      "id": 329591,
      "node_id": "MDQ6VXNlcjMyOTU5MQ==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/329591?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wesm",
      "html_url": "https://github.com/wesm",
      "followers_url": "https://api.github.com/users/wesm/followers",
      "following_url": "https://api.github.com/users/wesm/following{/other_user}",
      "gists_url": "https://api.github.com/users/wesm/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wesm/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wesm/subscriptions",
      "organizations_url": "https://api.github.com/users/wesm/orgs",
      "repos_url": "https://api.github.com/users/wesm/repos",
      "events_url": "https://api.github.com/users/wesm/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wesm/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-07-11T23:34:45Z",
    "updated_at": "2012-07-11T23:34:45Z",
    "author_association": "MEMBER",
    "body": "This is definitely a bug; the resampling code was not checking for monotonicity (sortedness) in the data, thus the bug. I'm adding a check (and sorting if not), and this problem goes away. \n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/6945396",
    "html_url": "https://github.com/pandas-dev/pandas/issues/1580#issuecomment-6945396",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/1580",
    "id": 6945396,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5NDUzOTY=",
    "user": {
      "login": "danse",
      "id": 885935,
      "node_id": "MDQ6VXNlcjg4NTkzNQ==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/885935?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/danse",
      "html_url": "https://github.com/danse",
      "followers_url": "https://api.github.com/users/danse/followers",
      "following_url": "https://api.github.com/users/danse/following{/other_user}",
      "gists_url": "https://api.github.com/users/danse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/danse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/danse/subscriptions",
      "organizations_url": "https://api.github.com/users/danse/orgs",
      "repos_url": "https://api.github.com/users/danse/repos",
      "events_url": "https://api.github.com/users/danse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/danse/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-07-12T19:37:42Z",
    "updated_at": "2012-07-12T19:37:42Z",
    "author_association": "NONE",
    "body": "Thanks, using sorting not in place fixed the most of the errors, but the shift in resampling at a same point still remains. I reduced the data file to few rows. Processing the following rows:\n\n```\namount,date\n370,2012-02-01T00:00:00\n0,2012-02-01T22:27:48.633911\n20,2012-02-02T13:27:24.828871\n20,2012-02-02T21:35:41.482386\n20,2012-02-04T12:13:37.426859\n20,2012-02-04T21:42:11.164113\n200,2012-02-05T18:48:24.171116\n50,2012-02-06T19:11:07.339103\n18,2012-02-07T20:11:59.232420\n21,2012-02-11T09:16:25.231366\n40,2012-02-11T09:16:44.850074\n35,2012-02-13T00:28:00.666619\n40,2012-02-13T20:16:40.714301\n```\n\nWith the following script:\n\n```\nimport sys\nimport pandas\n\nf=pandas.read_csv(sys.stdin, index_col=1, parse_dates=True)\nf=f.sort().resample('D', how='sum')\nf['amount'] = f['amount'].fillna(0)\nf.to_csv(sys.stdout)\n```\n\nThe result is:\n\n```\n,amount\n2012-02-01 00:00:00,370.0\n2012-02-02 00:00:00,0.0\n2012-02-03 00:00:00,40.0\n2012-02-04 00:00:00,0.0\n2012-02-05 00:00:00,40.0\n2012-02-06 00:00:00,200.0\n2012-02-07 00:00:00,50.0\n2012-02-08 00:00:00,18.0\n2012-02-09 00:00:00,0.0\n2012-02-10 00:00:00,0.0\n2012-02-11 00:00:00,0.0\n2012-02-12 00:00:00,61.0\n2012-02-13 00:00:00,0.0\n2012-02-14 00:00:00,75.0\n```\n\nSo from 2012-02-02 all the sums are shifted by one day. I do not have permission to reopen the issue; should I fill in a new one?\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/6945782",
    "html_url": "https://github.com/pandas-dev/pandas/issues/1580#issuecomment-6945782",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/1580",
    "id": 6945782,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5NDU3ODI=",
    "user": {
      "login": "wesm",
      "id": 329591,
      "node_id": "MDQ6VXNlcjMyOTU5MQ==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/329591?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wesm",
      "html_url": "https://github.com/wesm",
      "followers_url": "https://api.github.com/users/wesm/followers",
      "following_url": "https://api.github.com/users/wesm/following{/other_user}",
      "gists_url": "https://api.github.com/users/wesm/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wesm/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wesm/subscriptions",
      "organizations_url": "https://api.github.com/users/wesm/orgs",
      "repos_url": "https://api.github.com/users/wesm/repos",
      "events_url": "https://api.github.com/users/wesm/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wesm/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-07-12T19:52:19Z",
    "updated_at": "2012-07-12T19:52:19Z",
    "author_association": "MEMBER",
    "body": "I think what you're really looking for is one of:\n\n```\nIn [9]: f.sort().resample('D', how='sum', kind='period')\nOut[9]: \n             amount\n01-Feb-2012     370\n02-Feb-2012      40\n03-Feb-2012     NaN\n04-Feb-2012      40\n05-Feb-2012     200\n06-Feb-2012      50\n07-Feb-2012      18\n08-Feb-2012     NaN\n09-Feb-2012     NaN\n10-Feb-2012     NaN\n11-Feb-2012      61\n12-Feb-2012     NaN\n13-Feb-2012      75\n```\n\nor \n\n```\nIn [11]: from pandas.tseries.tools import normalize_date\n\nIn [12]: f.groupby(normalize_date).sum()\nOut[12]: \n            amount\n2012-02-01     370\n2012-02-02      40\n2012-02-04      40\n2012-02-05     200\n2012-02-06      50\n2012-02-07      18\n2012-02-11      61\n2012-02-13      75\n```\n\nThe thing about the resampling algorithm is that it segments the data by bin edges, then has to assign a label to each bin. This actually gives you what you want as timestamps:\n\n```\nIn [16]: f.sort().resample('D', how='sum', label='left', closed='left')\nOut[16]: \n            amount\n2012-02-01     370\n2012-02-02      40\n2012-02-03     NaN\n2012-02-04      40\n2012-02-05     200\n2012-02-06      50\n2012-02-07      18\n2012-02-08     NaN\n2012-02-09     NaN\n2012-02-10     NaN\n2012-02-11      61\n2012-02-12     NaN\n2012-02-13      75\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/6949879",
    "html_url": "https://github.com/pandas-dev/pandas/issues/1580#issuecomment-6949879",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/1580",
    "id": 6949879,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5NDk4Nzk=",
    "user": {
      "login": "danse",
      "id": 885935,
      "node_id": "MDQ6VXNlcjg4NTkzNQ==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/885935?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/danse",
      "html_url": "https://github.com/danse",
      "followers_url": "https://api.github.com/users/danse/followers",
      "following_url": "https://api.github.com/users/danse/following{/other_user}",
      "gists_url": "https://api.github.com/users/danse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/danse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/danse/subscriptions",
      "organizations_url": "https://api.github.com/users/danse/orgs",
      "repos_url": "https://api.github.com/users/danse/repos",
      "events_url": "https://api.github.com/users/danse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/danse/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-07-12T22:34:57Z",
    "updated_at": "2012-07-12T22:34:57Z",
    "author_association": "NONE",
    "body": "Thanks, kind=\"period\" will be perfect. normalize_data is not a solution because I need to fill the gaps. I prefer using kind=\"period\" rather than label left, closed left. I thought that it was a bin issue, but I was misleaded by the fact that the shift happened at a precise point in data. However on original data everything is correct using kind period. Many thanks! :)\n"
  }
]
