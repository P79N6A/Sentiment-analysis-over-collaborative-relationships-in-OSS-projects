[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/231980365",
    "html_url": "https://github.com/pandas-dev/pandas/issues/13628#issuecomment-231980365",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13628",
    "id": 231980365,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzMTk4MDM2NQ==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-07-12T09:02:34Z",
    "updated_at": "2016-07-12T09:35:00Z",
    "author_association": "MEMBER",
    "body": "I think it should be your second suggestion, the ValueError. This is also what you get when filling with scalars:\n\n```\nIn [4]: pd.Series(pd.Categorical([1,2,None, None])).fillna(1)\nOut[4]:\n0    1\n1    2\n2    1\n3    1\ndtype: category\nCategories (2, int64): [1, 2]\n\nIn [5]: pd.Series(pd.Categorical([1,2,None, None])).fillna('a')\n...\nValueError: fill value must be in categories\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/366971567",
    "html_url": "https://github.com/pandas-dev/pandas/issues/13628#issuecomment-366971567",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13628",
    "id": 366971567,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2Njk3MTU2Nw==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-20T13:07:11Z",
    "updated_at": "2018-02-20T13:07:11Z",
    "author_association": "MEMBER",
    "body": "This seems to be working now:\r\n\r\n```\r\nIn [132]: pd.Categorical([1,2,None, None]).fillna(pd.Series([1,1, 'a', 'b']))\r\n---------------------------------------------------------------------------\r\nValueError                                Traceback (most recent call last)\r\n<ipython-input-132-77e152fafe70> in <module>()\r\n----> 1 pd.Categorical([1,2,None, None]).fillna(pd.Series([1,1, 'a', 'b']))\r\n\r\n/home/joris/scipy/pandas/pandas/util/_decorators.py in wrapper(*args, **kwargs)\r\n    136                 else:\r\n    137                     kwargs[new_arg_name] = new_arg_value\r\n--> 138             return func(*args, **kwargs)\r\n    139         return wrapper\r\n    140     return _deprecate_kwarg\r\n\r\n/home/joris/scipy/pandas/pandas/core/arrays/categorical.py in fillna(self, value, method, limit)\r\n   1639             if isinstance(value, ABCSeries):\r\n   1640                 if not value[~value.isin(self.categories)].isna().all():\r\n-> 1641                     raise ValueError(\"fill value must be in categories\")\r\n   1642 \r\n   1643                 values_codes = _get_codes_for_values(value, self.categories)\r\n\r\nValueError: fill value must be in categories\r\n```\r\n\r\nSo would be good to add a test for this (or to check if this was fixed specifically in a PR with test added)"
  }
]
