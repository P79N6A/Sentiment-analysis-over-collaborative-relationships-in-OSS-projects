[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/437633391",
    "html_url": "https://github.com/pandas-dev/pandas/issues/23616#issuecomment-437633391",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23616",
    "id": 437633391,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNzYzMzM5MQ==",
    "user": {
      "login": "datapythonista",
      "id": 10058240,
      "node_id": "MDQ6VXNlcjEwMDU4MjQw",
      "avatar_url": "https://avatars2.githubusercontent.com/u/10058240?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/datapythonista",
      "html_url": "https://github.com/datapythonista",
      "followers_url": "https://api.github.com/users/datapythonista/followers",
      "following_url": "https://api.github.com/users/datapythonista/following{/other_user}",
      "gists_url": "https://api.github.com/users/datapythonista/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/datapythonista/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/datapythonista/subscriptions",
      "organizations_url": "https://api.github.com/users/datapythonista/orgs",
      "repos_url": "https://api.github.com/users/datapythonista/repos",
      "events_url": "https://api.github.com/users/datapythonista/events{/privacy}",
      "received_events_url": "https://api.github.com/users/datapythonista/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-11T00:35:05Z",
    "updated_at": "2018-11-11T00:35:05Z",
    "author_association": "MEMBER",
    "body": "+1 on this, but I'd just add things that are immediate or almost immediate to be checked (e.g. `git diff upstream/master -u -- \"*.py\" | flake8 --diff`, which wouldn't be necessary in the PR template).\r\n\r\nIt'll be some work to check things mainly based on the diffs so they are fast (I'm thinking for example in docstring changes), but if we manage to do it, I think it should make our life, and contributors life much easier."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/437633592",
    "html_url": "https://github.com/pandas-dev/pandas/issues/23616#issuecomment-437633592",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23616",
    "id": 437633592,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNzYzMzU5Mg==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-11T00:38:58Z",
    "updated_at": "2018-11-11T00:38:58Z",
    "author_association": "CONTRIBUTOR",
    "body": "I don’t know exactly what flake8 is doing, but it’s been fast in my experience. Probably just flake8ing the files that changed.\n\nYou can also skip checks with the right flags.\n\n________________________________\nFrom: Marc Garcia <notifications@github.com>\nSent: Saturday, November 10, 2018 6:35:09 PM\nTo: pandas-dev/pandas\nCc: Tom Augspurger; Author\nSubject: Re: [pandas-dev/pandas] Workflow: recommend pre-commit for code checks (#23616)\n\n\n+1 on this, but I'd just add things that are immediate or almost immediate to be checked (e.g. git diff upstream/master -u -- \"*.py\" | flake8 --diff, which wouldn't be necessary in the PR template).\n\nIt'll be some work to check things mainly based on the diffs so they are fast (I'm thinking for example in docstring changes), but if we manage to do it, I think it should make our life, and contributors life much easier.\n\n—\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub<https://github.com/pandas-dev/pandas/issues/23616#issuecomment-437633391>, or mute the thread<https://github.com/notifications/unsubscribe-auth/ABQHIl8gNU_ReAUCXeJ-Yn7HNjx4Inqeks5ut3C9gaJpZM4YYK1m>.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/437634484",
    "html_url": "https://github.com/pandas-dev/pandas/issues/23616#issuecomment-437634484",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23616",
    "id": 437634484,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNzYzNDQ4NA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-11T00:58:54Z",
    "updated_at": "2018-11-11T00:58:54Z",
    "author_association": "CONTRIBUTOR",
    "body": "btw i find that putting things in the Makefile is nice for interactive development\r\n\r\neg make lint-diff \r\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/437635721",
    "html_url": "https://github.com/pandas-dev/pandas/issues/23616#issuecomment-437635721",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23616",
    "id": 437635721,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNzYzNTcyMQ==",
    "user": {
      "login": "gfyoung",
      "id": 9273653,
      "node_id": "MDQ6VXNlcjkyNzM2NTM=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/9273653?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gfyoung",
      "html_url": "https://github.com/gfyoung",
      "followers_url": "https://api.github.com/users/gfyoung/followers",
      "following_url": "https://api.github.com/users/gfyoung/following{/other_user}",
      "gists_url": "https://api.github.com/users/gfyoung/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gfyoung/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gfyoung/subscriptions",
      "organizations_url": "https://api.github.com/users/gfyoung/orgs",
      "repos_url": "https://api.github.com/users/gfyoung/repos",
      "events_url": "https://api.github.com/users/gfyoung/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gfyoung/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-11T01:26:06Z",
    "updated_at": "2018-11-11T01:26:06Z",
    "author_association": "MEMBER",
    "body": "+1 from me as well.  Good sanity checks."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/438845268",
    "html_url": "https://github.com/pandas-dev/pandas/issues/23616#issuecomment-438845268",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23616",
    "id": 438845268,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzODg0NTI2OA==",
    "user": {
      "login": "h-vetinari",
      "id": 33685575,
      "node_id": "MDQ6VXNlcjMzNjg1NTc1",
      "avatar_url": "https://avatars1.githubusercontent.com/u/33685575?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/h-vetinari",
      "html_url": "https://github.com/h-vetinari",
      "followers_url": "https://api.github.com/users/h-vetinari/followers",
      "following_url": "https://api.github.com/users/h-vetinari/following{/other_user}",
      "gists_url": "https://api.github.com/users/h-vetinari/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/h-vetinari/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/h-vetinari/subscriptions",
      "organizations_url": "https://api.github.com/users/h-vetinari/orgs",
      "repos_url": "https://api.github.com/users/h-vetinari/repos",
      "events_url": "https://api.github.com/users/h-vetinari/events{/privacy}",
      "received_events_url": "https://api.github.com/users/h-vetinari/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-14T22:37:23Z",
    "updated_at": "2018-11-14T22:37:23Z",
    "author_association": "CONTRIBUTOR",
    "body": "@TomAugspurger in #23707:\r\n> I'd be curious to hear your thoughts on #23616.\r\nIf we recommend using pre-commit hooks (after verifying that hey work on all platforms) we could remove this doc section entirely.\r\n\r\nI'm quite strongly against precommit hooks (esp. modifying content in place). I tried them myself recently to deal with ipython notebooks, but the problem is that, generally speaking:\r\n* there's a difference between committing and pushing (not every commit needs the equivalent of a lint check)\r\n* modifying inplace is *bad*, and not just in situations where commits are aborted (empty commit), etc.\r\n* git can't enforce people using the hooks (well, aside indirectly through the serverside CI itself), so you can't rely on that (e.g. removing the box for the code checks from the PR template). Aside from the fact that installing githooks is another barrier to entry for new developers.\r\n\r\nI would say that (was gonna comment the same in #23658):\r\n* with the recent changes to the CI, `git diff upstream/master -u -- \"*.py\" | flake8 --diff` doesn't cut it anymore.\r\n* it should be replaced with a single script (ideally platform-agnostic, at least from a user-POV) that tests all the relevant lint checks (flake8, isort, doctests), which should IMO have a box in the PR template. (this script could be eventually enhanced with all sorts of things; e.g. check that dependencies are up to date; run tests that were changed by PR, etc.). #23707 is maybe a small step in that direction.\r\n* (optionally), one could consider recommending to add that to the git [`pre-push-hook`](https://git-scm.com/docs/githooks#_pre_push), rather than the `pre-commit-hook`.\r\n* it should IMO still be possible to push a failing commit (maybe with a prompt somehow) - e.g. I'm on a platform where pandas has some failures in the current test suite.\r\n\r\n\r\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/438847154",
    "html_url": "https://github.com/pandas-dev/pandas/issues/23616#issuecomment-438847154",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23616",
    "id": 438847154,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzODg0NzE1NA==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-14T22:44:31Z",
    "updated_at": "2018-11-14T22:44:31Z",
    "author_association": "CONTRIBUTOR",
    "body": "> there's a difference between committing and pushing (not every commit\nneeds the equivalent of a lint check)\n\nHopefully these checks are fast enough that they don't slow you down. I\nhaven't found them to be troublesome.\n\n> modifying inplace is *bad*, and not just in situations where commits are\naborted (empty commit), etc\n\nThe isort hook does modify files in place, but does not stage the changes.\nI've found the workflow of\n\n```\ngit add .\ngit commit -m ...\n\n# isort failure\ngit diff # inspect what isort did\ngit add .\ngit commit -m ...\n```\n\nto be quite nice.\n\n> git can't enforce people using the hooks\n\nWe can't enforce that contributors follow the issue template either :)\nWe'll still have the CI to enforce things.\nThis is just to ease the annoying push, wait for CI, see small linting\nmistake cycle.\n\n> Aside from the fact that installing githooks is another barrier to entry\nfor new developers.\n\nI found pre-commit to be pretty painless. Have you used it?\n\npre-commit does support pre-push hooks. If we like this, we can start\nadding some more expensive checks as pre-push\nchecks to the config we distribute.\n\n\nOn Wed, Nov 14, 2018 at 4:37 PM h-vetinari <notifications@github.com> wrote:\n\n> @TomAugspurger <https://github.com/TomAugspurger> in #23707\n> <https://github.com/pandas-dev/pandas/pull/23707>:\n>\n> I'd be curious to hear your thoughts on #23616\n> <https://github.com/pandas-dev/pandas/issues/23616>.\n> If we recommend using pre-commit hooks (after verifying that hey work on\n> all platforms) we could remove this doc section entirely.\n>\n> I'm quite strongly against precommit hooks (esp. modifying content in\n> place). I tried them myself recently to deal with ipython notebooks, but\n> the problem is that, generally speaking:\n>\n>    - there's a difference between committing and pushing (not every\n>    commit needs the equivalent of a lint check)\n>    - modifying inplace is *bad*, and not just in situations where commits\n>    are aborted (empty commit), etc.\n>    - git can't enforce people using the hooks (well, aside indirectly\n>    through the serverside CI itself), so you can't rely on that (e.g. removing\n>    the box for the code checks from the PR template). Aside from the fact that\n>    installing githooks is another barrier to entry for new developers.\n>\n> I would say that (was gonna comment the same in #23658\n> <https://github.com/pandas-dev/pandas/issues/23658>):\n>\n>    - with the recent changes to the CI, git diff upstream/master -u --\n>    \"*.py\" | flake8 --diff doesn't cut it anymore.\n>    - it should be replaced with a single script (ideally\n>    platform-agnostic, at least from a user-POV) that tests all the relevant\n>    lint checks (flake8, isort, doctests), which should IMO have a box in the\n>    PR template. (this script could be eventually enhanced with all sorts of\n>    things; e.g. check that dependencies are up to date; run tests that were\n>    changed by PR, etc.). #23707\n>    <https://github.com/pandas-dev/pandas/pull/23707> is maybe a small\n>    step in that direction.\n>    - (optionally), one could consider recommending to add that to the git\n>    pre-push-hook <https://git-scm.com/docs/githooks#_pre_push>, rather\n>    than the pre-commit-hook.\n>    - it should IMO still be possible to push a failing commit (maybe with\n>    a prompt somehow) - e.g. I'm on a platform where pandas has some failures\n>    in the current test suite.\n>\n> —\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/pandas-dev/pandas/issues/23616#issuecomment-438845268>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/ABQHInyuqwwZ5MDOtlqCNIubE-s4JVDwks5uvJspgaJpZM4YYK1m>\n> .\n>\n"
  }
]
