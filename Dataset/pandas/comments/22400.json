[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/413974271",
    "html_url": "https://github.com/pandas-dev/pandas/issues/22400#issuecomment-413974271",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/22400",
    "id": 413974271,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMzk3NDI3MQ==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-17T20:03:50Z",
    "updated_at": "2018-08-17T20:03:50Z",
    "author_association": "CONTRIBUTOR",
    "body": "Might want to check with NumPy, though it's probably doing the right thing here.\r\n\r\n```python\r\nIn [51]: np.testing.assert_array_equal(x.values, y.values)\r\n---------------------------------------------------------------------------\r\nAssertionError                            Traceback (most recent call last)\r\n<ipython-input-51-5b0b6c40059c> in <module>()\r\n----> 1 np.testing.assert_array_equal(x.values, y.values)\r\n\r\n~/sandbox/numpy/numpy/testing/_private/utils.py in assert_array_equal(x, y, err_msg, verbose)\r\n    860     __tracebackhide__ = True  # Hide traceback for py.test\r\n    861     assert_array_compare(operator.__eq__, x, y, err_msg=err_msg,\r\n--> 862                          verbose=verbose, header='Arrays are not equal')\r\n    863\r\n    864\r\n\r\n~/sandbox/numpy/numpy/testing/_private/utils.py in assert_array_compare(comparison, x, y, err_msg, verbose, header, precision, equal_nan, equal_inf)\r\n    784                                 verbose=verbose, header=header,\r\n    785                                 names=('x', 'y'), precision=precision)\r\n--> 786             raise AssertionError(msg)\r\n    787     except ValueError:\r\n    788         import traceback\r\n\r\nAssertionError:\r\nArrays are not equal\r\n\r\n(mismatch 100.0%)\r\n x: array([0, 0.0131142231938, 1.77774652865e-05,\r\n       array([0.47227208, 0.42169298])], dtype=object)\r\n y: array([0, 0.0131142231938, 1.77774652865e-05,\r\n       array([0.47227208, 0.42169298])], dtype=object)\r\n```"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/414109965",
    "html_url": "https://github.com/pandas-dev/pandas/issues/22400#issuecomment-414109965",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/22400",
    "id": 414109965,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxNDEwOTk2NQ==",
    "user": {
      "login": "gfyoung",
      "id": 9273653,
      "node_id": "MDQ6VXNlcjkyNzM2NTM=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/9273653?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gfyoung",
      "html_url": "https://github.com/gfyoung",
      "followers_url": "https://api.github.com/users/gfyoung/followers",
      "following_url": "https://api.github.com/users/gfyoung/following{/other_user}",
      "gists_url": "https://api.github.com/users/gfyoung/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gfyoung/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gfyoung/subscriptions",
      "organizations_url": "https://api.github.com/users/gfyoung/orgs",
      "repos_url": "https://api.github.com/users/gfyoung/repos",
      "events_url": "https://api.github.com/users/gfyoung/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gfyoung/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-19T07:42:01Z",
    "updated_at": "2018-08-19T07:43:34Z",
    "author_association": "MEMBER",
    "body": "Indeed, I think the nested arrays are tripping `numpy` up somehow.  Under the hood, we are using `numpy`'s equality overload to compare these arrays.\r\n\r\n~~~python\r\n>>> x.values == y.values\r\nFalse\r\n\r\n>>> a = np.array([1, 2])\r\n>>> b = np.array([1, 2])\r\n>>> a == b\r\narray([ True,  True])\r\n~~~\r\n\r\nWith nested arrays, `numpy` is somehow not doing element-wise comparison as I would expect (if you check element-wise, you'll see all of them are equal as expected).  However, as it currently stands, the single `False` being returned is causing us to interpret that all elements were not equal (similar to what `numpy` does as [above](https://github.com/pandas-dev/pandas/issues/22400#issuecomment-413974271)), hence why we see 100% mismatch.\r\n\r\ncc @charris"
  }
]
