[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/385489541",
    "html_url": "https://github.com/pandas-dev/pandas/issues/20866#issuecomment-385489541",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/20866",
    "id": 385489541,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4NTQ4OTU0MQ==",
    "user": {
      "login": "WillAyd",
      "id": 609873,
      "node_id": "MDQ6VXNlcjYwOTg3Mw==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/609873?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/WillAyd",
      "html_url": "https://github.com/WillAyd",
      "followers_url": "https://api.github.com/users/WillAyd/followers",
      "following_url": "https://api.github.com/users/WillAyd/following{/other_user}",
      "gists_url": "https://api.github.com/users/WillAyd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/WillAyd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/WillAyd/subscriptions",
      "organizations_url": "https://api.github.com/users/WillAyd/orgs",
      "repos_url": "https://api.github.com/users/WillAyd/repos",
      "events_url": "https://api.github.com/users/WillAyd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/WillAyd/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-30T18:37:39Z",
    "updated_at": "2018-04-30T18:37:39Z",
    "author_association": "MEMBER",
    "body": "This may have subsequently been \"fixed\" on master\r\n\r\n```python\r\n>>> pd.__version__\r\n'0.23.0.dev0+813.gd274d0b22'\r\n>>> s = pd.Series(['test', None])\r\n>>> s.unique()\r\narray(['test', None], dtype=object)\r\n```"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/385569310",
    "html_url": "https://github.com/pandas-dev/pandas/issues/20866#issuecomment-385569310",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/20866",
    "id": 385569310,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4NTU2OTMxMA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-01T00:34:16Z",
    "updated_at": "2018-05-01T00:34:16Z",
    "author_association": "CONTRIBUTOR",
    "body": "@WillAyd can see if there is a test (and if not put one up)?"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/385611241",
    "html_url": "https://github.com/pandas-dev/pandas/issues/20866#issuecomment-385611241",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/20866",
    "id": 385611241,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4NTYxMTI0MQ==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-01T06:50:02Z",
    "updated_at": "2018-05-01T07:43:52Z",
    "author_association": "MEMBER",
    "body": "Hmm, strange, I did a full clean rebuild of master, and this is still giving nan for me:\r\n\r\n```\r\nIn [1]: s = pd.Series(['test', None])\r\n\r\nIn [2]: s.unique()\r\nOut[2]: array(['test', nan], dtype=object)\r\n\r\nIn [3]: pd.__version__\r\nOut[3]: '0.23.0.dev0+815.gf799916'\r\n```\r\n\r\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/385621230",
    "html_url": "https://github.com/pandas-dev/pandas/issues/20866#issuecomment-385621230",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/20866",
    "id": 385621230,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4NTYyMTIzMA==",
    "user": {
      "login": "jschendel",
      "id": 5332445,
      "node_id": "MDQ6VXNlcjUzMzI0NDU=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/5332445?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jschendel",
      "html_url": "https://github.com/jschendel",
      "followers_url": "https://api.github.com/users/jschendel/followers",
      "following_url": "https://api.github.com/users/jschendel/following{/other_user}",
      "gists_url": "https://api.github.com/users/jschendel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jschendel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jschendel/subscriptions",
      "organizations_url": "https://api.github.com/users/jschendel/orgs",
      "repos_url": "https://api.github.com/users/jschendel/repos",
      "events_url": "https://api.github.com/users/jschendel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jschendel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-01T08:06:03Z",
    "updated_at": "2018-05-01T08:06:03Z",
    "author_association": "MEMBER",
    "body": "I'm also getting the same output as @jorisvandenbossche."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/385621896",
    "html_url": "https://github.com/pandas-dev/pandas/issues/20866#issuecomment-385621896",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/20866",
    "id": 385621896,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4NTYyMTg5Ng==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-01T08:11:13Z",
    "updated_at": "2018-05-01T08:11:13Z",
    "author_association": "MEMBER",
    "body": "It's very strange that the tests are passing though (in the PR that @WillAyd did: https://github.com/pandas-dev/pandas/pull/20893)\r\n\r\nI was testing on linux / python 3.5 / numpy 1.13.3 (not sure what else might influence this), the failing tests on geopandas were using the linux travis build with python 3.6 and pandas installed with pip from github master."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/385623171",
    "html_url": "https://github.com/pandas-dev/pandas/issues/20866#issuecomment-385623171",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/20866",
    "id": 385623171,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4NTYyMzE3MQ==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-01T08:19:39Z",
    "updated_at": "2018-05-01T08:19:39Z",
    "author_association": "MEMBER",
    "body": "I suppose this might be the cause (not of the fact we are seeing different behaviour though): https://github.com/pandas-dev/pandas/commit/7f7f3d49bba842881b5f26a4fe973a6f3eca8757"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/385625104",
    "html_url": "https://github.com/pandas-dev/pandas/issues/20866#issuecomment-385625104",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/20866",
    "id": 385625104,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4NTYyNTEwNA==",
    "user": {
      "login": "jschendel",
      "id": 5332445,
      "node_id": "MDQ6VXNlcjUzMzI0NDU=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/5332445?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jschendel",
      "html_url": "https://github.com/jschendel",
      "followers_url": "https://api.github.com/users/jschendel/followers",
      "following_url": "https://api.github.com/users/jschendel/following{/other_user}",
      "gists_url": "https://api.github.com/users/jschendel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jschendel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jschendel/subscriptions",
      "organizations_url": "https://api.github.com/users/jschendel/orgs",
      "repos_url": "https://api.github.com/users/jschendel/repos",
      "events_url": "https://api.github.com/users/jschendel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jschendel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-01T08:33:00Z",
    "updated_at": "2018-05-01T08:33:00Z",
    "author_association": "MEMBER",
    "body": "@jorisvandenbossche : see my comment on the PR."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/385733500",
    "html_url": "https://github.com/pandas-dev/pandas/issues/20866#issuecomment-385733500",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/20866",
    "id": 385733500,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4NTczMzUwMA==",
    "user": {
      "login": "WillAyd",
      "id": 609873,
      "node_id": "MDQ6VXNlcjYwOTg3Mw==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/609873?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/WillAyd",
      "html_url": "https://github.com/WillAyd",
      "followers_url": "https://api.github.com/users/WillAyd/followers",
      "following_url": "https://api.github.com/users/WillAyd/following{/other_user}",
      "gists_url": "https://api.github.com/users/WillAyd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/WillAyd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/WillAyd/subscriptions",
      "organizations_url": "https://api.github.com/users/WillAyd/orgs",
      "repos_url": "https://api.github.com/users/WillAyd/repos",
      "events_url": "https://api.github.com/users/WillAyd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/WillAyd/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-01T17:32:55Z",
    "updated_at": "2018-05-01T17:32:55Z",
    "author_association": "MEMBER",
    "body": "@jorisvandenbossche after reviewing some more I am able to reproduce the error you provided after doing a full clean / rebuild. After looking at it, I believe you are correct that https://github.com/pandas-dev/pandas/commit/7f7f3d49bba842881b5f26a4fe973a6f3eca8757 is causing the regression, as a clean / rebuild on the commit prior still returned `None` but a full clean / rebuild on that commit does return `NaN`."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/385767579",
    "html_url": "https://github.com/pandas-dev/pandas/issues/20866#issuecomment-385767579",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/20866",
    "id": 385767579,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4NTc2NzU3OQ==",
    "user": {
      "login": "WillAyd",
      "id": 609873,
      "node_id": "MDQ6VXNlcjYwOTg3Mw==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/609873?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/WillAyd",
      "html_url": "https://github.com/WillAyd",
      "followers_url": "https://api.github.com/users/WillAyd/followers",
      "following_url": "https://api.github.com/users/WillAyd/following{/other_user}",
      "gists_url": "https://api.github.com/users/WillAyd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/WillAyd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/WillAyd/subscriptions",
      "organizations_url": "https://api.github.com/users/WillAyd/orgs",
      "repos_url": "https://api.github.com/users/WillAyd/repos",
      "events_url": "https://api.github.com/users/WillAyd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/WillAyd/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-01T19:39:14Z",
    "updated_at": "2018-05-01T19:39:14Z",
    "author_association": "MEMBER",
    "body": "Looking at this further I noticed that the behavior is somewhat inconsistent with the commit prior to the regression. Note below that `None` is preserved but `pd.NaT` becomes `np.nan`:\r\n\r\n```python\r\n>>> pd.__version__\r\n'0.23.0.dev0+752.g0bd8a5a62'\r\n>>> pd.Series(['foo', None]).unique()\r\narray(['foo', None], dtype=object)\r\n>>> pd.Series(['foo', pd.NaT]).unique()\r\narray(['foo', nan], dtype=object)\r\n>>> pd.Series(['foo', np.nan]).unique()\r\narray(['foo', nan], dtype=object)\r\n```\r\n\r\nOn the commit with the regression, everything is `np.nan`:\r\n```python\r\n>>> pd.__version__\r\n'0.23.0.dev0+753.g7f7f3d49b'\r\n>>> pd.Series(['foo', None]).unique()\r\narray(['foo', nan], dtype=object)\r\n>>> pd.Series(['foo', pd.NaT]).unique()\r\narray(['foo', nan], dtype=object)\r\n>>> pd.Series(['foo', np.nan]).unique()\r\narray(['foo', nan], dtype=object)\r\n```\r\n\r\nThe difference in the treatment of `None` has to do with the replacement of `_checknan` with `checknull` in the referenced PR. Do we care to revert this? IMO this is a pretty dark corner and if `unique` wasn't preserving `pd.NaT` before I don't take it as a guarantee that it should have preserved `None` either."
  }
]
