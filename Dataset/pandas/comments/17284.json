[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/323442192",
    "html_url": "https://github.com/pandas-dev/pandas/issues/17284#issuecomment-323442192",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17284",
    "id": 323442192,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMzQ0MjE5Mg==",
    "user": {
      "login": "prcastro",
      "id": 1280742,
      "node_id": "MDQ6VXNlcjEyODA3NDI=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1280742?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prcastro",
      "html_url": "https://github.com/prcastro",
      "followers_url": "https://api.github.com/users/prcastro/followers",
      "following_url": "https://api.github.com/users/prcastro/following{/other_user}",
      "gists_url": "https://api.github.com/users/prcastro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prcastro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prcastro/subscriptions",
      "organizations_url": "https://api.github.com/users/prcastro/orgs",
      "repos_url": "https://api.github.com/users/prcastro/repos",
      "events_url": "https://api.github.com/users/prcastro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prcastro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-18T19:33:59Z",
    "updated_at": "2017-08-18T19:33:59Z",
    "author_association": "CONTRIBUTOR",
    "body": "To be clear: Even if the feature in #17282 is implemented, this one would persist."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/323534284",
    "html_url": "https://github.com/pandas-dev/pandas/issues/17284#issuecomment-323534284",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17284",
    "id": 323534284,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMzUzNDI4NA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-19T16:47:28Z",
    "updated_at": "2017-08-19T16:47:28Z",
    "author_association": "CONTRIBUTOR",
    "body": "you would have to show your original data input. it looks like object dtype."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/324007831",
    "html_url": "https://github.com/pandas-dev/pandas/issues/17284#issuecomment-324007831",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17284",
    "id": 324007831,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNDAwNzgzMQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-22T12:14:41Z",
    "updated_at": "2017-08-22T12:14:41Z",
    "author_association": "CONTRIBUTOR",
    "body": "@prcastro pls show a complete copy-pastable example in the top section (just update). This should be a minimal example which shows the problem."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/324038334",
    "html_url": "https://github.com/pandas-dev/pandas/issues/17284#issuecomment-324038334",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17284",
    "id": 324038334,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNDAzODMzNA==",
    "user": {
      "login": "prcastro",
      "id": 1280742,
      "node_id": "MDQ6VXNlcjEyODA3NDI=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1280742?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prcastro",
      "html_url": "https://github.com/prcastro",
      "followers_url": "https://api.github.com/users/prcastro/followers",
      "following_url": "https://api.github.com/users/prcastro/following{/other_user}",
      "gists_url": "https://api.github.com/users/prcastro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prcastro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prcastro/subscriptions",
      "organizations_url": "https://api.github.com/users/prcastro/orgs",
      "repos_url": "https://api.github.com/users/prcastro/repos",
      "events_url": "https://api.github.com/users/prcastro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prcastro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-22T14:10:26Z",
    "updated_at": "2017-08-22T14:10:26Z",
    "author_association": "CONTRIBUTOR",
    "body": "Updated"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/324623683",
    "html_url": "https://github.com/pandas-dev/pandas/issues/17284#issuecomment-324623683",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17284",
    "id": 324623683,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNDYyMzY4Mw==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-24T12:41:58Z",
    "updated_at": "2017-08-24T12:42:23Z",
    "author_association": "CONTRIBUTOR",
    "body": "@prcastro your example in the top is not copy-pastable. This needs to be a *minimal* example."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/325250680",
    "html_url": "https://github.com/pandas-dev/pandas/issues/17284#issuecomment-325250680",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17284",
    "id": 325250680,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNTI1MDY4MA==",
    "user": {
      "login": "prcastro",
      "id": 1280742,
      "node_id": "MDQ6VXNlcjEyODA3NDI=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1280742?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prcastro",
      "html_url": "https://github.com/prcastro",
      "followers_url": "https://api.github.com/users/prcastro/followers",
      "following_url": "https://api.github.com/users/prcastro/following{/other_user}",
      "gists_url": "https://api.github.com/users/prcastro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prcastro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prcastro/subscriptions",
      "organizations_url": "https://api.github.com/users/prcastro/orgs",
      "repos_url": "https://api.github.com/users/prcastro/repos",
      "events_url": "https://api.github.com/users/prcastro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prcastro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-28T03:16:42Z",
    "updated_at": "2017-08-28T03:16:42Z",
    "author_association": "CONTRIBUTOR",
    "body": "@jreback Is this considered a minimal example?\r\n\r\n```python\r\nx = pd.Series([0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 3.9997242948235283, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 4.554204550787334, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.688134638736401, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 4.200711854240529, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 3.5832425505088623, 0.0, 0.0, 0.0, 0.0, 0.0, 2.0647107369924282, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 3.373043556642607, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.5822156198526636, 0.0, 0.0, 0.0, 0.0, 1.672944473242426, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 3.5384474167160302, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 2.667706820558076, 0.0, 0.0, 4.034952986707273, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 3.422144328051685, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0])\r\ncategorized = pd.qcut(x, 10, duplicates='drop')\r\nres = pd.cut(x, categorized.cat.categories)\r\nres.isnull().sum()\r\n```"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/325651673",
    "html_url": "https://github.com/pandas-dev/pandas/issues/17284#issuecomment-325651673",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17284",
    "id": 325651673,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNTY1MTY3Mw==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-29T12:42:52Z",
    "updated_at": "2017-08-29T12:42:52Z",
    "author_association": "CONTRIBUTOR",
    "body": "@prcastro yes thank you. I am not exactly what is going on here. if you would debug and see where its going wrong would be great."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/325865260",
    "html_url": "https://github.com/pandas-dev/pandas/issues/17284#issuecomment-325865260",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17284",
    "id": 325865260,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNTg2NTI2MA==",
    "user": {
      "login": "prcastro",
      "id": 1280742,
      "node_id": "MDQ6VXNlcjEyODA3NDI=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1280742?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prcastro",
      "html_url": "https://github.com/prcastro",
      "followers_url": "https://api.github.com/users/prcastro/followers",
      "following_url": "https://api.github.com/users/prcastro/following{/other_user}",
      "gists_url": "https://api.github.com/users/prcastro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prcastro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prcastro/subscriptions",
      "organizations_url": "https://api.github.com/users/prcastro/orgs",
      "repos_url": "https://api.github.com/users/prcastro/repos",
      "events_url": "https://api.github.com/users/prcastro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prcastro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-30T02:58:57Z",
    "updated_at": "2017-08-30T02:58:57Z",
    "author_association": "CONTRIBUTOR",
    "body": "@jreback I traced the problem to `IntervalIndex.get_indexer` method. If I do:\r\n\r\n```\r\nimport pandas as pd\r\nx = pd.Series([0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 3.9997242948235283, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 4.554204550787334, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.688134638736401, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 4.200711854240529, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 3.5832425505088623, 0.0, 0.0, 0.0, 0.0, 0.0, 2.0647107369924282, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 3.373043556642607, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.5822156198526636, 0.0, 0.0, 0.0, 0.0, 1.672944473242426, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 3.5384474167160302, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 2.667706820558076, 0.0, 0.0, 4.034952986707273, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 3.422144328051685, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0])\r\ncategorized = pd.qcut(x, 10, duplicates='drop')\r\nbins = categorized.cat.categories\r\nbins.get_indexer(x)\r\n```\r\nIt wrongly returns a lot of `-1`values (which are converted to NaN after, resulting in the original problem). After entering the `if` statement in [here](https://github.com/pandas-dev/pandas/blob/master/pandas/core/indexes/interval.py#L752) the result in `stop` variable seems to be wrong.\r\n\r\nI took a time to invetigate why this was happening. What I found was that when computing `stop`, in the method `IntervalIndex._searchsorted_monotonic`, the program was not entering the `else` clause [here](https://github.com/pandas-dev/pandas/blob/master/pandas/core/indexes/interval.py#L640). If it does, everything seems to go just fine.\r\n\r\nHowever, I don't understand `get_indexer` enough to pin down the cause of this bug, and don't even know *why*  or even *if* it should enter the `else` clause in `IntervalIndex._searchsorted_monotonic` I pointed before."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/325890615",
    "html_url": "https://github.com/pandas-dev/pandas/issues/17284#issuecomment-325890615",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17284",
    "id": 325890615,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNTg5MDYxNQ==",
    "user": {
      "login": "jschendel",
      "id": 5332445,
      "node_id": "MDQ6VXNlcjUzMzI0NDU=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/5332445?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jschendel",
      "html_url": "https://github.com/jschendel",
      "followers_url": "https://api.github.com/users/jschendel/followers",
      "following_url": "https://api.github.com/users/jschendel/following{/other_user}",
      "gists_url": "https://api.github.com/users/jschendel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jschendel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jschendel/subscriptions",
      "organizations_url": "https://api.github.com/users/jschendel/orgs",
      "repos_url": "https://api.github.com/users/jschendel/repos",
      "events_url": "https://api.github.com/users/jschendel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jschendel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-30T06:02:32Z",
    "updated_at": "2017-08-30T06:02:32Z",
    "author_association": "MEMBER",
    "body": "To distill this down a bit further, I think the root of the issue occurs when an `IntervalIndex` only has a single element:\r\n```python\r\nIn [2]: idx1 = pd.IntervalIndex.from_tuples([(0, 5)])\r\n\r\nIn [3]: idx1.contains(3)\r\nOut[3]: False\r\n\r\nIn [4]: idx1.get_indexer([3])\r\nOut[4]: array([-1], dtype=int64)\r\n```\r\n\r\nThe same operations work when there are two elements:\r\n\r\n```python\r\nIn [5]: idx2 = pd.IntervalIndex.from_tuples([(0, 5), (5, 10)])\r\n\r\nIn [6]: idx2.contains(3)\r\nOut[6]: True\r\n\r\nIn [7]: idx2.get_indexer([3])\r\nOut[7]: array([0], dtype=int64)\r\n```\r\n\r\nQuick fix could be to write a special case in `IntervalIndex._searchsorted_monotonic`  for when there's only a single element.  Would probably be beneficial to examine the logic as a whole to see if could be made more robust though.\r\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/325891176",
    "html_url": "https://github.com/pandas-dev/pandas/issues/17284#issuecomment-325891176",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17284",
    "id": 325891176,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNTg5MTE3Ng==",
    "user": {
      "login": "shoyer",
      "id": 1217238,
      "node_id": "MDQ6VXNlcjEyMTcyMzg=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1217238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shoyer",
      "html_url": "https://github.com/shoyer",
      "followers_url": "https://api.github.com/users/shoyer/followers",
      "following_url": "https://api.github.com/users/shoyer/following{/other_user}",
      "gists_url": "https://api.github.com/users/shoyer/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shoyer/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shoyer/subscriptions",
      "organizations_url": "https://api.github.com/users/shoyer/orgs",
      "repos_url": "https://api.github.com/users/shoyer/repos",
      "events_url": "https://api.github.com/users/shoyer/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shoyer/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-30T06:06:13Z",
    "updated_at": "2017-08-30T06:06:36Z",
    "author_association": "MEMBER",
    "body": "This sounds related to the IntervalIndex indexing issues being tracked down in #16316 and #16386."
  }
]
