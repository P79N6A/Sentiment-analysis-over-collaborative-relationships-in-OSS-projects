[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/280324748",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15404#issuecomment-280324748",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15404",
    "id": 280324748,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4MDMyNDc0OA==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-16T13:03:51Z",
    "updated_at": "2017-02-16T13:03:51Z",
    "author_association": "MEMBER",
    "body": "@redbullpeter Thanks for the report\r\n\r\nThe reason for the error is the integer index name. If you set this to a string, it will work\r\n\r\n```\r\nIn [25]: df.to_sql(\"test_tbl\", db, if_exists=\"append\")\r\n...\r\nAttributeError: 'int' object has no attribute '_set_parent_with_dispatch'\r\n\r\nIn [26]: df.index.name = 'year'\r\n\r\nIn [27]: df.to_sql(\"test_tbl\", db, if_exists=\"append\")\r\n\r\nIn [28]: pd.read_sql(\"test_tbl\", db)\r\nOut[28]: \r\n   year  1\r\n0  2002  3\r\n1  2000  1\r\n2  2003  4\r\n3  2001  2\r\n```\r\n\r\nSo integer column names are not allowed for writing to sql. For columns, this is checked for, and the integers are converted to a string. This check apparently does not happen for the index name (which also becomes a column label in the sql table), and by keeping it as an int, an error is raised in the underlying sqlalchemy code.\r\n\r\nFixes very welcome!"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/280335728",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15404#issuecomment-280335728",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15404",
    "id": 280335728,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4MDMzNTcyOA==",
    "user": {
      "login": "redbullpeter",
      "id": 7094955,
      "node_id": "MDQ6VXNlcjcwOTQ5NTU=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/7094955?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/redbullpeter",
      "html_url": "https://github.com/redbullpeter",
      "followers_url": "https://api.github.com/users/redbullpeter/followers",
      "following_url": "https://api.github.com/users/redbullpeter/following{/other_user}",
      "gists_url": "https://api.github.com/users/redbullpeter/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/redbullpeter/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/redbullpeter/subscriptions",
      "organizations_url": "https://api.github.com/users/redbullpeter/orgs",
      "repos_url": "https://api.github.com/users/redbullpeter/repos",
      "events_url": "https://api.github.com/users/redbullpeter/events{/privacy}",
      "received_events_url": "https://api.github.com/users/redbullpeter/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-16T13:53:39Z",
    "updated_at": "2017-02-16T13:53:39Z",
    "author_association": "CONTRIBUTOR",
    "body": "I can probably do the fix for that. Will it be sufficient to naively convert an int to a string for the index column?"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/280337502",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15404#issuecomment-280337502",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15404",
    "id": 280337502,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4MDMzNzUwMg==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-16T14:01:05Z",
    "updated_at": "2017-02-16T14:01:05Z",
    "author_association": "MEMBER",
    "body": "Yes, I think it is just this line: https://github.com/pandas-dev/pandas/blob/93f5e3a0c11c82ad6b7365e83637d133c1a6e8a5/pandas/io/sql.py#L753 (note that a few lines below, the column name is wrapped in `text_type(..)`, this is not done for the index label. \r\nYou should confirm with a test that this indeed solves the issue."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/280359838",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15404#issuecomment-280359838",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15404",
    "id": 280359838,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4MDM1OTgzOA==",
    "user": {
      "login": "redbullpeter",
      "id": 7094955,
      "node_id": "MDQ6VXNlcjcwOTQ5NTU=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/7094955?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/redbullpeter",
      "html_url": "https://github.com/redbullpeter",
      "followers_url": "https://api.github.com/users/redbullpeter/followers",
      "following_url": "https://api.github.com/users/redbullpeter/following{/other_user}",
      "gists_url": "https://api.github.com/users/redbullpeter/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/redbullpeter/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/redbullpeter/subscriptions",
      "organizations_url": "https://api.github.com/users/redbullpeter/orgs",
      "repos_url": "https://api.github.com/users/redbullpeter/repos",
      "events_url": "https://api.github.com/users/redbullpeter/events{/privacy}",
      "received_events_url": "https://api.github.com/users/redbullpeter/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-16T15:20:48Z",
    "updated_at": "2017-02-16T15:20:48Z",
    "author_association": "CONTRIBUTOR",
    "body": "Reran the code sample above and got the expected outcomes. This worked for both using the sqlalchmey and sqlite3 packages."
  }
]
