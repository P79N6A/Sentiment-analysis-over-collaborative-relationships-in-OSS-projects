[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/333496039",
    "html_url": "https://github.com/pandas-dev/pandas/issues/17734#issuecomment-333496039",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17734",
    "id": 333496039,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMzQ5NjAzOQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-02T10:22:45Z",
    "updated_at": "2017-10-02T10:22:45Z",
    "author_association": "CONTRIBUTOR",
    "body": "yeah there is an embedded bug somewhere here, IOW we have both the multi convert and the single one. merits investigating."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/333605031",
    "html_url": "https://github.com/pandas-dev/pandas/issues/17734#issuecomment-333605031",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17734",
    "id": 333605031,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMzYwNTAzMQ==",
    "user": {
      "login": "jbrockmendel",
      "id": 8078968,
      "node_id": "MDQ6VXNlcjgwNzg5Njg=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/8078968?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jbrockmendel",
      "html_url": "https://github.com/jbrockmendel",
      "followers_url": "https://api.github.com/users/jbrockmendel/followers",
      "following_url": "https://api.github.com/users/jbrockmendel/following{/other_user}",
      "gists_url": "https://api.github.com/users/jbrockmendel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jbrockmendel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jbrockmendel/subscriptions",
      "organizations_url": "https://api.github.com/users/jbrockmendel/orgs",
      "repos_url": "https://api.github.com/users/jbrockmendel/repos",
      "events_url": "https://api.github.com/users/jbrockmendel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jbrockmendel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-02T17:29:52Z",
    "updated_at": "2017-10-02T17:29:52Z",
    "author_association": "MEMBER",
    "body": "OK.  One approach is to brute force over args to `tz_convert` and `tz_convert_single` to find where they disagree.  It looks like this is dependent on mocking out `dateutil.tz.tzlocal`, which in turn requires mocking `time.timezone` and a couple of related attrs.  Need to figure out what constitute valid values for those."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/337027295",
    "html_url": "https://github.com/pandas-dev/pandas/issues/17734#issuecomment-337027295",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17734",
    "id": 337027295,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzNzAyNzI5NQ==",
    "user": {
      "login": "jbrockmendel",
      "id": 8078968,
      "node_id": "MDQ6VXNlcjgwNzg5Njg=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/8078968?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jbrockmendel",
      "html_url": "https://github.com/jbrockmendel",
      "followers_url": "https://api.github.com/users/jbrockmendel/followers",
      "following_url": "https://api.github.com/users/jbrockmendel/following{/other_user}",
      "gists_url": "https://api.github.com/users/jbrockmendel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jbrockmendel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jbrockmendel/subscriptions",
      "organizations_url": "https://api.github.com/users/jbrockmendel/orgs",
      "repos_url": "https://api.github.com/users/jbrockmendel/repos",
      "events_url": "https://api.github.com/users/jbrockmendel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jbrockmendel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-16T20:22:17Z",
    "updated_at": "2017-10-16T20:22:17Z",
    "author_association": "MEMBER",
    "body": "Trying to track this down, a couple other questions come up:\r\n\r\nThe `is_tzlocal(tz)` [branch](https://github.com/pandas-dev/pandas/blob/master/pandas/_libs/tslib.pyx#L3738) in `tslib.tz_localize_to_utc` is very similar to the `is_tzlocal(tz1)` [branch](https://github.com/pandas-dev/pandas/blob/master/pandas/_libs/tslib.pyx#L3561) in `tslib.tz_convert`.  The only difference is that there are checks for `NPY_NAT` in `tz_convert`.  Are those checks unnecessary for tz_localize_to_utc?\r\n\r\nThe [last loop ](https://github.com/pandas-dev/pandas/blob/master/pandas/_libs/tslib.pyx#L3868)in `tz_localize_to_utc` looks like a more careful version of [the last loop](https://github.com/pandas-dev/pandas/blob/master/pandas/_libs/tslib.pyx#L3630) in `tz_convert`.  Is that correct?\r\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/337078138",
    "html_url": "https://github.com/pandas-dev/pandas/issues/17734#issuecomment-337078138",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17734",
    "id": 337078138,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzNzA3ODEzOA==",
    "user": {
      "login": "jbrockmendel",
      "id": 8078968,
      "node_id": "MDQ6VXNlcjgwNzg5Njg=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/8078968?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jbrockmendel",
      "html_url": "https://github.com/jbrockmendel",
      "followers_url": "https://api.github.com/users/jbrockmendel/followers",
      "following_url": "https://api.github.com/users/jbrockmendel/following{/other_user}",
      "gists_url": "https://api.github.com/users/jbrockmendel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jbrockmendel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jbrockmendel/subscriptions",
      "organizations_url": "https://api.github.com/users/jbrockmendel/orgs",
      "repos_url": "https://api.github.com/users/jbrockmendel/repos",
      "events_url": "https://api.github.com/users/jbrockmendel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jbrockmendel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-17T00:01:53Z",
    "updated_at": "2017-10-17T00:01:53Z",
    "author_association": "MEMBER",
    "body": "Got a case where tz_convert disagrees with tz_convert_single.  Unfortunately this is specific to tzlocal being US/Pacific (haven't found a great way to mock that yet).\r\n\r\n```\r\n>>> tz2 = tzlocal()\r\n>>> tz1 = pytz.timezone('US/Eastern')\r\n>>> val = 1489316399999999000\r\n>>> vals = np.arange(val-3600*24*1000000000, val+3600*24*1000000000, 1800*1000000000)[16:24]\r\n>>> v1 = tslib.tz_convert(vals, tz1, tz2)\r\n>>> v2 = np.array([tslib.tz_convert_single(x, tz1, tz2) for x in vals])\r\n>>> v1 == v2\r\narray([ True,  True,  True,  True,  True, False, False, False], dtype=bool)\r\n```\r\n\r\nNext up: figuring out what the answer is _supposed_ to be in these cases."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/338101968",
    "html_url": "https://github.com/pandas-dev/pandas/issues/17734#issuecomment-338101968",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17734",
    "id": 338101968,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzODEwMTk2OA==",
    "user": {
      "login": "jbrockmendel",
      "id": 8078968,
      "node_id": "MDQ6VXNlcjgwNzg5Njg=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/8078968?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jbrockmendel",
      "html_url": "https://github.com/jbrockmendel",
      "followers_url": "https://api.github.com/users/jbrockmendel/followers",
      "following_url": "https://api.github.com/users/jbrockmendel/following{/other_user}",
      "gists_url": "https://api.github.com/users/jbrockmendel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jbrockmendel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jbrockmendel/subscriptions",
      "organizations_url": "https://api.github.com/users/jbrockmendel/orgs",
      "repos_url": "https://api.github.com/users/jbrockmendel/repos",
      "events_url": "https://api.github.com/users/jbrockmendel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jbrockmendel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-20T04:18:27Z",
    "updated_at": "2017-10-20T04:18:27Z",
    "author_association": "MEMBER",
    "body": "cc: @sinhrks looks like you worked on a related issue #7798\r\n\r\nAll existing uses of `tslib.tz_convert` or `tslib.tz_convert_single` have either `tz1='UTC'` or `tz2='UTC'`.  Restricted to this subset of inputs, this issue is benign.  Is it the case that all uses _must_ have one of the inputs be UTC?  If so, this issue has an easy fix, half of which is noting that restriction in the docstring.\r\n\r\nIf not, then I need a hand finding a canonical answer for the disagreement case."
  }
]
