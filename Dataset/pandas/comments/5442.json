[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/27786979",
    "html_url": "https://github.com/pandas-dev/pandas/issues/5442#issuecomment-27786979",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/5442",
    "id": 27786979,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3Nzg2OTc5",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-11-05T16:19:44Z",
    "updated_at": "2013-11-05T16:19:44Z",
    "author_association": "CONTRIBUTOR",
    "body": "can you show an example of use?\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/27788812",
    "html_url": "https://github.com/pandas-dev/pandas/issues/5442#issuecomment-27788812",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/5442",
    "id": 27788812,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3Nzg4ODEy",
    "user": {
      "login": "ehebert",
      "id": 185744,
      "node_id": "MDQ6VXNlcjE4NTc0NA==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/185744?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ehebert",
      "html_url": "https://github.com/ehebert",
      "followers_url": "https://api.github.com/users/ehebert/followers",
      "following_url": "https://api.github.com/users/ehebert/following{/other_user}",
      "gists_url": "https://api.github.com/users/ehebert/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ehebert/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ehebert/subscriptions",
      "organizations_url": "https://api.github.com/users/ehebert/orgs",
      "repos_url": "https://api.github.com/users/ehebert/repos",
      "events_url": "https://api.github.com/users/ehebert/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ehebert/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-11-05T16:37:04Z",
    "updated_at": "2013-11-05T16:38:13Z",
    "author_association": "NONE",
    "body": "Thanks for taking a look!\n\nHere's an edited example from our `batch_transform` module.\n\nThe `RollingPanel` is initialized as such[1], where:\n- `self.window_length`: Number of days to perform the calculation over.\n- `self.field_names`: The open, high, low, close, price, etc. fields being captured by the panel.\n- `sids`, The identifiers for the stocks being captured by the panel.\n\n```\nself.daily_rolling_panel = RollingPanel(\n    self.window_length,\n    self.field_names,\n    sids)\n```\n\nThe data is then updated with the following code[2], where:\n- `event.dt`: Is the current active historical time in the backtest.\n- `event.data`: A dictionary of the current bar's open, high, low, close data. (i.e. the same values as `field_names`.)\n- `self.field_names` and `sids`: Are the same values as the panel is in initialization, though population of sids can change throughout the backtest.\n\n```\n# Store event in rolling frame\nself.rolling_panel.add_frame(\n    event.dt,\n    pd.DataFrame(\n        event.data,\n        index=self.field_names,\n        columns=sids))\n```\n\n[1] https://github.com/quantopian/zipline/blob/2492feb938c21f7577e6c05fa8cd7bfd57863d25/zipline/transforms/batch_transform.py#L265\n[2]\nhttps://github.com/quantopian/zipline/blob/2492feb938c21f7577e6c05fa8cd7bfd57863d25/zipline/transforms/batch_transform.py#L293\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/27820091",
    "html_url": "https://github.com/pandas-dev/pandas/issues/5442#issuecomment-27820091",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/5442",
    "id": 27820091,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3ODIwMDkx",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-11-05T22:30:55Z",
    "updated_at": "2013-11-05T22:31:36Z",
    "author_association": "CONTRIBUTOR",
    "body": "given a typical scenario, what is the size for the a rolling panel (number of events)?\n\nyou add 1 event, then do calculations? then repeat?\nor do you add a bunch of events, then do a calculation?\n\ncan you give an example of the calculations?\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/27821191",
    "html_url": "https://github.com/pandas-dev/pandas/issues/5442#issuecomment-27821191",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/5442",
    "id": 27821191,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3ODIxMTkx",
    "user": {
      "login": "jtratner",
      "id": 1598379,
      "node_id": "MDQ6VXNlcjE1OTgzNzk=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1598379?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtratner",
      "html_url": "https://github.com/jtratner",
      "followers_url": "https://api.github.com/users/jtratner/followers",
      "following_url": "https://api.github.com/users/jtratner/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtratner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtratner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtratner/subscriptions",
      "organizations_url": "https://api.github.com/users/jtratner/orgs",
      "repos_url": "https://api.github.com/users/jtratner/repos",
      "events_url": "https://api.github.com/users/jtratner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtratner/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-11-05T22:43:54Z",
    "updated_at": "2013-11-05T22:43:54Z",
    "author_association": "CONTRIBUTOR",
    "body": "I glanced at the code for the RollingPanel - is it set up to (at least\nsomewhat efficiently) stream data into a Panel?\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/27903316",
    "html_url": "https://github.com/pandas-dev/pandas/issues/5442#issuecomment-27903316",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/5442",
    "id": 27903316,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3OTAzMzE2",
    "user": {
      "login": "ehebert",
      "id": 185744,
      "node_id": "MDQ6VXNlcjE4NTc0NA==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/185744?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ehebert",
      "html_url": "https://github.com/ehebert",
      "followers_url": "https://api.github.com/users/ehebert/followers",
      "following_url": "https://api.github.com/users/ehebert/following{/other_user}",
      "gists_url": "https://api.github.com/users/ehebert/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ehebert/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ehebert/subscriptions",
      "organizations_url": "https://api.github.com/users/ehebert/orgs",
      "repos_url": "https://api.github.com/users/ehebert/repos",
      "events_url": "https://api.github.com/users/ehebert/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ehebert/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-11-06T19:08:48Z",
    "updated_at": "2013-11-06T19:08:48Z",
    "author_association": "NONE",
    "body": "@jreback that size that we are aiming to have well supported is 252 events for up to 160 stocks/sids for a few of the OHLC fields. So roughly 120k np.floats in the entire structure.\nBut 15-30 day windows will probably be the most common.\n\nOur current use of RollingPanel by our users exceeds those constraints, and we are rewriting how historical data is provided accordingly.\n\nAnd yes the workflow is basically add an event, rerun calculations.\n(We had some support for only doing the calculation every X events, but it is not used often.)\n\nA couple sample calculations:\n- An ordinary least squared on just two stocks:\n\n```\ndef ols_transform(panel, sid1, sid2):\n    \"\"\"\n    Computes regression coefficient (slope and intercept)\n    via Ordinary Least Squares between two SIDs.\n    \"\"\"\n    p0 = panel['prices'][sid1]\n    p1 = sm.add_constant(panel['prices'][sid2], prepend=True)\n    return sm.OLS(p0, p1).fit().params\n``\n\n- Passing the entire the Panel to the Python ta-lib wrapper to run a function on every stock contained in the Panel.\n\n- Another use case is simply returning the Panel and using it to geth the last X values to be passed around an algorithm. (i.e. sometimes it is not used as a direct 'run this specific transform calculation on the Panel')\n\n\nHoping that provides the clearer context you were looking for (without deluging you with too much extra that is idiosyncratic to our system).\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/27903355",
    "html_url": "https://github.com/pandas-dev/pandas/issues/5442#issuecomment-27903355",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/5442",
    "id": 27903355,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3OTAzMzU1",
    "user": {
      "login": "ehebert",
      "id": 185744,
      "node_id": "MDQ6VXNlcjE4NTc0NA==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/185744?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ehebert",
      "html_url": "https://github.com/ehebert",
      "followers_url": "https://api.github.com/users/ehebert/followers",
      "following_url": "https://api.github.com/users/ehebert/following{/other_user}",
      "gists_url": "https://api.github.com/users/ehebert/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ehebert/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ehebert/subscriptions",
      "organizations_url": "https://api.github.com/users/ehebert/orgs",
      "repos_url": "https://api.github.com/users/ehebert/repos",
      "events_url": "https://api.github.com/users/ehebert/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ehebert/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-11-06T19:09:21Z",
    "updated_at": "2013-11-06T19:09:21Z",
    "author_association": "NONE",
    "body": "@jtratner currently, we return the Panel to the functions that do the calculations via the `RollingPanel.get_current()` method.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/216854657",
    "html_url": "https://github.com/pandas-dev/pandas/issues/5442#issuecomment-216854657",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/5442",
    "id": 216854657,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIxNjg1NDY1Nw==",
    "user": {
      "login": "max-sixty",
      "id": 5635139,
      "node_id": "MDQ6VXNlcjU2MzUxMzk=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/5635139?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/max-sixty",
      "html_url": "https://github.com/max-sixty",
      "followers_url": "https://api.github.com/users/max-sixty/followers",
      "following_url": "https://api.github.com/users/max-sixty/following{/other_user}",
      "gists_url": "https://api.github.com/users/max-sixty/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/max-sixty/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/max-sixty/subscriptions",
      "organizations_url": "https://api.github.com/users/max-sixty/orgs",
      "repos_url": "https://api.github.com/users/max-sixty/repos",
      "events_url": "https://api.github.com/users/max-sixty/events{/privacy}",
      "received_events_url": "https://api.github.com/users/max-sixty/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-05-04T12:58:50Z",
    "updated_at": "2016-05-04T12:58:50Z",
    "author_association": "CONTRIBUTOR",
    "body": "@jreback I think `rolling` closes this?\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/216855806",
    "html_url": "https://github.com/pandas-dev/pandas/issues/5442#issuecomment-216855806",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/5442",
    "id": 216855806,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIxNjg1NTgwNg==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-05-04T13:03:59Z",
    "updated_at": "2016-05-04T13:03:59Z",
    "author_association": "CONTRIBUTOR",
    "body": "@MaximilianR this is an updatable structure. Which is not very efficient in the current impl. It could be done, though its a bit tricky. You can do all of this now, with a fairly flexible API. In any event this is a stale issue.\n"
  }
]
