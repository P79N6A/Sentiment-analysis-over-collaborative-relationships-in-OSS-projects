[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/24604286",
    "html_url": "https://github.com/pandas-dev/pandas/issues/4862#issuecomment-24604286",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/4862",
    "id": 24604286,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0NjA0Mjg2",
    "user": {
      "login": "hayd",
      "id": 1931852,
      "node_id": "MDQ6VXNlcjE5MzE4NTI=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1931852?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hayd",
      "html_url": "https://github.com/hayd",
      "followers_url": "https://api.github.com/users/hayd/followers",
      "following_url": "https://api.github.com/users/hayd/following{/other_user}",
      "gists_url": "https://api.github.com/users/hayd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hayd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hayd/subscriptions",
      "organizations_url": "https://api.github.com/users/hayd/orgs",
      "repos_url": "https://api.github.com/users/hayd/repos",
      "events_url": "https://api.github.com/users/hayd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hayd/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-09-17T16:55:39Z",
    "updated_at": "2013-09-17T16:55:39Z",
    "author_association": "CONTRIBUTOR",
    "body": "```\nIn [12]: df1\nOut[12]:\n                          change\ns_id      dosage agent\n680585148 NaN    Hg          NaN\n                 U      0.000000\n                 Pb     0.000007\n680607017 0.0133 Sn     0.000024\n                 Ag     0.000000\n                 Hg    -0.000150\n\nIn [13][: df1.unstack()\n# ValueError: Index contains duplicate entries, cannot reshape\n```\n\nguessing to do with:\n\n```\nIn [14]: df1.index.levels[1]\nOut[14]: Index([0.0133], dtype=object)\n\nIn [15]: df1.index.labels\nOut[15]: FrozenList([[0, 0, 0, 1, 1, 1], [-1, -1, -1, 0, 0, 0], [1, 4, 2, 3, 0, 1]])\n```\n\nworks when not NaN\n\n```\nIn [21]: df2\nOut[21]:\n                           change\ns_id      dosage  agent\n680585148 42.0000 Hg          NaN\n                  U      0.000000\n                  Pb     0.000007\n680607017 0.0133  Sn     0.000024\n                  Ag     0.000000\n                  Hg    -0.000150\n\nIn [22]: df2.unstack()\nOut[22]:\n                   change\nagent                  Ag       Hg        Pb        Sn   U\ns_id      dosage\n680585148 42.0000     NaN      NaN  0.000007       NaN   0\n680607017 0.0133        0 -0.00015       NaN  0.000024 NaN\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/25356115",
    "html_url": "https://github.com/pandas-dev/pandas/issues/4862#issuecomment-25356115",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/4862",
    "id": 25356115,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1MzU2MTE1",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-09-30T12:30:13Z",
    "updated_at": "2013-09-30T12:30:13Z",
    "author_association": "CONTRIBUTOR",
    "body": "first part now works (as now allow single nan in indexes) (and will be in 0.13)\n\n```\nIn [2]: df.copy().set_index(['s_id','dosage','agent'])\nOut[2]: \n                          change\ns_id      dosage agent          \n680585148 NaN    Hg          NaN\n                 U      0.000000\n                 Pb     0.000007\n680607017 0.0133 Sn     0.000024\n                 Ag     0.000000\n                 Hg    -0.000150\n\nIn [3]: df\nOut[3]: \n      agent    change  dosage       s_id\n17263    Hg       NaN     NaN  680585148\n17264     U  0.000000     NaN  680585148\n17265    Pb  0.000007     NaN  680585148\n17266    Sn  0.000024  0.0133  680607017\n17267    Ag  0.000000  0.0133  680607017\n17268    Hg -0.000150  0.0133  680607017\n\nIn [4]: df.unstack()\nOut[4]: \nagent   17263            Hg\n        17264             U\n        17265            Pb\n        17266            Sn\n        17267            Ag\n        17268            Hg\nchange  17263           NaN\n        17264             0\n        17265      7.07e-06\n        17266    2.3614e-05\n        17267             0\n        17268      -0.00015\ndosage  17263           NaN\n        17264           NaN\n        17265           NaN\n        17266        0.0133\n        17267        0.0133\n        17268        0.0133\ns_id    17263     680585148\n        17264     680585148\n        17265     680585148\n        17266     680607017\n        17267     680607017\n        17268     680607017\ndtype: object\n```\n\n2nd part failing (but I think an easy fix)\n\n```\n\nIn [5]: df.ix[17264:].copy().set_index(['s_id','dosage','agent']).unstack()\nValueError: cannot convert float NaN to integer\n```\n\npushing to 0.14 for full fixing/validation\n"
  }
]
