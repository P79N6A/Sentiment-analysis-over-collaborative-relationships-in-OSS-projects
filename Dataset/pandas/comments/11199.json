[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/143593034",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11199#issuecomment-143593034",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11199",
    "id": 143593034,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0MzU5MzAzNA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-09-27T20:36:44Z",
    "updated_at": "2015-09-27T20:37:02Z",
    "author_association": "CONTRIBUTOR",
    "body": "yeh, we try to cast back to the original dtype. The check if we can do this is not strict enough. pull-requests are welcome. This is actually done as float (the computation)\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/143593215",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11199#issuecomment-143593215",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11199",
    "id": 143593215,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0MzU5MzIxNQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-09-27T20:38:54Z",
    "updated_at": "2015-09-27T20:39:11Z",
    "author_association": "CONTRIBUTOR",
    "body": "xref to https://github.com/pydata/pandas/pull/9345 (though IIRC some other PR's since then)\n\ncc @iwschris \n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/143594833",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11199#issuecomment-143594833",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11199",
    "id": 143594833,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0MzU5NDgzMw==",
    "user": {
      "login": "iwschris",
      "id": 226109,
      "node_id": "MDQ6VXNlcjIyNjEwOQ==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/226109?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/iwschris",
      "html_url": "https://github.com/iwschris",
      "followers_url": "https://api.github.com/users/iwschris/followers",
      "following_url": "https://api.github.com/users/iwschris/following{/other_user}",
      "gists_url": "https://api.github.com/users/iwschris/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/iwschris/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iwschris/subscriptions",
      "organizations_url": "https://api.github.com/users/iwschris/orgs",
      "repos_url": "https://api.github.com/users/iwschris/repos",
      "events_url": "https://api.github.com/users/iwschris/events{/privacy}",
      "received_events_url": "https://api.github.com/users/iwschris/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-09-27T21:01:01Z",
    "updated_at": "2015-09-27T21:01:01Z",
    "author_association": "CONTRIBUTOR",
    "body": "I'll take a peek.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/143596352",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11199#issuecomment-143596352",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11199",
    "id": 143596352,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0MzU5NjM1Mg==",
    "user": {
      "login": "chris-b1",
      "id": 1924092,
      "node_id": "MDQ6VXNlcjE5MjQwOTI=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1924092?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chris-b1",
      "html_url": "https://github.com/chris-b1",
      "followers_url": "https://api.github.com/users/chris-b1/followers",
      "following_url": "https://api.github.com/users/chris-b1/following{/other_user}",
      "gists_url": "https://api.github.com/users/chris-b1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chris-b1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chris-b1/subscriptions",
      "organizations_url": "https://api.github.com/users/chris-b1/orgs",
      "repos_url": "https://api.github.com/users/chris-b1/repos",
      "events_url": "https://api.github.com/users/chris-b1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chris-b1/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-09-27T21:32:20Z",
    "updated_at": "2015-09-27T21:32:20Z",
    "author_association": "CONTRIBUTOR",
    "body": "@iwschris, fyi I would start here - https://github.com/pydata/pandas/blob/master/pandas/core/common.py#L1293\n\n`np.allclose` seems to have relatively liberal defaults:\n\n```\nIn [1]: np.allclose([49973200.3181996], [49973200])\nOut[1]: True\n\nIn [2]: np.allclose([49973200.3181996], [49973200], rtol=1e-10)\nOut[2]: False\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/143596635",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11199#issuecomment-143596635",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11199",
    "id": 143596635,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0MzU5NjYzNQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-09-27T21:37:37Z",
    "updated_at": "2015-09-27T21:37:37Z",
    "author_association": "CONTRIBUTOR",
    "body": "we might need an additional test where you have `float32` columns (which get computed using `float64`), then downcast back to `float32` (This _should_ work for that)\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/143653209",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11199#issuecomment-143653209",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11199",
    "id": 143653209,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0MzY1MzIwOQ==",
    "user": {
      "login": "shoyer",
      "id": 1217238,
      "node_id": "MDQ6VXNlcjEyMTcyMzg=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1217238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shoyer",
      "html_url": "https://github.com/shoyer",
      "followers_url": "https://api.github.com/users/shoyer/followers",
      "following_url": "https://api.github.com/users/shoyer/following{/other_user}",
      "gists_url": "https://api.github.com/users/shoyer/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shoyer/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shoyer/subscriptions",
      "organizations_url": "https://api.github.com/users/shoyer/orgs",
      "repos_url": "https://api.github.com/users/shoyer/repos",
      "events_url": "https://api.github.com/users/shoyer/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shoyer/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-09-28T06:41:40Z",
    "updated_at": "2015-09-28T06:41:40Z",
    "author_association": "MEMBER",
    "body": "Why do we try to cast back to the original dtype for the mean of integers? I think we should follow numpy's lead and have the output dtype only depend on the input dtypes. The mean of an integer column should always be a float.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/143696169",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11199#issuecomment-143696169",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11199",
    "id": 143696169,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0MzY5NjE2OQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-09-28T09:50:35Z",
    "updated_at": "2015-09-28T09:50:35Z",
    "author_association": "CONTRIBUTOR",
    "body": "@shoyer \n\nin general it is a nice thing to try to cast back to the input type of u can\nin his case it's a bug as the precision check is too loose\n\neg I wouldn't want to always upcast float32\nor return float just because I am doing a max for example\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/143718311",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11199#issuecomment-143718311",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11199",
    "id": 143718311,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0MzcxODMxMQ==",
    "user": {
      "login": "iwschris",
      "id": 226109,
      "node_id": "MDQ6VXNlcjIyNjEwOQ==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/226109?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/iwschris",
      "html_url": "https://github.com/iwschris",
      "followers_url": "https://api.github.com/users/iwschris/followers",
      "following_url": "https://api.github.com/users/iwschris/following{/other_user}",
      "gists_url": "https://api.github.com/users/iwschris/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/iwschris/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iwschris/subscriptions",
      "organizations_url": "https://api.github.com/users/iwschris/orgs",
      "repos_url": "https://api.github.com/users/iwschris/repos",
      "events_url": "https://api.github.com/users/iwschris/events{/privacy}",
      "received_events_url": "https://api.github.com/users/iwschris/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-09-28T11:31:41Z",
    "updated_at": "2015-09-28T11:31:41Z",
    "author_association": "CONTRIBUTOR",
    "body": "I was flying yesterday, but should get to look at this on the plane today. Might see some of you at Strata + Hadoop. I'll let you know if stuff goes wonky.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/143741919",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11199#issuecomment-143741919",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11199",
    "id": 143741919,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0Mzc0MTkxOQ==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-09-28T13:19:46Z",
    "updated_at": "2015-09-28T13:19:46Z",
    "author_association": "CONTRIBUTOR",
    "body": "Possibly related: https://github.com/pydata/pandas/issues/10972 (that's for transform).\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/156525934",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11199#issuecomment-156525934",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11199",
    "id": 156525934,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NjUyNTkzNA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-11-13T19:02:32Z",
    "updated_at": "2015-11-13T19:02:32Z",
    "author_association": "CONTRIBUTOR",
    "body": "@iwschris any luck with this?\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/156532171",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11199#issuecomment-156532171",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11199",
    "id": 156532171,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NjUzMjE3MQ==",
    "user": {
      "login": "iwschris",
      "id": 226109,
      "node_id": "MDQ6VXNlcjIyNjEwOQ==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/226109?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/iwschris",
      "html_url": "https://github.com/iwschris",
      "followers_url": "https://api.github.com/users/iwschris/followers",
      "following_url": "https://api.github.com/users/iwschris/following{/other_user}",
      "gists_url": "https://api.github.com/users/iwschris/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/iwschris/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iwschris/subscriptions",
      "organizations_url": "https://api.github.com/users/iwschris/orgs",
      "repos_url": "https://api.github.com/users/iwschris/repos",
      "events_url": "https://api.github.com/users/iwschris/events{/privacy}",
      "received_events_url": "https://api.github.com/users/iwschris/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-11-13T19:17:27Z",
    "updated_at": "2015-11-13T19:17:27Z",
    "author_association": "CONTRIBUTOR",
    "body": "Sorry Jeff, just went through conference season at work and haven't had a chance to review it. I'll look at it this weekend.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/156532919",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11199#issuecomment-156532919",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11199",
    "id": 156532919,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NjUzMjkxOQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-11-13T19:19:54Z",
    "updated_at": "2015-11-13T19:19:54Z",
    "author_association": "CONTRIBUTOR",
    "body": "np\n\njust sorting thru issues :)\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/156737927",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11199#issuecomment-156737927",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11199",
    "id": 156737927,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NjczNzkyNw==",
    "user": {
      "login": "iwschris",
      "id": 226109,
      "node_id": "MDQ6VXNlcjIyNjEwOQ==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/226109?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/iwschris",
      "html_url": "https://github.com/iwschris",
      "followers_url": "https://api.github.com/users/iwschris/followers",
      "following_url": "https://api.github.com/users/iwschris/following{/other_user}",
      "gists_url": "https://api.github.com/users/iwschris/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/iwschris/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iwschris/subscriptions",
      "organizations_url": "https://api.github.com/users/iwschris/orgs",
      "repos_url": "https://api.github.com/users/iwschris/repos",
      "events_url": "https://api.github.com/users/iwschris/events{/privacy}",
      "received_events_url": "https://api.github.com/users/iwschris/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-11-14T19:22:18Z",
    "updated_at": "2015-11-14T19:22:18Z",
    "author_association": "CONTRIBUTOR",
    "body": "Alright. I have a solid test failure now, and have proven that the issue is using `np.allclose` with the defaults. In particular the relative tolerance arg `rtol` is too high.\n\nI'm going to add several more tests so that I can make sure we're covering the full spectrum of integer sizes.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/156908068",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11199#issuecomment-156908068",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11199",
    "id": 156908068,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NjkwODA2OA==",
    "user": {
      "login": "iwschris",
      "id": 226109,
      "node_id": "MDQ6VXNlcjIyNjEwOQ==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/226109?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/iwschris",
      "html_url": "https://github.com/iwschris",
      "followers_url": "https://api.github.com/users/iwschris/followers",
      "following_url": "https://api.github.com/users/iwschris/following{/other_user}",
      "gists_url": "https://api.github.com/users/iwschris/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/iwschris/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iwschris/subscriptions",
      "organizations_url": "https://api.github.com/users/iwschris/orgs",
      "repos_url": "https://api.github.com/users/iwschris/repos",
      "events_url": "https://api.github.com/users/iwschris/events{/privacy}",
      "received_events_url": "https://api.github.com/users/iwschris/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-11-16T03:47:28Z",
    "updated_at": "2015-11-16T03:47:28Z",
    "author_association": "CONTRIBUTOR",
    "body": "I was thinking we could just drop `rtol` to 0, and use only absolute tolerance. Here I'm using the default `atol` of 1e-08:\n\n```\nIn [1]: np.allclose([2147483647.0000001], [2147483647], rtol=0, atol=1e-08)\nOut[1]: True\n\nIn [2]: np.allclose([2147483647.0000002], [2147483647], rtol=0, atol=1e-08)\nOut[2]: False\n\nIn [3]: np.allclose([2147483648.0000002], [2147483648], rtol=0, atol=1e-08)\nOut[3]: True\n\nIn [4]: np.allclose([2147483648.00000024], [2147483648], rtol=0, atol=1e-08)\nOut[4]: False\n```\n\nThe internal test for numpy is `absolute(a - b) <= (atol + rtol * absolute(b))`\n...but it looks like some of those subtractions end up giving us 0:\n\n```\nIn [5]: 2147483647.0000001 - 2147483647.0\nOut[5]: 0.0\n```\n\nand when that happens it ends up returning `True`. I was hoping to make the behavior consistent so that within a certain absolute tolerance, it would be understood that pandas was going to cast back to an integer.\n\nBefore I go down that path further, do we want the cast-back behavior to be some absolute tolerance? If so, are we just dealing with an acceptable issue related to certain floats not being representable? I would think that we'd only want to cast back to an int when we're sure that we can do so safely, and I'm not 100% certain that we can know that.\n\nAny thoughts on this would be appreciated.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/156910752",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11199#issuecomment-156910752",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11199",
    "id": 156910752,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NjkxMDc1Mg==",
    "user": {
      "login": "iwschris",
      "id": 226109,
      "node_id": "MDQ6VXNlcjIyNjEwOQ==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/226109?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/iwschris",
      "html_url": "https://github.com/iwschris",
      "followers_url": "https://api.github.com/users/iwschris/followers",
      "following_url": "https://api.github.com/users/iwschris/following{/other_user}",
      "gists_url": "https://api.github.com/users/iwschris/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/iwschris/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iwschris/subscriptions",
      "organizations_url": "https://api.github.com/users/iwschris/orgs",
      "repos_url": "https://api.github.com/users/iwschris/repos",
      "events_url": "https://api.github.com/users/iwschris/events{/privacy}",
      "received_events_url": "https://api.github.com/users/iwschris/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-11-16T04:12:11Z",
    "updated_at": "2015-11-16T04:12:11Z",
    "author_association": "CONTRIBUTOR",
    "body": "Also, remember that this is only applicable for non-arithmetic aggregation functions on integers. The cast-back isn't necessary on `first`, `last`, `nth`, `min`, `max`, or `count`, because of the change I did earlier this year where we keep the integers as ints throughout the cython functions and back: https://github.com/pydata/pandas/commit/5f6cbf88d47e7e777b8be855bb950c4ed722cd53\n\nJust wondering if we want to do the `allclose` thing at all or just yank it out.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/156911364",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11199#issuecomment-156911364",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11199",
    "id": 156911364,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NjkxMTM2NA==",
    "user": {
      "login": "shoyer",
      "id": 1217238,
      "node_id": "MDQ6VXNlcjEyMTcyMzg=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1217238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shoyer",
      "html_url": "https://github.com/shoyer",
      "followers_url": "https://api.github.com/users/shoyer/followers",
      "following_url": "https://api.github.com/users/shoyer/following{/other_user}",
      "gists_url": "https://api.github.com/users/shoyer/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shoyer/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shoyer/subscriptions",
      "organizations_url": "https://api.github.com/users/shoyer/orgs",
      "repos_url": "https://api.github.com/users/shoyer/repos",
      "events_url": "https://api.github.com/users/shoyer/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shoyer/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-11-16T04:20:57Z",
    "updated_at": "2015-11-16T04:20:57Z",
    "author_association": "MEMBER",
    "body": "My two cents (and I know @jreback probably disagrees ;) ) is that we should not be casting back to integers for the result of mean under any circumstances. Just because it's \"intuitive\" does not mean it's a good thing. These sort of precision issues illustrate exactly why this is problematic. There is tremendous value in making operations predictable, and an important part of that is consistent dtypes.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/156925227",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11199#issuecomment-156925227",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11199",
    "id": 156925227,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NjkyNTIyNw==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-11-16T06:07:35Z",
    "updated_at": "2015-11-16T06:07:35Z",
    "author_association": "CONTRIBUTOR",
    "body": "actually was going to say that I think we should not upcast on mean (eg essentially return a float always)\n\nsee what tests break with this type of change - further we want to have an intuitive / predictable API that is as least complex as possible\n\niirc that is really the rationale here - what u put it is what u get out (but in this case it's a bit suprising)\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/157064435",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11199#issuecomment-157064435",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11199",
    "id": 157064435,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NzA2NDQzNQ==",
    "user": {
      "login": "iwschris",
      "id": 226109,
      "node_id": "MDQ6VXNlcjIyNjEwOQ==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/226109?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/iwschris",
      "html_url": "https://github.com/iwschris",
      "followers_url": "https://api.github.com/users/iwschris/followers",
      "following_url": "https://api.github.com/users/iwschris/following{/other_user}",
      "gists_url": "https://api.github.com/users/iwschris/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/iwschris/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iwschris/subscriptions",
      "organizations_url": "https://api.github.com/users/iwschris/orgs",
      "repos_url": "https://api.github.com/users/iwschris/repos",
      "events_url": "https://api.github.com/users/iwschris/events{/privacy}",
      "received_events_url": "https://api.github.com/users/iwschris/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-11-16T15:19:32Z",
    "updated_at": "2015-11-16T15:19:32Z",
    "author_association": "CONTRIBUTOR",
    "body": "Awesome. I'll get it done.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/157362518",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11199#issuecomment-157362518",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11199",
    "id": 157362518,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NzM2MjUxOA==",
    "user": {
      "login": "iwschris",
      "id": 226109,
      "node_id": "MDQ6VXNlcjIyNjEwOQ==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/226109?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/iwschris",
      "html_url": "https://github.com/iwschris",
      "followers_url": "https://api.github.com/users/iwschris/followers",
      "following_url": "https://api.github.com/users/iwschris/following{/other_user}",
      "gists_url": "https://api.github.com/users/iwschris/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/iwschris/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iwschris/subscriptions",
      "organizations_url": "https://api.github.com/users/iwschris/orgs",
      "repos_url": "https://api.github.com/users/iwschris/repos",
      "events_url": "https://api.github.com/users/iwschris/events{/privacy}",
      "received_events_url": "https://api.github.com/users/iwschris/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-11-17T12:47:39Z",
    "updated_at": "2015-11-17T12:47:39Z",
    "author_association": "CONTRIBUTOR",
    "body": "22 test failures. I'm going to be working through each of them to make sure that we aren't overlooking anything.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/157594937",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11199#issuecomment-157594937",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11199",
    "id": 157594937,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NzU5NDkzNw==",
    "user": {
      "login": "iwschris",
      "id": 226109,
      "node_id": "MDQ6VXNlcjIyNjEwOQ==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/226109?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/iwschris",
      "html_url": "https://github.com/iwschris",
      "followers_url": "https://api.github.com/users/iwschris/followers",
      "following_url": "https://api.github.com/users/iwschris/following{/other_user}",
      "gists_url": "https://api.github.com/users/iwschris/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/iwschris/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iwschris/subscriptions",
      "organizations_url": "https://api.github.com/users/iwschris/orgs",
      "repos_url": "https://api.github.com/users/iwschris/repos",
      "events_url": "https://api.github.com/users/iwschris/events{/privacy}",
      "received_events_url": "https://api.github.com/users/iwschris/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-11-18T03:38:27Z",
    "updated_at": "2015-11-18T03:38:27Z",
    "author_association": "CONTRIBUTOR",
    "body": "Ok after playing around with some ideas and watching the test failures, I think this should be done as two PR's.\n\nIn the first PR, I'd like to just tighten up our use of `np.allclose`, because it's way too loose right now. In that PR, I'm going to ignore the fact that `mean` shouldn't downcast at all, because that's really a separate issue. Currently `_possibly_downcast_to_dtype` is used in quite a few places and the result can be rather staggering with the current default args for `np.allclose`.\n\nIn the second PR, I'd like to look at remove downcasting entirely from operations where it doesn't make sense. Certainly `mean` is one of those, but there may be others as well.\n\nDoes that approach make sense?\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/157595314",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11199#issuecomment-157595314",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11199",
    "id": 157595314,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NzU5NTMxNA==",
    "user": {
      "login": "shoyer",
      "id": 1217238,
      "node_id": "MDQ6VXNlcjEyMTcyMzg=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1217238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shoyer",
      "html_url": "https://github.com/shoyer",
      "followers_url": "https://api.github.com/users/shoyer/followers",
      "following_url": "https://api.github.com/users/shoyer/following{/other_user}",
      "gists_url": "https://api.github.com/users/shoyer/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shoyer/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shoyer/subscriptions",
      "organizations_url": "https://api.github.com/users/shoyer/orgs",
      "repos_url": "https://api.github.com/users/shoyer/repos",
      "events_url": "https://api.github.com/users/shoyer/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shoyer/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-11-18T03:39:11Z",
    "updated_at": "2015-11-18T03:39:11Z",
    "author_association": "MEMBER",
    "body": "Yep, seems reasonable to me.\n\nOn Tue, Nov 17, 2015 at 7:38 PM, Chris Reynolds notifications@github.com\nwrote:\n\n> Ok after playing around with some ideas and watching the test failures, I\n> think this should be done as two PR's.\n> \n> In the first PR, I'd like to just tighten up our use of np.allclose,\n> because it's way too loose right now. In that PR, I'm going to ignore the\n> fact that mean shouldn't downcast at all, because that's really a\n> separate issue. Currently _possibly_downcast_to_dtype is used in quite a\n> few places and the result can be rather staggering with the current default\n> args for np.allclose.\n> \n> In the second PR, I'd like to look at remove downcasting entirely from\n> operations where it doesn't make sense. Certainly mean is one of those,\n> but there may be others as well.\n> \n> Does that approach make sense?\n> \n> â€”\n> Reply to this email directly or view it on GitHub\n> https://github.com/pydata/pandas/issues/11199#issuecomment-157594937.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/157596974",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11199#issuecomment-157596974",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11199",
    "id": 157596974,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NzU5Njk3NA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-11-18T03:43:16Z",
    "updated_at": "2015-11-18T03:43:16Z",
    "author_association": "CONTRIBUTOR",
    "body": "sure \n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/305168260",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11199#issuecomment-305168260",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11199",
    "id": 305168260,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwNTE2ODI2MA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-05-31T11:55:51Z",
    "updated_at": "2017-05-31T11:55:51Z",
    "author_association": "CONTRIBUTOR",
    "body": "https://github.com/pandas-dev/pandas/pull/16549 should fix this.\r\n\r\nif someone wants to do a test.\r\n\r\ncc @gfyoung "
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/307616711",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11199#issuecomment-307616711",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11199",
    "id": 307616711,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwNzYxNjcxMQ==",
    "user": {
      "login": "gfyoung",
      "id": 9273653,
      "node_id": "MDQ6VXNlcjkyNzM2NTM=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/9273653?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gfyoung",
      "html_url": "https://github.com/gfyoung",
      "followers_url": "https://api.github.com/users/gfyoung/followers",
      "following_url": "https://api.github.com/users/gfyoung/following{/other_user}",
      "gists_url": "https://api.github.com/users/gfyoung/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gfyoung/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gfyoung/subscriptions",
      "organizations_url": "https://api.github.com/users/gfyoung/orgs",
      "repos_url": "https://api.github.com/users/gfyoung/repos",
      "events_url": "https://api.github.com/users/gfyoung/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gfyoung/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-06-11T09:25:57Z",
    "updated_at": "2017-06-11T09:25:57Z",
    "author_association": "MEMBER",
    "body": "@jreback : Yep, can do.  This bug is patched but needs a test."
  }
]
