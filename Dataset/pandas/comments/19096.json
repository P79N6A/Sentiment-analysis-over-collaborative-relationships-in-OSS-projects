[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/355657196",
    "html_url": "https://github.com/pandas-dev/pandas/issues/19096#issuecomment-355657196",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/19096",
    "id": 355657196,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NTY1NzE5Ng==",
    "user": {
      "login": "ediphy-azorab",
      "id": 32453740,
      "node_id": "MDQ6VXNlcjMyNDUzNzQw",
      "avatar_url": "https://avatars3.githubusercontent.com/u/32453740?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ediphy-azorab",
      "html_url": "https://github.com/ediphy-azorab",
      "followers_url": "https://api.github.com/users/ediphy-azorab/followers",
      "following_url": "https://api.github.com/users/ediphy-azorab/following{/other_user}",
      "gists_url": "https://api.github.com/users/ediphy-azorab/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ediphy-azorab/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ediphy-azorab/subscriptions",
      "organizations_url": "https://api.github.com/users/ediphy-azorab/orgs",
      "repos_url": "https://api.github.com/users/ediphy-azorab/repos",
      "events_url": "https://api.github.com/users/ediphy-azorab/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ediphy-azorab/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-05T20:28:16Z",
    "updated_at": "2018-01-05T20:28:16Z",
    "author_association": "NONE",
    "body": "Explicitly declaring the `CategoricalDtype` up front is a valid workaround, but only if you know that this is an issue. The silent nature of this seems particularly nasty to me."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/355659285",
    "html_url": "https://github.com/pandas-dev/pandas/issues/19096#issuecomment-355659285",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/19096",
    "id": 355659285,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NTY1OTI4NQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-05T20:38:07Z",
    "updated_at": "2018-01-05T20:38:07Z",
    "author_association": "CONTRIBUTOR",
    "body": "on master, so it appears that the recoding of the unordered categoricals is going awry.\r\n```\r\nIn [2]: from pandas.api.types import CategoricalDtype as CDT\r\n\r\nIn [3]: df1 = pd.DataFrame({'A': pd.Series(list('abc'), dtype=CDT(categories=list('cba'), ordered=False))})\r\n\r\nIn [4]: df2 = pd.DataFrame({'A': pd.Series(list('abc'), dtype=CDT(categories=list('bac'), ordered=False))})\r\n\r\nIn [5]: pd.concat([df1, df2])\r\nOut[5]: \r\n   A\r\n0  a\r\n1  b\r\n2  c\r\n0  b\r\n1  c\r\n2  a\r\n\r\nIn [6]: pd.concat([df1, df2]).dtypes\r\nOut[6]: \r\nA    category\r\ndtype: object\r\n\r\nIn [7]: pd.concat([df1.astype(object), df2.astype(object)]).dtypes\r\nOut[7]: \r\nA    object\r\ndtype: object\r\n\r\nIn [8]: pd.concat([df1.astype(object), df2.astype(object)])\r\nOut[8]: \r\n   A\r\n0  a\r\n1  b\r\n2  c\r\n0  a\r\n1  b\r\n2  c\r\n```"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/355659751",
    "html_url": "https://github.com/pandas-dev/pandas/issues/19096#issuecomment-355659751",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/19096",
    "id": 355659751,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NTY1OTc1MQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-05T20:40:05Z",
    "updated_at": "2018-01-05T20:40:13Z",
    "author_association": "CONTRIBUTOR",
    "body": "@TomAugspurger cc @jschendel  @chris-b1 \r\n  "
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/355663164",
    "html_url": "https://github.com/pandas-dev/pandas/issues/19096#issuecomment-355663164",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/19096",
    "id": 355663164,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NTY2MzE2NA==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-05T20:56:02Z",
    "updated_at": "2018-01-05T20:56:20Z",
    "author_association": "CONTRIBUTOR",
    "body": "Sounds like https://github.com/pandas-dev/pandas/pull/18822, but that doesn't fix it.\r\n\r\nI think the bug is in https://github.com/pandas-dev/pandas/blob/e1888f09630bdd236be1f3ec9577c275d6d67457/pandas/core/dtypes/concat.py#L338, where we assume that `is_dtype_equal(cat1, cat2)` implies they share category <-> code mapping. The fix should look similar to #18822.\r\n  "
  }
]
