[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/329537042",
    "html_url": "https://github.com/pandas-dev/pandas/issues/17520#issuecomment-329537042",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17520",
    "id": 329537042,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyOTUzNzA0Mg==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-14T16:29:34Z",
    "updated_at": "2017-09-14T16:29:34Z",
    "author_association": "CONTRIBUTOR",
    "body": "you cannot run tox with a production installation, you need to clone the project and build, see the [contributing guide](http://pandas.pydata.org/pandas-docs/stable/contributing.html)"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/329550274",
    "html_url": "https://github.com/pandas-dev/pandas/issues/17520#issuecomment-329550274",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17520",
    "id": 329550274,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyOTU1MDI3NA==",
    "user": {
      "login": "cachitas",
      "id": 2321514,
      "node_id": "MDQ6VXNlcjIzMjE1MTQ=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/2321514?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cachitas",
      "html_url": "https://github.com/cachitas",
      "followers_url": "https://api.github.com/users/cachitas/followers",
      "following_url": "https://api.github.com/users/cachitas/following{/other_user}",
      "gists_url": "https://api.github.com/users/cachitas/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cachitas/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cachitas/subscriptions",
      "organizations_url": "https://api.github.com/users/cachitas/orgs",
      "repos_url": "https://api.github.com/users/cachitas/repos",
      "events_url": "https://api.github.com/users/cachitas/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cachitas/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-14T17:19:00Z",
    "updated_at": "2017-09-14T17:19:00Z",
    "author_association": "NONE",
    "body": "Sorry I can't see how that helps.\r\n\r\nI am not testing pandas itself. I am testing my own library with tox, where one of the dependencies is pandas. Previously, for `pandas==0.19.2` my tests would pass, but now with the latest pandas version they all fail when importing pandas, as explained above."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/329575758",
    "html_url": "https://github.com/pandas-dev/pandas/issues/17520#issuecomment-329575758",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17520",
    "id": 329575758,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyOTU3NTc1OA==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-14T18:51:52Z",
    "updated_at": "2017-09-14T18:51:52Z",
    "author_association": "CONTRIBUTOR",
    "body": "Can you post a minimal tox.ini that reproduces this?"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/329583416",
    "html_url": "https://github.com/pandas-dev/pandas/issues/17520#issuecomment-329583416",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17520",
    "id": 329583416,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyOTU4MzQxNg==",
    "user": {
      "login": "cachitas",
      "id": 2321514,
      "node_id": "MDQ6VXNlcjIzMjE1MTQ=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/2321514?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cachitas",
      "html_url": "https://github.com/cachitas",
      "followers_url": "https://api.github.com/users/cachitas/followers",
      "following_url": "https://api.github.com/users/cachitas/following{/other_user}",
      "gists_url": "https://api.github.com/users/cachitas/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cachitas/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cachitas/subscriptions",
      "organizations_url": "https://api.github.com/users/cachitas/orgs",
      "repos_url": "https://api.github.com/users/cachitas/repos",
      "events_url": "https://api.github.com/users/cachitas/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cachitas/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-14T19:22:32Z",
    "updated_at": "2017-09-14T19:22:32Z",
    "author_association": "NONE",
    "body": "I am testing in Python 3.5 and 3.6, all outputting the same errors. Here you have an example just with one case.\r\n\r\n```ini\r\n[tox]\r\nenvlist =\r\n    clean,\r\n    3.5-nocov\r\n\r\n; required by the docker image used\r\nskipsdist = {env:TOXBUILD:false}\r\n\r\n[testenv]\r\nbasepython =\r\n    {clean,check,report,codecov,docs,spell}: python3.5\r\nusedevelop = true\r\nsetenv =\r\n    PYTHONPATH={toxinidir}/tests\r\n    PYTHONUNBUFFERED=yes\r\npassenv =\r\n    *\r\ndeps =\r\n    pytest\r\n    pytest-travis-fold\r\ncommands =\r\n    {posargs:py.test -vv --ignore=mypackage}\r\n\r\n[testenv:clean]\r\ncommands = coverage erase\r\nskip_install = true\r\nusedevelop = false\r\ndeps = coverage\r\n\r\n[testenv:3.5-nocov]\r\nbasepython = {env:TOXPYTHON:python3.5}\r\n```"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/329590916",
    "html_url": "https://github.com/pandas-dev/pandas/issues/17520#issuecomment-329590916",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17520",
    "id": 329590916,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyOTU5MDkxNg==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-14T19:54:08Z",
    "updated_at": "2017-09-14T20:00:38Z",
    "author_association": "CONTRIBUTOR",
    "body": "@cachitas that's not quite minimal. I meant something like\r\n\r\n```\r\n[tox]\r\nenvlist = py36\r\nskipsdist = True\r\n\r\n[testenv]\r\ndeps=\r\n    pytest\r\n    pandas\r\ncommands=pytest\r\n```\r\n\r\nAlong with\r\n\r\n```python\r\n# file: test_foo.py\r\nimport pandas\r\n\r\ndef test_bar():\r\n    pass\r\n```\r\n\r\nHere's the output of `tox`\r\n\r\n```\r\nGLOB sdist-make: /private/tmp/setup.py/setup.py\r\npy36 inst-nodeps: /private/tmp/setup.py/.tox/dist/mypackage-5.2.0.zip\r\npy36 installed: mypackage==5.2.0,numpy==1.13.1,pandas==0.20.3,py==1.4.34,pytest==3.2.2,python-dateutil==2.6.1,pytz==2017.2,six==1.10.0\r\npy36 runtests: PYTHONHASHSEED='3595071649'\r\npy36 runtests: commands[0] | pytest\r\n================================================ test session starts =================================================\r\nplatform darwin -- Python 3.6.2, pytest-3.2.2, py-1.4.34, pluggy-0.4.0\r\nrootdir: /private/tmp/setup.py, inifile:\r\ncollected 1 item\r\n\r\ntest_foo.py .\r\n\r\n============================================== 1 passed in 0.30 seconds ==============================================\r\n______________________________________________________ summary _______________________________________________________\r\n  py36: commands succeeded\r\n  congratulations :)\r\n```\r\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/329617783",
    "html_url": "https://github.com/pandas-dev/pandas/issues/17520#issuecomment-329617783",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17520",
    "id": 329617783,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyOTYxNzc4Mw==",
    "user": {
      "login": "cachitas",
      "id": 2321514,
      "node_id": "MDQ6VXNlcjIzMjE1MTQ=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/2321514?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cachitas",
      "html_url": "https://github.com/cachitas",
      "followers_url": "https://api.github.com/users/cachitas/followers",
      "following_url": "https://api.github.com/users/cachitas/following{/other_user}",
      "gists_url": "https://api.github.com/users/cachitas/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cachitas/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cachitas/subscriptions",
      "organizations_url": "https://api.github.com/users/cachitas/orgs",
      "repos_url": "https://api.github.com/users/cachitas/repos",
      "events_url": "https://api.github.com/users/cachitas/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cachitas/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-14T21:44:48Z",
    "updated_at": "2017-09-15T00:12:34Z",
    "author_association": "NONE",
    "body": "Apologies for not being so concise, but I wanted to illustrate my `tox.ini` without omitting the potential source of the problem.\r\n\r\nI already tested your example in my machine and it is working. \r\n\r\nSo my next step was to build up step by step from that until I get the error reported, and it looks it comes from `pytest`.\r\n\r\nI have the following configuration in `setup.cfg`:\r\n\r\n```ini\r\n[tool:pytest]\r\nnorecursedirs =\r\n\t.git\r\n\t.tox\r\n\t.env\r\n\tdist\r\n\tbuild\r\npython_files =\r\n\ttest_*.py\r\n\t*_test.py\r\n\ttests.py\r\naddopts =\r\n\t-rxEfsw\r\n\t--strict\r\n\t--ignore=docs/conf.py\r\n\t--ignore=setup.py\r\n\t--ignore=.eggs\r\n\t--doctest-modules\r\n\t--doctest-glob=\\*.rst\r\n\t--tb=short\r\n```\r\n\r\nAfter a quick test **I found that the `--strict` option is the root of all evil**. This led me to #16852 and #16680. Apparently you have already tackled this issue. I just complicated it a lot more because I could not identify the problem immediately. Hopefully, this should be fixed in the next bugfix release.\r\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/329624989",
    "html_url": "https://github.com/pandas-dev/pandas/issues/17520#issuecomment-329624989",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17520",
    "id": 329624989,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyOTYyNDk4OQ==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-14T22:21:32Z",
    "updated_at": "2017-09-14T22:21:32Z",
    "author_association": "CONTRIBUTOR",
    "body": "Ahh, yeah that issue has been an unanticipated headache of switching to pytest.\r\n\r\nI think there was a workaround where you add the change in https://github.com/pandas-dev/pandas/pull/16797/files to your conftest.py and pytest won't complain? Otherwise, the next release is in about 2 weeks, and things should work."
  }
]
