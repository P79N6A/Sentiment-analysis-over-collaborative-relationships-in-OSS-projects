[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/40204959",
    "html_url": "https://github.com/pandas-dev/pandas/issues/6868#issuecomment-40204959",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/6868",
    "id": 40204959,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwMjA0OTU5",
    "user": {
      "login": "danielballan",
      "id": 2279598,
      "node_id": "MDQ6VXNlcjIyNzk1OTg=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/2279598?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/danielballan",
      "html_url": "https://github.com/danielballan",
      "followers_url": "https://api.github.com/users/danielballan/followers",
      "following_url": "https://api.github.com/users/danielballan/following{/other_user}",
      "gists_url": "https://api.github.com/users/danielballan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/danielballan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/danielballan/subscriptions",
      "organizations_url": "https://api.github.com/users/danielballan/orgs",
      "repos_url": "https://api.github.com/users/danielballan/repos",
      "events_url": "https://api.github.com/users/danielballan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/danielballan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-04-11T13:47:52Z",
    "updated_at": "2014-04-11T13:47:52Z",
    "author_association": "CONTRIBUTOR",
    "body": "The reason is here:\n\nhttps://github.com/pydata/pandas/blob/master/pandas/algos.pyx#L9\nhttps://github.com/pydata/pandas/blob/master/pandas/algos.pyx#L189\n\nwhere any number below `1e-13` is considered to be below machine precision.\n\nAs you demonstrated, it seems `scipy.stats.rankdata` does not limit itself to this level of precision. From a practical data analysis standpoint, declaring numbers that low \"too close to call\" seems like a reasonable design decision to me, but since pandas' implementation is purportedly a nan-friendly version of `rankdata`, it should at least be documented.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/40288743",
    "html_url": "https://github.com/pandas-dev/pandas/issues/6868#issuecomment-40288743",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/6868",
    "id": 40288743,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwMjg4NzQz",
    "user": {
      "login": "nspies",
      "id": 156719,
      "node_id": "MDQ6VXNlcjE1NjcxOQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/156719?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nspies",
      "html_url": "https://github.com/nspies",
      "followers_url": "https://api.github.com/users/nspies/followers",
      "following_url": "https://api.github.com/users/nspies/following{/other_user}",
      "gists_url": "https://api.github.com/users/nspies/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nspies/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nspies/subscriptions",
      "organizations_url": "https://api.github.com/users/nspies/orgs",
      "repos_url": "https://api.github.com/users/nspies/repos",
      "events_url": "https://api.github.com/users/nspies/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nspies/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-04-12T19:01:59Z",
    "updated_at": "2014-04-12T19:01:59Z",
    "author_association": "CONTRIBUTOR",
    "body": "How about replacing these comparisons with something like what numpy.isclose() does?\n\nhttp://docs.scipy.org/doc/numpy/reference/generated/numpy.isclose.html\n\nFor my particular situation, I could easily roll something that does what I think is correct (in my case a log transformation would work fine), but people should be able to trust the output of the algorithms built-in to pandas -- 1e-13 seems to be very arbitrary and I'm sure I'm not the only person who uses floats that are substantially closer to zero than that. I think using a relative tolerance is much more flexible than the absolute tolerance currently being used here by pandas. (As a note, numpy.testing.assert_allclose uses a relative tolerance of 1e-07 and an absolute tolerance of 0).\n\nOn Apr 11, 2014, at 6:48 AM, Dan Allan wrote:\n\n> The reason is here:\n> \n> https://github.com/pydata/pandas/blob/master/pandas/algos.pyx#L9\n> https://github.com/pydata/pandas/blob/master/pandas/algos.pyx#L189\n> \n> where any number below 1e-13 is considered to be below machine precision.\n> \n> As you demonstrated, it seems scipy.stats.rankdata does not limit itself to this level of precision. From a practical data analysis standpoint, declaring numbers that low \"too close to call\" seems like a reasonable design decision to me, but since pandas' implementation is purportedly a nan-friendly version of rankdata, it should at least be documented.\n> \n> â€”\n> Reply to this email directly or view it on GitHub.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/40415572",
    "html_url": "https://github.com/pandas-dev/pandas/issues/6868#issuecomment-40415572",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/6868",
    "id": 40415572,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNDE1NTcy",
    "user": {
      "login": "danielballan",
      "id": 2279598,
      "node_id": "MDQ6VXNlcjIyNzk1OTg=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/2279598?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/danielballan",
      "html_url": "https://github.com/danielballan",
      "followers_url": "https://api.github.com/users/danielballan/followers",
      "following_url": "https://api.github.com/users/danielballan/following{/other_user}",
      "gists_url": "https://api.github.com/users/danielballan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/danielballan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/danielballan/subscriptions",
      "organizations_url": "https://api.github.com/users/danielballan/orgs",
      "repos_url": "https://api.github.com/users/danielballan/repos",
      "events_url": "https://api.github.com/users/danielballan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/danielballan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-04-14T20:42:43Z",
    "updated_at": "2014-04-14T20:42:43Z",
    "author_association": "CONTRIBUTOR",
    "body": "I agree that would be better. But let's get the blessing of one of the Collaborators before anyone puts effort in.... @jreback?\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/40420565",
    "html_url": "https://github.com/pandas-dev/pandas/issues/6868#issuecomment-40420565",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/6868",
    "id": 40420565,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNDIwNTY1",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-04-14T21:28:21Z",
    "updated_at": "2014-04-14T21:28:21Z",
    "author_association": "CONTRIBUTOR",
    "body": "I don't really know why this was put in the first place\n\nwelcome tey to change and see what happens\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/40422476",
    "html_url": "https://github.com/pandas-dev/pandas/issues/6868#issuecomment-40422476",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/6868",
    "id": 40422476,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNDIyNDc2",
    "user": {
      "login": "jtratner",
      "id": 1598379,
      "node_id": "MDQ6VXNlcjE1OTgzNzk=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1598379?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtratner",
      "html_url": "https://github.com/jtratner",
      "followers_url": "https://api.github.com/users/jtratner/followers",
      "following_url": "https://api.github.com/users/jtratner/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtratner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtratner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtratner/subscriptions",
      "organizations_url": "https://api.github.com/users/jtratner/orgs",
      "repos_url": "https://api.github.com/users/jtratner/repos",
      "events_url": "https://api.github.com/users/jtratner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtratner/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-04-14T21:47:57Z",
    "updated_at": "2014-04-14T21:47:57Z",
    "author_association": "CONTRIBUTOR",
    "body": "we just want to keep performance in mind here. Noah, if you could put\nsomething together and then run some of the bench marks on it (if they\nexist) that would be great :)  If there is a perf impact, we'll figure out\nhow to handle it from there.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/41226862",
    "html_url": "https://github.com/pandas-dev/pandas/issues/6868#issuecomment-41226862",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/6868",
    "id": 41226862,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMjI2ODYy",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-04-23T23:24:50Z",
    "updated_at": "2014-04-23T23:24:50Z",
    "author_association": "CONTRIBUTOR",
    "body": "closed via #6886\n"
  }
]
