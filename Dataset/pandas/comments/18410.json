[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/346227101",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18410#issuecomment-346227101",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18410",
    "id": 346227101,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NjIyNzEwMQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-22T02:46:30Z",
    "updated_at": "2017-11-22T02:46:30Z",
    "author_association": "CONTRIBUTOR",
    "body": "can you make a much simpler example"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/347779186",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18410#issuecomment-347779186",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18410",
    "id": 347779186,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0Nzc3OTE4Ng==",
    "user": {
      "login": "omytea",
      "id": 1098710,
      "node_id": "MDQ6VXNlcjEwOTg3MTA=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1098710?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/omytea",
      "html_url": "https://github.com/omytea",
      "followers_url": "https://api.github.com/users/omytea/followers",
      "following_url": "https://api.github.com/users/omytea/following{/other_user}",
      "gists_url": "https://api.github.com/users/omytea/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/omytea/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/omytea/subscriptions",
      "organizations_url": "https://api.github.com/users/omytea/orgs",
      "repos_url": "https://api.github.com/users/omytea/repos",
      "events_url": "https://api.github.com/users/omytea/events{/privacy}",
      "received_events_url": "https://api.github.com/users/omytea/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-29T07:48:35Z",
    "updated_at": "2017-11-29T07:53:27Z",
    "author_association": "NONE",
    "body": "I am facing a similar issue. If I stored a dataframe with date index into hdfs with table format, the index becomes integers.\r\n```\r\nIn [187]:\r\nfrom datetime import datetime, timedelta\r\ndf = pd.DataFrame(np.random.random((40, 9)), index=[datetime.now().date() - timedelta(days=i) for i in range(40, 0, -1)])\r\nâ€‹\r\ndf.to_hdf('d:/tmp/tmp.h5', 'test', format='table', append=False)\r\ndf.index.dtype, df.index\r\n\r\nOut[187]:\r\n(dtype('O'),\r\n Index([2017-10-20, 2017-10-21, 2017-10-22, 2017-10-23, 2017-10-24, 2017-10-25,\r\n        2017-10-26, 2017-10-27, 2017-10-28, 2017-10-29, 2017-10-30, 2017-10-31,\r\n        2017-11-01, 2017-11-02, 2017-11-03, 2017-11-04, 2017-11-05, 2017-11-06,\r\n        2017-11-07, 2017-11-08, 2017-11-09, 2017-11-10, 2017-11-11, 2017-11-12,\r\n        2017-11-13, 2017-11-14, 2017-11-15, 2017-11-16, 2017-11-17, 2017-11-18,\r\n        2017-11-19, 2017-11-20, 2017-11-21, 2017-11-22, 2017-11-23, 2017-11-24,\r\n        2017-11-25, 2017-11-26, 2017-11-27, 2017-11-28],\r\n       dtype='object'))\r\n\r\nIn [188]:\r\nindex = pd.read_hdf('d:/tmp/tmp.h5', 'test').index\r\nindex.dtype, index\r\n\r\nOut[188]:\r\n(dtype('int64'),\r\n Int64Index([736622, 736623, 736624, 736625, 736626, 736627, 736628, 736629,\r\n             736630, 736631, 736632, 736633, 736634, 736635, 736636, 736637,\r\n             736638, 736639, 736640, 736641, 736642, 736643, 736644, 736645,\r\n             736646, 736647, 736648, 736649, 736650, 736651, 736652, 736653,\r\n             736654, 736655, 736656, 736657, 736658, 736659, 736660, 736661],\r\n            dtype='int64'))\r\n```\r\n\r\nWhile it does not happen with store into fixed format.\r\n\r\n```\r\nIn [191]:\r\ndf.to_hdf('d:/tmp/tmp.h5', 'test', format='fixed')\r\ndf.index.dtype, df.index\r\n\r\nOut[191]:\r\n(dtype('O'),\r\n Index([2017-10-20, 2017-10-21, 2017-10-22, 2017-10-23, 2017-10-24, 2017-10-25,\r\n        2017-10-26, 2017-10-27, 2017-10-28, 2017-10-29, 2017-10-30, 2017-10-31,\r\n        2017-11-01, 2017-11-02, 2017-11-03, 2017-11-04, 2017-11-05, 2017-11-06,\r\n        2017-11-07, 2017-11-08, 2017-11-09, 2017-11-10, 2017-11-11, 2017-11-12,\r\n        2017-11-13, 2017-11-14, 2017-11-15, 2017-11-16, 2017-11-17, 2017-11-18,\r\n        2017-11-19, 2017-11-20, 2017-11-21, 2017-11-22, 2017-11-23, 2017-11-24,\r\n        2017-11-25, 2017-11-26, 2017-11-27, 2017-11-28],\r\n       dtype='object'))\r\n\r\nIn [192]:\r\nindex = pd.read_hdf('d:/tmp/tmp.h5', 'test').index\r\nindex.dtype, index\r\n\r\nOut[192]:\r\n(dtype('O'),\r\n Index([2017-10-20, 2017-10-21, 2017-10-22, 2017-10-23, 2017-10-24, 2017-10-25,\r\n        2017-10-26, 2017-10-27, 2017-10-28, 2017-10-29, 2017-10-30, 2017-10-31,\r\n        2017-11-01, 2017-11-02, 2017-11-03, 2017-11-04, 2017-11-05, 2017-11-06,\r\n        2017-11-07, 2017-11-08, 2017-11-09, 2017-11-10, 2017-11-11, 2017-11-12,\r\n        2017-11-13, 2017-11-14, 2017-11-15, 2017-11-16, 2017-11-17, 2017-11-18,\r\n        2017-11-19, 2017-11-20, 2017-11-21, 2017-11-22, 2017-11-23, 2017-11-24,\r\n        2017-11-25, 2017-11-26, 2017-11-27, 2017-11-28],\r\n       dtype='object'))\r\n```"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/348028670",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18410#issuecomment-348028670",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18410",
    "id": 348028670,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0ODAyODY3MA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-29T23:13:44Z",
    "updated_at": "2017-11-29T23:13:44Z",
    "author_association": "CONTRIBUTOR",
    "body": "@omytea you are using a non-first-class type ``datetime.date``, wrap ``pd.to_datetime`` in the creation of the index and it will work.\r\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/348028759",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18410#issuecomment-348028759",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18410",
    "id": 348028759,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0ODAyODc1OQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-29T23:14:09Z",
    "updated_at": "2017-11-29T23:14:09Z",
    "author_association": "CONTRIBUTOR",
    "body": "closing as not repro"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/348206425",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18410#issuecomment-348206425",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18410",
    "id": 348206425,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0ODIwNjQyNQ==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-30T14:38:14Z",
    "updated_at": "2017-11-30T14:38:14Z",
    "author_association": "MEMBER",
    "body": "so small example, with 0.20.3:\r\n\r\n```\r\nIn [55]: import datetime\r\n\r\nIn [56]: s = pd.Series(5)\r\n\r\nIn [57]: for i in range(5):\r\n    ...:     s[i] = datetime.datetime(2016, 1, i+1)  \r\n    ...:     \r\n\r\nIn [58]: s\r\nOut[58]: \r\n0   2016-01-01\r\n1   2016-01-02\r\n2   2016-01-03\r\n3   2016-01-04\r\n4   2016-01-05\r\ndtype: datetime64[ns]\r\n```\r\n\r\nand with master:\r\n\r\n```\r\nIn [22]: import datetime\r\n\r\nIn [23]: s = pd.Series(5)\r\n\r\nIn [24]: for i in range(5):\r\n    ...:     s[i] = datetime.datetime(2016, 1, i+1)  \r\n\r\nIn [25]: s\r\nOut[25]: \r\n0    2016-01-01 00:00:00\r\n1    1451692800000000000\r\n2    1451779200000000000\r\n3    1451865600000000000\r\n4    1451952000000000000\r\ndtype: object\r\n```"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/348209856",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18410#issuecomment-348209856",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18410",
    "id": 348209856,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0ODIwOTg1Ng==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-30T14:49:38Z",
    "updated_at": "2017-11-30T14:49:38Z",
    "author_association": "MEMBER",
    "body": "So there are two different things under the hood:\r\n\r\n1\\. \"Assigning with extending\" an object series with a datetime / timestamp introduces an int:\r\n\r\n```\r\nIn [63]: s = pd.Series([pd.Timestamp(\"2016-01-01\")])\r\n\r\nIn [64]: s\r\nOut[64]: \r\n0   2016-01-01\r\ndtype: datetime64[ns]\r\n\r\nIn [65]: s[1] = datetime.datetime(2016, 1, 2)\r\n\r\nIn [66]: s\r\nOut[66]: \r\n0   2016-01-01\r\n1   2016-01-02\r\ndtype: datetime64[ns]\r\n\r\nIn [67]: s = pd.Series([pd.Timestamp(\"2016-01-01\")], dtype=object)\r\n\r\nIn [68]: s[1] = datetime.datetime(2016, 1, 2)\r\n\r\nIn [69]: s\r\nOut[69]: \r\n0    2016-01-01 00:00:00\r\n1    1451692800000000000\r\ndtype: object\r\n```\r\n\r\nThe above happens both on master as in 0.20.3 (so didn't change), and looks like a bug to me.\r\n\r\n2\\. When you have a series of int and assign a Timestamp / datetime into it, previously it changed to datetime64 dtype, now it changes to object dtype:\r\n\r\n```\r\nIn [74]: pd.__version__\r\nOut[74]: '0.20.3'\r\n\r\nIn [75]: s = pd.Series([1])\r\n\r\nIn [76]: s\r\nOut[76]: \r\n0    1\r\ndtype: int64\r\n\r\nIn [77]: s[0] = datetime.datetime(2016, 1, 1)\r\n\r\nIn [78]: s\r\nOut[78]: \r\n0   2016-01-01\r\ndtype: datetime64[ns]\r\n```\r\n\r\n```\r\nIn [35]: pd.__version__\r\nOut[35]: '0.22.0.dev0+260.g27931f6.dirty'\r\n\r\nIn [36]: s = pd.Series([1])\r\n\r\nIn [37]: s\r\nOut[37]: \r\n0    1\r\ndtype: int64\r\n\r\nIn [38]: s[0] = datetime.datetime(2016, 1, 1)\r\n\r\nIn [39]: s\r\nOut[39]: \r\n0    2016-01-01 00:00:00\r\ndtype: object\r\n```\r\n\r\nThis change caused the 'bug' to surface. But this change was a good change, as we should not special case Series of length 1 (if you have a longer int series and assign a Timestamp into it, you end up with a mixed object dtype)."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/348210411",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18410#issuecomment-348210411",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18410",
    "id": 348210411,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0ODIxMDQxMQ==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-30T14:51:23Z",
    "updated_at": "2017-11-30T14:51:23Z",
    "author_association": "MEMBER",
    "body": "@bear0330 you can easily fix your code by changing the `ind=pd.Series(len(df))` line to not create an integer series (ideally you should also not iteratively expand a series, but that requires some more changes)"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/348212144",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18410#issuecomment-348212144",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18410",
    "id": 348212144,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0ODIxMjE0NA==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-30T14:56:38Z",
    "updated_at": "2017-11-30T14:56:38Z",
    "author_association": "MEMBER",
    "body": "Updated top post and title to only deal with issue 1\\. from https://github.com/pandas-dev/pandas/issues/18410#issuecomment-348209856"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/390495868",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18410#issuecomment-390495868",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18410",
    "id": 390495868,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MDQ5NTg2OA==",
    "user": {
      "login": "mroeschke",
      "id": 10647082,
      "node_id": "MDQ6VXNlcjEwNjQ3MDgy",
      "avatar_url": "https://avatars0.githubusercontent.com/u/10647082?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mroeschke",
      "html_url": "https://github.com/mroeschke",
      "followers_url": "https://api.github.com/users/mroeschke/followers",
      "following_url": "https://api.github.com/users/mroeschke/following{/other_user}",
      "gists_url": "https://api.github.com/users/mroeschke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mroeschke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mroeschke/subscriptions",
      "organizations_url": "https://api.github.com/users/mroeschke/orgs",
      "repos_url": "https://api.github.com/users/mroeschke/repos",
      "events_url": "https://api.github.com/users/mroeschke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mroeschke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-20T16:56:43Z",
    "updated_at": "2018-05-20T16:56:43Z",
    "author_association": "MEMBER",
    "body": "Closing in favor of #13910, but will reference examples from this issues. "
  }
]
