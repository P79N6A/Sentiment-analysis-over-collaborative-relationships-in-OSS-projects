[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/374877182",
    "html_url": "https://github.com/pandas-dev/pandas/issues/20434#issuecomment-374877182",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/20434",
    "id": 374877182,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3NDg3NzE4Mg==",
    "user": {
      "login": "mcrot",
      "id": 9113541,
      "node_id": "MDQ6VXNlcjkxMTM1NDE=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9113541?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mcrot",
      "html_url": "https://github.com/mcrot",
      "followers_url": "https://api.github.com/users/mcrot/followers",
      "following_url": "https://api.github.com/users/mcrot/following{/other_user}",
      "gists_url": "https://api.github.com/users/mcrot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mcrot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mcrot/subscriptions",
      "organizations_url": "https://api.github.com/users/mcrot/orgs",
      "repos_url": "https://api.github.com/users/mcrot/repos",
      "events_url": "https://api.github.com/users/mcrot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mcrot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-21T09:28:27Z",
    "updated_at": "2018-03-21T09:28:27Z",
    "author_association": "CONTRIBUTOR",
    "body": "This patch fixes the failing tests on my machine:\r\n\r\n ```diff\r\n@@ -10,6 +10,7 @@ import os\r\n import abc\r\n import warnings\r\n import numpy as np\r\n+from http.client import HTTPResponse\r\n \r\n from pandas.core.dtypes.common import (\r\n     is_integer, is_float,\r\n@@ -387,7 +388,9 @@ class ExcelFile(object):\r\n             self.book = io\r\n         elif not isinstance(io, xlrd.Book) and hasattr(io, \"read\"):\r\n             # N.B. xlrd.Book has a read attribute too\r\n-            if hasattr(io, 'seek'):\r\n+            #\r\n+            # http.client.HTTPResponse.seek() -> UnsupportedOperation exception\r\n+            if not isinstance(io, HTTPResponse) and hasattr(io, 'seek'):\r\n                 # GH 19779\r\n                 io.seek(0)\r\n```\r\nDo you think it's sufficient for resolving this issue? I would like to provide my first pull request.\r\n\r\nOr is this issue more related to my setup? I'm completely new to pandas development and I've just prepared a working environment following the guide [Contributing to pandas](https://pandas-docs.github.io/pandas-docs-travis/contributing.html).\r\n\r\nThanks,\r\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/375594941",
    "html_url": "https://github.com/pandas-dev/pandas/issues/20434#issuecomment-375594941",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/20434",
    "id": 375594941,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3NTU5NDk0MQ==",
    "user": {
      "login": "mcrot",
      "id": 9113541,
      "node_id": "MDQ6VXNlcjkxMTM1NDE=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9113541?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mcrot",
      "html_url": "https://github.com/mcrot",
      "followers_url": "https://api.github.com/users/mcrot/followers",
      "following_url": "https://api.github.com/users/mcrot/following{/other_user}",
      "gists_url": "https://api.github.com/users/mcrot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mcrot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mcrot/subscriptions",
      "organizations_url": "https://api.github.com/users/mcrot/orgs",
      "repos_url": "https://api.github.com/users/mcrot/repos",
      "events_url": "https://api.github.com/users/mcrot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mcrot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-23T09:37:18Z",
    "updated_at": "2018-03-23T09:37:18Z",
    "author_association": "CONTRIBUTOR",
    "body": "I can reproduce this issue including the failure of the existing tests on another Linux machine:\r\n\r\n```bash\r\ngit clone https://github.com/mcrot/pandas.git pandas-mcrot\r\ncd pandas-mcrot\r\ngit remote add upstream https://github.com/pandas-dev/pandas.git\r\nconda update conda\r\nconda env create -f ci/environment-dev.yaml\r\nsource activate pandas-dev\r\npython setup.py build_ext --inplace -j 4\r\npython -m pip install -e .\r\nconda install -c defaults -c conda-forge --file=ci/requirements-optional-conda.txt\r\npytest pandas/tests/io/test_excel.py\r\n```\r\n\r\nResult:\r\n```\r\n============================================================================================= test session starts ==============================================================================================\r\nplatform linux -- Python 3.6.4, pytest-3.4.2, py-1.5.2, pluggy-0.6.0\r\nrootdir: /home/roettm/prj/pandas-mcrot, inifile: setup.cfg\r\nplugins: xdist-1.22.1, forked-0.2, cov-2.5.1\r\ncollected 0 items                                                                                                                                                                                              \r\n\r\n========================================================================================= no tests ran in 0.01 seconds =========================================================================================\r\n(pandas-dev) roettm@mail:~/prj/pandas-mcrot$ ^C\r\n(pandas-dev) roettm@mail:~/prj/pandas-mcrot$ python\r\nPython 3.6.4 |Anaconda, Inc.| (default, Mar 13 2018, 01:15:57) \r\n[GCC 7.2.0] on linux\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> import pandas as pd\r\n>>> pd.__version__\r\n'0.23.0.dev0+657.g01882ba'\r\n>>> \r\n(pandas-dev) roettm@mail:~/prj/pandas-mcrot$ pytest pandas/tests/io/test_excel.py \r\n============================================================================================= test session starts ==============================================================================================\r\nplatform linux -- Python 3.6.4, pytest-3.4.2, py-1.5.2, pluggy-0.6.0\r\nrootdir: /home/roettm/prj/pandas-mcrot, inifile: setup.cfg\r\nplugins: xdist-1.22.1, forked-0.2, cov-2.5.1\r\ncollected 549 items                                                                                                                                                                                            \r\n\r\npandas/tests/io/test_excel.py ........................................................................FFF............................................................................................... [ 30%]\r\n........................................................................................................................................................................................................ [ 67%]\r\n..................................s.s.s.s.s.s.s.s.............................................................................................................................x....                      [100%]\r\n\r\n=================================================================================================== FAILURES ===================================================================================================\r\n_________________________________________________________________________________ TestXlrdReader.test_read_from_http_url[.xls] _________________________________________________________________________________\r\n\r\nself = <pandas.tests.io.test_excel.TestXlrdReader object at 0x7f77f80c4eb8>, ext = '.xls'\r\n\r\n    @tm.network\r\n    def test_read_from_http_url(self, ext):\r\n        url = ('https://raw.github.com/pandas-dev/pandas/master/'\r\n               'pandas/tests/io/data/test1' + ext)\r\n>       url_table = read_excel(url)\r\n\r\npandas/tests/io/test_excel.py:562: \r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\npandas/util/_decorators.py:172: in wrapper\r\n    return func(*args, **kwargs)\r\npandas/util/_decorators.py:172: in wrapper\r\n    return func(*args, **kwargs)\r\npandas/io/excel.py:315: in read_excel\r\n    io = ExcelFile(io, engine=engine)\r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n\r\nself = <pandas.io.excel.ExcelFile object at 0x7f77f823fe10>, io = <http.client.HTTPResponse object at 0x7f77f80d52e8>, kwds = {}, err_msg = 'Install xlrd >= 0.9.0 for Excel support'\r\nxlrd = <module 'xlrd' from '/home/roettm/miniconda3/envs/pandas-dev/lib/python3.6/site-packages/xlrd/__init__.py'>, ver = (1, 1), engine = None\r\n\r\n    def __init__(self, io, **kwds):\r\n    \r\n        err_msg = \"Install xlrd >= 0.9.0 for Excel support\"\r\n    \r\n        try:\r\n            import xlrd\r\n        except ImportError:\r\n            raise ImportError(err_msg)\r\n        else:\r\n            ver = tuple(map(int, xlrd.__VERSION__.split(\".\")[:2]))\r\n            if ver < (0, 9):  # pragma: no cover\r\n                raise ImportError(err_msg +\r\n                                  \". Current version \" + xlrd.__VERSION__)\r\n    \r\n        # could be a str, ExcelFile, Book, etc.\r\n        self.io = io\r\n        # Always a string\r\n        self._io = _stringify_path(io)\r\n    \r\n        engine = kwds.pop('engine', None)\r\n    \r\n        if engine is not None and engine != 'xlrd':\r\n            raise ValueError(\"Unknown engine: {engine}\".format(engine=engine))\r\n    \r\n        # If io is a url, want to keep the data as bytes so can't pass\r\n        # to get_filepath_or_buffer()\r\n        if _is_url(self._io):\r\n            io = _urlopen(self._io)\r\n        elif not isinstance(self.io, (ExcelFile, xlrd.Book)):\r\n            io, _, _, _ = get_filepath_or_buffer(self._io)\r\n    \r\n        if engine == 'xlrd' and isinstance(io, xlrd.Book):\r\n            self.book = io\r\n        elif not isinstance(io, xlrd.Book) and hasattr(io, \"read\"):\r\n            # N.B. xlrd.Book has a read attribute too\r\n            if hasattr(io, 'seek'):\r\n                # GH 19779\r\n>               io.seek(0)\r\nE               io.UnsupportedOperation: seek\r\n\r\npandas/io/excel.py:392: UnsupportedOperation\r\n[...similar output for for test parameters 'xlsx' and 'xlsm']\r\n```\r\n\r\nOutput of `pd.show_versions()` on that machine:\r\n<details>\r\n\r\nINSTALLED VERSIONS\r\n------------------\r\ncommit: 01882ba5b4c21b0caf2e6b9279fb01967aa5d650\r\npython: 3.6.4.final.0\r\npython-bits: 64\r\nOS: Linux\r\nOS-release: 2.6.32-042stab127.2\r\nmachine: x86_64\r\nprocessor: x86_64\r\nbyteorder: little\r\nLC_ALL: None\r\nLANG: de_DE.UTF-8\r\nLOCALE: de_DE.UTF-8\r\n\r\npandas: 0.23.0.dev0+657.g01882ba\r\npytest: 3.4.2\r\npip: 9.0.1\r\nsetuptools: 38.5.1\r\nCython: 0.27.3\r\nnumpy: 1.14.2\r\nscipy: 1.0.0\r\npyarrow: 0.9.0\r\nxarray: 0.10.2\r\nIPython: 6.2.1\r\nsphinx: 1.7.1\r\npatsy: 0.5.0\r\ndateutil: 2.7.0\r\npytz: 2018.3\r\nblosc: None\r\nbottleneck: 1.2.1\r\ntables: 3.4.2\r\nnumexpr: 2.6.4\r\nfeather: 0.4.0\r\nmatplotlib: 2.2.2\r\nopenpyxl: 2.5.1\r\nxlrd: 1.1.0\r\nxlwt: 1.3.0\r\nxlsxwriter: 1.0.2\r\nlxml: 4.2.0\r\nbs4: 4.6.0\r\nhtml5lib: 1.0.1\r\nsqlalchemy: 1.2.5\r\npymysql: 0.8.0\r\npsycopg2: None\r\njinja2: 2.10\r\ns3fs: 0.1.3\r\nfastparquet: 0.1.4\r\npandas_gbq: None\r\npandas_datareader: None\r\n</details>"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/376077003",
    "html_url": "https://github.com/pandas-dev/pandas/issues/20434#issuecomment-376077003",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/20434",
    "id": 376077003,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3NjA3NzAwMw==",
    "user": {
      "login": "mcrot",
      "id": 9113541,
      "node_id": "MDQ6VXNlcjkxMTM1NDE=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/9113541?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mcrot",
      "html_url": "https://github.com/mcrot",
      "followers_url": "https://api.github.com/users/mcrot/followers",
      "following_url": "https://api.github.com/users/mcrot/following{/other_user}",
      "gists_url": "https://api.github.com/users/mcrot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mcrot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mcrot/subscriptions",
      "organizations_url": "https://api.github.com/users/mcrot/orgs",
      "repos_url": "https://api.github.com/users/mcrot/repos",
      "events_url": "https://api.github.com/users/mcrot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mcrot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-26T07:52:24Z",
    "updated_at": "2018-03-26T07:52:24Z",
    "author_association": "CONTRIBUTOR",
    "body": "Is there anyone who can confirm this issue? Probably not since there would be a lot failures of test runs because of this. Alternatively, does anyone has an idea what could be wrong with my setup, e.g. do you have a significant difference in the output for `pd.show_versions`? Thanks for any pointers."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/376193527",
    "html_url": "https://github.com/pandas-dev/pandas/issues/20434#issuecomment-376193527",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/20434",
    "id": 376193527,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3NjE5MzUyNw==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-26T14:51:02Z",
    "updated_at": "2018-03-26T14:51:15Z",
    "author_association": "CONTRIBUTOR",
    "body": "I can confirm that I get a failure locally."
  }
]
