[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/123011212",
    "html_url": "https://github.com/pandas-dev/pandas/issues/10641#issuecomment-123011212",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/10641",
    "id": 123011212,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyMzAxMTIxMg==",
    "user": {
      "login": "makmanalp",
      "id": 161965,
      "node_id": "MDQ6VXNlcjE2MTk2NQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/161965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/makmanalp",
      "html_url": "https://github.com/makmanalp",
      "followers_url": "https://api.github.com/users/makmanalp/followers",
      "following_url": "https://api.github.com/users/makmanalp/following{/other_user}",
      "gists_url": "https://api.github.com/users/makmanalp/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/makmanalp/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/makmanalp/subscriptions",
      "organizations_url": "https://api.github.com/users/makmanalp/orgs",
      "repos_url": "https://api.github.com/users/makmanalp/repos",
      "events_url": "https://api.github.com/users/makmanalp/events{/privacy}",
      "received_events_url": "https://api.github.com/users/makmanalp/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-07-20T20:00:40Z",
    "updated_at": "2015-07-20T20:01:09Z",
    "author_association": "CONTRIBUTOR",
    "body": "I don't know if this should go upstream or it should just chunk to work around this (if it's even a memory issue, which I'm now doubting). If it's the latter, I'm not sure how one would determine a reasonable chunking size. For posterity, my workaround was to load the file up in python2, save as hdf, then load the hdf file in python3 - no clue why this works.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/123043408",
    "html_url": "https://github.com/pandas-dev/pandas/issues/10641#issuecomment-123043408",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/10641",
    "id": 123043408,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyMzA0MzQwOA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-07-20T21:19:35Z",
    "updated_at": "2015-07-20T21:19:35Z",
    "author_association": "CONTRIBUTOR",
    "body": "try reading with a `chunksize` when reading a large file\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/123047802",
    "html_url": "https://github.com/pandas-dev/pandas/issues/10641#issuecomment-123047802",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/10641",
    "id": 123047802,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyMzA0NzgwMg==",
    "user": {
      "login": "makmanalp",
      "id": 161965,
      "node_id": "MDQ6VXNlcjE2MTk2NQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/161965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/makmanalp",
      "html_url": "https://github.com/makmanalp",
      "followers_url": "https://api.github.com/users/makmanalp/followers",
      "following_url": "https://api.github.com/users/makmanalp/following{/other_user}",
      "gists_url": "https://api.github.com/users/makmanalp/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/makmanalp/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/makmanalp/subscriptions",
      "organizations_url": "https://api.github.com/users/makmanalp/orgs",
      "repos_url": "https://api.github.com/users/makmanalp/repos",
      "events_url": "https://api.github.com/users/makmanalp/events{/privacy}",
      "received_events_url": "https://api.github.com/users/makmanalp/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-07-20T21:27:47Z",
    "updated_at": "2015-07-20T21:27:47Z",
    "author_association": "CONTRIBUTOR",
    "body": "@jreback well, yeah, of course that works, but this does seem like a regression in that it works with py2 but not py3 for some reason. A 3GB file should have no problem fitting in a computer with 16GB ram, even with all the python data type wrappers, and besides the fact that it fails _immediately_ after you run and not after a long time loading tells me something else is going on.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/123051898",
    "html_url": "https://github.com/pandas-dev/pandas/issues/10641#issuecomment-123051898",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/10641",
    "id": 123051898,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyMzA1MTg5OA==",
    "user": {
      "login": "makmanalp",
      "id": 161965,
      "node_id": "MDQ6VXNlcjE2MTk2NQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/161965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/makmanalp",
      "html_url": "https://github.com/makmanalp",
      "followers_url": "https://api.github.com/users/makmanalp/followers",
      "following_url": "https://api.github.com/users/makmanalp/following{/other_user}",
      "gists_url": "https://api.github.com/users/makmanalp/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/makmanalp/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/makmanalp/subscriptions",
      "organizations_url": "https://api.github.com/users/makmanalp/orgs",
      "repos_url": "https://api.github.com/users/makmanalp/repos",
      "events_url": "https://api.github.com/users/makmanalp/events{/privacy}",
      "received_events_url": "https://api.github.com/users/makmanalp/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-07-20T21:39:42Z",
    "updated_at": "2015-07-20T22:46:41Z",
    "author_association": "CONTRIBUTOR",
    "body": "Bah, I managed to reproduce this on its own:\n\n``` python\nIn [5]: import io\n\nIn [8]: f = io.open(\"/..../output2008_2013.dta\", \"rb\")\n\nIn [9]: f.read()\n---------------------------------------------------------------------------\nOSError                                   Traceback (most recent call last)\n<ipython-input-9-bacd0e0f09a3> in <module>()\n----> 1 f.read()\n\nOSError: [Errno 22] Invalid argument\n\n```\n\nSo this for sure is not on pandas anymore, but until upstream fixes this, py3 users on OSX are stuck, looks like. Also seems like torch is working around this, for example:\n\nhttps://github.com/torch/DEPRECEATED-torch7-distro/commit/40e65934e071e452f194a9d8c0fd740131babefa\n\nand more [here](http://stackoverflow.com/questions/11662960/ioerror-errno-22-invalid-argument-when-reading-writing-large-bytestring) and [here](https://discussions.apple.com/thread/3413139?start=15&tstart=0).\n\nAnd here is a related [python bug](http://bugs.python.org/issue24658).\n\nSo I leave it to your discretion.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/123057699",
    "html_url": "https://github.com/pandas-dev/pandas/issues/10641#issuecomment-123057699",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/10641",
    "id": 123057699,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyMzA1NzY5OQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-07-20T21:54:30Z",
    "updated_at": "2015-07-20T21:54:30Z",
    "author_association": "CONTRIBUTOR",
    "body": "thanks\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/418652012",
    "html_url": "https://github.com/pandas-dev/pandas/issues/10641#issuecomment-418652012",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/10641",
    "id": 418652012,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxODY1MjAxMg==",
    "user": {
      "login": "eXcuvator",
      "id": 972196,
      "node_id": "MDQ6VXNlcjk3MjE5Ng==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/972196?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eXcuvator",
      "html_url": "https://github.com/eXcuvator",
      "followers_url": "https://api.github.com/users/eXcuvator/followers",
      "following_url": "https://api.github.com/users/eXcuvator/following{/other_user}",
      "gists_url": "https://api.github.com/users/eXcuvator/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eXcuvator/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eXcuvator/subscriptions",
      "organizations_url": "https://api.github.com/users/eXcuvator/orgs",
      "repos_url": "https://api.github.com/users/eXcuvator/repos",
      "events_url": "https://api.github.com/users/eXcuvator/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eXcuvator/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-09-05T08:52:08Z",
    "updated_at": "2018-09-05T08:52:08Z",
    "author_association": "NONE",
    "body": "I just faced this bug [3 years after opening] when reading a 3.7GB file into pandas `0.23.4` and python `3.7.0`. Is the only workaround really to use chunk sizes? \r\n\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/Applications/PyCharm.app/Contents/helpers/pydev/pydevd.py\", line 1664, in <module>\r\n    main()\r\n  File \"/Applications/PyCharm.app/Contents/helpers/pydev/pydevd.py\", line 1658, in main\r\n    globals = debugger.run(setup['file'], None, None, is_module)\r\n  File \"/Applications/PyCharm.app/Contents/helpers/pydev/pydevd.py\", line 1068, in run\r\n    pydev_imports.execfile(file, globals, locals)  # execute the script\r\n  File \"/Applications/PyCharm.app/Contents/helpers/pydev/_pydev_imps/_pydev_execfile.py\", line 18, in execfile\r\n    exec(compile(contents+\"\\n\", file, 'exec'), glob, loc)\r\n  File \"/Users/foo/Repositories/occupations/code/motivation_occ.py\", line 221, in <module>\r\n    df = getData()\r\n  File \"/Users/foo/Repositories/occupations/code/motivation_occ.py\", line 32, in getData\r\n    df = pd.read_stata('../data/stata/motivation_occ.dta', convert_categoricals=False)\r\n  File \"/Users/foo/anaconda/envs/myenv3/lib/python3.7/site-packages/pandas/util/_decorators.py\", line 178, in wrapper\r\n    return func(*args, **kwargs)\r\n  File \"/Users/foo/anaconda/envs/myenv3/lib/python3.7/site-packages/pandas/io/stata.py\", line 191, in read_stata\r\n    data = reader.read()\r\n  File \"/Users/foo/anaconda/envs/myenv3/lib/python3.7/site-packages/pandas/util/_decorators.py\", line 178, in wrapper\r\n    return func(*args, **kwargs)\r\n  File \"/Users/foo/anaconda/envs/myenv3/lib/python3.7/site-packages/pandas/io/stata.py\", line 1529, in read\r\n    data = np.frombuffer(self.path_or_buf.read(read_len), dtype=dtype,\r\nOSError: [Errno 22] Invalid argument\r\n```"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/418794483",
    "html_url": "https://github.com/pandas-dev/pandas/issues/10641#issuecomment-418794483",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/10641",
    "id": 418794483,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxODc5NDQ4Mw==",
    "user": {
      "login": "makmanalp",
      "id": 161965,
      "node_id": "MDQ6VXNlcjE2MTk2NQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/161965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/makmanalp",
      "html_url": "https://github.com/makmanalp",
      "followers_url": "https://api.github.com/users/makmanalp/followers",
      "following_url": "https://api.github.com/users/makmanalp/following{/other_user}",
      "gists_url": "https://api.github.com/users/makmanalp/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/makmanalp/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/makmanalp/subscriptions",
      "organizations_url": "https://api.github.com/users/makmanalp/orgs",
      "repos_url": "https://api.github.com/users/makmanalp/repos",
      "events_url": "https://api.github.com/users/makmanalp/events{/privacy}",
      "received_events_url": "https://api.github.com/users/makmanalp/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-09-05T16:27:45Z",
    "updated_at": "2018-09-05T16:27:45Z",
    "author_association": "CONTRIBUTOR",
    "body": "The python ticket seems to be stalled in review: https://bugs.python.org/issue24658 - it's probably a fair question as to whether this will ever get fixed in a reasonable amount of time. Open issue x-ref on numpy: https://github.com/numpy/numpy/issues/3858"
  }
]
