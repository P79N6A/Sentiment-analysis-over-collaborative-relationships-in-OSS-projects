[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/444570846",
    "html_url": "https://github.com/pandas-dev/pandas/pull/24114#issuecomment-444570846",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/24114",
    "id": 444570846,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0NDU3MDg0Ng==",
    "user": {
      "login": "pep8speaks",
      "id": 24736507,
      "node_id": "MDQ6VXNlcjI0NzM2NTA3",
      "avatar_url": "https://avatars1.githubusercontent.com/u/24736507?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pep8speaks",
      "html_url": "https://github.com/pep8speaks",
      "followers_url": "https://api.github.com/users/pep8speaks/followers",
      "following_url": "https://api.github.com/users/pep8speaks/following{/other_user}",
      "gists_url": "https://api.github.com/users/pep8speaks/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pep8speaks/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pep8speaks/subscriptions",
      "organizations_url": "https://api.github.com/users/pep8speaks/orgs",
      "repos_url": "https://api.github.com/users/pep8speaks/repos",
      "events_url": "https://api.github.com/users/pep8speaks/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pep8speaks/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-05T17:27:38Z",
    "updated_at": "2018-12-05T17:27:38Z",
    "author_association": "NONE",
    "body": "Hello @TomAugspurger! Thanks for submitting the PR.\n\n - There are no PEP8 issues in the file [`pandas/core/arrays/base.py`](https://github.com/TomAugspurger/pandas/blob/c4604df534abb15a9127adb887066e35dc16a3cc/pandas/core/arrays/base.py) !\n\n - There are no PEP8 issues in the file [`pandas/core/arrays/categorical.py`](https://github.com/TomAugspurger/pandas/blob/c4604df534abb15a9127adb887066e35dc16a3cc/pandas/core/arrays/categorical.py) !\n\n - There are no PEP8 issues in the file [`pandas/core/arrays/interval.py`](https://github.com/TomAugspurger/pandas/blob/c4604df534abb15a9127adb887066e35dc16a3cc/pandas/core/arrays/interval.py) !\n\n - There are no PEP8 issues in the file [`pandas/core/arrays/period.py`](https://github.com/TomAugspurger/pandas/blob/c4604df534abb15a9127adb887066e35dc16a3cc/pandas/core/arrays/period.py) !\n\n - There are no PEP8 issues in the file [`pandas/core/arrays/sparse.py`](https://github.com/TomAugspurger/pandas/blob/c4604df534abb15a9127adb887066e35dc16a3cc/pandas/core/arrays/sparse.py) !\n\n - There are no PEP8 issues in the file [`pandas/core/dtypes/base.py`](https://github.com/TomAugspurger/pandas/blob/c4604df534abb15a9127adb887066e35dc16a3cc/pandas/core/dtypes/base.py) !\n\n - There are no PEP8 issues in the file [`pandas/core/indexes/category.py`](https://github.com/TomAugspurger/pandas/blob/c4604df534abb15a9127adb887066e35dc16a3cc/pandas/core/indexes/category.py) !\n\n - There are no PEP8 issues in the file [`pandas/core/internals/blocks.py`](https://github.com/TomAugspurger/pandas/blob/c4604df534abb15a9127adb887066e35dc16a3cc/pandas/core/internals/blocks.py) !\n\n - There are no PEP8 issues in the file [`pandas/tests/arrays/categorical/test_indexing.py`](https://github.com/TomAugspurger/pandas/blob/c4604df534abb15a9127adb887066e35dc16a3cc/pandas/tests/arrays/categorical/test_indexing.py) !\n\n - There are no PEP8 issues in the file [`pandas/tests/arrays/interval/test_interval.py`](https://github.com/TomAugspurger/pandas/blob/c4604df534abb15a9127adb887066e35dc16a3cc/pandas/tests/arrays/interval/test_interval.py) !\n\n - There are no PEP8 issues in the file [`pandas/tests/arrays/test_period.py`](https://github.com/TomAugspurger/pandas/blob/c4604df534abb15a9127adb887066e35dc16a3cc/pandas/tests/arrays/test_period.py) !\n\n - There are no PEP8 issues in the file [`pandas/tests/extension/base/methods.py`](https://github.com/TomAugspurger/pandas/blob/c4604df534abb15a9127adb887066e35dc16a3cc/pandas/tests/extension/base/methods.py) !\n\n - There are no PEP8 issues in the file [`pandas/tests/extension/json/test_json.py`](https://github.com/TomAugspurger/pandas/blob/c4604df534abb15a9127adb887066e35dc16a3cc/pandas/tests/extension/json/test_json.py) !\n\n - There are no PEP8 issues in the file [`pandas/tests/extension/test_sparse.py`](https://github.com/TomAugspurger/pandas/blob/c4604df534abb15a9127adb887066e35dc16a3cc/pandas/tests/extension/test_sparse.py) !\n\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/444571081",
    "html_url": "https://github.com/pandas-dev/pandas/pull/24114#issuecomment-444571081",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/24114",
    "id": 444571081,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0NDU3MTA4MQ==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-05T17:28:17Z",
    "updated_at": "2018-12-05T17:28:17Z",
    "author_association": "CONTRIBUTOR",
    "body": "categorical perf:\r\n\r\nmaster\r\n\r\n\r\n```\r\nIn [2]: import pandas as pd\r\n\r\nIn [3]: cser = pd.Series(pd.Categorical(['a', 'b', 'c'] * 10000))\r\n\r\nIn [4]: %timeit cser.where(cser == 'a', 'c')\r\n1.18 ms ± 37.7 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)\r\n```\r\n\r\nPR:\r\n\r\n\r\n```\r\nIn [3]: %timeit cser.where(cser == 'a', 'c')\r\n755 µs ± 23.4 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)\r\n```"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/444593291",
    "html_url": "https://github.com/pandas-dev/pandas/pull/24114#issuecomment-444593291",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/24114",
    "id": 444593291,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0NDU5MzI5MQ==",
    "user": {
      "login": "codecov[bot]",
      "id": 22429695,
      "node_id": "MDM6Qm90MjI0Mjk2OTU=",
      "avatar_url": "https://avatars2.githubusercontent.com/in/254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/codecov%5Bbot%5D",
      "html_url": "https://github.com/apps/codecov",
      "followers_url": "https://api.github.com/users/codecov%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/codecov%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/codecov%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/codecov%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/codecov%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/codecov%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/codecov%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/codecov%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/codecov%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2018-12-05T18:34:17Z",
    "updated_at": "2018-12-05T18:34:17Z",
    "author_association": "NONE",
    "body": "# [Codecov](https://codecov.io/gh/pandas-dev/pandas/pull/24114?src=pr&el=h1) Report\n> Merging [#24114](https://codecov.io/gh/pandas-dev/pandas/pull/24114?src=pr&el=desc) into [master](https://codecov.io/gh/pandas-dev/pandas/commit/9f2c7164ec581a484ee167c04478bf9e4f81426b?src=pr&el=desc) will **increase** coverage by `<.01%`.\n> The diff coverage is `94.44%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/pandas-dev/pandas/pull/24114/graphs/tree.svg?width=650&token=eZ4WkYLtcO&height=150&src=pr)](https://codecov.io/gh/pandas-dev/pandas/pull/24114?src=pr&el=tree)\n\n```diff\n@@            Coverage Diff             @@\n##           master   #24114      +/-   ##\n==========================================\n+ Coverage    92.2%    92.2%   +<.01%     \n==========================================\n  Files         162      162              \n  Lines       51714    51782      +68     \n==========================================\n+ Hits        47682    47747      +65     \n- Misses       4032     4035       +3\n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| #multiple | `90.6% <94.44%> (ø)` | :arrow_up: |\n| #single | `43% <12.5%> (-0.02%)` | :arrow_down: |\n\n| [Impacted Files](https://codecov.io/gh/pandas-dev/pandas/pull/24114?src=pr&el=tree) | Coverage Δ | |\n|---|---|---|\n| [pandas/core/dtypes/base.py](https://codecov.io/gh/pandas-dev/pandas/pull/24114/diff?src=pr&el=tree#diff-cGFuZGFzL2NvcmUvZHR5cGVzL2Jhc2UucHk=) | `100% <100%> (ø)` | :arrow_up: |\n| [pandas/core/arrays/base.py](https://codecov.io/gh/pandas-dev/pandas/pull/24114/diff?src=pr&el=tree#diff-cGFuZGFzL2NvcmUvYXJyYXlzL2Jhc2UucHk=) | `96.81% <100%> (+0.04%)` | :arrow_up: |\n| [pandas/core/indexes/category.py](https://codecov.io/gh/pandas-dev/pandas/pull/24114/diff?src=pr&el=tree#diff-cGFuZGFzL2NvcmUvaW5kZXhlcy9jYXRlZ29yeS5weQ==) | `97.88% <100%> (-0.02%)` | :arrow_down: |\n| [pandas/core/arrays/interval.py](https://codecov.io/gh/pandas-dev/pandas/pull/24114/diff?src=pr&el=tree#diff-cGFuZGFzL2NvcmUvYXJyYXlzL2ludGVydmFsLnB5) | `93.16% <100%> (+0.17%)` | :arrow_up: |\n| [pandas/core/arrays/sparse.py](https://codecov.io/gh/pandas-dev/pandas/pull/24114/diff?src=pr&el=tree#diff-cGFuZGFzL2NvcmUvYXJyYXlzL3NwYXJzZS5weQ==) | `91.92% <88.88%> (-0.04%)` | :arrow_down: |\n| [pandas/core/internals/blocks.py](https://codecov.io/gh/pandas-dev/pandas/pull/24114/diff?src=pr&el=tree#diff-cGFuZGFzL2NvcmUvaW50ZXJuYWxzL2Jsb2Nrcy5weQ==) | `93.71% <93.33%> (-0.01%)` | :arrow_down: |\n| [pandas/core/arrays/categorical.py](https://codecov.io/gh/pandas-dev/pandas/pull/24114/diff?src=pr&el=tree#diff-cGFuZGFzL2NvcmUvYXJyYXlzL2NhdGVnb3JpY2FsLnB5) | `95.37% <94.11%> (-0.03%)` | :arrow_down: |\n| [pandas/core/arrays/period.py](https://codecov.io/gh/pandas-dev/pandas/pull/24114/diff?src=pr&el=tree#diff-cGFuZGFzL2NvcmUvYXJyYXlzL3BlcmlvZC5weQ==) | `98.31% <94.44%> (-0.16%)` | :arrow_down: |\n| [pandas/util/testing.py](https://codecov.io/gh/pandas-dev/pandas/pull/24114/diff?src=pr&el=tree#diff-cGFuZGFzL3V0aWwvdGVzdGluZy5weQ==) | `87.51% <0%> (+0.09%)` | :arrow_up: |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/pandas-dev/pandas/pull/24114?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/pandas-dev/pandas/pull/24114?src=pr&el=footer). Last update [9f2c716...56470c3](https://codecov.io/gh/pandas-dev/pandas/pull/24114?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/444593294",
    "html_url": "https://github.com/pandas-dev/pandas/pull/24114#issuecomment-444593294",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/24114",
    "id": 444593294,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0NDU5MzI5NA==",
    "user": {
      "login": "codecov[bot]",
      "id": 22429695,
      "node_id": "MDM6Qm90MjI0Mjk2OTU=",
      "avatar_url": "https://avatars2.githubusercontent.com/in/254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/codecov%5Bbot%5D",
      "html_url": "https://github.com/apps/codecov",
      "followers_url": "https://api.github.com/users/codecov%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/codecov%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/codecov%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/codecov%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/codecov%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/codecov%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/codecov%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/codecov%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/codecov%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2018-12-05T18:34:17Z",
    "updated_at": "2018-12-05T18:34:17Z",
    "author_association": "NONE",
    "body": "# [Codecov](https://codecov.io/gh/pandas-dev/pandas/pull/24114?src=pr&el=h1) Report\n> Merging [#24114](https://codecov.io/gh/pandas-dev/pandas/pull/24114?src=pr&el=desc) into [master](https://codecov.io/gh/pandas-dev/pandas/commit/9f2c7164ec581a484ee167c04478bf9e4f81426b?src=pr&el=desc) will **increase** coverage by `<.01%`.\n> The diff coverage is `94.44%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/pandas-dev/pandas/pull/24114/graphs/tree.svg?width=650&token=eZ4WkYLtcO&height=150&src=pr)](https://codecov.io/gh/pandas-dev/pandas/pull/24114?src=pr&el=tree)\n\n```diff\n@@            Coverage Diff             @@\n##           master   #24114      +/-   ##\n==========================================\n+ Coverage    92.2%    92.2%   +<.01%     \n==========================================\n  Files         162      162              \n  Lines       51714    51782      +68     \n==========================================\n+ Hits        47682    47747      +65     \n- Misses       4032     4035       +3\n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| #multiple | `90.6% <94.44%> (ø)` | :arrow_up: |\n| #single | `43% <12.5%> (-0.02%)` | :arrow_down: |\n\n| [Impacted Files](https://codecov.io/gh/pandas-dev/pandas/pull/24114?src=pr&el=tree) | Coverage Δ | |\n|---|---|---|\n| [pandas/core/dtypes/base.py](https://codecov.io/gh/pandas-dev/pandas/pull/24114/diff?src=pr&el=tree#diff-cGFuZGFzL2NvcmUvZHR5cGVzL2Jhc2UucHk=) | `100% <100%> (ø)` | :arrow_up: |\n| [pandas/core/arrays/base.py](https://codecov.io/gh/pandas-dev/pandas/pull/24114/diff?src=pr&el=tree#diff-cGFuZGFzL2NvcmUvYXJyYXlzL2Jhc2UucHk=) | `96.81% <100%> (+0.04%)` | :arrow_up: |\n| [pandas/core/indexes/category.py](https://codecov.io/gh/pandas-dev/pandas/pull/24114/diff?src=pr&el=tree#diff-cGFuZGFzL2NvcmUvaW5kZXhlcy9jYXRlZ29yeS5weQ==) | `97.88% <100%> (-0.02%)` | :arrow_down: |\n| [pandas/core/arrays/interval.py](https://codecov.io/gh/pandas-dev/pandas/pull/24114/diff?src=pr&el=tree#diff-cGFuZGFzL2NvcmUvYXJyYXlzL2ludGVydmFsLnB5) | `93.16% <100%> (+0.17%)` | :arrow_up: |\n| [pandas/core/arrays/sparse.py](https://codecov.io/gh/pandas-dev/pandas/pull/24114/diff?src=pr&el=tree#diff-cGFuZGFzL2NvcmUvYXJyYXlzL3NwYXJzZS5weQ==) | `91.92% <88.88%> (-0.04%)` | :arrow_down: |\n| [pandas/core/internals/blocks.py](https://codecov.io/gh/pandas-dev/pandas/pull/24114/diff?src=pr&el=tree#diff-cGFuZGFzL2NvcmUvaW50ZXJuYWxzL2Jsb2Nrcy5weQ==) | `93.71% <93.33%> (-0.01%)` | :arrow_down: |\n| [pandas/core/arrays/categorical.py](https://codecov.io/gh/pandas-dev/pandas/pull/24114/diff?src=pr&el=tree#diff-cGFuZGFzL2NvcmUvYXJyYXlzL2NhdGVnb3JpY2FsLnB5) | `95.37% <94.11%> (-0.03%)` | :arrow_down: |\n| [pandas/core/arrays/period.py](https://codecov.io/gh/pandas-dev/pandas/pull/24114/diff?src=pr&el=tree#diff-cGFuZGFzL2NvcmUvYXJyYXlzL3BlcmlvZC5weQ==) | `98.31% <94.44%> (-0.16%)` | :arrow_down: |\n| [pandas/util/testing.py](https://codecov.io/gh/pandas-dev/pandas/pull/24114/diff?src=pr&el=tree#diff-cGFuZGFzL3V0aWwvdGVzdGluZy5weQ==) | `87.51% <0%> (+0.09%)` | :arrow_up: |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/pandas-dev/pandas/pull/24114?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/pandas-dev/pandas/pull/24114?src=pr&el=footer). Last update [9f2c716...56470c3](https://codecov.io/gh/pandas-dev/pandas/pull/24114?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/444593334",
    "html_url": "https://github.com/pandas-dev/pandas/pull/24114#issuecomment-444593334",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/24114",
    "id": 444593334,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0NDU5MzMzNA==",
    "user": {
      "login": "codecov[bot]",
      "id": 22429695,
      "node_id": "MDM6Qm90MjI0Mjk2OTU=",
      "avatar_url": "https://avatars2.githubusercontent.com/in/254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/codecov%5Bbot%5D",
      "html_url": "https://github.com/apps/codecov",
      "followers_url": "https://api.github.com/users/codecov%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/codecov%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/codecov%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/codecov%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/codecov%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/codecov%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/codecov%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/codecov%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/codecov%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2018-12-05T18:34:24Z",
    "updated_at": "2018-12-10T14:50:11Z",
    "author_association": "NONE",
    "body": "# [Codecov](https://codecov.io/gh/pandas-dev/pandas/pull/24114?src=pr&el=h1) Report\n> Merging [#24114](https://codecov.io/gh/pandas-dev/pandas/pull/24114?src=pr&el=desc) into [master](https://codecov.io/gh/pandas-dev/pandas/commit/029cde201367827f35ac03779bce476a13c4232e?src=pr&el=desc) will **increase** coverage by `<.01%`.\n> The diff coverage is `97.43%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/pandas-dev/pandas/pull/24114/graphs/tree.svg?width=650&token=eZ4WkYLtcO&height=150&src=pr)](https://codecov.io/gh/pandas-dev/pandas/pull/24114?src=pr&el=tree)\n\n```diff\n@@            Coverage Diff             @@\n##           master   #24114      +/-   ##\n==========================================\n+ Coverage   92.21%   92.21%   +<.01%     \n==========================================\n  Files         162      162              \n  Lines       51723    51761      +38     \n==========================================\n+ Hits        47694    47731      +37     \n- Misses       4029     4030       +1\n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| #multiple | `90.61% <97.43%> (ø)` | :arrow_up: |\n| #single | `43% <7.69%> (-0.03%)` | :arrow_down: |\n\n| [Impacted Files](https://codecov.io/gh/pandas-dev/pandas/pull/24114?src=pr&el=tree) | Coverage Δ | |\n|---|---|---|\n| [pandas/core/arrays/base.py](https://codecov.io/gh/pandas-dev/pandas/pull/24114/diff?src=pr&el=tree#diff-cGFuZGFzL2NvcmUvYXJyYXlzL2Jhc2UucHk=) | `97.41% <ø> (ø)` | :arrow_up: |\n| [pandas/core/indexes/category.py](https://codecov.io/gh/pandas-dev/pandas/pull/24114/diff?src=pr&el=tree#diff-cGFuZGFzL2NvcmUvaW5kZXhlcy9jYXRlZ29yeS5weQ==) | `97.9% <ø> (ø)` | :arrow_up: |\n| [pandas/core/arrays/sparse.py](https://codecov.io/gh/pandas-dev/pandas/pull/24114/diff?src=pr&el=tree#diff-cGFuZGFzL2NvcmUvYXJyYXlzL3NwYXJzZS5weQ==) | `92.08% <ø> (ø)` | :arrow_up: |\n| [pandas/core/internals/blocks.py](https://codecov.io/gh/pandas-dev/pandas/pull/24114/diff?src=pr&el=tree#diff-cGFuZGFzL2NvcmUvaW50ZXJuYWxzL2Jsb2Nrcy5weQ==) | `93.81% <100%> (+0.13%)` | :arrow_up: |\n| [pandas/core/arrays/categorical.py](https://codecov.io/gh/pandas-dev/pandas/pull/24114/diff?src=pr&el=tree#diff-cGFuZGFzL2NvcmUvYXJyYXlzL2NhdGVnb3JpY2FsLnB5) | `95.3% <83.33%> (-0.1%)` | :arrow_down: |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/pandas-dev/pandas/pull/24114?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/pandas-dev/pandas/pull/24114?src=pr&el=footer). Last update [029cde2...539d3cb](https://codecov.io/gh/pandas-dev/pandas/pull/24114?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/444616723",
    "html_url": "https://github.com/pandas-dev/pandas/pull/24114#issuecomment-444616723",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/24114",
    "id": 444616723,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0NDYxNjcyMw==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-05T19:38:35Z",
    "updated_at": "2018-12-05T19:38:35Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hmm I don't like the return dtype depending on the values.\n\nPerhaps we do this with a deprecation warning?\n\nOn Wed, Dec 5, 2018 at 1:30 PM Jeff Reback <notifications@github.com> wrote:\n\n> *@jreback* commented on this pull request.\n> ------------------------------\n>\n> In doc/source/whatsnew/v0.24.0.rst\n> <https://github.com/pandas-dev/pandas/pull/24114#discussion_r239205989>:\n>\n> > @@ -1262,6 +1264,7 @@ Categorical\n>  - In meth:`Series.unstack`, specifying a ``fill_value`` not present in the categories now raises a ``TypeError`` rather than ignoring the ``fill_value`` (:issue:`23284`)\n>  - Bug when resampling :meth:`Dataframe.resample()` and aggregating on categorical data, the categorical dtype was getting lost. (:issue:`23227`)\n>  - Bug in many methods of the ``.str``-accessor, which always failed on calling the ``CategoricalIndex.str`` constructor (:issue:`23555`, :issue:`23556`)\n> +- Bug in :meth:`Series.where` losing the categorical dtype for categorical data (:issue:`24077`)\n>\n> if its in the categories then this should work and return categorical, if\n> its not hen i think coercing to object is ok\n>\n> —\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/pandas-dev/pandas/pull/24114#discussion_r239205989>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/ABQHItYzZZM79tE07IEHNarQnkEaGctNks5u2B6_gaJpZM4ZDPyj>\n> .\n>\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/444907650",
    "html_url": "https://github.com/pandas-dev/pandas/pull/24114#issuecomment-444907650",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/24114",
    "id": 444907650,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0NDkwNzY1MA==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-06T15:20:45Z",
    "updated_at": "2018-12-06T15:20:45Z",
    "author_association": "CONTRIBUTOR",
    "body": "@jorisvandenbossche do you have any objections to adding `ExtensionArray.where` to the interface? Or do the behavior change on `Series[category].where`?"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/444916642",
    "html_url": "https://github.com/pandas-dev/pandas/pull/24114#issuecomment-444916642",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/24114",
    "id": 444916642,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0NDkxNjY0Mg==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-06T15:43:50Z",
    "updated_at": "2018-12-06T15:43:50Z",
    "author_association": "MEMBER",
    "body": "Just for context: how is this different from `eaarray[cond] = other` ?\r\n\r\nThe behaviour change to keep the categorical dtype is certainly fine."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/444918036",
    "html_url": "https://github.com/pandas-dev/pandas/pull/24114#issuecomment-444918036",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/24114",
    "id": 444918036,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0NDkxODAzNg==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-06T15:47:26Z",
    "updated_at": "2018-12-06T15:47:26Z",
    "author_association": "CONTRIBUTOR",
    "body": "I suppose that `np.where` would work on items that don't implement\n`__setitem__`. But other than that they should be identical\nfor 1-d arrays, right?\n\nOn Thu, Dec 6, 2018 at 9:44 AM Joris Van den Bossche <\nnotifications@github.com> wrote:\n\n> Just for context: how is this different from eaarray[cond] = other ?\n>\n> The behaviour change to keep the categorical dtype is certainly fine.\n>\n> —\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/pandas-dev/pandas/pull/24114#issuecomment-444916642>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/ABQHIkP1MIBozQDarm1XFzpLj6LMJeHJks5u2TtCgaJpZM4ZDPyj>\n> .\n>\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/444920085",
    "html_url": "https://github.com/pandas-dev/pandas/pull/24114#issuecomment-444920085",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/24114",
    "id": 444920085,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0NDkyMDA4NQ==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-06T15:52:53Z",
    "updated_at": "2018-12-06T15:52:53Z",
    "author_association": "MEMBER",
    "body": "> But other than that they should be identical for 1-d arrays, right?\r\n\r\nAnd since EAs are 1D, and our internal EAs support setitem, why is the new code needed? Or what in setitem is not working as it should right now? (maybe I am missing some context)"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/444921213",
    "html_url": "https://github.com/pandas-dev/pandas/pull/24114#issuecomment-444921213",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/24114",
    "id": 444921213,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0NDkyMTIxMw==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-06T15:55:38Z",
    "updated_at": "2018-12-06T15:55:38Z",
    "author_association": "CONTRIBUTOR",
    "body": "This came out  of the DatetimeArray refactor. I'll have to take another\nlook at exactly what the failures where. They were pretty deep in the\ninternals.\n\nOn Thu, Dec 6, 2018 at 9:53 AM Joris Van den Bossche <\nnotifications@github.com> wrote:\n\n> But other than that they should be identical for 1-d arrays, right?\n>\n> And since EAs are 1D, and our internal EAs support setitem, why is the new\n> code needed? Or what in setitem is not working as it should right now?\n> (maybe I am missing some context)\n>\n> —\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/pandas-dev/pandas/pull/24114#issuecomment-444920085>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/ABQHInMDbZ9aQt7DQXAVqcteU2aBIjFXks5u2T1ngaJpZM4ZDPyj>\n> .\n>\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/445112946",
    "html_url": "https://github.com/pandas-dev/pandas/pull/24114#issuecomment-445112946",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/24114",
    "id": 445112946,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0NTExMjk0Ng==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-07T03:40:25Z",
    "updated_at": "2018-12-07T03:40:25Z",
    "author_association": "CONTRIBUTOR",
    "body": "On further reflection, I realize that ndarrays don't have a `where` method, so I don't think we should add `ExtensionArray.where`.\r\n\r\nI'll see if setitem on a copy is sufficient."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/445231033",
    "html_url": "https://github.com/pandas-dev/pandas/pull/24114#issuecomment-445231033",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/24114",
    "id": 445231033,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0NTIzMTAzMw==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-07T13:22:04Z",
    "updated_at": "2018-12-07T13:22:04Z",
    "author_association": "CONTRIBUTOR",
    "body": "Updated to use setitem...\r\n\r\nSorry, this kind of grew in scope. I'm going to rebase my datetimearray PR and see which subset is actually needed to fix DTA."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/445313499",
    "html_url": "https://github.com/pandas-dev/pandas/pull/24114#issuecomment-445313499",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/24114",
    "id": 445313499,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0NTMxMzQ5OQ==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-07T17:56:49Z",
    "updated_at": "2018-12-07T18:32:10Z",
    "author_association": "CONTRIBUTOR",
    "body": "> Or what in setitem is not working as it should right now? (maybe I am missing some context)\r\n\r\n@jorisvandenbossche OK, here's some context :) The most immediate failure is mismatched block dimensions / shapes for in `DataFrame.where` for EA (not just DatetimeArray, but that was tested). This uses Categorical\r\n\r\n```python\r\nIn [8]: df = pd.DataFrame({\"A\": pd.Categorical([1, 2, 3])})\r\n\r\nIn [9]: df.where(pd.DataFrame({\"A\": [True, False, True]}))\r\n```\r\n\r\n```pytb\r\n---------------------------------------------------------------------------\r\nValueError                                Traceback (most recent call last)\r\n<ipython-input-9-56dcebf7e672> in <module>\r\n----> 1 df.where(pd.DataFrame({\"A\": [True, False, True]}))\r\n\r\n... \r\n\r\n~/sandbox/pandas/pandas/core/internals/blocks.py in __init__(self, values, placement, ndim)\r\n     84             raise ValueError(\r\n     85                 'Wrong number of items passed {val}, placement implies '\r\n---> 86                 '{mgr}'.format(val=len(self.values), mgr=len(self.mgr_locs)))\r\n     87\r\n     88     def _check_ndim(self, values, ndim):\r\n\r\nValueError: Wrong number of items passed 3, placement implies 1\r\n```\r\n\r\nThe broadcasting is all messed up since the shapes aren't right (we're using `Block.where`).\r\n\r\n```python\r\nipdb> cond\r\narray([[ True],\r\n       [False],\r\n       [ True]])\r\nipdb> values\r\n[1, 2, 3]\r\nCategories (3, int64): [1, 2, 3]\r\nipdb> other\r\nnan\r\n```\r\n\r\nA hacky, but shorter fix is to use the following (this is in Block.where)\r\n\r\n```diff\r\ndiff --git a/pandas/core/internals/blocks.py b/pandas/core/internals/blocks.py\r\nindex 618b9eb12..2356a226d 100644\r\n--- a/pandas/core/internals/blocks.py\r\n+++ b/pandas/core/internals/blocks.py\r\n@@ -1319,12 +1319,20 @@ class Block(PandasObject):\r\n \r\n         values = self.values\r\n         orig_other = other\r\n+        if not self._can_consolidate:\r\n+            transpose = False\r\n+\r\n         if transpose:\r\n             values = values.T\r\n \r\n         other = getattr(other, '_values', getattr(other, 'values', other))\r\n         cond = getattr(cond, 'values', cond)\r\n \r\n+        if not self._can_consolidate:\r\n+            if cond.ndim == 2:\r\n+                assert cond.shape[-1] == 1\r\n+                cond = cond.ravel()\r\n+\r\n         # If the default broadcasting would go in the wrong direction, then\r\n         # explicitly reshape other instead\r\n         if getattr(other, 'ndim', 0) >= 1:\r\n```\r\n\r\nThat fixes most of the issues I was having on the DTA branch. Still running the tests to see if any were re-broken.\r\n(edit: it's slightly more complicated, have to handle reshaping `other` as well, so ~15 more LOC).\r\n\r\n---\r\n\r\nSo, in summary\r\n\r\n1. we need to support EAs in DataFrame.where\r\n2. The diff just above is a hacky way of achieving just that (no more).\r\n3. This PR will still be useful for avoiding the conversion to object (DatetimeTZBlock will avoid it even without this PR, thanks to `_try_coerce_args` coercing datetimes to ints)\r\n\r\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/445382966",
    "html_url": "https://github.com/pandas-dev/pandas/pull/24114#issuecomment-445382966",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/24114",
    "id": 445382966,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0NTM4Mjk2Ng==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-07T22:17:19Z",
    "updated_at": "2018-12-07T22:17:19Z",
    "author_association": "CONTRIBUTOR",
    "body": "Updated. Main outstanding point is whether or not we should create a SparseBlock just for this. I don't have a preference."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/445570080",
    "html_url": "https://github.com/pandas-dev/pandas/pull/24114#issuecomment-445570080",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/24114",
    "id": 445570080,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0NTU3MDA4MA==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-09T20:45:00Z",
    "updated_at": "2018-12-09T20:45:00Z",
    "author_association": "CONTRIBUTOR",
    "body": "Cleaned things up a bit I think."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/445799396",
    "html_url": "https://github.com/pandas-dev/pandas/pull/24114#issuecomment-445799396",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/24114",
    "id": 445799396,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0NTc5OTM5Ng==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-10T12:31:03Z",
    "updated_at": "2018-12-10T12:31:03Z",
    "author_association": "CONTRIBUTOR",
    "body": "All green."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/445844404",
    "html_url": "https://github.com/pandas-dev/pandas/pull/24114#issuecomment-445844404",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/24114",
    "id": 445844404,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0NTg0NDQwNA==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-10T14:57:47Z",
    "updated_at": "2018-12-10T14:57:47Z",
    "author_association": "CONTRIBUTOR",
    "body": "All green."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/445853190",
    "html_url": "https://github.com/pandas-dev/pandas/pull/24114#issuecomment-445853190",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/24114",
    "id": 445853190,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0NTg1MzE5MA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-10T15:21:12Z",
    "updated_at": "2018-12-10T15:21:12Z",
    "author_association": "CONTRIBUTOR",
    "body": "thanks!"
  }
]
