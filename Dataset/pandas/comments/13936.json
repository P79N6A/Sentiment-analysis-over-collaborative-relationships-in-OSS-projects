[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/238277761",
    "html_url": "https://github.com/pandas-dev/pandas/issues/13936#issuecomment-238277761",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13936",
    "id": 238277761,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzODI3Nzc2MQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-08T15:41:31Z",
    "updated_at": "2016-08-08T15:41:31Z",
    "author_association": "CONTRIBUTOR",
    "body": "can you show some specific examples which fail and/or you want to work (in the top section). This will provide some examples / tests cases.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/238331402",
    "html_url": "https://github.com/pandas-dev/pandas/issues/13936#issuecomment-238331402",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13936",
    "id": 238331402,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzODMzMTQwMg==",
    "user": {
      "login": "chrisaycock",
      "id": 453745,
      "node_id": "MDQ6VXNlcjQ1Mzc0NQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/453745?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chrisaycock",
      "html_url": "https://github.com/chrisaycock",
      "followers_url": "https://api.github.com/users/chrisaycock/followers",
      "following_url": "https://api.github.com/users/chrisaycock/following{/other_user}",
      "gists_url": "https://api.github.com/users/chrisaycock/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chrisaycock/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chrisaycock/subscriptions",
      "organizations_url": "https://api.github.com/users/chrisaycock/orgs",
      "repos_url": "https://api.github.com/users/chrisaycock/repos",
      "events_url": "https://api.github.com/users/chrisaycock/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chrisaycock/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-08T18:27:46Z",
    "updated_at": "2016-08-08T18:27:46Z",
    "author_association": "CONTRIBUTOR",
    "body": "### Performance\n\nUsing `merge_asof_noby` from the `join_merge.py` benchmark:\n\n```\nk = merge_asof_noby()\nk.setup()\n```\n\nRuntime of the 64-bit case:\n\n```\nIn [4]: %timeit k.time_merge_asof_noby()\n100 loops, best of 3: 12.4 ms per loop\n```\n\nNow cast to 32-bit:\n\n```\nk.df1.time = np.int32(k.df1.time)\nk.df2.time = np.int32(k.df2.time)\n```\n\nAnd re-run it:\n\n```\nIn [7]: %timeit k.time_merge_asof_noby()\n100 loops, best of 3: 18.6 ms per loop\n```\n\nThe added overhead comes from converting the `time` column back to 64-bit.\n\n---\n\n### Multi-By\n\nLet's say I have these DataFrames:\n\n```\ntrades = pd.DataFrame({\n    'time': pd.to_datetime(['20160525 13:30:00.023',\n                            '20160525 13:30:00.023',\n                            '20160525 13:30:00.046',\n                            '20160525 13:30:00.048',\n                            '20160525 13:30:00.050']),\n    'ticker': ['MSFT', 'MSFT',\n               'GOOG', 'GOOG', 'AAPL'],\n    'exch': ['ARCA', 'NSDQ', 'NSDQ', 'BATS', 'NSDQ'],\n    'price': [51.95, 51.95,\n              720.77, 720.92, 98.00],\n    'quantity': [75, 155,\n                 100, 100, 100]},\n    columns=['time', 'ticker', 'exch',\n             'price', 'quantity'])\n\nquotes = pd.DataFrame({\n    'time': pd.to_datetime(['20160525 13:30:00.023',\n                            '20160525 13:30:00.023',\n                            '20160525 13:30:00.030',\n                            '20160525 13:30:00.041',\n                            '20160525 13:30:00.045',\n                            '20160525 13:30:00.049']),\n    'ticker': ['GOOG', 'MSFT', 'MSFT',\n               'MSFT', 'GOOG', 'AAPL'],\n    'exch': ['BATS', 'NSDQ', 'ARCA', 'ARCA',\n             'NSDQ', 'ARCA'],\n    'bid': [720.51, 51.95, 51.97, 51.99,\n            720.50, 97.99],\n    'ask': [720.92, 51.96, 51.98, 52.00,\n            720.93, 98.01]},\n    columns=['time', 'ticker', 'exch', 'bid', 'ask'])\n```\n\nI want to join by both the ticker symbol and the stock exchange:\n\n```\nIn [80]: trades\nOut[80]: \n                     time ticker  exch   price  quantity\n0 2016-05-25 13:30:00.023   MSFT  ARCA   51.95        75\n1 2016-05-25 13:30:00.023   MSFT  NSDQ   51.95       155\n2 2016-05-25 13:30:00.046   GOOG  NSDQ  720.77       100\n3 2016-05-25 13:30:00.048   GOOG  BATS  720.92       100\n4 2016-05-25 13:30:00.050   AAPL  NSDQ   98.00       100\n\nIn [81]: quotes\nOut[81]: \n                     time ticker  exch     bid     ask\n0 2016-05-25 13:30:00.023   GOOG  BATS  720.51  720.92\n1 2016-05-25 13:30:00.023   MSFT  NSDQ   51.95   51.96\n2 2016-05-25 13:30:00.030   MSFT  ARCA   51.97   51.98\n3 2016-05-25 13:30:00.041   MSFT  ARCA   51.99   52.00\n4 2016-05-25 13:30:00.045   GOOG  NSDQ  720.50  720.93\n5 2016-05-25 13:30:00.049   AAPL  ARCA   97.99   98.01\n\nIn [82]: pd.merge_asof(trades, quotes, on='time', by=['ticker', 'exch'])\nOut[82]: \n                     time ticker  exch   price  quantity     bid     ask\n0 2016-05-25 13:30:00.023   MSFT  ARCA   51.95        75     NaN     NaN\n1 2016-05-25 13:30:00.023   MSFT  NSDQ   51.95       155   51.95   51.96\n2 2016-05-25 13:30:00.046   GOOG  NSDQ  720.77       100  720.50  720.93\n3 2016-05-25 13:30:00.048   GOOG  BATS  720.92       100  720.51  720.92\n4 2016-05-25 13:30:00.050   AAPL  NSDQ   98.00       100     NaN     NaN\n```\n\nI.e., the expected result is:\n\n```\nexpected = pd.DataFrame({\n    'time': pd.to_datetime(['20160525 13:30:00.023',\n                            '20160525 13:30:00.023',\n                            '20160525 13:30:00.046',\n                            '20160525 13:30:00.048',\n                            '20160525 13:30:00.050']),\n    'ticker': ['MSFT', 'MSFT',\n               'GOOG', 'GOOG', 'AAPL'],\n    'exch': ['ARCA', 'NSDQ', 'NSDQ', 'BATS', 'NSDQ'],\n    'price': [51.95, 51.95,\n              720.77, 720.92, 98.00],\n    'quantity': [75, 155,\n                 100, 100, 100],\n    'bid': [np.nan, 51.95, 720.50, 720.51, np.nan],\n    'ask': [np.nan, 51.96, 720.93, 720.92, np.nan]},\n    columns=['time', 'ticker', 'exch',\n             'price', 'quantity', 'bid', 'ask'])\n```\n\nFor the `by` parameter to take an array of column names, the hashing solution must be able to handle more than one object.\n\n---\n\nThese two requests are of low priority right now, so I personally won't be able to get to them right away.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/238331970",
    "html_url": "https://github.com/pandas-dev/pandas/issues/13936#issuecomment-238331970",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13936",
    "id": 238331970,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzODMzMTk3MA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-08T18:29:37Z",
    "updated_at": "2016-08-08T18:29:37Z",
    "author_association": "CONTRIBUTOR",
    "body": "does the 'by' issue work? (and just is somewhat slower)?\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/238332807",
    "html_url": "https://github.com/pandas-dev/pandas/issues/13936#issuecomment-238332807",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13936",
    "id": 238332807,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzODMzMjgwNw==",
    "user": {
      "login": "chrisaycock",
      "id": 453745,
      "node_id": "MDQ6VXNlcjQ1Mzc0NQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/453745?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chrisaycock",
      "html_url": "https://github.com/chrisaycock",
      "followers_url": "https://api.github.com/users/chrisaycock/followers",
      "following_url": "https://api.github.com/users/chrisaycock/following{/other_user}",
      "gists_url": "https://api.github.com/users/chrisaycock/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chrisaycock/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chrisaycock/subscriptions",
      "organizations_url": "https://api.github.com/users/chrisaycock/orgs",
      "repos_url": "https://api.github.com/users/chrisaycock/repos",
      "events_url": "https://api.github.com/users/chrisaycock/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chrisaycock/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-08T18:32:29Z",
    "updated_at": "2016-08-08T18:32:29Z",
    "author_association": "CONTRIBUTOR",
    "body": "@jreback No, the `by` parameter is limited to a scalar right now. Can the `PyObjectHashTable` take tuples?\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/238333740",
    "html_url": "https://github.com/pandas-dev/pandas/issues/13936#issuecomment-238333740",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13936",
    "id": 238333740,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzODMzMzc0MA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-08T18:35:18Z",
    "updated_at": "2016-08-08T18:35:18Z",
    "author_association": "CONTRIBUTOR",
    "body": "yes it can take tuples. normally that is not a good idea, but might work here.\n\nmainly I would like to raise if there is something that is non-sensical (ATM). If it works but is slow that is fine as well.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/238335297",
    "html_url": "https://github.com/pandas-dev/pandas/issues/13936#issuecomment-238335297",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13936",
    "id": 238335297,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzODMzNTI5Nw==",
    "user": {
      "login": "chrisaycock",
      "id": 453745,
      "node_id": "MDQ6VXNlcjQ1Mzc0NQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/453745?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chrisaycock",
      "html_url": "https://github.com/chrisaycock",
      "followers_url": "https://api.github.com/users/chrisaycock/followers",
      "following_url": "https://api.github.com/users/chrisaycock/following{/other_user}",
      "gists_url": "https://api.github.com/users/chrisaycock/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chrisaycock/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chrisaycock/subscriptions",
      "organizations_url": "https://api.github.com/users/chrisaycock/orgs",
      "repos_url": "https://api.github.com/users/chrisaycock/repos",
      "events_url": "https://api.github.com/users/chrisaycock/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chrisaycock/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-08T18:40:32Z",
    "updated_at": "2016-08-08T18:40:32Z",
    "author_association": "CONTRIBUTOR",
    "body": "It raises an error now, yes.\n\n```\nIn [2]: pd.merge_asof(trades, quotes, on='time', by=['ticker', 'exch'])\n...\n\nMergeError: can only asof by a single key\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/238337795",
    "html_url": "https://github.com/pandas-dev/pandas/issues/13936#issuecomment-238337795",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13936",
    "id": 238337795,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzODMzNzc5NQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-08T18:48:33Z",
    "updated_at": "2016-08-08T18:48:33Z",
    "author_association": "CONTRIBUTOR",
    "body": "@chrisaycock perfect. Then good to go for now.\n"
  }
]
