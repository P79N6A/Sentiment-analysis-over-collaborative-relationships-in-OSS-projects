[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/404353257",
    "html_url": "https://github.com/pandas-dev/pandas/issues/21860#issuecomment-404353257",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/21860",
    "id": 404353257,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNDM1MzI1Nw==",
    "user": {
      "login": "gfyoung",
      "id": 9273653,
      "node_id": "MDQ6VXNlcjkyNzM2NTM=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/9273653?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gfyoung",
      "html_url": "https://github.com/gfyoung",
      "followers_url": "https://api.github.com/users/gfyoung/followers",
      "following_url": "https://api.github.com/users/gfyoung/following{/other_user}",
      "gists_url": "https://api.github.com/users/gfyoung/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gfyoung/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gfyoung/subscriptions",
      "organizations_url": "https://api.github.com/users/gfyoung/orgs",
      "repos_url": "https://api.github.com/users/gfyoung/repos",
      "events_url": "https://api.github.com/users/gfyoung/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gfyoung/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-12T00:38:59Z",
    "updated_at": "2018-07-12T00:38:59Z",
    "author_association": "MEMBER",
    "body": "cc @TomAugspurger "
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/404491265",
    "html_url": "https://github.com/pandas-dev/pandas/issues/21860#issuecomment-404491265",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/21860",
    "id": 404491265,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNDQ5MTI2NQ==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-12T12:12:33Z",
    "updated_at": "2018-07-12T12:12:33Z",
    "author_association": "CONTRIBUTOR",
    "body": "@VOMAY haven't looked closely yet. Are you able to narrow the problem down any further? Ideally you'd remove all matplotlib-releated code and just have a simple `DataFrame.plot` that produces the wrong output (if possible)."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/404518251",
    "html_url": "https://github.com/pandas-dev/pandas/issues/21860#issuecomment-404518251",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/21860",
    "id": 404518251,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNDUxODI1MQ==",
    "user": {
      "login": "VOMAY",
      "id": 32896877,
      "node_id": "MDQ6VXNlcjMyODk2ODc3",
      "avatar_url": "https://avatars2.githubusercontent.com/u/32896877?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/VOMAY",
      "html_url": "https://github.com/VOMAY",
      "followers_url": "https://api.github.com/users/VOMAY/followers",
      "following_url": "https://api.github.com/users/VOMAY/following{/other_user}",
      "gists_url": "https://api.github.com/users/VOMAY/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/VOMAY/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/VOMAY/subscriptions",
      "organizations_url": "https://api.github.com/users/VOMAY/orgs",
      "repos_url": "https://api.github.com/users/VOMAY/repos",
      "events_url": "https://api.github.com/users/VOMAY/events{/privacy}",
      "received_events_url": "https://api.github.com/users/VOMAY/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-12T13:48:41Z",
    "updated_at": "2018-07-12T13:51:53Z",
    "author_association": "NONE",
    "body": "@TomAugspurger thanks for responding!\r\nI managed to shorten the code a bit, but the last line in crucial to highlight the error:\r\n![image](https://user-images.githubusercontent.com/32896877/42637186-bfea000a-85ea-11e8-8fd5-755c57903bab.png)\r\n\r\nDoing this i found out a new detail: If you remove the 58122 line from the input file, which will cause a gap in the sequence, the output will be correct:\r\n![image](https://user-images.githubusercontent.com/32896877/42637212-d287c648-85ea-11e8-86e0-b3b399e5c521.png)\r\n\r\n``` python\r\nfrom datetime import datetime\r\n\r\nimport numpy as np\r\nimport matplotlib.pyplot as plt\r\nimport matplotlib as mpl\r\nfrom astropy.time import Time\r\nfrom scipy import stats\r\nimport pandas as pd\r\n\r\nfilename = 'sp3_2018X.daybound'\r\n\r\ndataDt = [('MJD', np.int), ('sec', np.float), ('Const', '<U1'), ('RN', np.int), ('dRadial', np.float), ('dAlong', np.float), ('dCross', np.float)]\r\n \r\ndataInput = np.genfromtxt(filename, skip_header=2, delimiter=[6, 8, 1, 2, 10, 10, 10], dtype=dataDt)\r\nt1 = Time(dataInput['MJD'], scale='utc', format='mjd').datetime\r\n\r\ndfInput = pd.DataFrame(data=dataInput)\r\ndfInput = dfInput.assign(Time=t1)\r\ndfInput = dfInput.drop(['MJD', 'sec'], axis=1)\r\n\r\ndfInput.loc[:,'dRadial'] = dfInput.loc[:,'dRadial'].abs()\r\ndfInput.loc[:,'dAlong']  = dfInput.loc[:,'dAlong'].abs()\r\ndfInput.loc[:,'dCross']  = dfInput.loc[:,'dCross'].abs()\r\n\r\ndateSta = datetime(2018, 1, 1)\r\ndateEnd = datetime(2018, 7, 1)\r\ndfInput = dfInput[(dfInput['Time'] >= dateSta) & (dfInput['Time'] <= dateEnd)]\r\n\r\ndfInput.set_index(['Time', 'Const', 'RN'], inplace=True)\r\ndfInput.sort_index(level=['Time', 'Const', 'RN'], ascending=True, inplace=True)\r\n\r\ndfInput = dfInput[(np.abs(stats.zscore(dfInput)) < 100).all(axis=1)]\r\n\r\ndfSelect = dfInput.loc[(slice(None), 'E', slice(None)), :]\r\n\r\n\r\nfig1, ax1 = plt.subplots()\r\n\r\ndfSelect.xs(('E', 1), level=['Const', 'RN']).dRadial.plot(ax=ax1, xlim=(dateSta, dateEnd))\r\n\r\nax1.xaxis.set_major_formatter(mpl.dates.DateFormatter('%b %y'))\r\n``` "
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/451939224",
    "html_url": "https://github.com/pandas-dev/pandas/issues/21860#issuecomment-451939224",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/21860",
    "id": 451939224,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MTkzOTIyNA==",
    "user": {
      "login": "VOMAY",
      "id": 32896877,
      "node_id": "MDQ6VXNlcjMyODk2ODc3",
      "avatar_url": "https://avatars2.githubusercontent.com/u/32896877?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/VOMAY",
      "html_url": "https://github.com/VOMAY",
      "followers_url": "https://api.github.com/users/VOMAY/followers",
      "following_url": "https://api.github.com/users/VOMAY/following{/other_user}",
      "gists_url": "https://api.github.com/users/VOMAY/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/VOMAY/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/VOMAY/subscriptions",
      "organizations_url": "https://api.github.com/users/VOMAY/orgs",
      "repos_url": "https://api.github.com/users/VOMAY/repos",
      "events_url": "https://api.github.com/users/VOMAY/events{/privacy}",
      "received_events_url": "https://api.github.com/users/VOMAY/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-07T13:45:53Z",
    "updated_at": "2019-01-07T13:45:53Z",
    "author_association": "NONE",
    "body": "Finally, I am starting to understand the issue and found a shorter example. Sorry for the mess before.\r\n\r\nThis piece of codes creates two plots based on the same DataFrame. To only difference is the gap at `df.index[50]`. This gap causes the xticks and xlabels to change. Is this an expected behaviour?\r\nTested up to pandas version 0.23.4\r\n\r\n``` python\r\nimport pandas as pd\r\nimport numpy as np\r\n\r\ntr = pd.date_range(start='1/1/2018', periods=365)\r\nar = np.array(range(0,365))\r\n\r\ndf = pd.DataFrame(data=ar, index = tr)\r\n\r\ndf.plot(linestyle = 'None', marker='x')\r\ndf.drop(df.index[50]).plot(linestyle = 'None', marker='x')\r\n``` \r\n![image](https://user-images.githubusercontent.com/32896877/50771273-67eec980-128a-11e9-9482-c28235ab4d27.png)\r\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/453283174",
    "html_url": "https://github.com/pandas-dev/pandas/issues/21860#issuecomment-453283174",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/21860",
    "id": 453283174,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MzI4MzE3NA==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-10T22:39:58Z",
    "updated_at": "2019-01-10T22:39:58Z",
    "author_association": "CONTRIBUTOR",
    "body": "I suspect then, that it has to do with the handling of regular vs. irregular datetimes.\r\n\r\n```python\r\nIn [19]: df.index.inferred_freq\r\nOut[19]: 'D'\r\n\r\nIn [20]: df.drop(df.index[50]).index.inferred_freq\r\n```\r\n\r\nI'm not sure what the expected behavior is, but that may help if you want to debug further."
  }
]
