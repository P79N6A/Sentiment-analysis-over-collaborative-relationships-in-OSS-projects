[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/285367321",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15630#issuecomment-285367321",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15630",
    "id": 285367321,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NTM2NzMyMQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-09T14:33:50Z",
    "updated_at": "2017-03-09T14:33:50Z",
    "author_association": "CONTRIBUTOR",
    "body": "so all ``pct=True`` does is divide by the nobs, which seems correct for all of the other methods.\r\n```\r\nIn [3]: ts.rank(method='dense')\r\nOut[3]: \r\n0    1.0\r\n1    2.0\r\n2    3.0\r\n3    4.0\r\n4    1.0\r\n5    2.0\r\n6    3.0\r\n7    4.0\r\ndtype: float64\r\n\r\n# this is the result\r\nIn [4]: ts.rank(method='dense')/8\r\nOut[4]: \r\n0    0.125\r\n1    0.250\r\n2    0.375\r\n3    0.500\r\n4    0.125\r\n5    0.250\r\n6    0.375\r\n7    0.500\r\ndtype: float64\r\n```\r\n\r\nyou want something like this I suppose, note that the original definitions are from : https://docs.scipy.org/doc/scipy-0.16.0/reference/generated/scipy.stats.rankdata.html (though scipy doesn't do pct, so I guess this doesn't matter).\r\n```\r\nIn [14]: ts.rank(method='dense')/len(ts.drop_duplicates())\r\nOut[14]: \r\n0    0.25\r\n1    0.50\r\n2    0.75\r\n3    1.00\r\n4    0.25\r\n5    0.50\r\n6    0.75\r\n7    1.00\r\ndtype: float64\r\n```\r\n\r\ncode is here:\r\nhttps://github.com/pandas-dev/pandas/blob/master/pandas/_libs/algos_rank_helper.pxi.in#L201\r\n\r\nif you'd like to see what (if anything) this change would break. (not you cannot directly use ``.drop_duplicates``, you would have to call the cython routine (or maybe better we push ``pct`` calcs higher up in the stack so we *could* call  that routine (I don't think perf is an issue, more about clarity)."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/285367590",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15630#issuecomment-285367590",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15630",
    "id": 285367590,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NTM2NzU5MA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-09T14:34:48Z",
    "updated_at": "2017-03-09T14:34:48Z",
    "author_association": "CONTRIBUTOR",
    "body": "@FXLab91 another option is to not allow ``pct=True`` with dense and let the user decide."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/285367709",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15630#issuecomment-285367709",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15630",
    "id": 285367709,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NTM2NzcwOQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-09T14:35:13Z",
    "updated_at": "2017-03-09T14:35:13Z",
    "author_association": "CONTRIBUTOR",
    "body": "@shoyer any thoughts"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/285410919",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15630#issuecomment-285410919",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15630",
    "id": 285410919,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NTQxMDkxOQ==",
    "user": {
      "login": "shoyer",
      "id": 1217238,
      "node_id": "MDQ6VXNlcjEyMTcyMzg=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1217238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shoyer",
      "html_url": "https://github.com/shoyer",
      "followers_url": "https://api.github.com/users/shoyer/followers",
      "following_url": "https://api.github.com/users/shoyer/following{/other_user}",
      "gists_url": "https://api.github.com/users/shoyer/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shoyer/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shoyer/subscriptions",
      "organizations_url": "https://api.github.com/users/shoyer/orgs",
      "repos_url": "https://api.github.com/users/shoyer/repos",
      "events_url": "https://api.github.com/users/shoyer/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shoyer/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-09T16:55:34Z",
    "updated_at": "2017-03-09T16:55:34Z",
    "author_association": "MEMBER",
    "body": "I agree with @FXLab91 that this is very strange behavior, and I can't see why anyone would want it. So I would be inclined to treat it as a bug and fix it for the next release."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/285519215",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15630#issuecomment-285519215",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15630",
    "id": 285519215,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NTUxOTIxNQ==",
    "user": {
      "login": "dsm054",
      "id": 980054,
      "node_id": "MDQ6VXNlcjk4MDA1NA==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/980054?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dsm054",
      "html_url": "https://github.com/dsm054",
      "followers_url": "https://api.github.com/users/dsm054/followers",
      "following_url": "https://api.github.com/users/dsm054/following{/other_user}",
      "gists_url": "https://api.github.com/users/dsm054/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dsm054/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dsm054/subscriptions",
      "organizations_url": "https://api.github.com/users/dsm054/orgs",
      "repos_url": "https://api.github.com/users/dsm054/repos",
      "events_url": "https://api.github.com/users/dsm054/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dsm054/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-09T23:34:59Z",
    "updated_at": "2017-03-09T23:34:59Z",
    "author_association": "CONTRIBUTOR",
    "body": "Does this suggest we should rethink the pct behaviour of some of the others as well?  Something like [1,2,2] will give the same pct results under both min and dense (1/3, 2/3, 2/3)."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/285526131",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15630#issuecomment-285526131",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15630",
    "id": 285526131,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NTUyNjEzMQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-10T00:04:31Z",
    "updated_at": "2017-03-10T00:04:31Z",
    "author_association": "CONTRIBUTOR",
    "body": "@dsm054 surely!\r\n\r\nyep these are prob not tested at all."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/285542301",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15630#issuecomment-285542301",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15630",
    "id": 285542301,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NTU0MjMwMQ==",
    "user": {
      "login": "rouzazari",
      "id": 11428213,
      "node_id": "MDQ6VXNlcjExNDI4MjEz",
      "avatar_url": "https://avatars2.githubusercontent.com/u/11428213?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rouzazari",
      "html_url": "https://github.com/rouzazari",
      "followers_url": "https://api.github.com/users/rouzazari/followers",
      "following_url": "https://api.github.com/users/rouzazari/following{/other_user}",
      "gists_url": "https://api.github.com/users/rouzazari/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rouzazari/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rouzazari/subscriptions",
      "organizations_url": "https://api.github.com/users/rouzazari/orgs",
      "repos_url": "https://api.github.com/users/rouzazari/repos",
      "events_url": "https://api.github.com/users/rouzazari/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rouzazari/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-10T01:10:03Z",
    "updated_at": "2017-03-10T01:10:03Z",
    "author_association": "CONTRIBUTOR",
    "body": "May be a bit premature but I just worked through a possible solution that only touches `method=dense` and does not require `.drop_duplicates`. Comments and recommendations appreciated."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/292033146",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15630#issuecomment-292033146",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15630",
    "id": 292033146,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5MjAzMzE0Ng==",
    "user": {
      "login": "rouzazari",
      "id": 11428213,
      "node_id": "MDQ6VXNlcjExNDI4MjEz",
      "avatar_url": "https://avatars2.githubusercontent.com/u/11428213?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rouzazari",
      "html_url": "https://github.com/rouzazari",
      "followers_url": "https://api.github.com/users/rouzazari/followers",
      "following_url": "https://api.github.com/users/rouzazari/following{/other_user}",
      "gists_url": "https://api.github.com/users/rouzazari/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rouzazari/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rouzazari/subscriptions",
      "organizations_url": "https://api.github.com/users/rouzazari/orgs",
      "repos_url": "https://api.github.com/users/rouzazari/repos",
      "events_url": "https://api.github.com/users/rouzazari/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rouzazari/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-04-06T00:14:22Z",
    "updated_at": "2017-04-06T00:14:22Z",
    "author_association": "CONTRIBUTOR",
    "body": "Restating @dsm054's question (and asking a few of my own), should all other `method`'s return a \"dense percentage\" on a 100% basis when `pct=True`? \r\n\r\nAs @dsm054 noted, `Series([1,2,2]).max(method='min', pct=True)` will return [1/3, 2/3, 2/3]. Should this return [1/2, 2/2, 2/2]?\r\n\r\nNow if method='max', `Series([1,2,2]).max(method='max', pct=True)` will return [1/3, 3/3, 3/3]. Is that is the desired output or should it again be [1/2, 2/2, 2/2]?\r\n\r\n#15639 will fix the `method='dense'` case, but we need to address other `method`s as well."
  }
]
