[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/391421918",
    "html_url": "https://github.com/pandas-dev/pandas/issues/21151#issuecomment-391421918",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/21151",
    "id": 391421918,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MTQyMTkxOA==",
    "user": {
      "login": "diegogarcilazo",
      "id": 6600840,
      "node_id": "MDQ6VXNlcjY2MDA4NDA=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/6600840?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/diegogarcilazo",
      "html_url": "https://github.com/diegogarcilazo",
      "followers_url": "https://api.github.com/users/diegogarcilazo/followers",
      "following_url": "https://api.github.com/users/diegogarcilazo/following{/other_user}",
      "gists_url": "https://api.github.com/users/diegogarcilazo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/diegogarcilazo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/diegogarcilazo/subscriptions",
      "organizations_url": "https://api.github.com/users/diegogarcilazo/orgs",
      "repos_url": "https://api.github.com/users/diegogarcilazo/repos",
      "events_url": "https://api.github.com/users/diegogarcilazo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/diegogarcilazo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-23T16:55:00Z",
    "updated_at": "2018-05-23T16:55:00Z",
    "author_association": "NONE",
    "body": "it seems to be related to issue #21133"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/391716035",
    "html_url": "https://github.com/pandas-dev/pandas/issues/21151#issuecomment-391716035",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/21151",
    "id": 391716035,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MTcxNjAzNQ==",
    "user": {
      "login": "cwkwong",
      "id": 14267968,
      "node_id": "MDQ6VXNlcjE0MjY3OTY4",
      "avatar_url": "https://avatars0.githubusercontent.com/u/14267968?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cwkwong",
      "html_url": "https://github.com/cwkwong",
      "followers_url": "https://api.github.com/users/cwkwong/followers",
      "following_url": "https://api.github.com/users/cwkwong/following{/other_user}",
      "gists_url": "https://api.github.com/users/cwkwong/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cwkwong/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cwkwong/subscriptions",
      "organizations_url": "https://api.github.com/users/cwkwong/orgs",
      "repos_url": "https://api.github.com/users/cwkwong/repos",
      "events_url": "https://api.github.com/users/cwkwong/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cwkwong/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-24T13:32:50Z",
    "updated_at": "2018-05-24T13:37:37Z",
    "author_association": "NONE",
    "body": "I've also tested the above `groupby()` followed by `first()` and it seems to produce some unexpected results.\r\n\r\nSetup:\r\n```python\r\n>>> s1 = pd.Categorical([np.nan, 'a', np.nan, 'a'], categories=['a', 'b'])\r\n>>> s2 = pd.Series([1,2,3,4])\r\n>>> \r\n>>> df = pd.DataFrame({'s1':s1, 's2':s2})\r\n>>> df\r\n    s1  s2\r\n0  NaN   1\r\n1    a   2\r\n2  NaN   3\r\n3    a   4\r\n```\r\n\r\nComparing results with `observed=False` and `observed=True`:\r\n```python\r\n>>> df.groupby('s1').first()\r\n     s2\r\ns1     \r\na   2.0\r\nb   NaN\r\n\r\n>>> df.groupby('s1', observed=True).first()\r\n      s2\r\ns1      \r\nNaN  2.0\r\na    NaN\r\n```\r\n\r\nWhen `observed=True`, the results is somewhat strange.\r\n* Incorrect `s2=NaN` for `s1=a`. I think should be `s2=2.0` ?\r\n* `NaN` appearing in the `groupby(...).first()` result for `s1`? I would expect no `NaN` under `s1`?\r\n\r\n#### Output of `pd.show_versions()`\r\n\r\n<details>\r\n\r\nINSTALLED VERSIONS\r\n------------------\r\ncommit: None\r\npython: 2.7.13.final.0\r\npython-bits: 64\r\nOS: Darwin\r\nOS-release: 17.5.0\r\nmachine: x86_64\r\nprocessor: i386\r\nbyteorder: little\r\nLC_ALL: None\r\nLANG: en_AU.UTF-8\r\nLOCALE: None.None\r\n\r\npandas: 0.23.0\r\npytest: 3.3.1\r\npip: 9.0.1\r\nsetuptools: 18.2\r\nCython: 0.25.2\r\nnumpy: 1.14.0\r\nscipy: 0.16.0\r\npyarrow: None\r\nxarray: None\r\nIPython: None\r\nsphinx: None\r\npatsy: None\r\ndateutil: 2.7.3\r\npytz: 2014.4\r\nblosc: None\r\nbottleneck: 1.2.0\r\ntables: 3.4.2\r\nnumexpr: 2.6.4\r\nfeather: None\r\nmatplotlib: 1.4.3\r\nopenpyxl: 1.8.6\r\nxlrd: 0.9.3\r\nxlwt: None\r\nxlsxwriter: 0.9.6\r\nlxml: 3.5.0\r\nbs4: None\r\nhtml5lib: None\r\nsqlalchemy: 1.0.9\r\npymysql: None\r\npsycopg2: 2.7.4 (dt dec pq3 ext lo64)\r\njinja2: 2.9.6\r\ns3fs: None\r\nfastparquet: None\r\npandas_gbq: None\r\npandas_datareader: None\r\n\r\n</details>\r\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/456153322",
    "html_url": "https://github.com/pandas-dev/pandas/issues/21151#issuecomment-456153322",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/21151",
    "id": 456153322,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1NjE1MzMyMg==",
    "user": {
      "login": "cgangwar11",
      "id": 17381597,
      "node_id": "MDQ6VXNlcjE3MzgxNTk3",
      "avatar_url": "https://avatars2.githubusercontent.com/u/17381597?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cgangwar11",
      "html_url": "https://github.com/cgangwar11",
      "followers_url": "https://api.github.com/users/cgangwar11/followers",
      "following_url": "https://api.github.com/users/cgangwar11/following{/other_user}",
      "gists_url": "https://api.github.com/users/cgangwar11/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cgangwar11/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cgangwar11/subscriptions",
      "organizations_url": "https://api.github.com/users/cgangwar11/orgs",
      "repos_url": "https://api.github.com/users/cgangwar11/repos",
      "events_url": "https://api.github.com/users/cgangwar11/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cgangwar11/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-21T17:46:38Z",
    "updated_at": "2019-01-21T17:49:06Z",
    "author_association": "CONTRIBUTOR",
    "body": "```python\r\nIn [9]: import pandas as pd  \r\n   ...: s1 = pd.Categorical([np.nan, 'a', np.nan, 'a'], categories=['a', 'b','c']) \r\n   ...: s2 = pd.Series([1,2,3,4]) \r\n   ...: df = pd.DataFrame({'s1':s1, 's2':s2})                                                                    \r\n\r\nIn [10]: df                                                                                                      \r\nOut[10]: \r\n    s1  s2\r\n0  NaN   1\r\n1    a   2\r\n2  NaN   3\r\n3    a   4\r\n\r\nIn [11]: df.groupby('s1').first()                                                                                \r\nOut[11]: \r\n     s2\r\ns1     \r\na   2.0\r\nb   NaN\r\nc   NaN\r\n\r\nIn [12]: df.groupby('s1',observed=True).first()                                                                  \r\nOut[12]: \r\n    s2\r\ns1    \r\na    2\r\n\r\nIn [13]:            \r\n```"
  }
]
