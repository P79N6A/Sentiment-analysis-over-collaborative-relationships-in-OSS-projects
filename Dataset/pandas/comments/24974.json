[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/458196913",
    "html_url": "https://github.com/pandas-dev/pandas/issues/24974#issuecomment-458196913",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/24974",
    "id": 458196913,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1ODE5NjkxMw==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-28T16:19:00Z",
    "updated_at": "2019-01-28T16:19:00Z",
    "author_association": "CONTRIBUTOR",
    "body": "Can you try simplifying your example a bit? I'm having trouble following it.\r\n\r\nPerhaps you can construct the expected output with matplotlib, and describe how pandas' behavior differs?"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/458247196",
    "html_url": "https://github.com/pandas-dev/pandas/issues/24974#issuecomment-458247196",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/24974",
    "id": 458247196,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1ODI0NzE5Ng==",
    "user": {
      "login": "ERIPECH",
      "id": 14799333,
      "node_id": "MDQ6VXNlcjE0Nzk5MzMz",
      "avatar_url": "https://avatars3.githubusercontent.com/u/14799333?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ERIPECH",
      "html_url": "https://github.com/ERIPECH",
      "followers_url": "https://api.github.com/users/ERIPECH/followers",
      "following_url": "https://api.github.com/users/ERIPECH/following{/other_user}",
      "gists_url": "https://api.github.com/users/ERIPECH/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ERIPECH/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ERIPECH/subscriptions",
      "organizations_url": "https://api.github.com/users/ERIPECH/orgs",
      "repos_url": "https://api.github.com/users/ERIPECH/repos",
      "events_url": "https://api.github.com/users/ERIPECH/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ERIPECH/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-28T18:30:13Z",
    "updated_at": "2019-01-28T18:30:13Z",
    "author_association": "NONE",
    "body": "@TomAugspurger - the example is much much much simpler as my real world problem is - and btw this is not any made-up case; its made simple, so that you can reproduce the issue.  And this took me already a lot of work to simplify. If you just compare the results with and without sharex=True (default is False) - you will understand what I mean. "
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/458255608",
    "html_url": "https://github.com/pandas-dev/pandas/issues/24974#issuecomment-458255608",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/24974",
    "id": 458255608,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1ODI1NTYwOA==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-28T18:54:06Z",
    "updated_at": "2019-01-28T18:54:06Z",
    "author_association": "CONTRIBUTOR",
    "body": "Can you post screenshots of the two?"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/458461092",
    "html_url": "https://github.com/pandas-dev/pandas/issues/24974#issuecomment-458461092",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/24974",
    "id": 458461092,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1ODQ2MTA5Mg==",
    "user": {
      "login": "ERIPECH",
      "id": 14799333,
      "node_id": "MDQ6VXNlcjE0Nzk5MzMz",
      "avatar_url": "https://avatars3.githubusercontent.com/u/14799333?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ERIPECH",
      "html_url": "https://github.com/ERIPECH",
      "followers_url": "https://api.github.com/users/ERIPECH/followers",
      "following_url": "https://api.github.com/users/ERIPECH/following{/other_user}",
      "gists_url": "https://api.github.com/users/ERIPECH/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ERIPECH/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ERIPECH/subscriptions",
      "organizations_url": "https://api.github.com/users/ERIPECH/orgs",
      "repos_url": "https://api.github.com/users/ERIPECH/repos",
      "events_url": "https://api.github.com/users/ERIPECH/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ERIPECH/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-29T09:04:48Z",
    "updated_at": "2019-01-29T09:36:38Z",
    "author_association": "NONE",
    "body": "@TomAugspurger - \r\nwith sharex true: https://postimg.cc/9DdbWRdJ\r\nwithout: https://postimg.cc/fJxmX4Vb\r\nDo you now see the difference??"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/458973826",
    "html_url": "https://github.com/pandas-dev/pandas/issues/24974#issuecomment-458973826",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/24974",
    "id": 458973826,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1ODk3MzgyNg==",
    "user": {
      "login": "charlesdong1991",
      "id": 9269816,
      "node_id": "MDQ6VXNlcjkyNjk4MTY=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/9269816?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/charlesdong1991",
      "html_url": "https://github.com/charlesdong1991",
      "followers_url": "https://api.github.com/users/charlesdong1991/followers",
      "following_url": "https://api.github.com/users/charlesdong1991/following{/other_user}",
      "gists_url": "https://api.github.com/users/charlesdong1991/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/charlesdong1991/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/charlesdong1991/subscriptions",
      "organizations_url": "https://api.github.com/users/charlesdong1991/orgs",
      "repos_url": "https://api.github.com/users/charlesdong1991/repos",
      "events_url": "https://api.github.com/users/charlesdong1991/events{/privacy}",
      "received_events_url": "https://api.github.com/users/charlesdong1991/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-30T14:56:55Z",
    "updated_at": "2019-01-30T14:56:55Z",
    "author_association": "CONTRIBUTOR",
    "body": "well, i tried running his code, and agree that the behaviour when sharex=True looks weird.. @TomAugspurger \r\nthe first is when `sharex=False`\r\n<img width=\"607\" alt=\"screen shot 2019-01-30 at 15 53 24\" src=\"https://user-images.githubusercontent.com/9269816/51989423-4f4b8b00-24a7-11e9-8658-d2abc3ee6c72.png\">\r\nthe second is when `sharex=True`\r\n<img width=\"613\" alt=\"screen shot 2019-01-30 at 15 53 50\" src=\"https://user-images.githubusercontent.com/9269816/51989482-743ffe00-24a7-11e9-8e55-033bec591c3f.png\">\r\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/458993372",
    "html_url": "https://github.com/pandas-dev/pandas/issues/24974#issuecomment-458993372",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/24974",
    "id": 458993372,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1ODk5MzM3Mg==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-30T15:46:53Z",
    "updated_at": "2019-01-30T15:46:53Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thanks. Any investigation people can ode is appreciated.\n\nOn Wed, Jan 30, 2019 at 8:57 AM Kaiqi Dong <notifications@github.com> wrote:\n\n> well, i tried running his code, and agree that the behaviour when\n> sharex=True looks weird.. @TomAugspurger\n> <https://github.com/TomAugspurger>\n> the first is when sharex=False\n> [image: screen shot 2019-01-30 at 15 53 24]\n> <https://user-images.githubusercontent.com/9269816/51989423-4f4b8b00-24a7-11e9-8658-d2abc3ee6c72.png>\n> the second is when sharex=True\n> [image: screen shot 2019-01-30 at 15 53 50]\n> <https://user-images.githubusercontent.com/9269816/51989482-743ffe00-24a7-11e9-8e55-033bec591c3f.png>\n>\n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/pandas-dev/pandas/issues/24974#issuecomment-458973826>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/ABQHIqS7XX6IskRHwW87B-kHl1AgeqnTks5vIbK9gaJpZM4aVWdr>\n> .\n>\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/459063763",
    "html_url": "https://github.com/pandas-dev/pandas/issues/24974#issuecomment-459063763",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/24974",
    "id": 459063763,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1OTA2Mzc2Mw==",
    "user": {
      "login": "ImportanceOfBeingErnest",
      "id": 23121882,
      "node_id": "MDQ6VXNlcjIzMTIxODgy",
      "avatar_url": "https://avatars2.githubusercontent.com/u/23121882?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ImportanceOfBeingErnest",
      "html_url": "https://github.com/ImportanceOfBeingErnest",
      "followers_url": "https://api.github.com/users/ImportanceOfBeingErnest/followers",
      "following_url": "https://api.github.com/users/ImportanceOfBeingErnest/following{/other_user}",
      "gists_url": "https://api.github.com/users/ImportanceOfBeingErnest/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ImportanceOfBeingErnest/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ImportanceOfBeingErnest/subscriptions",
      "organizations_url": "https://api.github.com/users/ImportanceOfBeingErnest/orgs",
      "repos_url": "https://api.github.com/users/ImportanceOfBeingErnest/repos",
      "events_url": "https://api.github.com/users/ImportanceOfBeingErnest/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ImportanceOfBeingErnest/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-30T18:53:05Z",
    "updated_at": "2019-01-30T18:53:05Z",
    "author_association": "NONE",
    "body": "I wouldn't worry too much about this. The issue is that pandas bar plots are categorical and that they set the limits for the axes depending on the number of bars. Here, the last plot consists of only one bar, so the limits of the last axes are set accordingly, and due to the sharing, all other axes obey to those limits (They are ~-1..1). The label is also transfered to all axes, since pandas uses a fixed formatter to label the consecutive integer positions of bars and sharing transfers the fixed formatter to all axes.\r\nSo in total the outcome is inherent to how pandas plots bar plots. \r\n\r\nThe question is now, why would one want to share axes with categorical plots? Possibly because same categories are supposed to align accross sublots. Since this cannot be achieved with the way pandas constructs bar plots (using successive integer positions), a different approach is needed anyways. \r\n\r\nYou may easily get the desired outcome using matplotlib directly, replacing `a.plot(kind='bar',ax=axes[k][i])` by `axes[k][i].bar(a.index, a.values)`. This plots the bars numercially at positions given by the index. (in this case it's easy, because the index *is* numeric)\r\n\r\nOtherwise, the most natural solution to this would seem to me to pivot the data as to have one column of data per subplot (missing categories are nan), such that all bars are plotted. In that case the alignment is achieved without the need of sharing axes. \r\n\r\n\r\n### Wishlist item\r\nIf you want you can also construct a wishlist item out of this, namely that pandas bar plots should (allow to) obey categorical dtype such that e.g. if the index is of type `CategoricalDtype(categories=list(range(1,4)), ordered=True)`, the plot would actually show all categories.  In terms of code:\r\n\r\n```\r\nimport pandas as pd\r\nimport matplotlib.pyplot as plt\r\nfrom pandas.api.types import CategoricalDtype\r\n\r\ncat_type = CategoricalDtype(categories=list(range(1,4)), ordered=True)\r\n\r\ndf = pd.DataFrame({\"cat\" :  [1,2,3,3],\r\n                   \"group\" : list(\"ABAB\"),\r\n                   \"value\" : [8,4,6,5]})\r\ndf.cat = df.cat.astype(cat_type)\r\ndf.set_index(\"cat\", inplace=True)\r\n\r\nfig, axs = plt.subplots(ncols=len(df.group.unique()))\r\nfor (n,grp), ax in zip(df.groupby(\"group\"), axs):\r\n    grp.plot.bar(y=\"value\", ax=ax)\r\n\r\nplt.show()\r\n```\r\n\r\nproduces\r\n\r\n![image](https://user-images.githubusercontent.com/23121882/52004674-fa6c3c80-24c7-11e9-8388-754f1a08cdbc.png)\r\n\r\nDesired output would be the same as the above mentionned pivoting solution, \r\n\r\n![image](https://user-images.githubusercontent.com/23121882/52004725-1a036500-24c8-11e9-9dc9-e28582b82bf0.png)\r\n \r\nwhich is produced via\r\n```\r\nimport pandas as pd\r\nimport matplotlib.pyplot as plt\r\nfrom pandas.api.types import CategoricalDtype\r\n\r\ndf = pd.DataFrame({\"cat\" :  [1,2,3,3],\r\n                   \"group\" : list(\"ABAB\"),\r\n                   \"value\" : [8,4,6,5]})\r\n\r\npiv = df.pivot(\"cat\", \"group\", \"value\")\r\n\r\nfig, axs = plt.subplots(ncols=len(piv.columns), sharey=True)\r\nfor col, ax in zip(piv.columns, axs):\r\n    piv[col].plot.bar(ax=ax)\r\n\r\nplt.show()\r\n```\r\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/459258780",
    "html_url": "https://github.com/pandas-dev/pandas/issues/24974#issuecomment-459258780",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/24974",
    "id": 459258780,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1OTI1ODc4MA==",
    "user": {
      "login": "ERIPECH",
      "id": 14799333,
      "node_id": "MDQ6VXNlcjE0Nzk5MzMz",
      "avatar_url": "https://avatars3.githubusercontent.com/u/14799333?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ERIPECH",
      "html_url": "https://github.com/ERIPECH",
      "followers_url": "https://api.github.com/users/ERIPECH/followers",
      "following_url": "https://api.github.com/users/ERIPECH/following{/other_user}",
      "gists_url": "https://api.github.com/users/ERIPECH/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ERIPECH/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ERIPECH/subscriptions",
      "organizations_url": "https://api.github.com/users/ERIPECH/orgs",
      "repos_url": "https://api.github.com/users/ERIPECH/repos",
      "events_url": "https://api.github.com/users/ERIPECH/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ERIPECH/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-31T08:29:46Z",
    "updated_at": "2019-01-31T08:36:43Z",
    "author_association": "NONE",
    "body": "@ImportanceOfBeingErnest thx for your investigation.\r\n\r\nMy point is that sharex is not working the way we would expect. I would highly recommend to fix this. Yes there are reasons why pandas has certain behavior, but if its impractical and limiting and the development team should consider this proposal.\r\n\r\nI think there is no more to say - and I consider closing this issue."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/459310102",
    "html_url": "https://github.com/pandas-dev/pandas/issues/24974#issuecomment-459310102",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/24974",
    "id": 459310102,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1OTMxMDEwMg==",
    "user": {
      "login": "ERIPECH",
      "id": 14799333,
      "node_id": "MDQ6VXNlcjE0Nzk5MzMz",
      "avatar_url": "https://avatars3.githubusercontent.com/u/14799333?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ERIPECH",
      "html_url": "https://github.com/ERIPECH",
      "followers_url": "https://api.github.com/users/ERIPECH/followers",
      "following_url": "https://api.github.com/users/ERIPECH/following{/other_user}",
      "gists_url": "https://api.github.com/users/ERIPECH/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ERIPECH/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ERIPECH/subscriptions",
      "organizations_url": "https://api.github.com/users/ERIPECH/orgs",
      "repos_url": "https://api.github.com/users/ERIPECH/repos",
      "events_url": "https://api.github.com/users/ERIPECH/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ERIPECH/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-31T11:24:50Z",
    "updated_at": "2019-01-31T11:24:50Z",
    "author_association": "NONE",
    "body": "thx to all, ciao"
  }
]
