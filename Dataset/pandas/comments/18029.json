[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/340374871",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18029#issuecomment-340374871",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18029",
    "id": 340374871,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0MDM3NDg3MQ==",
    "user": {
      "login": "linar-jether",
      "id": 11908736,
      "node_id": "MDQ6VXNlcjExOTA4NzM2",
      "avatar_url": "https://avatars0.githubusercontent.com/u/11908736?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/linar-jether",
      "html_url": "https://github.com/linar-jether",
      "followers_url": "https://api.github.com/users/linar-jether/followers",
      "following_url": "https://api.github.com/users/linar-jether/following{/other_user}",
      "gists_url": "https://api.github.com/users/linar-jether/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/linar-jether/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/linar-jether/subscriptions",
      "organizations_url": "https://api.github.com/users/linar-jether/orgs",
      "repos_url": "https://api.github.com/users/linar-jether/repos",
      "events_url": "https://api.github.com/users/linar-jether/events{/privacy}",
      "received_events_url": "https://api.github.com/users/linar-jether/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-30T08:29:43Z",
    "updated_at": "2017-10-30T10:03:05Z",
    "author_association": "NONE",
    "body": "[deleted - see top post]"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/340387805",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18029#issuecomment-340387805",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18029",
    "id": 340387805,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0MDM4NzgwNQ==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-30T09:24:13Z",
    "updated_at": "2017-10-30T09:24:13Z",
    "author_association": "MEMBER",
    "body": "@linar-jether Thanks for the report!\r\n\r\nFirst note: in the just released 0.21.0 release, using `loc` with some non-existant labels will raise a warning and this functionality will be removed in a future version. \r\nIf you want to do that, it points to `reindex` as an alternative:\r\n\r\n```\r\nIn [17]: idx = pd.date_range('2011-01-01', '2017-10-01 00:00:00', freq='h', tz='America/Chicago')\r\n    ...: s = pd.Series(np.random.rand(len(idx)), index=idx)\r\n    ...: i = pd.to_datetime(['2017-09-30 06:00:00', '2017-09-30 23:00:00', '2017-09-30 23:00:00', '2017-10-01 00:00:00',]).tz_localize('America/Chicago')\r\n\r\nIn [18]: i2 = pd.to_datetime(['2017-09-30 06:00:00', '2017-09-30 23:00:00', '2017-09-30 23:00:00', '2017-10-01 00:00:00', '2017-10-01 01:00:00',]).tz_localize('America/Chicago')\r\n\r\nIn [19]: s.loc[i]\r\nOut[19]: \r\n2017-09-30 06:00:00-05:00    0.037572\r\n2017-09-30 23:00:00-05:00    0.771407\r\n2017-09-30 23:00:00-05:00    0.771407\r\n2017-10-01 00:00:00-05:00    0.778859\r\ndtype: float64\r\n\r\nIn [20]: s.loc[i2]\r\n/home/joris/miniconda3/envs/dev/bin/ipython:1: FutureWarning: \r\nPassing list-likes to .loc or [] with any missing label will raise\r\nKeyError in the future, you can use .reindex() as an alternative.\r\n\r\nSee the documentation here:\r\nhttp://pandas.pydata.org/pandas-docs/stable/indexing.html#deprecate-loc-reindex-listlike\r\nOut[20]: \r\n2017-09-30 11:00:00-05:00    0.037572     # <------- still buggy (11:00 instead of 06:00)\r\n2017-10-01 04:00:00-05:00    0.771407\r\n2017-10-01 04:00:00-05:00    0.771407\r\n2017-10-01 05:00:00-05:00    0.778859\r\n2017-10-01 06:00:00-05:00         NaN\r\ndtype: float64\r\n\r\nIn [22]: s.reindex(i)\r\nOut[22]: \r\n2017-09-30 06:00:00-05:00    0.037572\r\n2017-09-30 23:00:00-05:00    0.771407\r\n2017-09-30 23:00:00-05:00    0.771407\r\n2017-10-01 00:00:00-05:00    0.778859\r\ndtype: float64\r\n\r\nIn [23]: s.reindex(i2)\r\nOut[23]: \r\n2017-09-30 06:00:00-05:00    0.037572    # <------ now correct 06:00\r\n2017-09-30 23:00:00-05:00    0.771407\r\n2017-09-30 23:00:00-05:00    0.771407\r\n2017-10-01 00:00:00-05:00    0.778859\r\n2017-10-01 01:00:00-05:00         NaN\r\ndtype: float64\r\n```\r\n\r\nSo the bug in `loc` is still present, but the recommended alternative `reindex` already works correctly.\r\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/340390311",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18029#issuecomment-340390311",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18029",
    "id": 340390311,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0MDM5MDMxMQ==",
    "user": {
      "login": "gfyoung",
      "id": 9273653,
      "node_id": "MDQ6VXNlcjkyNzM2NTM=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/9273653?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gfyoung",
      "html_url": "https://github.com/gfyoung",
      "followers_url": "https://api.github.com/users/gfyoung/followers",
      "following_url": "https://api.github.com/users/gfyoung/following{/other_user}",
      "gists_url": "https://api.github.com/users/gfyoung/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gfyoung/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gfyoung/subscriptions",
      "organizations_url": "https://api.github.com/users/gfyoung/orgs",
      "repos_url": "https://api.github.com/users/gfyoung/repos",
      "events_url": "https://api.github.com/users/gfyoung/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gfyoung/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-30T09:33:49Z",
    "updated_at": "2017-10-30T09:33:49Z",
    "author_association": "MEMBER",
    "body": "@linar-jether : BTW, if you could by any chance present a smaller example to demonstrate the bug, that would be easier for us to read in the future."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/340392174",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18029#issuecomment-340392174",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18029",
    "id": 340392174,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0MDM5MjE3NA==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-30T09:41:15Z",
    "updated_at": "2017-10-30T09:41:15Z",
    "author_association": "MEMBER",
    "body": "@gfyoung the second post (not the top one) already includes a smaller example (it is the one I used in my response). But would be good to update the top post with that for clarity"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/340392456",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18029#issuecomment-340392456",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18029",
    "id": 340392456,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0MDM5MjQ1Ng==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-30T09:42:11Z",
    "updated_at": "2017-10-30T09:42:11Z",
    "author_association": "MEMBER",
    "body": "So given this is deprecated behaviour, I am not sure we should put time into trying to fix this. But, I am trying to think of similar cases where this bug could come up that are not deprecated?"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/340400038",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18029#issuecomment-340400038",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18029",
    "id": 340400038,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0MDQwMDAzOA==",
    "user": {
      "login": "linar-jether",
      "id": 11908736,
      "node_id": "MDQ6VXNlcjExOTA4NzM2",
      "avatar_url": "https://avatars0.githubusercontent.com/u/11908736?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/linar-jether",
      "html_url": "https://github.com/linar-jether",
      "followers_url": "https://api.github.com/users/linar-jether/followers",
      "following_url": "https://api.github.com/users/linar-jether/following{/other_user}",
      "gists_url": "https://api.github.com/users/linar-jether/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/linar-jether/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/linar-jether/subscriptions",
      "organizations_url": "https://api.github.com/users/linar-jether/orgs",
      "repos_url": "https://api.github.com/users/linar-jether/repos",
      "events_url": "https://api.github.com/users/linar-jether/events{/privacy}",
      "received_events_url": "https://api.github.com/users/linar-jether/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-30T10:12:14Z",
    "updated_at": "2017-10-30T10:12:14Z",
    "author_association": "NONE",
    "body": "Thanks for the response @jorisvandenbossche,\r\n\r\nthis bug can easily be overlooked and lead to false results, so maybe even a small patch to raise an exception when using loc with both duplicates and non-existing labels? \r\n\r\n* I've updated the top post with the more concise example"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/340401415",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18029#issuecomment-340401415",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18029",
    "id": 340401415,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0MDQwMTQxNQ==",
    "user": {
      "login": "linar-jether",
      "id": 11908736,
      "node_id": "MDQ6VXNlcjExOTA4NzM2",
      "avatar_url": "https://avatars0.githubusercontent.com/u/11908736?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/linar-jether",
      "html_url": "https://github.com/linar-jether",
      "followers_url": "https://api.github.com/users/linar-jether/followers",
      "following_url": "https://api.github.com/users/linar-jether/following{/other_user}",
      "gists_url": "https://api.github.com/users/linar-jether/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/linar-jether/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/linar-jether/subscriptions",
      "organizations_url": "https://api.github.com/users/linar-jether/orgs",
      "repos_url": "https://api.github.com/users/linar-jether/repos",
      "events_url": "https://api.github.com/users/linar-jether/events{/privacy}",
      "received_events_url": "https://api.github.com/users/linar-jether/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-30T10:18:00Z",
    "updated_at": "2017-10-30T10:18:00Z",
    "author_association": "NONE",
    "body": "And also note that using reindex is not the same as using loc, as reindex will not work when there are duplicates in the source dataframe."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/340408215",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18029#issuecomment-340408215",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18029",
    "id": 340408215,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0MDQwODIxNQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-30T10:47:19Z",
    "updated_at": "2017-10-30T10:47:19Z",
    "author_association": "CONTRIBUTOR",
    "body": "as @jorisvandenbossche points out this already will show a deprecation warning; this will be changed to an exception in 1.0 (after 0.22.0). The 'this can be overlooked' is the reason. \r\n\r\n> And also note that using reindex is not the same as using loc, as reindex will not work when there are duplicates in the source dataframe.\r\n\r\nOf course if you have duplicates in an index, then you are on your own, that behavior is also not directly supported.\r\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/408633690",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18029#issuecomment-408633690",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18029",
    "id": 408633690,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwODYzMzY5MA==",
    "user": {
      "login": "mroeschke",
      "id": 10647082,
      "node_id": "MDQ6VXNlcjEwNjQ3MDgy",
      "avatar_url": "https://avatars0.githubusercontent.com/u/10647082?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mroeschke",
      "html_url": "https://github.com/mroeschke",
      "followers_url": "https://api.github.com/users/mroeschke/followers",
      "following_url": "https://api.github.com/users/mroeschke/following{/other_user}",
      "gists_url": "https://api.github.com/users/mroeschke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mroeschke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mroeschke/subscriptions",
      "organizations_url": "https://api.github.com/users/mroeschke/orgs",
      "repos_url": "https://api.github.com/users/mroeschke/repos",
      "events_url": "https://api.github.com/users/mroeschke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mroeschke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-28T20:42:24Z",
    "updated_at": "2018-07-28T20:42:24Z",
    "author_association": "MEMBER",
    "body": "This behavior looks fixed on master if anyone wants to put up at test.\r\n\r\n```\r\nIn [1]: pd.__version__\r\nOut[1]: '0.24.0.dev0+371.g0b7a08b70'\r\n\r\nIn [3]: s.loc[i]\r\nOut[3]:\r\n2017-09-30 06:00:00-05:00    0.951915\r\n2017-09-30 23:00:00-05:00    0.969771\r\n2017-09-30 23:00:00-05:00    0.969771\r\n2017-10-01 00:00:00-05:00    0.461426\r\ndtype: float64\r\n\r\nIn [4]: s.reindex(i)\r\nOut[4]:\r\n2017-09-30 06:00:00-05:00    0.951915\r\n2017-09-30 23:00:00-05:00    0.969771\r\n2017-09-30 23:00:00-05:00    0.969771\r\n2017-10-01 00:00:00-05:00    0.461426\r\ndtype: float64\r\n\r\nIn [5]: s.loc[i2]\r\n/anaconda3/envs/pandas-dev/bin/ipython:1: FutureWarning:\r\nPassing list-likes to .loc or [] with any missing label will raise\r\nKeyError in the future, you can use .reindex() as an alternative.\r\n\r\nSee the documentation here:\r\nhttps://pandas.pydata.org/pandas-docs/stable/indexing.html#deprecate-loc-reindex-listlike\r\n  #!/anaconda3/envs/pandas-dev/bin/python\r\nOut[5]:\r\n2017-09-30 06:00:00-05:00    0.951915\r\n2017-09-30 23:00:00-05:00    0.969771\r\n2017-09-30 23:00:00-05:00    0.969771\r\n2017-10-01 00:00:00-05:00    0.461426\r\n2017-10-01 01:00:00-05:00         NaN\r\ndtype: float64\r\n\r\nIn [6]: s.reindex(i2)\r\nOut[6]:\r\n2017-09-30 06:00:00-05:00    0.951915\r\n2017-09-30 23:00:00-05:00    0.969771\r\n2017-09-30 23:00:00-05:00    0.969771\r\n2017-10-01 00:00:00-05:00    0.461426\r\n2017-10-01 01:00:00-05:00         NaN\r\ndtype: float64\r\n```"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/409844222",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18029#issuecomment-409844222",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18029",
    "id": 409844222,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwOTg0NDIyMg==",
    "user": {
      "login": "gfyoung",
      "id": 9273653,
      "node_id": "MDQ6VXNlcjkyNzM2NTM=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/9273653?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gfyoung",
      "html_url": "https://github.com/gfyoung",
      "followers_url": "https://api.github.com/users/gfyoung/followers",
      "following_url": "https://api.github.com/users/gfyoung/following{/other_user}",
      "gists_url": "https://api.github.com/users/gfyoung/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gfyoung/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gfyoung/subscriptions",
      "organizations_url": "https://api.github.com/users/gfyoung/orgs",
      "repos_url": "https://api.github.com/users/gfyoung/repos",
      "events_url": "https://api.github.com/users/gfyoung/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gfyoung/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-02T08:12:08Z",
    "updated_at": "2018-08-02T08:12:08Z",
    "author_association": "MEMBER",
    "body": "* The deprecation warning is already tested thanks to #17295.\r\n* No one has come forward with examples for how this deprecation could be \"missed\"\r\n\r\nIn light of those two facts, I'm going to close in fact."
  }
]
