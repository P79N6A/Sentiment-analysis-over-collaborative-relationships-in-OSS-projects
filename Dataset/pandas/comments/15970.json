[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/293075708",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15970#issuecomment-293075708",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15970",
    "id": 293075708,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5MzA3NTcwOA==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-04-10T20:53:54Z",
    "updated_at": "2017-04-10T20:53:54Z",
    "author_association": "CONTRIBUTOR",
    "body": "Can you make a copy pastable example that shows the failure?\r\n\r\n```python\r\nIn [17]: s = pd.Series(np.random.randn(100))\r\n\r\nIn [18]: np.allclose(s.diff(), s.astype('float32').diff(), equal_nan=True)\r\nOut[18]: True\r\n```\r\n\r\nDo you have values in your data that are high-enough precision for the `.astype('float32')` and then diffing to matter?"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/293077038",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15970#issuecomment-293077038",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15970",
    "id": 293077038,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5MzA3NzAzOA==",
    "user": {
      "login": "jonathanstrong",
      "id": 5497186,
      "node_id": "MDQ6VXNlcjU0OTcxODY=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/5497186?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonathanstrong",
      "html_url": "https://github.com/jonathanstrong",
      "followers_url": "https://api.github.com/users/jonathanstrong/followers",
      "following_url": "https://api.github.com/users/jonathanstrong/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonathanstrong/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonathanstrong/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonathanstrong/subscriptions",
      "organizations_url": "https://api.github.com/users/jonathanstrong/orgs",
      "repos_url": "https://api.github.com/users/jonathanstrong/repos",
      "events_url": "https://api.github.com/users/jonathanstrong/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonathanstrong/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-04-10T20:58:40Z",
    "updated_at": "2017-04-10T20:58:40Z",
    "author_association": "NONE",
    "body": "The values are not even in the vicinity: \r\n\r\n```python\r\nnp.allclose(x['time'].diff(), x['time'].astype('float32').diff(), equal_nan=True, atol=1e-1) \r\n# False\r\n\r\npd.Series(x['time'].diff() - x['time'].astype('float32').diff()).describe()\r\n# count    342771.000000\r\n# mean          0.000262\r\n# std          17.174611\r\n# min        -126.999990\r\n# 25%           1.198998\r\n# 50%           1.621628\r\n# 75%           2.596039\r\n# max         117.644048\r\n# Name: time, dtype: float64\r\n```\r\nThe values in the column are timestamps, perhaps could be buffer overflow-related. I can send you a hdf or csv but not sure how w/ this interface. "
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/293081780",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15970#issuecomment-293081780",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15970",
    "id": 293081780,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5MzA4MTc4MA==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-04-10T21:17:24Z",
    "updated_at": "2017-04-10T21:17:24Z",
    "author_association": "CONTRIBUTOR",
    "body": "No need for a file, you should be able to construct an example manually? I'm not even sure how you're `.astype` is working. Does this raise a TypeError for you?\r\n\r\n```python\r\nIn [8]: s = pd.Series(pd.date_range('2017', periods=30))\r\n\r\nIn [9]: s.head()\r\nOut[9]:\r\n0   2017-01-01\r\n1   2017-01-02\r\n2   2017-01-03\r\n3   2017-01-04\r\n4   2017-01-05\r\ndtype: datetime64[ns]\r\n\r\nIn [10]: s.astype('float32')\r\n```\r\n\r\nTimestamps are internally represented as int64s."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/293083336",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15970#issuecomment-293083336",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15970",
    "id": 293083336,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5MzA4MzMzNg==",
    "user": {
      "login": "jonathanstrong",
      "id": 5497186,
      "node_id": "MDQ6VXNlcjU0OTcxODY=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/5497186?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonathanstrong",
      "html_url": "https://github.com/jonathanstrong",
      "followers_url": "https://api.github.com/users/jonathanstrong/followers",
      "following_url": "https://api.github.com/users/jonathanstrong/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonathanstrong/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonathanstrong/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonathanstrong/subscriptions",
      "organizations_url": "https://api.github.com/users/jonathanstrong/orgs",
      "repos_url": "https://api.github.com/users/jonathanstrong/repos",
      "events_url": "https://api.github.com/users/jonathanstrong/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonathanstrong/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-04-10T21:23:45Z",
    "updated_at": "2017-04-10T21:23:45Z",
    "author_association": "NONE",
    "body": "I'm sorry I wasn't clear. They're not pandas timestamps, they're float numbers w/ values that represent seconds from the epoch. The type of the object is just normal float though. "
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/293086573",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15970#issuecomment-293086573",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15970",
    "id": 293086573,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5MzA4NjU3Mw==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-04-10T21:37:16Z",
    "updated_at": "2017-04-10T21:37:16Z",
    "author_association": "CONTRIBUTOR",
    "body": "OK then, see if you can come up with a reproducible example then. This is almost surely going to be a precision issue though. Your example should only be true if the un-differenced versions are close,\r\n\r\n```python\r\nnp.allclose(s, s.astype('float32'), equal_nan=True)\r\n```\r\n\r\nwhich isn't going to be true if you have numbers large / precise enough."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/293095830",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15970#issuecomment-293095830",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15970",
    "id": 293095830,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5MzA5NTgzMA==",
    "user": {
      "login": "jonathanstrong",
      "id": 5497186,
      "node_id": "MDQ6VXNlcjU0OTcxODY=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/5497186?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonathanstrong",
      "html_url": "https://github.com/jonathanstrong",
      "followers_url": "https://api.github.com/users/jonathanstrong/followers",
      "following_url": "https://api.github.com/users/jonathanstrong/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonathanstrong/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonathanstrong/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonathanstrong/subscriptions",
      "organizations_url": "https://api.github.com/users/jonathanstrong/orgs",
      "repos_url": "https://api.github.com/users/jonathanstrong/repos",
      "events_url": "https://api.github.com/users/jonathanstrong/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonathanstrong/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-04-10T22:20:37Z",
    "updated_at": "2017-04-10T22:20:37Z",
    "author_association": "NONE",
    "body": "is it expected behavior for `s.diff() - s.astype('float32').diff()` to have a range of -126-117? I would expect those to fall between 0-1. Trying to replicate w/ simple example but failing. It did happen with two different dataframes, both of which were loaded from hdf files, so I'll have a closer look at the values when I have a sec. "
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/293118701",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15970#issuecomment-293118701",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15970",
    "id": 293118701,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5MzExODcwMQ==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-04-11T00:50:53Z",
    "updated_at": "2017-04-11T00:50:53Z",
    "author_association": "CONTRIBUTOR",
    "body": "I think you can simplify your question; `.diff` doesn't really matter here. *Depending on your data*, when you `.astype('float32')`, you can end up with large values:\r\n\r\n```python\r\nIn [42]: np.random.seed(2)\r\n\r\nIn [43]: s = (np.random.randn(1000)) * 2 ** 32\r\n\r\nIn [44]: (s - s.astype('float32')).max()\r\nOut[44]: 506.18911933898926\r\n```"
  }
]
