[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/318274767",
    "html_url": "https://github.com/pandas-dev/pandas/issues/17091#issuecomment-318274767",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17091",
    "id": 318274767,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxODI3NDc2Nw==",
    "user": {
      "login": "gfyoung",
      "id": 9273653,
      "node_id": "MDQ6VXNlcjkyNzM2NTM=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/9273653?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gfyoung",
      "html_url": "https://github.com/gfyoung",
      "followers_url": "https://api.github.com/users/gfyoung/followers",
      "following_url": "https://api.github.com/users/gfyoung/following{/other_user}",
      "gists_url": "https://api.github.com/users/gfyoung/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gfyoung/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gfyoung/subscriptions",
      "organizations_url": "https://api.github.com/users/gfyoung/orgs",
      "repos_url": "https://api.github.com/users/gfyoung/repos",
      "events_url": "https://api.github.com/users/gfyoung/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gfyoung/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-07-27T06:49:38Z",
    "updated_at": "2017-07-27T06:49:51Z",
    "author_association": "MEMBER",
    "body": "Hmm...that's really odd.  Surprise inplace modifications aren't nice.  PR to patch this is welcome!"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/331148495",
    "html_url": "https://github.com/pandas-dev/pandas/issues/17091#issuecomment-331148495",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17091",
    "id": 331148495,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMTE0ODQ5NQ==",
    "user": {
      "login": "ghost",
      "id": 10137,
      "node_id": "MDQ6VXNlcjEwMTM3",
      "avatar_url": "https://avatars3.githubusercontent.com/u/10137?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ghost",
      "html_url": "https://github.com/ghost",
      "followers_url": "https://api.github.com/users/ghost/followers",
      "following_url": "https://api.github.com/users/ghost/following{/other_user}",
      "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
      "organizations_url": "https://api.github.com/users/ghost/orgs",
      "repos_url": "https://api.github.com/users/ghost/repos",
      "events_url": "https://api.github.com/users/ghost/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ghost/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-21T12:58:15Z",
    "updated_at": "2017-09-21T12:58:15Z",
    "author_association": "NONE",
    "body": "@gfyoung  and @arnaudlegout I ran into the same problem, and did some investigation on this. Turns out that when calling `g.sum()`, the member `_group_selection` in `g` is modified in the function `_set_group_selection`, but never got changed back. \r\n\r\nAlso, `test_grouper_creation_bug` in file `test_groupby.py` is inaccurate: \r\n\r\n```\r\n        df = DataFrame({'A': [0, 0, 1, 1, 2, 2], 'B': [1, 2, 3, 4, 5, 6]})\r\n        g = df.groupby('A')\r\n        expected = g.sum()\r\n\r\n        g = df.groupby(pd.Grouper(key='A'))\r\n        result = g.sum()\r\n        assert_frame_equal(result, expected)\r\n\r\n        result = g.apply(lambda x: x.sum())\r\n        assert_frame_equal(result, expected)\r\n```\r\n\r\nIf you do this:\r\n```\r\n        df = DataFrame({'A': [0, 0, 1, 1, 2, 2], 'B': [1, 2, 3, 4, 5, 6]})\r\n        g = df.groupby('A')\r\n        expected = g.sum()\r\n\r\n        g = df.groupby(pd.Grouper(key='A'))\r\n        result = g.sum()\r\n        assert_frame_equal(result, expected)\r\n\r\n        df = DataFrame({'A': [0, 0, 1, 1, 2, 2], 'B': [1, 2, 3, 4, 5, 6]})\r\n        g = df.groupby('A')\r\n        result = g.apply(lambda x: x.sum())\r\n        assert_frame_equal(result, expected)\r\n```\r\n\r\nThe test will fail. It only passes because of this bug. `g.apply(lambda x: x.sum())` returns a 3x2 data frame if `g` is 3x2. This bug causes `b` to be 3x1, hence `result` turns to have the same dimension as `expected`. \r\n\r\nAm I missing anything here? Many thanks."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/331452046",
    "html_url": "https://github.com/pandas-dev/pandas/issues/17091#issuecomment-331452046",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17091",
    "id": 331452046,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMTQ1MjA0Ng==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-22T13:49:37Z",
    "updated_at": "2017-09-22T13:49:37Z",
    "author_association": "CONTRIBUTOR",
    "body": "so groupers can keep state, though they really shouldn't. this is might be a wider problem. would be helpful for you to look at it."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/331593703",
    "html_url": "https://github.com/pandas-dev/pandas/issues/17091#issuecomment-331593703",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17091",
    "id": 331593703,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMTU5MzcwMw==",
    "user": {
      "login": "ghost",
      "id": 10137,
      "node_id": "MDQ6VXNlcjEwMTM3",
      "avatar_url": "https://avatars3.githubusercontent.com/u/10137?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ghost",
      "html_url": "https://github.com/ghost",
      "followers_url": "https://api.github.com/users/ghost/followers",
      "following_url": "https://api.github.com/users/ghost/following{/other_user}",
      "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
      "organizations_url": "https://api.github.com/users/ghost/orgs",
      "repos_url": "https://api.github.com/users/ghost/repos",
      "events_url": "https://api.github.com/users/ghost/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ghost/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-23T00:58:34Z",
    "updated_at": "2017-09-23T00:58:34Z",
    "author_association": "NONE",
    "body": "I'll be happy to!"
  }
]
