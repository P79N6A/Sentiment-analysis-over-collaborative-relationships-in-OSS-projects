[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/239401400",
    "html_url": "https://github.com/pandas-dev/pandas/issues/13973#issuecomment-239401400",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13973",
    "id": 239401400,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzOTQwMTQwMA==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-12T09:25:07Z",
    "updated_at": "2016-08-12T09:25:07Z",
    "author_association": "MEMBER",
    "body": "Can you please provide a reproducible example? (some code that constructs an example dataframe and shows the problem)\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/239682577",
    "html_url": "https://github.com/pandas-dev/pandas/issues/13973#issuecomment-239682577",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13973",
    "id": 239682577,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzOTY4MjU3Nw==",
    "user": {
      "login": "seanDot7",
      "id": 5859702,
      "node_id": "MDQ6VXNlcjU4NTk3MDI=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/5859702?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/seanDot7",
      "html_url": "https://github.com/seanDot7",
      "followers_url": "https://api.github.com/users/seanDot7/followers",
      "following_url": "https://api.github.com/users/seanDot7/following{/other_user}",
      "gists_url": "https://api.github.com/users/seanDot7/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/seanDot7/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/seanDot7/subscriptions",
      "organizations_url": "https://api.github.com/users/seanDot7/orgs",
      "repos_url": "https://api.github.com/users/seanDot7/repos",
      "events_url": "https://api.github.com/users/seanDot7/events{/privacy}",
      "received_events_url": "https://api.github.com/users/seanDot7/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-14T16:26:48Z",
    "updated_at": "2016-08-14T16:26:48Z",
    "author_association": "NONE",
    "body": "Source code `scorer.py`:\n\n```\n# -*- coding:utf-8 -*-\n\nimport argparse\nimport json\nimport pandas as pd\nimport numpy as np\n# from sklearn.metrics import precision_recall_curve\n\n\ndef main():\n    parser = argparse.ArgumentParser(description='score generator.' )\n    parser.add_argument('-s', '--submit_file', type=str, required=True, help='the submit file' )\n    parser.add_argument('-t','--test_file', type=str, required=True, help='the test file' )\n    args= parser.parse_args( )\n\n    pre_cutoff = 0.97\n    #  sample_cutoff = 1662587\n\n    df_gold = pd.read_csv(args.test_file, sep=',', names=['Idx', 'target'], header=0)\n    #  y_true = df_gold[df_gold['sampleid'] <= sample_cutoff]['label']\n\n    df_pred = pd.read_csv(args.submit_file, sep=',', names=['Idx', 'score'], header=0)\n    #  y_pred = df_pred[df_pred['sampleid'] <= sample_cutoff]['prob']\n\n    # print(df_pred.dtypes)\n    combine = pd.merge(df_gold, df_pred, how='left', on=['Idx'])\n    combine.fillna(0, inplace=True)\n\n    result = sorted(combine.itertuples(index=False), key=lambda x:(-x[2], x[0]))\n    combine = pd.DataFrame(result)\n    # combine = combine.sort_values(by=['score', 'Idx'], ascending=[False, True])\n    targets = 1 - combine['target']\n\n    # scores = combine['score']\n\n    targets_cumsum = targets.cumsum().astype(float)\n\n    precision = targets_cumsum / np.arange(1, len(targets) + 1)\n    recall = targets_cumsum / targets.sum().astype(float)\n    filtered_recall = recall[(precision >= pre_cutoff) == True]\n    # precision2, recall2, threshold2 = precision_recall_curve(targets, scores)\n    # filtered_recall2 = recall2[(precision2 >= pre_cutoff) == True]\n\n    if len(filtered_recall) > 0:\n        score = max(filtered_recall)\n        # score2 = max(filtered_recall2)\n        result = {\n            'code': 0,\n            'score': score,\n            # 'score2': score2,\n            'message': 'success'\n        }\n    else:\n        message = u'error %s' % pre_cutoff\n        result = {\n            'code': 1,\n            'score': 0,\n            'message': message\n        }\n\n    print (json.dumps(result))\n\nif __name__ == \"__main__\":\n    main()\n```\n\nCommand to run it:\n`answer.csv` and `prediction.csv` are both in the .zip file.\n    $ python scorer.py -t answer.csv -s prediction.csv\n\n[resources.zip](https://github.com/pydata/pandas/files/417115/resources.zip)\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/239683351",
    "html_url": "https://github.com/pandas-dev/pandas/issues/13973#issuecomment-239683351",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13973",
    "id": 239683351,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzOTY4MzM1MQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-14T16:42:04Z",
    "updated_at": "2016-08-14T16:42:04Z",
    "author_association": "CONTRIBUTOR",
    "body": "pls narrow this down and make it copy pastable\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/365246753",
    "html_url": "https://github.com/pandas-dev/pandas/issues/13973#issuecomment-365246753",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13973",
    "id": 365246753,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2NTI0Njc1Mw==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-13T12:01:19Z",
    "updated_at": "2018-02-13T12:01:19Z",
    "author_association": "CONTRIBUTOR",
    "body": "@seanDot7 let us know if you can make a [small reproducible example](https://stackoverflow.com/help/mcve)."
  }
]
