[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/379786054",
    "html_url": "https://github.com/pandas-dev/pandas/issues/20635#issuecomment-379786054",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/20635",
    "id": 379786054,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3OTc4NjA1NA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-09T15:09:19Z",
    "updated_at": "2018-04-09T15:09:19Z",
    "author_association": "CONTRIBUTOR",
    "body": "the first example should be int. this is a bug. if you'd like to have a look would be great."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/467602700",
    "html_url": "https://github.com/pandas-dev/pandas/issues/20635#issuecomment-467602700",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/20635",
    "id": 467602700,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2NzYwMjcwMA==",
    "user": {
      "login": "designMoreWeb",
      "id": 5986856,
      "node_id": "MDQ6VXNlcjU5ODY4NTY=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/5986856?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/designMoreWeb",
      "html_url": "https://github.com/designMoreWeb",
      "followers_url": "https://api.github.com/users/designMoreWeb/followers",
      "following_url": "https://api.github.com/users/designMoreWeb/following{/other_user}",
      "gists_url": "https://api.github.com/users/designMoreWeb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/designMoreWeb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/designMoreWeb/subscriptions",
      "organizations_url": "https://api.github.com/users/designMoreWeb/orgs",
      "repos_url": "https://api.github.com/users/designMoreWeb/repos",
      "events_url": "https://api.github.com/users/designMoreWeb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/designMoreWeb/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-26T20:34:50Z",
    "updated_at": "2019-02-26T21:17:49Z",
    "author_association": "NONE",
    "body": "In my testing, \r\n\r\nI have been gettting this bug when the starting dataframe is all strings. \r\nAny other type have not given me any issues\r\n\r\n`import pandas as pd\r\n\r\n\r\nprint('DF2 as Data Frame')\r\nprint(\"Starting set are all floats\")\r\nprint('-----------------')\r\ndf2=pd.DataFrame({'L':[0.0,2.5],'M':[3.5,8.5],'N':[9.6,10.0]})\r\nprint(df2.dtypes)\r\nprint('----------------')\r\ndf2.loc[:, ['L', 'M']] = df2.loc[:, ['L', 'M']].astype('str')\r\nprint(df2.dtypes)\r\nprint('----------------')\r\ndf2.loc[:, 'M'] =df2.loc[:, 'M'].astype('str')\r\nprint(df2.dtypes)\r\nprint('----------------')\r\ndf2.loc[:, ['L', 'N']] = df2.loc[:, ['L', 'N']].astype('str')\r\nprint(df2.dtypes)\r\nprint('----------------')\r\nprint('----------------')\r\n\r\nprint('DF as Data Frame')\r\nprint(\"Starting set are all ints\")\r\nprint('----------------')\r\ndf = pd.DataFrame({'D':[2,3],'E':[4,5],'F':[8,9]})\r\nprint(df.dtypes)\r\nprint('----------------')\r\ndf.loc[:, ['E', 'F']] = df.loc[:, ['E', 'F']].astype('float')\r\nprint(df.dtypes)\r\nprint('----------------')\r\ndf.loc[:, 'E'] =df.loc[:, 'E'].astype('int')\r\nprint(df.dtypes)\r\nprint('----------------')\r\ndf.loc[:, ['D', 'F']] = df.loc[:, ['D', 'F']].astype('int')\r\nprint(df.dtypes)\r\nprint('----------------')\r\nprint('----------------')\r\n\r\nprint('DF3 as Data Frame')\r\nprint(\"Starting set are all str\")\r\nprint('----------------')\r\ndf3 = pd.DataFrame({'J':['2','3'],'K':['4','5'],'G':['8','9']})\r\nprint(df3.dtypes)\r\nprint('----------------')\r\ndf3.loc[:, ['J', 'G']] = df3.loc[:, ['J', 'G']].astype('int')\r\nprint(df3.dtypes)\r\nprint('----------------')\r\ndf3.loc[:, 'J'] =df3.loc[:, 'J'].astype('int')\r\nprint(df3.dtypes)\r\nprint('----------------')\r\ndf3.loc[:, ['K', 'G']] = df3.loc[:, ['K', 'G']].astype('float')\r\nprint(df3.dtypes)\r\nprint('----------------')\r\nprint('----------------')\r\n\r\nprint('DF4 as Data Frame')\r\nprint(\"Starting set are a combination of floats and ints\")\r\nprint('----------------')\r\ndf4 = pd.DataFrame({'X':[2,3.2],'Y':[4.5,5.5],'Z':[8,9]})\r\nprint(df4.dtypes)\r\nprint('----------------')\r\ndf4.loc[:, ['X', 'Y']] = df4.loc[:, ['X', 'Y']].astype('int')\r\nprint(df4.dtypes)\r\nprint('----------------')\r\ndf4.loc[:, 'Z'] =df4.loc[:, 'Z'].astype('float')\r\nprint(df4.dtypes)\r\nprint('----------------')\r\ndf4.loc[:, ['X', 'Z']] = df4.loc[:, ['X', 'Z']].astype('int')\r\nprint(df4.dtypes)\r\nprint('----------------')\r\nprint('----------------')\r\n`\r\n\r\nresults\r\n\r\n>DF2as Data Frame\r\nStarting set are all floats\r\n\r\n> -----------------\r\n> L    float64\r\n> M    float64\r\n> N    float64\r\n> dtype: object\r\n> ----------------\r\n> L     object\r\n> M     object\r\n> N    float64\r\n> dtype: object\r\n> ----------------\r\n> L     object\r\n> M     object\r\n> N    float64\r\n> dtype: object\r\n> ----------------\r\n> L    object\r\n> M    object\r\n> N    object\r\n> dtype: object\r\n> ----------------\r\n> ----------------\r\n> DF as Data Frame\r\n> Starting set are all ints\r\n> ----------------\r\n> D    int64\r\n> E    int64\r\n> F    int64\r\n> dtype: object\r\n> ----------------\r\n> D      int64\r\n> E    float64\r\n> F    float64\r\n> dtype: object\r\n> ----------------\r\n> D      int64\r\n> E      int64\r\n> F    float64\r\n> dtype: object\r\n> ----------------\r\n> D    int64\r\n> E    int64\r\n> F    int64\r\n> dtype: object\r\n> ----------------\r\n> ----------------\r\n> DF3 as Data Frame\r\n> Starting set are all str\r\n> ----------------\r\n> G    object\r\n> J    object\r\n> K    object\r\n> dtype: object\r\n> ----------------\r\n> G    object\r\n> J    object\r\n> K    object\r\n> dtype: object\r\n> ----------------\r\n> G    object\r\n> J     int64\r\n> K    object\r\n> dtype: object\r\n> ----------------\r\n> G    float64\r\n> J      int64\r\n> K    float64\r\n> dtype: object\r\n> ----------------\r\n> ----------------\r\n> DF4 as Data Frame\r\n> Starting set are a combination of floats and ints\r\n> ----------------\r\n> X    float64\r\n> Y    float64\r\n> Z      int64\r\n> dtype: object\r\n> ----------------\r\n> X    int64\r\n> Y    int64\r\n> Z    int64\r\n> dtype: object\r\n> ----------------\r\n> X      int64\r\n> Y      int64\r\n> Z    float64\r\n> dtype: object\r\n> ----------------\r\n> X    int64\r\n> Y    int64\r\n> Z    int64\r\n> dtype: object\r\n> ----------------\r\n> ----------------\r\n> \r\n> [Done] exited with code=0 in 1.637 seconds\r\n\r\nThe issue does not occur when they are all either ints, floats or a combination of ints and floats. This occurs because strings are considered objects by python and the int and floats are considered as “numeric” objects. So what is happening is that when we are trying to convert the strings to any of the numeric object type it creates a temp and then when we try the conversion again it is converting the strings to numeric types. \r\n\r\nCould be related with this issue https://github.com/pandas-dev/pandas/issues/11617"
  }
]
