[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/436022938",
    "html_url": "https://github.com/pandas-dev/pandas/issues/23521#issuecomment-436022938",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23521",
    "id": 436022938,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNjAyMjkzOA==",
    "user": {
      "login": "Safrone",
      "id": 14047377,
      "node_id": "MDQ6VXNlcjE0MDQ3Mzc3",
      "avatar_url": "https://avatars1.githubusercontent.com/u/14047377?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Safrone",
      "html_url": "https://github.com/Safrone",
      "followers_url": "https://api.github.com/users/Safrone/followers",
      "following_url": "https://api.github.com/users/Safrone/following{/other_user}",
      "gists_url": "https://api.github.com/users/Safrone/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Safrone/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Safrone/subscriptions",
      "organizations_url": "https://api.github.com/users/Safrone/orgs",
      "repos_url": "https://api.github.com/users/Safrone/repos",
      "events_url": "https://api.github.com/users/Safrone/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Safrone/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-05T20:26:41Z",
    "updated_at": "2018-11-05T20:26:41Z",
    "author_association": "NONE",
    "body": "A workaround I found:\r\n\r\n```\r\nimport pandas as pd\r\nimport pytz\r\nts = pd.Timestamp('2018-11-04 01:55:17.869342-0500', tz='America/New_York')\r\nts.astimezone(pytz.UTC).floor('T').astimezone(ts.tzinfo)\r\n\r\nTimestamp('2018-11-04 01:55:00-0500', tz='America/New_York')\r\n```"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/436023576",
    "html_url": "https://github.com/pandas-dev/pandas/issues/23521#issuecomment-436023576",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23521",
    "id": 436023576,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNjAyMzU3Ng==",
    "user": {
      "login": "gfyoung",
      "id": 9273653,
      "node_id": "MDQ6VXNlcjkyNzM2NTM=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/9273653?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gfyoung",
      "html_url": "https://github.com/gfyoung",
      "followers_url": "https://api.github.com/users/gfyoung/followers",
      "following_url": "https://api.github.com/users/gfyoung/following{/other_user}",
      "gists_url": "https://api.github.com/users/gfyoung/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gfyoung/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gfyoung/subscriptions",
      "organizations_url": "https://api.github.com/users/gfyoung/orgs",
      "repos_url": "https://api.github.com/users/gfyoung/repos",
      "events_url": "https://api.github.com/users/gfyoung/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gfyoung/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-05T20:28:51Z",
    "updated_at": "2018-11-05T20:28:51Z",
    "author_association": "MEMBER",
    "body": "cc @mroeschke \r\n\r\nI believe we might have fixed this in #22647?\r\n\r\n@Safrone : Thanks for filing this!  Can you installing the `master` branch an re-running your code?"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/436031889",
    "html_url": "https://github.com/pandas-dev/pandas/issues/23521#issuecomment-436031889",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23521",
    "id": 436031889,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNjAzMTg4OQ==",
    "user": {
      "login": "Safrone",
      "id": 14047377,
      "node_id": "MDQ6VXNlcjE0MDQ3Mzc3",
      "avatar_url": "https://avatars1.githubusercontent.com/u/14047377?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Safrone",
      "html_url": "https://github.com/Safrone",
      "followers_url": "https://api.github.com/users/Safrone/followers",
      "following_url": "https://api.github.com/users/Safrone/following{/other_user}",
      "gists_url": "https://api.github.com/users/Safrone/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Safrone/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Safrone/subscriptions",
      "organizations_url": "https://api.github.com/users/Safrone/orgs",
      "repos_url": "https://api.github.com/users/Safrone/repos",
      "events_url": "https://api.github.com/users/Safrone/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Safrone/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-05T20:57:09Z",
    "updated_at": "2018-11-05T20:57:09Z",
    "author_association": "NONE",
    "body": "I cloned the latest version and am still having issues:\r\n\r\n```\r\n>>> import pandas as pd\r\n>>> pd.__version__\r\n'0.24.0.dev0+917.gf0877eccc'\r\n>>> pd.Timestamp('2018-11-04 01:55:17.869342-0500', tz='America/New_York').floor('T')\r\n\r\nTraceback (most recent call last):\r\n  File \"<input>\", line 1, in <module>\r\n  File \"pandas/_libs/tslibs/timestamps.pyx\", line 824, in pandas._libs.tslibs.timestamps.Timestamp.floor\r\n    return self._round(freq, RoundTo.MINUS_INFTY, ambiguous, nonexistent)\r\n  File \"pandas/_libs/tslibs/timestamps.pyx\", line 751, in pandas._libs.tslibs.timestamps.Timestamp._round\r\n    result = result.tz_localize(\r\n  File \"pandas/_libs/tslibs/timestamps.pyx\", line 1096, in pandas._libs.tslibs.timestamps.Timestamp.tz_localize\r\n    value = tz_localize_to_utc(np.array([self.value], dtype='i8'), tz,\r\n  File \"pandas/_libs/tslibs/conversion.pyx\", line 1019, in pandas._libs.tslibs.conversion.tz_localize_to_utc\r\n    raise pytz.AmbiguousTimeError(\r\npytz.exceptions.AmbiguousTimeError: Cannot infer dst time from %r, try using the 'ambiguous' argument\r\n```\r\n\r\n<details>\r\n\r\nINSTALLED VERSIONS\r\n------------------\r\ncommit: f0877eccc080cb38afa092436f09a79a65269d8c\r\npython: 3.5.6.final.0\r\npython-bits: 64\r\nOS: Linux\r\nOS-release: 4.15.0-38-generic\r\nmachine: x86_64\r\nprocessor: x86_64\r\nbyteorder: little\r\nLC_ALL: None\r\nLANG: en_US.UTF-8\r\nLOCALE: en_US.UTF-8\r\npandas: 0.24.0.dev0+917.gf0877eccc\r\npytest: None\r\npip: 10.0.1\r\nsetuptools: 39.1.0\r\nCython: 0.29\r\nnumpy: 1.15.4\r\nscipy: None\r\npyarrow: None\r\nxarray: None\r\nIPython: None\r\nsphinx: None\r\npatsy: None\r\ndateutil: 2.7.5\r\npytz: 2018.7\r\nblosc: None\r\nbottleneck: None\r\ntables: None\r\nnumexpr: None\r\nfeather: None\r\nmatplotlib: None\r\nopenpyxl: None\r\nxlrd: None\r\nxlwt: None\r\nxlsxwriter: None\r\nlxml: None\r\nbs4: None\r\nhtml5lib: None\r\nsqlalchemy: None\r\npymysql: None\r\npsycopg2: None\r\njinja2: None\r\ns3fs: None\r\nfastparquet: None\r\npandas_gbq: None\r\npandas_datareader: None\r\ngcsfs: None\r\n\r\n</details>"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/436034939",
    "html_url": "https://github.com/pandas-dev/pandas/issues/23521#issuecomment-436034939",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23521",
    "id": 436034939,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNjAzNDkzOQ==",
    "user": {
      "login": "mroeschke",
      "id": 10647082,
      "node_id": "MDQ6VXNlcjEwNjQ3MDgy",
      "avatar_url": "https://avatars0.githubusercontent.com/u/10647082?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mroeschke",
      "html_url": "https://github.com/mroeschke",
      "followers_url": "https://api.github.com/users/mroeschke/followers",
      "following_url": "https://api.github.com/users/mroeschke/following{/other_user}",
      "gists_url": "https://api.github.com/users/mroeschke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mroeschke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mroeschke/subscriptions",
      "organizations_url": "https://api.github.com/users/mroeschke/orgs",
      "repos_url": "https://api.github.com/users/mroeschke/repos",
      "events_url": "https://api.github.com/users/mroeschke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mroeschke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-05T21:06:44Z",
    "updated_at": "2018-11-05T21:06:44Z",
    "author_association": "MEMBER",
    "body": "As the error notes, you need to specify the `ambiguous` argument in `floor` as these were added in #22647\r\n\r\n```\r\nIn [1]: pd.Timestamp('2018-11-04 01:55:17.869342-0500', tz='America/New_York').f\r\n   ...: loor('T', ambiguous=True)\r\nOut[1]: Timestamp('2018-11-04 01:55:00-0400', tz='America/New_York')\r\n\r\nIn [2]: pd.Timestamp('2018-11-04 01:55:17.869342-0500', tz='America/New_York').f\r\n   ...: loor('T', ambiguous=False)\r\nOut[2]: Timestamp('2018-11-04 01:55:00-0500', tz='America/New_York')\r\n\r\nIn [3]: pd.Timestamp('2018-11-04 01:55:17.869342-0500', tz='America/New_York').f\r\n   ...: loor('T', ambiguous='NaT')\r\nOut[3]: NaT\r\n```"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/436035422",
    "html_url": "https://github.com/pandas-dev/pandas/issues/23521#issuecomment-436035422",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23521",
    "id": 436035422,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNjAzNTQyMg==",
    "user": {
      "login": "Safrone",
      "id": 14047377,
      "node_id": "MDQ6VXNlcjE0MDQ3Mzc3",
      "avatar_url": "https://avatars1.githubusercontent.com/u/14047377?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Safrone",
      "html_url": "https://github.com/Safrone",
      "followers_url": "https://api.github.com/users/Safrone/followers",
      "following_url": "https://api.github.com/users/Safrone/following{/other_user}",
      "gists_url": "https://api.github.com/users/Safrone/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Safrone/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Safrone/subscriptions",
      "organizations_url": "https://api.github.com/users/Safrone/orgs",
      "repos_url": "https://api.github.com/users/Safrone/repos",
      "events_url": "https://api.github.com/users/Safrone/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Safrone/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-05T21:08:25Z",
    "updated_at": "2018-11-05T21:08:25Z",
    "author_association": "NONE",
    "body": "Ah yes you are correct, thank you."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/441087553",
    "html_url": "https://github.com/pandas-dev/pandas/issues/23521#issuecomment-441087553",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23521",
    "id": 441087553,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MTA4NzU1Mw==",
    "user": {
      "login": "adamkpickering",
      "id": 19395776,
      "node_id": "MDQ6VXNlcjE5Mzk1Nzc2",
      "avatar_url": "https://avatars0.githubusercontent.com/u/19395776?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/adamkpickering",
      "html_url": "https://github.com/adamkpickering",
      "followers_url": "https://api.github.com/users/adamkpickering/followers",
      "following_url": "https://api.github.com/users/adamkpickering/following{/other_user}",
      "gists_url": "https://api.github.com/users/adamkpickering/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/adamkpickering/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/adamkpickering/subscriptions",
      "organizations_url": "https://api.github.com/users/adamkpickering/orgs",
      "repos_url": "https://api.github.com/users/adamkpickering/repos",
      "events_url": "https://api.github.com/users/adamkpickering/events{/privacy}",
      "received_events_url": "https://api.github.com/users/adamkpickering/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-22T17:11:21Z",
    "updated_at": "2018-11-22T17:31:33Z",
    "author_association": "NONE",
    "body": "I think that the problems here are deeper, and cannot be solved by tacking the `ambiguous` keyword argument onto `floor` and others.\r\n\r\n```\r\nIn [106]: a = pd.Timestamp('2018-11-04T7:31:33Z')\r\nIn [107]: a\r\nOut[107]: Timestamp('2018-11-04 07:31:33+0000', tz='UTC')\r\nIn [108]: b = a.tz_convert('America/Edmonton')\r\nIn [109]: b\r\nOut[109]: Timestamp('2018-11-04 01:31:33-0600', tz='America/Edmonton')\r\nIn [110]: b.floor('H')\r\n---------------------------------------------------------------------------\r\nAmbiguousTimeError                        Traceback (most recent call last)\r\n<ipython-input-110-7a7b2ce5091f> in <module>()\r\n----> 1 b.floor('H')\r\n/usr/local/lib/python3.5/dist-packages/pandas/_libs/tslibs/timestamps.cpython-35m-x86_64-linux-gnu.so in pandas._libs.tslibs.timestamps.Timestamp.floor()\r\n/usr/local/lib/python3.5/dist-packages/pandas/_libs/tslibs/timestamps.cpython-35m-x86_64-linux-gnu.so in pandas._libs.tslibs.timestamps.Timestamp._round()\r\n/usr/local/lib/python3.5/dist-packages/pandas/_libs/tslibs/timestamps.cpython-35m-x86_64-linux-gnu.so in pandas._libs.tslibs.timestamps.Timestamp.tz_localize()\r\n/usr/local/lib/python3.5/dist-packages/pandas/_libs/tslibs/conversion.cpython-35m-x86_64-linux-gnu.so in pandas._libs.tslibs.conversion.tz_localize_to_utc()\r\nAmbiguousTimeError: Cannot infer dst time from '2018-11-04 01:00:00', try using the 'ambiguous' argument\r\n\r\nIn [127]: c = pd.Timestamp('2018-11-04T8:31:33Z')\r\nIn [128]: c\r\nOut[128]: Timestamp('2018-11-04 08:31:33+0000', tz='UTC')\r\nIn [129]: d = c.tz_convert('America/Edmonton')\r\nIn [130]: d\r\nOut[130]: Timestamp('2018-11-04 01:31:33-0700', tz='America/Edmonton')\r\nIn [131]: d.floor('H')\r\n---------------------------------------------------------------------------\r\nAmbiguousTimeError                        Traceback (most recent call last)\r\n<ipython-input-131-ebab98f5821c> in <module>()\r\n----> 1 d.floor('H')\r\n/usr/local/lib/python3.5/dist-packages/pandas/_libs/tslibs/timestamps.cpython-35m-x86_64-linux-gnu.so in pandas._libs.tslibs.timestamps.Timestamp.floor()\r\n/usr/local/lib/python3.5/dist-packages/pandas/_libs/tslibs/timestamps.cpython-35m-x86_64-linux-gnu.so in pandas._libs.tslibs.timestamps.Timestamp._round()\r\n/usr/local/lib/python3.5/dist-packages/pandas/_libs/tslibs/timestamps.cpython-35m-x86_64-linux-gnu.so in pandas._libs.tslibs.timestamps.Timestamp.tz_localize()\r\n/usr/local/lib/python3.5/dist-packages/pandas/_libs/tslibs/conversion.cpython-35m-x86_64-linux-gnu.so in pandas._libs.tslibs.conversion.tz_localize_to_utc()\r\nAmbiguousTimeError: Cannot infer dst time from '2018-11-04 01:00:00', try using the 'ambiguous' argument\r\n```\r\n\r\nThe thing is: `2018-11-04 01:31:33-0700` and `2018-11-04 01:31:33-0600` **are not ambiguous times**, so it makes no sense to require the programmer to use the `ambiguous` keyword to specify whether they are in standard or daylight savings time. If given a UTC offset **and** a location like `America/Edmonton` or `America/New_York` it is possible to infer whether that time is in standard or daylight savings time. If you look at the traceback from above:\r\n\r\n```\r\nAmbiguousTimeError: Cannot infer dst time from '2018-11-04 01:00:00', try using the 'ambiguous' argument\r\n```\r\n\r\nit seems that pandas strips the time offset while processing the time, which is very strange since the offset is crucial information."
  }
]
