[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/391952424",
    "html_url": "https://github.com/pandas-dev/pandas/issues/21200#issuecomment-391952424",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/21200",
    "id": 391952424,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MTk1MjQyNA==",
    "user": {
      "login": "SimonAlecks",
      "id": 8855995,
      "node_id": "MDQ6VXNlcjg4NTU5OTU=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/8855995?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonAlecks",
      "html_url": "https://github.com/SimonAlecks",
      "followers_url": "https://api.github.com/users/SimonAlecks/followers",
      "following_url": "https://api.github.com/users/SimonAlecks/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonAlecks/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonAlecks/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonAlecks/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonAlecks/orgs",
      "repos_url": "https://api.github.com/users/SimonAlecks/repos",
      "events_url": "https://api.github.com/users/SimonAlecks/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonAlecks/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-25T06:12:21Z",
    "updated_at": "2018-05-25T06:12:21Z",
    "author_association": "CONTRIBUTOR",
    "body": "I can see the pct_change function in groupby.py on line ~3944 is not implementing this properly. Whereas the method it overrides implements it properly for a dataframe. I'd like to think this should be relatively straightforward to remedy.\r\nI'll take a crack at a PR for this. Although I haven't contributed to pandas before, so we'll see if I am able to complete it in a timely manner."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/392020718",
    "html_url": "https://github.com/pandas-dev/pandas/issues/21200#issuecomment-392020718",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/21200",
    "id": 392020718,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MjAyMDcxOA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-25T11:11:20Z",
    "updated_at": "2018-05-25T11:11:20Z",
    "author_association": "CONTRIBUTOR",
    "body": "maybe related to https://github.com/pandas-dev/pandas/issues/11811"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/394752001",
    "html_url": "https://github.com/pandas-dev/pandas/issues/21200#issuecomment-394752001",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/21200",
    "id": 394752001,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NDc1MjAwMQ==",
    "user": {
      "login": "rontho1992",
      "id": 4999003,
      "node_id": "MDQ6VXNlcjQ5OTkwMDM=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/4999003?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rontho1992",
      "html_url": "https://github.com/rontho1992",
      "followers_url": "https://api.github.com/users/rontho1992/followers",
      "following_url": "https://api.github.com/users/rontho1992/following{/other_user}",
      "gists_url": "https://api.github.com/users/rontho1992/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rontho1992/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rontho1992/subscriptions",
      "organizations_url": "https://api.github.com/users/rontho1992/orgs",
      "repos_url": "https://api.github.com/users/rontho1992/repos",
      "events_url": "https://api.github.com/users/rontho1992/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rontho1992/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-05T15:24:38Z",
    "updated_at": "2018-06-05T15:24:38Z",
    "author_association": "NONE",
    "body": "Found something along these lines when you shift in reverse so\r\n\r\n```\r\nimport pandas_datareader.data as web\r\nimport pandas as pd\r\n\r\ntickers = ['F','AAPL','NFLX','AMZN','GOOG']\r\n\r\ndf = pd.DataFrame()\r\nfor ticker in tickers:\r\n    data = web.DataReader(ticker, 'iex', '2018-01-01', '2018-06-01')\r\n    data['ticker'] = ticker\r\n    df = df.append(data)\r\n\r\ndf = df.reset_index()\r\ndf['5_day_growth'] = df.groupby('ticker').close.pct_change(periods=-5)\r\ndf['5_day_growth_alt'] = df.groupby('ticker').close.pct_change(periods=5).shift(-5)\r\n```\r\n\r\nThe alternate method gives you correct output rather than shifting in the calculation.\r\n\r\n```\r\nprint(df[['date','ticker','close','5_day_growth', '5_day_growth_alt']].head(6))\r\n\r\n          date ticker    close  5_day_growth  5_day_growth_alt\r\n0  2018-01-02      F  12.1939     -0.032115          0.033181\r\n1  2018-01-03      F  12.2903     -0.020717          0.021155\r\n2  2018-01-04      F  12.5022     -0.013672          0.013862\r\n3  2018-01-05      F  12.7141     -0.002268          0.002273\r\n4  2018-01-08      F  12.6659      0.003820         -0.003805\r\n5  2018-01-09      F  12.5985      0.073894         -0.068810\r\n```"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/401141250",
    "html_url": "https://github.com/pandas-dev/pandas/issues/21200#issuecomment-401141250",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/21200",
    "id": 401141250,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwMTE0MTI1MA==",
    "user": {
      "login": "WillKoehrsen",
      "id": 17484616,
      "node_id": "MDQ6VXNlcjE3NDg0NjE2",
      "avatar_url": "https://avatars3.githubusercontent.com/u/17484616?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/WillKoehrsen",
      "html_url": "https://github.com/WillKoehrsen",
      "followers_url": "https://api.github.com/users/WillKoehrsen/followers",
      "following_url": "https://api.github.com/users/WillKoehrsen/following{/other_user}",
      "gists_url": "https://api.github.com/users/WillKoehrsen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/WillKoehrsen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/WillKoehrsen/subscriptions",
      "organizations_url": "https://api.github.com/users/WillKoehrsen/orgs",
      "repos_url": "https://api.github.com/users/WillKoehrsen/repos",
      "events_url": "https://api.github.com/users/WillKoehrsen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/WillKoehrsen/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-28T19:07:37Z",
    "updated_at": "2018-06-28T19:10:25Z",
    "author_association": "NONE",
    "body": "A workaround for this is using `apply`. This should produce the desired result:\r\n\r\n`df['%_groupby'] = df.groupby('grp')['a'].apply(lambda x: x.pct_change())`"
  }
]
