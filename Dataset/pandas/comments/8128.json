[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/53731782",
    "html_url": "https://github.com/pandas-dev/pandas/pull/8128#issuecomment-53731782",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/8128",
    "id": 53731782,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzNzMxNzgy",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-08-28T14:56:49Z",
    "updated_at": "2014-08-28T14:57:44Z",
    "author_association": "CONTRIBUTOR",
    "body": "- need a vbench (or 2) (and then show the results)\n- release note\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/53819042",
    "html_url": "https://github.com/pandas-dev/pandas/pull/8128#issuecomment-53819042",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/8128",
    "id": 53819042,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzODE5MDQy",
    "user": {
      "login": "behzadnouri",
      "id": 1288998,
      "node_id": "MDQ6VXNlcjEyODg5OTg=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1288998?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/behzadnouri",
      "html_url": "https://github.com/behzadnouri",
      "followers_url": "https://api.github.com/users/behzadnouri/followers",
      "following_url": "https://api.github.com/users/behzadnouri/following{/other_user}",
      "gists_url": "https://api.github.com/users/behzadnouri/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/behzadnouri/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/behzadnouri/subscriptions",
      "organizations_url": "https://api.github.com/users/behzadnouri/orgs",
      "repos_url": "https://api.github.com/users/behzadnouri/repos",
      "events_url": "https://api.github.com/users/behzadnouri/events{/privacy}",
      "received_events_url": "https://api.github.com/users/behzadnouri/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-08-28T23:09:45Z",
    "updated_at": "2014-08-29T00:08:19Z",
    "author_association": "CONTRIBUTOR",
    "body": "I had some dependency issue, so ran the benchmarks manually;\nOn master:\n\n```\n>>> groupby_transform_multi_key1.run()\n{'loops': 1, 'timing': 1880.3930282592773, 'repeat': 3, 'succeeded': True, 'units': 'ms'}\n>>> groupby_transform_multi_key2.run()\n{'loops': 1, 'timing': 1886.4881992340088, 'repeat': 3, 'succeeded': True, 'units': 'ms'}\n>>> groupby_transform_multi_key3.run()\n{'loops': 1, 'timing': 5588.175058364868, 'repeat': 3, 'succeeded': True, 'units': 'ms'}\n>>> groupby_transform_multi_key4.run()\n{'loops': 1, 'timing': 4688.298940658569, 'repeat': 3, 'succeeded': True, 'units': 'ms'}\n```\n\non branch:\n\n```\n>>> groupby_transform_multi_key1.run()\n{'loops': 1, 'timing': 106.5061092376709, 'repeat': 3, 'succeeded': True, 'units': 'ms'}\n>>> groupby_transform_multi_key2.run()\n{'loops': 10, 'timing': 73.46320152282715, 'repeat': 3, 'succeeded': True, 'units': 'ms'}\n>>> groupby_transform_multi_key3.run()\n{'loops': 1, 'timing': 1123.687982559204, 'repeat': 3, 'succeeded': True, 'units': 'ms'}\n>>> groupby_transform_multi_key4.run()\n{'loops': 1, 'timing': 200.47903060913086, 'repeat': 3, 'succeeded': True, 'units': 'ms'}\n```\n\n`groupby_transform_multi_key[3|4]` needs 6.5G memory to run on master.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/53827192",
    "html_url": "https://github.com/pandas-dev/pandas/pull/8128#issuecomment-53827192",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/8128",
    "id": 53827192,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzODI3MTky",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-08-29T01:17:50Z",
    "updated_at": "2014-08-29T01:17:50Z",
    "author_association": "CONTRIBUTOR",
    "body": "why is the memory usage so high? the Cartesian product of the groups is not represented here (it's only the compressed space)\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/53829263",
    "html_url": "https://github.com/pandas-dev/pandas/pull/8128#issuecomment-53829263",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/8128",
    "id": 53829263,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzODI5MjYz",
    "user": {
      "login": "behzadnouri",
      "id": 1288998,
      "node_id": "MDQ6VXNlcjEyODg5OTg=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1288998?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/behzadnouri",
      "html_url": "https://github.com/behzadnouri",
      "followers_url": "https://api.github.com/users/behzadnouri/followers",
      "following_url": "https://api.github.com/users/behzadnouri/following{/other_user}",
      "gists_url": "https://api.github.com/users/behzadnouri/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/behzadnouri/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/behzadnouri/subscriptions",
      "organizations_url": "https://api.github.com/users/behzadnouri/orgs",
      "repos_url": "https://api.github.com/users/behzadnouri/repos",
      "events_url": "https://api.github.com/users/behzadnouri/events{/privacy}",
      "received_events_url": "https://api.github.com/users/behzadnouri/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-08-29T01:59:43Z",
    "updated_at": "2014-08-29T02:25:11Z",
    "author_association": "CONTRIBUTOR",
    "body": "The master branch calls into [groupsort_indexer](https://github.com/pydata/pandas/blob/master/pandas/algos.pyx#L1980) with [`ngroups = np.prod(shape)`](https://github.com/pydata/pandas/blob/master/pandas/core/groupby.py#L3550). `np.prod(shape)` is the size of Cartesian product space of unique values across each key and `groupsort_indexer` allocates an array `counts` with this size.\n\n[Elsewhere](https://github.com/pydata/pandas/blob/master/pandas/core/groupby.py#L3434) also, the code falls back on argsort to avoid memory error.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/53917897",
    "html_url": "https://github.com/pandas-dev/pandas/pull/8128#issuecomment-53917897",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/8128",
    "id": 53917897,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzOTE3ODk3",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-08-29T19:07:43Z",
    "updated_at": "2014-08-29T19:07:43Z",
    "author_association": "CONTRIBUTOR",
    "body": "`argsort` says is O(n**2) (as the default is quicksort)....but only using it on the smaller ones anyhow.\nthanks..this is great! (and the mem issue is avoided!)\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/53918891",
    "html_url": "https://github.com/pandas-dev/pandas/pull/8128#issuecomment-53918891",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/8128",
    "id": 53918891,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzOTE4ODkx",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-08-29T19:17:01Z",
    "updated_at": "2014-08-29T19:17:01Z",
    "author_association": "CONTRIBUTOR",
    "body": "thanks! this was great!\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/53937051",
    "html_url": "https://github.com/pandas-dev/pandas/pull/8128#issuecomment-53937051",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/8128",
    "id": 53937051,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzOTM3MDUx",
    "user": {
      "login": "behzadnouri",
      "id": 1288998,
      "node_id": "MDQ6VXNlcjEyODg5OTg=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1288998?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/behzadnouri",
      "html_url": "https://github.com/behzadnouri",
      "followers_url": "https://api.github.com/users/behzadnouri/followers",
      "following_url": "https://api.github.com/users/behzadnouri/following{/other_user}",
      "gists_url": "https://api.github.com/users/behzadnouri/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/behzadnouri/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/behzadnouri/subscriptions",
      "organizations_url": "https://api.github.com/users/behzadnouri/orgs",
      "repos_url": "https://api.github.com/users/behzadnouri/repos",
      "events_url": "https://api.github.com/users/behzadnouri/events{/privacy}",
      "received_events_url": "https://api.github.com/users/behzadnouri/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-08-29T22:28:11Z",
    "updated_at": "2014-08-29T22:28:11Z",
    "author_association": "CONTRIBUTOR",
    "body": "@jreback On further tests, it seems to me that we need a _stable_ sorter for `group_index`. see for example\n- [tests/test_groupby.py:test_lexsort_indexer](https://github.com/pydata/pandas/blob/master/pandas/tests/test_groupby.py#L4488)\n- [tests/test_frame.py:test_sort_index_multicolumn](https://github.com/pydata/pandas/blob/master/pandas/tests/test_frame.py#L10322)\n  It compares versus `np.lexsort` which is a stable sort.\n- [tests/test_groupby:test__cython_agg_general](https://github.com/pydata/pandas/blob/master/pandas/tests/test_groupby.py#L4488):\n  `first` fails without stable sort.\n\nI need to change the code to `.argsort(kind='mergesort')`.  Should I make a new pull-request or it can work within this pull-request? \n\nI did some tests with merge-sort and benchmarks still look good. It is also inline with the fact that Wes uses merge sort in [here](https://github.com/pydata/pandas/blame/master/pandas/core/groupby.py#L3436).\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/53937759",
    "html_url": "https://github.com/pandas-dev/pandas/pull/8128#issuecomment-53937759",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/8128",
    "id": 53937759,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzOTM3NzU5",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-08-29T22:39:06Z",
    "updated_at": "2014-08-29T22:39:06Z",
    "author_association": "CONTRIBUTOR",
    "body": "ok make a new pr\n\nhmm no tests break\ncan u show a test case?\n"
  }
]
