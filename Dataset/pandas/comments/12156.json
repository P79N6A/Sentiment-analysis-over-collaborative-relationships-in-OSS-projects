[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/175692832",
    "html_url": "https://github.com/pandas-dev/pandas/issues/12156#issuecomment-175692832",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/12156",
    "id": 175692832,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3NTY5MjgzMg==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-01-27T15:38:19Z",
    "updated_at": "2016-01-27T15:38:19Z",
    "author_association": "CONTRIBUTOR",
    "body": "use this\n\n```\nIn [10]: pd.date_range(pd.Timestamp('2015-1-1', tz='US/Eastern'), pd.Timestamp('2016-1-1', tz='US/Eastern'), freq='H') + pd.offsets.Day(1)\nOut[10]: \nDatetimeIndex(['2015-01-02 00:00:00-05:00', '2015-01-02 01:00:00-05:00', '2015-01-02 02:00:00-05:00', '2015-01-02 03:00:00-05:00', '2015-01-02 04:00:00-05:00', '2015-01-02 05:00:00-05:00',\n               '2015-01-02 06:00:00-05:00', '2015-01-02 07:00:00-05:00', '2015-01-02 08:00:00-05:00', '2015-01-02 09:00:00-05:00',\n               ...\n               '2016-01-01 15:00:00-05:00', '2016-01-01 16:00:00-05:00', '2016-01-01 17:00:00-05:00', '2016-01-01 18:00:00-05:00', '2016-01-01 19:00:00-05:00', '2016-01-01 20:00:00-05:00',\n               '2016-01-01 21:00:00-05:00', '2016-01-01 22:00:00-05:00', '2016-01-01 23:00:00-05:00', '2016-01-02 00:00:00-05:00'],\n              dtype='datetime64[ns, US/Eastern]', length=8761, freq='H')\n```\n\nthough this might be a bug as `Day` correctly handles the tz adjustments\n\ncc @rockg @chris-b1 \n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/198158520",
    "html_url": "https://github.com/pandas-dev/pandas/issues/12156#issuecomment-198158520",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/12156",
    "id": 198158520,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5ODE1ODUyMA==",
    "user": {
      "login": "stephen-hoover",
      "id": 8355977,
      "node_id": "MDQ6VXNlcjgzNTU5Nzc=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/8355977?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stephen-hoover",
      "html_url": "https://github.com/stephen-hoover",
      "followers_url": "https://api.github.com/users/stephen-hoover/followers",
      "following_url": "https://api.github.com/users/stephen-hoover/following{/other_user}",
      "gists_url": "https://api.github.com/users/stephen-hoover/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stephen-hoover/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stephen-hoover/subscriptions",
      "organizations_url": "https://api.github.com/users/stephen-hoover/orgs",
      "repos_url": "https://api.github.com/users/stephen-hoover/repos",
      "events_url": "https://api.github.com/users/stephen-hoover/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stephen-hoover/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-03-18T01:43:28Z",
    "updated_at": "2016-03-18T01:43:28Z",
    "author_association": "NONE",
    "body": "I poked into this a bit. I haven't solved it yet, but the error happens in `DatetimeIndex.tz_localize`. You can reproduce the error with\n\n```\nIn [1]: pd.date_range(pd.Timestamp('2015-1-1'), pd.Timestamp('2016-1-1'), freq='H').tz_localize('US/Eastern')\n---------------------------------------------------------------------------\nNonExistentTimeError                      Traceback (most recent call last)\n<ipython-input-1-35790fda5612> in <module>()\n----> 1 pd.date_range(pd.Timestamp('2015-1-1'), pd.Timestamp('2016-1-1'), freq='H').tz_localize('US/Eastern')\n\n/Users/shoover/src/pandas/pandas/util/decorators.py in wrapper(*args, **kwargs)\n     89                 else:\n     90                     kwargs[new_arg_name] = new_arg_value\n---> 91             return func(*args, **kwargs)\n     92         return wrapper\n     93     return _deprecate_kwarg\n\n/Users/shoover/src/pandas/pandas/tseries/index.py in tz_localize(self, tz, ambiguous)\n   1845 \n   1846             new_dates = tslib.tz_localize_to_utc(self.asi8, tz,\n-> 1847                                                  ambiguous=ambiguous)\n   1848         new_dates = new_dates.view(_NS_DTYPE)\n   1849         return self._shallow_copy(new_dates, tz=tz)\n\n/Users/shoover/src/pandas/pandas/tslib.pyx in pandas.tslib.tz_localize_to_utc (pandas/tslib.c:67511)()\n\nNonExistentTimeError: 2015-03-08 02:00:00\n\nIn [2]: pd.__version__\nOut[2]: '0.18.0+26.g28327ce'\n```\n\nIn the original example, when you add a `DateOffset`, the code path goes through `DatetimeIndex._add_offset`, which removes timezone localization, does the addition, and then restores the localization. The exception in the original example happens when trying to restore the localization.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/198161224",
    "html_url": "https://github.com/pandas-dev/pandas/issues/12156#issuecomment-198161224",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/12156",
    "id": 198161224,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5ODE2MTIyNA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-03-18T01:52:33Z",
    "updated_at": "2016-03-18T01:52:33Z",
    "author_association": "CONTRIBUTOR",
    "body": "this is in the .applly method of DateOffset which doesn't correctly deal with localization\n\nDay does this correctly (so u can use that code / move to DateOffset) \n\nthe trick is to know exactly when to call this\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/198185532",
    "html_url": "https://github.com/pandas-dev/pandas/issues/12156#issuecomment-198185532",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/12156",
    "id": 198185532,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5ODE4NTUzMg==",
    "user": {
      "login": "rockg",
      "id": 3195015,
      "node_id": "MDQ6VXNlcjMxOTUwMTU=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/3195015?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rockg",
      "html_url": "https://github.com/rockg",
      "followers_url": "https://api.github.com/users/rockg/followers",
      "following_url": "https://api.github.com/users/rockg/following{/other_user}",
      "gists_url": "https://api.github.com/users/rockg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rockg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rockg/subscriptions",
      "organizations_url": "https://api.github.com/users/rockg/orgs",
      "repos_url": "https://api.github.com/users/rockg/repos",
      "events_url": "https://api.github.com/users/rockg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rockg/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-03-18T03:30:34Z",
    "updated_at": "2016-03-18T03:30:34Z",
    "author_association": "CONTRIBUTOR",
    "body": "What is done for most offsets is to remove the tz entirely which makes additions of months/quarters/weeks/etc. work fine across tz boundaries.  However, with day the logic does need to be changed a bit.  Right now `days=n` uses dateutil whereas `Day` uses timedeltas.  If it's easy to convert logic then do so, otherwise the right solution would be to convert to UTC instead of removing the tz.  Then I think you eliminate all ambiguity at the cost of yet more specialized code.  I'm not really happy with how one needs to remove the tz, but that is really a shortcoming of `dateutil` that we are working around.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/198323940",
    "html_url": "https://github.com/pandas-dev/pandas/issues/12156#issuecomment-198323940",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/12156",
    "id": 198323940,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5ODMyMzk0MA==",
    "user": {
      "login": "rockg",
      "id": 3195015,
      "node_id": "MDQ6VXNlcjMxOTUwMTU=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/3195015?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rockg",
      "html_url": "https://github.com/rockg",
      "followers_url": "https://api.github.com/users/rockg/followers",
      "following_url": "https://api.github.com/users/rockg/following{/other_user}",
      "gists_url": "https://api.github.com/users/rockg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rockg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rockg/subscriptions",
      "organizations_url": "https://api.github.com/users/rockg/orgs",
      "repos_url": "https://api.github.com/users/rockg/repos",
      "events_url": "https://api.github.com/users/rockg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rockg/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-03-18T11:57:55Z",
    "updated_at": "2016-03-18T11:57:55Z",
    "author_association": "CONTRIBUTOR",
    "body": "There are some other weird things here, probably separate issues:\n\nThis time doesn't exist yet one can create it.\n\n```\nIn [17]: pd.Timestamp('2015-03-08 2:00', tz='US/Eastern')\nOut[17]: Timestamp('2015-03-08 02:00:00-0500', tz='US/Eastern')\n```\n\nAgain, doesn't exist, but doesn't fail\n\n```\nIn [14]: t = pd.Timestamp('2015-03-07 2:00', tz='US/Eastern')\n\nIn [15]: t + pd.DateOffset(days=1)\nOut[15]: Timestamp('2015-03-08 02:00:00-0500', tz='US/Eastern')\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/198325796",
    "html_url": "https://github.com/pandas-dev/pandas/issues/12156#issuecomment-198325796",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/12156",
    "id": 198325796,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5ODMyNTc5Ng==",
    "user": {
      "login": "rockg",
      "id": 3195015,
      "node_id": "MDQ6VXNlcjMxOTUwMTU=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/3195015?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rockg",
      "html_url": "https://github.com/rockg",
      "followers_url": "https://api.github.com/users/rockg/followers",
      "following_url": "https://api.github.com/users/rockg/following{/other_user}",
      "gists_url": "https://api.github.com/users/rockg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rockg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rockg/subscriptions",
      "organizations_url": "https://api.github.com/users/rockg/orgs",
      "repos_url": "https://api.github.com/users/rockg/repos",
      "events_url": "https://api.github.com/users/rockg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rockg/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-03-18T12:08:19Z",
    "updated_at": "2016-03-18T12:08:19Z",
    "author_association": "CONTRIBUTOR",
    "body": "And I think the right answer rather than going to UTC, is not removing the tz at all for offsets <= day.  I think there is already this capability in `_kwds_use_relativedelta`.  Removing `days` from there might just work as then it will use `timedelta` instead of `dateutil`.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/198368324",
    "html_url": "https://github.com/pandas-dev/pandas/issues/12156#issuecomment-198368324",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/12156",
    "id": 198368324,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5ODM2ODMyNA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-03-18T13:47:57Z",
    "updated_at": "2016-03-18T13:47:57Z",
    "author_association": "CONTRIBUTOR",
    "body": "@rockg `Day` already handles these cases. The issue is that `DateOffset` has different code, so just needs a refactor to move the .apply from Day to a private method in `DateOffset` and call when needed.\n\nA wholly different (and maybe better method) of handling all of this is to add a `__new__` method to `DateOffset` which then returns the appropriate `.to_offset` obejct, so no more `DateOffset` directly (only sub-classes). I think this would be back-compat actually, and avoid edge cases like this.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/198373786",
    "html_url": "https://github.com/pandas-dev/pandas/issues/12156#issuecomment-198373786",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/12156",
    "id": 198373786,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5ODM3Mzc4Ng==",
    "user": {
      "login": "stephen-hoover",
      "id": 8355977,
      "node_id": "MDQ6VXNlcjgzNTU5Nzc=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/8355977?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stephen-hoover",
      "html_url": "https://github.com/stephen-hoover",
      "followers_url": "https://api.github.com/users/stephen-hoover/followers",
      "following_url": "https://api.github.com/users/stephen-hoover/following{/other_user}",
      "gists_url": "https://api.github.com/users/stephen-hoover/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stephen-hoover/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stephen-hoover/subscriptions",
      "organizations_url": "https://api.github.com/users/stephen-hoover/orgs",
      "repos_url": "https://api.github.com/users/stephen-hoover/repos",
      "events_url": "https://api.github.com/users/stephen-hoover/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stephen-hoover/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-03-18T14:00:45Z",
    "updated_at": "2016-03-18T14:00:45Z",
    "author_association": "NONE",
    "body": "This doesn't seem to be related to `DateOffset`. The error happens in `tz_localize`. For example, `pd.Timestamp('2015-03-08 02:59:00').tz_localize('US/Eastern')` generates a `NonExistentTimeError`. Maybe I'm missing something. Why doesn't 2 am on March 8th 2015 exist? `pd.Timestamp('2014-03-08 02:00:00').tz_localize('US/Eastern')` and `pd.Timestamp('2016-03-08 02:00:00').tz_localize('US/Eastern')` work just fine.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/198374614",
    "html_url": "https://github.com/pandas-dev/pandas/issues/12156#issuecomment-198374614",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/12156",
    "id": 198374614,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5ODM3NDYxNA==",
    "user": {
      "login": "kawochen",
      "id": 10709573,
      "node_id": "MDQ6VXNlcjEwNzA5NTcz",
      "avatar_url": "https://avatars2.githubusercontent.com/u/10709573?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kawochen",
      "html_url": "https://github.com/kawochen",
      "followers_url": "https://api.github.com/users/kawochen/followers",
      "following_url": "https://api.github.com/users/kawochen/following{/other_user}",
      "gists_url": "https://api.github.com/users/kawochen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kawochen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kawochen/subscriptions",
      "organizations_url": "https://api.github.com/users/kawochen/orgs",
      "repos_url": "https://api.github.com/users/kawochen/repos",
      "events_url": "https://api.github.com/users/kawochen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kawochen/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-03-18T14:04:00Z",
    "updated_at": "2016-03-18T14:04:00Z",
    "author_association": "CONTRIBUTOR",
    "body": "daylight saving\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/198374858",
    "html_url": "https://github.com/pandas-dev/pandas/issues/12156#issuecomment-198374858",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/12156",
    "id": 198374858,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5ODM3NDg1OA==",
    "user": {
      "login": "stephen-hoover",
      "id": 8355977,
      "node_id": "MDQ6VXNlcjgzNTU5Nzc=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/8355977?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stephen-hoover",
      "html_url": "https://github.com/stephen-hoover",
      "followers_url": "https://api.github.com/users/stephen-hoover/followers",
      "following_url": "https://api.github.com/users/stephen-hoover/following{/other_user}",
      "gists_url": "https://api.github.com/users/stephen-hoover/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stephen-hoover/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stephen-hoover/subscriptions",
      "organizations_url": "https://api.github.com/users/stephen-hoover/orgs",
      "repos_url": "https://api.github.com/users/stephen-hoover/repos",
      "events_url": "https://api.github.com/users/stephen-hoover/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stephen-hoover/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-03-18T14:04:54Z",
    "updated_at": "2016-03-18T14:04:54Z",
    "author_association": "NONE",
    "body": "Ah, that's what I was missing. Thanks! No wonder this is so confusing.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/217678056",
    "html_url": "https://github.com/pandas-dev/pandas/issues/12156#issuecomment-217678056",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/12156",
    "id": 217678056,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIxNzY3ODA1Ng==",
    "user": {
      "login": "gliptak",
      "id": 50109,
      "node_id": "MDQ6VXNlcjUwMTA5",
      "avatar_url": "https://avatars0.githubusercontent.com/u/50109?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gliptak",
      "html_url": "https://github.com/gliptak",
      "followers_url": "https://api.github.com/users/gliptak/followers",
      "following_url": "https://api.github.com/users/gliptak/following{/other_user}",
      "gists_url": "https://api.github.com/users/gliptak/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gliptak/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gliptak/subscriptions",
      "organizations_url": "https://api.github.com/users/gliptak/orgs",
      "repos_url": "https://api.github.com/users/gliptak/repos",
      "events_url": "https://api.github.com/users/gliptak/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gliptak/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-05-08T00:07:00Z",
    "updated_at": "2016-05-08T00:07:00Z",
    "author_association": "CONTRIBUTOR",
    "body": "https://github.com/pydata/pandas/issues/13057\n\nhttp://www.timeanddate.com/time/zone/usa/new-york\n\n2015    Sun, Mar 8, 2:00 AM EST → EDT +1 hour (DST start) UTC-4h\n\nThis seem to be the expected behaviour.\n"
  }
]
