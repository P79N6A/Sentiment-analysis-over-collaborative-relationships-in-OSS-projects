[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/142885946",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11167#issuecomment-142885946",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11167",
    "id": 142885946,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0Mjg4NTk0Ng==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-09-24T10:32:56Z",
    "updated_at": "2015-09-24T10:32:56Z",
    "author_association": "CONTRIBUTOR",
    "body": "what would you have the result look like given an some `min_weight`\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/149397903",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11167#issuecomment-149397903",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11167",
    "id": 149397903,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0OTM5NzkwMw==",
    "user": {
      "login": "max-sixty",
      "id": 5635139,
      "node_id": "MDQ6VXNlcjU2MzUxMzk=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/5635139?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/max-sixty",
      "html_url": "https://github.com/max-sixty",
      "followers_url": "https://api.github.com/users/max-sixty/followers",
      "following_url": "https://api.github.com/users/max-sixty/following{/other_user}",
      "gists_url": "https://api.github.com/users/max-sixty/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/max-sixty/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/max-sixty/subscriptions",
      "organizations_url": "https://api.github.com/users/max-sixty/orgs",
      "repos_url": "https://api.github.com/users/max-sixty/repos",
      "events_url": "https://api.github.com/users/max-sixty/events{/privacy}",
      "received_events_url": "https://api.github.com/users/max-sixty/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-10-20T01:49:01Z",
    "updated_at": "2015-10-20T01:49:01Z",
    "author_association": "CONTRIBUTOR",
    "body": "Here's a bit of test code that does what I think this should do:\n\n``` python\ndef filter_min_weights(series, min_weight):\n    ewma_series = pd.ewma(series, span=10, min_periods=0)\n    has_weight = pd.Series(0, index=series.index)\n    has_weight[series.dropna()] = 1\n    weights = pd.ewma(has_weight, span=10, min_periods=0)\n    has_sufficient_weight = weights[weights>min_weight]\n    return ewma_series.where(has_sufficient_weight)\n```\n\nThen:\n\n``` python\nIn [128]: partial_series = pd.Series(range(200))\n\nIn [129]: partial_series[20:185]=pd.np.nan\n\nIn [130]: filter_min_weights(partial_series, min_weight=0.5)\nOut[130]: \n0        0.000000\n1        0.550000\n2        1.132890\n3        1.748020\n4        2.394502\n5        3.071240\n6        3.776953\n7        4.510212\n8        5.269468\n9        6.053089\n10       6.859394\n11       7.686679\n12       8.533251\n13       9.397448\n14      10.277660\n15      11.172348\n16      12.080052\n17      12.999407\n18      13.929141\n19      14.868084\n20      14.868084\n21      14.868084\n22      14.868084\n23            NaN\n24            NaN\n25            NaN\n26            NaN\n27            NaN\n28            NaN\n29            NaN\n          ...    \n170           NaN\n171           NaN\n172           NaN\n173           NaN\n174           NaN\n175           NaN\n176           NaN\n177           NaN\n178           NaN\n179           NaN\n180           NaN\n181           NaN\n182           NaN\n183           NaN\n184           NaN\n185           NaN\n186           NaN\n187           NaN\n188    186.748020\n189    187.394502\n190    188.071240\n191    188.776953\n192    189.510212\n193    190.269468\n194    191.053089\n195    191.859394\n196    192.686679\n197    193.533251\n198    194.397448\n199    195.277660\ndtype: float64\n```\n\nFor clarity the `weights` here (*100) are:\n\n``` python\nOut[134]: \n0      100\n1      100\n2      100\n3      100\n4      100\n5      100\n6      100\n7      100\n8      100\n9      100\n10     100\n11     100\n12     100\n13     100\n14     100\n15     100\n16     100\n17     100\n18     100\n19     100\n20      81\n21      66\n22      54\n23      44\n24      36\n25      29\n26      24\n27      19\n28      16\n29      13\n      ... \n170      0\n171      0\n172      0\n173      0\n174      0\n175      0\n176      0\n177      0\n178      0\n179      0\n180      0\n181      0\n182      0\n183      0\n184      0\n185     18\n186     33\n187     45\n188     55\n189     63\n190     70\n191     75\n192     79\n193     83\n194     86\n195     89\n196     91\n197     92\n198     93\n199     95\ndtype: int64\n```\n\n(apologies for the slow reply)\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/158737944",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11167#issuecomment-158737944",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11167",
    "id": 158737944,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1ODczNzk0NA==",
    "user": {
      "login": "max-sixty",
      "id": 5635139,
      "node_id": "MDQ6VXNlcjU2MzUxMzk=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/5635139?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/max-sixty",
      "html_url": "https://github.com/max-sixty",
      "followers_url": "https://api.github.com/users/max-sixty/followers",
      "following_url": "https://api.github.com/users/max-sixty/following{/other_user}",
      "gists_url": "https://api.github.com/users/max-sixty/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/max-sixty/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/max-sixty/subscriptions",
      "organizations_url": "https://api.github.com/users/max-sixty/orgs",
      "repos_url": "https://api.github.com/users/max-sixty/repos",
      "events_url": "https://api.github.com/users/max-sixty/events{/privacy}",
      "received_events_url": "https://api.github.com/users/max-sixty/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-11-22T09:00:19Z",
    "updated_at": "2015-11-22T09:00:19Z",
    "author_association": "CONTRIBUTOR",
    "body": "Anyone have any thoughts here? (do you know who the pandas experts on this stuff are @jreback?) \n\nI think this is a better way, with some confidence and - for once - this is my area of expertise outside of pandas. But I think it only makes sense to build this if there's some consensus. (and after https://github.com/pydata/pandas/pull/11603)\n\nOr let me know if my example is unclear / there are any Qs\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/158787768",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11167#issuecomment-158787768",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11167",
    "id": 158787768,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1ODc4Nzc2OA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-11-22T18:38:48Z",
    "updated_at": "2015-11-22T18:38:48Z",
    "author_association": "CONTRIBUTOR",
    "body": "cc @seth-p\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/159466491",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11167#issuecomment-159466491",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11167",
    "id": 159466491,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1OTQ2NjQ5MQ==",
    "user": {
      "login": "seth-p",
      "id": 7441788,
      "node_id": "MDQ6VXNlcjc0NDE3ODg=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/7441788?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/seth-p",
      "html_url": "https://github.com/seth-p",
      "followers_url": "https://api.github.com/users/seth-p/followers",
      "following_url": "https://api.github.com/users/seth-p/following{/other_user}",
      "gists_url": "https://api.github.com/users/seth-p/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/seth-p/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/seth-p/subscriptions",
      "organizations_url": "https://api.github.com/users/seth-p/orgs",
      "repos_url": "https://api.github.com/users/seth-p/repos",
      "events_url": "https://api.github.com/users/seth-p/events{/privacy}",
      "received_events_url": "https://api.github.com/users/seth-p/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-11-25T02:18:20Z",
    "updated_at": "2015-11-25T02:18:20Z",
    "author_association": "CONTRIBUTOR",
    "body": "I think this is a good idea, though probably makes sense only when `ignore_na=False` (the default). I guess you could implement it for `ignore_na=True` as well, though in that case the most it will do is produce `NaN` for an initial stretch of entries.\n\nObviously for backwards compatibility I would keep `min_periods`, and when both are specified produce non-`NaN` values only when both conditions are satisfied.\n"
  }
]
