[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/344407473",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18291#issuecomment-344407473",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18291",
    "id": 344407473,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NDQwNzQ3Mw==",
    "user": {
      "login": "jschendel",
      "id": 5332445,
      "node_id": "MDQ6VXNlcjUzMzI0NDU=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/5332445?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jschendel",
      "html_url": "https://github.com/jschendel",
      "followers_url": "https://api.github.com/users/jschendel/followers",
      "following_url": "https://api.github.com/users/jschendel/following{/other_user}",
      "gists_url": "https://api.github.com/users/jschendel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jschendel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jschendel/subscriptions",
      "organizations_url": "https://api.github.com/users/jschendel/orgs",
      "repos_url": "https://api.github.com/users/jschendel/repos",
      "events_url": "https://api.github.com/users/jschendel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jschendel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-14T21:38:19Z",
    "updated_at": "2017-11-14T21:38:19Z",
    "author_association": "MEMBER",
    "body": "You can maintain the order of used categories by passing `ordered=True`.  Based on the docstring, dropping unused categories is intentional, though I'm not sure of the exact reasoning:\r\n\r\nhttps://github.com/pandas-dev/pandas/blob/63e8527d32aaf6afe1cd4b2a7b3bfadb088c9a72/pandas/core/categorical.py#L2018-L2026\r\n\r\nSeems like this could be better documented.  I don't think that docstring is displayed anywhere in the documentation/api reference?  The best I could find was an example in a note at the end of the [working with categories](http://pandas.pydata.org/pandas-docs/stable/categorical.html#working-with-categories) section of the documentation, and a couple examples in the api reference for [`pandas.unique`](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.unique.html).\r\n\r\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/344410248",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18291#issuecomment-344410248",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18291",
    "id": 344410248,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NDQxMDI0OA==",
    "user": {
      "login": "toobaz",
      "id": 1224492,
      "node_id": "MDQ6VXNlcjEyMjQ0OTI=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1224492?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/toobaz",
      "html_url": "https://github.com/toobaz",
      "followers_url": "https://api.github.com/users/toobaz/followers",
      "following_url": "https://api.github.com/users/toobaz/following{/other_user}",
      "gists_url": "https://api.github.com/users/toobaz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/toobaz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/toobaz/subscriptions",
      "organizations_url": "https://api.github.com/users/toobaz/orgs",
      "repos_url": "https://api.github.com/users/toobaz/repos",
      "events_url": "https://api.github.com/users/toobaz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/toobaz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-14T21:48:15Z",
    "updated_at": "2017-11-14T21:48:15Z",
    "author_association": "MEMBER",
    "body": "> Based on the docstring, dropping unused categories is intentional, though I'm not sure of the exact reasoning:\r\n\r\nIndeed, I should have clarified that I'm not claiming the behavior is in contrast with the docs: I just see no justification for it, and - unless there is any which I'm missing - I suggest to change it.\r\n\r\nFor the records: this came from a test in #17897, and in particular from the fact that ``CategoricalIndex.drop_duplicates()`` does _not_ change the categories."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/344411171",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18291#issuecomment-344411171",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18291",
    "id": 344411171,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NDQxMTE3MQ==",
    "user": {
      "login": "toobaz",
      "id": 1224492,
      "node_id": "MDQ6VXNlcjEyMjQ0OTI=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1224492?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/toobaz",
      "html_url": "https://github.com/toobaz",
      "followers_url": "https://api.github.com/users/toobaz/followers",
      "following_url": "https://api.github.com/users/toobaz/following{/other_user}",
      "gists_url": "https://api.github.com/users/toobaz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/toobaz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/toobaz/subscriptions",
      "organizations_url": "https://api.github.com/users/toobaz/orgs",
      "repos_url": "https://api.github.com/users/toobaz/repos",
      "events_url": "https://api.github.com/users/toobaz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/toobaz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-14T21:51:34Z",
    "updated_at": "2017-11-14T21:51:34Z",
    "author_association": "MEMBER",
    "body": "By the way: I think _\"Return the ``Categorical`` which ``categories`` and ``codes`` are unique.\"_ (from the docstring) doesn't make much sense as the categories are _always_ unique, right?"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/344415461",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18291#issuecomment-344415461",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18291",
    "id": 344415461,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NDQxNTQ2MQ==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-14T22:08:03Z",
    "updated_at": "2017-11-14T22:08:03Z",
    "author_association": "MEMBER",
    "body": "It seems this change was done in https://github.com/pandas-dev/pandas/pull/10508 without much discussion. So we should check the interaction with groupby on categorical columns"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/344417245",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18291#issuecomment-344417245",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18291",
    "id": 344417245,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NDQxNzI0NQ==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-14T22:15:05Z",
    "updated_at": "2017-11-14T22:15:05Z",
    "author_association": "MEMBER",
    "body": "I actually raised this before here https://github.com/pandas-dev/pandas/pull/15939#issuecomment-292775835, but that discussion was mainly closed by referring to the docs and saying that we could further discuss it in a new issue, which you now opened :-)\r\n\r\nThis one might also be relevant to look at: https://github.com/pandas-dev/pandas/pull/15439 (as I said above, we should explore the interaction with groupby)"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/344527527",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18291#issuecomment-344527527",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18291",
    "id": 344527527,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NDUyNzUyNw==",
    "user": {
      "login": "toobaz",
      "id": 1224492,
      "node_id": "MDQ6VXNlcjEyMjQ0OTI=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1224492?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/toobaz",
      "html_url": "https://github.com/toobaz",
      "followers_url": "https://api.github.com/users/toobaz/followers",
      "following_url": "https://api.github.com/users/toobaz/following{/other_user}",
      "gists_url": "https://api.github.com/users/toobaz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/toobaz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/toobaz/subscriptions",
      "organizations_url": "https://api.github.com/users/toobaz/orgs",
      "repos_url": "https://api.github.com/users/toobaz/repos",
      "events_url": "https://api.github.com/users/toobaz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/toobaz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-15T08:58:38Z",
    "updated_at": "2017-11-15T08:58:38Z",
    "author_association": "MEMBER",
    "body": "> we should explore the interaction with groupby\r\n\r\nSure this might be a good occasion to discuss (more for consistency than for the actual implementation, which is relatively simple to adapt).\r\n\r\nCurrent behavior.\r\n- if ``sort=True``, then the categories order is followed, be them ``ordered=True`` or not\r\n- if ``sort=False``, then if categories are ``ordered=True``, then their order is used (except that unused categories go at the end), while if ``ordered=False``, then the order of appearance is used (again, with unused categories at the end)\r\n\r\nWhile I wouldn't change the behavior with ``sort=True`` (which is the default), I see the following possibilities for ``sort=False``:\r\n1. leaving everything as it is\r\n2. in the ``sort=False``, ``ordered=True`` case, follow the order of appearance rather than the order of categories\r\n3. in the ``sort=False``, ``ordered=False`` case, follow the order of categories rather than the order of appearance\r\n\r\n1 seems to me a bit inconsistent, and I have a slight preference (for coherence with other dtypes) for 2 over 3 (despite 3. being potentially slightly more efficient). Anyway, in those cases (if any) in which ``sort=False`` and we follow the order of categories, I suggest to place unused categories at their natural place rather than at the end, which doesn't make any sense to me.\r\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/344537876",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18291#issuecomment-344537876",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18291",
    "id": 344537876,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NDUzNzg3Ng==",
    "user": {
      "login": "toobaz",
      "id": 1224492,
      "node_id": "MDQ6VXNlcjEyMjQ0OTI=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1224492?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/toobaz",
      "html_url": "https://github.com/toobaz",
      "followers_url": "https://api.github.com/users/toobaz/followers",
      "following_url": "https://api.github.com/users/toobaz/following{/other_user}",
      "gists_url": "https://api.github.com/users/toobaz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/toobaz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/toobaz/subscriptions",
      "organizations_url": "https://api.github.com/users/toobaz/orgs",
      "repos_url": "https://api.github.com/users/toobaz/repos",
      "events_url": "https://api.github.com/users/toobaz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/toobaz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-15T09:38:36Z",
    "updated_at": "2017-11-15T13:21:03Z",
    "author_association": "MEMBER",
    "body": "Uhm... 3. would reopen #8868 , so we probably want to avoid it."
  }
]
