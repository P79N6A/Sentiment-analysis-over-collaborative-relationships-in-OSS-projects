[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/87571926",
    "html_url": "https://github.com/pandas-dev/pandas/issues/3335#issuecomment-87571926",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/3335",
    "id": 87571926,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3NTcxOTI2",
    "user": {
      "login": "TheInan",
      "id": 10674757,
      "node_id": "MDQ6VXNlcjEwNjc0NzU3",
      "avatar_url": "https://avatars2.githubusercontent.com/u/10674757?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheInan",
      "html_url": "https://github.com/TheInan",
      "followers_url": "https://api.github.com/users/TheInan/followers",
      "following_url": "https://api.github.com/users/TheInan/following{/other_user}",
      "gists_url": "https://api.github.com/users/TheInan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TheInan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TheInan/subscriptions",
      "organizations_url": "https://api.github.com/users/TheInan/orgs",
      "repos_url": "https://api.github.com/users/TheInan/repos",
      "events_url": "https://api.github.com/users/TheInan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TheInan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-03-30T06:56:15Z",
    "updated_at": "2015-03-30T06:56:15Z",
    "author_association": "NONE",
    "body": "I'd like to take a stab at this if no one minds\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/87572327",
    "html_url": "https://github.com/pandas-dev/pandas/issues/3335#issuecomment-87572327",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/3335",
    "id": 87572327,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3NTcyMzI3",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-03-30T07:02:16Z",
    "updated_at": "2015-03-30T07:02:16Z",
    "author_association": "CONTRIBUTOR",
    "body": "go for it!\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/96588031",
    "html_url": "https://github.com/pandas-dev/pandas/issues/3335#issuecomment-96588031",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/3335",
    "id": 96588031,
    "node_id": "MDEyOklzc3VlQ29tbWVudDk2NTg4MDMx",
    "user": {
      "login": "TheInan",
      "id": 10674757,
      "node_id": "MDQ6VXNlcjEwNjc0NzU3",
      "avatar_url": "https://avatars2.githubusercontent.com/u/10674757?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheInan",
      "html_url": "https://github.com/TheInan",
      "followers_url": "https://api.github.com/users/TheInan/followers",
      "following_url": "https://api.github.com/users/TheInan/following{/other_user}",
      "gists_url": "https://api.github.com/users/TheInan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TheInan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TheInan/subscriptions",
      "organizations_url": "https://api.github.com/users/TheInan/orgs",
      "repos_url": "https://api.github.com/users/TheInan/repos",
      "events_url": "https://api.github.com/users/TheInan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TheInan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-04-27T09:54:46Z",
    "updated_at": "2015-04-27T09:54:46Z",
    "author_association": "NONE",
    "body": "Would it be an appropriate solution to have any instances of \"All\" used as an index or column changed to \"All_\" in the original dataframe and the resulting pivot table so that having a user use \"All\" as a column name will not cause issues anymore?\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/96827471",
    "html_url": "https://github.com/pandas-dev/pandas/issues/3335#issuecomment-96827471",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/3335",
    "id": 96827471,
    "node_id": "MDEyOklzc3VlQ29tbWVudDk2ODI3NDcx",
    "user": {
      "login": "shoyer",
      "id": 1217238,
      "node_id": "MDQ6VXNlcjEyMTcyMzg=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1217238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shoyer",
      "html_url": "https://github.com/shoyer",
      "followers_url": "https://api.github.com/users/shoyer/followers",
      "following_url": "https://api.github.com/users/shoyer/following{/other_user}",
      "gists_url": "https://api.github.com/users/shoyer/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shoyer/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shoyer/subscriptions",
      "organizations_url": "https://api.github.com/users/shoyer/orgs",
      "repos_url": "https://api.github.com/users/shoyer/repos",
      "events_url": "https://api.github.com/users/shoyer/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shoyer/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-04-27T21:29:53Z",
    "updated_at": "2015-04-27T21:29:53Z",
    "author_association": "MEMBER",
    "body": "I'm not sure exactly what \"problems\" are caused by this issue, but generally speaking it's a better idea to raise an exception and force users to take some fallback action themselves rather than silently proceeding with some guess about user intent.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/96828277",
    "html_url": "https://github.com/pandas-dev/pandas/issues/3335#issuecomment-96828277",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/3335",
    "id": 96828277,
    "node_id": "MDEyOklzc3VlQ29tbWVudDk2ODI4Mjc3",
    "user": {
      "login": "TheInan",
      "id": 10674757,
      "node_id": "MDQ6VXNlcjEwNjc0NzU3",
      "avatar_url": "https://avatars2.githubusercontent.com/u/10674757?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheInan",
      "html_url": "https://github.com/TheInan",
      "followers_url": "https://api.github.com/users/TheInan/followers",
      "following_url": "https://api.github.com/users/TheInan/following{/other_user}",
      "gists_url": "https://api.github.com/users/TheInan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TheInan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TheInan/subscriptions",
      "organizations_url": "https://api.github.com/users/TheInan/orgs",
      "repos_url": "https://api.github.com/users/TheInan/repos",
      "events_url": "https://api.github.com/users/TheInan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TheInan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-04-27T21:34:29Z",
    "updated_at": "2015-04-27T21:34:29Z",
    "author_association": "NONE",
    "body": "Alright then, I think I'll just scan the DataFrame for any instances of All being used as a value or column title, and if there is one, I'll raise an exception. The problem was that when margins was passed in as true, columns with the title \"All\" were added to the dataframe, and then add a later point, instances of \"All\" columns had aggregates data filled into them, so if the original data used \"All\" it was being replaced I think\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/96858296",
    "html_url": "https://github.com/pandas-dev/pandas/issues/3335#issuecomment-96858296",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/3335",
    "id": 96858296,
    "node_id": "MDEyOklzc3VlQ29tbWVudDk2ODU4Mjk2",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-04-28T00:36:11Z",
    "updated_at": "2015-04-28T00:36:11Z",
    "author_association": "CONTRIBUTOR",
    "body": "need to define what is the incorrect behavior here first.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/98307633",
    "html_url": "https://github.com/pandas-dev/pandas/issues/3335#issuecomment-98307633",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/3335",
    "id": 98307633,
    "node_id": "MDEyOklzc3VlQ29tbWVudDk4MzA3NjMz",
    "user": {
      "login": "TheInan",
      "id": 10674757,
      "node_id": "MDQ6VXNlcjEwNjc0NzU3",
      "avatar_url": "https://avatars2.githubusercontent.com/u/10674757?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheInan",
      "html_url": "https://github.com/TheInan",
      "followers_url": "https://api.github.com/users/TheInan/followers",
      "following_url": "https://api.github.com/users/TheInan/following{/other_user}",
      "gists_url": "https://api.github.com/users/TheInan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TheInan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TheInan/subscriptions",
      "organizations_url": "https://api.github.com/users/TheInan/orgs",
      "repos_url": "https://api.github.com/users/TheInan/repos",
      "events_url": "https://api.github.com/users/TheInan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TheInan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-05-02T05:26:51Z",
    "updated_at": "2015-05-02T05:26:51Z",
    "author_association": "NONE",
    "body": "So this is what I have so far showing the issue. What happens is that when aggregating the data, as the script is going through the columns, it looks for All columns to aggregate data under. When \"foo\" was changed to \"All\" in the next DataFrame, the output is clearly nothing like that of the first pivot table. As a result, its probably most appropriate to raise an error when \"All\" is being used as a data point since it would be more trouble than its worth to rewrite the code around just this corner case.\n\n```\nimport pandas as pd\ndf = pd.DataFrame({'A' : ['one', 'one', 'two', 'three'] * 3,\n                    'B' : ['A', 'B', 'C'] * 4,\n                    'C' : ['foo', 'foo', 'foo', 'bar', 'bar', 'bar'] * 2,\n                    'D' : [1,2,3,4,5,6,7,8,9,10,11,12],\n                    'E' : [1,2,3,4,5,6,7,8,9,10,11,12]})\ndf\n```\n\n<div style=\"max-height:1000px;max-width:1500px;overflow:auto;\">\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>A</th>\n      <th>B</th>\n      <th>C</th>\n      <th>D</th>\n      <th>E</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0 </th>\n      <td>   one</td>\n      <td> A</td>\n      <td> foo</td>\n      <td>  1</td>\n      <td>  1</td>\n    </tr>\n    <tr>\n      <th>1 </th>\n      <td>   one</td>\n      <td> B</td>\n      <td> foo</td>\n      <td>  2</td>\n      <td>  2</td>\n    </tr>\n    <tr>\n      <th>2 </th>\n      <td>   two</td>\n      <td> C</td>\n      <td> foo</td>\n      <td>  3</td>\n      <td>  3</td>\n    </tr>\n    <tr>\n      <th>3 </th>\n      <td> three</td>\n      <td> A</td>\n      <td> bar</td>\n      <td>  4</td>\n      <td>  4</td>\n    </tr>\n    <tr>\n      <th>4 </th>\n      <td>   one</td>\n      <td> B</td>\n      <td> bar</td>\n      <td>  5</td>\n      <td>  5</td>\n    </tr>\n    <tr>\n      <th>5 </th>\n      <td>   one</td>\n      <td> C</td>\n      <td> bar</td>\n      <td>  6</td>\n      <td>  6</td>\n    </tr>\n    <tr>\n      <th>6 </th>\n      <td>   two</td>\n      <td> A</td>\n      <td> foo</td>\n      <td>  7</td>\n      <td>  7</td>\n    </tr>\n    <tr>\n      <th>7 </th>\n      <td> three</td>\n      <td> B</td>\n      <td> foo</td>\n      <td>  8</td>\n      <td>  8</td>\n    </tr>\n    <tr>\n      <th>8 </th>\n      <td>   one</td>\n      <td> C</td>\n      <td> foo</td>\n      <td>  9</td>\n      <td>  9</td>\n    </tr>\n    <tr>\n      <th>9 </th>\n      <td>   one</td>\n      <td> A</td>\n      <td> bar</td>\n      <td> 10</td>\n      <td> 10</td>\n    </tr>\n    <tr>\n      <th>10</th>\n      <td>   two</td>\n      <td> B</td>\n      <td> bar</td>\n      <td> 11</td>\n      <td> 11</td>\n    </tr>\n    <tr>\n      <th>11</th>\n      <td> three</td>\n      <td> C</td>\n      <td> bar</td>\n      <td> 12</td>\n      <td> 12</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n\n```\npd.pivot_table(df, values= 'D', index=['A','B'], columns=['C'], margins=True)\n```\n\n<div style=\"max-height:1000px;max-width:1500px;overflow:auto;\">\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>C</th>\n      <th>bar</th>\n      <th>foo</th>\n      <th>All</th>\n    </tr>\n    <tr>\n      <th>A</th>\n      <th>B</th>\n      <th></th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th rowspan=\"3\" valign=\"top\">one</th>\n      <th>A</th>\n      <td> 10</td>\n      <td>  1</td>\n      <td>  5.5</td>\n    </tr>\n    <tr>\n      <th>B</th>\n      <td>  5</td>\n      <td>  2</td>\n      <td>  3.5</td>\n    </tr>\n    <tr>\n      <th>C</th>\n      <td>  6</td>\n      <td>  9</td>\n      <td>  7.5</td>\n    </tr>\n    <tr>\n      <th rowspan=\"3\" valign=\"top\">three</th>\n      <th>A</th>\n      <td>  4</td>\n      <td>NaN</td>\n      <td>  4.0</td>\n    </tr>\n    <tr>\n      <th>B</th>\n      <td>NaN</td>\n      <td>  8</td>\n      <td>  8.0</td>\n    </tr>\n    <tr>\n      <th>C</th>\n      <td> 12</td>\n      <td>NaN</td>\n      <td> 12.0</td>\n    </tr>\n    <tr>\n      <th rowspan=\"3\" valign=\"top\">two</th>\n      <th>A</th>\n      <td>NaN</td>\n      <td>  7</td>\n      <td>  7.0</td>\n    </tr>\n    <tr>\n      <th>B</th>\n      <td> 11</td>\n      <td>NaN</td>\n      <td> 11.0</td>\n    </tr>\n    <tr>\n      <th>C</th>\n      <td>NaN</td>\n      <td>  3</td>\n      <td>  3.0</td>\n    </tr>\n    <tr>\n      <th>All</th>\n      <th></th>\n      <td>  8</td>\n      <td>  5</td>\n      <td>  6.5</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n\n```\ndf2 = pd.DataFrame({'A' : ['one', 'one', 'two', 'three'] * 3,\n                    'B' : ['A', 'B', 'C'] * 4,\n                    'C' : ['All', 'All', 'All', 'bar', 'bar', 'bar'] * 2,\n                    'D' : [1,2,3,4,5,6,7,8,9,10,11,12],\n                    'E' : [1,2,3,4,5,6,7,8,9,10,11,12]})\n\n\ndf2\n```\n\n<div style=\"max-height:1000px;max-width:1500px;overflow:auto;\">\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>A</th>\n      <th>B</th>\n      <th>C</th>\n      <th>D</th>\n      <th>E</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0 </th>\n      <td>   one</td>\n      <td> A</td>\n      <td> All</td>\n      <td>  1</td>\n      <td>  1</td>\n    </tr>\n    <tr>\n      <th>1 </th>\n      <td>   one</td>\n      <td> B</td>\n      <td> All</td>\n      <td>  2</td>\n      <td>  2</td>\n    </tr>\n    <tr>\n      <th>2 </th>\n      <td>   two</td>\n      <td> C</td>\n      <td> All</td>\n      <td>  3</td>\n      <td>  3</td>\n    </tr>\n    <tr>\n      <th>3 </th>\n      <td> three</td>\n      <td> A</td>\n      <td> bar</td>\n      <td>  4</td>\n      <td>  4</td>\n    </tr>\n    <tr>\n      <th>4 </th>\n      <td>   one</td>\n      <td> B</td>\n      <td> bar</td>\n      <td>  5</td>\n      <td>  5</td>\n    </tr>\n    <tr>\n      <th>5 </th>\n      <td>   one</td>\n      <td> C</td>\n      <td> bar</td>\n      <td>  6</td>\n      <td>  6</td>\n    </tr>\n    <tr>\n      <th>6 </th>\n      <td>   two</td>\n      <td> A</td>\n      <td> All</td>\n      <td>  7</td>\n      <td>  7</td>\n    </tr>\n    <tr>\n      <th>7 </th>\n      <td> three</td>\n      <td> B</td>\n      <td> All</td>\n      <td>  8</td>\n      <td>  8</td>\n    </tr>\n    <tr>\n      <th>8 </th>\n      <td>   one</td>\n      <td> C</td>\n      <td> All</td>\n      <td>  9</td>\n      <td>  9</td>\n    </tr>\n    <tr>\n      <th>9 </th>\n      <td>   one</td>\n      <td> A</td>\n      <td> bar</td>\n      <td> 10</td>\n      <td> 10</td>\n    </tr>\n    <tr>\n      <th>10</th>\n      <td>   two</td>\n      <td> B</td>\n      <td> bar</td>\n      <td> 11</td>\n      <td> 11</td>\n    </tr>\n    <tr>\n      <th>11</th>\n      <td> three</td>\n      <td> C</td>\n      <td> bar</td>\n      <td> 12</td>\n      <td> 12</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n\n```\npd.pivot_table(df2, values= 'D', index=['A','B'], columns=['C'], margins=True)\n```\n\n<div style=\"max-height:1000px;max-width:1500px;overflow:auto;\">\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>C</th>\n      <th>All</th>\n      <th>bar</th>\n    </tr>\n    <tr>\n      <th>A</th>\n      <th>B</th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th rowspan=\"3\" valign=\"top\">one</th>\n      <th>A</th>\n      <td>  5.5</td>\n      <td> 10</td>\n    </tr>\n    <tr>\n      <th>B</th>\n      <td>  3.5</td>\n      <td>  5</td>\n    </tr>\n    <tr>\n      <th>C</th>\n      <td>  7.5</td>\n      <td>  6</td>\n    </tr>\n    <tr>\n      <th rowspan=\"3\" valign=\"top\">three</th>\n      <th>A</th>\n      <td>  4.0</td>\n      <td>  4</td>\n    </tr>\n    <tr>\n      <th>B</th>\n      <td>  8.0</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>C</th>\n      <td> 12.0</td>\n      <td> 12</td>\n    </tr>\n    <tr>\n      <th rowspan=\"3\" valign=\"top\">two</th>\n      <th>A</th>\n      <td>  7.0</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>B</th>\n      <td> 11.0</td>\n      <td> 11</td>\n    </tr>\n    <tr>\n      <th>C</th>\n      <td>  3.0</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>All</th>\n      <th></th>\n      <td>  6.0</td>\n      <td>  8</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n"
  }
]
