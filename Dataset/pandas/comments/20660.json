[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/380909728",
    "html_url": "https://github.com/pandas-dev/pandas/issues/20660#issuecomment-380909728",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/20660",
    "id": 380909728,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MDkwOTcyOA==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-12T18:56:49Z",
    "updated_at": "2018-04-12T18:56:49Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thanks for the report.\r\n\r\ncc @WillAyd if you have any pointers on where someone could get started here?"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/380943504",
    "html_url": "https://github.com/pandas-dev/pandas/issues/20660#issuecomment-380943504",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/20660",
    "id": 380943504,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MDk0MzUwNA==",
    "user": {
      "login": "WillAyd",
      "id": 609873,
      "node_id": "MDQ6VXNlcjYwOTg3Mw==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/609873?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/WillAyd",
      "html_url": "https://github.com/WillAyd",
      "followers_url": "https://api.github.com/users/WillAyd/followers",
      "following_url": "https://api.github.com/users/WillAyd/following{/other_user}",
      "gists_url": "https://api.github.com/users/WillAyd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/WillAyd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/WillAyd/subscriptions",
      "organizations_url": "https://api.github.com/users/WillAyd/orgs",
      "repos_url": "https://api.github.com/users/WillAyd/repos",
      "events_url": "https://api.github.com/users/WillAyd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/WillAyd/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-12T21:03:10Z",
    "updated_at": "2018-04-12T21:03:10Z",
    "author_association": "MEMBER",
    "body": "Hmm well after a quick profile it appears that the timedelta data does not leverage the Cython function. The problem starts on the below line:\r\n\r\nhttps://github.com/pandas-dev/pandas/blob/fa231e8766e02610ae5a45e4b2bc90b6c7e9ee6f/pandas/core/groupby/groupby.py#L3938\r\n\r\nFor `timedelta` that internal method returns an empty tuple, so block aggregation fails and the execution falls back to a much slower group-by-group summation.\r\n\r\nPerhaps the easiest fix is to add `numeric_only=False` to the `sum` method below:\r\n\r\nhttps://github.com/pandas-dev/pandas/blob/fa231e8766e02610ae5a45e4b2bc90b6c7e9ee6f/pandas/core/groupby/groupby.py#L1431\r\n\r\nRunning this locally gets the examples back in line with one another:\r\n\r\n```python\r\nIn [12]: %timeit td.groupby(lambda x: x).sum()\r\n8.53 ms ± 30.8 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)\r\n\r\nIn [13]: %timeit i.groupby(lambda x: x).sum()\r\n9.66 ms ± 30.8 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)\r\n```\r\n\r\nIt's not entirely clear to me what the overall purpose of `numeric_only` is so long term maybe we don't even need it, but for the time being the above should work (cc @jreback)\r\n\r\nFWIW we don't have any ASVs for timedelta so this would be a good opportunity to add.\r\n\r\n@wezzman are you interested in trying a PR for this?"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/380944124",
    "html_url": "https://github.com/pandas-dev/pandas/issues/20660#issuecomment-380944124",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/20660",
    "id": 380944124,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MDk0NDEyNA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-12T21:05:23Z",
    "updated_at": "2018-04-12T21:05:23Z",
    "author_association": "CONTRIBUTOR",
    "body": "timedelta is not a numeric type (e.g. float, int); so this is correct.\r\n\r\ncertainly could add more benchmarks though."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/380944446",
    "html_url": "https://github.com/pandas-dev/pandas/issues/20660#issuecomment-380944446",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/20660",
    "id": 380944446,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MDk0NDQ0Ng==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-12T21:06:37Z",
    "updated_at": "2018-04-12T21:06:37Z",
    "author_association": "CONTRIBUTOR",
    "body": "#18053 is different, its about ``Period`` which are currently aggregated using ``object`` dtype, not the underlying integer represenation (@TomAugspurger working on making this an EA which would be much faster)."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/380946667",
    "html_url": "https://github.com/pandas-dev/pandas/issues/20660#issuecomment-380946667",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/20660",
    "id": 380946667,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MDk0NjY2Nw==",
    "user": {
      "login": "WillAyd",
      "id": 609873,
      "node_id": "MDQ6VXNlcjYwOTg3Mw==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/609873?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/WillAyd",
      "html_url": "https://github.com/WillAyd",
      "followers_url": "https://api.github.com/users/WillAyd/followers",
      "following_url": "https://api.github.com/users/WillAyd/following{/other_user}",
      "gists_url": "https://api.github.com/users/WillAyd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/WillAyd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/WillAyd/subscriptions",
      "organizations_url": "https://api.github.com/users/WillAyd/orgs",
      "repos_url": "https://api.github.com/users/WillAyd/repos",
      "events_url": "https://api.github.com/users/WillAyd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/WillAyd/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-12T21:14:55Z",
    "updated_at": "2018-04-12T21:15:07Z",
    "author_association": "MEMBER",
    "body": "Understood on the numeric type check, but you don't have any objection to relaxing the `numeric_only` requirement for `sum` do you? I don't think it would change the outcome of the operation but just get you there faster"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/381599734",
    "html_url": "https://github.com/pandas-dev/pandas/issues/20660#issuecomment-381599734",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/20660",
    "id": 381599734,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MTU5OTczNA==",
    "user": {
      "login": "wezzman",
      "id": 4202487,
      "node_id": "MDQ6VXNlcjQyMDI0ODc=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/4202487?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wezzman",
      "html_url": "https://github.com/wezzman",
      "followers_url": "https://api.github.com/users/wezzman/followers",
      "following_url": "https://api.github.com/users/wezzman/following{/other_user}",
      "gists_url": "https://api.github.com/users/wezzman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wezzman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wezzman/subscriptions",
      "organizations_url": "https://api.github.com/users/wezzman/orgs",
      "repos_url": "https://api.github.com/users/wezzman/repos",
      "events_url": "https://api.github.com/users/wezzman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wezzman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-16T13:30:16Z",
    "updated_at": "2018-04-16T13:30:16Z",
    "author_association": "NONE",
    "body": "@WillAyd, I am unsure what you mean by a PR."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/382482224",
    "html_url": "https://github.com/pandas-dev/pandas/issues/20660#issuecomment-382482224",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/20660",
    "id": 382482224,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MjQ4MjIyNA==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-18T18:21:45Z",
    "updated_at": "2018-04-18T18:21:45Z",
    "author_association": "CONTRIBUTOR",
    "body": "PR=\"Pull Request\"\n\nhttp://pandas-docs.github.io/pandas-docs-travis/contributing.html\n\nOn Mon, Apr 16, 2018 at 8:33 AM, wezzman <notifications@github.com> wrote:\n\n> @WillAyd <https://github.com/WillAyd>, I am unsure what you mean by a PR.\n>\n> —\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/pandas-dev/pandas/issues/20660#issuecomment-381599734>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/ABQHIhd_cp-KvsEdtudO-VQliiyRuZo8ks5tpJ3FgaJpZM4TQxJA>\n> .\n>\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/407245542",
    "html_url": "https://github.com/pandas-dev/pandas/issues/20660#issuecomment-407245542",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/20660",
    "id": 407245542,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNzI0NTU0Mg==",
    "user": {
      "login": "kaijfox",
      "id": 5048348,
      "node_id": "MDQ6VXNlcjUwNDgzNDg=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/5048348?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kaijfox",
      "html_url": "https://github.com/kaijfox",
      "followers_url": "https://api.github.com/users/kaijfox/followers",
      "following_url": "https://api.github.com/users/kaijfox/following{/other_user}",
      "gists_url": "https://api.github.com/users/kaijfox/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kaijfox/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kaijfox/subscriptions",
      "organizations_url": "https://api.github.com/users/kaijfox/orgs",
      "repos_url": "https://api.github.com/users/kaijfox/repos",
      "events_url": "https://api.github.com/users/kaijfox/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kaijfox/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-24T00:57:25Z",
    "updated_at": "2018-07-24T00:57:25Z",
    "author_association": "NONE",
    "body": "I know this is a fairly old thread, but I thought I'd mention that this is a problem for dtype `bool` too."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/407245954",
    "html_url": "https://github.com/pandas-dev/pandas/issues/20660#issuecomment-407245954",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/20660",
    "id": 407245954,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNzI0NTk1NA==",
    "user": {
      "login": "WillAyd",
      "id": 609873,
      "node_id": "MDQ6VXNlcjYwOTg3Mw==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/609873?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/WillAyd",
      "html_url": "https://github.com/WillAyd",
      "followers_url": "https://api.github.com/users/WillAyd/followers",
      "following_url": "https://api.github.com/users/WillAyd/following{/other_user}",
      "gists_url": "https://api.github.com/users/WillAyd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/WillAyd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/WillAyd/subscriptions",
      "organizations_url": "https://api.github.com/users/WillAyd/orgs",
      "repos_url": "https://api.github.com/users/WillAyd/repos",
      "events_url": "https://api.github.com/users/WillAyd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/WillAyd/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-24T00:59:49Z",
    "updated_at": "2018-07-24T00:59:57Z",
    "author_association": "MEMBER",
    "body": "@kaijfox if you are up for it PRs are always welcome. I believe the resolution was highlighted in some comments above so if you can piece together with benchmarks would certainly take a look!"
  }
]
