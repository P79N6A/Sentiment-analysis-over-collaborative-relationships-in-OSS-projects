[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/237722825",
    "html_url": "https://github.com/pandas-dev/pandas/issues/13913#issuecomment-237722825",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13913",
    "id": 237722825,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNzcyMjgyNQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-05T00:12:24Z",
    "updated_at": "2016-08-05T00:12:24Z",
    "author_association": "CONTRIBUTOR",
    "body": "see the warning in the doc note: http://pandas.pydata.org/pandas-docs/stable/groupby.html#flexible-apply\n\nthis is an implementation detail / the function will be called multiple times to assess whether it mutates and its output shape.\n\nfurther that you are doing is quite inefficient\nyou need to do less in custom apply functions / better simply don't use them\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/237743795",
    "html_url": "https://github.com/pandas-dev/pandas/issues/13913#issuecomment-237743795",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13913",
    "id": 237743795,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNzc0Mzc5NQ==",
    "user": {
      "login": "ankur-gupta",
      "id": 7110058,
      "node_id": "MDQ6VXNlcjcxMTAwNTg=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/7110058?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ankur-gupta",
      "html_url": "https://github.com/ankur-gupta",
      "followers_url": "https://api.github.com/users/ankur-gupta/followers",
      "following_url": "https://api.github.com/users/ankur-gupta/following{/other_user}",
      "gists_url": "https://api.github.com/users/ankur-gupta/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ankur-gupta/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ankur-gupta/subscriptions",
      "organizations_url": "https://api.github.com/users/ankur-gupta/orgs",
      "repos_url": "https://api.github.com/users/ankur-gupta/repos",
      "events_url": "https://api.github.com/users/ankur-gupta/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ankur-gupta/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-05T03:02:04Z",
    "updated_at": "2016-08-05T03:02:04Z",
    "author_association": "NONE",
    "body": "I am concerned about the print output:\n\n```\n   Data   Group  Mean\n1     2  Group2   1.0\n2     3  Group2\n```\n\nThis dataframe doesn't actually exist in the GroupBy object list but it is still being passed to the custom function.\n\nI encounter datasets in which the use of custom apply functions is very helpful and straightforward. If the custom apply functions are not recommended, I would be happy to switch to a better alternative. What would you recommend as an alternative ?\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/237819765",
    "html_url": "https://github.com/pandas-dev/pandas/issues/13913#issuecomment-237819765",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13913",
    "id": 237819765,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNzgxOTc2NQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-05T10:41:19Z",
    "updated_at": "2016-08-05T10:41:19Z",
    "author_association": "CONTRIBUTOR",
    "body": "you are violating guarantees of not to change the internal structure. We do allow this somewhat but you doing very odd (and completely non-performant things)\n\nsimply\n\n```\nIn [4]: df_test.groupby('Group').mean()\nOut[4]: \n        Data\nGroup       \nGroup1   1.0\nGroup2   2.5\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/237909525",
    "html_url": "https://github.com/pandas-dev/pandas/issues/13913#issuecomment-237909525",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13913",
    "id": 237909525,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNzkwOTUyNQ==",
    "user": {
      "login": "bhagerman00",
      "id": 15328599,
      "node_id": "MDQ6VXNlcjE1MzI4NTk5",
      "avatar_url": "https://avatars3.githubusercontent.com/u/15328599?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bhagerman00",
      "html_url": "https://github.com/bhagerman00",
      "followers_url": "https://api.github.com/users/bhagerman00/followers",
      "following_url": "https://api.github.com/users/bhagerman00/following{/other_user}",
      "gists_url": "https://api.github.com/users/bhagerman00/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bhagerman00/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bhagerman00/subscriptions",
      "organizations_url": "https://api.github.com/users/bhagerman00/orgs",
      "repos_url": "https://api.github.com/users/bhagerman00/repos",
      "events_url": "https://api.github.com/users/bhagerman00/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bhagerman00/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-05T17:20:04Z",
    "updated_at": "2016-08-05T17:20:04Z",
    "author_association": "NONE",
    "body": "Appreciate the replies. I had seen this warning previously, \n\n`In the current implementation apply calls func twice on the first group`\n\nBut if this is known behavior I'm encountering wouldn't there only be 3 print statements, not the resulting 5? Something like the following:\n\n```\n   Data   Group\n0     1  Group1\n   Data   Group\n0     1  Group1\n   Data   Group\n1     2  Group2\n2     3  Group2\n```\n\nIn the above case it's clear that the DF's being passed as arguments are accurate reflections. The print statement that @ankur-gupta pointed out shouldn't exist/be passed through the function. This makes it difficult to evaluate or debug. I understand that there is an explicit `.mean()` call that would be more appropriate for this case, I included the custom function as a basic example of the behavior. \n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/237912071",
    "html_url": "https://github.com/pandas-dev/pandas/issues/13913#issuecomment-237912071",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13913",
    "id": 237912071,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNzkxMjA3MQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-05T17:30:14Z",
    "updated_at": "2016-08-05T17:30:14Z",
    "author_association": "CONTRIBUTOR",
    "body": "anyone is welcome to debug, see if you actually think something odd is going on. This user function violates some guarantees (meaning you are modifying state of the internal functions in a non-detectable way).\n\nI get that you _think_ you actually want to do this. If you can find a better way great. Please post and i'll reopen.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/237913996",
    "html_url": "https://github.com/pandas-dev/pandas/issues/13913#issuecomment-237913996",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13913",
    "id": 237913996,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNzkxMzk5Ng==",
    "user": {
      "login": "ankur-gupta",
      "id": 7110058,
      "node_id": "MDQ6VXNlcjcxMTAwNTg=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/7110058?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ankur-gupta",
      "html_url": "https://github.com/ankur-gupta",
      "followers_url": "https://api.github.com/users/ankur-gupta/followers",
      "following_url": "https://api.github.com/users/ankur-gupta/following{/other_user}",
      "gists_url": "https://api.github.com/users/ankur-gupta/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ankur-gupta/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ankur-gupta/subscriptions",
      "organizations_url": "https://api.github.com/users/ankur-gupta/orgs",
      "repos_url": "https://api.github.com/users/ankur-gupta/repos",
      "events_url": "https://api.github.com/users/ankur-gupta/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ankur-gupta/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-05T17:37:51Z",
    "updated_at": "2016-08-05T17:37:51Z",
    "author_association": "NONE",
    "body": "For me, adding a new column is an extremely common use case. The content of the new column has a very complicated relationship with the content of the smaller \"grouped\" dataframe.\nFor example, if there are more than 50% missing values in existing columns of the \"grouped\" dataframe, then I need to add a new column which has a default value, but if there are fewer missing values then I need to perform some complicated statistical operation such as interpolation. This is just an example, but there are more complicated tasks that I need to perform. So, I find that custom functions are very straightforward to use and debug, even if they're not the most efficient.\n\nBut I am happy to use an alternative to custom functions that performs the same complicated tasks. \n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/237914646",
    "html_url": "https://github.com/pandas-dev/pandas/issues/13913#issuecomment-237914646",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13913",
    "id": 237914646,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNzkxNDY0Ng==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-05T17:40:30Z",
    "updated_at": "2016-08-05T17:40:30Z",
    "author_association": "CONTRIBUTOR",
    "body": "your 'way' of doing things is not idiomatic pandas at all. pls see the documentation [here](http://pandas-docs.github.io/pandas-docs-travis/groupby.html)\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/237918909",
    "html_url": "https://github.com/pandas-dev/pandas/issues/13913#issuecomment-237918909",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13913",
    "id": 237918909,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNzkxODkwOQ==",
    "user": {
      "login": "ankur-gupta",
      "id": 7110058,
      "node_id": "MDQ6VXNlcjcxMTAwNTg=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/7110058?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ankur-gupta",
      "html_url": "https://github.com/ankur-gupta",
      "followers_url": "https://api.github.com/users/ankur-gupta/followers",
      "following_url": "https://api.github.com/users/ankur-gupta/following{/other_user}",
      "gists_url": "https://api.github.com/users/ankur-gupta/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ankur-gupta/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ankur-gupta/subscriptions",
      "organizations_url": "https://api.github.com/users/ankur-gupta/orgs",
      "repos_url": "https://api.github.com/users/ankur-gupta/repos",
      "events_url": "https://api.github.com/users/ankur-gupta/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ankur-gupta/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-05T17:57:07Z",
    "updated_at": "2016-08-05T17:57:07Z",
    "author_association": "NONE",
    "body": "Thanks. I understand that what I am doing is not idiomatic in pandas. Coming from an R (`plyr::ddply`) background, I attempted to use `apply` in the exact same manner, which is not correct. \n\nThinking more about my use cases, I can simply add an empty new column to the whole dataframe and then simply fill in the values within the custom function. This way the custom function won't violate the structure. \n"
  }
]
