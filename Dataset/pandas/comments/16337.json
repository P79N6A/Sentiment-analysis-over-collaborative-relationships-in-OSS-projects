[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/301022044",
    "html_url": "https://github.com/pandas-dev/pandas/issues/16337#issuecomment-301022044",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/16337",
    "id": 301022044,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwMTAyMjA0NA==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-05-12T08:53:51Z",
    "updated_at": "2017-05-12T08:53:51Z",
    "author_association": "MEMBER",
    "body": "See the what's new docs for some pointers as alternatives using renaming afterwards: http://pandas.pydata.org/pandas-docs/stable/whatsnew.html#deprecate-groupby-agg-with-a-dictionary-when-renaming (although it will be a bit more convoluted)\r\n\r\nAnother option is have 'named' functions instead of lambda's:\r\n\r\n```\r\nIn [14]: def Fraud(group):\r\n    ...:     return group.sum()\r\n    ...: \r\n\r\nIn [15]: def NonFraud(group):\r\n    ...:     return len(group)-sum(group)\r\n    ...: \r\n\r\nIn [16]: def Squared(group):\r\n    ...:     return (sum(group))**2\r\n    ...: \r\n\r\nIn [20]: df.groupby(df['City'])['isFraud'].agg([Fraud, NonFraud, Squared])\r\nOut[20]: \r\n         Fraud  NonFraud  Squared\r\nCity                             \r\nChicago      0         1        0\r\nLA           2         0        4\r\nNYC          1         2        1\r\n```\r\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/301037734",
    "html_url": "https://github.com/pandas-dev/pandas/issues/16337#issuecomment-301037734",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/16337",
    "id": 301037734,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwMTAzNzczNA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-05-12T10:05:45Z",
    "updated_at": "2017-05-12T10:05:45Z",
    "author_association": "CONTRIBUTOR",
    "body": "Another way, which I personally would do (this will also be more performant)\r\n\r\n```\r\nIn [18]: df = pd.DataFrame({'City':['LA', 'NYC', 'NYC', 'LA', 'Chicago', 'NYC'],\r\n    ...:        'isFraud':[1, 0, 0, 1, 0, 1]})\r\n    ...: \r\n    ...: result = df.groupby(df['City'])['isFraud'].agg(['sum', 'size'])\r\n    ...: result = pd.DataFrame({'Fraud': result['sum'], \r\n    ...:                        'NonFraud': result['size']-result['sum'], \r\n    ...:                        'Squared': result['sum']**2})\r\n    ...: result\r\n    ...: \r\n    ...: \r\n    ...: \r\n    ...: \r\nOut[18]: \r\n         Fraud  NonFraud  Squared\r\nCity                             \r\nChicago      0         1        0\r\nLA           2         0        4\r\nNYC          1         2        1\r\n```"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/301346873",
    "html_url": "https://github.com/pandas-dev/pandas/issues/16337#issuecomment-301346873",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/16337",
    "id": 301346873,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwMTM0Njg3Mw==",
    "user": {
      "login": "allen-q",
      "id": 20735355,
      "node_id": "MDQ6VXNlcjIwNzM1MzU1",
      "avatar_url": "https://avatars1.githubusercontent.com/u/20735355?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/allen-q",
      "html_url": "https://github.com/allen-q",
      "followers_url": "https://api.github.com/users/allen-q/followers",
      "following_url": "https://api.github.com/users/allen-q/following{/other_user}",
      "gists_url": "https://api.github.com/users/allen-q/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/allen-q/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/allen-q/subscriptions",
      "organizations_url": "https://api.github.com/users/allen-q/orgs",
      "repos_url": "https://api.github.com/users/allen-q/repos",
      "events_url": "https://api.github.com/users/allen-q/events{/privacy}",
      "received_events_url": "https://api.github.com/users/allen-q/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-05-14T23:18:53Z",
    "updated_at": "2017-05-14T23:18:53Z",
    "author_association": "NONE",
    "body": "Thanks @jorisvandenbossche  and @jreback for your answers. It seems there is no short alternative way to do this in one line. It's sad to see such a handy feature to get removed. "
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/373130598",
    "html_url": "https://github.com/pandas-dev/pandas/issues/16337#issuecomment-373130598",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/16337",
    "id": 373130598,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MzEzMDU5OA==",
    "user": {
      "login": "bridwell",
      "id": 5004800,
      "node_id": "MDQ6VXNlcjUwMDQ4MDA=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/5004800?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bridwell",
      "html_url": "https://github.com/bridwell",
      "followers_url": "https://api.github.com/users/bridwell/followers",
      "following_url": "https://api.github.com/users/bridwell/following{/other_user}",
      "gists_url": "https://api.github.com/users/bridwell/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bridwell/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bridwell/subscriptions",
      "organizations_url": "https://api.github.com/users/bridwell/orgs",
      "repos_url": "https://api.github.com/users/bridwell/repos",
      "events_url": "https://api.github.com/users/bridwell/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bridwell/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-14T18:36:37Z",
    "updated_at": "2018-03-14T19:02:38Z",
    "author_association": "NONE",
    "body": "So it looks like using a list of tuples, rather than a dict, is still supported?\r\n\r\n```python\r\ndf.groupby(df['City'])['isFraud'].agg([\r\n    ('Fraud', sum),\r\n    ('Non-Fraud', lambda x: len(x)-sum(x)),\r\n    ('Squared', lambda x: (sum(x))**2)\r\n])\r\n        Fraud   Non-Fraud   Squared\r\nCity            \r\nChicago     0           1          0\r\nLA          2           0          4\r\nNYC         1           2          1\r\n```\r\nThis even looks to be supported when applying different functions to different columns, similar to the dict approach:\r\n\r\n```python\r\ndf['severity'] = np.arange(len(df))\r\n\r\ndf.groupby(df['City']).agg({\r\n    'isFraud': [\r\n        ('Fraud', sum),\r\n        ('Non-Fraud', lambda x: len(x)-sum(x)),\r\n        ('Squared', lambda x: (sum(x))**2)\r\n    ], \r\n    'severity': [('avg severity', 'mean')]    \r\n})\r\n            isFraud                         severity\r\n        Fraud   Non-Fraud   Squared     avg severity\r\nCity                \r\nChicago     0    1          0           4.000000\r\nLA          2    0          4           1.500000\r\nNYC         1    2          1           2.666667\r\n```\r\n\r\n\r\nWill that continue to be supported?"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/387779603",
    "html_url": "https://github.com/pandas-dev/pandas/issues/16337#issuecomment-387779603",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/16337",
    "id": 387779603,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4Nzc3OTYwMw==",
    "user": {
      "login": "randomgambit",
      "id": 8282510,
      "node_id": "MDQ6VXNlcjgyODI1MTA=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/8282510?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/randomgambit",
      "html_url": "https://github.com/randomgambit",
      "followers_url": "https://api.github.com/users/randomgambit/followers",
      "following_url": "https://api.github.com/users/randomgambit/following{/other_user}",
      "gists_url": "https://api.github.com/users/randomgambit/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/randomgambit/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/randomgambit/subscriptions",
      "organizations_url": "https://api.github.com/users/randomgambit/orgs",
      "repos_url": "https://api.github.com/users/randomgambit/repos",
      "events_url": "https://api.github.com/users/randomgambit/events{/privacy}",
      "received_events_url": "https://api.github.com/users/randomgambit/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-09T15:31:48Z",
    "updated_at": "2018-05-09T15:42:13Z",
    "author_association": "NONE",
    "body": "^^ this is even what is recommended in wes's last Pandas book. a bit confusing indeed"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/428276459",
    "html_url": "https://github.com/pandas-dev/pandas/issues/16337#issuecomment-428276459",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/16337",
    "id": 428276459,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyODI3NjQ1OQ==",
    "user": {
      "login": "GuiMarthe",
      "id": 16212855,
      "node_id": "MDQ6VXNlcjE2MjEyODU1",
      "avatar_url": "https://avatars3.githubusercontent.com/u/16212855?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/GuiMarthe",
      "html_url": "https://github.com/GuiMarthe",
      "followers_url": "https://api.github.com/users/GuiMarthe/followers",
      "following_url": "https://api.github.com/users/GuiMarthe/following{/other_user}",
      "gists_url": "https://api.github.com/users/GuiMarthe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/GuiMarthe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/GuiMarthe/subscriptions",
      "organizations_url": "https://api.github.com/users/GuiMarthe/orgs",
      "repos_url": "https://api.github.com/users/GuiMarthe/repos",
      "events_url": "https://api.github.com/users/GuiMarthe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/GuiMarthe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-09T17:18:03Z",
    "updated_at": "2018-10-09T17:18:03Z",
    "author_association": "NONE",
    "body": "How is the deprecation status of the tuple naming method that @bridwell mentions?\r\nWill it continue to be supported?"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/460257871",
    "html_url": "https://github.com/pandas-dev/pandas/issues/16337#issuecomment-460257871",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/16337",
    "id": 460257871,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2MDI1Nzg3MQ==",
    "user": {
      "login": "eliadl",
      "id": 18311033,
      "node_id": "MDQ6VXNlcjE4MzExMDMz",
      "avatar_url": "https://avatars2.githubusercontent.com/u/18311033?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eliadl",
      "html_url": "https://github.com/eliadl",
      "followers_url": "https://api.github.com/users/eliadl/followers",
      "following_url": "https://api.github.com/users/eliadl/following{/other_user}",
      "gists_url": "https://api.github.com/users/eliadl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eliadl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eliadl/subscriptions",
      "organizations_url": "https://api.github.com/users/eliadl/orgs",
      "repos_url": "https://api.github.com/users/eliadl/repos",
      "events_url": "https://api.github.com/users/eliadl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eliadl/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-04T13:55:42Z",
    "updated_at": "2019-02-04T13:56:29Z",
    "author_association": "NONE",
    "body": "How does the documentation account for @bridwell's non-warning example?\r\nPlease clarify in the documentation and add more examples as needed."
  }
]
