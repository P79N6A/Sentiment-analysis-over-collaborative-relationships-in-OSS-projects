[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/361320197",
    "html_url": "https://github.com/pandas-dev/pandas/pull/19433#issuecomment-361320197",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/19433",
    "id": 361320197,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MTMyMDE5Nw==",
    "user": {
      "login": "codecov[bot]",
      "id": 22429695,
      "node_id": "MDM6Qm90MjI0Mjk2OTU=",
      "avatar_url": "https://avatars2.githubusercontent.com/in/254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/codecov%5Bbot%5D",
      "html_url": "https://github.com/apps/codecov",
      "followers_url": "https://api.github.com/users/codecov%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/codecov%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/codecov%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/codecov%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/codecov%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/codecov%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/codecov%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/codecov%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/codecov%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2018-01-29T17:25:06Z",
    "updated_at": "2018-02-05T09:05:56Z",
    "author_association": "NONE",
    "body": "# [Codecov](https://codecov.io/gh/pandas-dev/pandas/pull/19433?src=pr&el=h1) Report\n> Merging [#19433](https://codecov.io/gh/pandas-dev/pandas/pull/19433?src=pr&el=desc) into [master](https://codecov.io/gh/pandas-dev/pandas/commit/de39a1572fcf82071f3c0b5f22be1611222bdf41?src=pr&el=desc) will **decrease** coverage by `0.02%`.\n> The diff coverage is `100%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/pandas-dev/pandas/pull/19433/graphs/tree.svg?token=eZ4WkYLtcO&src=pr&height=150&width=650)](https://codecov.io/gh/pandas-dev/pandas/pull/19433?src=pr&el=tree)\n\n```diff\n@@            Coverage Diff             @@\n##           master   #19433      +/-   ##\n==========================================\n- Coverage   91.62%   91.59%   -0.03%     \n==========================================\n  Files         150      150              \n  Lines       48714    48720       +6     \n==========================================\n- Hits        44633    44625       -8     \n- Misses       4081     4095      +14\n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| #multiple | `89.96% <100%> (-0.03%)` | :arrow_down: |\n| #single | `41.75% <22.22%> (-0.01%)` | :arrow_down: |\n\n| [Impacted Files](https://codecov.io/gh/pandas-dev/pandas/pull/19433?src=pr&el=tree) | Coverage Δ | |\n|---|---|---|\n| [pandas/core/groupby.py](https://codecov.io/gh/pandas-dev/pandas/pull/19433/diff?src=pr&el=tree#diff-cGFuZGFzL2NvcmUvZ3JvdXBieS5weQ==) | `92.17% <100%> (+0.02%)` | :arrow_up: |\n| [pandas/plotting/\\_converter.py](https://codecov.io/gh/pandas-dev/pandas/pull/19433/diff?src=pr&el=tree#diff-cGFuZGFzL3Bsb3R0aW5nL19jb252ZXJ0ZXIucHk=) | `65.22% <0%> (-1.74%)` | :arrow_down: |\n| [pandas/util/testing.py](https://codecov.io/gh/pandas-dev/pandas/pull/19433/diff?src=pr&el=tree#diff-cGFuZGFzL3V0aWwvdGVzdGluZy5weQ==) | `83.64% <0%> (-0.21%)` | :arrow_down: |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/pandas-dev/pandas/pull/19433?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/pandas-dev/pandas/pull/19433?src=pr&el=footer). Last update [de39a15...2f25d40](https://codecov.io/gh/pandas-dev/pandas/pull/19433?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/361332413",
    "html_url": "https://github.com/pandas-dev/pandas/pull/19433#issuecomment-361332413",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/19433",
    "id": 361332413,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MTMzMjQxMw==",
    "user": {
      "login": "discort",
      "id": 4944021,
      "node_id": "MDQ6VXNlcjQ5NDQwMjE=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/4944021?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/discort",
      "html_url": "https://github.com/discort",
      "followers_url": "https://api.github.com/users/discort/followers",
      "following_url": "https://api.github.com/users/discort/following{/other_user}",
      "gists_url": "https://api.github.com/users/discort/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/discort/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/discort/subscriptions",
      "organizations_url": "https://api.github.com/users/discort/orgs",
      "repos_url": "https://api.github.com/users/discort/repos",
      "events_url": "https://api.github.com/users/discort/events{/privacy}",
      "received_events_url": "https://api.github.com/users/discort/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-29T18:03:57Z",
    "updated_at": "2018-01-29T18:03:57Z",
    "author_association": "CONTRIBUTOR",
    "body": "@jreback "
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/361433022",
    "html_url": "https://github.com/pandas-dev/pandas/pull/19433#issuecomment-361433022",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/19433",
    "id": 361433022,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MTQzMzAyMg==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-30T00:20:14Z",
    "updated_at": "2018-01-30T00:20:14Z",
    "author_association": "CONTRIBUTOR",
    "body": "try with something like this. your patch is just working around the issue and not fixing it at the source. its pretty deep code, but try here.\r\n\r\n```\r\ndiff --git a/pandas/core/groupby.py b/pandas/core/groupby.py\r\nindex 4c03f3bfa..6a2cd69eb 100644\r\n--- a/pandas/core/groupby.py\r\n+++ b/pandas/core/groupby.py\r\n@@ -466,11 +466,15 @@ class Grouper(object):\r\n                 \"The Grouper cannot specify both a key and a level!\")\r\n \r\n         # the key must be a valid info item\r\n-        if self.key is not None and not isinstance(obj, Series):\r\n+        if self.key is not None:\r\n             key = self.key\r\n-            if key not in obj._info_axis:\r\n-                raise KeyError(\"The grouper name {0} is not found\".format(key))\r\n-            ax = Index(obj[key], name=key)\r\n+\r\n+            if getattr(self.grouper, 'name', None) == key:\r\n+                ax = self.grouper\r\n+            else:\r\n+                if key not in obj._info_axis:\r\n+                    raise KeyError(\"The grouper name {0} is not found\".format(key))\r\n+                ax = Index(obj[key], name=key)\r\n \r\n         else:\r\n             ax = obj._get_axis(self.axis)\r\ndiff --git a/pandas/core/resample.py b/pandas/core/resample.py\r\nindex 03b522abc..43391061d 100644\r\n--- a/pandas/core/resample.py\r\n+++ b/pandas/core/resample.py\r\n@@ -743,11 +743,6 @@ class _GroupByMixin(GroupByMixin):\r\n \r\n             return x.apply(f, **kwargs)\r\n \r\n-        # Patch the index in case we're applying after __getitem__. GH 17813\r\n-        if self.groupby.key:\r\n-            key = self.groupby.key\r\n-            self._groupby.obj.index = Index(self.groupby.obj[key], key=key)\r\n-\r\n         result = self._groupby.apply(func)\r\n         return self._wrap_result(result)\r\n \r\n```"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/361508271",
    "html_url": "https://github.com/pandas-dev/pandas/pull/19433#issuecomment-361508271",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/19433",
    "id": 361508271,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MTUwODI3MQ==",
    "user": {
      "login": "discort",
      "id": 4944021,
      "node_id": "MDQ6VXNlcjQ5NDQwMjE=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/4944021?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/discort",
      "html_url": "https://github.com/discort",
      "followers_url": "https://api.github.com/users/discort/followers",
      "following_url": "https://api.github.com/users/discort/following{/other_user}",
      "gists_url": "https://api.github.com/users/discort/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/discort/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/discort/subscriptions",
      "organizations_url": "https://api.github.com/users/discort/orgs",
      "repos_url": "https://api.github.com/users/discort/repos",
      "events_url": "https://api.github.com/users/discort/events{/privacy}",
      "received_events_url": "https://api.github.com/users/discort/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-30T08:10:14Z",
    "updated_at": "2018-01-30T08:11:42Z",
    "author_association": "CONTRIBUTOR",
    "body": "I applied your diff. The result, in this case, would be:\r\n```\r\nIn [11]: result\r\nOut[11]:\r\nid  date\r\na   2016-01-01    2\r\n    2016-01-03    0\r\n    2016-01-05    0\r\nb   2016-01-01    2\r\n    2016-01-03    1\r\n    2016-01-05    0\r\nName: data, dtype: int64\r\n```\r\n\r\ninstead of:\r\n```\r\nIn [10]: exp\r\nOut[10]:\r\nid  date\r\na   2016-01-01    2\r\nb   2016-01-03    2\r\n    2016-01-05    1\r\nName: data, dtype: int64\r\n```\r\n\r\nBut I got your idea. The main challenge is that `self.grouper` is overriding [here](https://github.com/pandas-dev/pandas/blob/33a1202cd3e2dbc86b9b4adc1b54152c8cd67075/pandas/core/groupby.py#L511). Could you take a look at newest solution? @jreback "
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/363023817",
    "html_url": "https://github.com/pandas-dev/pandas/pull/19433#issuecomment-363023817",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/19433",
    "id": 363023817,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MzAyMzgxNw==",
    "user": {
      "login": "discort",
      "id": 4944021,
      "node_id": "MDQ6VXNlcjQ5NDQwMjE=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/4944021?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/discort",
      "html_url": "https://github.com/discort",
      "followers_url": "https://api.github.com/users/discort/followers",
      "following_url": "https://api.github.com/users/discort/following{/other_user}",
      "gists_url": "https://api.github.com/users/discort/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/discort/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/discort/subscriptions",
      "organizations_url": "https://api.github.com/users/discort/orgs",
      "repos_url": "https://api.github.com/users/discort/repos",
      "events_url": "https://api.github.com/users/discort/events{/privacy}",
      "received_events_url": "https://api.github.com/users/discort/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-05T09:13:57Z",
    "updated_at": "2018-02-05T09:13:57Z",
    "author_association": "CONTRIBUTOR",
    "body": "@jreback "
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/363054857",
    "html_url": "https://github.com/pandas-dev/pandas/pull/19433#issuecomment-363054857",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/19433",
    "id": 363054857,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MzA1NDg1Nw==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-05T11:14:50Z",
    "updated_at": "2018-02-05T11:14:50Z",
    "author_association": "CONTRIBUTOR",
    "body": "thanks @discort "
  }
]
