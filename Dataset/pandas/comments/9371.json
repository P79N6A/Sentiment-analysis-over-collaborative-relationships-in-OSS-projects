[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/72004562",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9371#issuecomment-72004562",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9371",
    "id": 72004562,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyMDA0NTYy",
    "user": {
      "login": "twiecki",
      "id": 674200,
      "node_id": "MDQ6VXNlcjY3NDIwMA==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/674200?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/twiecki",
      "html_url": "https://github.com/twiecki",
      "followers_url": "https://api.github.com/users/twiecki/followers",
      "following_url": "https://api.github.com/users/twiecki/following{/other_user}",
      "gists_url": "https://api.github.com/users/twiecki/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/twiecki/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/twiecki/subscriptions",
      "organizations_url": "https://api.github.com/users/twiecki/orgs",
      "repos_url": "https://api.github.com/users/twiecki/repos",
      "events_url": "https://api.github.com/users/twiecki/events{/privacy}",
      "received_events_url": "https://api.github.com/users/twiecki/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-01-29T10:43:46Z",
    "updated_at": "2015-01-29T10:43:46Z",
    "author_association": "CONTRIBUTOR",
    "body": "Passing some wrappers and directly calling `set_value` I can get this down to:\n\n```\nIn [20]: %timeit s.index._engine.set_value(s.values, 'AAPL', 25.)\n100000 loops, best of 3: 3.1 µs per loop\n```\n\nwith Pandas 0.15.2.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/72004750",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9371#issuecomment-72004750",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9371",
    "id": 72004750,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyMDA0NzUw",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-01-29T10:45:10Z",
    "updated_at": "2015-01-29T10:45:10Z",
    "author_association": "CONTRIBUTOR",
    "body": "There is a quite a lot more checking in later versions. How is this a practical regression? Its so by 4.5 us on a single call. This might be several function calls. \n\nIf you want to disregard all checking and possible errors.\n\n```\nIn [6]: %timeit s.values[s.index.get_loc('AAPL')] = 25\n100000 loops, best of 3: 2.8 us per loop\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/72004833",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9371#issuecomment-72004833",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9371",
    "id": 72004833,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyMDA0ODMz",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-01-29T10:45:53Z",
    "updated_at": "2015-01-29T10:45:53Z",
    "author_association": "CONTRIBUTOR",
    "body": "I'll reiterate. If this kind of setting actually matters, then you are doing things wrong. You need to set in a vectorized way. Setting single elements like this is not a good use of pandas. \n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/72006313",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9371#issuecomment-72006313",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9371",
    "id": 72006313,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyMDA2MzEz",
    "user": {
      "login": "twiecki",
      "id": 674200,
      "node_id": "MDQ6VXNlcjY3NDIwMA==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/674200?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/twiecki",
      "html_url": "https://github.com/twiecki",
      "followers_url": "https://api.github.com/users/twiecki/followers",
      "following_url": "https://api.github.com/users/twiecki/following{/other_user}",
      "gists_url": "https://api.github.com/users/twiecki/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/twiecki/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/twiecki/subscriptions",
      "organizations_url": "https://api.github.com/users/twiecki/orgs",
      "repos_url": "https://api.github.com/users/twiecki/repos",
      "events_url": "https://api.github.com/users/twiecki/events{/privacy}",
      "received_events_url": "https://api.github.com/users/twiecki/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-01-29T10:58:29Z",
    "updated_at": "2015-01-29T10:58:29Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thanks @jreback. The `get_loc` takes about 3.01µs on my machine so still quite a bit slower but I'll think of other ways to do the updating.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/72007527",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9371#issuecomment-72007527",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9371",
    "id": 72007527,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyMDA3NTI3",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-01-29T11:08:30Z",
    "updated_at": "2015-01-29T11:08:37Z",
    "author_association": "CONTRIBUTOR",
    "body": "@twiecki as I said, maybe show the bigger issue and what you are doing. There are much better ways to update than individual series.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/72043181",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9371#issuecomment-72043181",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9371",
    "id": 72043181,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyMDQzMTgx",
    "user": {
      "login": "twiecki",
      "id": 674200,
      "node_id": "MDQ6VXNlcjY3NDIwMA==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/674200?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/twiecki",
      "html_url": "https://github.com/twiecki",
      "followers_url": "https://api.github.com/users/twiecki/followers",
      "following_url": "https://api.github.com/users/twiecki/following{/other_user}",
      "gists_url": "https://api.github.com/users/twiecki/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/twiecki/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/twiecki/subscriptions",
      "organizations_url": "https://api.github.com/users/twiecki/orgs",
      "repos_url": "https://api.github.com/users/twiecki/repos",
      "events_url": "https://api.github.com/users/twiecki/events{/privacy}",
      "received_events_url": "https://api.github.com/users/twiecki/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-01-29T15:27:07Z",
    "updated_at": "2015-01-29T15:27:07Z",
    "author_association": "CONTRIBUTOR",
    "body": "@jreback I'm afraid this one would require some larger-scale refactoring on our side. Basically, we are maintaining a Series object that keeps track of the last stock price of a security. This gets updated a lot so as we're trying to upgrade pandas, this showed up as one bottleneck that caused `zipline` to run much slower:\nhttps://github.com/quantopian/zipline/blob/master/zipline/finance/performance/period.py#L152\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/72070102",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9371#issuecomment-72070102",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9371",
    "id": 72070102,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyMDcwMTAy",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-01-29T17:45:57Z",
    "updated_at": "2015-01-29T17:45:57Z",
    "author_association": "CONTRIBUTOR",
    "body": "you should just make it a dict\na series is way heavy weight for that \n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/72081045",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9371#issuecomment-72081045",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9371",
    "id": 72081045,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyMDgxMDQ1",
    "user": {
      "login": "twiecki",
      "id": 674200,
      "node_id": "MDQ6VXNlcjY3NDIwMA==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/674200?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/twiecki",
      "html_url": "https://github.com/twiecki",
      "followers_url": "https://api.github.com/users/twiecki/followers",
      "following_url": "https://api.github.com/users/twiecki/following{/other_user}",
      "gists_url": "https://api.github.com/users/twiecki/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/twiecki/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/twiecki/subscriptions",
      "organizations_url": "https://api.github.com/users/twiecki/orgs",
      "repos_url": "https://api.github.com/users/twiecki/repos",
      "events_url": "https://api.github.com/users/twiecki/events{/privacy}",
      "received_events_url": "https://api.github.com/users/twiecki/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-01-29T18:50:05Z",
    "updated_at": "2015-01-29T18:50:05Z",
    "author_association": "CONTRIBUTOR",
    "body": "Yeah, I tried that but it does need to get converted to Series at one point which induces object creation cost.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/72081768",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9371#issuecomment-72081768",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9371",
    "id": 72081768,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyMDgxNzY4",
    "user": {
      "login": "twiecki",
      "id": 674200,
      "node_id": "MDQ6VXNlcjY3NDIwMA==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/674200?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/twiecki",
      "html_url": "https://github.com/twiecki",
      "followers_url": "https://api.github.com/users/twiecki/followers",
      "following_url": "https://api.github.com/users/twiecki/following{/other_user}",
      "gists_url": "https://api.github.com/users/twiecki/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/twiecki/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/twiecki/subscriptions",
      "organizations_url": "https://api.github.com/users/twiecki/orgs",
      "repos_url": "https://api.github.com/users/twiecki/repos",
      "events_url": "https://api.github.com/users/twiecki/events{/privacy}",
      "received_events_url": "https://api.github.com/users/twiecki/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-01-29T18:54:06Z",
    "updated_at": "2015-01-29T18:54:06Z",
    "author_association": "CONTRIBUTOR",
    "body": "Just out of curiosity, why is the old Series still faster here? It seems that `s.values[s.index.get_loc('AAPL')]` is just doing the minimum that's required so I wonder where the difference stems from. I suppose it has to be that the index lookup is more expensive.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/72101199",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9371#issuecomment-72101199",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9371",
    "id": 72101199,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyMTAxMTk5",
    "user": {
      "login": "dalejung",
      "id": 610115,
      "node_id": "MDQ6VXNlcjYxMDExNQ==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/610115?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dalejung",
      "html_url": "https://github.com/dalejung",
      "followers_url": "https://api.github.com/users/dalejung/followers",
      "following_url": "https://api.github.com/users/dalejung/following{/other_user}",
      "gists_url": "https://api.github.com/users/dalejung/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dalejung/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dalejung/subscriptions",
      "organizations_url": "https://api.github.com/users/dalejung/orgs",
      "repos_url": "https://api.github.com/users/dalejung/repos",
      "events_url": "https://api.github.com/users/dalejung/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dalejung/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-01-29T20:48:47Z",
    "updated_at": "2015-01-29T20:48:47Z",
    "author_association": "CONTRIBUTOR",
    "body": "``` python\nloc_map = dict(zip(s.index, range(len(s))))\nvalues = s.values\n\nvalues[loc_map['AAPL']] = 25 # should be real fast\n```\n\nTry that, you'd need to store the `loc_map` and `values` somewhere and invalidate when you append to the Series. I'm assuming that the Series itself doesn't change its index often.\n"
  }
]
