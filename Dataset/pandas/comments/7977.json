[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/52382293",
    "html_url": "https://github.com/pandas-dev/pandas/issues/7977#issuecomment-52382293",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/7977",
    "id": 52382293,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyMzgyMjkz",
    "user": {
      "login": "seth-p",
      "id": 7441788,
      "node_id": "MDQ6VXNlcjc0NDE3ODg=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/7441788?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/seth-p",
      "html_url": "https://github.com/seth-p",
      "followers_url": "https://api.github.com/users/seth-p/followers",
      "following_url": "https://api.github.com/users/seth-p/following{/other_user}",
      "gists_url": "https://api.github.com/users/seth-p/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/seth-p/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/seth-p/subscriptions",
      "organizations_url": "https://api.github.com/users/seth-p/orgs",
      "repos_url": "https://api.github.com/users/seth-p/repos",
      "events_url": "https://api.github.com/users/seth-p/events{/privacy}",
      "received_events_url": "https://api.github.com/users/seth-p/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-08-16T03:57:13Z",
    "updated_at": "2014-08-16T15:07:35Z",
    "author_association": "CONTRIBUTOR",
    "body": "Anyone have an opinion on this?\n\nSpecifically, I would replace\n\n```\n        if min_periods > 1:\n            first_index = _first_valid_index(v)\n            result[first_index: first_index + min_periods - 1] = NaN\n```\n\nwith\n\n```\n        if min_periods > 1:\n            result[notnull(v).cumsum() < min_periods] = NaN\n```\n\nI suppose another alternative is simply:\n\n```\n        if min_periods > 1:\n            result[: min_periods - 1] = NaN\n```\n\nIt just seems odd to me that input `NaN`s are taken into account in determining when to start the `NaN`ing-out window, but not when it ends. I would think the presence of input `NaN`s should be taken into account in determining both the start and end of the `NaN`ing-out window (i.e. `result[notnull(v).cumsum() < min_periods] = NaN`, which is consistent with the `rolling_*()` and `expanding_*()` functions), or completely ignored (i.e. `result[: min_periods - 1] = NaN`).\n\nGiven that the `ewm*()` functions are essentially expanding functions, I think it makes most sense for their treatment of` `min_periods` to be consistent with the `expanding_*()` (and `rolling_*()`) functions, i.e. `result[notnull(v).cumsum() < min_periods] = NaN`.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/52398506",
    "html_url": "https://github.com/pandas-dev/pandas/issues/7977#issuecomment-52398506",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/7977",
    "id": 52398506,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyMzk4NTA2",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-08-16T16:45:26Z",
    "updated_at": "2014-08-16T16:45:26Z",
    "author_association": "CONTRIBUTOR",
    "body": "@seth-p I think this is right, can you give an example using (your second alternative to set nans)?\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/52410976",
    "html_url": "https://github.com/pandas-dev/pandas/issues/7977#issuecomment-52410976",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/7977",
    "id": 52410976,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyNDEwOTc2",
    "user": {
      "login": "seth-p",
      "id": 7441788,
      "node_id": "MDQ6VXNlcjc0NDE3ODg=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/7441788?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/seth-p",
      "html_url": "https://github.com/seth-p",
      "followers_url": "https://api.github.com/users/seth-p/followers",
      "following_url": "https://api.github.com/users/seth-p/following{/other_user}",
      "gists_url": "https://api.github.com/users/seth-p/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/seth-p/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/seth-p/subscriptions",
      "organizations_url": "https://api.github.com/users/seth-p/orgs",
      "repos_url": "https://api.github.com/users/seth-p/repos",
      "events_url": "https://api.github.com/users/seth-p/events{/privacy}",
      "received_events_url": "https://api.github.com/users/seth-p/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-08-17T01:33:50Z",
    "updated_at": "2014-08-17T16:31:56Z",
    "author_association": "CONTRIBUTOR",
    "body": "Here are some examples of data frames showing:\n(a) a Series `s`;\n(b) `expanding_mean(s, min_periods=2)` (just for comparison);\n(c) `ewma(s, com=3.0, min_periods=2)` as produced in v0.14.1;\n(d) `ewma(s, com=3.0, min_periods=2)` as currently produced in master, per #7884;\n(e) `ewma(s, com=3.0, min_periods=2)` as I propose using `result[s.notnull().cumsum() < min_periods] = NaN` -- `Alt 1`; and\n(f) `ewma(s, com=3.0, min_periods=2)` using `result[:(min_periods-1)] = NaN` -- `Alt 2`.\n\n```\n     s  expanding_mean(s,  ewma(s, com=3.0, min_periods=2)\n           min_periods=2)                          v0.14.1   GH 7884     Alt 1     Alt 2\n   (a)                (b)                              (c)       (d)       (e)       (f)\n0    1                NaN                              NaN       NaN       NaN       NaN\n1    2                1.5                              NaN  1.571429  1.571429  1.571429\n2    3                2.0                         2.189189  2.189189  2.189189  2.189189\n3    4                2.5                         2.851429  2.851429  2.851429  2.851429\n\n     s  expanding_mean(s,  ewma(s, com=3.0, min_periods=2)\n           min_periods=2)                          v0.14.1   GH 7884     Alt 1     Alt 2\n   (a)                (b)                              (c)       (d)       (e)       (f)\n0  NaN                NaN                              NaN       NaN       NaN       NaN\n1    1                NaN                              NaN       NaN       NaN  1.000000\n2    2                1.5                              NaN  1.571429  1.571429  1.571429\n3    3                2.0                         2.189189  2.189189  2.189189  2.189189\n4    4                2.5                         2.851429  2.851429  2.851429  2.851429\n\n     s  expanding_mean(s,  ewma(s, com=3.0, min_periods=2)\n           min_periods=2)                          v0.14.1   GH 7884     Alt 1     Alt 2\n   (a)                (b)                              (c)       (d)       (e)       (f)\n0  NaN                NaN                              NaN       NaN       NaN       NaN\n1  NaN                NaN                              NaN       NaN       NaN       NaN\n2    1                NaN                              NaN       NaN       NaN  1.000000\n3    2                1.5                              NaN  1.571429  1.571429  1.571429\n4    3                2.0                         2.189189  2.189189  2.189189  2.189189\n5    4                2.5                         2.851429  2.851429  2.851429  2.851429\n\n     s  expanding_mean(s,  ewma(s, com=3.0, min_periods=2)\n           min_periods=2)                          v0.14.1   GH 7884     Alt 1     Alt 2\n   (a)                (b)                              (c)       (d)       (e)       (f)\n0  NaN                NaN                              NaN       NaN       NaN       NaN\n1  NaN                NaN                              NaN       NaN       NaN       NaN\n2    1                NaN                              NaN       NaN       NaN  1.000000\n3  NaN                NaN                              NaN  1.000000       NaN  1.000000\n4  NaN                NaN                         1.000000  1.000000       NaN  1.000000\n5    2                1.5                         1.571429  1.571429  1.571429  1.571429\n6    3                2.0                         2.189189  2.189189  2.189189  2.189189\n7    4                2.5                         2.851429  2.851429  2.851429  2.851429\n\nAlt 1: result[s.notnull().cumsum() < min_periods] = NaN\nAlt 2: result[:(min_periods-1)] = NaN\n```\n\nThe following is the code that produced the tables above.\n\n```\nfrom pandas import DataFrame, MultiIndex, Series, expanding_mean, ewma, options, version\nfrom numpy import NaN\n\n\ndef make_df(s, com, min_periods):\n    df = DataFrame(index=s.index,\n                   columns = MultiIndex.from_tuples([('s', '', '(a)'),\n                                                     ('expanding_mean(s,', ' min_periods={})'.format(min_periods), '(b)'),\n                                                     ('ewma(s, com={}, min_periods={})'.format(com, min_periods), 'v0.14.1', '(c)'),\n                                                     ('ewma(s, com={}, min_periods={})'.format(com, min_periods), 'GH 7884', '(d)'),\n                                                     ('ewma(s, com={}, min_periods={})'.format(com, min_periods), 'Alt 1', '(e)'),\n                                                     ('ewma(s, com={}, min_periods={})'.format(com, min_periods), 'Alt 2', '(f)'),\n                                                    ]))\n    df.iloc[:, 0] = s\n    df.iloc[:, 1] = expanding_mean(s, min_periods=min_periods)\n    if tuple(version.version.split('.')) > ('0', '14', '1'):\n        min_periods += 1\n    df.iloc[:, 2] = ewma(s, com=com, min_periods=min_periods)\n    df.iloc[:, 3] = ewma(s, com=com, min_periods=(min_periods-1))\n    y = ewma(s, com=com, min_periods=0)\n    alt1 = y.copy()\n    alt1[s.notnull().cumsum() < min_periods] = NaN\n    alt2 = y.copy()\n    alt2[:(min_periods-1)] = NaN\n    df.iloc[:, 4] = alt1\n    df.iloc[:, 5] = alt2\n    return df\n\noptions.display.width = 100\nfor s in [Series([1,2,3,4]),\n          Series([None,1,2,3,4]),\n          Series([None,None,1,2,3,4]),\n          Series([None,None,1,None,None,2,3,4]),\n         ]:\n    print(make_df(s, com=3., min_periods=2))\n    print()\n\nprint(\"Alt 1: result[s.notnull().cumsum() < min_periods] = NaN\")\nprint(\"Alt 2: result[:(min_periods-1)] = NaN\")\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/52539853",
    "html_url": "https://github.com/pandas-dev/pandas/issues/7977#issuecomment-52539853",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/7977",
    "id": 52539853,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyNTM5ODUz",
    "user": {
      "login": "seth-p",
      "id": 7441788,
      "node_id": "MDQ6VXNlcjc0NDE3ODg=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/7441788?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/seth-p",
      "html_url": "https://github.com/seth-p",
      "followers_url": "https://api.github.com/users/seth-p/followers",
      "following_url": "https://api.github.com/users/seth-p/following{/other_user}",
      "gists_url": "https://api.github.com/users/seth-p/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/seth-p/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/seth-p/subscriptions",
      "organizations_url": "https://api.github.com/users/seth-p/orgs",
      "repos_url": "https://api.github.com/users/seth-p/repos",
      "events_url": "https://api.github.com/users/seth-p/events{/privacy}",
      "received_events_url": "https://api.github.com/users/seth-p/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-08-18T19:10:18Z",
    "updated_at": "2014-08-18T19:10:18Z",
    "author_association": "CONTRIBUTOR",
    "body": "Anyone have any thoughts? As I mentioned above, I favor \"Alt 1\", for consistency with the `rolling/expanding_*()` functions.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/52540360",
    "html_url": "https://github.com/pandas-dev/pandas/issues/7977#issuecomment-52540360",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/7977",
    "id": 52540360,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyNTQwMzYw",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-08-18T19:14:20Z",
    "updated_at": "2014-08-18T19:14:20Z",
    "author_association": "CONTRIBUTOR",
    "body": "I agree on Alt 1 (Alt 2 is a bit greedy).\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/52540531",
    "html_url": "https://github.com/pandas-dev/pandas/issues/7977#issuecomment-52540531",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/7977",
    "id": 52540531,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyNTQwNTMx",
    "user": {
      "login": "seth-p",
      "id": 7441788,
      "node_id": "MDQ6VXNlcjc0NDE3ODg=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/7441788?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/seth-p",
      "html_url": "https://github.com/seth-p",
      "followers_url": "https://api.github.com/users/seth-p/followers",
      "following_url": "https://api.github.com/users/seth-p/following{/other_user}",
      "gists_url": "https://api.github.com/users/seth-p/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/seth-p/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/seth-p/subscriptions",
      "organizations_url": "https://api.github.com/users/seth-p/orgs",
      "repos_url": "https://api.github.com/users/seth-p/repos",
      "events_url": "https://api.github.com/users/seth-p/events{/privacy}",
      "received_events_url": "https://api.github.com/users/seth-p/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-08-18T19:15:48Z",
    "updated_at": "2014-08-18T19:15:48Z",
    "author_association": "CONTRIBUTOR",
    "body": "OK, I will incorporate this into https://github.com/pydata/pandas/pull/7926.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/52540780",
    "html_url": "https://github.com/pandas-dev/pandas/issues/7977#issuecomment-52540780",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/7977",
    "id": 52540780,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyNTQwNzgw",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-08-18T19:17:32Z",
    "updated_at": "2014-08-18T19:17:32Z",
    "author_association": "CONTRIBUTOR",
    "body": "maybe add something like the above chart into the release notes (but only show the 0.14.1 and the new)\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/52540834",
    "html_url": "https://github.com/pandas-dev/pandas/issues/7977#issuecomment-52540834",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/7977",
    "id": 52540834,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyNTQwODM0",
    "user": {
      "login": "seth-p",
      "id": 7441788,
      "node_id": "MDQ6VXNlcjc0NDE3ODg=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/7441788?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/seth-p",
      "html_url": "https://github.com/seth-p",
      "followers_url": "https://api.github.com/users/seth-p/followers",
      "following_url": "https://api.github.com/users/seth-p/following{/other_user}",
      "gists_url": "https://api.github.com/users/seth-p/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/seth-p/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/seth-p/subscriptions",
      "organizations_url": "https://api.github.com/users/seth-p/orgs",
      "repos_url": "https://api.github.com/users/seth-p/repos",
      "events_url": "https://api.github.com/users/seth-p/events{/privacy}",
      "received_events_url": "https://api.github.com/users/seth-p/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-08-18T19:17:55Z",
    "updated_at": "2014-08-18T19:17:55Z",
    "author_association": "CONTRIBUTOR",
    "body": "Good idea.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/52541139",
    "html_url": "https://github.com/pandas-dev/pandas/issues/7977#issuecomment-52541139",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/7977",
    "id": 52541139,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyNTQxMTM5",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-08-18T19:20:18Z",
    "updated_at": "2014-08-18T19:20:18Z",
    "author_association": "CONTRIBUTOR",
    "body": "also could be a note in computation.rst (as sort of an edge case example)\n"
  }
]
