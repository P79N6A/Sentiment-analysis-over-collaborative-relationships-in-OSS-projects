[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/475475466",
    "html_url": "https://github.com/pandas-dev/pandas/issues/25823#issuecomment-475475466",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/25823",
    "id": 475475466,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NTQ3NTQ2Ng==",
    "user": {
      "login": "WillAyd",
      "id": 609873,
      "node_id": "MDQ6VXNlcjYwOTg3Mw==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/609873?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/WillAyd",
      "html_url": "https://github.com/WillAyd",
      "followers_url": "https://api.github.com/users/WillAyd/followers",
      "following_url": "https://api.github.com/users/WillAyd/following{/other_user}",
      "gists_url": "https://api.github.com/users/WillAyd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/WillAyd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/WillAyd/subscriptions",
      "organizations_url": "https://api.github.com/users/WillAyd/orgs",
      "repos_url": "https://api.github.com/users/WillAyd/repos",
      "events_url": "https://api.github.com/users/WillAyd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/WillAyd/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-22T02:48:33Z",
    "updated_at": "2019-03-22T02:48:33Z",
    "author_association": "MEMBER",
    "body": "Hmm OK. It looks like the problem is that the function at the bottom of your traceback is getting a dtype where it expects a type and is raising as a result.\r\n\r\nInvestigation and PRs are always welcome"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/475696057",
    "html_url": "https://github.com/pandas-dev/pandas/issues/25823#issuecomment-475696057",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/25823",
    "id": 475696057,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NTY5NjA1Nw==",
    "user": {
      "login": "james-mchugh",
      "id": 14063748,
      "node_id": "MDQ6VXNlcjE0MDYzNzQ4",
      "avatar_url": "https://avatars1.githubusercontent.com/u/14063748?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/james-mchugh",
      "html_url": "https://github.com/james-mchugh",
      "followers_url": "https://api.github.com/users/james-mchugh/followers",
      "following_url": "https://api.github.com/users/james-mchugh/following{/other_user}",
      "gists_url": "https://api.github.com/users/james-mchugh/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/james-mchugh/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/james-mchugh/subscriptions",
      "organizations_url": "https://api.github.com/users/james-mchugh/orgs",
      "repos_url": "https://api.github.com/users/james-mchugh/repos",
      "events_url": "https://api.github.com/users/james-mchugh/events{/privacy}",
      "received_events_url": "https://api.github.com/users/james-mchugh/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-22T16:52:22Z",
    "updated_at": "2019-03-22T16:52:48Z",
    "author_association": "NONE",
    "body": "Possibly unrelated, but a similar error can be seen when doing\r\n```python\r\npandas.eval('True and not True')\r\n```\r\nRaises:\r\n```\r\n---------------------------------------------------------------------------\r\nTypeError                                 Traceback (most recent call last)\r\n<ipython-input-249-fccbfb3bc405> in <module>\r\n----> 1 pd.eval('True and not True')\r\n\r\n~/anaconda3/lib/python3.7/site-packages/pandas/core/computation/eval.py in eval(expr, parser, engine, truediv, local_dict, global_dict, resolvers, level, target, inplace)\r\n    292 \r\n    293         parsed_expr = Expr(expr, engine=engine, parser=parser, env=env,\r\n--> 294                            truediv=truediv)\r\n    295 \r\n    296         # construct the engine and evaluate the parsed expression\r\n\r\n~/anaconda3/lib/python3.7/site-packages/pandas/core/computation/expr.py in __init__(self, expr, engine, parser, env, truediv, level)\r\n    747         self.env.scope['truediv'] = truediv\r\n    748         self._visitor = _parsers[parser](self.env, self.engine, self.parser)\r\n--> 749         self.terms = self.parse()\r\n    750 \r\n    751     @property\r\n\r\n~/anaconda3/lib/python3.7/site-packages/pandas/core/computation/expr.py in parse(self)\r\n    764     def parse(self):\r\n    765         \"\"\"Parse an expression\"\"\"\r\n--> 766         return self._visitor.visit(self.expr)\r\n    767 \r\n    768     @property\r\n\r\n~/anaconda3/lib/python3.7/site-packages/pandas/core/computation/expr.py in visit(self, node, **kwargs)\r\n    329         method = 'visit_' + node.__class__.__name__\r\n    330         visitor = getattr(self, method)\r\n--> 331         return visitor(node, **kwargs)\r\n    332 \r\n    333     def visit_Module(self, node, **kwargs):\r\n\r\n~/anaconda3/lib/python3.7/site-packages/pandas/core/computation/expr.py in visit_Module(self, node, **kwargs)\r\n    335             raise SyntaxError('only a single expression is allowed')\r\n    336         expr = node.body[0]\r\n--> 337         return self.visit(expr, **kwargs)\r\n    338 \r\n    339     def visit_Expr(self, node, **kwargs):\r\n\r\n~/anaconda3/lib/python3.7/site-packages/pandas/core/computation/expr.py in visit(self, node, **kwargs)\r\n    329         method = 'visit_' + node.__class__.__name__\r\n    330         visitor = getattr(self, method)\r\n--> 331         return visitor(node, **kwargs)\r\n    332 \r\n    333     def visit_Module(self, node, **kwargs):\r\n\r\n~/anaconda3/lib/python3.7/site-packages/pandas/core/computation/expr.py in visit_Expr(self, node, **kwargs)\r\n    338 \r\n    339     def visit_Expr(self, node, **kwargs):\r\n--> 340         return self.visit(node.value, **kwargs)\r\n    341 \r\n    342     def _rewrite_membership_op(self, node, left, right):\r\n\r\n~/anaconda3/lib/python3.7/site-packages/pandas/core/computation/expr.py in visit(self, node, **kwargs)\r\n    329         method = 'visit_' + node.__class__.__name__\r\n    330         visitor = getattr(self, method)\r\n--> 331         return visitor(node, **kwargs)\r\n    332 \r\n    333     def visit_Module(self, node, **kwargs):\r\n\r\n~/anaconda3/lib/python3.7/site-packages/pandas/core/computation/expr.py in visit_BoolOp(self, node, **kwargs)\r\n    691 \r\n    692         operands = node.values\r\n--> 693         return reduce(visitor, operands)\r\n    694 \r\n    695 \r\n\r\n~/anaconda3/lib/python3.7/site-packages/pandas/core/computation/expr.py in visitor(x, y)\r\n    688             op, op_class, lhs, rhs = self._maybe_transform_eq_ne(\r\n    689                 node, lhs, rhs)\r\n--> 690             return self._maybe_evaluate_binop(op, node.op, lhs, rhs)\r\n    691 \r\n    692         operands = node.values\r\n\r\n~/anaconda3/lib/python3.7/site-packages/pandas/core/computation/expr.py in _maybe_evaluate_binop(self, op, op_class, lhs, rhs, eval_in_python, maybe_eval_in_python)\r\n    404                               maybe_eval_in_python=('==', '!=', '<', '>',\r\n    405                                                     '<=', '>=')):\r\n--> 406         res = op(lhs, rhs)\r\n    407 \r\n    408         if res.has_invalid_return_type:\r\n\r\n~/anaconda3/lib/python3.7/site-packages/pandas/core/computation/ops.py in __init__(self, op, lhs, rhs, **kwargs)\r\n    335         self.rhs = rhs\r\n    336 \r\n--> 337         self._disallow_scalar_only_bool_ops()\r\n    338 \r\n    339         self.convert_values()\r\n\r\n~/anaconda3/lib/python3.7/site-packages/pandas/core/computation/ops.py in _disallow_scalar_only_bool_ops(self)\r\n    440         if ((self.lhs.is_scalar or self.rhs.is_scalar) and\r\n    441             self.op in _bool_ops_dict and\r\n--> 442             (not (issubclass(self.rhs.return_type, (bool, np.bool_)) and\r\n    443                   issubclass(self.lhs.return_type, (bool, np.bool_))))):\r\n    444             raise NotImplementedError(\"cannot evaluate scalar only bool ops\")\r\n\r\nTypeError: issubclass() arg 1 must be a class\r\n```"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/475700877",
    "html_url": "https://github.com/pandas-dev/pandas/issues/25823#issuecomment-475700877",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/25823",
    "id": 475700877,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NTcwMDg3Nw==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-22T17:05:27Z",
    "updated_at": "2019-03-22T17:05:27Z",
    "author_association": "CONTRIBUTOR",
    "body": "these have never been supported\r\n\r\ni suppose i could add if you really want "
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/475705616",
    "html_url": "https://github.com/pandas-dev/pandas/issues/25823#issuecomment-475705616",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/25823",
    "id": 475705616,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NTcwNTYxNg==",
    "user": {
      "login": "james-mchugh",
      "id": 14063748,
      "node_id": "MDQ6VXNlcjE0MDYzNzQ4",
      "avatar_url": "https://avatars1.githubusercontent.com/u/14063748?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/james-mchugh",
      "html_url": "https://github.com/james-mchugh",
      "followers_url": "https://api.github.com/users/james-mchugh/followers",
      "following_url": "https://api.github.com/users/james-mchugh/following{/other_user}",
      "gists_url": "https://api.github.com/users/james-mchugh/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/james-mchugh/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/james-mchugh/subscriptions",
      "organizations_url": "https://api.github.com/users/james-mchugh/orgs",
      "repos_url": "https://api.github.com/users/james-mchugh/repos",
      "events_url": "https://api.github.com/users/james-mchugh/events{/privacy}",
      "received_events_url": "https://api.github.com/users/james-mchugh/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-22T17:18:31Z",
    "updated_at": "2019-03-22T17:18:31Z",
    "author_association": "NONE",
    "body": "> Possibly unrelated, but a similar error can be seen when doing\r\n> \r\n> ```python\r\n> pandas.eval('True and not True')\r\n> ```\r\n> \r\n> Raises:\r\n> \r\n> ```\r\n> ---------------------------------------------------------------------------\r\n> TypeError                                 Traceback (most recent call last)\r\n> <ipython-input-249-fccbfb3bc405> in <module>\r\n> ----> 1 pd.eval('True and not True')\r\n> \r\n> ~/anaconda3/lib/python3.7/site-packages/pandas/core/computation/eval.py in eval(expr, parser, engine, truediv, local_dict, global_dict, resolvers, level, target, inplace)\r\n>     292 \r\n>     293         parsed_expr = Expr(expr, engine=engine, parser=parser, env=env,\r\n> --> 294                            truediv=truediv)\r\n>     295 \r\n>     296         # construct the engine and evaluate the parsed expression\r\n> \r\n> ~/anaconda3/lib/python3.7/site-packages/pandas/core/computation/expr.py in __init__(self, expr, engine, parser, env, truediv, level)\r\n>     747         self.env.scope['truediv'] = truediv\r\n>     748         self._visitor = _parsers[parser](self.env, self.engine, self.parser)\r\n> --> 749         self.terms = self.parse()\r\n>     750 \r\n>     751     @property\r\n> \r\n> ~/anaconda3/lib/python3.7/site-packages/pandas/core/computation/expr.py in parse(self)\r\n>     764     def parse(self):\r\n>     765         \"\"\"Parse an expression\"\"\"\r\n> --> 766         return self._visitor.visit(self.expr)\r\n>     767 \r\n>     768     @property\r\n> \r\n> ~/anaconda3/lib/python3.7/site-packages/pandas/core/computation/expr.py in visit(self, node, **kwargs)\r\n>     329         method = 'visit_' + node.__class__.__name__\r\n>     330         visitor = getattr(self, method)\r\n> --> 331         return visitor(node, **kwargs)\r\n>     332 \r\n>     333     def visit_Module(self, node, **kwargs):\r\n> \r\n> ~/anaconda3/lib/python3.7/site-packages/pandas/core/computation/expr.py in visit_Module(self, node, **kwargs)\r\n>     335             raise SyntaxError('only a single expression is allowed')\r\n>     336         expr = node.body[0]\r\n> --> 337         return self.visit(expr, **kwargs)\r\n>     338 \r\n>     339     def visit_Expr(self, node, **kwargs):\r\n> \r\n> ~/anaconda3/lib/python3.7/site-packages/pandas/core/computation/expr.py in visit(self, node, **kwargs)\r\n>     329         method = 'visit_' + node.__class__.__name__\r\n>     330         visitor = getattr(self, method)\r\n> --> 331         return visitor(node, **kwargs)\r\n>     332 \r\n>     333     def visit_Module(self, node, **kwargs):\r\n> \r\n> ~/anaconda3/lib/python3.7/site-packages/pandas/core/computation/expr.py in visit_Expr(self, node, **kwargs)\r\n>     338 \r\n>     339     def visit_Expr(self, node, **kwargs):\r\n> --> 340         return self.visit(node.value, **kwargs)\r\n>     341 \r\n>     342     def _rewrite_membership_op(self, node, left, right):\r\n> \r\n> ~/anaconda3/lib/python3.7/site-packages/pandas/core/computation/expr.py in visit(self, node, **kwargs)\r\n>     329         method = 'visit_' + node.__class__.__name__\r\n>     330         visitor = getattr(self, method)\r\n> --> 331         return visitor(node, **kwargs)\r\n>     332 \r\n>     333     def visit_Module(self, node, **kwargs):\r\n> \r\n> ~/anaconda3/lib/python3.7/site-packages/pandas/core/computation/expr.py in visit_BoolOp(self, node, **kwargs)\r\n>     691 \r\n>     692         operands = node.values\r\n> --> 693         return reduce(visitor, operands)\r\n>     694 \r\n>     695 \r\n> \r\n> ~/anaconda3/lib/python3.7/site-packages/pandas/core/computation/expr.py in visitor(x, y)\r\n>     688             op, op_class, lhs, rhs = self._maybe_transform_eq_ne(\r\n>     689                 node, lhs, rhs)\r\n> --> 690             return self._maybe_evaluate_binop(op, node.op, lhs, rhs)\r\n>     691 \r\n>     692         operands = node.values\r\n> \r\n> ~/anaconda3/lib/python3.7/site-packages/pandas/core/computation/expr.py in _maybe_evaluate_binop(self, op, op_class, lhs, rhs, eval_in_python, maybe_eval_in_python)\r\n>     404                               maybe_eval_in_python=('==', '!=', '<', '>',\r\n>     405                                                     '<=', '>=')):\r\n> --> 406         res = op(lhs, rhs)\r\n>     407 \r\n>     408         if res.has_invalid_return_type:\r\n> \r\n> ~/anaconda3/lib/python3.7/site-packages/pandas/core/computation/ops.py in __init__(self, op, lhs, rhs, **kwargs)\r\n>     335         self.rhs = rhs\r\n>     336 \r\n> --> 337         self._disallow_scalar_only_bool_ops()\r\n>     338 \r\n>     339         self.convert_values()\r\n> \r\n> ~/anaconda3/lib/python3.7/site-packages/pandas/core/computation/ops.py in _disallow_scalar_only_bool_ops(self)\r\n>     440         if ((self.lhs.is_scalar or self.rhs.is_scalar) and\r\n>     441             self.op in _bool_ops_dict and\r\n> --> 442             (not (issubclass(self.rhs.return_type, (bool, np.bool_)) and\r\n>     443                   issubclass(self.lhs.return_type, (bool, np.bool_))))):\r\n>     444             raise NotImplementedError(\"cannot evaluate scalar only bool ops\")\r\n> \r\n> TypeError: issubclass() arg 1 must be a class\r\n> \r\nSo i looks like `not` is performing the complement operation of `~` when passed through `eval`, so the following happens:\r\n```python\r\npd.eval('not True')  # returns -2\r\npd.eval('not False')  # returns -1\r\n```\r\nI can possibly try to put in  PR to fix this at some point. I was attempting to make a [Sigma](https://github.com/Neo23x0/sigma) backend for Pandas by making use of Pandas' `eval` function.\r\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/475835802",
    "html_url": "https://github.com/pandas-dev/pandas/issues/25823#issuecomment-475835802",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/25823",
    "id": 475835802,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NTgzNTgwMg==",
    "user": {
      "login": "james-mchugh",
      "id": 14063748,
      "node_id": "MDQ6VXNlcjE0MDYzNzQ4",
      "avatar_url": "https://avatars1.githubusercontent.com/u/14063748?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/james-mchugh",
      "html_url": "https://github.com/james-mchugh",
      "followers_url": "https://api.github.com/users/james-mchugh/followers",
      "following_url": "https://api.github.com/users/james-mchugh/following{/other_user}",
      "gists_url": "https://api.github.com/users/james-mchugh/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/james-mchugh/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/james-mchugh/subscriptions",
      "organizations_url": "https://api.github.com/users/james-mchugh/orgs",
      "repos_url": "https://api.github.com/users/james-mchugh/repos",
      "events_url": "https://api.github.com/users/james-mchugh/events{/privacy}",
      "received_events_url": "https://api.github.com/users/james-mchugh/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-23T03:37:01Z",
    "updated_at": "2019-03-23T03:37:01Z",
    "author_association": "NONE",
    "body": "I was able to fix the bug caused by the logical not. I will try to fix the fix the `issubclass` on `dtype` bug and put up a pull request tomorrow. Would you rather me put up a separate issue for the logical `not` behavior or keep them together in a single PR?"
  }
]
