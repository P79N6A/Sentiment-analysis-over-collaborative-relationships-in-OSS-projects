[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/19681922",
    "html_url": "https://github.com/pandas-dev/pandas/issues/3950#issuecomment-19681922",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/3950",
    "id": 19681922,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5NjgxOTIy",
    "user": {
      "login": "cpcloud",
      "id": 417981,
      "node_id": "MDQ6VXNlcjQxNzk4MQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/417981?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cpcloud",
      "html_url": "https://github.com/cpcloud",
      "followers_url": "https://api.github.com/users/cpcloud/followers",
      "following_url": "https://api.github.com/users/cpcloud/following{/other_user}",
      "gists_url": "https://api.github.com/users/cpcloud/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cpcloud/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cpcloud/subscriptions",
      "organizations_url": "https://api.github.com/users/cpcloud/orgs",
      "repos_url": "https://api.github.com/users/cpcloud/repos",
      "events_url": "https://api.github.com/users/cpcloud/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cpcloud/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-06-19T12:57:43Z",
    "updated_at": "2013-06-19T12:57:43Z",
    "author_association": "MEMBER",
    "body": "that is a gnarly one-liner there. i get an exception on the index assignment\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/19682457",
    "html_url": "https://github.com/pandas-dev/pandas/issues/3950#issuecomment-19682457",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/3950",
    "id": 19682457,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5NjgyNDU3",
    "user": {
      "login": "hayd",
      "id": 1931852,
      "node_id": "MDQ6VXNlcjE5MzE4NTI=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1931852?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hayd",
      "html_url": "https://github.com/hayd",
      "followers_url": "https://api.github.com/users/hayd/followers",
      "following_url": "https://api.github.com/users/hayd/following{/other_user}",
      "gists_url": "https://api.github.com/users/hayd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hayd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hayd/subscriptions",
      "organizations_url": "https://api.github.com/users/hayd/orgs",
      "repos_url": "https://api.github.com/users/hayd/repos",
      "events_url": "https://api.github.com/users/hayd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hayd/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-06-19T13:08:32Z",
    "updated_at": "2013-06-19T13:09:50Z",
    "author_association": "CONTRIBUTOR",
    "body": "Ah, you're right. Tried to be too clever there. (fixed)\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/36413528",
    "html_url": "https://github.com/pandas-dev/pandas/issues/3950#issuecomment-36413528",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/3950",
    "id": 36413528,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2NDEzNTI4",
    "user": {
      "login": "ciamac",
      "id": 342294,
      "node_id": "MDQ6VXNlcjM0MjI5NA==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/342294?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ciamac",
      "html_url": "https://github.com/ciamac",
      "followers_url": "https://api.github.com/users/ciamac/followers",
      "following_url": "https://api.github.com/users/ciamac/following{/other_user}",
      "gists_url": "https://api.github.com/users/ciamac/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ciamac/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ciamac/subscriptions",
      "organizations_url": "https://api.github.com/users/ciamac/orgs",
      "repos_url": "https://api.github.com/users/ciamac/repos",
      "events_url": "https://api.github.com/users/ciamac/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ciamac/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-03-01T02:30:04Z",
    "updated_at": "2014-03-01T02:30:04Z",
    "author_association": "NONE",
    "body": "This problem also occurs with groupby operations that create multiple indexes with time zones. For example:\n\n```\ndat = pd.DataFrame({'label':['a', 'a', 'a', 'b', 'b', 'b'], 'datetime':['2011-07-19 07:00:00', '2011-07-19 08:00:00', '2011-07-19 09:00:00', '2011-07-19 07:00:00', '2011-07-19 08:00:00', '2011-07-19 09:00:00'], 'value':range(6)})\ndat['datetime'] = dat['datetime'].apply(lambda d: pandas.Timestamp(d, tz='US/Pacific'))\n```\n\nWe start out with timezones:\n\n```\nIn [386]: dat.head()\nOut[386]: \n                    datetime label  value\n0  2011-07-19 07:00:00-07:00     a      0\n1  2011-07-19 08:00:00-07:00     a      1\n2  2011-07-19 09:00:00-07:00     a      2\n3  2011-07-19 07:00:00-07:00     b      3\n4  2011-07-19 08:00:00-07:00     b      4\n```\n\nHowever, if we do a groupby on multiple columns, we will lose the timezones:\n\n```\nIn [387]: dat.groupby(['datetime', 'label'])['value'].sum()\nOut[387]: \ndatetime             label\n2011-07-19 14:00:00  a        0\n                     b        3\n2011-07-19 15:00:00  a        1\n                     b        4\n2011-07-19 16:00:00  a        2\n                     b        5\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/46101697",
    "html_url": "https://github.com/pandas-dev/pandas/issues/3950#issuecomment-46101697",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/3950",
    "id": 46101697,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2MTAxNjk3",
    "user": {
      "login": "andrewchou34",
      "id": 7881750,
      "node_id": "MDQ6VXNlcjc4ODE3NTA=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/7881750?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/andrewchou34",
      "html_url": "https://github.com/andrewchou34",
      "followers_url": "https://api.github.com/users/andrewchou34/followers",
      "following_url": "https://api.github.com/users/andrewchou34/following{/other_user}",
      "gists_url": "https://api.github.com/users/andrewchou34/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/andrewchou34/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/andrewchou34/subscriptions",
      "organizations_url": "https://api.github.com/users/andrewchou34/orgs",
      "repos_url": "https://api.github.com/users/andrewchou34/repos",
      "events_url": "https://api.github.com/users/andrewchou34/events{/privacy}",
      "received_events_url": "https://api.github.com/users/andrewchou34/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-06-14T22:49:34Z",
    "updated_at": "2014-06-14T22:49:34Z",
    "author_association": "NONE",
    "body": "We just upgraded to pandas 0.14, and the groupby/pivot bugs related to losing tz-info have been fixed.  However, reset_index of a MultiIndex still loses tz-info.\n\n```\nIn [7]: ts = pd.date_range('1/1/2011', periods=5, freq='10s', tz = 'US/Eastern')\n\nIn [8]: foo = pd.DataFrame({'c' : range(5)}, index = pd.MultiIndex([range(5), ts], [range(5), range(5)], names = [ 'a' , 'b' ]))\n\nIn [9]: print foo                                                                                                \n                             c\na b                           \n0 2011-01-01 00:00:00-05:00  0\n1 2011-01-01 00:00:10-05:00  1\n2 2011-01-01 00:00:20-05:00  2\n3 2011-01-01 00:00:30-05:00  3\n4 2011-01-01 00:00:40-05:00  4\n\nIn [10]: foo2 = foo.reset_index()                                                                                                \n\nIn [11]: print foo2                                                                                                              \n   a                   b  c\n0  0 2011-01-01 05:00:00  0\n1  1 2011-01-01 05:00:10  1\n2  2 2011-01-01 05:00:20  2\n3  3 2011-01-01 05:00:30  3\n4  4 2011-01-01 05:00:40  4\n```\n\nAnd, column assignment still loses tz-info.\n\n```\nIn [13]: bar = pd.DataFrame( {'a' : ts, 'b':range(5)} )\n\nIn [14]: print bar\n                    a  b\n0 2011-01-01 05:00:00  0\n1 2011-01-01 05:00:10  1\n2 2011-01-01 05:00:20  2\n3 2011-01-01 05:00:30  3\n4 2011-01-01 05:00:40  4\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/46174070",
    "html_url": "https://github.com/pandas-dev/pandas/issues/3950#issuecomment-46174070",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/3950",
    "id": 46174070,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2MTc0MDcw",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-06-16T12:54:24Z",
    "updated_at": "2014-06-16T12:54:24Z",
    "author_association": "CONTRIBUTOR",
    "body": "cc @sinhrks take a look?\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/46747047",
    "html_url": "https://github.com/pandas-dev/pandas/issues/3950#issuecomment-46747047",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/3950",
    "id": 46747047,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2NzQ3MDQ3",
    "user": {
      "login": "sinhrks",
      "id": 1696302,
      "node_id": "MDQ6VXNlcjE2OTYzMDI=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1696302?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sinhrks",
      "html_url": "https://github.com/sinhrks",
      "followers_url": "https://api.github.com/users/sinhrks/followers",
      "following_url": "https://api.github.com/users/sinhrks/following{/other_user}",
      "gists_url": "https://api.github.com/users/sinhrks/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sinhrks/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sinhrks/subscriptions",
      "organizations_url": "https://api.github.com/users/sinhrks/orgs",
      "repos_url": "https://api.github.com/users/sinhrks/repos",
      "events_url": "https://api.github.com/users/sinhrks/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sinhrks/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-06-21T07:31:44Z",
    "updated_at": "2014-06-21T07:31:44Z",
    "author_association": "MEMBER",
    "body": "Yeah, I think  `reset_index` is untouched in previous PRs. The fix looks not difficult.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/49887996",
    "html_url": "https://github.com/pandas-dev/pandas/issues/3950#issuecomment-49887996",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/3950",
    "id": 49887996,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5ODg3OTk2",
    "user": {
      "login": "andrewchou34",
      "id": 7881750,
      "node_id": "MDQ6VXNlcjc4ODE3NTA=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/7881750?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/andrewchou34",
      "html_url": "https://github.com/andrewchou34",
      "followers_url": "https://api.github.com/users/andrewchou34/followers",
      "following_url": "https://api.github.com/users/andrewchou34/following{/other_user}",
      "gists_url": "https://api.github.com/users/andrewchou34/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/andrewchou34/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/andrewchou34/subscriptions",
      "organizations_url": "https://api.github.com/users/andrewchou34/orgs",
      "repos_url": "https://api.github.com/users/andrewchou34/repos",
      "events_url": "https://api.github.com/users/andrewchou34/events{/privacy}",
      "received_events_url": "https://api.github.com/users/andrewchou34/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-07-23T15:14:29Z",
    "updated_at": "2014-07-23T15:14:29Z",
    "author_association": "NONE",
    "body": "We just upgraded to pandas 0.14.1, and the reset_index no longer loses tz-info.  Thanks for fixing that!\n\nHowever, it still seems that column assignment loses tz-info\n\n```\nIn [16]: ts = pd.date_range('1/1/2011', periods=5, freq='10s', tz = 'US/Eastern')\n\nIn [17]: ts\nOut[17]:\n<class 'pandas.tseries.index.DatetimeIndex'>\n[2011-01-01 00:00:00-05:00, ..., 2011-01-01 00:00:40-05:00]\nLength: 5, Freq: 10S, Timezone: US/Eastern\n\nIn [18]: pd.DataFrame( {'a' : ts } )\nOut[18]:\n                    a\n0 2011-01-01 05:00:00\n1 2011-01-01 05:00:10\n2 2011-01-01 05:00:20\n3 2011-01-01 05:00:30\n4 2011-01-01 05:00:40\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/49888780",
    "html_url": "https://github.com/pandas-dev/pandas/issues/3950#issuecomment-49888780",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/3950",
    "id": 49888780,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5ODg4Nzgw",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-07-23T15:19:54Z",
    "updated_at": "2014-07-23T15:19:54Z",
    "author_association": "CONTRIBUTOR",
    "body": "this is by definition, you are passing a dictionary, where things are coerced. I supposed one might consider this is a bug. I'll create a separate issue Their are several ways to do this in any event.\n\n```\npd.DataFrame({'a' : ts.to_series(keep_tz=True) })\n```\n\nor\n\n```\ndf['a'] = ts\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/49943099",
    "html_url": "https://github.com/pandas-dev/pandas/issues/3950#issuecomment-49943099",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/3950",
    "id": 49943099,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5OTQzMDk5",
    "user": {
      "login": "andrewchou34",
      "id": 7881750,
      "node_id": "MDQ6VXNlcjc4ODE3NTA=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/7881750?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/andrewchou34",
      "html_url": "https://github.com/andrewchou34",
      "followers_url": "https://api.github.com/users/andrewchou34/followers",
      "following_url": "https://api.github.com/users/andrewchou34/following{/other_user}",
      "gists_url": "https://api.github.com/users/andrewchou34/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/andrewchou34/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/andrewchou34/subscriptions",
      "organizations_url": "https://api.github.com/users/andrewchou34/orgs",
      "repos_url": "https://api.github.com/users/andrewchou34/repos",
      "events_url": "https://api.github.com/users/andrewchou34/events{/privacy}",
      "received_events_url": "https://api.github.com/users/andrewchou34/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-07-23T22:07:57Z",
    "updated_at": "2014-07-23T22:07:57Z",
    "author_association": "NONE",
    "body": "Thanks for creating the new issue and giving other solutions.\n\nWhen testing the 0.14.1 on old code, I ran into the follow crash when using reset_index with tz-aware data in a multi-index.\n\n```\nIn [1]: import pandas as pd                                                                                                                                                                                                                   \n\nIn [2]: ts = pd.date_range('1/1/2011', periods = 2, freq = '10s', tz = 'US/Eastern')                                                                                                                                                         \n\nIn [3]: df = pd.DataFrame({'a' : [ts[0], ts[0], ts[1], ts[1]], 'b': [1,2,1,2], 'c':[1,2,3,4]})                                                                  \n\nIn [4]: df_gb_sum = df.groupby(['a','b']).sum()                         \n\nIn [5]: df_gb_sum\nOut[5]: \n                             c\na                         b   \n2011-01-01 00:00:00-05:00 1  1\n                          2  2\n2011-01-01 00:00:10-05:00 1  3\n                          2  4\n\nIn [6]: df_gb_sum.reset_index()\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n<ipython-input-6-47b6fb3071a5> in <module>()\n----> 1 df_gb_sum.reset_index()\n\n/Users/andrewchou/dev/bourbakitech/pyenv/lib/python2.7/site-packages/pandas/core/frame.pyc in reset_index(self, level, drop, inplace, col_level, col_fill)\n   2481                     level_values = _maybe_casted_values(lev, lab)\n   2482                     if level is None or i in level:\n-> 2483                         new_obj.insert(0, col_name, level_values)\n   2484 \n   2485         elif not drop:\n\n/Users/andrewchou/dev/bourbakitech/pyenv/lib/python2.7/site-packages/pandas/core/frame.pyc in insert(self, loc, column, value, allow_duplicates)\n   2107         \"\"\"\n   2108         self._ensure_valid_index(value)\n-> 2109         value = self._sanitize_column(column, value)\n   2110         self._data.insert(\n   2111             loc, column, value, allow_duplicates=allow_duplicates)\n\n/Users/andrewchou/dev/bourbakitech/pyenv/lib/python2.7/site-packages/pandas/core/frame.pyc in _sanitize_column(self, key, value)\n   2139         elif isinstance(value, Index) or _is_sequence(value):\n   2140             if len(value) != len(self.index):\n-> 2141                 raise ValueError('Length of values does not match length of '\n   2142                                  'index')\n   2143 \n\nValueError: Length of values does not match length of index\n```\n\nNote that if we don't set a tz, it seems to work fine.\n\n```\nIn [7]: ts = pd.date_range('1/1/2011', periods = 2, freq = '10s')\n\nIn [8]: df = pd.DataFrame({'a' : [ts[0], ts[0], ts[1], ts[1]], 'b': [1,2,1,2], 'c':[1,2,3,4]})\n\nIn [9]: df_gb_sum = df.groupby(['a','b']).sum()\n\nIn [10]: df_gb_sum.reset_index()\nOut[10]: \n                    a  b  c\n0 2011-01-01 00:00:00  1  1\n1 2011-01-01 00:00:00  2  2\n2 2011-01-01 00:00:10  1  3\n3 2011-01-01 00:00:10  2  4\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/49943289",
    "html_url": "https://github.com/pandas-dev/pandas/issues/3950#issuecomment-49943289",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/3950",
    "id": 49943289,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5OTQzMjg5",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-07-23T22:09:51Z",
    "updated_at": "2014-07-23T22:09:51Z",
    "author_association": "CONTRIBUTOR",
    "body": "That last is already fixed here: https://github.com/pydata/pandas/pull/7533\n"
  }
]
