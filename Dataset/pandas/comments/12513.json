[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/191310930",
    "html_url": "https://github.com/pandas-dev/pandas/issues/12513#issuecomment-191310930",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/12513",
    "id": 191310930,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5MTMxMDkzMA==",
    "user": {
      "login": "BranYang",
      "id": 4443076,
      "node_id": "MDQ6VXNlcjQ0NDMwNzY=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/4443076?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/BranYang",
      "html_url": "https://github.com/BranYang",
      "followers_url": "https://api.github.com/users/BranYang/followers",
      "following_url": "https://api.github.com/users/BranYang/following{/other_user}",
      "gists_url": "https://api.github.com/users/BranYang/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/BranYang/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/BranYang/subscriptions",
      "organizations_url": "https://api.github.com/users/BranYang/orgs",
      "repos_url": "https://api.github.com/users/BranYang/repos",
      "events_url": "https://api.github.com/users/BranYang/events{/privacy}",
      "received_events_url": "https://api.github.com/users/BranYang/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-03-02T16:20:34Z",
    "updated_at": "2016-03-02T16:20:34Z",
    "author_association": "CONTRIBUTOR",
    "body": "Trying to look into this.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/334294179",
    "html_url": "https://github.com/pandas-dev/pandas/issues/12513#issuecomment-334294179",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/12513",
    "id": 334294179,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzNDI5NDE3OQ==",
    "user": {
      "login": "John-Boik",
      "id": 22616258,
      "node_id": "MDQ6VXNlcjIyNjE2MjU4",
      "avatar_url": "https://avatars2.githubusercontent.com/u/22616258?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/John-Boik",
      "html_url": "https://github.com/John-Boik",
      "followers_url": "https://api.github.com/users/John-Boik/followers",
      "following_url": "https://api.github.com/users/John-Boik/following{/other_user}",
      "gists_url": "https://api.github.com/users/John-Boik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/John-Boik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/John-Boik/subscriptions",
      "organizations_url": "https://api.github.com/users/John-Boik/orgs",
      "repos_url": "https://api.github.com/users/John-Boik/repos",
      "events_url": "https://api.github.com/users/John-Boik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/John-Boik/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-04T21:25:35Z",
    "updated_at": "2017-10-04T21:25:35Z",
    "author_association": "NONE",
    "body": "Is there any workaround offered for the `dtype='datetime64[ns, UTC]' problem? Any suggestions?"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/334554929",
    "html_url": "https://github.com/pandas-dev/pandas/issues/12513#issuecomment-334554929",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/12513",
    "id": 334554929,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzNDU1NDkyOQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-05T18:39:39Z",
    "updated_at": "2017-10-05T18:39:39Z",
    "author_association": "CONTRIBUTOR",
    "body": "what are you trying to do?"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/334555520",
    "html_url": "https://github.com/pandas-dev/pandas/issues/12513#issuecomment-334555520",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/12513",
    "id": 334555520,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzNDU1NTUyMA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-05T18:41:59Z",
    "updated_at": "2017-10-05T18:41:59Z",
    "author_association": "CONTRIBUTOR",
    "body": "this is a reasonable way to deal with this.\r\n\r\n```\r\nIn [15]: array_dim2 = np.arange(10).reshape((5, 2))\r\n    ...: df = pd.DataFrame(array_dim2)\r\n    ...: \r\n    ...: \r\n\r\nIn [16]: df\r\nOut[16]: \r\n   0  1\r\n0  0  1\r\n1  2  3\r\n2  4  5\r\n3  6  7\r\n4  8  9\r\n\r\nIn [17]: df.apply(lambda x: pd.to_datetime(x, unit='D').dt.tz_localize('UTC'))\r\nOut[17]: \r\n                          0                         1\r\n0 1970-01-01 00:00:00+00:00 1970-01-02 00:00:00+00:00\r\n1 1970-01-03 00:00:00+00:00 1970-01-04 00:00:00+00:00\r\n2 1970-01-05 00:00:00+00:00 1970-01-06 00:00:00+00:00\r\n3 1970-01-07 00:00:00+00:00 1970-01-08 00:00:00+00:00\r\n4 1970-01-09 00:00:00+00:00 1970-01-10 00:00:00+00:00\r\n\r\nIn [18]: df.apply(lambda x: pd.to_datetime(x, unit='D').dt.tz_localize('UTC')).dtypes\r\nOut[18]: \r\n0    datetime64[ns, UTC]\r\n1    datetime64[ns, UTC]\r\ndtype: object\r\n\r\n```"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/334555839",
    "html_url": "https://github.com/pandas-dev/pandas/issues/12513#issuecomment-334555839",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/12513",
    "id": 334555839,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzNDU1NTgzOQ==",
    "user": {
      "login": "John-Boik",
      "id": 22616258,
      "node_id": "MDQ6VXNlcjIyNjE2MjU4",
      "avatar_url": "https://avatars2.githubusercontent.com/u/22616258?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/John-Boik",
      "html_url": "https://github.com/John-Boik",
      "followers_url": "https://api.github.com/users/John-Boik/followers",
      "following_url": "https://api.github.com/users/John-Boik/following{/other_user}",
      "gists_url": "https://api.github.com/users/John-Boik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/John-Boik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/John-Boik/subscriptions",
      "organizations_url": "https://api.github.com/users/John-Boik/orgs",
      "repos_url": "https://api.github.com/users/John-Boik/repos",
      "events_url": "https://api.github.com/users/John-Boik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/John-Boik/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-05T18:43:06Z",
    "updated_at": "2017-10-05T18:44:25Z",
    "author_association": "NONE",
    "body": "Thanks. I see the error when using Ibis framework, when I query on a table that has null values in a timestamp with timezone field. I did use something like that as a fix, but it was very slow on queries for large tables."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/334556479",
    "html_url": "https://github.com/pandas-dev/pandas/issues/12513#issuecomment-334556479",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/12513",
    "id": 334556479,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzNDU1NjQ3OQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-05T18:45:20Z",
    "updated_at": "2017-10-05T18:45:20Z",
    "author_association": "CONTRIBUTOR",
    "body": "@John-Boik that doesn't make sense, you are iterating over the columns. unless you have millions of columns (which would be completely non-performant anyhow)"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/334557833",
    "html_url": "https://github.com/pandas-dev/pandas/issues/12513#issuecomment-334557833",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/12513",
    "id": 334557833,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzNDU1NzgzMw==",
    "user": {
      "login": "John-Boik",
      "id": 22616258,
      "node_id": "MDQ6VXNlcjIyNjE2MjU4",
      "avatar_url": "https://avatars2.githubusercontent.com/u/22616258?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/John-Boik",
      "html_url": "https://github.com/John-Boik",
      "followers_url": "https://api.github.com/users/John-Boik/followers",
      "following_url": "https://api.github.com/users/John-Boik/following{/other_user}",
      "gists_url": "https://api.github.com/users/John-Boik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/John-Boik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/John-Boik/subscriptions",
      "organizations_url": "https://api.github.com/users/John-Boik/orgs",
      "repos_url": "https://api.github.com/users/John-Boik/repos",
      "events_url": "https://api.github.com/users/John-Boik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/John-Boik/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-05T18:50:23Z",
    "updated_at": "2017-10-05T18:50:23Z",
    "author_association": "NONE",
    "body": "The error occurs within Ibis, which calls pandas, which raises an error in ~lib/python3.5/site-packages/pandas/core/internals.py, near line 573: dtype = np.dtype(dtype). \r\nThe error is something like \"dtype not understood\". If I change the database field to timezone without timestamp, then the error is not raised. Nor is it raised if the values are non-null. I am now using an older version of Ibis, where that error is not raised."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/334558614",
    "html_url": "https://github.com/pandas-dev/pandas/issues/12513#issuecomment-334558614",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/12513",
    "id": 334558614,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzNDU1ODYxNA==",
    "user": {
      "login": "John-Boik",
      "id": 22616258,
      "node_id": "MDQ6VXNlcjIyNjE2MjU4",
      "avatar_url": "https://avatars2.githubusercontent.com/u/22616258?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/John-Boik",
      "html_url": "https://github.com/John-Boik",
      "followers_url": "https://api.github.com/users/John-Boik/followers",
      "following_url": "https://api.github.com/users/John-Boik/following{/other_user}",
      "gists_url": "https://api.github.com/users/John-Boik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/John-Boik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/John-Boik/subscriptions",
      "organizations_url": "https://api.github.com/users/John-Boik/orgs",
      "repos_url": "https://api.github.com/users/John-Boik/repos",
      "events_url": "https://api.github.com/users/John-Boik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/John-Boik/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-05T18:53:03Z",
    "updated_at": "2017-10-05T18:53:03Z",
    "author_association": "NONE",
    "body": "My crude fix was:\r\n```\r\n            if dtype ==  'datetime64[ns, UTC]':\r\n                dtype = np.arange(2).reshape((1, 2)).astype('datetime64[ns]').dtype\r\n            else:\r\n                assert False\r\n```\r\nBut as I said, it was too slow to work for big tables."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/450802204",
    "html_url": "https://github.com/pandas-dev/pandas/issues/12513#issuecomment-450802204",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/12513",
    "id": 450802204,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MDgwMjIwNA==",
    "user": {
      "login": "zhuoqiang",
      "id": 639099,
      "node_id": "MDQ6VXNlcjYzOTA5OQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/639099?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zhuoqiang",
      "html_url": "https://github.com/zhuoqiang",
      "followers_url": "https://api.github.com/users/zhuoqiang/followers",
      "following_url": "https://api.github.com/users/zhuoqiang/following{/other_user}",
      "gists_url": "https://api.github.com/users/zhuoqiang/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zhuoqiang/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zhuoqiang/subscriptions",
      "organizations_url": "https://api.github.com/users/zhuoqiang/orgs",
      "repos_url": "https://api.github.com/users/zhuoqiang/repos",
      "events_url": "https://api.github.com/users/zhuoqiang/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zhuoqiang/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-02T07:46:12Z",
    "updated_at": "2019-01-02T09:00:44Z",
    "author_association": "NONE",
    "body": "Pandas also failed to `view()` with tz dtype:\r\n\r\n```py\r\nimport pandas as pd\r\n\r\ndf = pd.DataFrame({'a': pd.date_range('2018-01-01', '2018-01-03', tz='Asia/Shanghai')})\r\nda = df['a'].view('int64')\r\nda.view(df['a'].dtype)\r\n```\r\n\r\nwill generate `TypeError: data type not understood`\r\n\r\n```txt\r\nTraceback (most recent call last)\r\n<ipython-input-62-58aa88ef59a7> in <module>\r\n      3 df = pd.DataFrame({'a': pd.date_range('2018-01-01', '2018-01-03', tz='Asia/Shanghai')})\r\n      4 da = df['a'].view('int64')\r\n----> 5 da.view(df['a'].dtype)\r\n\r\n~/python3.7/site-packages/pandas/core/series.py in view(self, dtype)\r\n    632         dtype: int8\r\n    633         \"\"\"\r\n--> 634         return self._constructor(self._values.view(dtype),\r\n    635                                  index=self.index).__finalize__(self)\r\n    636 \r\n\r\nTypeError: data type not understood\r\n```\r\n\r\nI have to use the following `view_as()` to make it work:\r\n\r\n```py\r\ndef view_as(s, dtype):\r\n    try:\r\n        return s.view(dtype)\r\n    except TypeError as e:\r\n        if isinstance(dtype, str):\r\n            dtype = pd.core.dtypes.dtypes.DatetimeTZDtype.construct_from_string(dtype)\r\n        if isinstance(dtype, pd.core.dtypes.dtypes.DatetimeTZDtype):\r\n            s = s.view(f'datetime64[{dtype.unit}]')\r\n            if dtype.tz:\r\n                s = s.dt.tz_localize('utc').dt.tz_convert(dtype.tz)\r\n            return s\r\n        raise e\r\n```\r\n\r\nActually, the full version of `view_as()` could also view the categorical data:\r\n\r\n```py\r\ndef view_as(s, dtype):\r\n    try:\r\n        if isinstance(s.dtype, pd.core.dtypes.dtypes.CategoricalDtype):\r\n            s = s.cat.codes.values\r\n        if isinstance(dtype, pd.core.dtypes.dtypes.CategoricalDtype):\r\n            return pd.Categorical.from_codes(s, dtype.categories)\r\n        else:\r\n            return s.view(dtype)\r\n    except TypeError as e:\r\n        if isinstance(dtype, str):\r\n            dtype = pd.core.dtypes.dtypes.DatetimeTZDtype.construct_from_string(dtype)\r\n        if isinstance(dtype, pd.core.dtypes.dtypes.DatetimeTZDtype):\r\n            s = s.view(f'datetime64[{dtype.unit}]')\r\n            if dtype.tz:\r\n                s = s.dt.tz_localize('utc').dt.tz_convert(dtype.tz)\r\n            return s\r\n        raise e\r\n```"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/466515317",
    "html_url": "https://github.com/pandas-dev/pandas/issues/12513#issuecomment-466515317",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/12513",
    "id": 466515317,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2NjUxNTMxNw==",
    "user": {
      "login": "tswast",
      "id": 247555,
      "node_id": "MDQ6VXNlcjI0NzU1NQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/247555?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tswast",
      "html_url": "https://github.com/tswast",
      "followers_url": "https://api.github.com/users/tswast/followers",
      "following_url": "https://api.github.com/users/tswast/following{/other_user}",
      "gists_url": "https://api.github.com/users/tswast/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tswast/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tswast/subscriptions",
      "organizations_url": "https://api.github.com/users/tswast/orgs",
      "repos_url": "https://api.github.com/users/tswast/repos",
      "events_url": "https://api.github.com/users/tswast/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tswast/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-22T19:21:40Z",
    "updated_at": "2019-02-22T19:21:40Z",
    "author_association": "CONTRIBUTOR",
    "body": "While working on https://github.com/pydata/pandas-gbq/pull/247, I'm able to construct a DataFrame (and series) with `dtype=\"datetime64[ns, UTC]\"` in the latest packages on pip, but it fails for the pre-wheels with the following:\r\n\r\n```\r\n_ TestReadGBQIntegration.test_should_properly_handle_timestamp_unix_epoch[env] _\r\n\r\nself = <tests.system.test_gbq.TestReadGBQIntegration object at 0x7f3225515588>\r\nproject_id = 'pandas-gbq-tests'\r\n\r\n    def test_should_properly_handle_timestamp_unix_epoch(self, project_id):\r\n        query = 'SELECT TIMESTAMP(\"1970-01-01 00:00:00\") AS unix_epoch'\r\n        df = gbq.read_gbq(\r\n            query,\r\n            project_id=project_id,\r\n            credentials=self.credentials,\r\n>           dialect=\"legacy\",\r\n        )\r\n\r\ntests/system/test_gbq.py:310: \r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\npandas_gbq/gbq.py:842: in read_gbq\r\n    final_df = connector.run_query(query, configuration=configuration)\r\npandas_gbq/gbq.py:486: in run_query\r\n    df = rows_iter.to_dataframe(dtypes=nullsafe_dtypes)\r\n/opt/conda/envs/test-environment/lib/python3.6/site-packages/google/cloud/bigquery/table.py:1429: in to_dataframe\r\n    return self._to_dataframe_tabledata_list(dtypes)\r\n/opt/conda/envs/test-environment/lib/python3.6/site-packages/google/cloud/bigquery/table.py:1333: in _to_dataframe_tabledata_list\r\n    frames.append(self._to_dataframe_dtypes(page, column_names, dtypes))\r\n/opt/conda/envs/test-environment/lib/python3.6/site-packages/google/cloud/bigquery/table.py:1325: in _to_dataframe_dtypes\r\n    columns[column] = pandas.Series(columns[column], dtype=dtypes[column])\r\n/opt/conda/envs/test-environment/lib/python3.6/site-packages/pandas/core/series.py:248: in __init__\r\n    raise_cast_failure=True)\r\n/opt/conda/envs/test-environment/lib/python3.6/site-packages/pandas/core/series.py:2967: in _sanitize_array\r\n    subarr = _try_cast(data, False)\r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n\r\narr = [datetime.datetime(1970, 1, 1, 0, 0, tzinfo=<UTC>)]\r\ntake_fast_path = False\r\n\r\n    def _try_cast(arr, take_fast_path):\r\n    \r\n        # perf shortcut as this is the most common case\r\n        if take_fast_path:\r\n            if maybe_castable(arr) and not copy and dtype is None:\r\n                return arr\r\n    \r\n        try:\r\n            subarr = maybe_cast_to_datetime(arr, dtype)\r\n            if not is_extension_type(subarr):\r\n>               subarr = np.array(subarr, dtype=dtype, copy=copy)\r\nE               TypeError: data type not understood\r\n```\r\n\r\nI'm not sure what the pip packages are doing differently than the latest pre-wheel? In the meantime, I'll use timezone naive datetimes in pandas-gbq."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/475906002",
    "html_url": "https://github.com/pandas-dev/pandas/issues/12513#issuecomment-475906002",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/12513",
    "id": 475906002,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NTkwNjAwMg==",
    "user": {
      "login": "tswast",
      "id": 247555,
      "node_id": "MDQ6VXNlcjI0NzU1NQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/247555?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tswast",
      "html_url": "https://github.com/tswast",
      "followers_url": "https://api.github.com/users/tswast/followers",
      "following_url": "https://api.github.com/users/tswast/following{/other_user}",
      "gists_url": "https://api.github.com/users/tswast/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tswast/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tswast/subscriptions",
      "organizations_url": "https://api.github.com/users/tswast/orgs",
      "repos_url": "https://api.github.com/users/tswast/repos",
      "events_url": "https://api.github.com/users/tswast/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tswast/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-23T21:25:19Z",
    "updated_at": "2019-03-23T21:26:34Z",
    "author_association": "CONTRIBUTOR",
    "body": "Update: Passing a timezone as part of the dtype string was officially deprecated in https://github.com/pandas-dev/pandas/pull/23990 Construct a [DatetimeTZDtype](http://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DatetimeTZDtype.html) instead.\r\n\r\nI believe this issue can be closed."
  }
]
