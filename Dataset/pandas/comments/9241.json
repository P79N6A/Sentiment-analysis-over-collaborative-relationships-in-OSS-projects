[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/69845141",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9241#issuecomment-69845141",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9241",
    "id": 69845141,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5ODQ1MTQx",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-01-13T23:50:45Z",
    "updated_at": "2015-01-13T23:50:45Z",
    "author_association": "CONTRIBUTOR",
    "body": "```\nIn [9]: f = web.DataReader(\"MSFT\", 'yahoo')['Adj Close']\n\nIn [12]: f1 = f.copy(deep=True)\n\nIn [13]: f2 = f.copy(deep=True)\n\nIn [14]: %timeit f[f==0] = np.nan\n1000 loops, best of 3: 409 us per loop\n\nIn [15]: %timeit f2[f2==0.1] = np.nan\n1000 loops, best of 3: 395 us per loop\n```\n\nnot sure why you would be seeing that\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/69882053",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9241#issuecomment-69882053",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9241",
    "id": 69882053,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5ODgyMDUz",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-01-14T08:07:23Z",
    "updated_at": "2015-01-14T08:07:23Z",
    "author_association": "MEMBER",
    "body": "@jreback you are using `timeit`, so that will already run it multiple times and not show the (first) slowest\n\n```\nIn [1]: import pandas.io.data as web\n\nIn [2]: f = web.DataReader(\"MSFT\", 'yahoo')['Adj Close']\n\nIn [3]: %time f[f==0] = np.nan\nWall time: 49 ms\n\nIn [4]: %time f[f==0] = np.nan\nWall time: 3 ms\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/69904839",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9241#issuecomment-69904839",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9241",
    "id": 69904839,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5OTA0ODM5",
    "user": {
      "login": "vfilimonov",
      "id": 1324881,
      "node_id": "MDQ6VXNlcjEzMjQ4ODE=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1324881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vfilimonov",
      "html_url": "https://github.com/vfilimonov",
      "followers_url": "https://api.github.com/users/vfilimonov/followers",
      "following_url": "https://api.github.com/users/vfilimonov/following{/other_user}",
      "gists_url": "https://api.github.com/users/vfilimonov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vfilimonov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vfilimonov/subscriptions",
      "organizations_url": "https://api.github.com/users/vfilimonov/orgs",
      "repos_url": "https://api.github.com/users/vfilimonov/repos",
      "events_url": "https://api.github.com/users/vfilimonov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vfilimonov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-01-14T11:42:54Z",
    "updated_at": "2015-01-14T11:43:37Z",
    "author_association": "CONTRIBUTOR",
    "body": "Strangely, some overhead related to IPython notebook. In IPython measurements are close to those of @jorisvandenbossche (i.e. ~18 times difference, not 1000):\n\n```\nIn [4]: %time f[f==0] = np.nan\nCPU times: user 17.3 ms, sys: 334 µs, total: 17.7 ms\nWall time: 17.5 ms\n\nIn [5]: %time f[f==0] = np.nan\nCPU times: user 886 µs, sys: 233 µs, total: 1.12 ms\nWall time: 925 µs\n```\n\nin pure python difference is also about 12 for me:\n\n```\n>>> import time\n>>> f = web.DataReader(\"MSFT\", 'yahoo')['Adj Close']\n>>> start = time.time()\n>>> f[f==0] = np.nan\n>>> print time.time()-start\n0.0131120681763\n>>> start = time.time()\n>>> f[f==0] = np.nan\n>>> print time.time()-start\n0.00110197067261\n```\n\nChecked for `pandas.DataFrame` - there are almost no difference in python/IPython as well.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/69921342",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9241#issuecomment-69921342",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9241",
    "id": 69921342,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5OTIxMzQy",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-01-14T14:15:55Z",
    "updated_at": "2015-01-14T14:15:55Z",
    "author_association": "CONTRIBUTOR",
    "body": "So the first time the assignment happens. The assignment is checked for `SettingWithCopy`; this involves a `gc.collect(2)` to detect the references.\n\nYou can avoid this by avoiding this dangling reference in the first place by explictiy copying. (you can also simply set `sf.is_copy=None`\n\n```\nIn [3]: import  pandas.io.data as web\nIn [4]: f = web.DataReader(\"MSFT\", 'yahoo') \n\nIn [6]: sf = f['Adj Close'].copy()\n\nIn [7]: %time sf[sf==0] = np.nan\nCPU times: user 936 us, sys: 183 us, total: 1.12 ms\nWall time: 950 us\n\nIn [8]: %time sf[sf==0] = np.nan\nCPU times: user 897 us, sys: 290 us, total: 1.19 ms\nWall time: 871 us\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/69921764",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9241#issuecomment-69921764",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9241",
    "id": 69921764,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5OTIxNzY0",
    "user": {
      "login": "vfilimonov",
      "id": 1324881,
      "node_id": "MDQ6VXNlcjEzMjQ4ODE=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1324881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vfilimonov",
      "html_url": "https://github.com/vfilimonov",
      "followers_url": "https://api.github.com/users/vfilimonov/followers",
      "following_url": "https://api.github.com/users/vfilimonov/following{/other_user}",
      "gists_url": "https://api.github.com/users/vfilimonov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vfilimonov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vfilimonov/subscriptions",
      "organizations_url": "https://api.github.com/users/vfilimonov/orgs",
      "repos_url": "https://api.github.com/users/vfilimonov/repos",
      "events_url": "https://api.github.com/users/vfilimonov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vfilimonov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-01-14T14:18:55Z",
    "updated_at": "2015-01-14T14:18:55Z",
    "author_association": "CONTRIBUTOR",
    "body": "@jreback, many thanks!\nSorry for the false alarm.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/69922690",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9241#issuecomment-69922690",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9241",
    "id": 69922690,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5OTIyNjkw",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-01-14T14:25:34Z",
    "updated_at": "2015-01-14T14:25:34Z",
    "author_association": "CONTRIBUTOR",
    "body": "np, thanks for raising this. sometimes these are bugs.\n"
  }
]
