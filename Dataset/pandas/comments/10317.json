[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/110485770",
    "html_url": "https://github.com/pandas-dev/pandas/issues/10317#issuecomment-110485770",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/10317",
    "id": 110485770,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExMDQ4NTc3MA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-06-09T19:55:33Z",
    "updated_at": "2015-06-09T19:55:33Z",
    "author_association": "CONTRIBUTOR",
    "body": "yep, not implemented ATM. pull-requests welcome. This would require delving into the c-code, but its not that difficult. The reason this fails is that `.values` is the accessor which the json code uses. This returns a numpy array for all types, except for Categorical/Sparse. I think this could be change to `.get_values()` to properly handle these types of things (this would also densify a sparse series for example)\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/110504800",
    "html_url": "https://github.com/pandas-dev/pandas/issues/10317#issuecomment-110504800",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/10317",
    "id": 110504800,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExMDUwNDgwMA==",
    "user": {
      "login": "sborgeson",
      "id": 1043542,
      "node_id": "MDQ6VXNlcjEwNDM1NDI=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1043542?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sborgeson",
      "html_url": "https://github.com/sborgeson",
      "followers_url": "https://api.github.com/users/sborgeson/followers",
      "following_url": "https://api.github.com/users/sborgeson/following{/other_user}",
      "gists_url": "https://api.github.com/users/sborgeson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sborgeson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sborgeson/subscriptions",
      "organizations_url": "https://api.github.com/users/sborgeson/orgs",
      "repos_url": "https://api.github.com/users/sborgeson/repos",
      "events_url": "https://api.github.com/users/sborgeson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sborgeson/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-06-09T21:07:55Z",
    "updated_at": "2015-06-09T21:07:55Z",
    "author_association": "NONE",
    "body": "With respect for all the work you do, avoiding a segfault is not an enhancement. If you don't have near term plans for support serializing DataFrames with categorical indices (my example was the result of using pandas.core.algorithms.quantile), you should add a guard clause that throws an exception indicating this fact, not let the code run through to segfault in C. This is especially true because earlier versions of Pandas (0.14 in my experience) did allow categorical indices, so a simple package update can introduce a segfault.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/110507518",
    "html_url": "https://github.com/pandas-dev/pandas/issues/10317#issuecomment-110507518",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/10317",
    "id": 110507518,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExMDUwNzUxOA==",
    "user": {
      "login": "sborgeson",
      "id": 1043542,
      "node_id": "MDQ6VXNlcjEwNDM1NDI=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1043542?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sborgeson",
      "html_url": "https://github.com/sborgeson",
      "followers_url": "https://api.github.com/users/sborgeson/followers",
      "following_url": "https://api.github.com/users/sborgeson/following{/other_user}",
      "gists_url": "https://api.github.com/users/sborgeson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sborgeson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sborgeson/subscriptions",
      "organizations_url": "https://api.github.com/users/sborgeson/orgs",
      "repos_url": "https://api.github.com/users/sborgeson/repos",
      "events_url": "https://api.github.com/users/sborgeson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sborgeson/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-06-09T21:21:43Z",
    "updated_at": "2015-06-09T21:21:43Z",
    "author_association": "NONE",
    "body": "Looking a little deeper, I can see that there is a guard clause, but it is not working. in io/json.py, _format_axes() for FrameWriter, which relies on this line:\n\n``` python\nif not self.obj.index.is_unique and self.orient in ('index', 'columns'):\n    raise ValueError(\" .... \")\n```\n\nHowever, the CategoricalIndex in the example above returns True for is_unique, and because the 'split' orientation is not addressed in the guard clause, it runs past this protection and into C where it segfaults.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/110512464",
    "html_url": "https://github.com/pandas-dev/pandas/issues/10317#issuecomment-110512464",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/10317",
    "id": 110512464,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExMDUxMjQ2NA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-06-09T21:41:09Z",
    "updated_at": "2015-06-09T21:41:18Z",
    "author_association": "CONTRIBUTOR",
    "body": "@sborgeson I marked this as a bug, then enhancment tag is because I think this may need to be restructured a bit. \n\nas I said happy to take a patch, even it raises a `ValueError` on the python side as we do try to avoid segfaults.\n\nAll that said, `CategoricalIndex` is quite a new feature (only released a few weeks ago), and even though we have quite a few tests, stuff does break. This is the first bug report for this.\n\nFurther when upgrading multiple major versions it is important to review the release notes and test. Which is how I am sure you found this :)\n\nSo going to release 0.16.2 in next few days, if you'd like to but a simple patch up would be gr8 to get it in.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/110527300",
    "html_url": "https://github.com/pandas-dev/pandas/issues/10317#issuecomment-110527300",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/10317",
    "id": 110527300,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExMDUyNzMwMA==",
    "user": {
      "login": "sborgeson",
      "id": 1043542,
      "node_id": "MDQ6VXNlcjEwNDM1NDI=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1043542?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sborgeson",
      "html_url": "https://github.com/sborgeson",
      "followers_url": "https://api.github.com/users/sborgeson/followers",
      "following_url": "https://api.github.com/users/sborgeson/following{/other_user}",
      "gists_url": "https://api.github.com/users/sborgeson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sborgeson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sborgeson/subscriptions",
      "organizations_url": "https://api.github.com/users/sborgeson/orgs",
      "repos_url": "https://api.github.com/users/sborgeson/repos",
      "events_url": "https://api.github.com/users/sborgeson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sborgeson/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-06-09T22:57:00Z",
    "updated_at": "2015-06-09T22:57:00Z",
    "author_association": "NONE",
    "body": "As I seem to have already demonstrated, I'm not sure I know enough about the latest index types to reliably patch this. I was thinking the clause would be something like (in io/json.py, _format_axes() for FrameWriter):\n\n``` python\nif type(self.obj.index) == pandas.core.index.CategoricalIndex: raise ValueError( ... )\n```\n\nBut I've looked at core/index.py and I see that there are several index types, especially MultiIndex that might also require protection. I also noticed that the ValueError that is thrown for orient='index' comes out of the C code rather than the guard clauses in Python, so I'm no longer convinced I understand the intention of guard clauses I was looking at vs. the error handling in C. I think I'll have to wait for the benevolent actions of a developer more familiar with the code base than I am. So thanks for wrangling the bugs.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/110547036",
    "html_url": "https://github.com/pandas-dev/pandas/issues/10317#issuecomment-110547036",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/10317",
    "id": 110547036,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExMDU0NzAzNg==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-06-10T00:43:20Z",
    "updated_at": "2015-06-10T00:43:20Z",
    "author_association": "CONTRIBUTOR",
    "body": "@sborgeson \n\nfixed in #10321 \n\nnote that I am going to keep this open, as this should actually be handled in the c-code (maybe)\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/110549782",
    "html_url": "https://github.com/pandas-dev/pandas/issues/10317#issuecomment-110549782",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/10317",
    "id": 110549782,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExMDU0OTc4Mg==",
    "user": {
      "login": "evanpw",
      "id": 1621449,
      "node_id": "MDQ6VXNlcjE2MjE0NDk=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/1621449?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/evanpw",
      "html_url": "https://github.com/evanpw",
      "followers_url": "https://api.github.com/users/evanpw/followers",
      "following_url": "https://api.github.com/users/evanpw/following{/other_user}",
      "gists_url": "https://api.github.com/users/evanpw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/evanpw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/evanpw/subscriptions",
      "organizations_url": "https://api.github.com/users/evanpw/orgs",
      "repos_url": "https://api.github.com/users/evanpw/repos",
      "events_url": "https://api.github.com/users/evanpw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/evanpw/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-06-10T01:05:04Z",
    "updated_at": "2015-06-10T01:05:04Z",
    "author_association": "CONTRIBUTOR",
    "body": "I've got a fix for the C-code which passes the same tests as #10321.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/110550023",
    "html_url": "https://github.com/pandas-dev/pandas/issues/10317#issuecomment-110550023",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/10317",
    "id": 110550023,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExMDU1MDAyMw==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-06-10T01:06:22Z",
    "updated_at": "2015-06-10T01:06:22Z",
    "author_association": "CONTRIBUTOR",
    "body": "@evanpw ohh, excellent. pull in my tests and put up your fix.!\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/110688699",
    "html_url": "https://github.com/pandas-dev/pandas/issues/10317#issuecomment-110688699",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/10317",
    "id": 110688699,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExMDY4ODY5OQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-06-10T10:30:12Z",
    "updated_at": "2015-06-10T10:30:12Z",
    "author_association": "CONTRIBUTOR",
    "body": "closed by #10322\n\n@sborgeson this is now merged into master and will be in 0.16.2. thanks for the report!\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/110830836",
    "html_url": "https://github.com/pandas-dev/pandas/issues/10317#issuecomment-110830836",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/10317",
    "id": 110830836,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExMDgzMDgzNg==",
    "user": {
      "login": "sborgeson",
      "id": 1043542,
      "node_id": "MDQ6VXNlcjEwNDM1NDI=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1043542?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sborgeson",
      "html_url": "https://github.com/sborgeson",
      "followers_url": "https://api.github.com/users/sborgeson/followers",
      "following_url": "https://api.github.com/users/sborgeson/following{/other_user}",
      "gists_url": "https://api.github.com/users/sborgeson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sborgeson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sborgeson/subscriptions",
      "organizations_url": "https://api.github.com/users/sborgeson/orgs",
      "repos_url": "https://api.github.com/users/sborgeson/repos",
      "events_url": "https://api.github.com/users/sborgeson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sborgeson/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-06-10T16:51:15Z",
    "updated_at": "2015-06-10T16:51:15Z",
    "author_association": "NONE",
    "body": "This was a very efficient process. Thanks for your work on such a great set of tools.\n"
  }
]
