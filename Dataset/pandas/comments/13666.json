[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/233023984",
    "html_url": "https://github.com/pandas-dev/pandas/issues/13666#issuecomment-233023984",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13666",
    "id": 233023984,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzMzAyMzk4NA==",
    "user": {
      "login": "ssanderson",
      "id": 1588357,
      "node_id": "MDQ6VXNlcjE1ODgzNTc=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/1588357?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ssanderson",
      "html_url": "https://github.com/ssanderson",
      "followers_url": "https://api.github.com/users/ssanderson/followers",
      "following_url": "https://api.github.com/users/ssanderson/following{/other_user}",
      "gists_url": "https://api.github.com/users/ssanderson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ssanderson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ssanderson/subscriptions",
      "organizations_url": "https://api.github.com/users/ssanderson/orgs",
      "repos_url": "https://api.github.com/users/ssanderson/repos",
      "events_url": "https://api.github.com/users/ssanderson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ssanderson/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-07-15T18:02:24Z",
    "updated_at": "2016-07-15T18:02:24Z",
    "author_association": "CONTRIBUTOR",
    "body": "It looks like there are similar issues for other resampling frequencies:\n\nWeekly resample in 0.17:\n\n```\nIn [28]: pd.Series(index=dates).groupby(pd.TimeGrouper(freq='W')).nth(5)\nOut[28]:\n2014-01-11   NaN\n2014-01-18   NaN\n2014-01-25   NaN\n2014-02-01   NaN\n2014-02-08   NaN\n2014-02-15   NaN\n2014-02-22   NaN\n2014-03-01   NaN\n2014-03-08   NaN\n2014-03-15   NaN\n2014-03-22   NaN\n2014-03-29   NaN\ndtype: float64\n```\n\nWeekly resample in 0.18:\n\n```\nIn [4]: pd.Series(index=dates).groupby(pd.TimeGrouper(freq='W')).nth(5)\nOut[4]:\n2014-01-12   NaN\n2014-01-19   NaN\n2014-01-26   NaN\n2014-02-02   NaN\n2014-02-09   NaN\n2014-02-16   NaN\n2014-02-23   NaN\n2014-03-02   NaN\n2014-03-09   NaN\n2014-03-16   NaN\n2014-03-23   NaN\n2014-03-30   NaN\ndtype: float64\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/233036154",
    "html_url": "https://github.com/pandas-dev/pandas/issues/13666#issuecomment-233036154",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13666",
    "id": 233036154,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzMzAzNjE1NA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-07-15T18:49:21Z",
    "updated_at": "2016-07-15T18:49:21Z",
    "author_association": "CONTRIBUTOR",
    "body": "M is the offset for month end\nso I think 0.18.1 is correct here\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/233077198",
    "html_url": "https://github.com/pandas-dev/pandas/issues/13666#issuecomment-233077198",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13666",
    "id": 233077198,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzMzA3NzE5OA==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-07-15T21:43:48Z",
    "updated_at": "2016-07-15T21:44:33Z",
    "author_association": "MEMBER",
    "body": "I don't think this has to do with the resampling frequency, rather with a change in `nth`.\n\n`nth` has been changed to a 'reducer', with the consequence it takes the grouper as the index by default (instead of a 'filter' which keeps the original index). For example, for `mean`, which is also a reducer, nothing has changed (so also in 0.17, the end of the month is used):\n\n```\nIn [1]: dates = pd.date_range('2014', periods=90)\n\nIn [2]: pd.Series(index=dates).groupby(pd.TimeGrouper(freq='M')).nth(5)\nOut[2]:\n2014-01-06   NaN\n2014-02-06   NaN\n2014-03-06   NaN\ndtype: float64\n\nIn [3]: pd.Series(index=dates).groupby(pd.TimeGrouper(freq='M')).mean()\nOut[3]:\n2014-01-31   NaN\n2014-02-28   NaN\n2014-03-31   NaN\nFreq: M, dtype: float64\n\nIn [4]: pd.__version__\nOut[4]: u'0.17.1'\n```\n\n```\nIn [1]: dates = pd.date_range('2014', periods=90)\n\nIn [2]: pd.Series(index=dates).groupby(pd.TimeGrouper(freq='M')).nth(5)\nOut[2]:\n2014-01-31   NaN\n2014-02-28   NaN\n2014-03-31   NaN\ndtype: float64\n\nIn [3]: pd.Series(index=dates).groupby(pd.TimeGrouper(freq='M')).mean()\nOut[3]:\n2014-01-31   NaN\n2014-02-28   NaN\n2014-03-31   NaN\nFreq: M, dtype: float64\n\nIn [4]: pd.__version__\nOut[4]: '0.18.1+199.gc9a27ed'\n```\n\nIn 0.17, the index you see in the `nth` case is the original index from the series, because `nth` acted like a 'filter' (keeping the original index for the filtered rows). \nTo get the original behaviour of `nth`, you can get this with `as_index=False`:\n\n```\nIn [9]: pd.__version__\nOut[9]: '0.18.1+199.gc9a27ed'\n\nIn [10]: pd.DataFrame(index=dates, columns=['a']).groupby(pd.TimeGrouper(freq='\n    ...: M'), as_index=False).nth(5)\nOut[10]:\n              a\n2014-01-06  NaN\n2014-02-06  NaN\n2014-03-06  NaN\n```\n\nThe problem with this is that this only seems to work with Series (if I use the original Series example, you get an error). \nThere was recently also somebody who reported this on the mailing list (https://groups.google.com/forum/#!topic/pydata/4ZjOP0Lfjdc), and I am actually wondering if we should change the behaviour back to the 0.17 one.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/233385493",
    "html_url": "https://github.com/pandas-dev/pandas/issues/13666#issuecomment-233385493",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13666",
    "id": 233385493,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzMzM4NTQ5Mw==",
    "user": {
      "login": "ssanderson",
      "id": 1588357,
      "node_id": "MDQ6VXNlcjE1ODgzNTc=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/1588357?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ssanderson",
      "html_url": "https://github.com/ssanderson",
      "followers_url": "https://api.github.com/users/ssanderson/followers",
      "following_url": "https://api.github.com/users/ssanderson/following{/other_user}",
      "gists_url": "https://api.github.com/users/ssanderson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ssanderson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ssanderson/subscriptions",
      "organizations_url": "https://api.github.com/users/ssanderson/orgs",
      "repos_url": "https://api.github.com/users/ssanderson/repos",
      "events_url": "https://api.github.com/users/ssanderson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ssanderson/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-07-18T16:42:02Z",
    "updated_at": "2016-07-18T16:43:33Z",
    "author_association": "CONTRIBUTOR",
    "body": "I could see use-cases for getting the group label (the current behavior) or for getting the label of the selected row (the old behavior), but I would expect that to be an argument to `nth()` rather than to `TimeGrouper`.  I don't know a ton about the internals of `groupby()`, but is it possible that the choice of filter vs. reducer could be made dynamically based on arguments to `nth()`?  I'm imagining an API like:\n\n```\npd.DataFrame(...).groupby(...).nth(5, label='group')  # Current behavior\n```\n\n```\npd.DataFrame(...).groupby(...).nth(5, label='selection')  # pandas 0.17 behavior\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/234305639",
    "html_url": "https://github.com/pandas-dev/pandas/issues/13666#issuecomment-234305639",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13666",
    "id": 234305639,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNDMwNTYzOQ==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-07-21T16:19:25Z",
    "updated_at": "2016-07-21T16:19:25Z",
    "author_association": "MEMBER",
    "body": "@ssanderson Note that `as_index` is an argument to `groupby`, not to `TimeGrouper`\n"
  }
]
