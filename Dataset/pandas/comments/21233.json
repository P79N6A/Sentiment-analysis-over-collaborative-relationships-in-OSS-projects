[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/392616639",
    "html_url": "https://github.com/pandas-dev/pandas/issues/21233#issuecomment-392616639",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/21233",
    "id": 392616639,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MjYxNjYzOQ==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-28T23:28:48Z",
    "updated_at": "2018-05-28T23:28:48Z",
    "author_association": "CONTRIBUTOR",
    "body": "Did you see the docstring for `pd.cut`?\r\n\r\n```python\r\nlabels : array or bool, optional\r\n    Specifies the labels for the returned bins. Must be the same length as\r\n    the resulting bins. If False, returns only integer indicators of the\r\n    bins. This affects the type of the output container (see below).\r\n    This argument is ignored when `bins` is an IntervalIndex.\r\n```\r\n\r\nI'm not sure exactly why, but labels is ignored for II `bins`."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/431869622",
    "html_url": "https://github.com/pandas-dev/pandas/issues/21233#issuecomment-431869622",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/21233",
    "id": 431869622,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMTg2OTYyMg==",
    "user": {
      "login": "ebauch",
      "id": 3758223,
      "node_id": "MDQ6VXNlcjM3NTgyMjM=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/3758223?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ebauch",
      "html_url": "https://github.com/ebauch",
      "followers_url": "https://api.github.com/users/ebauch/followers",
      "following_url": "https://api.github.com/users/ebauch/following{/other_user}",
      "gists_url": "https://api.github.com/users/ebauch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ebauch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ebauch/subscriptions",
      "organizations_url": "https://api.github.com/users/ebauch/orgs",
      "repos_url": "https://api.github.com/users/ebauch/repos",
      "events_url": "https://api.github.com/users/ebauch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ebauch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-22T15:30:49Z",
    "updated_at": "2018-10-22T15:30:49Z",
    "author_association": "NONE",
    "body": "yeah - not quite clear why labels are ignored with specified bins..."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/453801013",
    "html_url": "https://github.com/pandas-dev/pandas/issues/21233#issuecomment-453801013",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/21233",
    "id": 453801013,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MzgwMTAxMw==",
    "user": {
      "login": "mroeschke",
      "id": 10647082,
      "node_id": "MDQ6VXNlcjEwNjQ3MDgy",
      "avatar_url": "https://avatars0.githubusercontent.com/u/10647082?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mroeschke",
      "html_url": "https://github.com/mroeschke",
      "followers_url": "https://api.github.com/users/mroeschke/followers",
      "following_url": "https://api.github.com/users/mroeschke/following{/other_user}",
      "gists_url": "https://api.github.com/users/mroeschke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mroeschke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mroeschke/subscriptions",
      "organizations_url": "https://api.github.com/users/mroeschke/orgs",
      "repos_url": "https://api.github.com/users/mroeschke/repos",
      "events_url": "https://api.github.com/users/mroeschke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mroeschke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-13T04:22:07Z",
    "updated_at": "2019-01-13T04:22:07Z",
    "author_association": "MEMBER",
    "body": "cc @jschendel Do you know why `labels` is ignored when `bins` is an IntervalIndex?"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/453904697",
    "html_url": "https://github.com/pandas-dev/pandas/issues/21233#issuecomment-453904697",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/21233",
    "id": 453904697,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MzkwNDY5Nw==",
    "user": {
      "login": "jschendel",
      "id": 5332445,
      "node_id": "MDQ6VXNlcjUzMzI0NDU=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/5332445?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jschendel",
      "html_url": "https://github.com/jschendel",
      "followers_url": "https://api.github.com/users/jschendel/followers",
      "following_url": "https://api.github.com/users/jschendel/following{/other_user}",
      "gists_url": "https://api.github.com/users/jschendel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jschendel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jschendel/subscriptions",
      "organizations_url": "https://api.github.com/users/jschendel/orgs",
      "repos_url": "https://api.github.com/users/jschendel/repos",
      "events_url": "https://api.github.com/users/jschendel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jschendel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-14T05:25:27Z",
    "updated_at": "2019-01-14T05:25:27Z",
    "author_association": "MEMBER",
    "body": "I don't know why `labels` is ignored, nor do I immediately see a reason why it couldn't be supported.  It looks like this was done during the initial `IntervalIndex` implementation, which was before my time, so I'm not entirely sure what the historical context is for this.  If I had to venture a guess, I'd say it's not so much that this can't be supported, but more so that it'd take a bit work to do properly.\r\n\r\nThe `_bins_to_cuts` function is what's responsible for applying the `labels`, and it currently has an `IntervalIndex` fastpath that ignores `labels`:\r\n\r\nhttps://github.com/pandas-dev/pandas/blob/453fa85a8b88ca22c7b878a3fcf97e068f11b6c4/pandas/core/reshape/tile.py#L327-L332\r\n\r\nI'm not sure what the optimal way for implementing `labels` with an `IntervalIndex` is, but I see two general approaches.  The first would be to just add on `labels` specific code to the `IntervalIndex` fastpath.  This could be viable if implementation is either short or significantly different enough from the existing code, but my worry is that this could lead to duplicate code that would become a burden to maintain.\r\n\r\nThe other approach would be to refactor `_bins_to_cuts` in a more generic way to handle both without impacting performance.  There could be some minor annoyances here to reconcile, e.g. the first thing that comes to mind is that for `IntervalIndex` you want `labels` to be the same length as `bins`, but when `bins` is an array you want `bins` to have one extra element (`n + 1` endpoints --> `n` intervals), and I suspect there'd be other similar things.\r\n\r\nI don't think either approach would be particularly difficult, but would just require a bit of work to make sure that existing functionality is unchanged, and that it's implemented in a maintainable way.\r\n\r\n"
  }
]
