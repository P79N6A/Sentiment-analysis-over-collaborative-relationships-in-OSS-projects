[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/67603695",
    "html_url": "https://github.com/pandas-dev/pandas/pull/9108#issuecomment-67603695",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9108",
    "id": 67603695,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3NjAzNjk1",
    "user": {
      "login": "shoyer",
      "id": 1217238,
      "node_id": "MDQ6VXNlcjEyMTcyMzg=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1217238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shoyer",
      "html_url": "https://github.com/shoyer",
      "followers_url": "https://api.github.com/users/shoyer/followers",
      "following_url": "https://api.github.com/users/shoyer/following{/other_user}",
      "gists_url": "https://api.github.com/users/shoyer/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shoyer/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shoyer/subscriptions",
      "organizations_url": "https://api.github.com/users/shoyer/orgs",
      "repos_url": "https://api.github.com/users/shoyer/repos",
      "events_url": "https://api.github.com/users/shoyer/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shoyer/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-12-19T06:38:57Z",
    "updated_at": "2014-12-19T06:38:57Z",
    "author_association": "MEMBER",
    "body": "@adamgreenhall Could you please explain the motivation behind this change in a little more detail?\n\nThis will also need tests.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/67668024",
    "html_url": "https://github.com/pandas-dev/pandas/pull/9108#issuecomment-67668024",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9108",
    "id": 67668024,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3NjY4MDI0",
    "user": {
      "login": "adamgreenhall",
      "id": 704919,
      "node_id": "MDQ6VXNlcjcwNDkxOQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/704919?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/adamgreenhall",
      "html_url": "https://github.com/adamgreenhall",
      "followers_url": "https://api.github.com/users/adamgreenhall/followers",
      "following_url": "https://api.github.com/users/adamgreenhall/following{/other_user}",
      "gists_url": "https://api.github.com/users/adamgreenhall/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/adamgreenhall/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/adamgreenhall/subscriptions",
      "organizations_url": "https://api.github.com/users/adamgreenhall/orgs",
      "repos_url": "https://api.github.com/users/adamgreenhall/repos",
      "events_url": "https://api.github.com/users/adamgreenhall/events{/privacy}",
      "received_events_url": "https://api.github.com/users/adamgreenhall/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-12-19T17:21:43Z",
    "updated_at": "2014-12-19T17:21:43Z",
    "author_association": "CONTRIBUTOR",
    "body": "This change is about enabling the export of a DataFrame into a part of a json document (I know `to_json` exists, but want to add other things to the document as well). Currently, the lists of data created by `DataFrame.to_dict(orient='list')` are made up of numpy elements. This causes `json.dump` to raise errors if the DataFrame has `np.bool` types (works for `np.float64` and `np.int64`) -- see example of the issue below. \n\nThis change fixes the immediate symptom by converting all list element values to native python types. Perhaps the underlying issue is really that np.bool types are not json compatible - but I wasn't sure how to address that.\n\n```\nIn [1]: import pandas as pd\n\nIn [2]: import json\n\nIn [3]: df = pd.DataFrame({'a': [1.1, 1.2, 1.3], 'b': [2, 3, 4], 'c': [True, False, True]})\n\nIn [4]: print df.dtypes\na    float64\nb      int64\nc       bool\ndtype: object\n\nIn [5]: blob = dict(data=df.to_dict(orient='list'), description='this is some data')\n\nIn [6]: print type(blob['data']['c'][0])\n<type 'numpy.bool_'>\n\nIn [7]: print json.dumps(blob)\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n<ipython-input-7-3bd1feb8b602> in <module>()\n----> 1 print json.dumps(blob)\n\n./python2.7/json/__init__.pyc in dumps(obj, skipkeys, ensure_ascii, check_circular, allow_nan, cls, indent, separators, encoding, default, sort_keys, **kw)\n    241         cls is None and indent is None and separators is None and\n    242         encoding == 'utf-8' and default is None and not sort_keys and not kw):\n--> 243         return _default_encoder.encode(obj)\n    244     if cls is None:\n    245         cls = JSONEncoder\n\n./python2.7/json/encoder.pyc in encode(self, o)\n    205         # exceptions aren't as detailed.  The list call should be roughly\n    206         # equivalent to the PySequence_Fast that ''.join() would do.\n--> 207         chunks = self.iterencode(o, _one_shot=True)\n    208         if not isinstance(chunks, (list, tuple)):\n    209             chunks = list(chunks)\n\n./python2.7/json/encoder.pyc in iterencode(self, o, _one_shot)\n    268                 self.key_separator, self.item_separator, self.sort_keys,\n    269                 self.skipkeys, _one_shot)\n--> 270         return _iterencode(o, 0)\n    271\n    272 def _make_iterencode(markers, _default, _encoder, _indent, _floatstr,\n\n./python2.7/json/encoder.pyc in default(self, o)\n    182\n    183         \"\"\"\n--> 184         raise TypeError(repr(o) + \" is not JSON serializable\")\n    185\n    186     def encode(self, o):\n\nTypeError: True is not JSON serializable\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/67669224",
    "html_url": "https://github.com/pandas-dev/pandas/pull/9108#issuecomment-67669224",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9108",
    "id": 67669224,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3NjY5MjI0",
    "user": {
      "login": "cpcloud",
      "id": 417981,
      "node_id": "MDQ6VXNlcjQxNzk4MQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/417981?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cpcloud",
      "html_url": "https://github.com/cpcloud",
      "followers_url": "https://api.github.com/users/cpcloud/followers",
      "following_url": "https://api.github.com/users/cpcloud/following{/other_user}",
      "gists_url": "https://api.github.com/users/cpcloud/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cpcloud/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cpcloud/subscriptions",
      "organizations_url": "https://api.github.com/users/cpcloud/orgs",
      "repos_url": "https://api.github.com/users/cpcloud/repos",
      "events_url": "https://api.github.com/users/cpcloud/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cpcloud/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-12-19T17:30:45Z",
    "updated_at": "2014-12-19T17:30:45Z",
    "author_association": "MEMBER",
    "body": "if you don't need to do anything special with your frames you can use `pandas.io.json.dumps`:\n\n```\nIn [8]: from pandas.io.json import dumps\n\nIn [9]: dumps(['a', 1, ['a', 2, [3]], {'frame': pd.DataFrame(np.random.rand(2, 2))}])\nOut[9]: '[\"a\",1,[\"a\",2,[3]],{\"frame\":{\"0\":{\"0\":0.369918913,\"1\":0.4624219221},\"1\":{\"0\":0.9272272068,\"1\":0.7450566582}}}]'\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/67669388",
    "html_url": "https://github.com/pandas-dev/pandas/pull/9108#issuecomment-67669388",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9108",
    "id": 67669388,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3NjY5Mzg4",
    "user": {
      "login": "cpcloud",
      "id": 417981,
      "node_id": "MDQ6VXNlcjQxNzk4MQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/417981?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cpcloud",
      "html_url": "https://github.com/cpcloud",
      "followers_url": "https://api.github.com/users/cpcloud/followers",
      "following_url": "https://api.github.com/users/cpcloud/following{/other_user}",
      "gists_url": "https://api.github.com/users/cpcloud/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cpcloud/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cpcloud/subscriptions",
      "organizations_url": "https://api.github.com/users/cpcloud/orgs",
      "repos_url": "https://api.github.com/users/cpcloud/repos",
      "events_url": "https://api.github.com/users/cpcloud/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cpcloud/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-12-19T17:31:58Z",
    "updated_at": "2014-12-19T17:31:58Z",
    "author_association": "MEMBER",
    "body": "`to_dict` will be much less efficient than `to_json`, as `to_json` is looping in C whereas `to_dict` looping in Python.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/67669514",
    "html_url": "https://github.com/pandas-dev/pandas/pull/9108#issuecomment-67669514",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9108",
    "id": 67669514,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3NjY5NTE0",
    "user": {
      "login": "cpcloud",
      "id": 417981,
      "node_id": "MDQ6VXNlcjQxNzk4MQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/417981?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cpcloud",
      "html_url": "https://github.com/cpcloud",
      "followers_url": "https://api.github.com/users/cpcloud/followers",
      "following_url": "https://api.github.com/users/cpcloud/following{/other_user}",
      "gists_url": "https://api.github.com/users/cpcloud/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cpcloud/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cpcloud/subscriptions",
      "organizations_url": "https://api.github.com/users/cpcloud/orgs",
      "repos_url": "https://api.github.com/users/cpcloud/repos",
      "events_url": "https://api.github.com/users/cpcloud/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cpcloud/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-12-19T17:32:53Z",
    "updated_at": "2014-12-19T17:32:53Z",
    "author_association": "MEMBER",
    "body": "`dumps` _could_ be exposed at the toplevel API, though I haven't thought about what additional work that might require\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/67672345",
    "html_url": "https://github.com/pandas-dev/pandas/pull/9108#issuecomment-67672345",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9108",
    "id": 67672345,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3NjcyMzQ1",
    "user": {
      "login": "adamgreenhall",
      "id": 704919,
      "node_id": "MDQ6VXNlcjcwNDkxOQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/704919?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/adamgreenhall",
      "html_url": "https://github.com/adamgreenhall",
      "followers_url": "https://api.github.com/users/adamgreenhall/followers",
      "following_url": "https://api.github.com/users/adamgreenhall/following{/other_user}",
      "gists_url": "https://api.github.com/users/adamgreenhall/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/adamgreenhall/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/adamgreenhall/subscriptions",
      "organizations_url": "https://api.github.com/users/adamgreenhall/orgs",
      "repos_url": "https://api.github.com/users/adamgreenhall/repos",
      "events_url": "https://api.github.com/users/adamgreenhall/events{/privacy}",
      "received_events_url": "https://api.github.com/users/adamgreenhall/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-12-19T17:53:44Z",
    "updated_at": "2014-12-19T17:53:44Z",
    "author_association": "CONTRIBUTOR",
    "body": "I like the idea of using `pandas.io.json.dumps`, but would also like to keep the `orient='list'` styling. Sounds like that would require altering it.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/67674360",
    "html_url": "https://github.com/pandas-dev/pandas/pull/9108#issuecomment-67674360",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9108",
    "id": 67674360,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3Njc0MzYw",
    "user": {
      "login": "cpcloud",
      "id": 417981,
      "node_id": "MDQ6VXNlcjQxNzk4MQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/417981?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cpcloud",
      "html_url": "https://github.com/cpcloud",
      "followers_url": "https://api.github.com/users/cpcloud/followers",
      "following_url": "https://api.github.com/users/cpcloud/following{/other_user}",
      "gists_url": "https://api.github.com/users/cpcloud/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cpcloud/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cpcloud/subscriptions",
      "organizations_url": "https://api.github.com/users/cpcloud/orgs",
      "repos_url": "https://api.github.com/users/cpcloud/repos",
      "events_url": "https://api.github.com/users/cpcloud/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cpcloud/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-12-19T18:08:49Z",
    "updated_at": "2014-12-19T18:08:49Z",
    "author_association": "MEMBER",
    "body": "how comfortable are you with C?\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/67674664",
    "html_url": "https://github.com/pandas-dev/pandas/pull/9108#issuecomment-67674664",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9108",
    "id": 67674664,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3Njc0NjY0",
    "user": {
      "login": "cpcloud",
      "id": 417981,
      "node_id": "MDQ6VXNlcjQxNzk4MQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/417981?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cpcloud",
      "html_url": "https://github.com/cpcloud",
      "followers_url": "https://api.github.com/users/cpcloud/followers",
      "following_url": "https://api.github.com/users/cpcloud/following{/other_user}",
      "gists_url": "https://api.github.com/users/cpcloud/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cpcloud/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cpcloud/subscriptions",
      "organizations_url": "https://api.github.com/users/cpcloud/orgs",
      "repos_url": "https://api.github.com/users/cpcloud/repos",
      "events_url": "https://api.github.com/users/cpcloud/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cpcloud/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-12-19T18:11:15Z",
    "updated_at": "2014-12-19T18:11:53Z",
    "author_association": "MEMBER",
    "body": "you can also do this with `dumps` right now:\n\n```\nIn [16]: import pandas.util.testing as tm\n\nIn [17]: from pandas.io.json import dumps\n\nIn [18]: df = tm.makeTimeDataFrame().reset_index().rename(columns={'index': 'date'}).head(5)\n\nIn [19]: df\nOut[19]:\n        date         A         B         C         D\n0 2000-01-03  0.229303 -1.394965  0.156741  1.233180\n1 2000-01-04 -0.611819  0.616925 -0.063782  0.455711\n2 2000-01-05  2.387436  0.552139 -0.000982 -0.478749\n3 2000-01-06 -0.694529  0.472475  0.924082 -1.544734\n4 2000-01-07 -0.794539 -0.597034 -1.734419 -0.104073\n\nIn [21]: dumps({k: v for k, v in df.iteritems()},orient='values')\nOut[21]: '{\"date\":[946857600000,946944000000,947030400000,947116800000,947203200000],\"A\":[0.2293025925,-0.611819198,2.387435883,-0.6945293878,-0.7945391792],\"C\":[0.1567408883,-0.0637816997,-0.0009824659,0.9240820459,-1.7344187482],\"B\":[-1.3949645486,0.6169250907,0.5521388533,0.4724746145,-0.5970341471],\"D\":[1.2331802175,0.4557113376,-0.4787493278,-1.5447336653,-0.1040725235]}'\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/67676721",
    "html_url": "https://github.com/pandas-dev/pandas/pull/9108#issuecomment-67676721",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9108",
    "id": 67676721,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3Njc2NzIx",
    "user": {
      "login": "adamgreenhall",
      "id": 704919,
      "node_id": "MDQ6VXNlcjcwNDkxOQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/704919?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/adamgreenhall",
      "html_url": "https://github.com/adamgreenhall",
      "followers_url": "https://api.github.com/users/adamgreenhall/followers",
      "following_url": "https://api.github.com/users/adamgreenhall/following{/other_user}",
      "gists_url": "https://api.github.com/users/adamgreenhall/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/adamgreenhall/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/adamgreenhall/subscriptions",
      "organizations_url": "https://api.github.com/users/adamgreenhall/orgs",
      "repos_url": "https://api.github.com/users/adamgreenhall/repos",
      "events_url": "https://api.github.com/users/adamgreenhall/events{/privacy}",
      "received_events_url": "https://api.github.com/users/adamgreenhall/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-12-19T18:27:01Z",
    "updated_at": "2014-12-19T18:27:01Z",
    "author_association": "CONTRIBUTOR",
    "body": "@cpcloud - that works for me - thanks!\n"
  }
]
