[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/42267320",
    "html_url": "https://github.com/pandas-dev/pandas/issues/7051#issuecomment-42267320",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/7051",
    "id": 42267320,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyMjY3MzIw",
    "user": {
      "login": "michaelaye",
      "id": 69774,
      "node_id": "MDQ6VXNlcjY5Nzc0",
      "avatar_url": "https://avatars1.githubusercontent.com/u/69774?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelaye",
      "html_url": "https://github.com/michaelaye",
      "followers_url": "https://api.github.com/users/michaelaye/followers",
      "following_url": "https://api.github.com/users/michaelaye/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelaye/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelaye/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelaye/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelaye/orgs",
      "repos_url": "https://api.github.com/users/michaelaye/repos",
      "events_url": "https://api.github.com/users/michaelaye/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelaye/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-05-06T04:33:17Z",
    "updated_at": "2014-05-06T04:33:59Z",
    "author_association": "CONTRIBUTOR",
    "body": "If anybody wants to play with this, I put the HDF version of the file here (data handle is 'df'):\n\nhttps://dl.dropboxusercontent.com/u/139035/test_write_speed.df\n(175 MB)\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/42293990",
    "html_url": "https://github.com/pandas-dev/pandas/issues/7051#issuecomment-42293990",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/7051",
    "id": 42293990,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyMjkzOTkw",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-05-06T12:01:52Z",
    "updated_at": "2014-05-06T12:02:09Z",
    "author_association": "CONTRIBUTOR",
    "body": "dupe of #3186 \n\n@michaelaye see the linked issue; you have the general case (e.g. simple formatting, all numbers, no quoting), so this would be covered. need someone to write the cython code for this (not that hard), just requires some work, to in effect bypass the csv.writer which is the bottleneck here.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/42306063",
    "html_url": "https://github.com/pandas-dev/pandas/issues/7051#issuecomment-42306063",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/7051",
    "id": 42306063,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyMzA2MDYz",
    "user": {
      "login": "michaelaye",
      "id": 69774,
      "node_id": "MDQ6VXNlcjY5Nzc0",
      "avatar_url": "https://avatars1.githubusercontent.com/u/69774?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelaye",
      "html_url": "https://github.com/michaelaye",
      "followers_url": "https://api.github.com/users/michaelaye/followers",
      "following_url": "https://api.github.com/users/michaelaye/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelaye/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelaye/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelaye/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelaye/orgs",
      "repos_url": "https://api.github.com/users/michaelaye/repos",
      "events_url": "https://api.github.com/users/michaelaye/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelaye/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-05-06T14:06:41Z",
    "updated_at": "2014-05-06T14:06:41Z",
    "author_association": "CONTRIBUTOR",
    "body": "Oem, did you maybe have a typo with that reference? ;)\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/42306236",
    "html_url": "https://github.com/pandas-dev/pandas/issues/7051#issuecomment-42306236",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/7051",
    "id": 42306236,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyMzA2MjM2",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-05-06T14:07:55Z",
    "updated_at": "2014-05-06T14:07:55Z",
    "author_association": "CONTRIBUTOR",
    "body": "look again (i fixed it right away), but I think first one goes out (its correct on the actual web page)\n\nits #3186 \n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/42699711",
    "html_url": "https://github.com/pandas-dev/pandas/issues/7051#issuecomment-42699711",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/7051",
    "id": 42699711,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNjk5NzEx",
    "user": {
      "login": "michaelaye",
      "id": 69774,
      "node_id": "MDQ6VXNlcjY5Nzc0",
      "avatar_url": "https://avatars1.githubusercontent.com/u/69774?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelaye",
      "html_url": "https://github.com/michaelaye",
      "followers_url": "https://api.github.com/users/michaelaye/followers",
      "following_url": "https://api.github.com/users/michaelaye/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelaye/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelaye/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelaye/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelaye/orgs",
      "repos_url": "https://api.github.com/users/michaelaye/repos",
      "events_url": "https://api.github.com/users/michaelaye/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelaye/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-05-09T18:43:22Z",
    "updated_at": "2014-05-09T18:43:22Z",
    "author_association": "CONTRIBUTOR",
    "body": "I'm interested on working on this but don't understand the issue yet. Above profile run does indicate that most time is spent in lib.write_csv_rows (is that my first error?).\nAnd according to my grep, that is alread cython code, so what am I missing?\n\n``` python\n/Users/maye/src/pandas/pandas/lib.pyx:\n  858  @cython.boundscheck(False)\n  859  @cython.wraparound(False)\n  860: def write_csv_rows(list data, list data_index, int nlevels, list cols, object writer):\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/42700086",
    "html_url": "https://github.com/pandas-dev/pandas/issues/7051#issuecomment-42700086",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/7051",
    "id": 42700086,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNzAwMDg2",
    "user": {
      "login": "michaelaye",
      "id": 69774,
      "node_id": "MDQ6VXNlcjY5Nzc0",
      "avatar_url": "https://avatars1.githubusercontent.com/u/69774?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelaye",
      "html_url": "https://github.com/michaelaye",
      "followers_url": "https://api.github.com/users/michaelaye/followers",
      "following_url": "https://api.github.com/users/michaelaye/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelaye/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelaye/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelaye/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelaye/orgs",
      "repos_url": "https://api.github.com/users/michaelaye/repos",
      "events_url": "https://api.github.com/users/michaelaye/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelaye/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-05-09T18:46:41Z",
    "updated_at": "2014-05-09T18:46:41Z",
    "author_association": "CONTRIBUTOR",
    "body": "I see a `_csv.writer` appearing in above profiling run, but with negligible execution time compared to the other calls, or I'm reading this really wrong. :-S\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/42714790",
    "html_url": "https://github.com/pandas-dev/pandas/issues/7051#issuecomment-42714790",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/7051",
    "id": 42714790,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNzE0Nzkw",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-05-09T21:13:22Z",
    "updated_at": "2014-05-09T21:13:22Z",
    "author_association": "CONTRIBUTOR",
    "body": "so `lib.write_csv_rows` takes the data and index (its already in chunks), and basically does a list transform to put it in the correct order, then sends it to the csv writer object to actually join by the separator and write it out.\n\nThe proposal is basically this (and you can do it in python), then translate to cython for speed.\n\nDefine a case where you can completely bypass the csvwriter, (e.g. simple separator, no quoting)\n\nthen you can have a fast_path then conceptually does:\n\n```\ns = line_separator.join([ field_separator.join(data_fields) for l in lines ])\nhandle.write(s)\n```\n\nIOW you basically avoid the overhead of the csv writer by not worrying about quoting and using\nsimple separators (otherwise you will fallback to using the current routines)\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/42725852",
    "html_url": "https://github.com/pandas-dev/pandas/issues/7051#issuecomment-42725852",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/7051",
    "id": 42725852,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNzI1ODUy",
    "user": {
      "login": "michaelaye",
      "id": 69774,
      "node_id": "MDQ6VXNlcjY5Nzc0",
      "avatar_url": "https://avatars1.githubusercontent.com/u/69774?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelaye",
      "html_url": "https://github.com/michaelaye",
      "followers_url": "https://api.github.com/users/michaelaye/followers",
      "following_url": "https://api.github.com/users/michaelaye/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelaye/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelaye/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelaye/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelaye/orgs",
      "repos_url": "https://api.github.com/users/michaelaye/repos",
      "events_url": "https://api.github.com/users/michaelaye/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelaye/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-05-10T00:17:47Z",
    "updated_at": "2014-05-10T00:18:45Z",
    "author_association": "CONTRIBUTOR",
    "body": "ok, so is it the `save` method of the CSVFormatter where I should hook in?\n\n``` python\n    def save(self):\n        # create the writer & save\n        if hasattr(self.path_or_buf, 'write'):\n            f = self.path_or_buf\n            close = False\n        else:\n            f = com._get_handle(self.path_or_buf, self.mode,\n                                encoding=self.encoding)\n            close = True\n\n        try:\n            writer_kwargs = dict(lineterminator=self.line_terminator,\n                                 delimiter=self.sep, quoting=self.quoting,\n                                 doublequote=self.doublequote,\n                                 escapechar=self.escapechar,\n                                 quotechar=self.quotechar)\n            if self.encoding is not None:\n                writer_kwargs['encoding'] = self.encoding\n                self.writer = com.UnicodeWriter(f, **writer_kwargs)\n            else:\n                self.writer = csv.writer(f, **writer_kwargs)\n\n            if self.engine == 'python':\n            # to be removed in 0.13\n                self._helper_csv(self.writer, na_rep=self.na_rep,\n                                 float_format=self.float_format,\n                                 cols=self.cols, header=self.header,\n                                 index=self.index,\n                                 index_label=self.index_label,\n                                 date_format=self.date_format)\n\n            else:\n                self._save()\n\n        finally:\n            if close:\n                f.close()\n```\n\nbecause in frame.to_csv() first the formatter is created and then its save() method is called.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/42726039",
    "html_url": "https://github.com/pandas-dev/pandas/issues/7051#issuecomment-42726039",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/7051",
    "id": 42726039,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNzI2MDM5",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-05-10T00:23:29Z",
    "updated_at": "2014-05-10T00:23:29Z",
    "author_association": "CONTRIBUTOR",
    "body": "yes\n\ncreate a variable like self.fast_path and set it if the conditions are met (eg no quoting simple field separate and line separator )\n\nthen open the write as a regular file (I would punt in encoding for now - don't make that a fast_path)\n\nand then just call the new write_rows_csv_fast if fast_path is set\n\nyou can hijack the engine argument in to_csv (maybe use engine='fast ') or something in order to force it to use a certain engine - this mainly for testing ( eg u want to test that the same file is written with and with out the fast path )\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/42726104",
    "html_url": "https://github.com/pandas-dev/pandas/issues/7051#issuecomment-42726104",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/7051",
    "id": 42726104,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNzI2MTA0",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-05-10T00:24:57Z",
    "updated_at": "2014-05-10T00:24:57Z",
    "author_association": "CONTRIBUTOR",
    "body": "use the. 2nd part of my suggestion above, eg using then engine attribute - no need to add a fast_path attribute \n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/42726188",
    "html_url": "https://github.com/pandas-dev/pandas/issues/7051#issuecomment-42726188",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/7051",
    "id": 42726188,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNzI2MTg4",
    "user": {
      "login": "michaelaye",
      "id": 69774,
      "node_id": "MDQ6VXNlcjY5Nzc0",
      "avatar_url": "https://avatars1.githubusercontent.com/u/69774?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelaye",
      "html_url": "https://github.com/michaelaye",
      "followers_url": "https://api.github.com/users/michaelaye/followers",
      "following_url": "https://api.github.com/users/michaelaye/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelaye/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelaye/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelaye/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelaye/orgs",
      "repos_url": "https://api.github.com/users/michaelaye/repos",
      "events_url": "https://api.github.com/users/michaelaye/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelaye/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-05-10T00:27:22Z",
    "updated_at": "2014-05-10T00:27:22Z",
    "author_association": "CONTRIBUTOR",
    "body": "oh, shoot. I didn't want to jump back to this closed issue, sorry, too many tabs open. This would have been better placed in the open issue #3186 \n"
  }
]
