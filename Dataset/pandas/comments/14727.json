[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/262810872",
    "html_url": "https://github.com/pandas-dev/pandas/issues/14727#issuecomment-262810872",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/14727",
    "id": 262810872,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MjgxMDg3Mg==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-11-24T16:18:56Z",
    "updated_at": "2016-11-24T16:18:56Z",
    "author_association": "CONTRIBUTOR",
    "body": "you are trying to index unicode values with strings; this only really matters in python 2 (python 3 everything is unicode). So technically what you are doing *shouldn't* actually work, but we prob just cast it anyhow. \r\n\r\nNot really sure why this occurs, but if you have a 'fix', then by all means."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/262816417",
    "html_url": "https://github.com/pandas-dev/pandas/issues/14727#issuecomment-262816417",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/14727",
    "id": 262816417,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MjgxNjQxNw==",
    "user": {
      "login": "zym1010",
      "id": 4273204,
      "node_id": "MDQ6VXNlcjQyNzMyMDQ=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/4273204?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zym1010",
      "html_url": "https://github.com/zym1010",
      "followers_url": "https://api.github.com/users/zym1010/followers",
      "following_url": "https://api.github.com/users/zym1010/following{/other_user}",
      "gists_url": "https://api.github.com/users/zym1010/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zym1010/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zym1010/subscriptions",
      "organizations_url": "https://api.github.com/users/zym1010/orgs",
      "repos_url": "https://api.github.com/users/zym1010/repos",
      "events_url": "https://api.github.com/users/zym1010/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zym1010/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-11-24T16:50:38Z",
    "updated_at": "2016-11-24T17:17:15Z",
    "author_association": "CONTRIBUTOR",
    "body": "@jreback See my update, where I copied the relevant code for `xs`. It has nothing to do with unicode or string. I think it's because when using a slice with `np.int64` in `ix`, somehow the code tries to compare it with my unicode labels, and if that `np.int64` can't be converted into `unicode`, there's warning. A simplest way to show this is as follows.\r\n\r\n~~~\r\npython -W always -c 'import numpy as np; np.int64(255)==u\"a\"'\r\n-c:1: UnicodeWarning: Unicode equal comparison failed to convert both arguments to Unicode - interpreting them as being unequal\r\n~~~\r\n\r\nprobably this is relevant to https://github.com/numpy/numpy/issues/7044, and it's not pandas' issue per se. But it seems that the current implementation of `xs` can have some ambiguity issue, since it uses `ix` to return the indexed rows, and it seems that `ix` will first compare those `int64` with my index labels. If somehow those `int64` rows are unfortunately equal to some of my unicode labels, then unpredictable results will follow."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/262824781",
    "html_url": "https://github.com/pandas-dev/pandas/issues/14727#issuecomment-262824781",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/14727",
    "id": 262824781,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MjgyNDc4MQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-11-24T17:48:52Z",
    "updated_at": "2016-11-24T17:48:52Z",
    "author_association": "CONTRIBUTOR",
    "body": "@zym1010 yes, you can do an ``is_integer`` on the indexer to avoid this comparison"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/262825304",
    "html_url": "https://github.com/pandas-dev/pandas/issues/14727#issuecomment-262825304",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/14727",
    "id": 262825304,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MjgyNTMwNA==",
    "user": {
      "login": "zym1010",
      "id": 4273204,
      "node_id": "MDQ6VXNlcjQyNzMyMDQ=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/4273204?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zym1010",
      "html_url": "https://github.com/zym1010",
      "followers_url": "https://api.github.com/users/zym1010/followers",
      "following_url": "https://api.github.com/users/zym1010/following{/other_user}",
      "gists_url": "https://api.github.com/users/zym1010/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zym1010/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zym1010/subscriptions",
      "organizations_url": "https://api.github.com/users/zym1010/orgs",
      "repos_url": "https://api.github.com/users/zym1010/repos",
      "events_url": "https://api.github.com/users/zym1010/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zym1010/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-11-24T17:53:02Z",
    "updated_at": "2016-11-24T17:53:02Z",
    "author_association": "CONTRIBUTOR",
    "body": "@jreback Can you elaborate? I think my main concern is why is `ix` trying to compare a numerical slice with labels in the first place, since my labels are not integer based, and I don't see how I as a user can avoid this comparison."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/262826915",
    "html_url": "https://github.com/pandas-dev/pandas/issues/14727#issuecomment-262826915",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/14727",
    "id": 262826915,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MjgyNjkxNQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-11-24T18:06:35Z",
    "updated_at": "2016-11-24T18:06:35Z",
    "author_association": "CONTRIBUTOR",
    "body": "``.ix`` with numbers by-definition is a label comparison. use ``.iloc`` for positional comparison."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/262827197",
    "html_url": "https://github.com/pandas-dev/pandas/issues/14727#issuecomment-262827197",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/14727",
    "id": 262827197,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MjgyNzE5Nw==",
    "user": {
      "login": "zym1010",
      "id": 4273204,
      "node_id": "MDQ6VXNlcjQyNzMyMDQ=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/4273204?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zym1010",
      "html_url": "https://github.com/zym1010",
      "followers_url": "https://api.github.com/users/zym1010/followers",
      "following_url": "https://api.github.com/users/zym1010/following{/other_user}",
      "gists_url": "https://api.github.com/users/zym1010/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zym1010/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zym1010/subscriptions",
      "organizations_url": "https://api.github.com/users/zym1010/orgs",
      "repos_url": "https://api.github.com/users/zym1010/repos",
      "events_url": "https://api.github.com/users/zym1010/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zym1010/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-11-24T18:09:14Z",
    "updated_at": "2016-11-24T18:32:57Z",
    "author_association": "CONTRIBUTOR",
    "body": "@jreback based on <http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.ix.html>, which says\r\n\r\n> `.ix[]` supports mixed integer and label based access. It is primarily label based, but will fall back to integer positional access unless the corresponding axis is of integer type.\r\n\r\nSo from my understanding, if my index is not integer type, then `.ix` with numbers should give me position.\r\n\r\nI don't quite understand what \"fallback\" means. But from my experiment, when there are both unicode and integers in the index labels, integer passed into `.ix` will be considered as position, and won't count as label comparison, even if some labels are equal to them.\r\n\r\n~~~\r\nIn [1]: import pandas as pd\r\nIn [2]: import numpy as np\r\nIn [3]: s2 = pd.Series(np.nan, index=[u'a',u'b',u'c',u'd',u'e', 1, 2, 3, 4, 5])\r\nIn [4]: s2.ix[2:5]\r\nOut[4]:\r\nc   NaN\r\nd   NaN\r\ne   NaN\r\ndtype: float64\r\nIn [5]: s2=s2.sort_index()\r\nIn [6]: s2.ix[2:5]\r\nOut[6]:\r\n3   NaN\r\n4   NaN\r\n5   NaN\r\ndtype: float64\r\nIn [7]: s2\r\nOut[7]:\r\n1   NaN\r\n2   NaN\r\n3   NaN\r\n4   NaN\r\n5   NaN\r\na   NaN\r\nb   NaN\r\nc   NaN\r\nd   NaN\r\ne   NaN\r\ndtype: float64\r\n~~~"
  }
]
