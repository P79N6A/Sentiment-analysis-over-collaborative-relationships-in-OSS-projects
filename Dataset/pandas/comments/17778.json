[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/334135634",
    "html_url": "https://github.com/pandas-dev/pandas/issues/17778#issuecomment-334135634",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17778",
    "id": 334135634,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzNDEzNTYzNA==",
    "user": {
      "login": "normanius",
      "id": 11406002,
      "node_id": "MDQ6VXNlcjExNDA2MDAy",
      "avatar_url": "https://avatars2.githubusercontent.com/u/11406002?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/normanius",
      "html_url": "https://github.com/normanius",
      "followers_url": "https://api.github.com/users/normanius/followers",
      "following_url": "https://api.github.com/users/normanius/following{/other_user}",
      "gists_url": "https://api.github.com/users/normanius/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/normanius/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/normanius/subscriptions",
      "organizations_url": "https://api.github.com/users/normanius/orgs",
      "repos_url": "https://api.github.com/users/normanius/repos",
      "events_url": "https://api.github.com/users/normanius/events{/privacy}",
      "received_events_url": "https://api.github.com/users/normanius/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-04T12:12:41Z",
    "updated_at": "2017-10-04T12:32:14Z",
    "author_association": "NONE",
    "body": "The problem is located in `_get_handle()` of module `pandas.io.common`:\r\n\r\n```\r\n# ZIP Compression\r\nelif compression == 'zip':\r\n    import zipfile\r\n    zip_file = zipfile.ZipFile(path_or_buf)\r\n    zip_names = zip_file.namelist()\r\n    if len(zip_names) == 1:\r\n        f = zip_file.open(zip_names.pop())\r\n    elif len(zip_names) == 0:\r\n        raise ValueError('Zero files found in ZIP file {}'\r\n                         .format(path_or_buf))\r\n    else:\r\n        raise ValueError('Multiple files found in ZIP file.'\r\n                         ' Only one file per ZIP: {}'\r\n                         .format(zip_names))\r\n```\r\n\r\nWith this code, the zip file is opened only for reading, and not for writing. Argument `mode` certainly should be used somewhere."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/334156849",
    "html_url": "https://github.com/pandas-dev/pandas/issues/17778#issuecomment-334156849",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17778",
    "id": 334156849,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzNDE1Njg0OQ==",
    "user": {
      "login": "chris-b1",
      "id": 1924092,
      "node_id": "MDQ6VXNlcjE5MjQwOTI=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1924092?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chris-b1",
      "html_url": "https://github.com/chris-b1",
      "followers_url": "https://api.github.com/users/chris-b1/followers",
      "following_url": "https://api.github.com/users/chris-b1/following{/other_user}",
      "gists_url": "https://api.github.com/users/chris-b1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chris-b1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chris-b1/subscriptions",
      "organizations_url": "https://api.github.com/users/chris-b1/orgs",
      "repos_url": "https://api.github.com/users/chris-b1/repos",
      "events_url": "https://api.github.com/users/chris-b1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chris-b1/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-04T13:35:12Z",
    "updated_at": "2017-10-04T13:35:12Z",
    "author_association": "CONTRIBUTOR",
    "body": "Yep, problem does seem to be not passing the correct mode, PR to fix welcome!"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/334274033",
    "html_url": "https://github.com/pandas-dev/pandas/issues/17778#issuecomment-334274033",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17778",
    "id": 334274033,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzNDI3NDAzMw==",
    "user": {
      "login": "MasonGallo",
      "id": 4913951,
      "node_id": "MDQ6VXNlcjQ5MTM5NTE=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/4913951?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MasonGallo",
      "html_url": "https://github.com/MasonGallo",
      "followers_url": "https://api.github.com/users/MasonGallo/followers",
      "following_url": "https://api.github.com/users/MasonGallo/following{/other_user}",
      "gists_url": "https://api.github.com/users/MasonGallo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MasonGallo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MasonGallo/subscriptions",
      "organizations_url": "https://api.github.com/users/MasonGallo/orgs",
      "repos_url": "https://api.github.com/users/MasonGallo/repos",
      "events_url": "https://api.github.com/users/MasonGallo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MasonGallo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-04T20:07:51Z",
    "updated_at": "2017-10-04T20:07:51Z",
    "author_association": "CONTRIBUTOR",
    "body": "It looks like the code for zip was written only for reading? Why not use gzip to write a single zip file?"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/336139654",
    "html_url": "https://github.com/pandas-dev/pandas/issues/17778#issuecomment-336139654",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17778",
    "id": 336139654,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzNjEzOTY1NA==",
    "user": {
      "login": "s4chin",
      "id": 5997735,
      "node_id": "MDQ6VXNlcjU5OTc3MzU=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/5997735?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/s4chin",
      "html_url": "https://github.com/s4chin",
      "followers_url": "https://api.github.com/users/s4chin/followers",
      "following_url": "https://api.github.com/users/s4chin/following{/other_user}",
      "gists_url": "https://api.github.com/users/s4chin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/s4chin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/s4chin/subscriptions",
      "organizations_url": "https://api.github.com/users/s4chin/orgs",
      "repos_url": "https://api.github.com/users/s4chin/repos",
      "events_url": "https://api.github.com/users/s4chin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/s4chin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-12T13:38:02Z",
    "updated_at": "2017-10-12T13:38:02Z",
    "author_association": "NONE",
    "body": "Can I try this? I'm looking for a first issue as an entry point."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/336142313",
    "html_url": "https://github.com/pandas-dev/pandas/issues/17778#issuecomment-336142313",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17778",
    "id": 336142313,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzNjE0MjMxMw==",
    "user": {
      "login": "chris-b1",
      "id": 1924092,
      "node_id": "MDQ6VXNlcjE5MjQwOTI=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1924092?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chris-b1",
      "html_url": "https://github.com/chris-b1",
      "followers_url": "https://api.github.com/users/chris-b1/followers",
      "following_url": "https://api.github.com/users/chris-b1/following{/other_user}",
      "gists_url": "https://api.github.com/users/chris-b1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chris-b1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chris-b1/subscriptions",
      "organizations_url": "https://api.github.com/users/chris-b1/orgs",
      "repos_url": "https://api.github.com/users/chris-b1/repos",
      "events_url": "https://api.github.com/users/chris-b1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chris-b1/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-12T13:47:20Z",
    "updated_at": "2017-10-12T13:47:20Z",
    "author_association": "CONTRIBUTOR",
    "body": "Yes, go ahead!"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/336391291",
    "html_url": "https://github.com/pandas-dev/pandas/issues/17778#issuecomment-336391291",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17778",
    "id": 336391291,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzNjM5MTI5MQ==",
    "user": {
      "login": "s4chin",
      "id": 5997735,
      "node_id": "MDQ6VXNlcjU5OTc3MzU=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/5997735?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/s4chin",
      "html_url": "https://github.com/s4chin",
      "followers_url": "https://api.github.com/users/s4chin/followers",
      "following_url": "https://api.github.com/users/s4chin/following{/other_user}",
      "gists_url": "https://api.github.com/users/s4chin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/s4chin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/s4chin/subscriptions",
      "organizations_url": "https://api.github.com/users/s4chin/orgs",
      "repos_url": "https://api.github.com/users/s4chin/repos",
      "events_url": "https://api.github.com/users/s4chin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/s4chin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-13T08:50:13Z",
    "updated_at": "2017-10-13T08:50:13Z",
    "author_association": "NONE",
    "body": "mode is `'wb'` when writing to the zipfile. `zipfile.Zipfile` only accepts `'a'`, `'r'`, `'w'` as modes, hence `'wb'` needs to be converted to `'w'`.\r\nAfter doing this, it gives me\r\n```\r\nFile \"pandas/io/common.py\", line 369, in _get_handle\r\n    .format(path_or_buf))\r\nValueError: Zero files found in ZIP file out.zip\r\n```\r\nSo I just took out the `if ... elif ... else` part out and did `f = zipfile.ZipFile(path_or_buf, 'w')` which results in\r\n```\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"pandas/core/generic.py\", line 1611, in to_pickle\r\n    protocol=protocol)\r\n  File \"pandas/io/pickle.py\", line 45, in to_pickle\r\n    pkl.dump(obj, f, protocol=protocol)\r\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/zipfile.py\", line 1123, in write\r\n    st = os.stat(filename)\r\nTypeError: must be encoded string without NULL bytes, not str\r\n```\r\nAny pointers on how to move ahead? As @MasonGallo said, the code looks like it was meant only for reading."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/336530464",
    "html_url": "https://github.com/pandas-dev/pandas/issues/17778#issuecomment-336530464",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17778",
    "id": 336530464,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzNjUzMDQ2NA==",
    "user": {
      "login": "normanius",
      "id": 11406002,
      "node_id": "MDQ6VXNlcjExNDA2MDAy",
      "avatar_url": "https://avatars2.githubusercontent.com/u/11406002?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/normanius",
      "html_url": "https://github.com/normanius",
      "followers_url": "https://api.github.com/users/normanius/followers",
      "following_url": "https://api.github.com/users/normanius/following{/other_user}",
      "gists_url": "https://api.github.com/users/normanius/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/normanius/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/normanius/subscriptions",
      "organizations_url": "https://api.github.com/users/normanius/orgs",
      "repos_url": "https://api.github.com/users/normanius/repos",
      "events_url": "https://api.github.com/users/normanius/events{/privacy}",
      "received_events_url": "https://api.github.com/users/normanius/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-13T18:21:12Z",
    "updated_at": "2017-10-13T18:21:12Z",
    "author_association": "NONE",
    "body": "When I looked at it, I didn't find a straightforward way of doing it. The problem is that `io.common._get_handle()` needs to create an object with a file-like interface (read, write, open) to which you can later write strings/bytes. `zipfile.ZipFile` represents more a container for files than a container for strings, so not sure if it can be used like a normal file-handle. \r\n\r\nMaybe one can construct something around `ZipFile.writestr()` that takes bytes instead of files to write into the zip file. This won't give you a file-handle or anything, but maybe you can tinker one using some [functools](https://docs.python.org/3/library/functools.html) or [StringIO](https://docs.python.org/3/library/io.html). But for this one needs to understand where the file-handle is used etc.\r\n\r\nAlternatively follow up on @MasonGallo comment regarding gzip?"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/373917644",
    "html_url": "https://github.com/pandas-dev/pandas/issues/17778#issuecomment-373917644",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17778",
    "id": 373917644,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MzkxNzY0NA==",
    "user": {
      "login": "minggli",
      "id": 14131823,
      "node_id": "MDQ6VXNlcjE0MTMxODIz",
      "avatar_url": "https://avatars0.githubusercontent.com/u/14131823?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minggli",
      "html_url": "https://github.com/minggli",
      "followers_url": "https://api.github.com/users/minggli/followers",
      "following_url": "https://api.github.com/users/minggli/following{/other_user}",
      "gists_url": "https://api.github.com/users/minggli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minggli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minggli/subscriptions",
      "organizations_url": "https://api.github.com/users/minggli/orgs",
      "repos_url": "https://api.github.com/users/minggli/repos",
      "events_url": "https://api.github.com/users/minggli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minggli/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-17T12:48:18Z",
    "updated_at": "2018-03-17T12:48:18Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hi @jreback ,\r\n\r\nWill try to fix this issue if it hasn't been fixed since last conversation. Reverting.\r\n\r\nThanks,\r\n\r\nMing"
  }
]
