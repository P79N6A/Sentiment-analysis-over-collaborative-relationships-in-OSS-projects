[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/336833433",
    "html_url": "https://github.com/pandas-dev/pandas/pull/17889#issuecomment-336833433",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17889",
    "id": 336833433,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzNjgzMzQzMw==",
    "user": {
      "login": "pep8speaks",
      "id": 24736507,
      "node_id": "MDQ6VXNlcjI0NzM2NTA3",
      "avatar_url": "https://avatars1.githubusercontent.com/u/24736507?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pep8speaks",
      "html_url": "https://github.com/pep8speaks",
      "followers_url": "https://api.github.com/users/pep8speaks/followers",
      "following_url": "https://api.github.com/users/pep8speaks/following{/other_user}",
      "gists_url": "https://api.github.com/users/pep8speaks/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pep8speaks/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pep8speaks/subscriptions",
      "organizations_url": "https://api.github.com/users/pep8speaks/orgs",
      "repos_url": "https://api.github.com/users/pep8speaks/repos",
      "events_url": "https://api.github.com/users/pep8speaks/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pep8speaks/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-16T09:35:19Z",
    "updated_at": "2017-11-13T12:27:29Z",
    "author_association": "NONE",
    "body": "Hello @kaichogami! Thanks for updating the PR.\n\n - In the file [`pandas/core/categorical.py`](https://github.com/pandas-dev/pandas/blob/92303ec88cffce221a103cc7046bbdee56eb945e/pandas/core/categorical.py), following are the PEP8 issues :\n\n> [Line 655:1](https://github.com/pandas-dev/pandas/blob/92303ec88cffce221a103cc7046bbdee56eb945e/pandas/core/categorical.py#L655): [W293](https://duckduckgo.com/?q=pep8%20W293) blank line contains whitespace\n> [Line 657:13](https://github.com/pandas-dev/pandas/blob/92303ec88cffce221a103cc7046bbdee56eb945e/pandas/core/categorical.py#L657): [E303](https://duckduckgo.com/?q=pep8%20E303) too many blank lines (2)\n> [Line 667:1](https://github.com/pandas-dev/pandas/blob/92303ec88cffce221a103cc7046bbdee56eb945e/pandas/core/categorical.py#L667): [W293](https://duckduckgo.com/?q=pep8%20W293) blank line contains whitespace\n> [Line 668:9](https://github.com/pandas-dev/pandas/blob/92303ec88cffce221a103cc7046bbdee56eb945e/pandas/core/categorical.py#L668): [E303](https://duckduckgo.com/?q=pep8%20E303) too many blank lines (2)\n> [Line 669:13](https://github.com/pandas-dev/pandas/blob/92303ec88cffce221a103cc7046bbdee56eb945e/pandas/core/categorical.py#L669): [E129](https://duckduckgo.com/?q=pep8%20E129) visually indented line with same indent as next logical line\n\n\n\n##### Comment last updated on November 13, 2017 at 12:27 Hours UTC"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/336834067",
    "html_url": "https://github.com/pandas-dev/pandas/pull/17889#issuecomment-336834067",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17889",
    "id": 336834067,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzNjgzNDA2Nw==",
    "user": {
      "login": "kaichogami",
      "id": 6412770,
      "node_id": "MDQ6VXNlcjY0MTI3NzA=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/6412770?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kaichogami",
      "html_url": "https://github.com/kaichogami",
      "followers_url": "https://api.github.com/users/kaichogami/followers",
      "following_url": "https://api.github.com/users/kaichogami/following{/other_user}",
      "gists_url": "https://api.github.com/users/kaichogami/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kaichogami/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kaichogami/subscriptions",
      "organizations_url": "https://api.github.com/users/kaichogami/orgs",
      "repos_url": "https://api.github.com/users/kaichogami/repos",
      "events_url": "https://api.github.com/users/kaichogami/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kaichogami/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-16T09:37:48Z",
    "updated_at": "2017-10-16T09:37:48Z",
    "author_association": "NONE",
    "body": "@TomAugspurger "
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/337557268",
    "html_url": "https://github.com/pandas-dev/pandas/pull/17889#issuecomment-337557268",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17889",
    "id": 337557268,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzNzU1NzI2OA==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-18T11:14:28Z",
    "updated_at": "2017-10-18T11:14:38Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thanks @kaichogami!\r\n\r\nI didn't quite understand what fastpath was doing earlier. It seems to only be valid when `values` is actually `codes`, so I think we should focus the effort on fixing `from_codes` (but the warning you put in place looks good and should stay).\r\n\r\nOk, so, we'll want to modify `Categorical.from_codes` to also take a `dtype` argument.\r\n\r\n```python\r\ndef from_codes(cls, codes, categories, ordered=None, dtype=None):\r\n   ...\r\n```\r\n\r\nWe'll do the validation of `categories`, `ordered`, and `dtype`, basically refactor the first section of `__init__` to something like\r\n\r\n```python\r\ndef validate_dtype(values=None, categories=None, ordered=None, dtype=None):\r\n\r\n        # Ways of specifying the dtype (prioritized ordered)\r\n        # 1. dtype is a CategoricalDtype\r\n        #    a.) with known categories, use dtype.categories\r\n        #    b.) else with Categorical values, use values.dtype\r\n        #    c.) else, infer from values\r\n        #    d.) specifying dtype=CategoricalDtype and categories is an error\r\n        # 2. dtype is a string 'category'\r\n        #    a.) use categories, ordered\r\n        #    b.) use values.dtype\r\n        #    c.) infer from values\r\n        # 3. dtype is None\r\n        #    a.) use categories, ordered\r\n        #    b.) use values.dtype\r\n        #    c.) infer from values\r\n\r\n        if dtype is not None:\r\n            if isinstance(dtype, compat.string_types):\r\n                if dtype == 'category':\r\n                    dtype = CategoricalDtype(categories, ordered)\r\n                else:\r\n                    msg = \"Unknown `dtype` {dtype}\"\r\n                    raise ValueError(msg.format(dtype=dtype))\r\n            elif categories is not None or ordered is not None:\r\n                raise ValueError(\"Cannot specify both `dtype` and `categories`\"\r\n                                 \" or `ordered`.\")\r\n\r\n            categories = dtype.categories\r\n            ordered = dtype.ordered\r\n\r\n        elif is_categorical(values):\r\n            dtype = values.dtype._from_categorical_dtype(values.dtype,\r\n                                                         categories, ordered)\r\n        else:\r\n            dtype = CategoricalDtype(categories, ordered)\r\n        return categories, ordered, dtype\r\n```\r\n\r\nAnd use that in both `__init__` and `from_codes`.\r\n\r\nThen, in `from_codes`, instead of `return cls(codes, categories...)`, you'll do\r\n\r\n```python\r\nself = cls.__new__(cls)\r\nself._codes = coerce_indexer_dtype(codes, dtype.categories)\r\nself._dtype = dtype\r\nreturn self\r\n```\r\n\r\nI *think* that'll work. Then, anywhere you see a `fastpath=True`, you should be able to change it to use `from_codes` with a dtype, and it'll be as fast as possible. Make sense?"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/338188211",
    "html_url": "https://github.com/pandas-dev/pandas/pull/17889#issuecomment-338188211",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17889",
    "id": 338188211,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzODE4ODIxMQ==",
    "user": {
      "login": "kaichogami",
      "id": 6412770,
      "node_id": "MDQ6VXNlcjY0MTI3NzA=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/6412770?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kaichogami",
      "html_url": "https://github.com/kaichogami",
      "followers_url": "https://api.github.com/users/kaichogami/followers",
      "following_url": "https://api.github.com/users/kaichogami/following{/other_user}",
      "gists_url": "https://api.github.com/users/kaichogami/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kaichogami/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kaichogami/subscriptions",
      "organizations_url": "https://api.github.com/users/kaichogami/orgs",
      "repos_url": "https://api.github.com/users/kaichogami/repos",
      "events_url": "https://api.github.com/users/kaichogami/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kaichogami/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-20T12:07:57Z",
    "updated_at": "2017-10-20T12:07:57Z",
    "author_association": "NONE",
    "body": "Yes, it does. I will go change it as soon as I can. Thanks for the feedback! :smile: "
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/340050383",
    "html_url": "https://github.com/pandas-dev/pandas/pull/17889#issuecomment-340050383",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17889",
    "id": 340050383,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0MDA1MDM4Mw==",
    "user": {
      "login": "kaichogami",
      "id": 6412770,
      "node_id": "MDQ6VXNlcjY0MTI3NzA=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/6412770?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kaichogami",
      "html_url": "https://github.com/kaichogami",
      "followers_url": "https://api.github.com/users/kaichogami/followers",
      "following_url": "https://api.github.com/users/kaichogami/following{/other_user}",
      "gists_url": "https://api.github.com/users/kaichogami/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kaichogami/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kaichogami/subscriptions",
      "organizations_url": "https://api.github.com/users/kaichogami/orgs",
      "repos_url": "https://api.github.com/users/kaichogami/repos",
      "events_url": "https://api.github.com/users/kaichogami/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kaichogami/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-27T18:32:09Z",
    "updated_at": "2017-10-27T18:32:09Z",
    "author_association": "NONE",
    "body": "Hi, I am a bit busy so if its something important somebody else can take it over, otherwise I will do it by next week. Thank you."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/340050562",
    "html_url": "https://github.com/pandas-dev/pandas/pull/17889#issuecomment-340050562",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17889",
    "id": 340050562,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0MDA1MDU2Mg==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-27T18:32:49Z",
    "updated_at": "2017-10-27T18:32:49Z",
    "author_association": "CONTRIBUTOR",
    "body": "No rush on this."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/343761890",
    "html_url": "https://github.com/pandas-dev/pandas/pull/17889#issuecomment-343761890",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17889",
    "id": 343761890,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0Mzc2MTg5MA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-12T19:45:47Z",
    "updated_at": "2017-11-12T19:45:47Z",
    "author_association": "CONTRIBUTOR",
    "body": "can you rebase"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/354281980",
    "html_url": "https://github.com/pandas-dev/pandas/pull/17889#issuecomment-354281980",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/17889",
    "id": 354281980,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NDI4MTk4MA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-28T12:36:16Z",
    "updated_at": "2017-12-28T12:36:16Z",
    "author_association": "CONTRIBUTOR",
    "body": "closing as stale, if you want to work on this, pls ping."
  }
]
