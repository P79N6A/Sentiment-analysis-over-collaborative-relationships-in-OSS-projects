[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/66796068",
    "html_url": "https://github.com/pandas-dev/pandas/pull/9061#issuecomment-66796068",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9061",
    "id": 66796068,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2Nzk2MDY4",
    "user": {
      "login": "behzadnouri",
      "id": 1288998,
      "node_id": "MDQ6VXNlcjEyODg5OTg=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1288998?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/behzadnouri",
      "html_url": "https://github.com/behzadnouri",
      "followers_url": "https://api.github.com/users/behzadnouri/followers",
      "following_url": "https://api.github.com/users/behzadnouri/following{/other_user}",
      "gists_url": "https://api.github.com/users/behzadnouri/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/behzadnouri/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/behzadnouri/subscriptions",
      "organizations_url": "https://api.github.com/users/behzadnouri/orgs",
      "repos_url": "https://api.github.com/users/behzadnouri/repos",
      "events_url": "https://api.github.com/users/behzadnouri/events{/privacy}",
      "received_events_url": "https://api.github.com/users/behzadnouri/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-12-12T16:27:17Z",
    "updated_at": "2014-12-12T16:29:22Z",
    "author_association": "CONTRIBUTOR",
    "body": "benchmarks with `-r 'unstack'` and `-r 'pivot'` argument:\n\n```\n-------------------------------------------------------------------------------\nTest name                                    | head[ms] | base[ms] |  ratio   |\n-------------------------------------------------------------------------------\nreshape_pivot_time_series                    | 311.2280 | 291.2517 |   1.0686 |\ngroupby_pivot_table                          |  31.4820 |  28.9483 |   1.0875 |\n-------------------------------------------------------------------------------\nTest name                                    | head[ms] | base[ms] |  ratio   |\n-------------------------------------------------------------------------------\n\nRatio < 1.0 means the target commit is faster then the baseline.\nSeed used: 1234\n\nTarget [6715a60] : unstack with nan in the index\nBase   [5bb5025] : DOC: initial setup for v0.16.0\n\n-------------------------------------------------------------------------------\nTest name                                    | head[ms] | base[ms] |  ratio   |\n-------------------------------------------------------------------------------\nunstack_sparse_keyspace                      |   2.7093 |   2.8173 |   0.9617 |\nreshape_unstack_simple                       |   5.6877 |   5.5610 |   1.0228 |\n-------------------------------------------------------------------------------\nTest name                                    | head[ms] | base[ms] |  ratio   |\n-------------------------------------------------------------------------------\n\nRatio < 1.0 means the target commit is faster then the baseline.\nSeed used: 1234\n\nTarget [6715a60] : unstack with nan in the index\nBase   [5bb5025] : DOC: initial setup for v0.16.0\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/66900215",
    "html_url": "https://github.com/pandas-dev/pandas/pull/9061#issuecomment-66900215",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9061",
    "id": 66900215,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2OTAwMjE1",
    "user": {
      "login": "shoyer",
      "id": 1217238,
      "node_id": "MDQ6VXNlcjEyMTcyMzg=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1217238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shoyer",
      "html_url": "https://github.com/shoyer",
      "followers_url": "https://api.github.com/users/shoyer/followers",
      "following_url": "https://api.github.com/users/shoyer/following{/other_user}",
      "gists_url": "https://api.github.com/users/shoyer/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shoyer/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shoyer/subscriptions",
      "organizations_url": "https://api.github.com/users/shoyer/orgs",
      "repos_url": "https://api.github.com/users/shoyer/repos",
      "events_url": "https://api.github.com/users/shoyer/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shoyer/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-12-14T02:29:54Z",
    "updated_at": "2014-12-14T02:29:54Z",
    "author_association": "MEMBER",
    "body": "This is not an area of the pandas codebase that I'm particularly familiar with, but I took a quick look and generally this looks good to me.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/67581866",
    "html_url": "https://github.com/pandas-dev/pandas/pull/9061#issuecomment-67581866",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9061",
    "id": 67581866,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3NTgxODY2",
    "user": {
      "login": "shoyer",
      "id": 1217238,
      "node_id": "MDQ6VXNlcjEyMTcyMzg=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1217238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shoyer",
      "html_url": "https://github.com/shoyer",
      "followers_url": "https://api.github.com/users/shoyer/followers",
      "following_url": "https://api.github.com/users/shoyer/following{/other_user}",
      "gists_url": "https://api.github.com/users/shoyer/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shoyer/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shoyer/subscriptions",
      "organizations_url": "https://api.github.com/users/shoyer/orgs",
      "repos_url": "https://api.github.com/users/shoyer/repos",
      "events_url": "https://api.github.com/users/shoyer/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shoyer/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-12-19T00:35:32Z",
    "updated_at": "2014-12-19T00:35:32Z",
    "author_association": "MEMBER",
    "body": "@behzadnouri could you add release notes for this enhancement? A simple example like the one you show in your first post would be nice.\n\n@hayd @TomAugspurger @sinhrks any thoughts?\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/67592625",
    "html_url": "https://github.com/pandas-dev/pandas/pull/9061#issuecomment-67592625",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9061",
    "id": 67592625,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3NTkyNjI1",
    "user": {
      "login": "hayd",
      "id": 1931852,
      "node_id": "MDQ6VXNlcjE5MzE4NTI=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1931852?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hayd",
      "html_url": "https://github.com/hayd",
      "followers_url": "https://api.github.com/users/hayd/followers",
      "following_url": "https://api.github.com/users/hayd/following{/other_user}",
      "gists_url": "https://api.github.com/users/hayd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hayd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hayd/subscriptions",
      "organizations_url": "https://api.github.com/users/hayd/orgs",
      "repos_url": "https://api.github.com/users/hayd/repos",
      "events_url": "https://api.github.com/users/hayd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hayd/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-12-19T03:00:20Z",
    "updated_at": "2014-12-19T03:00:20Z",
    "author_association": "CONTRIBUTOR",
    "body": "This looks pretty good to me too (pesky NaN).\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/67634924",
    "html_url": "https://github.com/pandas-dev/pandas/pull/9061#issuecomment-67634924",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9061",
    "id": 67634924,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3NjM0OTI0",
    "user": {
      "login": "behzadnouri",
      "id": 1288998,
      "node_id": "MDQ6VXNlcjEyODg5OTg=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1288998?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/behzadnouri",
      "html_url": "https://github.com/behzadnouri",
      "followers_url": "https://api.github.com/users/behzadnouri/followers",
      "following_url": "https://api.github.com/users/behzadnouri/following{/other_user}",
      "gists_url": "https://api.github.com/users/behzadnouri/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/behzadnouri/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/behzadnouri/subscriptions",
      "organizations_url": "https://api.github.com/users/behzadnouri/orgs",
      "repos_url": "https://api.github.com/users/behzadnouri/repos",
      "events_url": "https://api.github.com/users/behzadnouri/events{/privacy}",
      "received_events_url": "https://api.github.com/users/behzadnouri/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-12-19T12:58:24Z",
    "updated_at": "2014-12-19T12:58:24Z",
    "author_association": "CONTRIBUTOR",
    "body": "@shoyer given that https://github.com/pydata/pandas/pull/9101 was merged, i first need to re-factor some of the common logic between these two.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/67719897",
    "html_url": "https://github.com/pandas-dev/pandas/pull/9061#issuecomment-67719897",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9061",
    "id": 67719897,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3NzE5ODk3",
    "user": {
      "login": "sinhrks",
      "id": 1696302,
      "node_id": "MDQ6VXNlcjE2OTYzMDI=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1696302?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sinhrks",
      "html_url": "https://github.com/sinhrks",
      "followers_url": "https://api.github.com/users/sinhrks/followers",
      "following_url": "https://api.github.com/users/sinhrks/following{/other_user}",
      "gists_url": "https://api.github.com/users/sinhrks/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sinhrks/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sinhrks/subscriptions",
      "organizations_url": "https://api.github.com/users/sinhrks/orgs",
      "repos_url": "https://api.github.com/users/sinhrks/repos",
      "events_url": "https://api.github.com/users/sinhrks/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sinhrks/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-12-20T01:34:01Z",
    "updated_at": "2014-12-20T01:34:01Z",
    "author_association": "MEMBER",
    "body": "Yes, looks nice.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/67745963",
    "html_url": "https://github.com/pandas-dev/pandas/pull/9061#issuecomment-67745963",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9061",
    "id": 67745963,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3NzQ1OTYz",
    "user": {
      "login": "behzadnouri",
      "id": 1288998,
      "node_id": "MDQ6VXNlcjEyODg5OTg=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1288998?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/behzadnouri",
      "html_url": "https://github.com/behzadnouri",
      "followers_url": "https://api.github.com/users/behzadnouri/followers",
      "following_url": "https://api.github.com/users/behzadnouri/following{/other_user}",
      "gists_url": "https://api.github.com/users/behzadnouri/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/behzadnouri/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/behzadnouri/subscriptions",
      "organizations_url": "https://api.github.com/users/behzadnouri/orgs",
      "repos_url": "https://api.github.com/users/behzadnouri/repos",
      "events_url": "https://api.github.com/users/behzadnouri/events{/privacy}",
      "received_events_url": "https://api.github.com/users/behzadnouri/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-12-20T19:01:33Z",
    "updated_at": "2014-12-20T19:01:33Z",
    "author_association": "CONTRIBUTOR",
    "body": "@shoyer added the release notes. I put this under bug fixes, since it is fixing a special case where an _existing_ api breaks, as opposed to adding a new feature.\n\nSince there was some re-factoring with https://github.com/pydata/pandas/pull/9101 I reran the benchmarks:\n\n```\n-------------------------------------------------------------------------------\nTest name                                    | head[ms] | base[ms] |  ratio   |\n-------------------------------------------------------------------------------\ngroupby_pivot_table                          |  29.3674 |  29.2567 |   1.0038 |\nreshape_pivot_time_series                    | 300.8887 | 295.7307 |   1.0174 |\n-------------------------------------------------------------------------------\nTest name                                    | head[ms] | base[ms] |  ratio   |\n-------------------------------------------------------------------------------\n\nRatio < 1.0 means the target commit is faster then the baseline.\nSeed used: 1234\n\nTarget [06b0431] : unstack with nan in the index\nBase   [8eee396] : Merge pull request #9104 from jreback/dti_iteration\n\nBUG: Bug in DatetimeIndex iteration, related to (GH8890), fixed in (GH9100)\n\n-------------------------------------------------------------------------------\nTest name                                    | head[ms] | base[ms] |  ratio   |\n-------------------------------------------------------------------------------\nunstack_sparse_keyspace                      |   2.3497 |   2.7726 |   0.8475 |\nreshape_unstack_simple                       |   5.3949 |   5.5247 |   0.9765 |\n-------------------------------------------------------------------------------\nTest name                                    | head[ms] | base[ms] |  ratio   |\n-------------------------------------------------------------------------------\n\nRatio < 1.0 means the target commit is faster then the baseline.\nSeed used: 1234\n\nTarget [06b0431] : unstack with nan in the index\nBase   [8eee396] : Merge pull request #9104 from jreback/dti_iteration\n\nBUG: Bug in DatetimeIndex iteration, related to (GH8890), fixed in (GH9100)\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/67835319",
    "html_url": "https://github.com/pandas-dev/pandas/pull/9061#issuecomment-67835319",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9061",
    "id": 67835319,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3ODM1MzE5",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-12-22T13:11:19Z",
    "updated_at": "2014-12-22T13:11:19Z",
    "author_association": "CONTRIBUTOR",
    "body": "@behzadnouri \n\nthanks\n\nwhat I am referring above is that then these types of structures are easy to create and very tricky to actually index.\n\n```\nIn [20]: df.set_index(['1st','2nd','3rd']).unstack(0)          \nOut[20]: \n        value                    \n1st       NaN   a   b   c   d   e\n2nd 3rd                          \nNaN 18      7 NaN NaN NaN NaN NaN\n    31      6 NaN NaN NaN NaN NaN\n    51    NaN NaN  19 NaN NaN NaN\n    59    NaN NaN NaN NaN NaN  13\n    60    NaN NaN  18 NaN NaN NaN\n    62    NaN NaN NaN  12 NaN NaN\n    76    NaN NaN NaN NaN NaN  14\n    80      5 NaN NaN NaN NaN NaN\nw   53    NaN NaN NaN NaN   2 NaN\n    57      4 NaN NaN NaN NaN NaN\n    72      3 NaN NaN NaN NaN NaN\nx   14    NaN NaN  16 NaN NaN NaN\n    52    NaN NaN  15 NaN NaN NaN\n    53    NaN NaN  17 NaN NaN NaN\ny   39    NaN NaN NaN NaN   1 NaN\n    67    NaN NaN NaN NaN   0 NaN\nz   11    NaN   8 NaN NaN NaN NaN\n    30    NaN   9 NaN NaN NaN NaN\n    50    NaN NaN NaN  11 NaN NaN\n    59    NaN NaN NaN  10 NaN NaN\n```\n\nThis fails\n\n```\nIn [21]: df.set_index(['1st','2nd','3rd']).unstack(0).loc[nan]\nValueError: cannot use label indexing with a null key\n```\n\nThis is ok though\n\n```\nIn [22]: df.set_index(['1st','2nd','3rd']).unstack(0).loc[(nan,18)]\nOut[22]: \n       1st\nvalue  NaN     7\n       a     NaN\n       b     NaN\n       c     NaN\n       d     NaN\n       e     NaN\nName: (nan, 18), dtype: float64\n```\n"
  }
]
