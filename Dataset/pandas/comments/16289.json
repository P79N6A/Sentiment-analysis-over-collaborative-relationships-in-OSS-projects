[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/299968270",
    "html_url": "https://github.com/pandas-dev/pandas/issues/16289#issuecomment-299968270",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/16289",
    "id": 299968270,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5OTk2ODI3MA==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-05-08T19:36:10Z",
    "updated_at": "2017-05-08T19:36:10Z",
    "author_association": "CONTRIBUTOR",
    "body": "Can you make a reproducible example? `df` isn't defined."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/299969209",
    "html_url": "https://github.com/pandas-dev/pandas/issues/16289#issuecomment-299969209",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/16289",
    "id": 299969209,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5OTk2OTIwOQ==",
    "user": {
      "login": "maxu777",
      "id": 11424941,
      "node_id": "MDQ6VXNlcjExNDI0OTQx",
      "avatar_url": "https://avatars0.githubusercontent.com/u/11424941?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/maxu777",
      "html_url": "https://github.com/maxu777",
      "followers_url": "https://api.github.com/users/maxu777/followers",
      "following_url": "https://api.github.com/users/maxu777/following{/other_user}",
      "gists_url": "https://api.github.com/users/maxu777/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/maxu777/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/maxu777/subscriptions",
      "organizations_url": "https://api.github.com/users/maxu777/orgs",
      "repos_url": "https://api.github.com/users/maxu777/repos",
      "events_url": "https://api.github.com/users/maxu777/events{/privacy}",
      "received_events_url": "https://api.github.com/users/maxu777/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-05-08T19:40:02Z",
    "updated_at": "2017-05-08T19:43:34Z",
    "author_association": "CONTRIBUTOR",
    "body": "Here is a way to reproduce this issue:\r\n\r\ndownload [pickled DF](https://github.com/Moondra/Logistic-Regression-/blob/master/Small_cap_bio_DF)\r\n\r\n```\r\nfn = r'D:\\download\\Small_cap_bio_DF'\r\ndf = pd.read_pickle(fn)\r\ndf.loc[df['Market Cap'] =='N/A', 'Market Cap'] = '-1'\r\n```\r\n\r\nthe following works when a DF is splitted into four parts:\r\n\r\n```\r\n[x[pd.eval(x['Market Cap'].replace(['[Kk]','[Mm]','[Bb]'],['*10**3','*10**6','*10**9'], regex=True).add(' < 35*10**6'))]\r\n for x in np.split(df,4)]\r\n```\r\n\r\nif we split it into two parts:\r\n\r\n```\r\n[x[pd.eval(x['Market Cap'].replace(['[Kk]','[Mm]','[Bb]'],['*10**3','*10**6','*10**9'], regex=True).add(' < 35*10**6'))]\r\n for x in np.split(df,2)]\r\n\r\n```\r\nit produces:\r\n\r\n`AttributeError: 'PandasExprVisitor' object has no attribute 'visit_Ellipsis'\r\n`\r\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/299985924",
    "html_url": "https://github.com/pandas-dev/pandas/issues/16289#issuecomment-299985924",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/16289",
    "id": 299985924,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5OTk4NTkyNA==",
    "user": {
      "login": "chris-b1",
      "id": 1924092,
      "node_id": "MDQ6VXNlcjE5MjQwOTI=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1924092?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chris-b1",
      "html_url": "https://github.com/chris-b1",
      "followers_url": "https://api.github.com/users/chris-b1/followers",
      "following_url": "https://api.github.com/users/chris-b1/following{/other_user}",
      "gists_url": "https://api.github.com/users/chris-b1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chris-b1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chris-b1/subscriptions",
      "organizations_url": "https://api.github.com/users/chris-b1/orgs",
      "repos_url": "https://api.github.com/users/chris-b1/repos",
      "events_url": "https://api.github.com/users/chris-b1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chris-b1/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-05-08T20:46:31Z",
    "updated_at": "2017-05-08T20:46:40Z",
    "author_association": "CONTRIBUTOR",
    "body": "Simple repo:\r\n\r\n```\r\nIn [93]: s = pd.Series(['1 == 1', '2 == 1'] * 1000)\r\n\r\nIn [94]: pd.eval(s.head())\r\nOut[94]: array([True, False, True, False, True], dtype=object)\r\n\r\nIn [95]: pd.eval(s)\r\nAttributeError: 'PandasExprVisitor' object has no attribute 'visit_Ellipsis'\r\n```\r\n\r\nThis is a sort of a mis-use of eval, I was surprised it worked at all - apparently the `Series` repr is being picked up by eval, and with a long `Series`, the trunctation characters (`...`) is parsed as `Ellipsis`. \r\n\r\n\r\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/299994205",
    "html_url": "https://github.com/pandas-dev/pandas/issues/16289#issuecomment-299994205",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/16289",
    "id": 299994205,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5OTk5NDIwNQ==",
    "user": {
      "login": "maxu777",
      "id": 11424941,
      "node_id": "MDQ6VXNlcjExNDI0OTQx",
      "avatar_url": "https://avatars0.githubusercontent.com/u/11424941?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/maxu777",
      "html_url": "https://github.com/maxu777",
      "followers_url": "https://api.github.com/users/maxu777/followers",
      "following_url": "https://api.github.com/users/maxu777/following{/other_user}",
      "gists_url": "https://api.github.com/users/maxu777/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/maxu777/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/maxu777/subscriptions",
      "organizations_url": "https://api.github.com/users/maxu777/orgs",
      "repos_url": "https://api.github.com/users/maxu777/repos",
      "events_url": "https://api.github.com/users/maxu777/events{/privacy}",
      "received_events_url": "https://api.github.com/users/maxu777/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-05-08T21:19:55Z",
    "updated_at": "2017-05-08T21:19:55Z",
    "author_association": "CONTRIBUTOR",
    "body": "@chris-b1,\r\n\r\nit's a good reproducible example, thank you!\r\n\r\nthe limit seems to be 100 rows: \r\n\r\nthis works:\r\n\r\n`pd.eval(s.head(100))`\r\n\r\nthe following produces mentioned above error:\r\n\r\n`pd.eval(s.head(101))`\r\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/300042717",
    "html_url": "https://github.com/pandas-dev/pandas/issues/16289#issuecomment-300042717",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/16289",
    "id": 300042717,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwMDA0MjcxNw==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-05-09T02:19:11Z",
    "updated_at": "2017-05-09T02:19:11Z",
    "author_association": "CONTRIBUTOR",
    "body": "We don't want to support passing pandas objects to `eval` right? It takes a string, not a Series."
  }
]
