[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/52502978",
    "html_url": "https://github.com/pandas-dev/pandas/pull/8045#issuecomment-52502978",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/8045",
    "id": 52502978,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyNTAyOTc4",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-08-18T14:50:47Z",
    "updated_at": "2014-08-18T14:50:47Z",
    "author_association": "CONTRIBUTOR",
    "body": "can u post the vbench run from say 0.13.1 till now?\n\n`./test_perf.sh -b v0.13.1 -t HEAD -r packers`\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/52511992",
    "html_url": "https://github.com/pandas-dev/pandas/pull/8045#issuecomment-52511992",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/8045",
    "id": 52511992,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyNTExOTky",
    "user": {
      "login": "bashtage",
      "id": 5585221,
      "node_id": "MDQ6VXNlcjU1ODUyMjE=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/5585221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bashtage",
      "html_url": "https://github.com/bashtage",
      "followers_url": "https://api.github.com/users/bashtage/followers",
      "following_url": "https://api.github.com/users/bashtage/following{/other_user}",
      "gists_url": "https://api.github.com/users/bashtage/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bashtage/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bashtage/subscriptions",
      "organizations_url": "https://api.github.com/users/bashtage/orgs",
      "repos_url": "https://api.github.com/users/bashtage/repos",
      "events_url": "https://api.github.com/users/bashtage/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bashtage/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-08-18T15:52:42Z",
    "updated_at": "2014-08-18T15:52:42Z",
    "author_association": "CONTRIBUTOR",
    "body": "```\n-------------------------------------------------------------------------------\nTest name                                    | head[ms] | base[ms] |  ratio   |\n-------------------------------------------------------------------------------\npackers_write_stata                          | 1639.5844 | 9598.6373 |   0.1708                                                                      |\npackers_read_pickle                          |  41.2370 | 220.7290 |   0.1868 |\npackers_write_stata_with_int                 | 2100.9600 | 10837.9307 |   0.1939                                                                      |\npackers_read_stata_with_int                  | 4009.2154 | 4531.7237 |   0.8847                                                                      |\npackers_read_stata                           | 3411.1613 | 3739.0094 |   0.9123                                                                      |\npackers_read_csv                             | 126.4450 | 133.1240 |   0.9498 |\npackers_write_hdf_store                      |  62.1700 |  64.2070 |   0.9683 |\npackers_write_pickle                         |  70.9056 |  72.8696 |   0.9730 |\npackers_write_hdf_table                      |  46.8840 |  46.7546 |   1.0028 |\npackers_write_csv                            | 1265.7423 | 1257.0117 |   1.0069                                                                      |\npackers_write_json_date_index                |  91.4153 |  90.7796 |   1.0070 |\npackers_write_json                           |  78.6374 |  77.9803 |   1.0084 |\npackers_read_hdf_table                       |  25.4953 |  24.7576 |   1.0298 |\npackers_write_pack                           |  21.2376 |  20.4477 |   1.0386 |\npackers_read_pack                            |  67.0931 |  61.1893 |   1.0965 |\npackers_read_json                            | 146.3947 | 133.4081 |   1.0973 |\npackers_read_json_date_index                 | 147.1183 | 132.3210 |   1.1118 |\npackers_read_hdf_store                       |  27.9624 |  23.9660 |   1.1668 |\n-------------------------------------------------------------------------------\nTest name                                    | head[ms] | base[ms] |  ratio   |\n-------------------------------------------------------------------------------\n```\n\nFaster now it would appear, although about 10% slower on the example in #8040 in some ad-hoc testing.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/52514238",
    "html_url": "https://github.com/pandas-dev/pandas/pull/8045#issuecomment-52514238",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/8045",
    "id": 52514238,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyNTE0MjM4",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-08-18T16:07:05Z",
    "updated_at": "2014-08-18T16:07:05Z",
    "author_association": "CONTRIBUTOR",
    "body": "hmm, this is against 0.13.1? \n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/52523294",
    "html_url": "https://github.com/pandas-dev/pandas/pull/8045#issuecomment-52523294",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/8045",
    "id": 52523294,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyNTIzMjk0",
    "user": {
      "login": "bashtage",
      "id": 5585221,
      "node_id": "MDQ6VXNlcjU1ODUyMjE=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/5585221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bashtage",
      "html_url": "https://github.com/bashtage",
      "followers_url": "https://api.github.com/users/bashtage/followers",
      "following_url": "https://api.github.com/users/bashtage/following{/other_user}",
      "gists_url": "https://api.github.com/users/bashtage/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bashtage/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bashtage/subscriptions",
      "organizations_url": "https://api.github.com/users/bashtage/orgs",
      "repos_url": "https://api.github.com/users/bashtage/repos",
      "events_url": "https://api.github.com/users/bashtage/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bashtage/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-08-18T17:11:01Z",
    "updated_at": "2014-08-18T17:11:01Z",
    "author_association": "CONTRIBUTOR",
    "body": "I copied and pasted your command.\n\n```\nTarget [ca00ebd] : PERF: StataReader is slow due to excessive lookups for missin                                                                     g vales\nPrevious versions of StataReader did not correctly check for missing values.\nThis was fixed in a previous PR, but these checks had previously been\nimplemented on a value-by-value basis.  This has now been changed to a\nvectorized version that is orders of magnitude faster.\nAdds support for preserving Stata missing values when importing data using\nthe convert_missing argument.  When True, missing values will be returned as\nStataMissingValue objects.  Test cases for missing value conversion have been\nincluded.\nAdditionally, a benchmark was added to monitor performance issues in the\nfuture.\nCloses #8040\n\nBase   [d10a658] : RLS: set released to True. v0.13.1\n\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/52523445",
    "html_url": "https://github.com/pandas-dev/pandas/pull/8045#issuecomment-52523445",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/8045",
    "id": 52523445,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyNTIzNDQ1",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-08-18T17:12:17Z",
    "updated_at": "2014-08-18T17:12:17Z",
    "author_association": "CONTRIBUTOR",
    "body": "ok.\n\nSeems these are very slow? any thoughts\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/52524838",
    "html_url": "https://github.com/pandas-dev/pandas/pull/8045#issuecomment-52524838",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/8045",
    "id": 52524838,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyNTI0ODM4",
    "user": {
      "login": "bashtage",
      "id": 5585221,
      "node_id": "MDQ6VXNlcjU1ODUyMjE=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/5585221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bashtage",
      "html_url": "https://github.com/bashtage",
      "followers_url": "https://api.github.com/users/bashtage/followers",
      "following_url": "https://api.github.com/users/bashtage/following{/other_user}",
      "gists_url": "https://api.github.com/users/bashtage/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bashtage/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bashtage/subscriptions",
      "organizations_url": "https://api.github.com/users/bashtage/orgs",
      "repos_url": "https://api.github.com/users/bashtage/repos",
      "events_url": "https://api.github.com/users/bashtage/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bashtage/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-08-18T17:22:44Z",
    "updated_at": "2014-08-18T17:23:58Z",
    "author_association": "CONTRIBUTOR",
    "body": "The code to read and write is very loopy - It is essentially looping over cols and rows, calling `pack` or `unpack` element by element, and reading/writing as it goes.  IMO 2 - 4 seconds for is not a problem in most applications - it has similar performance to CSV.\n\nCython would probably an alternative solution since the data must be written row-by-row _and_ rows have heterogeneous data types.\n\nI don't know if it would be possible to vectorize `pack`, and even then it is still necessary to loop across columns when assembling data.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/52525209",
    "html_url": "https://github.com/pandas-dev/pandas/pull/8045#issuecomment-52525209",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/8045",
    "id": 52525209,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyNTI1MjA5",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-08-18T17:25:14Z",
    "updated_at": "2014-08-18T17:25:14Z",
    "author_association": "CONTRIBUTOR",
    "body": "ok, as long as you are happy that the perf issues from before are fixed (they look like it). you have 5-6x speedup (of course that does not use validation).\n\nok, anything else? merge (do you want/need docs for convert_missing?)\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/52527006",
    "html_url": "https://github.com/pandas-dev/pandas/pull/8045#issuecomment-52527006",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/8045",
    "id": 52527006,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyNTI3MDA2",
    "user": {
      "login": "bashtage",
      "id": 5585221,
      "node_id": "MDQ6VXNlcjU1ODUyMjE=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/5585221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bashtage",
      "html_url": "https://github.com/bashtage",
      "followers_url": "https://api.github.com/users/bashtage/followers",
      "following_url": "https://api.github.com/users/bashtage/following{/other_user}",
      "gists_url": "https://api.github.com/users/bashtage/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bashtage/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bashtage/subscriptions",
      "organizations_url": "https://api.github.com/users/bashtage/orgs",
      "repos_url": "https://api.github.com/users/bashtage/repos",
      "events_url": "https://api.github.com/users/bashtage/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bashtage/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-08-18T17:38:30Z",
    "updated_at": "2014-08-18T17:38:30Z",
    "author_association": "CONTRIBUTOR",
    "body": "It is better than is was in 0.13.1, which was the _fast_ version, so I think this is solved.  The reading code spends almost all of its time in \n\n```\n    def _next(self):\n        typlist = self.typlist\n        if self.has_string_data:\n            data = [None] * self.nvar\n            for i in range(len(data)):\n                if type(typlist[i]) is int:\n                    data[i] = self._null_terminate(\n                        self.path_or_buf.read(typlist[i])\n                    )\n                else:\n                    data[i] = self._unpack(\n                        typlist[i], self.path_or_buf.read(self._col_size(i))\n                    )\n            return data\n        else:\n            return lmap(\n                    lambda i: self._unpack(typlist[i],\n                                           self.path_or_buf.read(\n                                               self._col_size(i)\n                                           )),\n                    range(self.nvar)\n            )\n```\n\nwhich is clever, but probably far from optimal from a performance point-of-view.  Would probably be far faster \n1. Build a composite format string for the entire file since all rows are homogeneous like `format = \"<f<f<b<b\"`\n2. Read an entire row using `struct.unpack(format,  self.path_or_buf.read(total_column_size))`\n\nAnd the rest of the code could be unchanged.  \n\nMight try some experiments, but should be different PR.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/52527366",
    "html_url": "https://github.com/pandas-dev/pandas/pull/8045#issuecomment-52527366",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/8045",
    "id": 52527366,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyNTI3MzY2",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-08-18T17:40:57Z",
    "updated_at": "2014-08-18T17:40:57Z",
    "author_association": "CONTRIBUTOR",
    "body": "ok, sounds fine, ping me when green\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/52553557",
    "html_url": "https://github.com/pandas-dev/pandas/pull/8045#issuecomment-52553557",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/8045",
    "id": 52553557,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyNTUzNTU3",
    "user": {
      "login": "bashtage",
      "id": 5585221,
      "node_id": "MDQ6VXNlcjU1ODUyMjE=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/5585221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bashtage",
      "html_url": "https://github.com/bashtage",
      "followers_url": "https://api.github.com/users/bashtage/followers",
      "following_url": "https://api.github.com/users/bashtage/following{/other_user}",
      "gists_url": "https://api.github.com/users/bashtage/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bashtage/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bashtage/subscriptions",
      "organizations_url": "https://api.github.com/users/bashtage/orgs",
      "repos_url": "https://api.github.com/users/bashtage/repos",
      "events_url": "https://api.github.com/users/bashtage/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bashtage/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-08-18T20:54:22Z",
    "updated_at": "2014-08-18T20:54:22Z",
    "author_association": "CONTRIBUTOR",
    "body": "@jreback Ready to go.  I have a further performance patch ready when this is in.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/52553827",
    "html_url": "https://github.com/pandas-dev/pandas/pull/8045#issuecomment-52553827",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/8045",
    "id": 52553827,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyNTUzODI3",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-08-18T20:56:24Z",
    "updated_at": "2014-08-18T20:56:24Z",
    "author_association": "CONTRIBUTOR",
    "body": "thanks!\n\nbetter perf always appreciated!\n"
  }
]
