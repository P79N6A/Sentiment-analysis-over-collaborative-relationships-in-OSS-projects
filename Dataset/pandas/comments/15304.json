[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/277412194",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15304#issuecomment-277412194",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15304",
    "id": 277412194,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3NzQxMjE5NA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-04T02:35:04Z",
    "updated_at": "2017-02-04T02:37:10Z",
    "author_association": "CONTRIBUTOR",
    "body": "1) if you'd like to submit a doc PR for 1) that would be great (group.rst and/or doc-string updates / examples).\r\n\r\n2) is a violation of the guarantees (IOW, these functions don't take parameters). I suppose it could raise a TypeError, but this is tricky to actually do.\r\n\r\n3) not sure what you mean, the docs are clear. but again if you don't think so, then please update."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/277544526",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15304#issuecomment-277544526",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15304",
    "id": 277544526,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3NzU0NDUyNg==",
    "user": {
      "login": "colinmorris",
      "id": 695907,
      "node_id": "MDQ6VXNlcjY5NTkwNw==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/695907?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/colinmorris",
      "html_url": "https://github.com/colinmorris",
      "followers_url": "https://api.github.com/users/colinmorris/followers",
      "following_url": "https://api.github.com/users/colinmorris/following{/other_user}",
      "gists_url": "https://api.github.com/users/colinmorris/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/colinmorris/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/colinmorris/subscriptions",
      "organizations_url": "https://api.github.com/users/colinmorris/orgs",
      "repos_url": "https://api.github.com/users/colinmorris/repos",
      "events_url": "https://api.github.com/users/colinmorris/events{/privacy}",
      "received_events_url": "https://api.github.com/users/colinmorris/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-05T19:56:57Z",
    "updated_at": "2017-02-05T19:56:57Z",
    "author_association": "NONE",
    "body": "Regarding 3:\r\n\r\nWhat I mean is that it seems to me like no special-casing is necessary. The function I pass to agg is acting on a Series - i.e. a 1-d array. The ordinary behaviour when passing a Series to a function like `np.mean` is already equivalent to calling that function with `axis=0`. \r\n\r\nCould you give an example of how the behaviour would be different if numpy functions *weren't* special-cased?"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/277544763",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15304#issuecomment-277544763",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15304",
    "id": 277544763,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3NzU0NDc2Mw==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-05T20:00:14Z",
    "updated_at": "2017-02-05T20:00:14Z",
    "author_association": "MEMBER",
    "body": "> 2. is a violation of the guarantees (IOW, these functions don't take parameters). I suppose it could raise a TypeError, but this is tricky to actually do.\r\n\r\nThis is not very clearly documented (also not that it should work, I agree), but the args/kwargs are in the docstring and I think it is not strange to expect that they are passed (as is done for `apply`)\r\n\r\nFurther, this is any case not a violation for SeriesGroupBy (see the args/kwargs being passed in `_python_agg_general` https://github.com/pandas-dev/pandas/blob/ba057443d1b69bb3735a4b18a18e4e4897231867/pandas/core/groupby.py#L825), and the following working example:\r\n\r\n```\r\nIn [14]: s = pd.Series(np.arange(4))\r\n\r\nIn [15]: s.groupby(s % 2).agg(lambda group, div: group.sum()/div, div=1)\r\nOut[15]: \r\n0    2\r\n1    4\r\ndtype: int64\r\n\r\nIn [16]: s.groupby(s % 2).agg(lambda group, div: group.sum()/div, div=2)\r\nOut[16]: \r\n0    1\r\n1    2\r\ndtype: int64\r\n\r\n```\r\n\r\n> 3. not sure what you mean, the docs are clear. but again if you don't think so, then please update.\r\n\r\nI agree with @colinmorris that the docs are not clear, now I look at it again. Or maybe even wrong. \r\n``np.mean(df)`` does not do a typical numpy mean (as in returning a scalar result), but does the same as `df.mean()` (because it calls it under the hood, I know). So in that light, passing it to `.agg(np.mean)`, does exactly what it is expected to do."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/277544955",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15304#issuecomment-277544955",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15304",
    "id": 277544955,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3NzU0NDk1NQ==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-05T20:03:28Z",
    "updated_at": "2017-02-05T20:03:28Z",
    "author_association": "MEMBER",
    "body": "> What I mean is that it seems to me like no special-casing is necessary. The function I pass to agg is acting on a Series - i.e. a 1-d array. The ordinary behaviour when passing a Series to a function like np.mean is already equivalent to calling that function with axis=0.\r\n\r\n@colinmorris I think you are right here. It's true that the passed function is first passed to each column and thus acts on a Series. In that sense, the function does nothing special. \r\nAnd even if it would be called on the 2D dataframe, it would still not be really special cased as I mentioned above. \r\nIMO this full note can be removed."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/277545150",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15304#issuecomment-277545150",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15304",
    "id": 277545150,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3NzU0NTE1MA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-05T20:06:21Z",
    "updated_at": "2017-02-05T20:06:49Z",
    "author_association": "CONTRIBUTOR",
    "body": "@jorisvandenbossche your example is not germane.\r\n\r\n> Further, this is any case not a violation for SeriesGroupBy (see the args/kwargs being passed in \r\n\r\nthat is NOT applicable to ``.transform``"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/277545306",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15304#issuecomment-277545306",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15304",
    "id": 277545306,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3NzU0NTMwNg==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-05T20:08:41Z",
    "updated_at": "2017-02-05T20:08:41Z",
    "author_association": "MEMBER",
    "body": "@jreback sorry, don't understand that comment. This issue is about ``agg``?"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/277546668",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15304#issuecomment-277546668",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15304",
    "id": 277546668,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3NzU0NjY2OA==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-05T20:29:10Z",
    "updated_at": "2017-02-05T20:29:10Z",
    "author_association": "MEMBER",
    "body": "@colinmorris I didn't read your point 2 very good first, as you already mention that the reason is that the group is changed from series to dataframe by passing kwarg. But note that this is not for 'meaningless' args. They need to be accepted by the function, otherwise you get a a TypeError as expected. To make it a bit more visual:\r\n\r\n```\r\nIn [55]: df = pd.DataFrame(np.random.rand(4,2), columns=['b', 'c'])\r\n\r\nIn [56]: df['a'] = [1, 0, 0, 0]\r\n\r\nIn [57]: def func(group, mul=1):\r\n    ...:     print(type(group))\r\n    ...:     return np.product(group.shape) * mul\r\n\r\nIn [60]: g = df.groupby('a')\r\n\r\nIn [61]: g.agg(func)\r\n<class 'pandas.core.series.Series'>\r\n<class 'pandas.core.series.Series'>\r\n<class 'pandas.core.series.Series'>\r\n<class 'pandas.core.series.Series'>\r\nOut[61]: \r\n     b    c\r\na          \r\n0  3.0  3.0\r\n1  1.0  1.0\r\n\r\nIn [62]: g.agg(func, mul=2)\r\n<class 'pandas.core.frame.DataFrame'>\r\n<class 'pandas.core.frame.DataFrame'>\r\nOut[62]: \r\n    b   c\r\na        \r\n0  18  18\r\n1   6   6\r\n\r\nIn [63]: g.agg(func, foo=1)\r\n...\r\nTypeError: func() got an unexpected keyword argument 'foo'\r\n```\r\n\r\nBut I agree that passing the kwarg or not should not change the passed group from series to frame.\r\n\r\n@colinmorris BTW, thanks for your detailed feedback!"
  }
]
