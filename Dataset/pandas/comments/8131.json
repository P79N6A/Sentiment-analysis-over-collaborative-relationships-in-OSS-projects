[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/55053340",
    "html_url": "https://github.com/pandas-dev/pandas/issues/8131#issuecomment-55053340",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/8131",
    "id": 55053340,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MDUzMzQw",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-09-09T23:48:43Z",
    "updated_at": "2014-09-09T23:48:43Z",
    "author_association": "CONTRIBUTOR",
    "body": "cc @immerrr\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/55118729",
    "html_url": "https://github.com/pandas-dev/pandas/issues/8131#issuecomment-55118729",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/8131",
    "id": 55118729,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MTE4NzI5",
    "user": {
      "login": "immerrr",
      "id": 579798,
      "node_id": "MDQ6VXNlcjU3OTc5OA==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/579798?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/immerrr",
      "html_url": "https://github.com/immerrr",
      "followers_url": "https://api.github.com/users/immerrr/followers",
      "following_url": "https://api.github.com/users/immerrr/following{/other_user}",
      "gists_url": "https://api.github.com/users/immerrr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/immerrr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/immerrr/subscriptions",
      "organizations_url": "https://api.github.com/users/immerrr/orgs",
      "repos_url": "https://api.github.com/users/immerrr/repos",
      "events_url": "https://api.github.com/users/immerrr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/immerrr/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-09-10T14:00:07Z",
    "updated_at": "2014-09-10T14:00:07Z",
    "author_association": "CONTRIBUTOR",
    "body": "Let me check that...\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/55263085",
    "html_url": "https://github.com/pandas-dev/pandas/issues/8131#issuecomment-55263085",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/8131",
    "id": 55263085,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MjYzMDg1",
    "user": {
      "login": "immerrr",
      "id": 579798,
      "node_id": "MDQ6VXNlcjU3OTc5OA==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/579798?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/immerrr",
      "html_url": "https://github.com/immerrr",
      "followers_url": "https://api.github.com/users/immerrr/followers",
      "following_url": "https://api.github.com/users/immerrr/following{/other_user}",
      "gists_url": "https://api.github.com/users/immerrr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/immerrr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/immerrr/subscriptions",
      "organizations_url": "https://api.github.com/users/immerrr/orgs",
      "repos_url": "https://api.github.com/users/immerrr/repos",
      "events_url": "https://api.github.com/users/immerrr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/immerrr/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-09-11T13:27:21Z",
    "updated_at": "2014-09-11T13:27:21Z",
    "author_association": "CONTRIBUTOR",
    "body": "The issue is in `df._sanitize_column` that returns a 2d dense array with non-fill elements:\n\n``` python\nIn [9]: df = pd.DataFrame({'c_1': list('abc')})\n\nIn [10]: sp_col = pd.Series([0,0,1]).to_sparse(fill_value=0)\n\nIn [11]: df._sanitize_column('n', sp_col)\nOut[11]: array([[1]])\n```\n\nHacking sanitize column is easy, but it uncovers yet another issue with ndarray subclassing:\n\n``` python\nIn [54]: sp_arr = pd.SparseArray([0,0,1], fill_value=0)\n\nIn [55]: sp_arr\nOut[55]: \n[0, 0, 1.0]\nFill: 0\nIntIndex\nIndices: array([2], dtype=int32)\n\n\nIn [56]: np.asarray(sp_arr)\nOut[56]: array([ 1.])\n```\n\nThis happens because `np.asarray` checks on C level that `sp_arr` provides PEP3118 buffer interface (which ndarray does) and uses that representation which contains only non-fill elements. Which is unfortunate because it can not be overridden by inheriting class on Python level (see [python issue](http://bugs.python.org/issue13797)).\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/55269254",
    "html_url": "https://github.com/pandas-dev/pandas/issues/8131#issuecomment-55269254",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/8131",
    "id": 55269254,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MjY5MjU0",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-09-11T14:13:08Z",
    "updated_at": "2014-09-11T14:13:08Z",
    "author_association": "CONTRIBUTOR",
    "body": "yep, prob `SpareseArray`  just needs to be tested for (similar to what just did with `Categorical`),\nneeds to be passed thru directly.\n"
  }
]
