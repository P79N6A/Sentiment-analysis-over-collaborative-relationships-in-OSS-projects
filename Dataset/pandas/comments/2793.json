[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/13051583",
    "html_url": "https://github.com/pandas-dev/pandas/issues/2793#issuecomment-13051583",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/2793",
    "id": 13051583,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMDUxNTgz",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-02-03T18:51:13Z",
    "updated_at": "2013-02-03T18:51:13Z",
    "author_association": "CONTRIBUTOR",
    "body": "fixed in #2708\n\na little bit non-trivial as you can (and in your example you did) have an upcast from integer to float, in\nan in-place operation, causing the underlying blocks to change; so have to modify the manager\nin place\n\ngood news is that I wrote a comprehensive test suite for `where` catching this (and a couple of other) issues\n\nthanks!\n\n```\nIn [11]: df = pd.DataFrame({\n  'a': np.array([1, 2, 3, 4],dtype='int32'), \n  'b': np.array([4.0, 3.0, 2.0, 1.0], dtype = 'float64') })\n\nIn [12]: df.dtypes\nOut[12]: \na      int32\nb    float64\nDtype: object\n\nIn [13]: df.where(df>2,np.nan,inplace=True)\n\nIn [14]: df.dtypes\nOut[14]: \na    float64\nb    float64\nDtype: object\n\nIn [9]: df\nOut[9]: \n    a   b\n0 NaN   4\n1 NaN   3\n2   3 NaN\n3   4 NaN\n\nIn [15]: df = pd.DataFrame({\n  'a': np.array([1, 2, 3, 4],dtype='int64'), \n   'b': np.array([4.0, 3.0, 2.0, 1.0], dtype = 'float64') })\n\nIn [16]: df.dtypes\nOut[16]: \na      int64\nb    float64\nDtype: object\n\nIn [17]: df.where(df>2,np.nan,inplace=True)\n\nIn [18]: df.dtypes\nOut[18]: \na    float64\nb    float64\nDtype: object\n\nIn [9]: df\nOut[9]: \n    a   b\n0 NaN   4\n1 NaN   3\n2   3 NaN\n3   4 NaN\n\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/13052562",
    "html_url": "https://github.com/pandas-dev/pandas/issues/2793#issuecomment-13052562",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/2793",
    "id": 13052562,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMDUyNTYy",
    "user": {
      "login": "stephenwlin",
      "id": 2342637,
      "node_id": "MDQ6VXNlcjIzNDI2Mzc=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/2342637?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stephenwlin",
      "html_url": "https://github.com/stephenwlin",
      "followers_url": "https://api.github.com/users/stephenwlin/followers",
      "following_url": "https://api.github.com/users/stephenwlin/following{/other_user}",
      "gists_url": "https://api.github.com/users/stephenwlin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stephenwlin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stephenwlin/subscriptions",
      "organizations_url": "https://api.github.com/users/stephenwlin/orgs",
      "repos_url": "https://api.github.com/users/stephenwlin/repos",
      "events_url": "https://api.github.com/users/stephenwlin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stephenwlin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-02-03T19:47:22Z",
    "updated_at": "2013-02-03T19:47:22Z",
    "author_association": "CONTRIBUTOR",
    "body": "oh, ok, that's great! i'll close this then.\n"
  }
]
