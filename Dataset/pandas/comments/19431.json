[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/361071078",
    "html_url": "https://github.com/pandas-dev/pandas/issues/19431#issuecomment-361071078",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/19431",
    "id": 361071078,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MTA3MTA3OA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-28T15:27:47Z",
    "updated_at": "2018-01-28T15:27:47Z",
    "author_association": "CONTRIBUTOR",
    "body": "no this was working before\r\nthis is fastparquet breaking things "
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/361071107",
    "html_url": "https://github.com/pandas-dev/pandas/issues/19431#issuecomment-361071107",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/19431",
    "id": 361071107,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MTA3MTEwNw==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-28T15:28:06Z",
    "updated_at": "2018-01-28T15:28:06Z",
    "author_association": "MEMBER",
    "body": "From a quick look, I think this is a regression in the changes to `make_block_same_class` that we did. In case of a DatetimeTZ block, you are required to pass a dtype.\r\n\r\n```\r\nIn [4]: df = pd.DataFrame({'a': pd.date_range(\"2012-01-01\", periods=3, tz='Europe/Brussels')})\r\n\r\nIn [8]: b = df._data.blocks[0]\r\n\r\nIn [9]: b.make_block_same_class(np.empty(5, np.dtype('datetime64[ns]')))\r\n...\r\nValueError: cannot create a DatetimeTZBlock without a tz\r\n\r\nIn [10]: b.make_block_same_class(np.empty(5, np.dtype('datetime64[ns]')), dtype=pd.api.types.DatetimeTZDtype(unit='ns', tz='Europe/Brussels'))\r\n...\r\nTypeError: make_block_same_class() got an unexpected keyword argument 'dtype'\r\n```"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/361071275",
    "html_url": "https://github.com/pandas-dev/pandas/issues/19431#issuecomment-361071275",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/19431",
    "id": 361071275,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MTA3MTI3NQ==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-28T15:30:28Z",
    "updated_at": "2018-01-28T15:30:28Z",
    "author_association": "MEMBER",
    "body": "> this is fastparquet breaking things\r\n\r\nFastparquet fixed their tz handling for *released* pandas (it is working for that), we changed how `make_block_same_class` works on master, which breaks their code. \r\nOf course internals is rather internal, but as far as I can see, the change we did makes difficult to use `make_block_same_class` giving it a numpy array (instead of DatetimeIndex)."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/361077990",
    "html_url": "https://github.com/pandas-dev/pandas/issues/19431#issuecomment-361077990",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/19431",
    "id": 361077990,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MTA3Nzk5MA==",
    "user": {
      "login": "minggli",
      "id": 14131823,
      "node_id": "MDQ6VXNlcjE0MTMxODIz",
      "avatar_url": "https://avatars0.githubusercontent.com/u/14131823?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minggli",
      "html_url": "https://github.com/minggli",
      "followers_url": "https://api.github.com/users/minggli/followers",
      "following_url": "https://api.github.com/users/minggli/following{/other_user}",
      "gists_url": "https://api.github.com/users/minggli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minggli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minggli/subscriptions",
      "organizations_url": "https://api.github.com/users/minggli/orgs",
      "repos_url": "https://api.github.com/users/minggli/repos",
      "events_url": "https://api.github.com/users/minggli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minggli/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-28T17:02:29Z",
    "updated_at": "2018-01-28T17:49:43Z",
    "author_association": "CONTRIBUTOR",
    "body": "looking at the same issue here. https://github.com/pandas-dev/pandas/pull/19265 seems to have caused side-effects for fastparquet to fail in Travis CI. I've tried to restore **kwargs in Block class so it no longer raises TypeError, but https://github.com/pandas-dev/pandas/blob/master/pandas/tests/io/test_parquet.py still breaks for an assertion error."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/361082181",
    "html_url": "https://github.com/pandas-dev/pandas/issues/19431#issuecomment-361082181",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/19431",
    "id": 361082181,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MTA4MjE4MQ==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-28T18:00:14Z",
    "updated_at": "2018-01-28T18:00:14Z",
    "author_association": "MEMBER",
    "body": "It might be that the test needs to be updated independent from the bocks fix. As before fastparquet didn't handle tz columns, which was asserted in the tests I think. The latest release now handles them correctly."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/361085090",
    "html_url": "https://github.com/pandas-dev/pandas/issues/19431#issuecomment-361085090",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/19431",
    "id": 361085090,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MTA4NTA5MA==",
    "user": {
      "login": "minggli",
      "id": 14131823,
      "node_id": "MDQ6VXNlcjE0MTMxODIz",
      "avatar_url": "https://avatars0.githubusercontent.com/u/14131823?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minggli",
      "html_url": "https://github.com/minggli",
      "followers_url": "https://api.github.com/users/minggli/followers",
      "following_url": "https://api.github.com/users/minggli/following{/other_user}",
      "gists_url": "https://api.github.com/users/minggli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minggli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minggli/subscriptions",
      "organizations_url": "https://api.github.com/users/minggli/orgs",
      "repos_url": "https://api.github.com/users/minggli/repos",
      "events_url": "https://api.github.com/users/minggli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minggli/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-28T18:39:41Z",
    "updated_at": "2018-01-28T18:39:41Z",
    "author_association": "CONTRIBUTOR",
    "body": "yes, I wonder why the test looks weird. will fix update the test now that fastparquet handles timezones. "
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/361097420",
    "html_url": "https://github.com/pandas-dev/pandas/issues/19431#issuecomment-361097420",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/19431",
    "id": 361097420,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MTA5NzQyMA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-28T21:25:38Z",
    "updated_at": "2018-01-28T21:25:38Z",
    "author_association": "CONTRIBUTOR",
    "body": "@mdurant you cannot use ``make_block_same_klass`` like this, instead use ``make_block``"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/361102726",
    "html_url": "https://github.com/pandas-dev/pandas/issues/19431#issuecomment-361102726",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/19431",
    "id": 361102726,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MTEwMjcyNg==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-28T22:36:38Z",
    "updated_at": "2018-01-28T22:36:38Z",
    "author_association": "CONTRIBUTOR",
    "body": "this is the correct usage.\r\n```\r\nIn [10]: from pandas.core.internals import make_block\r\n\r\nIn [11]: make_block(pd.DatetimeIndex([], tz='Europe/Brussels'), placement=[0])\r\nOut[11]: DatetimeTZBlock: slice(0, 1, 1), 1 x 0, dtype: datetime64[ns, Europe/Brussels]\r\n```"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/361257107",
    "html_url": "https://github.com/pandas-dev/pandas/issues/19431#issuecomment-361257107",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/19431",
    "id": 361257107,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MTI1NzEwNw==",
    "user": {
      "login": "martindurant",
      "id": 6042212,
      "node_id": "MDQ6VXNlcjYwNDIyMTI=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/6042212?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/martindurant",
      "html_url": "https://github.com/martindurant",
      "followers_url": "https://api.github.com/users/martindurant/followers",
      "following_url": "https://api.github.com/users/martindurant/following{/other_user}",
      "gists_url": "https://api.github.com/users/martindurant/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/martindurant/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/martindurant/subscriptions",
      "organizations_url": "https://api.github.com/users/martindurant/orgs",
      "repos_url": "https://api.github.com/users/martindurant/repos",
      "events_url": "https://api.github.com/users/martindurant/events{/privacy}",
      "received_events_url": "https://api.github.com/users/martindurant/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-29T14:13:02Z",
    "updated_at": "2018-01-29T14:13:02Z",
    "author_association": "NONE",
    "body": "@jreback , there are three calls to `make_block_same_klass` in the code, and I do not know how they should be transformed into `make_block`, especially given the mystery parameter `placement=`. Your help here would be appreciated (in fact, the current method was, of course, your suggestion some 15 months ago ago).\r\n\r\nIn fact, I believe that the `empty` function ought to reside in pandas, as it is generally useful, but could do with more polish and rigour. That way we can avoid the cross-library problem."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/361309945",
    "html_url": "https://github.com/pandas-dev/pandas/issues/19431#issuecomment-361309945",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/19431",
    "id": 361309945,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MTMwOTk0NQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-29T16:52:50Z",
    "updated_at": "2018-01-29T16:52:50Z",
    "author_association": "CONTRIBUTOR",
    "body": "you can just use ``make_block`` directly. "
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/361311976",
    "html_url": "https://github.com/pandas-dev/pandas/issues/19431#issuecomment-361311976",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/19431",
    "id": 361311976,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MTMxMTk3Ng==",
    "user": {
      "login": "martindurant",
      "id": 6042212,
      "node_id": "MDQ6VXNlcjYwNDIyMTI=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/6042212?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/martindurant",
      "html_url": "https://github.com/martindurant",
      "followers_url": "https://api.github.com/users/martindurant/followers",
      "following_url": "https://api.github.com/users/martindurant/following{/other_user}",
      "gists_url": "https://api.github.com/users/martindurant/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/martindurant/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/martindurant/subscriptions",
      "organizations_url": "https://api.github.com/users/martindurant/orgs",
      "repos_url": "https://api.github.com/users/martindurant/repos",
      "events_url": "https://api.github.com/users/martindurant/events{/privacy}",
      "received_events_url": "https://api.github.com/users/martindurant/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-29T16:59:09Z",
    "updated_at": "2018-01-29T16:59:09Z",
    "author_association": "NONE",
    "body": "I don't know how to call `make_block`, e.g.\r\n\r\n```\r\n        if (new_blknos == -1).any():\r\n>           raise AssertionError(\"Gaps in blk ref_locs\")\r\nE           AssertionError: Gaps in blk ref_locs\r\n```\r\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/361329802",
    "html_url": "https://github.com/pandas-dev/pandas/issues/19431#issuecomment-361329802",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/19431",
    "id": 361329802,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MTMyOTgwMg==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-29T17:55:39Z",
    "updated_at": "2018-01-29T17:55:39Z",
    "author_association": "MEMBER",
    "body": "you can pass the `block.mgr_locs` of the existing block for `placement` in `make_block` to have a correct value for that. But, then you are actually just replicating what the `make_block_same_class` is doing .. "
  }
]
