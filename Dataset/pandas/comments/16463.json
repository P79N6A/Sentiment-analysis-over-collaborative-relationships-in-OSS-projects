[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/303527921",
    "html_url": "https://github.com/pandas-dev/pandas/issues/16463#issuecomment-303527921",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/16463",
    "id": 303527921,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwMzUyNzkyMQ==",
    "user": {
      "login": "dsm054",
      "id": 980054,
      "node_id": "MDQ6VXNlcjk4MDA1NA==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/980054?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dsm054",
      "html_url": "https://github.com/dsm054",
      "followers_url": "https://api.github.com/users/dsm054/followers",
      "following_url": "https://api.github.com/users/dsm054/following{/other_user}",
      "gists_url": "https://api.github.com/users/dsm054/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dsm054/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dsm054/subscriptions",
      "organizations_url": "https://api.github.com/users/dsm054/orgs",
      "repos_url": "https://api.github.com/users/dsm054/repos",
      "events_url": "https://api.github.com/users/dsm054/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dsm054/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-05-23T20:50:11Z",
    "updated_at": "2017-05-23T20:50:11Z",
    "author_association": "CONTRIBUTOR",
    "body": "pd.date_range is just a convenience wrapper around DatetimeIndex, and so the same problem affects resamples to B as well because of the call to DatetimeIndex it makes along the way when building a binner.  There will be lots of secondary benefits as well."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/303529081",
    "html_url": "https://github.com/pandas-dev/pandas/issues/16463#issuecomment-303529081",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/16463",
    "id": 303529081,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwMzUyOTA4MQ==",
    "user": {
      "login": "chris-b1",
      "id": 1924092,
      "node_id": "MDQ6VXNlcjE5MjQwOTI=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1924092?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chris-b1",
      "html_url": "https://github.com/chris-b1",
      "followers_url": "https://api.github.com/users/chris-b1/followers",
      "following_url": "https://api.github.com/users/chris-b1/following{/other_user}",
      "gists_url": "https://api.github.com/users/chris-b1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chris-b1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chris-b1/subscriptions",
      "organizations_url": "https://api.github.com/users/chris-b1/orgs",
      "repos_url": "https://api.github.com/users/chris-b1/repos",
      "events_url": "https://api.github.com/users/chris-b1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chris-b1/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-05-23T20:54:24Z",
    "updated_at": "2017-05-23T20:54:24Z",
    "author_association": "CONTRIBUTOR",
    "body": "xref: #11214 - slightly more generic issue.  In general any kind of bin generation larger than `D` is not performant right now."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/303536486",
    "html_url": "https://github.com/pandas-dev/pandas/issues/16463#issuecomment-303536486",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/16463",
    "id": 303536486,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwMzUzNjQ4Ng==",
    "user": {
      "login": "dsm054",
      "id": 980054,
      "node_id": "MDQ6VXNlcjk4MDA1NA==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/980054?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dsm054",
      "html_url": "https://github.com/dsm054",
      "followers_url": "https://api.github.com/users/dsm054/followers",
      "following_url": "https://api.github.com/users/dsm054/following{/other_user}",
      "gists_url": "https://api.github.com/users/dsm054/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dsm054/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dsm054/subscriptions",
      "organizations_url": "https://api.github.com/users/dsm054/orgs",
      "repos_url": "https://api.github.com/users/dsm054/repos",
      "events_url": "https://api.github.com/users/dsm054/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dsm054/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-05-23T21:23:34Z",
    "updated_at": "2017-05-23T21:26:10Z",
    "author_association": "CONTRIBUTOR",
    "body": "@chris-b1: wow, when you're right, you're right.\r\n\r\nThis is all kinds of crazysauce.\r\n\r\n```\r\nIn [58]: %timeit z = pd.DatetimeIndex(start='1956-01-31', end='2017-05-16', freq='3min')\r\n10 loops, best of 3: 40.4 ms per loop\r\n\r\nIn [59]: %timeit z = pd.DatetimeIndex(start='1956-01-31', end='2017-05-16', freq='M')\r\n10 loops, best of 3: 34.9 ms per loop\r\n\r\nIn [60]: len(pd.DatetimeIndex(start='1956-01-31', end='2017-05-16', freq='3min'))\r\nOut[60]: 10745281\r\n\r\nIn [61]: len(pd.DatetimeIndex(start='1956-01-31', end='2017-05-16', freq='M'))\r\nOut[61]: 736\r\n```\r\n\r\nThat's a wild ratio.  \r\n\r\nI think it should be possible to provide a vectorized (not even cythonized) version for each of the some-filter-on-daily offsets, both anchored and not, without too much trouble.  But even if not, we should at least fix the big ones.  I grepped through just one of my codebases and found hundreds of D->B resamples on either Series or few-column frames where this is apparently the bottleneck. :-/"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/303564695",
    "html_url": "https://github.com/pandas-dev/pandas/issues/16463#issuecomment-303564695",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/16463",
    "id": 303564695,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwMzU2NDY5NQ==",
    "user": {
      "login": "rohanp",
      "id": 7104880,
      "node_id": "MDQ6VXNlcjcxMDQ4ODA=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/7104880?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rohanp",
      "html_url": "https://github.com/rohanp",
      "followers_url": "https://api.github.com/users/rohanp/followers",
      "following_url": "https://api.github.com/users/rohanp/following{/other_user}",
      "gists_url": "https://api.github.com/users/rohanp/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rohanp/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rohanp/subscriptions",
      "organizations_url": "https://api.github.com/users/rohanp/orgs",
      "repos_url": "https://api.github.com/users/rohanp/repos",
      "events_url": "https://api.github.com/users/rohanp/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rohanp/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-05-23T23:19:40Z",
    "updated_at": "2017-05-23T23:19:40Z",
    "author_association": "CONTRIBUTOR",
    "body": "I can try giving this a go!"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/303566270",
    "html_url": "https://github.com/pandas-dev/pandas/issues/16463#issuecomment-303566270",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/16463",
    "id": 303566270,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwMzU2NjI3MA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-05-23T23:29:39Z",
    "updated_at": "2017-05-23T23:29:39Z",
    "author_association": "CONTRIBUTOR",
    "body": "@chris-b1 this is actually not that surprising, all this is doing is this an ``np.arange`` under the hood.\r\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/303570875",
    "html_url": "https://github.com/pandas-dev/pandas/issues/16463#issuecomment-303570875",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/16463",
    "id": 303570875,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwMzU3MDg3NQ==",
    "user": {
      "login": "rohanp",
      "id": 7104880,
      "node_id": "MDQ6VXNlcjcxMDQ4ODA=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/7104880?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rohanp",
      "html_url": "https://github.com/rohanp",
      "followers_url": "https://api.github.com/users/rohanp/followers",
      "following_url": "https://api.github.com/users/rohanp/following{/other_user}",
      "gists_url": "https://api.github.com/users/rohanp/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rohanp/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rohanp/subscriptions",
      "organizations_url": "https://api.github.com/users/rohanp/orgs",
      "repos_url": "https://api.github.com/users/rohanp/repos",
      "events_url": "https://api.github.com/users/rohanp/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rohanp/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-05-24T00:01:06Z",
    "updated_at": "2017-05-24T00:01:06Z",
    "author_association": "CONTRIBUTOR",
    "body": "From what I can tell, cythonizing `generate_range` from `offsets.py` would solve this problem?"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/303579209",
    "html_url": "https://github.com/pandas-dev/pandas/issues/16463#issuecomment-303579209",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/16463",
    "id": 303579209,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwMzU3OTIwOQ==",
    "user": {
      "login": "dsm054",
      "id": 980054,
      "node_id": "MDQ6VXNlcjk4MDA1NA==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/980054?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dsm054",
      "html_url": "https://github.com/dsm054",
      "followers_url": "https://api.github.com/users/dsm054/followers",
      "following_url": "https://api.github.com/users/dsm054/following{/other_user}",
      "gists_url": "https://api.github.com/users/dsm054/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dsm054/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dsm054/subscriptions",
      "organizations_url": "https://api.github.com/users/dsm054/orgs",
      "repos_url": "https://api.github.com/users/dsm054/repos",
      "events_url": "https://api.github.com/users/dsm054/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dsm054/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-05-24T00:23:12Z",
    "updated_at": "2017-05-24T00:23:12Z",
    "author_association": "CONTRIBUTOR",
    "body": "I think that's the base location which is slow, but I don't know how much of the slowness is due to the Python-level looping in generate_range or the Python-level operations in the offset's `.apply` that get called.  I suspect we're only getting a few milliseconds of overhead from the Python generator itself, in which case we'd need to cythonize a lot of other code too to see benefits.\r\n\r\nWhether that's a better direction than just taking advantage of preexisting fast code, I don't know."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/303580595",
    "html_url": "https://github.com/pandas-dev/pandas/issues/16463#issuecomment-303580595",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/16463",
    "id": 303580595,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwMzU4MDU5NQ==",
    "user": {
      "login": "chris-b1",
      "id": 1924092,
      "node_id": "MDQ6VXNlcjE5MjQwOTI=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1924092?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chris-b1",
      "html_url": "https://github.com/chris-b1",
      "followers_url": "https://api.github.com/users/chris-b1/followers",
      "following_url": "https://api.github.com/users/chris-b1/following{/other_user}",
      "gists_url": "https://api.github.com/users/chris-b1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chris-b1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chris-b1/subscriptions",
      "organizations_url": "https://api.github.com/users/chris-b1/orgs",
      "repos_url": "https://api.github.com/users/chris-b1/repos",
      "events_url": "https://api.github.com/users/chris-b1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chris-b1/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-05-24T00:33:04Z",
    "updated_at": "2017-05-24T00:33:04Z",
    "author_association": "CONTRIBUTOR",
    "body": "Yeah @dsm054 is right, there is a whole chain of pure-python stuff behind the offsets, so not that much benefit to cythonizing the existing code without a major rewrite.\r\n\r\nMuch easier would be to define some fastpaths for \"easy\" offsets, using existing vectorized datetime methods like suggested at the top.\r\n```\r\ni = pd.date_range('2010', '2015', freq='D')\r\n\r\nbday = i[i.dayofweek < 5]\r\nmonth_end = i[i.is_month_end]\r\nmonth_begin = i[i.is_month_start] #etc\r\n```\r\nHardest part is probably getting the number of periods/start/end logic correct."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/304025518",
    "html_url": "https://github.com/pandas-dev/pandas/issues/16463#issuecomment-304025518",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/16463",
    "id": 304025518,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwNDAyNTUxOA==",
    "user": {
      "login": "dsm054",
      "id": 980054,
      "node_id": "MDQ6VXNlcjk4MDA1NA==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/980054?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dsm054",
      "html_url": "https://github.com/dsm054",
      "followers_url": "https://api.github.com/users/dsm054/followers",
      "following_url": "https://api.github.com/users/dsm054/following{/other_user}",
      "gists_url": "https://api.github.com/users/dsm054/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dsm054/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dsm054/subscriptions",
      "organizations_url": "https://api.github.com/users/dsm054/orgs",
      "repos_url": "https://api.github.com/users/dsm054/repos",
      "events_url": "https://api.github.com/users/dsm054/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dsm054/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-05-25T14:34:10Z",
    "updated_at": "2017-05-25T14:34:10Z",
    "author_association": "CONTRIBUTOR",
    "body": "@rohanp: are you still interested in looking at this even though it may not involve cython? ;-)  If not, I have a prototype which looks promising although my testing of it has been pretty shallow so far (and as usual, it'll probably take longer to test than to implement..)"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/304085740",
    "html_url": "https://github.com/pandas-dev/pandas/issues/16463#issuecomment-304085740",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/16463",
    "id": 304085740,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwNDA4NTc0MA==",
    "user": {
      "login": "rohanp",
      "id": 7104880,
      "node_id": "MDQ6VXNlcjcxMDQ4ODA=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/7104880?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rohanp",
      "html_url": "https://github.com/rohanp",
      "followers_url": "https://api.github.com/users/rohanp/followers",
      "following_url": "https://api.github.com/users/rohanp/following{/other_user}",
      "gists_url": "https://api.github.com/users/rohanp/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rohanp/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rohanp/subscriptions",
      "organizations_url": "https://api.github.com/users/rohanp/orgs",
      "repos_url": "https://api.github.com/users/rohanp/repos",
      "events_url": "https://api.github.com/users/rohanp/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rohanp/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-05-25T18:25:18Z",
    "updated_at": "2017-05-25T18:25:18Z",
    "author_association": "CONTRIBUTOR",
    "body": "I am still interested, but feel free to share your prototype.\nOn Thu, May 25, 2017 at 7:34 AM DSM <notifications@github.com> wrote:\n\n> @rohanp <https://github.com/rohanp>: are you still interested in looking\n> at this even though it may not involve cython? ;-) If not, I have a\n> prototype which looks promising although my testing of it has been pretty\n> shallow so far (and as usual, it'll probably take longer to test than to\n> implement..)\n>\n> —\n> You are receiving this because you were mentioned.\n>\n>\n> Reply to this email directly, view it on GitHub\n> <https://github.com/pandas-dev/pandas/issues/16463#issuecomment-304025518>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AGxpcLJn7liouFzY61c_vE7SMlQYhHDAks5r9ZFwgaJpZM4NkNK2>\n> .\n>\n"
  }
]
