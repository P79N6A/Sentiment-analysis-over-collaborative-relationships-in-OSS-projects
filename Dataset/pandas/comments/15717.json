[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/287371652",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15717#issuecomment-287371652",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15717",
    "id": 287371652,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NzM3MTY1Mg==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-17T14:38:47Z",
    "updated_at": "2017-03-17T14:38:47Z",
    "author_association": "CONTRIBUTOR",
    "body": "you are not using this according the docs: http://pandas.pydata.org/pandas-docs/stable/timeseries.html#custom-business-days-experimental\r\n\r\nyou need to pass the holidays to the CustomBusinessDay. In fact you are creating a new frequency (well you are trying to, but that is quite complicated)."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/287381870",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15717#issuecomment-287381870",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15717",
    "id": 287381870,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NzM4MTg3MA==",
    "user": {
      "login": "bspeice",
      "id": 1199853,
      "node_id": "MDQ6VXNlcjExOTk4NTM=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1199853?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bspeice",
      "html_url": "https://github.com/bspeice",
      "followers_url": "https://api.github.com/users/bspeice/followers",
      "following_url": "https://api.github.com/users/bspeice/following{/other_user}",
      "gists_url": "https://api.github.com/users/bspeice/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bspeice/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bspeice/subscriptions",
      "organizations_url": "https://api.github.com/users/bspeice/orgs",
      "repos_url": "https://api.github.com/users/bspeice/repos",
      "events_url": "https://api.github.com/users/bspeice/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bspeice/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-17T15:13:51Z",
    "updated_at": "2017-03-17T15:13:51Z",
    "author_association": "NONE",
    "body": "It seems strange that I must first \"realize\" what the actual holiday dates are, before creating the `CustomBusinessDay()` object. I've attached the workaround code if anyone needs this in the future:\r\n\r\n```python\r\nimport datetime\r\nfrom pandas.tseries.offsets import CustomBusinessDay\r\nfrom pandas.tseries.holiday import AbstractHolidayCalendar, Holiday, \\\r\n    USMartinLutherKingJr, USPresidentsDay, USMemorialDay, USLaborDay, \\\r\n    USThanksgivingDay, GoodFriday, nearest_workday\r\nimport pandas as pd\r\nfrom pandas.tseries.offsets import BDay\r\n\r\nclass TradingCalendar(AbstractHolidayCalendar):\r\n    \"\"\"Calendar of trading holidays in the US\"\"\"\r\n    rules = [\r\n        Holiday('New Years Day', month=1, day=1, observance=nearest_workday),\r\n        USMartinLutherKingJr,\r\n        USPresidentsDay,\r\n        USMemorialDay,\r\n        Holiday('July 4th', month=7, day=4, observance=nearest_workday),\r\n        USLaborDay,\r\n        USThanksgivingDay,\r\n        GoodFriday,\r\n        Holiday('Christmas', month=12, day=25, observance=nearest_workday)\r\n    ]\r\n\r\nstart = datetime.datetime(2017, 12, 26)\r\nend = datetime.datetime(2017, 1, 6)\r\n\r\nrealized_days = TradingCalendar().calendar(start, end)\r\nr = pd.date_range(start, end, freq=CustomBusinessDay(holidays=realized_days))\r\nlen(r) == 9\r\n```"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/287383453",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15717#issuecomment-287383453",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15717",
    "id": 287383453,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NzM4MzQ1Mw==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-17T15:19:32Z",
    "updated_at": "2017-03-17T15:19:32Z",
    "author_association": "CONTRIBUTOR",
    "body": "@bspeice generally a holiday calendar is defined for a range of available dates (years possibly), this essentially the definition of a calendar itself.\r\n\r\nconstructing a range generates the ranges *from* that calendar. I think this is clear from the docs (as this is exactly what the example does), but if not you are welcome to submit a doc update. If you feel this is a bug, please be specific."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/287414568",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15717#issuecomment-287414568",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15717",
    "id": 287414568,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NzQxNDU2OA==",
    "user": {
      "login": "bspeice",
      "id": 1199853,
      "node_id": "MDQ6VXNlcjExOTk4NTM=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1199853?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bspeice",
      "html_url": "https://github.com/bspeice",
      "followers_url": "https://api.github.com/users/bspeice/followers",
      "following_url": "https://api.github.com/users/bspeice/following{/other_user}",
      "gists_url": "https://api.github.com/users/bspeice/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bspeice/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bspeice/subscriptions",
      "organizations_url": "https://api.github.com/users/bspeice/orgs",
      "repos_url": "https://api.github.com/users/bspeice/repos",
      "events_url": "https://api.github.com/users/bspeice/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bspeice/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-17T17:09:40Z",
    "updated_at": "2017-03-17T17:09:40Z",
    "author_association": "NONE",
    "body": "So, what I missed as a dumb mistake is that `datetime.datetime(2017, 12, 26)` is *after* `datetime.datetime(2017, 1, 6)`. If you change it to `datetime.datetime(2016, 12, 26)` as was originally intended, my first method works correctly.\r\n\r\nThis is what I believe is a bug: \r\n\r\n```python\r\n# TradingCalendar has been set up as in previous comments\r\n\r\n# This works:\r\npd.date_range(datetime.datetime(2017, 12, 26), datetime.datetime(2017, 1, 9), freq=BDay())\r\n\r\n# This also works:\r\npd.date_range(datetime.datetime(2017, 12, 26), datetime.datetime(2017, 1, 9), freq=CustomBusinessDay(calendar=TradingCalendar()))\r\n\r\n# This does not work:\r\nclass TradingDay(CustomBusinessDay):\r\n    def __init__(self):\r\n        super(TradingDay, self).__init__(calendar=TradingCalendar())\r\n\r\npd.date_range(datetime.datetime(2017, 12, 26), datetime.datetime(2017, 1, 9), freq=TradingDay())\r\n# ...\r\n# TypeError: __init__() got an unexpected keyword argument 'normalize'\r\n```"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/287416321",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15717#issuecomment-287416321",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15717",
    "id": 287416321,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NzQxNjMyMQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-17T17:16:07Z",
    "updated_at": "2017-03-17T17:16:07Z",
    "author_association": "CONTRIBUTOR",
    "body": "@bspeice that's not a bug, you are not calling the constructor properly. As I said inheriting from a frequency requires you to follow the pattern (there are *args, **kwargs* passed). "
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/287417367",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15717#issuecomment-287417367",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15717",
    "id": 287417367,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NzQxNzM2Nw==",
    "user": {
      "login": "bspeice",
      "id": 1199853,
      "node_id": "MDQ6VXNlcjExOTk4NTM=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1199853?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bspeice",
      "html_url": "https://github.com/bspeice",
      "followers_url": "https://api.github.com/users/bspeice/followers",
      "following_url": "https://api.github.com/users/bspeice/following{/other_user}",
      "gists_url": "https://api.github.com/users/bspeice/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bspeice/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bspeice/subscriptions",
      "organizations_url": "https://api.github.com/users/bspeice/orgs",
      "repos_url": "https://api.github.com/users/bspeice/repos",
      "events_url": "https://api.github.com/users/bspeice/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bspeice/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-17T17:20:12Z",
    "updated_at": "2017-03-17T17:20:12Z",
    "author_association": "NONE",
    "body": "OK, then I'll just use the original `CustomBusinessDay`. Thanks for your assistance."
  }
]
