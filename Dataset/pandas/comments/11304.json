[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/147529992",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11304#issuecomment-147529992",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11304",
    "id": 147529992,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NzUyOTk5Mg==",
    "user": {
      "login": "michaelaye",
      "id": 69774,
      "node_id": "MDQ6VXNlcjY5Nzc0",
      "avatar_url": "https://avatars1.githubusercontent.com/u/69774?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelaye",
      "html_url": "https://github.com/michaelaye",
      "followers_url": "https://api.github.com/users/michaelaye/followers",
      "following_url": "https://api.github.com/users/michaelaye/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelaye/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelaye/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelaye/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelaye/orgs",
      "repos_url": "https://api.github.com/users/michaelaye/repos",
      "events_url": "https://api.github.com/users/michaelaye/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelaye/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-10-12T21:43:32Z",
    "updated_at": "2015-10-12T21:43:32Z",
    "author_association": "CONTRIBUTOR",
    "body": "Here's the database store:\n\n``` python\n<class 'pandas.io.pytables.HDFStore'>\nFile path: /Users/klay6683/data/planet4/2015-10-11_planet_four_classifications_queryable_cleaned.h5\n/df                                        frame_table  (typ->appendable,nrows->12588576,ncols->21,indexers->[index],dc->[classification_id,image_id,image_name,user_name,marking,acquisition_date,local_mars_time])\n/df/meta/classification_id/meta            series_table (typ->appendable,nrows->4454898,ncols->1,indexers->[index],dc->[values])                                                                                    \n/df/meta/image_id/meta                     series_table (typ->appendable,nrows->105796,ncols->1,indexers->[index],dc->[values])                                                                                     \n/df/meta/image_name/meta                   series_table (typ->appendable,nrows->420,ncols->1,indexers->[index],dc->[values])                                                                                        \n/df/meta/local_mars_time/meta              series_table (typ->appendable,nrows->237,ncols->1,indexers->[index],dc->[values])                                                                                        \n/df/meta/marking/meta                      series_table (typ->appendable,nrows->4,ncols->1,indexers->[index],dc->[values])                                                                                          \n/df/meta/user_name/meta                    series_table (typ->appendable,nrows->111593,ncols->1,indexers->[index],dc->[values])                                                                                     \n/df/meta/values_block_2/meta               series_table (typ->appendable,nrows->105796,ncols->1,indexers->[index],dc->[values])   \n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/147530002",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11304#issuecomment-147530002",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11304",
    "id": 147530002,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NzUzMDAwMg==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-10-12T21:43:35Z",
    "updated_at": "2015-10-12T21:43:35Z",
    "author_association": "CONTRIBUTOR",
    "body": "if you created this before using Pytables 3.2.2 you should create it again.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/147530062",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11304#issuecomment-147530062",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11304",
    "id": 147530062,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NzUzMDA2Mg==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-10-12T21:43:57Z",
    "updated_at": "2015-10-12T21:43:57Z",
    "author_association": "CONTRIBUTOR",
    "body": "no idea about the display issue, pls show someting that is easily reproducible.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/147530165",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11304#issuecomment-147530165",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11304",
    "id": 147530165,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NzUzMDE2NQ==",
    "user": {
      "login": "michaelaye",
      "id": 69774,
      "node_id": "MDQ6VXNlcjY5Nzc0",
      "avatar_url": "https://avatars1.githubusercontent.com/u/69774?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelaye",
      "html_url": "https://github.com/michaelaye",
      "followers_url": "https://api.github.com/users/michaelaye/followers",
      "following_url": "https://api.github.com/users/michaelaye/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelaye/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelaye/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelaye/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelaye/orgs",
      "repos_url": "https://api.github.com/users/michaelaye/repos",
      "events_url": "https://api.github.com/users/michaelaye/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelaye/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-10-12T21:44:27Z",
    "updated_at": "2015-10-12T21:44:27Z",
    "author_association": "CONTRIBUTOR",
    "body": "I created this database today, so it's 3.2.2\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/147530465",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11304#issuecomment-147530465",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11304",
    "id": 147530465,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NzUzMDQ2NQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-10-12T21:46:13Z",
    "updated_at": "2015-10-12T21:46:13Z",
    "author_association": "CONTRIBUTOR",
    "body": "show the dtype of the classification_id table itself\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/147530669",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11304#issuecomment-147530669",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11304",
    "id": 147530669,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NzUzMDY2OQ==",
    "user": {
      "login": "michaelaye",
      "id": 69774,
      "node_id": "MDQ6VXNlcjY5Nzc0",
      "avatar_url": "https://avatars1.githubusercontent.com/u/69774?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelaye",
      "html_url": "https://github.com/michaelaye",
      "followers_url": "https://api.github.com/users/michaelaye/followers",
      "following_url": "https://api.github.com/users/michaelaye/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelaye/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelaye/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelaye/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelaye/orgs",
      "repos_url": "https://api.github.com/users/michaelaye/repos",
      "events_url": "https://api.github.com/users/michaelaye/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelaye/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-10-12T21:47:30Z",
    "updated_at": "2015-10-12T21:48:14Z",
    "author_association": "CONTRIBUTOR",
    "body": "Like so:\n\n``` python\ndata.dtypes\n\nclassification_id          category\ncreated_at           datetime64[ns]\nimage_id                   category\nimage_name                 category\nimage_url                  category\nuser_name                  category\nmarking                    category\nx_tile                        int64\ny_tile                        int64\nacquisition_date     datetime64[ns]\nlocal_mars_time            category\nx                           float64\ny                           float64\nimage_x                     float64\nimage_y                     float64\nradius_1                    float64\nradius_2                    float64\ndistance                    float64\nangle                       float64\nspread                      float64\nversion                     float64\ndtype: object\n```\n\nworking on an example for display time...\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/147531504",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11304#issuecomment-147531504",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11304",
    "id": 147531504,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NzUzMTUwNA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-10-12T21:52:12Z",
    "updated_at": "2015-10-12T21:52:12Z",
    "author_association": "CONTRIBUTOR",
    "body": "show `store.get_storer('df').table`\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/147531815",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11304#issuecomment-147531815",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11304",
    "id": 147531815,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NzUzMTgxNQ==",
    "user": {
      "login": "michaelaye",
      "id": 69774,
      "node_id": "MDQ6VXNlcjY5Nzc0",
      "avatar_url": "https://avatars1.githubusercontent.com/u/69774?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelaye",
      "html_url": "https://github.com/michaelaye",
      "followers_url": "https://api.github.com/users/michaelaye/followers",
      "following_url": "https://api.github.com/users/michaelaye/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelaye/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelaye/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelaye/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelaye/orgs",
      "repos_url": "https://api.github.com/users/michaelaye/repos",
      "events_url": "https://api.github.com/users/michaelaye/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelaye/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-10-12T21:54:00Z",
    "updated_at": "2015-10-12T21:54:00Z",
    "author_association": "CONTRIBUTOR",
    "body": "``` python\n/df/table (Table(12588576,)) ''\n  description := {\n  \"index\": Int64Col(shape=(), dflt=0, pos=0),\n  \"values_block_0\": Float64Col(shape=(10,), dflt=0.0, pos=1),\n  \"values_block_1\": Int64Col(shape=(1,), dflt=0, pos=2),\n  \"values_block_2\": Int32Col(shape=(1,), dflt=0, pos=3),\n  \"values_block_3\": Int64Col(shape=(2,), dflt=0, pos=4),\n  \"classification_id\": Int32Col(shape=(), dflt=0, pos=5),\n  \"image_id\": Int32Col(shape=(), dflt=0, pos=6),\n  \"image_name\": Int16Col(shape=(), dflt=0, pos=7),\n  \"user_name\": Int32Col(shape=(), dflt=0, pos=8),\n  \"marking\": Int8Col(shape=(), dflt=0, pos=9),\n  \"acquisition_date\": Int64Col(shape=(), dflt=0, pos=10),\n  \"local_mars_time\": Int16Col(shape=(), dflt=0, pos=11)}\n  byteorder := 'little'\n  chunkshape := (3718,)\n  autoindex := True\n  colindexes := {\n    \"acquisition_date\": Index(6, medium, shuffle, zlib(1)).is_csi=False,\n    \"image_name\": Index(6, medium, shuffle, zlib(1)).is_csi=False,\n    \"local_mars_time\": Index(6, medium, shuffle, zlib(1)).is_csi=False,\n    \"image_id\": Index(6, medium, shuffle, zlib(1)).is_csi=False,\n    \"marking\": Index(6, medium, shuffle, zlib(1)).is_csi=False,\n    \"index\": Index(6, medium, shuffle, zlib(1)).is_csi=False,\n    \"classification_id\": Index(6, medium, shuffle, zlib(1)).is_csi=False,\n    \"user_name\": Index(6, medium, shuffle, zlib(1)).is_csi=False}\n```\n\nhere's an easy example showing the delay in displaying a single row of data:\n\n``` python\nitems = [str(i) for i in range(4000000)]\ns = pd.Series(items, dtype='category')\ndf = pd.DataFrame({'C':s, 'data':np.random.randn(4000000)})\ndata = df[df.C=='20']\ndata.C.values\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/147534027",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11304#issuecomment-147534027",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11304",
    "id": 147534027,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NzUzNDAyNw==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-10-12T22:03:51Z",
    "updated_at": "2015-10-12T22:03:51Z",
    "author_association": "CONTRIBUTOR",
    "body": "add #11305 for the rendering which is a bug\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/147534445",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11304#issuecomment-147534445",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11304",
    "id": 147534445,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NzUzNDQ0NQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-10-12T22:06:31Z",
    "updated_at": "2015-10-12T22:06:31Z",
    "author_association": "CONTRIBUTOR",
    "body": "did you create the index after the table? can you show some sample code\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/147535426",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11304#issuecomment-147535426",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11304",
    "id": 147535426,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NzUzNTQyNg==",
    "user": {
      "login": "michaelaye",
      "id": 69774,
      "node_id": "MDQ6VXNlcjY5Nzc0",
      "avatar_url": "https://avatars1.githubusercontent.com/u/69774?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelaye",
      "html_url": "https://github.com/michaelaye",
      "followers_url": "https://api.github.com/users/michaelaye/followers",
      "following_url": "https://api.github.com/users/michaelaye/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelaye/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelaye/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelaye/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelaye/orgs",
      "repos_url": "https://api.github.com/users/michaelaye/repos",
      "events_url": "https://api.github.com/users/michaelaye/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelaye/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-10-12T22:13:00Z",
    "updated_at": "2015-10-12T22:13:00Z",
    "author_association": "CONTRIBUTOR",
    "body": "I'm doing stuff on temporary files while those `object` columns still being objects, and only at the very end convert every `object` column to categorical, before creating the database HDF file with one `df.to_hdf` command. This is the last part of the whole pipeline:\n\n``` python\n    logging.info('Merging temp files manually.')\n\n    if image_names is None:\n        image_names = get_image_names(dbname)\n\n    dbname_base, ext = os.path.splitext(dbname)\n    dbnamenew = dbname_base + '_cleaned' + ext\n    logging.info('Creating concatenated db file {}'.format(dbnamenew))\n    df = []\n    for image_name in image_names:\n        try:\n            df.append(pd.read_hdf(get_temp_fname(image_name), 'df'))\n        except OSError:\n            continue\n        else:\n            os.remove(get_temp_fname(image_name))\n    df = pd.concat(df, ignore_index=True)\n\n    # change types to category\n    to_category = ['image_name', 'classification_id', 'image_id', 'image_url',\n                   d'user_name', 'marking', 'local_mars_time']\n    for col in to_category:\n        df[col] = df[col].astype('category')\n\n    df.to_hdf(dbnamenew, 'df',\n              format='table',\n              data_columns=data_columns)\n    logging.info('final database complete.')\n    return dbnamenew\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/147536005",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11304#issuecomment-147536005",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11304",
    "id": 147536005,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NzUzNjAwNQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-10-12T22:16:31Z",
    "updated_at": "2015-10-12T22:16:31Z",
    "author_association": "CONTRIBUTOR",
    "body": "and if you do that search on the frame in memory, does it work correctly?\n(you could simulate be reading the entire frame into memory, then selecting).\n\nTrying to narrow down if its the creation somewhere or something else.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/147540005",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11304#issuecomment-147540005",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11304",
    "id": 147540005,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NzU0MDAwNQ==",
    "user": {
      "login": "michaelaye",
      "id": 69774,
      "node_id": "MDQ6VXNlcjY5Nzc0",
      "avatar_url": "https://avatars1.githubusercontent.com/u/69774?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelaye",
      "html_url": "https://github.com/michaelaye",
      "followers_url": "https://api.github.com/users/michaelaye/followers",
      "following_url": "https://api.github.com/users/michaelaye/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelaye/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelaye/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelaye/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelaye/orgs",
      "repos_url": "https://api.github.com/users/michaelaye/repos",
      "events_url": "https://api.github.com/users/michaelaye/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelaye/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-10-12T22:31:21Z",
    "updated_at": "2015-10-12T22:31:21Z",
    "author_association": "CONTRIBUTOR",
    "body": "Good point. When reading everything into memory, it does not match anything, i.e. working correctly, because this `classification_id` value should have been filtered out before. Maybe my filtering is crooked, something with setting things on views? \n\nHere's how I filter: (It's a bit complicated, but basically: When one user has created more than one unique `classification_id` I have to keep the earlier one:)\nFYI, `image_name` is a higher hierarchy than `image_id`, i.e. each `image_name` has hundreds of tiles that are identified via `image_id`:\n\nThis function gets to several cores:\n\n``` python\n    def process_image_name(image_name):\n        import pandas as pd\n        data = pd.read_hdf(dbname, 'df', where='image_name==' + image_name)\n        data = remove_duplicates_from_image_name_data(data)\n        data.to_hdf(get_temp_fname(image_name), 'df')\n```\n\nand the remover function is:\n\n``` python\ndef remove_duplicates_from_image_name_data(data):\n    \"\"\"remove duplicates from this data.\n\n    Parameters\n    ==========\n    data: pd.DataFrame\n        data filtered for one image_name\n\n    Returns\n    =======\n    For each `user_name` and `image_id` found in `data` return only the data\n    for the first found classification_id. There *should* only be one\n    classification_id per user_name and image_id, but sometimes the queue\n    presented the same image_id more than once to the same users. This removes\n    any later in time classification_ids per user_name and image_id.\n    \"\"\"\n    def process_user_group(g):\n        c_id = g.sort_values(by='created_at').classification_id.iloc[0]\n        return g[g.classification_id == c_id]\n    return data.groupby(['image_id', 'user_name']).apply(\n        process_user_group).reset_index(drop=True)\n```\n\nI'm going to try now what happens on the unfiltered database file.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/147616065",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11304#issuecomment-147616065",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11304",
    "id": 147616065,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NzYxNjA2NQ==",
    "user": {
      "login": "michaelaye",
      "id": 69774,
      "node_id": "MDQ6VXNlcjY5Nzc0",
      "avatar_url": "https://avatars1.githubusercontent.com/u/69774?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelaye",
      "html_url": "https://github.com/michaelaye",
      "followers_url": "https://api.github.com/users/michaelaye/followers",
      "following_url": "https://api.github.com/users/michaelaye/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelaye/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelaye/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelaye/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelaye/orgs",
      "repos_url": "https://api.github.com/users/michaelaye/repos",
      "events_url": "https://api.github.com/users/michaelaye/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelaye/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-10-13T06:14:23Z",
    "updated_at": "2015-10-13T06:14:23Z",
    "author_association": "CONTRIBUTOR",
    "body": "So, I read in the whole dataframe, as above, it works in memory, and then saved it again, with exactly the same problem. (But, interestingly, half the size of the HDF file?). That should mean, that I'm not doing anything wrong, correct?\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/147616788",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11304#issuecomment-147616788",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11304",
    "id": 147616788,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NzYxNjc4OA==",
    "user": {
      "login": "michaelaye",
      "id": 69774,
      "node_id": "MDQ6VXNlcjY5Nzc0",
      "avatar_url": "https://avatars1.githubusercontent.com/u/69774?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelaye",
      "html_url": "https://github.com/michaelaye",
      "followers_url": "https://api.github.com/users/michaelaye/followers",
      "following_url": "https://api.github.com/users/michaelaye/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelaye/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelaye/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelaye/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelaye/orgs",
      "repos_url": "https://api.github.com/users/michaelaye/repos",
      "events_url": "https://api.github.com/users/michaelaye/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelaye/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-10-13T06:20:40Z",
    "updated_at": "2015-10-13T06:20:40Z",
    "author_association": "CONTRIBUTOR",
    "body": "I saved the dataframe after converting just the `classification_id` column to string. My on-disk selection works fine in that case.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/147698272",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11304#issuecomment-147698272",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11304",
    "id": 147698272,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NzY5ODI3Mg==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-10-13T12:16:05Z",
    "updated_at": "2015-10-13T12:16:05Z",
    "author_association": "CONTRIBUTOR",
    "body": "The following replicates in size & scale what you are doing, yes?\n\n```\nIn [1]: cats = [ \"s%07d\" % i for i in xrange(4000000) ]\n\nIn [2]: df = DataFrame({'A' : cats + cats + cats })\n\nIn [3]: df['B'] = df['A'].astype('category')\n\nIn [4]: df.B.cat.codes.dtype\nOut[4]: dtype('int32')\n\nIn [5]: df[df.B=='s0000005']\nOut[5]: \n                A         B\n5        s0000005  s0000005\n4000005  s0000005  s0000005\n8000005  s0000005  s0000005\n\nIn [6]: df.to_hdf('test.h5','df',mode='w',data_columns=True,format='table')\n\nIn [7]: df[df.B=='s3999999']\nOut[7]: \n                 A         B\n3999999   s3999999  s3999999\n7999999   s3999999  s3999999\n11999999  s3999999  s3999999\n\nIn [8]: pd.read_hdf('test.h5','df',where='A=\"s3999999\"')\nOut[8]: \n                 A         B\n3999999   s3999999  s3999999\n7999999   s3999999  s3999999\n11999999  s3999999  s3999999\n\nIn [9]: pd.read_hdf('test.h5','df',where='B=\"s3999999\"')\nOut[9]: \n                 A         B\n3999999   s3999999  s3999999\n7999999   s3999999  s3999999\n11999999  s3999999  s3999999\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/401006690",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11304#issuecomment-401006690",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11304",
    "id": 401006690,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwMTAwNjY5MA==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-28T11:42:31Z",
    "updated_at": "2018-06-28T11:42:31Z",
    "author_association": "CONTRIBUTOR",
    "body": "@michaelaye is this still an issue?"
  }
]
