[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/454834671",
    "html_url": "https://github.com/pandas-dev/pandas/issues/24804#issuecomment-454834671",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/24804",
    "id": 454834671,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1NDgzNDY3MQ==",
    "user": {
      "login": "WillAyd",
      "id": 609873,
      "node_id": "MDQ6VXNlcjYwOTg3Mw==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/609873?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/WillAyd",
      "html_url": "https://github.com/WillAyd",
      "followers_url": "https://api.github.com/users/WillAyd/followers",
      "following_url": "https://api.github.com/users/WillAyd/following{/other_user}",
      "gists_url": "https://api.github.com/users/WillAyd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/WillAyd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/WillAyd/subscriptions",
      "organizations_url": "https://api.github.com/users/WillAyd/orgs",
      "repos_url": "https://api.github.com/users/WillAyd/repos",
      "events_url": "https://api.github.com/users/WillAyd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/WillAyd/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-16T16:04:31Z",
    "updated_at": "2019-01-16T16:04:31Z",
    "author_association": "MEMBER",
    "body": "Hmm interesting. As a workaround you could do the following:\r\n\r\n```python\r\ns.str.replace('.*', '', regex = True)\r\n```\r\n\r\nThough you are correct in that the wildcard expression shouldn't be necessary, given the following works:\r\n\r\n```python\r\nre.sub('.', '', 'abc')\r\n```\r\n\r\nInvestigation and PRs are always welcome"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/454837753",
    "html_url": "https://github.com/pandas-dev/pandas/issues/24804#issuecomment-454837753",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/24804",
    "id": 454837753,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1NDgzNzc1Mw==",
    "user": {
      "login": "ThibTrip",
      "id": 40694343,
      "node_id": "MDQ6VXNlcjQwNjk0MzQz",
      "avatar_url": "https://avatars2.githubusercontent.com/u/40694343?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ThibTrip",
      "html_url": "https://github.com/ThibTrip",
      "followers_url": "https://api.github.com/users/ThibTrip/followers",
      "following_url": "https://api.github.com/users/ThibTrip/following{/other_user}",
      "gists_url": "https://api.github.com/users/ThibTrip/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ThibTrip/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ThibTrip/subscriptions",
      "organizations_url": "https://api.github.com/users/ThibTrip/orgs",
      "repos_url": "https://api.github.com/users/ThibTrip/repos",
      "events_url": "https://api.github.com/users/ThibTrip/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ThibTrip/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-16T16:12:10Z",
    "updated_at": "2019-01-16T16:12:27Z",
    "author_association": "CONTRIBUTOR",
    "body": "> Hmm interesting. As a workaround you could do the following:\r\n> \r\n> ```python\r\n> s.str.replace('.*', '', regex = True)\r\n> ```\r\n> \r\n> Though you are correct in that the wildcard expression shouldn't be necessary, given the following works:\r\n> \r\n> ```python\r\n> re.sub('.', '', 'abc')\r\n> ```\r\n> \r\n> Investigation and PRs are always welcome\r\n\r\nHi WillAyd, thanks for your input. I did not realise I was not using the last version but with 0.23.4 I have the same issue as well. \r\nMy goal is to help pandas so while having a workaround is nice if it's a bug then I'll be happy to see it fixed :) (of course it would be better with a pull request but that seems quite hard)."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/454838636",
    "html_url": "https://github.com/pandas-dev/pandas/issues/24804#issuecomment-454838636",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/24804",
    "id": 454838636,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1NDgzODYzNg==",
    "user": {
      "login": "WillAyd",
      "id": 609873,
      "node_id": "MDQ6VXNlcjYwOTg3Mw==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/609873?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/WillAyd",
      "html_url": "https://github.com/WillAyd",
      "followers_url": "https://api.github.com/users/WillAyd/followers",
      "following_url": "https://api.github.com/users/WillAyd/following{/other_user}",
      "gists_url": "https://api.github.com/users/WillAyd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/WillAyd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/WillAyd/subscriptions",
      "organizations_url": "https://api.github.com/users/WillAyd/orgs",
      "repos_url": "https://api.github.com/users/WillAyd/repos",
      "events_url": "https://api.github.com/users/WillAyd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/WillAyd/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-16T16:14:25Z",
    "updated_at": "2019-01-16T16:14:25Z",
    "author_association": "MEMBER",
    "body": "If you want to poke around in the implementation I think the right starting point is here:\r\n\r\nhttps://github.com/pandas-dev/pandas/blob/98f46f7f08e9f15374fd840507438cb237313a9e/pandas/core/strings.py#L428\r\n\r\nWe also have a contributing guide to help walk through your first PR:\r\n\r\nhttps://pandas.pydata.org/pandas-docs/stable/contributing.html"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/454886641",
    "html_url": "https://github.com/pandas-dev/pandas/issues/24804#issuecomment-454886641",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/24804",
    "id": 454886641,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1NDg4NjY0MQ==",
    "user": {
      "login": "alarangeiras",
      "id": 360034,
      "node_id": "MDQ6VXNlcjM2MDAzNA==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/360034?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alarangeiras",
      "html_url": "https://github.com/alarangeiras",
      "followers_url": "https://api.github.com/users/alarangeiras/followers",
      "following_url": "https://api.github.com/users/alarangeiras/following{/other_user}",
      "gists_url": "https://api.github.com/users/alarangeiras/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alarangeiras/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alarangeiras/subscriptions",
      "organizations_url": "https://api.github.com/users/alarangeiras/orgs",
      "repos_url": "https://api.github.com/users/alarangeiras/repos",
      "events_url": "https://api.github.com/users/alarangeiras/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alarangeiras/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-16T18:25:01Z",
    "updated_at": "2019-01-16T18:25:01Z",
    "author_association": "NONE",
    "body": "Hi, \r\n\r\nI looked into this question and noticed two things:\r\n\r\n1) @ThibTrip, the way you use this method (s.str.replace('.','',regex = True)) is a little mistaken. You need to reassign the result of this method to the varible \"s\" (or another varible of your choice). Just like below:\r\n\r\n```\r\nimport pandas as pd\r\ns = pd.Series(['abc','123'])\r\ns = s.str.replace('.','teste',regex = True)\r\n\r\nprint(s)\r\n```\r\n\r\n2) Besides that, I found a bug on method str_replace just like mentioned by @WillAyd. This method considered a pattern size greater than 1. The size of the period (=1) was ignored.\r\n\r\n```\r\n        if is_compiled_re or len(pat) > 1 or flags or callable(repl):\r\n            n = n if n >= 0 else 0\r\n            compiled = re.compile(pat, flags=flags)\r\n            f = lambda x: compiled.sub(repl=repl, string=x, count=n)\r\n        else:\r\n            f = lambda x: x.replace(pat, repl, n)\r\n```\r\n\r\nI only changed from\r\n\r\n`len(pat) > 1`\r\n\r\nto\r\n\r\n`len(pat) > 0`\r\n\r\nI fixed and tested this change, can i make a PR?"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/454903726",
    "html_url": "https://github.com/pandas-dev/pandas/issues/24804#issuecomment-454903726",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/24804",
    "id": 454903726,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1NDkwMzcyNg==",
    "user": {
      "login": "WillAyd",
      "id": 609873,
      "node_id": "MDQ6VXNlcjYwOTg3Mw==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/609873?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/WillAyd",
      "html_url": "https://github.com/WillAyd",
      "followers_url": "https://api.github.com/users/WillAyd/followers",
      "following_url": "https://api.github.com/users/WillAyd/following{/other_user}",
      "gists_url": "https://api.github.com/users/WillAyd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/WillAyd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/WillAyd/subscriptions",
      "organizations_url": "https://api.github.com/users/WillAyd/orgs",
      "repos_url": "https://api.github.com/users/WillAyd/repos",
      "events_url": "https://api.github.com/users/WillAyd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/WillAyd/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-16T19:15:37Z",
    "updated_at": "2019-01-16T19:15:37Z",
    "author_association": "MEMBER",
    "body": "@alarangeiras thanks for the investigation! Sure if you want to submit a PR would be great - you can use the contributing guide above to help you through that. Just be sure to add a test case with the change"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/454954820",
    "html_url": "https://github.com/pandas-dev/pandas/issues/24804#issuecomment-454954820",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/24804",
    "id": 454954820,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1NDk1NDgyMA==",
    "user": {
      "login": "alarangeiras",
      "id": 360034,
      "node_id": "MDQ6VXNlcjM2MDAzNA==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/360034?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alarangeiras",
      "html_url": "https://github.com/alarangeiras",
      "followers_url": "https://api.github.com/users/alarangeiras/followers",
      "following_url": "https://api.github.com/users/alarangeiras/following{/other_user}",
      "gists_url": "https://api.github.com/users/alarangeiras/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alarangeiras/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alarangeiras/subscriptions",
      "organizations_url": "https://api.github.com/users/alarangeiras/orgs",
      "repos_url": "https://api.github.com/users/alarangeiras/repos",
      "events_url": "https://api.github.com/users/alarangeiras/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alarangeiras/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-16T21:44:18Z",
    "updated_at": "2019-01-16T21:44:18Z",
    "author_association": "NONE",
    "body": "@WillAyd,\r\nSure, i'll submit a test case too."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/455265456",
    "html_url": "https://github.com/pandas-dev/pandas/issues/24804#issuecomment-455265456",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/24804",
    "id": 455265456,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1NTI2NTQ1Ng==",
    "user": {
      "login": "Liam3851",
      "id": 546210,
      "node_id": "MDQ6VXNlcjU0NjIxMA==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/546210?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Liam3851",
      "html_url": "https://github.com/Liam3851",
      "followers_url": "https://api.github.com/users/Liam3851/followers",
      "following_url": "https://api.github.com/users/Liam3851/following{/other_user}",
      "gists_url": "https://api.github.com/users/Liam3851/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Liam3851/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Liam3851/subscriptions",
      "organizations_url": "https://api.github.com/users/Liam3851/orgs",
      "repos_url": "https://api.github.com/users/Liam3851/repos",
      "events_url": "https://api.github.com/users/Liam3851/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Liam3851/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-17T17:50:16Z",
    "updated_at": "2019-01-17T17:50:57Z",
    "author_association": "CONTRIBUTOR",
    "body": "I added the `regex=False` default kwarg to .str.replace (see #16808, #19584). Prior to that it was always regex for len > 1 and literal for len == 1 (though undocumented as such). I noted the potential confusion at https://github.com/pandas-dev/pandas/issues/16808#issuecomment-362670420 but kept it as-is for back compat, absent any response from the reviewers. So this is (somewhat) expected behavior, though I agree inconsistent with the current documentation.\r\n\r\nAs I noted there I think the only case where this makes a difference is if someone does a .str.replace('.', otherstring) to replace every character with otherstring. I think that's probably very rare in anything but the toy use case listed here? \r\n\r\nI think this is definitely an acceptable change to avoid the confusion outlined here, but I would suggest it should be made with a deprecation cycle (warn on .replace of single character with regex unspecified, at least if that is a special character). Any production users currently calling .str.replace('.', '') are expecting to strip periods, not clear the string, for example, and this has been the behavior going back to the introduction of the function.\r\n\r\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/455468310",
    "html_url": "https://github.com/pandas-dev/pandas/issues/24804#issuecomment-455468310",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/24804",
    "id": 455468310,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1NTQ2ODMxMA==",
    "user": {
      "login": "ThibTrip",
      "id": 40694343,
      "node_id": "MDQ6VXNlcjQwNjk0MzQz",
      "avatar_url": "https://avatars2.githubusercontent.com/u/40694343?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ThibTrip",
      "html_url": "https://github.com/ThibTrip",
      "followers_url": "https://api.github.com/users/ThibTrip/followers",
      "following_url": "https://api.github.com/users/ThibTrip/following{/other_user}",
      "gists_url": "https://api.github.com/users/ThibTrip/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ThibTrip/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ThibTrip/subscriptions",
      "organizations_url": "https://api.github.com/users/ThibTrip/orgs",
      "repos_url": "https://api.github.com/users/ThibTrip/repos",
      "events_url": "https://api.github.com/users/ThibTrip/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ThibTrip/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-18T08:39:51Z",
    "updated_at": "2019-01-18T08:39:51Z",
    "author_association": "CONTRIBUTOR",
    "body": "> I added the `regex=False` default kwarg to .str.replace (see #16808, #19584). Prior to that it was always regex for len > 1 and literal for len == 1 (though undocumented as such). I noted the potential confusion at [#16808 (comment)](https://github.com/pandas-dev/pandas/issues/16808#issuecomment-362670420) but kept it as-is for back compat, absent any response from the reviewers. So this is (somewhat) expected behavior, though I agree inconsistent with the current documentation.\r\n> \r\n> As I noted there I think the only case where this makes a difference is if someone does a .str.replace('.', otherstring) to replace every character with otherstring. I think that's probably very rare in anything but the toy use case listed here?\r\n> \r\n> I think this is definitely an acceptable change to avoid the confusion outlined here, but I would suggest it should be made with a deprecation cycle (warn on .replace of single character with regex unspecified, at least if that is a special character). Any production users currently calling .str.replace('.', '') are expecting to strip periods, not clear the string, for example, and this has been the behavior going back to the introduction of the function.\r\n\r\nHi :)! Sorry I was very busy but I did see the code and understand that a regex pattern of length one is a weird use case. I like the idea of warning when the pattern is only one special character (\".\",\"^\", \"$\"...) and regex argument is not provided."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/457315905",
    "html_url": "https://github.com/pandas-dev/pandas/issues/24804#issuecomment-457315905",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/24804",
    "id": 457315905,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1NzMxNTkwNQ==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-24T19:00:40Z",
    "updated_at": "2019-01-24T19:00:40Z",
    "author_association": "CONTRIBUTOR",
    "body": "It  looks like the WIP PR https://github.com/pandas-dev/pandas/pull/24809 has been closed.\r\n\r\nIf anyone is interested in picking this up that will be a good starting point. The main remaining issue is discussed in \r\nhttps://github.com/pandas-dev/pandas/pull/24809#discussion_r248545924. We don't want to change behavior immediately. We need to deprecate the old behavior first."
  }
]
