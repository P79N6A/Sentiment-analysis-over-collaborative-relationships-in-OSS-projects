[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/31997652",
    "html_url": "https://github.com/pandas-dev/pandas/pull/5898#issuecomment-31997652",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/5898",
    "id": 31997652,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxOTk3NjUy",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-01-10T02:21:38Z",
    "updated_at": "2014-01-10T02:21:38Z",
    "author_association": "CONTRIBUTOR",
    "body": "can u give an actual use case of this?\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/31998008",
    "html_url": "https://github.com/pandas-dev/pandas/pull/5898#issuecomment-31998008",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/5898",
    "id": 31998008,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxOTk4MDA4",
    "user": {
      "login": "tinproject",
      "id": 3742174,
      "node_id": "MDQ6VXNlcjM3NDIxNzQ=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/3742174?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tinproject",
      "html_url": "https://github.com/tinproject",
      "followers_url": "https://api.github.com/users/tinproject/followers",
      "following_url": "https://api.github.com/users/tinproject/following{/other_user}",
      "gists_url": "https://api.github.com/users/tinproject/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tinproject/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tinproject/subscriptions",
      "organizations_url": "https://api.github.com/users/tinproject/orgs",
      "repos_url": "https://api.github.com/users/tinproject/repos",
      "events_url": "https://api.github.com/users/tinproject/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tinproject/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-01-10T02:30:58Z",
    "updated_at": "2014-01-10T02:32:00Z",
    "author_association": "CONTRIBUTOR",
    "body": "You can do random walks from infinite random number generator.\nIf you have a big file and yields every line processed with a generator, limit the number of lines readed.\n\nI't focused on the solution of 2305, to load data directly and in a efficient manner you need to know how many memory you will need, and generators and iterators are of indefinite length so aditional help it's needed.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/31998122",
    "html_url": "https://github.com/pandas-dev/pandas/pull/5898#issuecomment-31998122",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/5898",
    "id": 31998122,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxOTk4MTIy",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-01-10T02:34:17Z",
    "updated_at": "2014-01-10T02:34:17Z",
    "author_association": "CONTRIBUTOR",
    "body": "not a big fan of adding a keyword to the constructors\n\nmaybe a better way is to allow data to be a callable them u can imbed islice if you wanted too\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/32003167",
    "html_url": "https://github.com/pandas-dev/pandas/pull/5898#issuecomment-32003167",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/5898",
    "id": 32003167,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMDAzMTY3",
    "user": {
      "login": "jtratner",
      "id": 1598379,
      "node_id": "MDQ6VXNlcjE1OTgzNzk=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1598379?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtratner",
      "html_url": "https://github.com/jtratner",
      "followers_url": "https://api.github.com/users/jtratner/followers",
      "following_url": "https://api.github.com/users/jtratner/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtratner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtratner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtratner/subscriptions",
      "organizations_url": "https://api.github.com/users/jtratner/orgs",
      "repos_url": "https://api.github.com/users/jtratner/repos",
      "events_url": "https://api.github.com/users/jtratner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtratner/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-01-10T05:10:55Z",
    "updated_at": "2014-01-10T05:10:55Z",
    "author_association": "CONTRIBUTOR",
    "body": "At the very least, better to make this a classmethod\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/32673474",
    "html_url": "https://github.com/pandas-dev/pandas/pull/5898#issuecomment-32673474",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/5898",
    "id": 32673474,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNjczNDc0",
    "user": {
      "login": "ghost",
      "id": 10137,
      "node_id": "MDQ6VXNlcjEwMTM3",
      "avatar_url": "https://avatars3.githubusercontent.com/u/10137?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ghost",
      "html_url": "https://github.com/ghost",
      "followers_url": "https://api.github.com/users/ghost/followers",
      "following_url": "https://api.github.com/users/ghost/following{/other_user}",
      "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
      "organizations_url": "https://api.github.com/users/ghost/orgs",
      "repos_url": "https://api.github.com/users/ghost/repos",
      "events_url": "https://api.github.com/users/ghost/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ghost/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-01-18T03:34:46Z",
    "updated_at": "2014-01-18T03:34:46Z",
    "author_association": "NONE",
    "body": "me third,  wrong approach. support reduced memory data loading from an iterator of known length\nis not going to happen by extending existing methods.\n\nviz. recent discussion in #2193, we like the idea done as a new class method.\nOverview:\n1) take a count\n2) infer dtypes from first line (or a few if nans encountered)\n3) pre-allocate numpy arrays of known size and dtype\n4) consume the iterator and fill in the preallocated array\n5) pass the arrays or whatever works to reuse the arrays as the underlying\ndata for a pandas data object.\n\nI planned to try this myself for 0.14, but if you beat me to it so much the better.\nIf block manager confuses you, do 1-4+tests and we can take it from there.\n\nThis I'm closing.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/32673488",
    "html_url": "https://github.com/pandas-dev/pandas/pull/5898#issuecomment-32673488",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/5898",
    "id": 32673488,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNjczNDg4",
    "user": {
      "login": "ghost",
      "id": 10137,
      "node_id": "MDQ6VXNlcjEwMTM3",
      "avatar_url": "https://avatars3.githubusercontent.com/u/10137?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ghost",
      "html_url": "https://github.com/ghost",
      "followers_url": "https://api.github.com/users/ghost/followers",
      "following_url": "https://api.github.com/users/ghost/following{/other_user}",
      "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
      "organizations_url": "https://api.github.com/users/ghost/orgs",
      "repos_url": "https://api.github.com/users/ghost/repos",
      "events_url": "https://api.github.com/users/ghost/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ghost/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-01-18T03:35:37Z",
    "updated_at": "2014-01-18T03:35:37Z",
    "author_association": "NONE",
    "body": "p.s.\nIf you nail down a solid, reproducible way of measuring the memory allocation difference, even better.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/32675091",
    "html_url": "https://github.com/pandas-dev/pandas/pull/5898#issuecomment-32675091",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/5898",
    "id": 32675091,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNjc1MDkx",
    "user": {
      "login": "jtratner",
      "id": 1598379,
      "node_id": "MDQ6VXNlcjE1OTgzNzk=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1598379?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtratner",
      "html_url": "https://github.com/jtratner",
      "followers_url": "https://api.github.com/users/jtratner/followers",
      "following_url": "https://api.github.com/users/jtratner/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtratner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtratner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtratner/subscriptions",
      "organizations_url": "https://api.github.com/users/jtratner/orgs",
      "repos_url": "https://api.github.com/users/jtratner/repos",
      "events_url": "https://api.github.com/users/jtratner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtratner/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-01-18T05:24:57Z",
    "updated_at": "2014-01-18T05:24:57Z",
    "author_association": "CONTRIBUTOR",
    "body": "side note - why is it useful to not create an intermediate list or ndarray? I assure you that even if you pass in a generator, eventually it's going to be converted into list or ndarray, then have its types massaged, etc.  The sugar of pandas does sacrifice some memory efficiency in loading and manipulating data.  It's a tradeoff and sometimes you might need to stick with numpy for really performance critical parts.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/32679510",
    "html_url": "https://github.com/pandas-dev/pandas/pull/5898#issuecomment-32679510",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/5898",
    "id": 32679510,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNjc5NTEw",
    "user": {
      "login": "ghost",
      "id": 10137,
      "node_id": "MDQ6VXNlcjEwMTM3",
      "avatar_url": "https://avatars3.githubusercontent.com/u/10137?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ghost",
      "html_url": "https://github.com/ghost",
      "followers_url": "https://api.github.com/users/ghost/followers",
      "following_url": "https://api.github.com/users/ghost/following{/other_user}",
      "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
      "organizations_url": "https://api.github.com/users/ghost/orgs",
      "repos_url": "https://api.github.com/users/ghost/repos",
      "events_url": "https://api.github.com/users/ghost/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ghost/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-01-18T11:06:59Z",
    "updated_at": "2014-01-18T11:06:59Z",
    "author_association": "NONE",
    "body": "@jtratner , are you asking this having read through the discussion in #2193?\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/32690692",
    "html_url": "https://github.com/pandas-dev/pandas/pull/5898#issuecomment-32690692",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/5898",
    "id": 32690692,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNjkwNjky",
    "user": {
      "login": "tinproject",
      "id": 3742174,
      "node_id": "MDQ6VXNlcjM3NDIxNzQ=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/3742174?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tinproject",
      "html_url": "https://github.com/tinproject",
      "followers_url": "https://api.github.com/users/tinproject/followers",
      "following_url": "https://api.github.com/users/tinproject/following{/other_user}",
      "gists_url": "https://api.github.com/users/tinproject/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tinproject/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tinproject/subscriptions",
      "organizations_url": "https://api.github.com/users/tinproject/orgs",
      "repos_url": "https://api.github.com/users/tinproject/repos",
      "events_url": "https://api.github.com/users/tinproject/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tinproject/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-01-18T19:33:48Z",
    "updated_at": "2014-01-18T19:33:48Z",
    "author_association": "CONTRIBUTOR",
    "body": "@y-p go fot it, currently I'm only a hobby programmer and don't have many time available to make it, but I'm happy to help on anything in my little spare time.\n\nI have been thinking on this problem of memory consumtion for months, and I came to the same task list as you,  actually this PR match the number 1 task, it was thought for it. \n\nI made this on hollydays time, couse I didn't have enought time to make all the code I've filled GH5902 to 'try' to express my ideas on the rest of the process. Unluckily I'm not a native english speaker and I dont express myself as good as I want to.\n\nThis PR it's focus on the API changes: add of a 'count' attribute. Maybe I aim to a too broad inclusion of the attibute for consistency but anyway you are going to need a 'count' attribute becouse generatos/iterators are not sized objects, they have no `__len__()`, and therefore it must be told explicitely.\n\n#### On memory consumtion measure.\n\nTime ago I try with IPython notebooks and memit, but I prefer to use common sense.\n- Imagine you have a 1000 number generator, this generator yields int python objects. Pandas put the whole generator in a list, of python int objects, then put the objects of the list inside an ndarray. Result, twice the memory needed used, 1000 x PythonIntSyze + 1000 x dtypeSize + ndarray overhead.\n- The same generator, this time readed in chuncks of 100 objects (when read in chunks don't need to know the length of the gernator). Consume a chunck length number of objects of the generator, put them on a list, and then put the chunk on a ndarray. When have all the chuncks in ndarray form put all in one unique ndarray. Depends of number of objects maybe less, maybe more memory than the point before depends on objects overhead but in the same order: 1 x 100 x PythonIntSyze + 10 x (100 x dtypeSize + ndarray overhead)+ 1000 x dtypeSize + ndarray overhead.\n- The same generator, one more time. This time you know the length of the data and the dtype sou you can allocate the ndarray and puth the data yielded by the generator one by one. Result, only use the memory needed: 1 x PythonIntSyze + 1000 x dtypeSize + ndarray overhead.\n\nIn case the generator yields more results than the count, you can simply ignore them. In case the generator exausted before count resize the ndarray to the correct size. As it only downsize the ndarray there will not be copy/move operations in memory so no performance penalty for it.\n"
  }
]
