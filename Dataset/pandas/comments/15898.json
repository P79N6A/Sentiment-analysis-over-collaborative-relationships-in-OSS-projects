[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/291833206",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15898#issuecomment-291833206",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15898",
    "id": 291833206,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5MTgzMzIwNg==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-04-05T11:31:26Z",
    "updated_at": "2017-04-05T11:31:26Z",
    "author_association": "CONTRIBUTOR",
    "body": "@p-himik yeah I suppose its possible to try/except the ``.astype`` (as this would happen *only* on an error); you have to be careful to *only* capture the last one though (as the type conversions go thru a series of code which try various type conversions).\r\n\r\nThen you *could* run ``lib.maybe_convert_numeric`` (which has the nice error message; this is what ``to_numeric`` calls). Also happy to have improvement in the *other* errors messages there (to add the position)."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/292570923",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15898#issuecomment-292570923",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15898",
    "id": 292570923,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5MjU3MDkyMw==",
    "user": {
      "login": "chris-b1",
      "id": 1924092,
      "node_id": "MDQ6VXNlcjE5MjQwOTI=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1924092?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chris-b1",
      "html_url": "https://github.com/chris-b1",
      "followers_url": "https://api.github.com/users/chris-b1/followers",
      "following_url": "https://api.github.com/users/chris-b1/following{/other_user}",
      "gists_url": "https://api.github.com/users/chris-b1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chris-b1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chris-b1/subscriptions",
      "organizations_url": "https://api.github.com/users/chris-b1/orgs",
      "repos_url": "https://api.github.com/users/chris-b1/repos",
      "events_url": "https://api.github.com/users/chris-b1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chris-b1/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-04-07T15:37:20Z",
    "updated_at": "2017-04-07T15:37:20Z",
    "author_association": "CONTRIBUTOR",
    "body": "This is actually kind of complex, as we're only using `numpy` for secondary type conversion (e.g. `float64` -> `float32`), the actual string to number parsing is in the low level csv parsing code.\r\n\r\nI do think it would be possible, and nice, to catch the case where the user dtype is float and float parsing fails, basically would need to bubble up the error from this line, conditional on being passed a float dtype.\r\n\r\nhttps://github.com/pandas-dev/pandas/blob/d9e00d2ac0803c561c9f7af1131f586aecfb8113/pandas/io/parsers.pyx#L1780"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/419094323",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15898#issuecomment-419094323",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15898",
    "id": 419094323,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxOTA5NDMyMw==",
    "user": {
      "login": "simonjayhawkins",
      "id": 13159005,
      "node_id": "MDQ6VXNlcjEzMTU5MDA1",
      "avatar_url": "https://avatars0.githubusercontent.com/u/13159005?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/simonjayhawkins",
      "html_url": "https://github.com/simonjayhawkins",
      "followers_url": "https://api.github.com/users/simonjayhawkins/followers",
      "following_url": "https://api.github.com/users/simonjayhawkins/following{/other_user}",
      "gists_url": "https://api.github.com/users/simonjayhawkins/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/simonjayhawkins/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/simonjayhawkins/subscriptions",
      "organizations_url": "https://api.github.com/users/simonjayhawkins/orgs",
      "repos_url": "https://api.github.com/users/simonjayhawkins/repos",
      "events_url": "https://api.github.com/users/simonjayhawkins/events{/privacy}",
      "received_events_url": "https://api.github.com/users/simonjayhawkins/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-09-06T13:32:05Z",
    "updated_at": "2018-09-06T13:32:05Z",
    "author_association": "CONTRIBUTOR",
    "body": "does anyone know if this issue is stale or has it been sorted? i've not tried to reproduce the code sample yet. "
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/419097720",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15898#issuecomment-419097720",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15898",
    "id": 419097720,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxOTA5NzcyMA==",
    "user": {
      "login": "chris-b1",
      "id": 1924092,
      "node_id": "MDQ6VXNlcjE5MjQwOTI=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1924092?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chris-b1",
      "html_url": "https://github.com/chris-b1",
      "followers_url": "https://api.github.com/users/chris-b1/followers",
      "following_url": "https://api.github.com/users/chris-b1/following{/other_user}",
      "gists_url": "https://api.github.com/users/chris-b1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chris-b1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chris-b1/subscriptions",
      "organizations_url": "https://api.github.com/users/chris-b1/orgs",
      "repos_url": "https://api.github.com/users/chris-b1/repos",
      "events_url": "https://api.github.com/users/chris-b1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chris-b1/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-09-06T13:42:04Z",
    "updated_at": "2018-09-06T13:42:04Z",
    "author_association": "CONTRIBUTOR",
    "body": "I'd encourage you to try the sample, or make a simpler reproducing case, but as far as I know this is still an issue."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/419099786",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15898#issuecomment-419099786",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15898",
    "id": 419099786,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxOTA5OTc4Ng==",
    "user": {
      "login": "simonjayhawkins",
      "id": 13159005,
      "node_id": "MDQ6VXNlcjEzMTU5MDA1",
      "avatar_url": "https://avatars0.githubusercontent.com/u/13159005?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/simonjayhawkins",
      "html_url": "https://github.com/simonjayhawkins",
      "followers_url": "https://api.github.com/users/simonjayhawkins/followers",
      "following_url": "https://api.github.com/users/simonjayhawkins/following{/other_user}",
      "gists_url": "https://api.github.com/users/simonjayhawkins/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/simonjayhawkins/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/simonjayhawkins/subscriptions",
      "organizations_url": "https://api.github.com/users/simonjayhawkins/orgs",
      "repos_url": "https://api.github.com/users/simonjayhawkins/repos",
      "events_url": "https://api.github.com/users/simonjayhawkins/events{/privacy}",
      "received_events_url": "https://api.github.com/users/simonjayhawkins/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-09-06T13:47:40Z",
    "updated_at": "2018-09-06T13:47:40Z",
    "author_association": "CONTRIBUTOR",
    "body": "thanks @chris-b1 , i'm unsure how to reproduce the sample code, so i guess coming up with a simpler case is the way forward."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/419123733",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15898#issuecomment-419123733",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15898",
    "id": 419123733,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxOTEyMzczMw==",
    "user": {
      "login": "simonjayhawkins",
      "id": 13159005,
      "node_id": "MDQ6VXNlcjEzMTU5MDA1",
      "avatar_url": "https://avatars0.githubusercontent.com/u/13159005?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/simonjayhawkins",
      "html_url": "https://github.com/simonjayhawkins",
      "followers_url": "https://api.github.com/users/simonjayhawkins/followers",
      "following_url": "https://api.github.com/users/simonjayhawkins/following{/other_user}",
      "gists_url": "https://api.github.com/users/simonjayhawkins/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/simonjayhawkins/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/simonjayhawkins/subscriptions",
      "organizations_url": "https://api.github.com/users/simonjayhawkins/orgs",
      "repos_url": "https://api.github.com/users/simonjayhawkins/repos",
      "events_url": "https://api.github.com/users/simonjayhawkins/events{/privacy}",
      "received_events_url": "https://api.github.com/users/simonjayhawkins/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-09-06T14:52:14Z",
    "updated_at": "2018-09-06T14:52:14Z",
    "author_association": "CONTRIBUTOR",
    "body": "simpler sample code example:\r\n\r\n```python\r\n>>> import pandas as pd\r\n>>>\r\n>>> pd.to_numeric('1.7976931348623157e+308')\r\n```\r\n```python-traceback\r\nTraceback (most recent call last):\r\n  File \"pandas/_libs/src\\inference.pyx\", line 1152, in pandas._libs.lib.maybe_convert_numeric\r\nValueError: Unable to parse string \"1.7976931348623157e+308\"\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"C:\\Users\\simon\\Anaconda3\\lib\\site-packages\\pandas\\core\\tools\\numeric.py\", line 133, in to_numeric\r\n    coerce_numeric=coerce_numeric)\r\n  File \"pandas/_libs/src\\inference.pyx\", line 1185, in pandas._libs.lib.maybe_convert_numeric\r\nValueError: Unable to parse string \"1.7976931348623157e+308\" at position 0\r\n```\r\n\r\n```python\r\n>>> from io import StringIO\r\n>>>\r\n>>> import numpy as np\r\n>>> import pandas as pd\r\n>>>\r\n>>> csv_str = StringIO(('1.7976931348623157e+308, 1.7976931348623157e+308 '))\r\n>>> df = pd.read_csv(csv_str, engine='c', names=[\"a\", \"b\"], dtype={\r\n...                  \"a\": np.str, \"b\": np.float64})\r\n```\r\n```python-traceback\r\nTraceback (most recent call last):\r\n  File \"pandas\\_libs\\parsers.pyx\", line 1156, in pandas._libs.parsers.TextReader._convert_tokens\r\nTypeError: Cannot cast array from dtype('O') to dtype('float64') according to the rule 'safe'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 2, in <module>\r\n  File \"C:\\Users\\simon\\Anaconda3\\lib\\site-packages\\pandas\\io\\parsers.py\", line 678, in parser_f\r\n    return _read(filepath_or_buffer, kwds)\r\n  File \"C:\\Users\\simon\\Anaconda3\\lib\\site-packages\\pandas\\io\\parsers.py\", line 446, in _read\r\n    data = parser.read(nrows)\r\n  File \"C:\\Users\\simon\\Anaconda3\\lib\\site-packages\\pandas\\io\\parsers.py\", line 1036, in read\r\n    ret = self._engine.read(nrows)\r\n  File \"C:\\Users\\simon\\Anaconda3\\lib\\site-packages\\pandas\\io\\parsers.py\", line 1848, in read\r\n    data = self._reader.read(nrows)\r\n  File \"pandas\\_libs\\parsers.pyx\", line 876, in pandas._libs.parsers.TextReader.read\r\n  File \"pandas\\_libs\\parsers.pyx\", line 891, in pandas._libs.parsers.TextReader._read_low_memory\r\n  File \"pandas\\_libs\\parsers.pyx\", line 968, in pandas._libs.parsers.TextReader._read_rows\r\n  File \"pandas\\_libs\\parsers.pyx\", line 1094, in pandas._libs.parsers.TextReader._convert_column_data\r\n  File \"pandas\\_libs\\parsers.pyx\", line 1164, in pandas._libs.parsers.TextReader._convert_tokens\r\nValueError: cannot safely convert passed user dtype of float64 for object dtyped data in column 1\r\n```"
  }
]
