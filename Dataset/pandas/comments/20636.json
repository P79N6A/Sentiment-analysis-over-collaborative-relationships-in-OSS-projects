[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/379720269",
    "html_url": "https://github.com/pandas-dev/pandas/issues/20636#issuecomment-379720269",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/20636",
    "id": 379720269,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3OTcyMDI2OQ==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-09T11:27:47Z",
    "updated_at": "2018-04-09T11:27:47Z",
    "author_association": "MEMBER",
    "body": "@avnovikov Can you provide a reproducible example? (in this case, provide example code for `start`, `end` and `mm`) See also http://matthewrocklin.com/blog/work/2018/02/28/minimal-bug-reports"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/379921432",
    "html_url": "https://github.com/pandas-dev/pandas/issues/20636#issuecomment-379921432",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/20636",
    "id": 379921432,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3OTkyMTQzMg==",
    "user": {
      "login": "jschendel",
      "id": 5332445,
      "node_id": "MDQ6VXNlcjUzMzI0NDU=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/5332445?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jschendel",
      "html_url": "https://github.com/jschendel",
      "followers_url": "https://api.github.com/users/jschendel/followers",
      "following_url": "https://api.github.com/users/jschendel/following{/other_user}",
      "gists_url": "https://api.github.com/users/jschendel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jschendel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jschendel/subscriptions",
      "organizations_url": "https://api.github.com/users/jschendel/orgs",
      "repos_url": "https://api.github.com/users/jschendel/repos",
      "events_url": "https://api.github.com/users/jschendel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jschendel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-09T23:08:55Z",
    "updated_at": "2018-04-09T23:08:55Z",
    "author_association": "MEMBER",
    "body": "I can reproduce the error on master with a duplicated `IntervalIndex`:\r\n```python-traceback\r\nIn [2]: ii = pd.interval_range(pd.Timestamp('20180101'), periods=2).repeat(2)\r\n\r\nIn [3]: ii\r\nOut[3]:\r\nIntervalIndex([(2018-01-01, 2018-01-02], (2018-01-01, 2018-01-02], (2018-01-02, 2018-01-03], (2018-01-02, 2018-01-03]]\r\n              closed='right',\r\n              dtype='interval[datetime64[ns]]')\r\n\r\nIn [4]: ii.get_loc(pd.Timestamp('20180102'))\r\n---------------------------------------------------------------------------\r\nKeyError: ('datetime64[ns]', 'right')\r\n```"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/380033735",
    "html_url": "https://github.com/pandas-dev/pandas/issues/20636#issuecomment-380033735",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/20636",
    "id": 380033735,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MDAzMzczNQ==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-10T09:23:54Z",
    "updated_at": "2018-04-10T09:24:12Z",
    "author_association": "MEMBER",
    "body": "OK, and for numeric intervals, this works correctly:\r\n\r\n```\r\nIn [30]: ii = pd.interval_range(1, periods=2).repeat(2)\r\n\r\nIn [31]: ii\r\nOut[31]: \r\nIntervalIndex([(1, 2], (1, 2], (2, 3], (2, 3]]\r\n              closed='right',\r\n              dtype='interval[int64]')\r\n\r\nIn [33]:  ii.get_loc(2)\r\nOut[33]: array([0, 1])\r\n```"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/380276144",
    "html_url": "https://github.com/pandas-dev/pandas/issues/20636#issuecomment-380276144",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/20636",
    "id": 380276144,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MDI3NjE0NA==",
    "user": {
      "login": "jschendel",
      "id": 5332445,
      "node_id": "MDQ6VXNlcjUzMzI0NDU=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/5332445?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jschendel",
      "html_url": "https://github.com/jschendel",
      "followers_url": "https://api.github.com/users/jschendel/followers",
      "following_url": "https://api.github.com/users/jschendel/following{/other_user}",
      "gists_url": "https://api.github.com/users/jschendel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jschendel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jschendel/subscriptions",
      "organizations_url": "https://api.github.com/users/jschendel/orgs",
      "repos_url": "https://api.github.com/users/jschendel/repos",
      "events_url": "https://api.github.com/users/jschendel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jschendel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-10T23:10:58Z",
    "updated_at": "2018-04-11T03:38:15Z",
    "author_association": "MEMBER",
    "body": "I suspect this will fail for dtypes other than `float32`/`float64`/`int32`/`int64` when the `IntervalIndex` is overlapping or not monotonic (the non-overlapping monotonic case doesn't require using `IntervalTree`). It looks like `IntervalTree` was only implemented for the four dtypes I mentioned earlier:\r\n\r\nhttps://github.com/pandas-dev/pandas/blob/4e6aa1c012d91d663edcfd13658a35f88a49da30/pandas/_libs/intervaltree.pxi.in#L202-L208\r\n\r\nUsing `timedelta64[ns]` fails:\r\n```python-traceback\r\nIn [2]: ii = pd.interval_range(pd.Timedelta('0 days'), periods=2).repeat(2)\r\n\r\nIn [3]: ii\r\nOut[3]:\r\nIntervalIndex([(0 days 00:00:00, 1 days 00:00:00], (0 days 00:00:00, 1 days 00:00:00], (1 days 00:00:00, 2 days 00:00:00], (1 days 00:00:00, 2 days 00:00:00]]\r\n              closed='right',\r\n              dtype='interval[timedelta64[ns]]')\r\n\r\nIn [4]: ii.get_loc(pd.Timedelta('1 day'))\r\n---------------------------------------------------------------------------\r\nKeyError: ('timedelta64[ns]', 'right')\r\n```\r\n\r\nUsing `uint64` fails:\r\n```python-traceback\r\nIn [11]: ii = pd.interval_range(1, periods=2).repeat(2).astype('interval[uint64]')\r\n\r\nIn [12]: ii\r\nOut[12]:\r\nIntervalIndex([(1, 2], (1, 2], (2, 3], (2, 3]]\r\n              closed='right',\r\n              dtype='interval[uint64]')\r\n\r\nIn [13]: ii.get_loc(1.5)\r\n---------------------------------------------------------------------------\r\nKeyError: ('uint64', 'right')\r\n```\r\n\r\nI'm guessing for datetimelike we'll need to do i8 conversion?  Or is there a way to add that directly?  I think `uint64` can be directly added as a dtype.  Any other dtypes I'm forgetting?"
  }
]
