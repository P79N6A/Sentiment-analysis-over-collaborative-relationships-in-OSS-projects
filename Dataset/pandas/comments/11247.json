[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/145686844",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11247#issuecomment-145686844",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11247",
    "id": 145686844,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NTY4Njg0NA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-10-05T22:25:11Z",
    "updated_at": "2015-10-05T22:25:11Z",
    "author_association": "CONTRIBUTOR",
    "body": "I would guess this is some older code, yep these should be `Timestamps`\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/145686962",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11247#issuecomment-145686962",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11247",
    "id": 145686962,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NTY4Njk2Mg==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-10-05T22:25:54Z",
    "updated_at": "2015-10-05T22:25:54Z",
    "author_association": "CONTRIBUTOR",
    "body": "pull-requests are welcome.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/145688469",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11247#issuecomment-145688469",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11247",
    "id": 145688469,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NTY4ODQ2OQ==",
    "user": {
      "login": "depristo",
      "id": 2250400,
      "node_id": "MDQ6VXNlcjIyNTA0MDA=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/2250400?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/depristo",
      "html_url": "https://github.com/depristo",
      "followers_url": "https://api.github.com/users/depristo/followers",
      "following_url": "https://api.github.com/users/depristo/following{/other_user}",
      "gists_url": "https://api.github.com/users/depristo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/depristo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/depristo/subscriptions",
      "organizations_url": "https://api.github.com/users/depristo/orgs",
      "repos_url": "https://api.github.com/users/depristo/repos",
      "events_url": "https://api.github.com/users/depristo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/depristo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-10-05T22:34:04Z",
    "updated_at": "2015-10-05T22:34:04Z",
    "author_association": "NONE",
    "body": "Normally I'd love to fix but I looked at the code and it's not at all\nobvious to me what the underlying problem is.  There's no explicit\nconversion code happening in to_dict, so I think the conversion is being\ntriggered by some low-level system.\n\nOn Mon, Oct 5, 2015 at 3:26 PM, Jeff Reback notifications@github.com\nwrote:\n\n> pull-requests are welcome.\n> \n> â€”\n> Reply to this email directly or view it on GitHub\n> https://github.com/pydata/pandas/issues/11247#issuecomment-145686962.\n\n## \n\nMark A. DePristo\nmark@depristo.com\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/145688944",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11247#issuecomment-145688944",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11247",
    "id": 145688944,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NTY4ODk0NA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-10-05T22:37:00Z",
    "updated_at": "2015-10-05T22:37:00Z",
    "author_association": "CONTRIBUTOR",
    "body": "set an example up (yours above), then step thru code until you see what's happening\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/146854526",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11247#issuecomment-146854526",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11247",
    "id": 146854526,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0Njg1NDUyNg==",
    "user": {
      "login": "udiboy1209",
      "id": 7384411,
      "node_id": "MDQ6VXNlcjczODQ0MTE=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/7384411?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/udiboy1209",
      "html_url": "https://github.com/udiboy1209",
      "followers_url": "https://api.github.com/users/udiboy1209/followers",
      "following_url": "https://api.github.com/users/udiboy1209/following{/other_user}",
      "gists_url": "https://api.github.com/users/udiboy1209/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/udiboy1209/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/udiboy1209/subscriptions",
      "organizations_url": "https://api.github.com/users/udiboy1209/orgs",
      "repos_url": "https://api.github.com/users/udiboy1209/repos",
      "events_url": "https://api.github.com/users/udiboy1209/events{/privacy}",
      "received_events_url": "https://api.github.com/users/udiboy1209/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-10-09T12:34:38Z",
    "updated_at": "2015-10-09T18:48:25Z",
    "author_association": "NONE",
    "body": "Same thing happens for `orient='series'` and `orient='split'`!\n\n```\n>>> print(df.to_dict(orient='series'))\n{'c2': 0   2015-02-02\n1   2015-02-03\n2   2015-02-04\nName: c2, dtype: datetime64[ns], 'c1': 0   2015-01-01\n1   2015-01-02\n2   2015-01-03\nName: c1, dtype: datetime64[ns]}\n\n>>> print(df.to_dict(orient='split'))\n{'index': [0, 1, 2], 'data': [[1420070400000000000L, 1422835200000000000L], [1420156800000000000L, 1422921600000000000L], [1420243200000000000L, 1423008000000000000L]], 'columns': ['c1', 'c2']}\n```\n\nI agree with @depristo , this is a pretty non-trivial bug. The code for `to_dict()` gives no clues.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/147181138",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11247#issuecomment-147181138",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11247",
    "id": 147181138,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NzE4MTEzOA==",
    "user": {
      "login": "ethanluoyc",
      "id": 6040760,
      "node_id": "MDQ6VXNlcjYwNDA3NjA=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/6040760?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ethanluoyc",
      "html_url": "https://github.com/ethanluoyc",
      "followers_url": "https://api.github.com/users/ethanluoyc/followers",
      "following_url": "https://api.github.com/users/ethanluoyc/following{/other_user}",
      "gists_url": "https://api.github.com/users/ethanluoyc/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ethanluoyc/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ethanluoyc/subscriptions",
      "organizations_url": "https://api.github.com/users/ethanluoyc/orgs",
      "repos_url": "https://api.github.com/users/ethanluoyc/repos",
      "events_url": "https://api.github.com/users/ethanluoyc/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ethanluoyc/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-10-11T10:55:32Z",
    "updated_at": "2015-10-11T10:55:32Z",
    "author_association": "CONTRIBUTOR",
    "body": "I did some preliminary investigation. It appears that `to_list()` invoked using parameter \"list\" will invoke `__iter__` in `series.py` which checks for the type of the element in it and if it is `np.datetime64` it will return the Timestamp object using lib.Timestamp(x). Apparently the checking of the dtype seems to be lacking when using \"record\", may this be the problem?\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/147184985",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11247#issuecomment-147184985",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11247",
    "id": 147184985,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NzE4NDk4NQ==",
    "user": {
      "login": "ethanluoyc",
      "id": 6040760,
      "node_id": "MDQ6VXNlcjYwNDA3NjA=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/6040760?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ethanluoyc",
      "html_url": "https://github.com/ethanluoyc",
      "followers_url": "https://api.github.com/users/ethanluoyc/followers",
      "following_url": "https://api.github.com/users/ethanluoyc/following{/other_user}",
      "gists_url": "https://api.github.com/users/ethanluoyc/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ethanluoyc/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ethanluoyc/subscriptions",
      "organizations_url": "https://api.github.com/users/ethanluoyc/orgs",
      "repos_url": "https://api.github.com/users/ethanluoyc/repos",
      "events_url": "https://api.github.com/users/ethanluoyc/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ethanluoyc/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-10-11T11:38:05Z",
    "updated_at": "2015-10-11T11:38:05Z",
    "author_association": "CONTRIBUTOR",
    "body": "I think I find the problem. When working with dict and list, the value is a Series object and some conversion is implemented. When working with record, the returned is directly from the NDArray so there is no correct conversion of the datetime objects.\nFrom `frame.py`:\n\n```\n    def to_dict(self, orient='dict'):\n        \"\"\"Convert DataFrame to dictionary.\n\n        Parameters\n        ----------\n        orient : str {'dict', 'list', 'series', 'split', 'records'}\n            Determines the type of the values of the dictionary.\n\n            - dict (default) : dict like {column -> {index -> value}}\n            - list : dict like {column -> [values]}\n            - series : dict like {column -> Series(values)}\n            - split : dict like\n              {index -> [index], columns -> [columns], data -> [values]}\n            - records : list like\n              [{column -> value}, ... , {column -> value}]\n\n            Abbreviations are allowed. `s` indicates `series` and `sp`\n            indicates `split`.\n\n        Returns\n        -------\n        result : dict like {column -> {index -> value}}\n        \"\"\"\n        if not self.columns.is_unique:\n            warnings.warn(\"DataFrame columns are not unique, some \"\n                          \"columns will be omitted.\", UserWarning)\n        if orient.lower().startswith('d'):\n            return dict((k, v.to_dict()) for k, v in compat.iteritems(self))\n        elif orient.lower().startswith('l'):\n            return dict((k, v.tolist()) for k, v in compat.iteritems(self))\n        elif orient.lower().startswith('sp'):\n            return {'index': self.index.tolist(),\n                    'columns': self.columns.tolist(),\n                    'data': self.values.tolist()}\n        elif orient.lower().startswith('s'):\n            return dict((k, v) for k, v in compat.iteritems(self))\n        elif orient.lower().startswith('r'):\n            return [dict((k, v) for k, v in zip(self.columns, row))\n                    for row in self.values]\n        else:\n            raise ValueError(\"orient '%s' not understood\" % orient)\n```\n\n@jreback is this so?\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/147208758",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11247#issuecomment-147208758",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11247",
    "id": 147208758,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NzIwODc1OA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-10-11T15:15:09Z",
    "updated_at": "2015-10-11T15:15:09Z",
    "author_association": "CONTRIBUTOR",
    "body": "so using `.values` on a `DataFrame` causes a numpy array container to be created that will hold all of the elements. If the frame is mixed type (e.g. say `object` and `datetime64[ns]`) then it will be `object` dtype and all will work, e.g.\n\n```\nIn [5]: df = DataFrame({'A' : 'foo', 'B' : pd.date_range('20130101',periods=3), 'C' : 1})\n\nIn [6]: df.to_dict(orient='records')\nOut[6]: \n[{'A': 'foo', 'B': Timestamp('2013-01-01 00:00:00'), 'C': 1},\n {'A': 'foo', 'B': Timestamp('2013-01-02 00:00:00'), 'C': 1},\n {'A': 'foo', 'B': Timestamp('2013-01-03 00:00:00'), 'C': 1}]\n```\n\nbut in the case above `.values` creates a `datetime64[ns]` container so the values are represented as `np.datetime64`, so this is all correct.\n\nWhat you would need to do is box things, you can use: https://github.com/pydata/pandas/blob/master/pandas/core/common.py#L1848 (`_maybe_box_datetimelike`)\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/148066203",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11247#issuecomment-148066203",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11247",
    "id": 148066203,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0ODA2NjIwMw==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-10-14T14:26:12Z",
    "updated_at": "2015-10-14T14:26:12Z",
    "author_association": "CONTRIBUTOR",
    "body": "should fix as I indicated above\n\n> On Oct 14, 2015, at 9:57 AM, Ethan Luo notifications@github.com wrote:\n> \n> @jreback so do we consider this as an intended effect or we need to fix this?\n> \n> â€”\n> Reply to this email directly or view it on GitHub.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/148764152",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11247#issuecomment-148764152",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11247",
    "id": 148764152,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0ODc2NDE1Mg==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-10-16T16:40:40Z",
    "updated_at": "2015-10-16T16:40:40Z",
    "author_association": "CONTRIBUTOR",
    "body": "closed by #11327 \n"
  }
]
