[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/431986433",
    "html_url": "https://github.com/pandas-dev/pandas/pull/23284#issuecomment-431986433",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23284",
    "id": 431986433,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMTk4NjQzMw==",
    "user": {
      "login": "pep8speaks",
      "id": 24736507,
      "node_id": "MDQ6VXNlcjI0NzM2NTA3",
      "avatar_url": "https://avatars1.githubusercontent.com/u/24736507?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pep8speaks",
      "html_url": "https://github.com/pep8speaks",
      "followers_url": "https://api.github.com/users/pep8speaks/followers",
      "following_url": "https://api.github.com/users/pep8speaks/following{/other_user}",
      "gists_url": "https://api.github.com/users/pep8speaks/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pep8speaks/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pep8speaks/subscriptions",
      "organizations_url": "https://api.github.com/users/pep8speaks/orgs",
      "repos_url": "https://api.github.com/users/pep8speaks/repos",
      "events_url": "https://api.github.com/users/pep8speaks/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pep8speaks/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-22T21:06:37Z",
    "updated_at": "2018-10-22T21:41:17Z",
    "author_association": "NONE",
    "body": "Hello @TomAugspurger! Thanks for updating the PR.\n\n - There are no PEP8 issues in the file [`pandas/core/reshape/reshape.py`](https://github.com/TomAugspurger/pandas/blob/942db1b918f818281c5dcfd10a951e519a04dc42/pandas/core/reshape/reshape.py) !\n\n - There are no PEP8 issues in the file [`pandas/tests/extension/base/reshaping.py`](https://github.com/TomAugspurger/pandas/blob/942db1b918f818281c5dcfd10a951e519a04dc42/pandas/tests/extension/base/reshaping.py) !\n\n - There are no PEP8 issues in the file [`pandas/tests/extension/decimal/array.py`](https://github.com/TomAugspurger/pandas/blob/942db1b918f818281c5dcfd10a951e519a04dc42/pandas/tests/extension/decimal/array.py) !\n\n - There are no PEP8 issues in the file [`pandas/tests/extension/json/test_json.py`](https://github.com/TomAugspurger/pandas/blob/942db1b918f818281c5dcfd10a951e519a04dc42/pandas/tests/extension/json/test_json.py) !\n\n\n\n##### Comment last updated on October 22, 2018 at 21:41 Hours UTC"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/432224267",
    "html_url": "https://github.com/pandas-dev/pandas/pull/23284#issuecomment-432224267",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23284",
    "id": 432224267,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMjIyNDI2Nw==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-23T12:23:35Z",
    "updated_at": "2018-10-23T12:44:05Z",
    "author_association": "CONTRIBUTOR",
    "body": "Just fixed the decimal failures.\r\n\r\nThere will be a remaining test failure I haven't addressed yet. We had a test that did `Series[categorical].unstack(fill_value=value)` for a value that wasn't part of the original `categories` in the categorical. We aren't `take` correctly right now (https://github.com/pandas-dev/pandas/issues/23296), but once that's fixed there's still an API discussion: should we allow `take` to take \"new\" categories that weren't previously present.\r\n\r\n```python\r\nIn [2]: cat = pd.Categorical(['a', 'a', 'b'])\r\n\r\nIn [3]: cat.take([0, -1, -1], fill_value='d', allow_fill=True)\r\n```\r\n\r\nShould that raise? Return a Categorical with categories `['a', 'b', 'd']`?\r\n\r\nI'm having some deja vu right now; I think we've discussed this before.\r\n\r\nI think if we were designing that today, we wouldn't have allowed that. "
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/432231229",
    "html_url": "https://github.com/pandas-dev/pandas/pull/23284#issuecomment-432231229",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23284",
    "id": 432231229,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMjIzMTIyOQ==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-23T12:45:06Z",
    "updated_at": "2018-10-23T12:45:14Z",
    "author_association": "CONTRIBUTOR",
    "body": "> I think if we were designing that today, we wouldn't have allowed that.\r\n\r\nI'm actually rethinking, this. Maybe we *would* want to allow this. It's a pretty clear statement of user intent, and I could easily imaging someone wanting to do something like \"take, but fill missing values (-1) with \"None\" or \"other\"."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/432270213",
    "html_url": "https://github.com/pandas-dev/pandas/pull/23284#issuecomment-432270213",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23284",
    "id": 432270213,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMjI3MDIxMw==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-23T14:28:44Z",
    "updated_at": "2018-10-23T14:28:44Z",
    "author_association": "MEMBER",
    "body": "Do you want to resolve the fill_value` question here, or leave for https://github.com/pandas-dev/pandas/issues/23296 ?\r\n\r\n(as I mentioned there: I would preserve the dtype, which then means only allowing a fill_value that is NaN or within the categories)"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/432272485",
    "html_url": "https://github.com/pandas-dev/pandas/pull/23284#issuecomment-432272485",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23284",
    "id": 432272485,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMjI3MjQ4NQ==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-23T14:34:14Z",
    "updated_at": "2018-10-23T14:36:30Z",
    "author_association": "CONTRIBUTOR",
    "body": "We can ignore `fill_value` in this PR. Though of course we *should* discuss the API ramifications of `unstack` preserving the dtype.\r\n\r\nIf we agree that `Categorical.take` should not allow new categories for `fill_value`, I think we have two options\r\n\r\n1. Not allow `Series.unstack(..., fill_value=fill_value)` to be a new category. Raise a TypeError instead.\r\n2. Allow `Series.unstack`(..., fill_value=fill_value)` to be a new category by adding it to the CategoricalDtype before `take`ing.\r\n\r\nI'm not sure which is preferred.\r\n\r\nThis is blocked by https://github.com/pandas-dev/pandas/issues/23296 for now."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/432421838",
    "html_url": "https://github.com/pandas-dev/pandas/pull/23284#issuecomment-432421838",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23284",
    "id": 432421838,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMjQyMTgzOA==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-23T21:12:58Z",
    "updated_at": "2018-10-23T21:12:58Z",
    "author_association": "CONTRIBUTOR",
    "body": "Apparently, `fill_value` was broken in 0.23.4 for Categortical\r\n\r\n```python\r\nIn [51]: index = pd.MultiIndex.from_tuples([('A', 0), ('A', 1), ('B', 1)])\r\n\r\nIn [52]: ser = pd.Series(pd.Categorical(['a', 'b', 'a']), index=index)\r\n\r\nIn [53]: ser.unstack(fill_value='c')\r\nOut[53]:\r\n     0  1\r\nA    a  b\r\nB  NaN  a\r\n\r\nIn [54]: ser.unstack(fill_value='a')\r\nOut[54]:\r\n   0  1\r\nA  a  b\r\nB  a  a\r\n```\r\n\r\nWe just silently didn't fill the `'d'`. So I guess we just raise an error there instead?"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/432422856",
    "html_url": "https://github.com/pandas-dev/pandas/pull/23284#issuecomment-432422856",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23284",
    "id": 432422856,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMjQyMjg1Ng==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-23T21:16:23Z",
    "updated_at": "2018-10-23T21:16:23Z",
    "author_association": "MEMBER",
    "body": "> So I guess we just raise an error there instead?\r\n\r\n+1"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/432425471",
    "html_url": "https://github.com/pandas-dev/pandas/pull/23284#issuecomment-432425471",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23284",
    "id": 432425471,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMjQyNTQ3MQ==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-23T21:24:13Z",
    "updated_at": "2018-10-23T21:24:13Z",
    "author_association": "CONTRIBUTOR",
    "body": "https://github.com/pandas-dev/pandas/pull/10246/files#diff-79e0785420ae1c686623848c4d561486R261 indicates that this was deliberate, but I didn't see any discussion / documentation around it, so I'm calling it a bug."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/432627124",
    "html_url": "https://github.com/pandas-dev/pandas/pull/23284#issuecomment-432627124",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23284",
    "id": 432627124,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMjYyNzEyNA==",
    "user": {
      "login": "codecov[bot]",
      "id": 22429695,
      "node_id": "MDM6Qm90MjI0Mjk2OTU=",
      "avatar_url": "https://avatars2.githubusercontent.com/in/254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/codecov%5Bbot%5D",
      "html_url": "https://github.com/apps/codecov",
      "followers_url": "https://api.github.com/users/codecov%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/codecov%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/codecov%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/codecov%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/codecov%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/codecov%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/codecov%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/codecov%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/codecov%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2018-10-24T12:01:15Z",
    "updated_at": "2018-11-06T18:33:08Z",
    "author_association": "NONE",
    "body": "# [Codecov](https://codecov.io/gh/pandas-dev/pandas/pull/23284?src=pr&el=h1) Report\n> Merging [#23284](https://codecov.io/gh/pandas-dev/pandas/pull/23284?src=pr&el=desc) into [master](https://codecov.io/gh/pandas-dev/pandas/commit/6bf6cd2fe991f4f57e045e1f28a9dff860b72b37?src=pr&el=desc) will **decrease** coverage by `0.01%`.\n> The diff coverage is `97.29%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/pandas-dev/pandas/pull/23284/graphs/tree.svg?width=650&token=eZ4WkYLtcO&height=150&src=pr)](https://codecov.io/gh/pandas-dev/pandas/pull/23284?src=pr&el=tree)\n\n```diff\n@@            Coverage Diff             @@\n##           master   #23284      +/-   ##\n==========================================\n- Coverage   92.25%   92.23%   -0.02%     \n==========================================\n  Files         161      161              \n  Lines       51186    51198      +12     \n==========================================\n+ Hits        47222    47224       +2     \n- Misses       3964     3974      +10\n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| #multiple | `90.62% <97.29%> (-0.02%)` | :arrow_down: |\n| #single | `42.27% <27.02%> (-0.01%)` | :arrow_down: |\n\n| [Impacted Files](https://codecov.io/gh/pandas-dev/pandas/pull/23284?src=pr&el=tree) | Coverage Δ | |\n|---|---|---|\n| [pandas/core/internals/managers.py](https://codecov.io/gh/pandas-dev/pandas/pull/23284/diff?src=pr&el=tree#diff-cGFuZGFzL2NvcmUvaW50ZXJuYWxzL21hbmFnZXJzLnB5) | `95.74% <100%> (ø)` | :arrow_up: |\n| [pandas/core/reshape/reshape.py](https://codecov.io/gh/pandas-dev/pandas/pull/23284/diff?src=pr&el=tree#diff-cGFuZGFzL2NvcmUvcmVzaGFwZS9yZXNoYXBlLnB5) | `99.54% <100%> (-0.01%)` | :arrow_down: |\n| [pandas/core/internals/blocks.py](https://codecov.io/gh/pandas-dev/pandas/pull/23284/diff?src=pr&el=tree#diff-cGFuZGFzL2NvcmUvaW50ZXJuYWxzL2Jsb2Nrcy5weQ==) | `93.67% <95%> (-0.36%)` | :arrow_down: |\n| [pandas/core/arrays/base.py](https://codecov.io/gh/pandas-dev/pandas/pull/23284/diff?src=pr&el=tree#diff-cGFuZGFzL2NvcmUvYXJyYXlzL2Jhc2UucHk=) | `97.35% <0%> (-0.67%)` | :arrow_down: |\n| [pandas/core/arrays/datetimelike.py](https://codecov.io/gh/pandas-dev/pandas/pull/23284/diff?src=pr&el=tree#diff-cGFuZGFzL2NvcmUvYXJyYXlzL2RhdGV0aW1lbGlrZS5weQ==) | `95.83% <0%> (-0.27%)` | :arrow_down: |\n| [pandas/core/arrays/categorical.py](https://codecov.io/gh/pandas-dev/pandas/pull/23284/diff?src=pr&el=tree#diff-cGFuZGFzL2NvcmUvYXJyYXlzL2NhdGVnb3JpY2FsLnB5) | `95.09% <0%> (-0.13%)` | :arrow_down: |\n| [pandas/core/arrays/sparse.py](https://codecov.io/gh/pandas-dev/pandas/pull/23284/diff?src=pr&el=tree#diff-cGFuZGFzL2NvcmUvYXJyYXlzL3NwYXJzZS5weQ==) | `91.71% <0%> (-0.13%)` | :arrow_down: |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/pandas-dev/pandas/pull/23284?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/pandas-dev/pandas/pull/23284?src=pr&el=footer). Last update [6bf6cd2...56e5f2f](https://codecov.io/gh/pandas-dev/pandas/pull/23284?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/432629785",
    "html_url": "https://github.com/pandas-dev/pandas/pull/23284#issuecomment-432629785",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23284",
    "id": 432629785,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMjYyOTc4NQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-24T12:10:49Z",
    "updated_at": "2018-10-24T12:10:49Z",
    "author_association": "CONTRIBUTOR",
    "body": "I also recall some issues that might be closed by this (haven't looked), but categorical reshaping might be a good place to start."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/432663125",
    "html_url": "https://github.com/pandas-dev/pandas/pull/23284#issuecomment-432663125",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23284",
    "id": 432663125,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMjY2MzEyNQ==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-24T13:47:13Z",
    "updated_at": "2018-10-24T13:47:13Z",
    "author_association": "CONTRIBUTOR",
    "body": "FYI, my comment about this changing behavior for Series / categorical wasn't correct. This will be backwards compat, we're just changing it so that sparse & categorical are no longer special-cased to work.\r\n\r\n`DataFrame.unstack()` is proving to be a bit of work, but I should get that done today."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/432700761",
    "html_url": "https://github.com/pandas-dev/pandas/pull/23284#issuecomment-432700761",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23284",
    "id": 432700761,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMjcwMDc2MQ==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-24T15:13:42Z",
    "updated_at": "2018-10-24T15:13:42Z",
    "author_association": "CONTRIBUTOR",
    "body": "Things are a bit better in 5902b5b."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/432836750",
    "html_url": "https://github.com/pandas-dev/pandas/pull/23284#issuecomment-432836750",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23284",
    "id": 432836750,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMjgzNjc1MA==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-24T21:35:48Z",
    "updated_at": "2018-10-24T21:35:48Z",
    "author_association": "CONTRIBUTOR",
    "body": "Failure in https://travis-ci.org/pandas-dev/pandas/jobs/445842263 is unrelated (fixed in https://github.com/pandas-dev/pandas/pull/23323)"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/433399619",
    "html_url": "https://github.com/pandas-dev/pandas/pull/23284#issuecomment-433399619",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23284",
    "id": 433399619,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMzM5OTYxOQ==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-26T13:01:51Z",
    "updated_at": "2018-10-26T13:01:51Z",
    "author_association": "CONTRIBUTOR",
    "body": "Here are the results from that ASV\r\n\r\nmaster + benchmark:\r\n\r\n```\r\n[  0.00%] ·· Benchmarking existing-py_Users_taugspurger_Envs_pandas-dev_bin_python3\r\n[ 25.00%] ··· Running (reshape.Unstack.time_full_product--)..\r\n[ 75.00%] ··· reshape.Unstack.time_full_product                                                                                                           ok\r\n[ 75.00%] ··· ========== ==========\r\n                param1\r\n              ---------- ----------\r\n                 int      73.0±2ms\r\n               category   193±1ms\r\n              ========== ==========\r\n\r\n[100.00%] ··· reshape.Unstack.time_without_last_row                                                                                                       ok\r\n[100.00%] ··· ========== ===========\r\n                param1\r\n              ---------- -----------\r\n                 int      189±0.7ms\r\n               category    509±5ms\r\n              ========== ===========\r\n```\r\n\r\nand this PR\r\n\r\n```\r\n[  0.00%] ·· Benchmarking existing-py_Users_taugspurger_Envs_pandas-dev_bin_python3\r\n[ 25.00%] ··· Running (reshape.Unstack.time_full_product--)..\r\n[ 75.00%] ··· reshape.Unstack.time_full_product                                                                                                           ok\r\n[ 75.00%] ··· ========== ============\r\n                param1\r\n              ---------- ------------\r\n                 int      75.9±0.4ms\r\n               category    192±4ms\r\n              ========== ============\r\n\r\n[100.00%] ··· reshape.Unstack.time_without_last_row                                                                                                       ok\r\n[100.00%] ··· ========== =========\r\n                param1\r\n              ---------- ---------\r\n                 int      190±2ms\r\n               category   515±2ms\r\n              ========== =========\r\n\r\n```\r\n\r\n\r\nThe int case should be unchanged from before. The only thing that should differ there is an extra `if is_extension_dtype` check.\r\n\r\nThe category one should be taking the new code path, but those timings are suspiciously close together that I'm going to double check."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/434071086",
    "html_url": "https://github.com/pandas-dev/pandas/pull/23284#issuecomment-434071086",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23284",
    "id": 434071086,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNDA3MTA4Ng==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-29T20:40:13Z",
    "updated_at": "2018-10-29T20:40:13Z",
    "author_association": "CONTRIBUTOR",
    "body": "Ugh, yeah I messed up the ASV. Forgot to convert to categorical.\r\n\r\n```\r\n· Discovering benchmarks\r\n· Running 2 total benchmarks (1 commits * 1 environments * 2 benchmarks)\r\n[  0.00%] ·· Benchmarking existing-py_Users_taugspurger_Envs_pandas-dev_bin_python3\r\n[ 25.00%] ··· reshape.Unstack.time_full_product                                                                                       ok\r\n[ 25.00%] ··· ========== =========\r\n                param1\r\n              ---------- ---------\r\n                 int      137±0ms\r\n               category   17.2±0s\r\n              ========== =========\r\n\r\n[ 50.00%] ··· reshape.Unstack.time_without_last_row                                                                                   ok\r\n[ 50.00%] ··· ========== =========\r\n                param1\r\n              ---------- ---------\r\n                 int      265±0ms\r\n               category   17.5±0s\r\n              ========== =========\r\n\r\n```\r\n\r\nBack to the drawing board..."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/435988989",
    "html_url": "https://github.com/pandas-dev/pandas/pull/23284#issuecomment-435988989",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23284",
    "id": 435988989,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNTk4ODk4OQ==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-05T18:47:45Z",
    "updated_at": "2018-11-05T18:47:45Z",
    "author_association": "CONTRIBUTOR",
    "body": "Ah, I forgot to re-run the benchmark on master after converting to category. So we're actually faster!\r\n\r\nMaster:\r\n\r\n```\r\n· Discovering benchmarks\r\n· Running 2 total benchmarks (1 commits * 1 environments * 2 benchmarks)\r\n[  0.00%] ·· Benchmarking existing-py_Users_taugspurger_Envs_pandas-dev_bin_python3\r\n[ 25.00%] ··· reshape.Unstack.time_full_product                                                                                                           ok\r\n[ 25.00%] ··· ========== =========\r\n                param1\r\n              ---------- ---------\r\n                 int      136±0ms\r\n               category   50.6±0s\r\n              ========== =========\r\n\r\n[ 50.00%] ··· reshape.Unstack.time_without_last_row                                                                                                       ok\r\n[ 50.00%] ··· ========== =========\r\n                param1\r\n              ---------- ---------\r\n                 int      263±0ms\r\n               category   49.6±0s\r\n              ========== =========\r\n```\r\n\r\nThis branch\r\n\r\n```\r\n· Discovering benchmarks\r\n· Running 2 total benchmarks (1 commits * 1 environments * 2 benchmarks)\r\n[  0.00%] ·· Benchmarking existing-py_Users_taugspurger_Envs_pandas-dev_bin_python3\r\n[ 25.00%] ··· reshape.Unstack.time_full_product                                                                                                           ok\r\n[ 25.00%] ··· ========== =========\r\n                param1\r\n              ---------- ---------\r\n                 int      141±0ms\r\n               category   18.0±0s\r\n              ========== =========\r\n\r\n[ 50.00%] ··· reshape.Unstack.time_without_last_row                                                                                                       ok\r\n[ 50.00%] ··· ========== =========\r\n                param1\r\n              ---------- ---------\r\n                 int      257±0ms\r\n               category   18.0±0s\r\n              ========== =========\r\n\r\n```\r\n\r\nI'm going to update the benchmark to not take 18s though."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/435990281",
    "html_url": "https://github.com/pandas-dev/pandas/pull/23284#issuecomment-435990281",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23284",
    "id": 435990281,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNTk5MDI4MQ==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-05T18:51:28Z",
    "updated_at": "2018-11-05T18:51:28Z",
    "author_association": "CONTRIBUTOR",
    "body": "This should be good to go, assuming CI passes."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/436111656",
    "html_url": "https://github.com/pandas-dev/pandas/pull/23284#issuecomment-436111656",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23284",
    "id": 436111656,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNjExMTY1Ng==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-06T02:39:22Z",
    "updated_at": "2018-11-06T02:39:22Z",
    "author_association": "CONTRIBUTOR",
    "body": "K, I'll fix the `pd.isna(Decimal('NaN'))` and revert the other changes."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/436115359",
    "html_url": "https://github.com/pandas-dev/pandas/pull/23284#issuecomment-436115359",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23284",
    "id": 436115359,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNjExNTM1OQ==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-06T03:02:01Z",
    "updated_at": "2018-11-06T03:02:01Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hmm, fixing `isna` for decimal seems to be expensive. `np.isnan` raises on decimal input, so we would need to search any object array for decimal elements, and call our isna on it. I don't think that's a good idea."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/436119618",
    "html_url": "https://github.com/pandas-dev/pandas/pull/23284#issuecomment-436119618",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23284",
    "id": 436119618,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNjExOTYxOA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-06T03:30:06Z",
    "updated_at": "2018-11-06T03:30:06Z",
    "author_association": "CONTRIBUTOR",
    "body": "> Hmm, fixing isna for decimal seems to be expensive. np.isnan raises on decimal input, so we would need to search any object array for decimal elements, and call our isna on it. I don't think that's a good idea.\r\n\r\nthis would only be for object input, and can you all ``math.isnan``? (maybe instead)?"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/436255532",
    "html_url": "https://github.com/pandas-dev/pandas/pull/23284#issuecomment-436255532",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23284",
    "id": 436255532,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNjI1NTUzMg==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-06T13:39:31Z",
    "updated_at": "2018-11-06T13:39:31Z",
    "author_association": "CONTRIBUTOR",
    "body": "Ahh I thought we would have to pay the extra cost on string dtypes too, but it seems like those are handled before we get to a generic object dtype. This should be doable.\r\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/436264173",
    "html_url": "https://github.com/pandas-dev/pandas/pull/23284#issuecomment-436264173",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23284",
    "id": 436264173,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNjI2NDE3Mw==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-06T14:06:45Z",
    "updated_at": "2018-11-06T14:06:45Z",
    "author_association": "CONTRIBUTOR",
    "body": "Well, I'm going back to -1 on support decimal here, unless we can find a better way than a basic isnstance.\r\n\r\n```diff\r\ndiff --git a/doc/source/whatsnew/v0.24.0.txt b/doc/source/whatsnew/v0.24.0.txt\r\nindex f449ca532..c8c5db611 100644\r\n--- a/doc/source/whatsnew/v0.24.0.txt\r\n+++ b/doc/source/whatsnew/v0.24.0.txt\r\n@@ -1227,6 +1227,7 @@ Missing\r\n - Bug in :func:`Series.hasnans` that could be incorrectly cached and return incorrect answers if null elements are introduced after an initial call (:issue:`19700`)\r\n - :func:`Series.isin` now treats all NaN-floats as equal also for `np.object`-dtype. This behavior is consistent with the behavior for float64 (:issue:`22119`)\r\n - :func:`unique` no longer mangles NaN-floats and the ``NaT``-object for `np.object`-dtype, i.e. ``NaT`` is no longer coerced to a NaN-value and is treated as a different entity. (:issue:`22295`)\r\n+- :meth:`isna` now considers ``decimal.Decimal('NaN')`` a missing value (:issue:`23284`).\r\n \r\n \r\n MultiIndex\r\ndiff --git a/pandas/_libs/missing.pyx b/pandas/_libs/missing.pyx\r\nindex b87913592..4fa96f652 100644\r\n--- a/pandas/_libs/missing.pyx\r\n+++ b/pandas/_libs/missing.pyx\r\n@@ -1,6 +1,7 @@\r\n # -*- coding: utf-8 -*-\r\n \r\n import cython\r\n+import decimal\r\n from cython import Py_ssize_t\r\n \r\n import numpy as np\r\n@@ -33,6 +34,8 @@ cdef inline bint _check_all_nulls(object val):\r\n         res = get_datetime64_value(val) == NPY_NAT\r\n     elif util.is_timedelta64_object(val):\r\n         res = get_timedelta64_value(val) == NPY_NAT\r\n+    elif isinstance(val, decimal.Decimal):\r\n+        return val.is_nan()\r\n     else:\r\n         res = 0\r\n     return res\r\n@@ -71,6 +74,8 @@ cpdef bint checknull(object val):\r\n         return get_timedelta64_value(val) == NPY_NAT\r\n     elif util.is_array(val):\r\n         return False\r\n+    elif isinstance(val, decimal.Decimal):\r\n+        return val.is_nan()\r\n     else:\r\n         return val is None or util.is_nan(val)\r\n \r\n```\r\n\r\nsome timings\r\n\r\nkind          | master | PR     | ratio\r\n------------- | ------ | ------ | -----\r\nscalar        | 821 ns | 920 ns | 1.12 (different result)\r\nobject array  | 1.0 ms | 2.4 ms | 2.4\r\ndecimal array | 1.0 ms | 3.6 ms | 3.6 (different result)\r\n\r\nthe object array is an object-dtype series with 20,000 elements. The decimal array is an object-dtype series with 20,000 decimal elements. I don't really care about the last one being 3.6x slower, since we're getting the correct result. I'm more concerned about the others."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/436266519",
    "html_url": "https://github.com/pandas-dev/pandas/pull/23284#issuecomment-436266519",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23284",
    "id": 436266519,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNjI2NjUxOQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-06T14:14:01Z",
    "updated_at": "2018-11-06T14:14:01Z",
    "author_association": "CONTRIBUTOR",
    "body": "this moves calls to python land. Try\r\n\r\n```\r\nelif hasattr(val, 'is_nan'):\r\n    return val.is_nan()\r\n```"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/436269836",
    "html_url": "https://github.com/pandas-dev/pandas/pull/23284#issuecomment-436269836",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23284",
    "id": 436269836,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNjI2OTgzNg==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-06T14:24:43Z",
    "updated_at": "2018-11-06T14:24:43Z",
    "author_association": "CONTRIBUTOR",
    "body": "According to https://cython.readthedocs.io/en/latest/src/userguide/language_basics.html#built-in-functions both hasattr and isintsance are optimized (but require some interaction with python land).\r\n\r\n\r\n\r\nkind          | master | PR     | ratio\r\n------------- | ------ | ------ | -----\r\nscalar        | 821 ns | 926 ns | 1.12 (different result)\r\nobject array  | 1.0 ms | 6.6 ms | 6.6\r\ndecimal array | 1.0 ms | 2.0 ms | 2.0  (different result)\r\n\r\n\r\nso pretty similar. I don't really know why the object array would be 6x slower now though."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/436277569",
    "html_url": "https://github.com/pandas-dev/pandas/pull/23284#issuecomment-436277569",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23284",
    "id": 436277569,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNjI3NzU2OQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-06T14:46:45Z",
    "updated_at": "2018-11-06T14:46:45Z",
    "author_association": "CONTRIBUTOR",
    "body": "hmm i guess just the additional check is causing this.\r\n\r\nbut a more general questions. *should* we even be checking for this in an ndarray object array at all? e.g. we don't do this for a random foo object. It must be a decimal array (in which case you just ask it .isnan).?"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/436284146",
    "html_url": "https://github.com/pandas-dev/pandas/pull/23284#issuecomment-436284146",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23284",
    "id": 436284146,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNjI4NDE0Ng==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-06T15:04:42Z",
    "updated_at": "2018-11-06T15:04:42Z",
    "author_association": "MEMBER",
    "body": "Shall we leave possible changes/support for decimal in the internals for another issue or PR? \r\nBecause in some sense it is exactly the idea of an ExtensionArray that it can override the behaviour of `pd.isna` to do this correctly no?"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/436286348",
    "html_url": "https://github.com/pandas-dev/pandas/pull/23284#issuecomment-436286348",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23284",
    "id": 436286348,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNjI4NjM0OA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-06T15:10:32Z",
    "updated_at": "2018-11-06T15:10:32Z",
    "author_association": "CONTRIBUTOR",
    "body": "> Shall we leave possible changes/support for decimal in the internals for another issue or PR?\r\nBecause in some sense it is exactly the idea of an ExtensionArray that it can override the behaviour of pd.isna to do this correctly no?\r\n\r\ntotally fine. @TomAugspurger can you xfail these tests rather than change them though. and create an issue to update."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/436287280",
    "html_url": "https://github.com/pandas-dev/pandas/pull/23284#issuecomment-436287280",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23284",
    "id": 436287280,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNjI4NzI4MA==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-06T15:12:59Z",
    "updated_at": "2018-11-06T15:12:59Z",
    "author_association": "MEMBER",
    "body": "> can you xfail these tests rather than change them though. and create an issue to update.\r\n\r\nIsn't the current code fine? It's contained in `test_decimal.py`, I don't think it is a problem that there is some decimal specific code in that file?"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/436294503",
    "html_url": "https://github.com/pandas-dev/pandas/pull/23284#issuecomment-436294503",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23284",
    "id": 436294503,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNjI5NDUwMw==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-06T15:31:57Z",
    "updated_at": "2018-11-06T15:31:57Z",
    "author_association": "CONTRIBUTOR",
    "body": "https://github.com/pandas-dev/pandas/issues/23530 for isna(decimal).\r\n\r\nFixed the merge conflict."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/436398089",
    "html_url": "https://github.com/pandas-dev/pandas/pull/23284#issuecomment-436398089",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23284",
    "id": 436398089,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNjM5ODA4OQ==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-06T20:31:58Z",
    "updated_at": "2018-11-06T20:31:58Z",
    "author_association": "CONTRIBUTOR",
    "body": "All green."
  }
]
