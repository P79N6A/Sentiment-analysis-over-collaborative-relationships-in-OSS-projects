[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/158064139",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11623#issuecomment-158064139",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11623",
    "id": 158064139,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1ODA2NDEzOQ==",
    "user": {
      "login": "bashtage",
      "id": 5585221,
      "node_id": "MDQ6VXNlcjU1ODUyMjE=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/5585221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bashtage",
      "html_url": "https://github.com/bashtage",
      "followers_url": "https://api.github.com/users/bashtage/followers",
      "following_url": "https://api.github.com/users/bashtage/following{/other_user}",
      "gists_url": "https://api.github.com/users/bashtage/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bashtage/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bashtage/subscriptions",
      "organizations_url": "https://api.github.com/users/bashtage/orgs",
      "repos_url": "https://api.github.com/users/bashtage/repos",
      "events_url": "https://api.github.com/users/bashtage/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bashtage/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-11-19T13:59:45Z",
    "updated_at": "2015-11-19T14:02:47Z",
    "author_association": "CONTRIBUTOR",
    "body": "This seems to be because it computes the quantiles series by series -- so computing 10k quantiles like this example does is going to have a lot of overhead.  This was presumably done as a simplification to handle different types such as TimeStamp. It also handles nulls by default (as do most Pandas functions), which also affects performance (lots of `notnull()`) that aren't run by NumPy.\n\nUltimately `df.quantile` is just calling `np.percentile` N times where N is the shape of the axis.  The simplest thing to do would be to have a fast path for `numeric_only = True` where there are no nulls, although the requirement to drop nulls can't be easily done inside of the NumPy implementation using the block.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/158064702",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11623#issuecomment-158064702",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11623",
    "id": 158064702,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1ODA2NDcwMg==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-11-19T14:02:45Z",
    "updated_at": "2015-11-19T14:02:45Z",
    "author_association": "CONTRIBUTOR",
    "body": "these can simply be done block-by-block. we do this with almost all other functions already. \n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/158064813",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11623#issuecomment-158064813",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11623",
    "id": 158064813,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1ODA2NDgxMw==",
    "user": {
      "login": "bashtage",
      "id": 5585221,
      "node_id": "MDQ6VXNlcjU1ODUyMjE=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/5585221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bashtage",
      "html_url": "https://github.com/bashtage",
      "followers_url": "https://api.github.com/users/bashtage/followers",
      "following_url": "https://api.github.com/users/bashtage/following{/other_user}",
      "gists_url": "https://api.github.com/users/bashtage/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bashtage/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bashtage/subscriptions",
      "organizations_url": "https://api.github.com/users/bashtage/orgs",
      "repos_url": "https://api.github.com/users/bashtage/repos",
      "events_url": "https://api.github.com/users/bashtage/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bashtage/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-11-19T14:03:16Z",
    "updated_at": "2015-11-19T14:03:16Z",
    "author_association": "CONTRIBUTOR",
    "body": "I think the null-handling prevents trivial application even block-by-block. See my revised comment.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/158074146",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11623#issuecomment-158074146",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11623",
    "id": 158074146,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1ODA3NDE0Ng==",
    "user": {
      "login": "max-sixty",
      "id": 5635139,
      "node_id": "MDQ6VXNlcjU2MzUxMzk=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/5635139?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/max-sixty",
      "html_url": "https://github.com/max-sixty",
      "followers_url": "https://api.github.com/users/max-sixty/followers",
      "following_url": "https://api.github.com/users/max-sixty/following{/other_user}",
      "gists_url": "https://api.github.com/users/max-sixty/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/max-sixty/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/max-sixty/subscriptions",
      "organizations_url": "https://api.github.com/users/max-sixty/orgs",
      "repos_url": "https://api.github.com/users/max-sixty/repos",
      "events_url": "https://api.github.com/users/max-sixty/events{/privacy}",
      "received_events_url": "https://api.github.com/users/max-sixty/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-11-19T14:33:44Z",
    "updated_at": "2015-11-19T14:33:44Z",
    "author_association": "CONTRIBUTOR",
    "body": "There's an `np.nanpercentile` which could be used to go block by block\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/158074681",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11623#issuecomment-158074681",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11623",
    "id": 158074681,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1ODA3NDY4MQ==",
    "user": {
      "login": "bashtage",
      "id": 5585221,
      "node_id": "MDQ6VXNlcjU1ODUyMjE=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/5585221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bashtage",
      "html_url": "https://github.com/bashtage",
      "followers_url": "https://api.github.com/users/bashtage/followers",
      "following_url": "https://api.github.com/users/bashtage/following{/other_user}",
      "gists_url": "https://api.github.com/users/bashtage/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bashtage/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bashtage/subscriptions",
      "organizations_url": "https://api.github.com/users/bashtage/orgs",
      "repos_url": "https://api.github.com/users/bashtage/repos",
      "events_url": "https://api.github.com/users/bashtage/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bashtage/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-11-19T14:36:00Z",
    "updated_at": "2015-11-19T14:36:00Z",
    "author_association": "CONTRIBUTOR",
    "body": "NumPy >= 1.9, so would require some special casing.\n\nKevin\n\nOn Thu, Nov 19, 2015 at 9:34 AM Maximilian Roos notifications@github.com\nwrote:\n\n> There's an np.nanpercentile which could be used to go block by block\n> \n> â€”\n> Reply to this email directly or view it on GitHub\n> https://github.com/pydata/pandas/issues/11623#issuecomment-158074146.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/204757662",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11623#issuecomment-204757662",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11623",
    "id": 204757662,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwNDc1NzY2Mg==",
    "user": {
      "login": "sinhrks",
      "id": 1696302,
      "node_id": "MDQ6VXNlcjE2OTYzMDI=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1696302?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sinhrks",
      "html_url": "https://github.com/sinhrks",
      "followers_url": "https://api.github.com/users/sinhrks/followers",
      "following_url": "https://api.github.com/users/sinhrks/following{/other_user}",
      "gists_url": "https://api.github.com/users/sinhrks/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sinhrks/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sinhrks/subscriptions",
      "organizations_url": "https://api.github.com/users/sinhrks/orgs",
      "repos_url": "https://api.github.com/users/sinhrks/repos",
      "events_url": "https://api.github.com/users/sinhrks/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sinhrks/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-04-02T17:00:34Z",
    "updated_at": "2016-04-02T17:01:16Z",
    "author_association": "MEMBER",
    "body": "After #12752\n\n```\n# Output:\n# Pandas took 20180.231 ms\n# Numpy took 6.843 ms\n```\n\nCompared to numpy, #12752 has some improvements but needs further.\n\n```\n# current\n# 15337.531 / 1.653 = 9278.603145795523\n\n# 12752:\n# 20180 / 6.843 = 2948.9989770568463\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/204758386",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11623#issuecomment-204758386",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11623",
    "id": 204758386,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwNDc1ODM4Ng==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-04-02T17:04:03Z",
    "updated_at": "2016-04-02T17:04:03Z",
    "author_association": "CONTRIBUTOR",
    "body": "@sinhrks it needs to be done on a block-basis. Then it will be the same.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/204758515",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11623#issuecomment-204758515",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11623",
    "id": 204758515,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwNDc1ODUxNQ==",
    "user": {
      "login": "sinhrks",
      "id": 1696302,
      "node_id": "MDQ6VXNlcjE2OTYzMDI=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1696302?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sinhrks",
      "html_url": "https://github.com/sinhrks",
      "followers_url": "https://api.github.com/users/sinhrks/followers",
      "following_url": "https://api.github.com/users/sinhrks/following{/other_user}",
      "gists_url": "https://api.github.com/users/sinhrks/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sinhrks/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sinhrks/subscriptions",
      "organizations_url": "https://api.github.com/users/sinhrks/orgs",
      "repos_url": "https://api.github.com/users/sinhrks/repos",
      "events_url": "https://api.github.com/users/sinhrks/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sinhrks/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-04-02T17:05:54Z",
    "updated_at": "2016-04-02T17:06:14Z",
    "author_association": "MEMBER",
    "body": "The another bottleneck is transposition caused by `axis=1`. I think this transposition can be skipped in some condition (numeric_only, etc)\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/204758938",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11623#issuecomment-204758938",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11623",
    "id": 204758938,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwNDc1ODkzOA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-04-02T17:13:05Z",
    "updated_at": "2016-04-02T17:13:05Z",
    "author_association": "CONTRIBUTOR",
    "body": "numpy handles the 2-d just fine. so when it is done by blocks, we just transpose quantile and transpose (e.g. kind of like what `.eval` does). But again can fix this after.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/218042472",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11623#issuecomment-218042472",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11623",
    "id": 218042472,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIxODA0MjQ3Mg==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-05-10T02:19:35Z",
    "updated_at": "2016-05-10T02:19:35Z",
    "author_association": "CONTRIBUTOR",
    "body": "after #13122\n\n```\nIn [16]: %timeit df.quantile(q, axis=1)\n100 loops, best of 3: 2.06 ms per loop\n\nIn [17]: %timeit np.percentile(data, q*100, axis=1)\n1000 loops, best of 3: 1.23 ms per loop\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/460608426",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11623#issuecomment-460608426",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11623",
    "id": 460608426,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2MDYwODQyNg==",
    "user": {
      "login": "ashesh-0",
      "id": 6098025,
      "node_id": "MDQ6VXNlcjYwOTgwMjU=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/6098025?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ashesh-0",
      "html_url": "https://github.com/ashesh-0",
      "followers_url": "https://api.github.com/users/ashesh-0/followers",
      "following_url": "https://api.github.com/users/ashesh-0/following{/other_user}",
      "gists_url": "https://api.github.com/users/ashesh-0/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ashesh-0/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ashesh-0/subscriptions",
      "organizations_url": "https://api.github.com/users/ashesh-0/orgs",
      "repos_url": "https://api.github.com/users/ashesh-0/repos",
      "events_url": "https://api.github.com/users/ashesh-0/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ashesh-0/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-05T11:45:10Z",
    "updated_at": "2019-02-05T11:45:10Z",
    "author_association": "NONE",
    "body": "On a similar note, I see that describe() seems unnecessarily slow. Computing individual components is much faster.\r\n```\r\n\r\nIn [30]: import pandas as pd\r\n    ...: import numpy as np\r\n    ...: df = pd.DataFrame(np.random.rand(5000,50))\r\n    ...: print('Time taken for mean')\r\n    ...: %timeit df.mean(axis=0)\r\n    ...: print('Time taken for std')\r\n    ...: %timeit df.std(axis=0)\r\n    ...: print('Time taken for quantiles')\r\n    ...: %timeit df.quantile([0, 0.25,0.5,0.75,1])\r\n    ...: print('Time taken for count(just for completeness sake)')\r\n    ...: %timeit df.shape\r\n    ...: print('Time taken for describe')\r\n    ...: %timeit df.describe()\r\n    ...: \r\nTime taken for mean\r\n1.81 ms _ 54.8 _s per loop (mean _ std. dev. of 7 runs, 100 loops each)\r\nTime taken for std\r\n4.72 ms _ 73.9 _s per loop (mean _ std. dev. of 7 runs, 100 loops each)\r\nTime taken for quantiles\r\n11.3 ms _ 109 _s per loop (mean _ std. dev. of 7 runs, 100 loops each)\r\nTime taken for count(just for completeness sake)\r\n1.69 _s _ 107 ns per loop (mean _ std. dev. of 7 runs, 1000000 loops each)\r\nTime taken for describe\r\n167 ms _ 2.7 ms per loop (mean _ std. dev. of 7 runs, 10 loops each)\r\n\r\n```"
  }
]
