[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/120414904",
    "html_url": "https://github.com/pandas-dev/pandas/issues/10538#issuecomment-120414904",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/10538",
    "id": 120414904,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyMDQxNDkwNA==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-07-10T13:46:14Z",
    "updated_at": "2015-07-10T13:48:14Z",
    "author_association": "CONTRIBUTOR",
    "body": "You might have a slight typo in your example. Should the second line be `df1.set_index('a', inplace=True)`?\n\nI think your expectation is correct. I see the `left_index` / `right_index` options as being equivalent to a `.reset_index().set_index()`\n\n``` python\nIn [18]: pd.merge(df1.reset_index(), df2, how='left', left_on='a', right_on='a1').set_index('a')\nOut[18]:\n     g  a1  b\na\nbb  10  bb  2\nzz  20  zz  7\ndd  30  dd  3\n```\n\nI'm not really sure why `a1` is even around now.\n\nI'm not sure if this is a bug or just something I don't understand. Are you willing to look through the code to see what's going on?\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/120428383",
    "html_url": "https://github.com/pandas-dev/pandas/issues/10538#issuecomment-120428383",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/10538",
    "id": 120428383,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyMDQyODM4Mw==",
    "user": {
      "login": "pmart123",
      "id": 8962926,
      "node_id": "MDQ6VXNlcjg5NjI5MjY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/8962926?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pmart123",
      "html_url": "https://github.com/pmart123",
      "followers_url": "https://api.github.com/users/pmart123/followers",
      "following_url": "https://api.github.com/users/pmart123/following{/other_user}",
      "gists_url": "https://api.github.com/users/pmart123/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pmart123/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pmart123/subscriptions",
      "organizations_url": "https://api.github.com/users/pmart123/orgs",
      "repos_url": "https://api.github.com/users/pmart123/repos",
      "events_url": "https://api.github.com/users/pmart123/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pmart123/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-07-10T14:53:52Z",
    "updated_at": "2015-07-10T14:53:52Z",
    "author_association": "NONE",
    "body": "Yes, sorry, typo.  Yes, I can look through, and see if I can spot something.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/131888398",
    "html_url": "https://github.com/pandas-dev/pandas/issues/10538#issuecomment-131888398",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/10538",
    "id": 131888398,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMTg4ODM5OA==",
    "user": {
      "login": "pmart123",
      "id": 8962926,
      "node_id": "MDQ6VXNlcjg5NjI5MjY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/8962926?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pmart123",
      "html_url": "https://github.com/pmart123",
      "followers_url": "https://api.github.com/users/pmart123/followers",
      "following_url": "https://api.github.com/users/pmart123/following{/other_user}",
      "gists_url": "https://api.github.com/users/pmart123/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pmart123/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pmart123/subscriptions",
      "organizations_url": "https://api.github.com/users/pmart123/orgs",
      "repos_url": "https://api.github.com/users/pmart123/repos",
      "events_url": "https://api.github.com/users/pmart123/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pmart123/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-08-17T16:55:49Z",
    "updated_at": "2015-08-17T16:55:49Z",
    "author_association": "NONE",
    "body": "From stepping through the merge calls, in _MergeOperation.get_result, the call:\n\n``` python\n        result_data = concatenate_block_managers(\n            [(ldata, lindexers), (rdata, rindexers)],\n            axes=[llabels.append(rlabels), join_index],\n            concat_axis=0, copy=self.copy)\n```\n\nreturns a BlockManager with 'a1' as an index column.  Potentially, this could/should be remedied in the call:\n\n``` python\nself._maybe_add_join_keys(result, left_indexer, right_indexer)\n```\n\nIt looks like from the codebase, self._maybe_add_join_keys is the logical place we should swap the indexer?  Let me know if this is the case, and I can work on refactoring the conditional statements in the method.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/132551218",
    "html_url": "https://github.com/pandas-dev/pandas/issues/10538#issuecomment-132551218",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/10538",
    "id": 132551218,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMjU1MTIxOA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-08-19T11:17:21Z",
    "updated_at": "2015-08-19T11:17:21Z",
    "author_association": "CONTRIBUTOR",
    "body": "@pmart123 I disagree on this. If you want to set the index when you have certain values of `how`, e.g. `left|right`, then what is returned becomes very odd.\n\nyou should just do this.\n\n```\nIn [121]: df1.join(df2.set_index('a1'))\nOut[121]: \n     g  b\na        \nbb  10  2\nzz  20  7\ndd  30  3\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/132964587",
    "html_url": "https://github.com/pandas-dev/pandas/issues/10538#issuecomment-132964587",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/10538",
    "id": 132964587,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMjk2NDU4Nw==",
    "user": {
      "login": "pmart123",
      "id": 8962926,
      "node_id": "MDQ6VXNlcjg5NjI5MjY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/8962926?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pmart123",
      "html_url": "https://github.com/pmart123",
      "followers_url": "https://api.github.com/users/pmart123/followers",
      "following_url": "https://api.github.com/users/pmart123/following{/other_user}",
      "gists_url": "https://api.github.com/users/pmart123/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pmart123/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pmart123/subscriptions",
      "organizations_url": "https://api.github.com/users/pmart123/orgs",
      "repos_url": "https://api.github.com/users/pmart123/repos",
      "events_url": "https://api.github.com/users/pmart123/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pmart123/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-08-20T10:11:18Z",
    "updated_at": "2015-08-20T10:11:18Z",
    "author_association": "NONE",
    "body": "I disagree.  The current behavior is very inconsistent.  In the initial case I mentioned, the 'a' index is completely blown away, whereas:\n\n``` python\npd.merge(df1,df2.set_index('a1'),how='left',left_index=True,right_index=True)\nOut[92]: \n     g  b\na        \nbb  10  2\nzz  20  7\ndd  30  3\n```\n\nKeeps the index as the left DataFrame's name.  In one case, the left frame is taking precedence, and in the other case, the right frame is taking precedence. \n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/133001295",
    "html_url": "https://github.com/pandas-dev/pandas/issues/10538#issuecomment-133001295",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/10538",
    "id": 133001295,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMzAwMTI5NQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-08-20T13:04:03Z",
    "updated_at": "2015-08-20T13:05:08Z",
    "author_association": "CONTRIBUTOR",
    "body": "@pmart123 if you step thru the join, then you will see this is exactly the merge that is generated.\n\nif you want indexes set, then use `.join`, else use `.merge`. That is the distinction. Adding an ad-hoc hey this should set the indexes in certain situation is not constitent and would be wholly unexpected by users.\n"
  }
]
