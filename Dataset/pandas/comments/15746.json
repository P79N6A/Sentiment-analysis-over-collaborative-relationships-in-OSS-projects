[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/287833242",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15746#issuecomment-287833242",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15746",
    "id": 287833242,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NzgzMzI0Mg==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-20T17:22:23Z",
    "updated_at": "2017-03-20T17:22:23Z",
    "author_association": "CONTRIBUTOR",
    "body": "cc @pitrou\r\ncc @mrocklin"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/288028237",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15746#issuecomment-288028237",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15746",
    "id": 288028237,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4ODAyODIzNw==",
    "user": {
      "login": "pitrou",
      "id": 1721820,
      "node_id": "MDQ6VXNlcjE3MjE4MjA=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1721820?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pitrou",
      "html_url": "https://github.com/pitrou",
      "followers_url": "https://api.github.com/users/pitrou/followers",
      "following_url": "https://api.github.com/users/pitrou/following{/other_user}",
      "gists_url": "https://api.github.com/users/pitrou/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pitrou/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pitrou/subscriptions",
      "organizations_url": "https://api.github.com/users/pitrou/orgs",
      "repos_url": "https://api.github.com/users/pitrou/repos",
      "events_url": "https://api.github.com/users/pitrou/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pitrou/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-21T09:53:50Z",
    "updated_at": "2017-03-21T09:53:50Z",
    "author_association": "CONTRIBUTOR",
    "body": "I don't really understand the Pandas internals so I'd be hard-pressed to submit a solution here. Note you can use `weakref.proxy` instead of `weakref.ref` if you want to avoid writing `self.obj()` everywhere, though."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/289951390",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15746#issuecomment-289951390",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15746",
    "id": 289951390,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4OTk1MTM5MA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-29T01:07:16Z",
    "updated_at": "2017-03-29T01:07:16Z",
    "author_association": "CONTRIBUTOR",
    "body": "xref #10221 "
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/338682868",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15746#issuecomment-338682868",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15746",
    "id": 338682868,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzODY4Mjg2OA==",
    "user": {
      "login": "pitrou",
      "id": 1721820,
      "node_id": "MDQ6VXNlcjE3MjE4MjA=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1721820?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pitrou",
      "html_url": "https://github.com/pitrou",
      "followers_url": "https://api.github.com/users/pitrou/followers",
      "following_url": "https://api.github.com/users/pitrou/following{/other_user}",
      "gists_url": "https://api.github.com/users/pitrou/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pitrou/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pitrou/subscriptions",
      "organizations_url": "https://api.github.com/users/pitrou/orgs",
      "repos_url": "https://api.github.com/users/pitrou/repos",
      "events_url": "https://api.github.com/users/pitrou/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pitrou/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-23T14:45:39Z",
    "updated_at": "2017-10-23T14:45:39Z",
    "author_association": "CONTRIBUTOR",
    "body": "It seems it will be difficult to solve this while keeping both the caching and the requirement that an indexer still works after the user loses visible references to the dataframe.\r\n\r\nOne idea is to remove the caching and avoid a large performance loss by using a C (actually Cython, probably) constructor for `_NDFrameIndexer`. What do you think, @jreback ?"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/338683776",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15746#issuecomment-338683776",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15746",
    "id": 338683776,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzODY4Mzc3Ng==",
    "user": {
      "login": "pitrou",
      "id": 1721820,
      "node_id": "MDQ6VXNlcjE3MjE4MjA=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1721820?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pitrou",
      "html_url": "https://github.com/pitrou",
      "followers_url": "https://api.github.com/users/pitrou/followers",
      "following_url": "https://api.github.com/users/pitrou/following{/other_user}",
      "gists_url": "https://api.github.com/users/pitrou/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pitrou/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pitrou/subscriptions",
      "organizations_url": "https://api.github.com/users/pitrou/orgs",
      "repos_url": "https://api.github.com/users/pitrou/repos",
      "events_url": "https://api.github.com/users/pitrou/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pitrou/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-23T14:48:29Z",
    "updated_at": "2017-10-23T14:48:29Z",
    "author_association": "CONTRIBUTOR",
    "body": "Note about current performance:\r\n```\r\n>>> df = pd.DataFrame(data={'a': [1,2], 'b': [3,4]})\r\n>>> %timeit df.iloc\r\n323 ns ± 0.949 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each)\r\n>>> %timeit _iLocIndexer(df, 'iloc')\r\n1.07 µs ± 2.69 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each)\r\n```"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/338698478",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15746#issuecomment-338698478",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15746",
    "id": 338698478,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzODY5ODQ3OA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-23T15:31:55Z",
    "updated_at": "2017-10-23T15:31:55Z",
    "author_association": "CONTRIBUTOR",
    "body": "you could move this to cython, though I think you would have to move the entire hierarchy (e.g. most of core/indexing.py), so not sure this would be easy."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/338699828",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15746#issuecomment-338699828",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15746",
    "id": 338699828,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzODY5OTgyOA==",
    "user": {
      "login": "pitrou",
      "id": 1721820,
      "node_id": "MDQ6VXNlcjE3MjE4MjA=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1721820?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pitrou",
      "html_url": "https://github.com/pitrou",
      "followers_url": "https://api.github.com/users/pitrou/followers",
      "following_url": "https://api.github.com/users/pitrou/following{/other_user}",
      "gists_url": "https://api.github.com/users/pitrou/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pitrou/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pitrou/subscriptions",
      "organizations_url": "https://api.github.com/users/pitrou/orgs",
      "repos_url": "https://api.github.com/users/pitrou/repos",
      "events_url": "https://api.github.com/users/pitrou/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pitrou/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-23T15:35:49Z",
    "updated_at": "2017-10-23T15:35:49Z",
    "author_association": "CONTRIBUTOR",
    "body": "Actually, it seems only minimal changes are required:\r\nhttps://gist.github.com/pitrou/1556024bef72ac26c7848f6f1d7c3fa3\r\n\r\nPerformance with this patch:\r\n```\r\n>>> df = pd.DataFrame(data={'a': [1,2], 'b': [3,4]})\r\n>>> %timeit df.iloc\r\n204 ns ± 1.37 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each)\r\n```"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/339311425",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15746#issuecomment-339311425",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15746",
    "id": 339311425,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzOTMxMTQyNQ==",
    "user": {
      "login": "bluenote10",
      "id": 3620703,
      "node_id": "MDQ6VXNlcjM2MjA3MDM=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/3620703?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bluenote10",
      "html_url": "https://github.com/bluenote10",
      "followers_url": "https://api.github.com/users/bluenote10/followers",
      "following_url": "https://api.github.com/users/bluenote10/following{/other_user}",
      "gists_url": "https://api.github.com/users/bluenote10/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bluenote10/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bluenote10/subscriptions",
      "organizations_url": "https://api.github.com/users/bluenote10/orgs",
      "repos_url": "https://api.github.com/users/bluenote10/repos",
      "events_url": "https://api.github.com/users/bluenote10/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bluenote10/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-25T12:20:10Z",
    "updated_at": "2017-10-25T12:20:10Z",
    "author_association": "NONE",
    "body": "Any chance that the fix to this issue will still make it into the 0.21 release? I'm asking because we have run some tests with similar changes to #17956 and it looks like this solves all the GC (mem usage + fragmentation) issues we have encountered in the past. Thanks @pitrou for the effort to fix this!"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/339525224",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15746#issuecomment-339525224",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15746",
    "id": 339525224,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzOTUyNTIyNA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-26T01:46:56Z",
    "updated_at": "2017-10-26T01:46:56Z",
    "author_association": "CONTRIBUTOR",
    "body": "@bluenote10 no, if we were doing a rc2 it would. but ready to release. This is covered by our tests, but in theory is a pretty big change; needs to sit in master for a while. nothing stopping you from cherry-picking it to your build however."
  }
]
