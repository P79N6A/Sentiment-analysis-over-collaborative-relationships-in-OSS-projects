[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/125758857",
    "html_url": "https://github.com/pandas-dev/pandas/issues/10690#issuecomment-125758857",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/10690",
    "id": 125758857,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyNTc1ODg1Nw==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-07-28T21:29:26Z",
    "updated_at": "2015-07-28T21:29:32Z",
    "author_association": "CONTRIBUTOR",
    "body": "pls show a small but minimally reproducible example, along with `pd.show_versions()`\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/227655878",
    "html_url": "https://github.com/pandas-dev/pandas/issues/10690#issuecomment-227655878",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/10690",
    "id": 227655878,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyNzY1NTg3OA==",
    "user": {
      "login": "haleemur",
      "id": 6108231,
      "node_id": "MDQ6VXNlcjYxMDgyMzE=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/6108231?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/haleemur",
      "html_url": "https://github.com/haleemur",
      "followers_url": "https://api.github.com/users/haleemur/followers",
      "following_url": "https://api.github.com/users/haleemur/following{/other_user}",
      "gists_url": "https://api.github.com/users/haleemur/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/haleemur/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/haleemur/subscriptions",
      "organizations_url": "https://api.github.com/users/haleemur/orgs",
      "repos_url": "https://api.github.com/users/haleemur/repos",
      "events_url": "https://api.github.com/users/haleemur/events{/privacy}",
      "received_events_url": "https://api.github.com/users/haleemur/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-06-22T06:34:09Z",
    "updated_at": "2016-07-04T20:17:26Z",
    "author_association": "CONTRIBUTOR",
    "body": "I encountered the same problem, and then did some digging. The issue is reproduced with the following example.\n\n```\nimport pandas as pd\ndf = pd.DataFrame({'months': ['2015-01-01', '2015-10-10', '2016-01-01']})\ndf.months = pd.to_datetime(df.months)\ndf.to_html(formatters={'months': lambda x: x.strftime('%Y-%m')})\n```\n\nthis prints:\n\n```\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>months</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>2015-01-01</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>2015-10-10</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>2016-01-01</td>\n    </tr>\n  </tbody>\n</table>\n```\n\nAs you can see, the dates are not formatted using the specified function.\n\nThe class `pandas.formats.format.Datetime64Formatter` is responsible for the formatting, however it does nothing if a `formatter` is passed to it's init. Browsing through the file, I found a class `pandas.formats.format.Datetime64TZFormatter` which inherits from Datetime64Formatter, which does respect `formatter`.\n\n```\nfrom pandas.formats.format import Datetime64Formatter, Datetime64TZFormatter\n\nDatetime64TZFormatter(df.months, formatter=lambda x: x.strftime('%Y-%m')).get_result()\n#prints\n['2015-01', '2015-10, '2016-01']\n\nDatetime64Formatter(df.months, formatter=lambda x: x.strftime('%Y-%m')).get_result()\n#prints\n['2015-01-01', '2015-10-10', '2016-01-01']\n```\n\nI propose to change method `Datetime64Formatter._format_strings` from \n\n```\n    def _format_strings(self):\n        \"\"\" we by definition have DO NOT have a TZ \"\"\"\n\n        values = self.values\n        if not isinstance(values, DatetimeIndex):\n            values = DatetimeIndex(values)\n\n        fmt_values = format_array_from_datetime(\n            values.asi8.ravel(),\n            format=_get_format_datetime64_from_values(values,\n                                                      self.date_format),\n            na_rep=self.nat_rep).reshape(values.shape)\nreturn fmt_values.tolist()\n```\n\nto\n\n```\n    def _format_strings(self):\n        \"\"\" we by definition have DO NOT have a TZ \"\"\"\n\n       if self.formatter is not None:\n           return [formatter(x) for x in values]\n\n        values = self.values\n        if not isinstance(values, DatetimeIndex):\n            values = DatetimeIndex(values)\n\n        fmt_values = format_array_from_datetime(\n            values.asi8.ravel(),\n            format=_get_format_datetime64_from_values(values,\n                                                      self.date_format),\n            na_rep=self.nat_rep).reshape(values.shape)\nreturn fmt_values.tolist()\n```\n\nHere's the output of `pd.show_versions()` on my system.\n\n```\nINSTALLED VERSIONS\n------------------\ncommit: None\npython: 3.5.1.final.0\npython-bits: 64\nOS: Darwin\nOS-release: 15.3.0\nmachine: x86_64\nprocessor: i386\nbyteorder: little\nLC_ALL: None\nLANG: en_CA.UTF-8\n\npandas: 0.18.1\nnose: None\npip: 8.1.2\nsetuptools: 23.0.0\nCython: 0.24\nnumpy: 1.11.0\nscipy: 0.17.1\nstatsmodels: 0.6.1\nxarray: None\nIPython: 4.2.0\nsphinx: None\npatsy: 0.4.1\ndateutil: 2.5.3\npytz: 2016.4\nblosc: None\nbottleneck: None\ntables: None\nnumexpr: 2.6.0\nmatplotlib: 1.5.1\nopenpyxl: None\nxlrd: None\nxlwt: None\nxlsxwriter: None\nlxml: None\nbs4: None\nhtml5lib: None\nhttplib2: None\napiclient: None\nsqlalchemy: 1.0.13\npymysql: None\npsycopg2: 2.6.1 (dt dec pq3 ext lo64)\njinja2: 2.8\nboto: None\npandas_datareader: None\n```\n"
  }
]
