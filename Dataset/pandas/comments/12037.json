[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/171630971",
    "html_url": "https://github.com/pandas-dev/pandas/issues/12037#issuecomment-171630971",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/12037",
    "id": 171630971,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3MTYzMDk3MQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-01-14T12:24:54Z",
    "updated_at": "2016-01-14T12:24:54Z",
    "author_association": "CONTRIBUTOR",
    "body": "xref #9119 \n\ndoes look buggy. can you post an easily reproducible/simpler example that can be easily copy-pasted\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/171651774",
    "html_url": "https://github.com/pandas-dev/pandas/issues/12037#issuecomment-171651774",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/12037",
    "id": 171651774,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3MTY1MTc3NA==",
    "user": {
      "login": "marcelnem",
      "id": 6547340,
      "node_id": "MDQ6VXNlcjY1NDczNDA=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/6547340?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/marcelnem",
      "html_url": "https://github.com/marcelnem",
      "followers_url": "https://api.github.com/users/marcelnem/followers",
      "following_url": "https://api.github.com/users/marcelnem/following{/other_user}",
      "gists_url": "https://api.github.com/users/marcelnem/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/marcelnem/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/marcelnem/subscriptions",
      "organizations_url": "https://api.github.com/users/marcelnem/orgs",
      "repos_url": "https://api.github.com/users/marcelnem/repos",
      "events_url": "https://api.github.com/users/marcelnem/events{/privacy}",
      "received_events_url": "https://api.github.com/users/marcelnem/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-01-14T14:02:36Z",
    "updated_at": "2016-01-14T17:51:09Z",
    "author_association": "NONE",
    "body": "Here is reproducible/simpler example:\n\nrunning in ipython notebook and python 2\n\n```\nimport pandas as pd\nimport numpy as np\n\nstart=1443707890427\nend=1443916802040\ndif=end-start\nlength=1000\nnp.random.seed(seed=16516)\ntimestamps=np.random.random_integers(0,dif,length);\ntimestamps =timestamps+start\ntimestamps = np.sort(timestamps)\n\ndatetimes=pd.to_datetime(timestamps,unit=\"ms\")\nvalues = np.random.rand(length)\n\ndt_test=pd.DataFrame(values,columns=[\"value\"],index=datetimes)\nprint \"dt_test.head()\"\nprint dt_test.head()\nprint\n\nperiod_seconds=4.035752\nprint \"period_seconds\"\nprint period_seconds\nprint\nperiod_nanos=int(period_seconds*(10**9))\nprint \"period_nanos\"\nprint period_nanos\n\nres= dt_test.value.resample(pd.tseries.offsets.Nano(period_nanos), how=[np.min, np.max,'mean'])\n```\n\nOutput:\n\n```\ndt_test.head()\n                            value\n2015-10-01 13:59:11.020  0.795006\n2015-10-01 13:59:30.583  0.725395\n2015-10-01 14:01:31.597  0.731184\n2015-10-01 14:06:40.423  0.982237\n2015-10-01 14:08:28.432  0.014274\n\nperiod_seconds\n4.035752\n\nperiod_nanos\n4035751999\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n<ipython-input-11-f6df1fcb5427> in <module>()\n     27 print period_nanos\n     28 \n---> 29 res= dt_test.value.resample(pd.tseries.offsets.Nano(period_nanos), how=[np.min, np.max,'mean'])\n\nC:\\Users\\USER1\\Anaconda2\\lib\\site-packages\\pandas\\core\\generic.pyc in resample(self, rule, how, axis, fill_method, closed, label, convention, kind, loffset, limit, base)\n   3641                               fill_method=fill_method, convention=convention,\n   3642                               limit=limit, base=base)\n-> 3643         return sampler.resample(self).__finalize__(self)\n   3644 \n   3645     def first(self, offset):\n\nC:\\Users\\USER1\\Anaconda2\\lib\\site-packages\\pandas\\tseries\\resample.pyc in resample(self, obj)\n     80 \n     81         if isinstance(ax, DatetimeIndex):\n---> 82             rs = self._resample_timestamps()\n     83         elif isinstance(ax, PeriodIndex):\n     84             offset = to_offset(self.freq)\n\nC:\\Users\\USER1\\Anaconda2\\lib\\site-packages\\pandas\\tseries\\resample.pyc in _resample_timestamps(self, kind)\n    274         axlabels = self.ax\n    275 \n--> 276         self._get_binner_for_resample(kind=kind)\n    277         grouper = self.grouper\n    278         binner = self.binner\n\nC:\\Users\\USER1\\Anaconda2\\lib\\site-packages\\pandas\\tseries\\resample.pyc in _get_binner_for_resample(self, kind)\n    118             kind = self.kind\n    119         if kind is None or kind == 'timestamp':\n--> 120             self.binner, bins, binlabels = self._get_time_bins(ax)\n    121         elif kind == 'timedelta':\n    122             self.binner, bins, binlabels = self._get_time_delta_bins(ax)\n\nC:\\Users\\USER1\\Anaconda2\\lib\\site-packages\\pandas\\tseries\\resample.pyc in _get_time_bins(self, ax)\n    179 \n    180         # general version, knowing nothing about relative frequencies\n--> 181         bins = lib.generate_bins_dt64(ax_values, bin_edges, self.closed, hasnans=ax.hasnans)\n    182 \n    183         if self.closed == 'right':\n\npandas\\lib.pyx in pandas.lib.generate_bins_dt64 (pandas\\lib.c:20875)()\n\nValueError: Values falls after last bin\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/173221636",
    "html_url": "https://github.com/pandas-dev/pandas/issues/12037#issuecomment-173221636",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/12037",
    "id": 173221636,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3MzIyMTYzNg==",
    "user": {
      "login": "BranYang",
      "id": 4443076,
      "node_id": "MDQ6VXNlcjQ0NDMwNzY=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/4443076?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/BranYang",
      "html_url": "https://github.com/BranYang",
      "followers_url": "https://api.github.com/users/BranYang/followers",
      "following_url": "https://api.github.com/users/BranYang/following{/other_user}",
      "gists_url": "https://api.github.com/users/BranYang/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/BranYang/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/BranYang/subscriptions",
      "organizations_url": "https://api.github.com/users/BranYang/orgs",
      "repos_url": "https://api.github.com/users/BranYang/repos",
      "events_url": "https://api.github.com/users/BranYang/events{/privacy}",
      "received_events_url": "https://api.github.com/users/BranYang/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-01-20T14:33:07Z",
    "updated_at": "2016-01-20T14:33:07Z",
    "author_association": "CONTRIBUTOR",
    "body": "The issue is caused by line 164, 165 in pandas/tseries/resample.py\n\n``` python\nbinner = labels = DatetimeIndex(freq=self.freq,\n                                start=first.replace(tzinfo=None),\n                                # replace will truncate to millisecond \n                                end=last.replace(tzinfo=None),\n                                tz=tz,\n                                name=ax.name)\n```\n\nConsider this example\n\n``` python\nIn [1]: import pandas as pd\n\nIn [2]: from pandas.tseries.index import DatetimeIndex\n\nIn [3]: s_ns = 1443707950041939524\n\nIn [4]: itvl = 10**9\n\nIn [5]: e_ns = s_ns + itvl\n\nIn [6]: s = pd.Timestamp(s_ns).tz_localize(None)\n\nIn [7]: e = pd.Timestamp(e_ns).tz_localize(None)\n\nIn [8]: e\nOut[8]: Timestamp('2015-10-01 13:59:11.041939524')\n\nIn [9]: indx = DatetimeIndex(freq=pd.tseries.offsets.Nano(itvl/20),start=s, end=\ne,tz=None)\n\nIn [10]: indx[-1]\nOut[10]: Timestamp('2015-10-01 13:59:11.041939524', offset='50000000N')\n\nIn [11]: replaced = DatetimeIndex(freq=pd.tseries.offsets.Nano(itvl/20),start=s.\nreplace(tzinfo=None), end=e.replace(tzinfo=None),tz=None)\n\nIn [12]: replaced[-1]\nOut[12]: Timestamp('2015-10-01 13:59:11.041939', offset='50000000N')\n```\n\nThe last item clearly out of the bound if using replace.\nShould we consider not to use replace given its current behavior (i.e., throw away the nano second information)?\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/173242936",
    "html_url": "https://github.com/pandas-dev/pandas/issues/12037#issuecomment-173242936",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/12037",
    "id": 173242936,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3MzI0MjkzNg==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-01-20T15:40:45Z",
    "updated_at": "2016-01-20T15:41:02Z",
    "author_association": "CONTRIBUTOR",
    "body": "@BranYang hmm, that does look likely.\n\n`Timestamp.replace` is pretty naive in that it doesn't understand nanoseconds at all. So it indeed dropping the nanos.\n\nWhat you need to do is fix that as I believe this is a symptom of an invalid replace.\n\nwant to take a crack at it? looking `tslib.pyx/Timestamp`\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/173243623",
    "html_url": "https://github.com/pandas-dev/pandas/issues/12037#issuecomment-173243623",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/12037",
    "id": 173243623,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3MzI0MzYyMw==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-01-20T15:43:09Z",
    "updated_at": "2016-01-20T15:43:09Z",
    "author_association": "CONTRIBUTOR",
    "body": "a couple of other issues _might_ be showing similar symtoms, e.g. #6085 (and linked from there). If this proves to fix, we will want to add tests for those as well.\n"
  }
]
