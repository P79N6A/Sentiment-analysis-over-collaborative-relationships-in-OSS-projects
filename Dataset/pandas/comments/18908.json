[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/353723494",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18908#issuecomment-353723494",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18908",
    "id": 353723494,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MzcyMzQ5NA==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-23T12:25:00Z",
    "updated_at": "2017-12-23T12:25:00Z",
    "author_association": "CONTRIBUTOR",
    "body": "@Nemecsek could you clarify your example a bit? I don't see what melt has to do with anything. If it's just for constructing a DataFrame, perhaps you can construct it directly?\r\n\r\nAlso it's easier to follow if you don't overwrite variable. I think this should be the same as what you're doing, and the output looks correct. What did I miss?\r\n\r\n```python\r\nIn [1]: paste\r\nimport pandas as pd\r\nfrom datetime import datetime\r\n\r\ndf1 = pd.DataFrame({'dtime': [datetime(2017,1,1,1,5),\r\n                             datetime(2017,1,1,1,20)],\r\n                   'val1': [11, None],\r\n                   'val2': [None, 31]\r\n                  })\r\n\r\ndf2 = pd.DataFrame({'dtime': [datetime(2017,1,1,1,5),\r\n                             datetime(2017,1,1,1,20)],\r\n                   'val1': [11, None],\r\n                   'val2': [31, None]\r\n                  })\r\n\r\n\r\n\r\ndf12 = (df1.melt(\"dtime\")\r\n        .dropna()\r\n        .set_index(\"dtime\"))\r\n\r\ndf22 = (df2.melt(\"dtime\")\r\n        .dropna()\r\n        .set_index(\"dtime\"))\r\n\r\n\r\nr1 = df12.groupby(pd.Grouper(freq=\"1h\")).value.apply(lambda x: x.sort_values())\r\nr2 = df22.groupby(pd.Grouper(freq=\"1h\")).value.apply(lambda x: x.sort_values())\r\n\r\n## -- End pasted text --\r\n\r\nIn [2]: r1\r\nOut[2]:\r\ndtime\r\n2017-01-01 01:05:00    11.0\r\n2017-01-01 01:20:00    31.0\r\nName: value, dtype: float64\r\n\r\nIn [3]: r2\r\nOut[3]:\r\ndtime\r\n2017-01-01 01:05:00    11.0\r\n2017-01-01 01:05:00    31.0\r\nName: value, dtype: float64\r\n```"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/354985156",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18908#issuecomment-354985156",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18908",
    "id": 354985156,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NDk4NTE1Ng==",
    "user": {
      "login": "Nemecsek",
      "id": 25978536,
      "node_id": "MDQ6VXNlcjI1OTc4NTM2",
      "avatar_url": "https://avatars2.githubusercontent.com/u/25978536?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Nemecsek",
      "html_url": "https://github.com/Nemecsek",
      "followers_url": "https://api.github.com/users/Nemecsek/followers",
      "following_url": "https://api.github.com/users/Nemecsek/following{/other_user}",
      "gists_url": "https://api.github.com/users/Nemecsek/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Nemecsek/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Nemecsek/subscriptions",
      "organizations_url": "https://api.github.com/users/Nemecsek/orgs",
      "repos_url": "https://api.github.com/users/Nemecsek/repos",
      "events_url": "https://api.github.com/users/Nemecsek/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Nemecsek/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-03T10:56:56Z",
    "updated_at": "2018-01-03T11:22:54Z",
    "author_association": "NONE",
    "body": "@TomAugspurger , thank you for answering. I have been on holiday and had no possibility to check your answer before. Sorry for the delay.\r\n\r\nIt looks like the only thing you left out in your code is causing my problem: in `sort_values` you didn't add the `ascending=False` parameter.\r\n\r\nWhen you add `ascending=False`,  `r1` reads:\r\n```\r\ndtime                dtime              \r\n2017-01-01 01:00:00  2017-01-01 01:20:00    31.0\r\n                     2017-01-01 01:05:00    11.0\r\nName: value, dtype: float64\r\n```\r\nand `r2`:\r\n```\r\ndtime\r\n2017-01-01 01:05:00    31.0\r\n2017-01-01 01:05:00    11.0\r\nName: value, dtype: float64\r\n```\r\n\r\nWhy `r1` reads also the group time (`2017-01-01 01:00:00`, based on the hour) while `r2` doesn't? \r\nIs this just a representation problem? \r\n  "
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/357958115",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18908#issuecomment-357958115",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18908",
    "id": 357958115,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1Nzk1ODExNQ==",
    "user": {
      "login": "Nemecsek",
      "id": 25978536,
      "node_id": "MDQ6VXNlcjI1OTc4NTM2",
      "avatar_url": "https://avatars2.githubusercontent.com/u/25978536?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Nemecsek",
      "html_url": "https://github.com/Nemecsek",
      "followers_url": "https://api.github.com/users/Nemecsek/followers",
      "following_url": "https://api.github.com/users/Nemecsek/following{/other_user}",
      "gists_url": "https://api.github.com/users/Nemecsek/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Nemecsek/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Nemecsek/subscriptions",
      "organizations_url": "https://api.github.com/users/Nemecsek/orgs",
      "repos_url": "https://api.github.com/users/Nemecsek/repos",
      "events_url": "https://api.github.com/users/Nemecsek/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Nemecsek/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-16T13:24:07Z",
    "updated_at": "2018-01-16T13:24:07Z",
    "author_association": "NONE",
    "body": "Hi Tom. After almosta  month of silence I went on asking again on stackoverflow and they probably fixed the point. [Last comment of muskrat](https://stackoverflow.com/questions/48280456/pandas-groupby-different-indexes-returned/48282033#48282033) is interesting indeed: \r\n\r\n> As stated, I don't think it's a bug. That said, I agree with you that it's not necessarily the most natural design choice, as it leads to strange differences like the one you've found."
  }
]
