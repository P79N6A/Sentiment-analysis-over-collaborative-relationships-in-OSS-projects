[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/234341786",
    "html_url": "https://github.com/pandas-dev/pandas/issues/13743#issuecomment-234341786",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13743",
    "id": 234341786,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNDM0MTc4Ng==",
    "user": {
      "login": "martijnvermaat",
      "id": 623509,
      "node_id": "MDQ6VXNlcjYyMzUwOQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/623509?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/martijnvermaat",
      "html_url": "https://github.com/martijnvermaat",
      "followers_url": "https://api.github.com/users/martijnvermaat/followers",
      "following_url": "https://api.github.com/users/martijnvermaat/following{/other_user}",
      "gists_url": "https://api.github.com/users/martijnvermaat/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/martijnvermaat/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/martijnvermaat/subscriptions",
      "organizations_url": "https://api.github.com/users/martijnvermaat/orgs",
      "repos_url": "https://api.github.com/users/martijnvermaat/repos",
      "events_url": "https://api.github.com/users/martijnvermaat/events{/privacy}",
      "received_events_url": "https://api.github.com/users/martijnvermaat/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-07-21T18:28:50Z",
    "updated_at": "2016-07-21T18:28:50Z",
    "author_association": "NONE",
    "body": "I thought I'd quickly workaround it by converting the resulting `MultiIndex` to one with two `CategoricalIndex`s via `reset_index()` and `set_index()`, but it seems that `set_index` similarly forgets the column dtypes:\n\n``` python\nIn [6]: df.groupby(['a', 'b']).sum().reset_index().assign(\n   ...:     a=lambda df: df.a.astype('category', categories=list('xyz')),\n   ...:     b=lambda df: df.b.astype('category', categories=list('xyz'))\n   ...: ).set_index(['a', 'b']).reset_index().dtypes\nOut[6]: \na     object\nb     object\nc    float64\ndtype: object\n```\n\nSo I guess my bug report is now for `groupby` as well as for `set_index`.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/234826204",
    "html_url": "https://github.com/pandas-dev/pandas/issues/13743#issuecomment-234826204",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13743",
    "id": 234826204,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNDgyNjIwNA==",
    "user": {
      "login": "pijucha",
      "id": 9507544,
      "node_id": "MDQ6VXNlcjk1MDc1NDQ=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/9507544?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pijucha",
      "html_url": "https://github.com/pijucha",
      "followers_url": "https://api.github.com/users/pijucha/followers",
      "following_url": "https://api.github.com/users/pijucha/following{/other_user}",
      "gists_url": "https://api.github.com/users/pijucha/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pijucha/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pijucha/subscriptions",
      "organizations_url": "https://api.github.com/users/pijucha/orgs",
      "repos_url": "https://api.github.com/users/pijucha/repos",
      "events_url": "https://api.github.com/users/pijucha/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pijucha/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-07-25T03:00:47Z",
    "updated_at": "2016-07-25T03:00:47Z",
    "author_association": "CONTRIBUTOR",
    "body": "> I did see that the behaviour was discussed in a PR, but it ultimately was not addressed.\n\nI still have it in mind and will submit a fix soon.\n"
  }
]
