[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/451002859",
    "html_url": "https://github.com/pandas-dev/pandas/issues/24570#issuecomment-451002859",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/24570",
    "id": 451002859,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MTAwMjg1OQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-02T22:18:09Z",
    "updated_at": "2019-01-02T22:18:09Z",
    "author_association": "CONTRIBUTOR",
    "body": "can you provide an example that doesn't use an external package"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/451210156",
    "html_url": "https://github.com/pandas-dev/pandas/issues/24570#issuecomment-451210156",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/24570",
    "id": 451210156,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MTIxMDE1Ng==",
    "user": {
      "login": "xwang777",
      "id": 30608423,
      "node_id": "MDQ6VXNlcjMwNjA4NDIz",
      "avatar_url": "https://avatars2.githubusercontent.com/u/30608423?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/xwang777",
      "html_url": "https://github.com/xwang777",
      "followers_url": "https://api.github.com/users/xwang777/followers",
      "following_url": "https://api.github.com/users/xwang777/following{/other_user}",
      "gists_url": "https://api.github.com/users/xwang777/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/xwang777/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/xwang777/subscriptions",
      "organizations_url": "https://api.github.com/users/xwang777/orgs",
      "repos_url": "https://api.github.com/users/xwang777/repos",
      "events_url": "https://api.github.com/users/xwang777/events{/privacy}",
      "received_events_url": "https://api.github.com/users/xwang777/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-03T17:09:26Z",
    "updated_at": "2019-01-03T17:09:26Z",
    "author_association": "NONE",
    "body": "Sure. Here's the reduced example that only uses pandas and numpy. The exception is the same.\r\n\r\n```python\r\nimport pandas as pd \r\nimport numpy as np  \r\ntx = pd.timedelta_range('09:30:00','16:00:00', freq='30 min')       \r\n# ys is Series with MultiIndex, first level is Timedelta\r\nys = pd.DataFrame(np.random.randn(len(tx), 2), index=tx, columns = ('c0','c1')).set_index('c0', append=True)['c1']  \r\n# this is what sklearn.metrics would do\r\nhasattr(ys, 'fit')\r\n```\r\n### Output\r\nIn [4]: hasattr(ys, 'fit')                                                                                                                                                                                                                   \r\n---------------------------------------------------------------------------\r\nValueError                                Traceback (most recent call last)\r\n<ipython-input-4-029deeef9ea7> in <module>\r\n----> 1 hasattr(ys, 'fit')\r\n\r\n~/app/anaconda3/lib/python3.7/site-packages/pandas/core/generic.py in __getattr__(self, name)\r\n   4372             return object.__getattribute__(self, name)\r\n   4373         else:\r\n-> 4374             if self._info_axis._can_hold_identifiers_and_holds_name(name):\r\n   4375                 return self[name]\r\n   4376             return object.__getattribute__(self, name)\r\n\r\n~/app/anaconda3/lib/python3.7/site-packages/pandas/core/indexes/base.py in _can_hold_identifiers_and_holds_name(self, name)\r\n   2109         \"\"\"\r\n   2110         if self.is_object() or self.is_categorical():\r\n-> 2111             return name in self\r\n   2112         return False\r\n   2113 \r\n\r\n~/app/anaconda3/lib/python3.7/site-packages/pandas/core/indexes/multi.py in __contains__(self, key)\r\n    547         hash(key)\r\n    548         try:\r\n--> 549             self.get_loc(key)\r\n    550             return True\r\n    551         except (LookupError, TypeError):\r\n\r\n~/app/anaconda3/lib/python3.7/site-packages/pandas/core/indexes/multi.py in get_loc(self, key, method)\r\n   2235 \r\n   2236         if not isinstance(key, tuple):\r\n-> 2237             loc = self._get_level_indexer(key, level=0)\r\n   2238 \r\n   2239             # _get_level_indexer returns an empty slice if the key has\r\n\r\n~/app/anaconda3/lib/python3.7/site-packages/pandas/core/indexes/multi.py in _get_level_indexer(self, key, level, indexer)\r\n   2494         else:\r\n   2495 \r\n-> 2496             loc = level_index.get_loc(key)\r\n   2497             if isinstance(loc, slice):\r\n   2498                 return loc\r\n\r\n~/app/anaconda3/lib/python3.7/site-packages/pandas/core/indexes/timedeltas.py in get_loc(self, key, method, tolerance)\r\n    783 \r\n    784         if _is_convertible_to_td(key):\r\n--> 785             key = Timedelta(key)\r\n    786             return Index.get_loc(self, key, method, tolerance)\r\n    787 \r\n\r\npandas/_libs/tslibs/timedeltas.pyx in pandas._libs.tslibs.timedeltas.Timedelta.__new__()\r\n\r\npandas/_libs/tslibs/timedeltas.pyx in pandas._libs.tslibs.timedeltas.parse_timedelta_string()\r\n\r\nValueError: unit abbreviation w/o a number\r\n\r\n\r\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/451221382",
    "html_url": "https://github.com/pandas-dev/pandas/issues/24570#issuecomment-451221382",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/24570",
    "id": 451221382,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MTIyMTM4Mg==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-03T17:45:50Z",
    "updated_at": "2019-01-03T17:45:50Z",
    "author_association": "CONTRIBUTOR",
    "body": "can you edit the example at the top with this"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/451221921",
    "html_url": "https://github.com/pandas-dev/pandas/issues/24570#issuecomment-451221921",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/24570",
    "id": 451221921,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MTIyMTkyMQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-03T17:47:57Z",
    "updated_at": "2019-01-03T17:47:57Z",
    "author_association": "CONTRIBUTOR",
    "body": "yeah this should be handled here:\r\n\r\n```\r\n~/pandas/pandas/core/indexes/timedeltas.py in get_loc(self, key, method, tolerance)\r\n    546 \r\n    547         if _is_convertible_to_td(key):\r\n--> 548             key = Timedelta(key)\r\n    549             return Index.get_loc(self, key, method, tolerance)\r\n    550 \r\n\r\n~/pandas/pandas/_libs/tslibs/timedeltas.pyx in pandas._libs.tslibs.timedeltas.Timedelta.__new__()\r\n```\r\n\r\nwhere if the conversion fails (e.g. put a try/except ValueError) around this.\r\n\r\nPRs welcome."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/451231940",
    "html_url": "https://github.com/pandas-dev/pandas/issues/24570#issuecomment-451231940",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/24570",
    "id": 451231940,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MTIzMTk0MA==",
    "user": {
      "login": "xwang777",
      "id": 30608423,
      "node_id": "MDQ6VXNlcjMwNjA4NDIz",
      "avatar_url": "https://avatars2.githubusercontent.com/u/30608423?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/xwang777",
      "html_url": "https://github.com/xwang777",
      "followers_url": "https://api.github.com/users/xwang777/followers",
      "following_url": "https://api.github.com/users/xwang777/following{/other_user}",
      "gists_url": "https://api.github.com/users/xwang777/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/xwang777/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/xwang777/subscriptions",
      "organizations_url": "https://api.github.com/users/xwang777/orgs",
      "repos_url": "https://api.github.com/users/xwang777/repos",
      "events_url": "https://api.github.com/users/xwang777/events{/privacy}",
      "received_events_url": "https://api.github.com/users/xwang777/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-03T18:22:59Z",
    "updated_at": "2019-01-03T18:22:59Z",
    "author_association": "NONE",
    "body": "OK, I updated the example and output in the first comment.\r\n\r\nRegarding the fix, why not try-catch Exception in the _can_hold_identifiers_and_holds_name function? This example is caused by Timedelta, but it could very well be caused by Timestamp, or any other types that fail to be constructed from a str."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/451238765",
    "html_url": "https://github.com/pandas-dev/pandas/issues/24570#issuecomment-451238765",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/24570",
    "id": 451238765,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MTIzODc2NQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-03T18:46:58Z",
    "updated_at": "2019-01-03T18:47:06Z",
    "author_association": "CONTRIBUTOR",
    "body": "yes u can try that see if anything breaks"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/453120024",
    "html_url": "https://github.com/pandas-dev/pandas/issues/24570#issuecomment-453120024",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/24570",
    "id": 453120024,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MzEyMDAyNA==",
    "user": {
      "login": "xwang777",
      "id": 30608423,
      "node_id": "MDQ6VXNlcjMwNjA4NDIz",
      "avatar_url": "https://avatars2.githubusercontent.com/u/30608423?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/xwang777",
      "html_url": "https://github.com/xwang777",
      "followers_url": "https://api.github.com/users/xwang777/followers",
      "following_url": "https://api.github.com/users/xwang777/following{/other_user}",
      "gists_url": "https://api.github.com/users/xwang777/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/xwang777/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/xwang777/subscriptions",
      "organizations_url": "https://api.github.com/users/xwang777/orgs",
      "repos_url": "https://api.github.com/users/xwang777/repos",
      "events_url": "https://api.github.com/users/xwang777/events{/privacy}",
      "received_events_url": "https://api.github.com/users/xwang777/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-10T14:45:42Z",
    "updated_at": "2019-01-10T14:45:42Z",
    "author_association": "NONE",
    "body": "The patch is very simple, I could create pull request easily. However, the tests (python setup.py test) failed right away, but not due to my changes. Anyone please tell me where the problem might be? Thanks\r\n\r\n### run test output\r\n(pandas-dev) [02:19:47|xwang0-el7 pandas-xw]$ python setup.py  test\r\nrunning test\r\nrunning egg_info\r\nwriting pandas.egg-info/PKG-INFO\r\nwriting dependency_links to pandas.egg-info/dependency_links.txt\r\nwriting requirements to pandas.egg-info/requires.txt\r\nwriting top-level names to pandas.egg-info/top_level.txt\r\nreading manifest file 'pandas.egg-info/SOURCES.txt'\r\nreading manifest template 'MANIFEST.in'\r\nno previously-included directories found matching 'doc/build'\r\nwarning: no previously-included files matching '*.pyd' found anywhere in distribution\r\nwarning: no previously-included files matching '*~' found anywhere in distribution\r\nwarning: no previously-included files matching '.DS_Store' found anywhere in distribution\r\nwarning: no previously-included files matching '.git*' found anywhere in distribution\r\nwarning: no previously-included files matching '#*' found anywhere in distribution\r\nwriting manifest file 'pandas.egg-info/SOURCES.txt'\r\nrunning build_ext\r\n/home/xwang/app/anaconda2/envs/pandas-dev/lib/python3.7/unittest/loader.py:154: FutureWarning: 'pandas.core' is private. Use 'pandas.Categorical'\r\n  module = __import__(module_name)\r\nTraceback (most recent call last):\r\n  File \"setup.py\", line 743, in <module>\r\n    **setuptools_kwargs)\r\n  File \"/home/xwang/app/anaconda2/envs/pandas-dev/lib/python3.7/site-packages/setuptools/__init__.py\", line 143, in setup\r\n    return distutils.core.setup(**attrs)\r\n  File \"/home/xwang/app/anaconda2/envs/pandas-dev/lib/python3.7/distutils/core.py\", line 148, in setup\r\n    dist.run_commands()\r\n  File \"/home/xwang/app/anaconda2/envs/pandas-dev/lib/python3.7/distutils/dist.py\", line 966, in run_commands\r\n    self.run_command(cmd)\r\n  File \"/home/xwang/app/anaconda2/envs/pandas-dev/lib/python3.7/distutils/dist.py\", line 985, in run_command\r\n    cmd_obj.run()\r\n  File \"/home/xwang/app/anaconda2/envs/pandas-dev/lib/python3.7/site-packages/setuptools/command/test.py\", line 228, in run\r\n    self.run_tests()\r\n  File \"/home/xwang/app/anaconda2/envs/pandas-dev/lib/python3.7/site-packages/setuptools/command/test.py\", line 250, in run_tests\r\n    exit=False,\r\n  File \"/home/xwang/app/anaconda2/envs/pandas-dev/lib/python3.7/unittest/main.py\", line 100, in __init__\r\n    self.parseArgs(argv)\r\n  File \"/home/xwang/app/anaconda2/envs/pandas-dev/lib/python3.7/unittest/main.py\", line 124, in parseArgs\r\n    self._do_discovery(argv[2:])\r\n  File \"/home/xwang/app/anaconda2/envs/pandas-dev/lib/python3.7/unittest/main.py\", line 244, in _do_discovery\r\n    self.createTests(from_discovery=True, Loader=Loader)\r\n  File \"/home/xwang/app/anaconda2/envs/pandas-dev/lib/python3.7/unittest/main.py\", line 154, in createTests\r\n    self.test = loader.discover(self.start, self.pattern, self.top)\r\n  File \"/home/xwang/app/anaconda2/envs/pandas-dev/lib/python3.7/unittest/loader.py\", line 347, in discover\r\n    tests = list(self._find_tests(start_dir, pattern))\r\n  File \"/home/xwang/app/anaconda2/envs/pandas-dev/lib/python3.7/unittest/loader.py\", line 404, in _find_tests\r\n    full_path, pattern, namespace)\r\n  File \"/home/xwang/app/anaconda2/envs/pandas-dev/lib/python3.7/unittest/loader.py\", line 481, in _find_test_path\r\n    tests = self.loadTestsFromModule(package, pattern=pattern)\r\n  File \"/home/xwang/app/anaconda2/envs/pandas-dev/lib/python3.7/site-packages/setuptools/command/test.py\", line 54, in loadTestsFromModule\r\n    tests.append(self.loadTestsFromName(submodule))\r\n  File \"/home/xwang/app/anaconda2/envs/pandas-dev/lib/python3.7/unittest/loader.py\", line 191, in loadTestsFromName\r\n    return self.loadTestsFromModule(obj)\r\n  File \"/home/xwang/app/anaconda2/envs/pandas-dev/lib/python3.7/site-packages/setuptools/command/test.py\", line 54, in loadTestsFromModule\r\n    tests.append(self.loadTestsFromName(submodule))\r\n  File \"/home/xwang/app/anaconda2/envs/pandas-dev/lib/python3.7/unittest/loader.py\", line 191, in loadTestsFromName\r\n    return self.loadTestsFromModule(obj)\r\n  File \"/home/xwang/app/anaconda2/envs/pandas-dev/lib/python3.7/site-packages/setuptools/command/test.py\", line 54, in loadTestsFromModule\r\n    tests.append(self.loadTestsFromName(submodule))\r\n  File \"/home/xwang/app/anaconda2/envs/pandas-dev/lib/python3.7/unittest/loader.py\", line 191, in loadTestsFromName\r\n    return self.loadTestsFromModule(obj)\r\n  File \"/home/xwang/app/anaconda2/envs/pandas-dev/lib/python3.7/site-packages/setuptools/command/test.py\", line 54, in loadTestsFromModule\r\n    tests.append(self.loadTestsFromName(submodule))\r\n  File \"/home/xwang/app/anaconda2/envs/pandas-dev/lib/python3.7/unittest/loader.py\", line 154, in loadTestsFromName\r\n    module = __import__(module_name)\r\n  File \"/home/xwang/dev/pandas-xw/pandas/tests/indexes/datetimes/test_misc.py\", line 91, in <module>\r\n    class TestDatetime64(object):\r\n  File \"/home/xwang/dev/pandas-xw/pandas/tests/indexes/datetimes/test_misc.py\", line 246, in TestDatetime64\r\n    None] if tm.get_locales() is None else [None] + tm.get_locales())\r\n  File \"/home/xwang/dev/pandas-xw/pandas/util/testing.py\", line 516, in get_locales\r\n    x, encoding=pd.options.display.encoding))\r\nUnicodeDecodeError: 'utf-8' codec can't decode byte 0xe5 in position 4: invalid continuation byte\r\n\r\n\r\nI forked from master, here's the top of my 'git log --name-status' output:\r\n### git log --name-status\r\ncommit 6f9ab145d72631a97666b486cbbeb8929b9a41e4\r\nAuthor: xwang777 <30608423+xwang777@users.noreply.github.com>\r\nDate:   Tue Jan 8 13:52:31 2019 -0500\r\n\r\n    Address issue 24570\r\n\r\nM       pandas/core/indexes/base.py\r\n\r\ncommit f57bd72310207b36e96604056f01cb77f0640b3b\r\nAuthor: Simon Hawkins <simonjayhawkins@gmail.com>\r\nDate:   Tue Jan 8 13:07:49 2019 +0000\r\n\r\n    REF: io/formats/html.py (and io/formats/format.py) (#24651)\r\n\r\nM       pandas/io/formats/format.py\r\nM       pandas/io/formats/html.py\r\n\r\n\r\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/461346628",
    "html_url": "https://github.com/pandas-dev/pandas/issues/24570#issuecomment-461346628",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/24570",
    "id": 461346628,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2MTM0NjYyOA==",
    "user": {
      "login": "optilude",
      "id": 160906,
      "node_id": "MDQ6VXNlcjE2MDkwNg==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/160906?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/optilude",
      "html_url": "https://github.com/optilude",
      "followers_url": "https://api.github.com/users/optilude/followers",
      "following_url": "https://api.github.com/users/optilude/following{/other_user}",
      "gists_url": "https://api.github.com/users/optilude/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/optilude/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/optilude/subscriptions",
      "organizations_url": "https://api.github.com/users/optilude/orgs",
      "repos_url": "https://api.github.com/users/optilude/repos",
      "events_url": "https://api.github.com/users/optilude/events{/privacy}",
      "received_events_url": "https://api.github.com/users/optilude/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-07T09:32:58Z",
    "updated_at": "2019-02-07T09:32:58Z",
    "author_association": "NONE",
    "body": "I was about to raise an issue for a problem with `pivot_table()`, but I believe it's the same bug. The relevant code is:\r\n\r\n```python\r\n        chart_data.pivot_table(\r\n            index='age',\r\n            columns='priority',\r\n            values='key',\r\n            aggfunc='count'\r\n        )\r\n```\r\n\r\nHere `chart_data` is a `DataFrame` with columns `age` (a `Timedelta`), `priority` (a string), and `key` (another string). There are no N/A values in any of those columns.\r\n\r\nBefore upgrading to Pandas 0.24.1 this worked. It now throws:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3.6/site-packages/jira_agile_metrics/calculator.py\", line 56, in run_calculators\r\n    c.write()\r\n  File \"/usr/lib/python3.6/site-packages/jira_agile_metrics/calculators/debt.py\", line 83, in write\r\n    self.write_debt_age_chart(chart_data, self.settings['debt_age_chart'])\r\n  File \"/usr/lib/python3.6/site-packages/jira_agile_metrics/calculators/debt.py\", line 132, in write_debt_age_chart\r\n    aggfunc='count'\r\n  File \"/usr/lib/python3.6/site-packages/pandas/core/frame.py\", line 5759, in pivot_table\r\n    margins_name=margins_name)\r\n  File \"/usr/lib/python3.6/site-packages/pandas/core/reshape/pivot.py\", line 84, in pivot_table\r\n    agged = agged.dropna(how='all')\r\n  File \"/usr/lib/python3.6/site-packages/pandas/core/frame.py\", line 4598, in dropna\r\n    result = self.loc(axis=axis)[mask]\r\n  File \"/usr/lib/python3.6/site-packages/pandas/core/indexing.py\", line 1500, in __getitem__\r\n    return self._getitem_axis(maybe_callable, axis=axis)\r\n  File \"/usr/lib/python3.6/site-packages/pandas/core/indexing.py\", line 1859, in _getitem_axis\r\n    if is_iterator(key):\r\n  File \"/usr/lib/python3.6/site-packages/pandas/core/dtypes/inference.py\", line 157, in is_iterator\r\n    return hasattr(obj, '__next__')\r\n  File \"/usr/lib/python3.6/site-packages/pandas/core/generic.py\", line 5065, in __getattr__\r\n    if self._info_axis._can_hold_identifiers_and_holds_name(name):\r\n  File \"/usr/lib/python3.6/site-packages/pandas/core/indexes/base.py\", line 3984, in _can_hold_identifiers_and_holds_name\r\n    return name in self\r\n  File \"/usr/lib/python3.6/site-packages/pandas/core/indexes/multi.py\", line 841, in __contains__\r\n    self.get_loc(key)\r\n  File \"/usr/lib/python3.6/site-packages/pandas/core/indexes/multi.py\", line 2397, in get_loc\r\n    loc = self._get_level_indexer(key, level=0)\r\n  File \"/usr/lib/python3.6/site-packages/pandas/core/indexes/multi.py\", line 2652, in _get_level_indexer\r\n    code = level_index.get_loc(key)\r\n  File \"/usr/lib/python3.6/site-packages/pandas/core/indexes/timedeltas.py\", line 548, in get_loc\r\n    key = Timedelta(key)\r\n  File \"pandas/_libs/tslibs/timedeltas.pyx\", line 1167, in pandas._libs.tslibs.timedeltas.Timedelta.__new__\r\n  File \"pandas/_libs/tslibs/timedeltas.pyx\", line 463, in pandas._libs.tslibs.timedeltas.parse_timedelta_string\r\nValueError: unit abbreviation w/o a number\r\n```\r\n\r\nIf I change the `pivot_table` call by swapping `index` and `columns` (so `index=\"priority\", columns=\"age\"`), it no longer throws."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/461394726",
    "html_url": "https://github.com/pandas-dev/pandas/issues/24570#issuecomment-461394726",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/24570",
    "id": 461394726,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2MTM5NDcyNg==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-07T12:11:22Z",
    "updated_at": "2019-02-07T12:11:22Z",
    "author_association": "MEMBER",
    "body": "@optilude can you try to give a small reproducible example? (eg by creating a dummy dataframe with the specific dtypes you have that shows the problem)"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/461413871",
    "html_url": "https://github.com/pandas-dev/pandas/issues/24570#issuecomment-461413871",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/24570",
    "id": 461413871,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2MTQxMzg3MQ==",
    "user": {
      "login": "optilude",
      "id": 160906,
      "node_id": "MDQ6VXNlcjE2MDkwNg==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/160906?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/optilude",
      "html_url": "https://github.com/optilude",
      "followers_url": "https://api.github.com/users/optilude/followers",
      "following_url": "https://api.github.com/users/optilude/following{/other_user}",
      "gists_url": "https://api.github.com/users/optilude/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/optilude/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/optilude/subscriptions",
      "organizations_url": "https://api.github.com/users/optilude/orgs",
      "repos_url": "https://api.github.com/users/optilude/repos",
      "events_url": "https://api.github.com/users/optilude/events{/privacy}",
      "received_events_url": "https://api.github.com/users/optilude/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-07T13:15:00Z",
    "updated_at": "2019-02-07T13:22:14Z",
    "author_association": "NONE",
    "body": "Sure:\r\n\r\n```python\r\nimport pandas as pd\r\ndf = pd.DataFrame({\r\n    'key': ['A', 'B', 'C'],\r\n    'age': [pd.Timedelta('1 days'), pd.Timedelta('2 days'), pd.Timedelta('2 days')],\r\n    'priority':  ['Low', 'Low', 'High']})\r\ndf.pivot_table(index='age', columns='priority', values='key', aggfunc='count')\r\n```\r\n\r\nThrows:\r\n\r\n```\r\nValueError: unit abbreviation w/o a number\r\n```"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/461419954",
    "html_url": "https://github.com/pandas-dev/pandas/issues/24570#issuecomment-461419954",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/24570",
    "id": 461419954,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2MTQxOTk1NA==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-07T13:32:45Z",
    "updated_at": "2019-02-07T13:32:45Z",
    "author_association": "MEMBER",
    "body": "OK, thanks. I can confirm the regression. It looks similar in underlying reason as https://github.com/pandas-dev/pandas/issues/25087, another reported regression."
  }
]
