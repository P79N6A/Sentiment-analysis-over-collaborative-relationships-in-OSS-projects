[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/35033583",
    "html_url": "https://github.com/pandas-dev/pandas/issues/6345#issuecomment-35033583",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/6345",
    "id": 35033583,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MDMzNTgz",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-02-13T22:22:06Z",
    "updated_at": "2014-02-13T22:22:18Z",
    "author_association": "CONTRIBUTOR",
    "body": "@hayd \n\n`df3.where(df3<5000,np.nan,inplace=True)`\n\nis the same (and is implemented) like this:\n\n`df3[df3<5000] = np.nan`\n\ntheir certianly could be a coercion bug in this (as this boils down to `Block.where` to actually do this and it has to coerce inputs and outputs (or attempt to anyhow)\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/35034867",
    "html_url": "https://github.com/pandas-dev/pandas/issues/6345#issuecomment-35034867",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/6345",
    "id": 35034867,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MDM0ODY3",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-02-13T22:36:05Z",
    "updated_at": "2014-02-13T22:36:05Z",
    "author_association": "CONTRIBUTOR",
    "body": "@hayd if you have the test frame for this example would be great (or a simple one too that reproduces)\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/35035272",
    "html_url": "https://github.com/pandas-dev/pandas/issues/6345#issuecomment-35035272",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/6345",
    "id": 35035272,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MDM1Mjcy",
    "user": {
      "login": "hayd",
      "id": 1931852,
      "node_id": "MDQ6VXNlcjE5MzE4NTI=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1931852?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hayd",
      "html_url": "https://github.com/hayd",
      "followers_url": "https://api.github.com/users/hayd/followers",
      "following_url": "https://api.github.com/users/hayd/following{/other_user}",
      "gists_url": "https://api.github.com/users/hayd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hayd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hayd/subscriptions",
      "organizations_url": "https://api.github.com/users/hayd/orgs",
      "repos_url": "https://api.github.com/users/hayd/repos",
      "events_url": "https://api.github.com/users/hayd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hayd/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-02-13T22:40:47Z",
    "updated_at": "2014-02-13T22:43:47Z",
    "author_association": "CONTRIBUTOR",
    "body": "Sure thing:\n\n```\nIn [11]: df = DataFrame([[1+1j, 2], [5+1j, 4+1j]], columns=['a', 'b'])\n\nIn [12]: df[df.abs() >= 5] = np.nan\n\nIn [13]: df\nOut[13]:\n    a       b\n0   1  (2+0j)\n1 NaN  (4+1j)\n\nIn [14]: df.a.dtype  # expected complex128 (that of df.b.dtype)\nOut[14]: dtype('float64')\n\nexpected =  DataFrame([[1+1j, 2], [np.nan, 4+1j]], columns=['a', 'b'])\n```\n\nthis demonstrates for where too:\n\n```\nIn [15]: df.where(df <= 5)  # works correctly\nOut[15]:\n        a       b\n0  (1+1j)  (2+0j)\n1     NaN  (4+1j)\n\nIn [16]: df.where(df <= 5, inplace=True)\n\nIn [17]: df\nOut[17]:\n    a       b\n0   1  (2+0j)\n1 NaN  (4+1j)\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/35037200",
    "html_url": "https://github.com/pandas-dev/pandas/issues/6345#issuecomment-35037200",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/6345",
    "id": 35037200,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MDM3MjAw",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-02-13T23:01:17Z",
    "updated_at": "2014-02-13T23:01:17Z",
    "author_association": "CONTRIBUTOR",
    "body": "was basically a 1-line change (a long line!) hahah\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/35058096",
    "html_url": "https://github.com/pandas-dev/pandas/issues/6345#issuecomment-35058096",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/6345",
    "id": 35058096,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MDU4MDk2",
    "user": {
      "login": "schodge",
      "id": 4616123,
      "node_id": "MDQ6VXNlcjQ2MTYxMjM=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/4616123?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/schodge",
      "html_url": "https://github.com/schodge",
      "followers_url": "https://api.github.com/users/schodge/followers",
      "following_url": "https://api.github.com/users/schodge/following{/other_user}",
      "gists_url": "https://api.github.com/users/schodge/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/schodge/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/schodge/subscriptions",
      "organizations_url": "https://api.github.com/users/schodge/orgs",
      "repos_url": "https://api.github.com/users/schodge/repos",
      "events_url": "https://api.github.com/users/schodge/events{/privacy}",
      "received_events_url": "https://api.github.com/users/schodge/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-02-14T05:44:27Z",
    "updated_at": "2014-02-14T05:44:27Z",
    "author_association": "NONE",
    "body": "Following up on a later comment I left on SO (was the original question-asker of the above link), the NaN assigned is `NaN + 0j`, which means taking np.imag() of the value gives you `0.0` instead of `NaN`.  Would it make more sense for pandas to return `np.nan + 0j*np.nan`?\n\n```\n>>> a = np.nan + 0j\n>>> a\n(nan+0j)\n>>> np.real(a)\narray(nan)\n>>> np.imag(a)\narray(0.0)\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/35079409",
    "html_url": "https://github.com/pandas-dev/pandas/issues/6345#issuecomment-35079409",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/6345",
    "id": 35079409,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MDc5NDA5",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-02-14T12:31:25Z",
    "updated_at": "2014-02-14T12:31:25Z",
    "author_association": "CONTRIBUTOR",
    "body": "no; the `nan` represents a missing value, which is distinct from `np.nan + 0j*np.nan`. It should be ignored in operations on the frame . can you try out an operation you are doing and confirm ?\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/35115063",
    "html_url": "https://github.com/pandas-dev/pandas/issues/6345#issuecomment-35115063",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/6345",
    "id": 35115063,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MTE1MDYz",
    "user": {
      "login": "schodge",
      "id": 4616123,
      "node_id": "MDQ6VXNlcjQ2MTYxMjM=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/4616123?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/schodge",
      "html_url": "https://github.com/schodge",
      "followers_url": "https://api.github.com/users/schodge/followers",
      "following_url": "https://api.github.com/users/schodge/following{/other_user}",
      "gists_url": "https://api.github.com/users/schodge/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/schodge/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/schodge/subscriptions",
      "organizations_url": "https://api.github.com/users/schodge/orgs",
      "repos_url": "https://api.github.com/users/schodge/repos",
      "events_url": "https://api.github.com/users/schodge/events{/privacy}",
      "received_events_url": "https://api.github.com/users/schodge/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-02-14T19:15:54Z",
    "updated_at": "2014-02-14T19:15:54Z",
    "author_association": "NONE",
    "body": "Using the frame df @hayd provided above.  It works while you're operating on the dataframe, but if you use `.values`, you get anomalous results operating on the numpy array - I would expect the last value to be `[1. nan]` not `[1. 0]`.\n\n```\ndf = DataFrame([[1+1j, 2], [5+1j, 4+1j]], columns=['a', 'b'])\ndf2 = df.where(df <= 5)\nprint df2['a'].real\nprint df2['a'].imag\ntemp = df2['a'].values\nprint temp\n# Same results with np.real(temp) / np.imag(temp)\nprint temp.real\nprint temp.imag\n#Output  \n[  1.  nan]\n[ 1.  0.]\n[  1.+1.j  nan+0.j]\n[  1.  nan]\n[ 1.  0.]\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/35115767",
    "html_url": "https://github.com/pandas-dev/pandas/issues/6345#issuecomment-35115767",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/6345",
    "id": 35115767,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MTE1NzY3",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-02-14T19:23:39Z",
    "updated_at": "2014-02-14T19:25:30Z",
    "author_association": "CONTRIBUTOR",
    "body": "The point of `where` IS to introduce `nan` by definition\n\nThe values in (1,a) is missing, not a complex (or any other value)\n\nYou prob want to fill it \n\n```\nIn [11]: df2.fillna(0+0j)\nOut[11]: \n        a       b\n0  (1+1j)  (2+0j)\n1      0j  (4+1j)\n\n[2 rows x 2 columns]\n\n```\n\n```\nIn [18]: df2.fillna(0+0j,inplace=True)\n\nIn [19]: temp = df2['a'].values\n\nIn [20]: print temp.real\n[ 1.  0.]\n\nIn [21]: print temp.imag\n[ 1.  0.]\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/35119689",
    "html_url": "https://github.com/pandas-dev/pandas/issues/6345#issuecomment-35119689",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/6345",
    "id": 35119689,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MTE5Njg5",
    "user": {
      "login": "hayd",
      "id": 1931852,
      "node_id": "MDQ6VXNlcjE5MzE4NTI=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1931852?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hayd",
      "html_url": "https://github.com/hayd",
      "followers_url": "https://api.github.com/users/hayd/followers",
      "following_url": "https://api.github.com/users/hayd/following{/other_user}",
      "gists_url": "https://api.github.com/users/hayd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hayd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hayd/subscriptions",
      "organizations_url": "https://api.github.com/users/hayd/orgs",
      "repos_url": "https://api.github.com/users/hayd/repos",
      "events_url": "https://api.github.com/users/hayd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hayd/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-02-14T20:06:46Z",
    "updated_at": "2014-02-14T20:06:46Z",
    "author_association": "CONTRIBUTOR",
    "body": "The default where replace value is nan, so this is expected/correct. You should be explicit about what you want to replace it with `.where(df <=5, nan + 1j * nan)`.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/35140391",
    "html_url": "https://github.com/pandas-dev/pandas/issues/6345#issuecomment-35140391",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/6345",
    "id": 35140391,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MTQwMzkx",
    "user": {
      "login": "schodge",
      "id": 4616123,
      "node_id": "MDQ6VXNlcjQ2MTYxMjM=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/4616123?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/schodge",
      "html_url": "https://github.com/schodge",
      "followers_url": "https://api.github.com/users/schodge/followers",
      "following_url": "https://api.github.com/users/schodge/following{/other_user}",
      "gists_url": "https://api.github.com/users/schodge/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/schodge/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/schodge/subscriptions",
      "organizations_url": "https://api.github.com/users/schodge/orgs",
      "repos_url": "https://api.github.com/users/schodge/repos",
      "events_url": "https://api.github.com/users/schodge/events{/privacy}",
      "received_events_url": "https://api.github.com/users/schodge/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-02-14T23:57:41Z",
    "updated_at": "2014-02-14T23:57:41Z",
    "author_association": "NONE",
    "body": "OK, so long as is this correct behavior.  I find it odd that `isnan(a)` can be True but `isnan(a.imag)` False, but this appears to be the way Python works.  It also only works in that direction - whenever I attempt to create `(0+nanj)` I wind up with `nan+nanj`, so it appears you can never have `isnan(a.imag)` True and `isnan(a.real)` False.\n\nThank you both for your help, on both sites.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/35143773",
    "html_url": "https://github.com/pandas-dev/pandas/issues/6345#issuecomment-35143773",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/6345",
    "id": 35143773,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MTQzNzcz",
    "user": {
      "login": "hayd",
      "id": 1931852,
      "node_id": "MDQ6VXNlcjE5MzE4NTI=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1931852?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hayd",
      "html_url": "https://github.com/hayd",
      "followers_url": "https://api.github.com/users/hayd/followers",
      "following_url": "https://api.github.com/users/hayd/following{/other_user}",
      "gists_url": "https://api.github.com/users/hayd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hayd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hayd/subscriptions",
      "organizations_url": "https://api.github.com/users/hayd/orgs",
      "repos_url": "https://api.github.com/users/hayd/repos",
      "events_url": "https://api.github.com/users/hayd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hayd/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-02-15T01:30:34Z",
    "updated_at": "2014-02-15T01:30:34Z",
    "author_association": "CONTRIBUTOR",
    "body": "I guess the distinction is between nan and inf, these concepts are different. That's why there is only one complex nan...\n\nHowever, I expected this to work (but not to do with pandas), weird:\n\n```\nIn [21]: 3 + 1j * -np.inf\nOut[21]: (nan-infj)\n```\n"
  }
]
