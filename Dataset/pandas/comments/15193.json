[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/274374926",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15193#issuecomment-274374926",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15193",
    "id": 274374926,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3NDM3NDkyNg==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-01-23T00:57:15Z",
    "updated_at": "2017-01-23T00:59:09Z",
    "author_association": "CONTRIBUTOR",
    "body": "we had this exact discussion here: https://github.com/pandas-dev/pandas/issues/12298\r\n\r\nwith a categorical\r\n```\r\nIn[1]: df.pivot_table(index = 'Date', columns= 'Station', values = 'Exit', dropna=True)\r\nOut[1]: \r\nStation     Kings Cross Station  Newtown Station  Parramatta Station  Town Hall Station  Central Station  Circular Quay Station  Martin Place Station  Museum Station  St James Station  \\\r\nDate                                                                                                                                                                                      \r\n2017-01-01                  0.0              1.0                 2.0                NaN              NaN                    NaN                   NaN             NaN               NaN   \r\n2017-02-01                  3.0              4.0                 5.0                NaN              NaN                    NaN                   NaN             NaN               NaN   \r\n2017-03-01                  6.0              7.0                 8.0                NaN              NaN                    NaN                   NaN             NaN               NaN   \r\n\r\nStation     Bondi Junction Station  North Sydney Station  \r\nDate                                                      \r\n2017-01-01                     NaN                   NaN  \r\n2017-02-01                     NaN                   NaN  \r\n2017-03-01                     NaN                   NaN  \r\n```\r\n\r\nas object\r\n```\r\nIn [4]: df.assign(Station = df.Station.astype(object)).pivot_table(index = 'Date', columns= 'Station', values = 'Exit', dropna=True)\r\nOut[4]: \r\nStation     Kings Cross Station  Newtown Station  Parramatta Station\r\nDate                                                                \r\n2017-01-01                    0                1                   2\r\n2017-02-01                    3                4                   5\r\n2017-03-01                    6                7                   8\r\n```\r\n\r\nso responding to your points\r\n\r\n> 1) Includes columns that are all NaN which should not be the case as dropna=True\r\n\r\nI suppose this is a bug as this is the point of ``dropna`` , so this appears not to be working, e.g.\r\nis the expected result\r\n\r\n```\r\nIn [14]: df.pivot_table(index = 'Date', columns= 'Station', values = 'Exit').dropna(how='all', axis=1)\r\nOut[14]: \r\nStation     Kings Cross Station  Newtown Station  Parramatta Station\r\nDate                                                                \r\n2017-01-01                  0.0              1.0                 2.0\r\n2017-02-01                  3.0              4.0                 5.0\r\n2017-03-01                  6.0              7.0                 8.0\r\n```\r\n\r\n> 2) Includes columns for categories that aren't in the input Data Frame, which is strange.\r\n\r\nthis is by definition and the point of a categorical, you get all of the categories. furthermore these are specifically ordered.\r\n\r\n> 3) Is not the same as when the output before the column is converted to a categorical\r\n\r\nnot sure what you mean here"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/274375172",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15193#issuecomment-274375172",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15193",
    "id": 274375172,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3NDM3NTE3Mg==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-01-23T01:00:36Z",
    "updated_at": "2017-01-23T01:00:36Z",
    "author_association": "CONTRIBUTOR",
    "body": "So I think that we can mark this as a bug w.r.t. point 1 above, IOW, ``dropna`` is not doing anything here as its applied to drop the all-na columns.\r\n\r\n@jorisvandenbossche "
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/282101713",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15193#issuecomment-282101713",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15193",
    "id": 282101713,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4MjEwMTcxMw==",
    "user": {
      "login": "verhalenn",
      "id": 20782321,
      "node_id": "MDQ6VXNlcjIwNzgyMzIx",
      "avatar_url": "https://avatars1.githubusercontent.com/u/20782321?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/verhalenn",
      "html_url": "https://github.com/verhalenn",
      "followers_url": "https://api.github.com/users/verhalenn/followers",
      "following_url": "https://api.github.com/users/verhalenn/following{/other_user}",
      "gists_url": "https://api.github.com/users/verhalenn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/verhalenn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/verhalenn/subscriptions",
      "organizations_url": "https://api.github.com/users/verhalenn/orgs",
      "repos_url": "https://api.github.com/users/verhalenn/repos",
      "events_url": "https://api.github.com/users/verhalenn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/verhalenn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-23T19:54:04Z",
    "updated_at": "2017-02-23T19:54:04Z",
    "author_association": "NONE",
    "body": "Would you be opposed to a simple\r\n```\r\nif isinstance(table, DataFrame) and dropna: \r\n    table = table.dropna(how='all', axis=1)\r\n```\r\nadded to the end of the function?\r\n\r\nIt passes all current tests."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/282103436",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15193#issuecomment-282103436",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15193",
    "id": 282103436,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4MjEwMzQzNg==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-23T19:59:43Z",
    "updated_at": "2017-02-23T19:59:43Z",
    "author_association": "CONTRIBUTOR",
    "body": "@verhalenn that might work. of course need *new* tests as well."
  }
]
