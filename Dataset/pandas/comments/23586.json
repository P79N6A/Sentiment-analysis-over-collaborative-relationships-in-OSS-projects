[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/437198920",
    "html_url": "https://github.com/pandas-dev/pandas/issues/23586#issuecomment-437198920",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23586",
    "id": 437198920,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNzE5ODkyMA==",
    "user": {
      "login": "jbrockmendel",
      "id": 8078968,
      "node_id": "MDQ6VXNlcjgwNzg5Njg=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/8078968?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jbrockmendel",
      "html_url": "https://github.com/jbrockmendel",
      "followers_url": "https://api.github.com/users/jbrockmendel/followers",
      "following_url": "https://api.github.com/users/jbrockmendel/following{/other_user}",
      "gists_url": "https://api.github.com/users/jbrockmendel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jbrockmendel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jbrockmendel/subscriptions",
      "organizations_url": "https://api.github.com/users/jbrockmendel/orgs",
      "repos_url": "https://api.github.com/users/jbrockmendel/repos",
      "events_url": "https://api.github.com/users/jbrockmendel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jbrockmendel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-08T23:50:06Z",
    "updated_at": "2018-11-08T23:50:06Z",
    "author_association": "MEMBER",
    "body": "This would also work for DatetimeArray/TimedeltaArray if put into DatetimelikeArrayMixin and the last line were changed to `type(self)(unique(self.asi8), dtype=self.dtype)`.  Though then in DatetimeIndex and TimedeltaIndex we would need to override (for now) with `unique = Index.unique`"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/437351720",
    "html_url": "https://github.com/pandas-dev/pandas/issues/23586#issuecomment-437351720",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23586",
    "id": 437351720,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNzM1MTcyMA==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-09T12:56:05Z",
    "updated_at": "2018-11-09T12:56:05Z",
    "author_association": "MEMBER",
    "body": "@TomAugspurger do you remember why we don't have a base `unique` implementation based on `_values_for_factorize`? (of course in principle `factorize` does a bit too much, but still should be faster than object roundtrip) \r\nEg in case of PeriodIndex this would already have worked, since factorizing does not goes through object dtype (which is not to say that specifically for a builtin PeriodArray, we shouldn't do a direct `unique` as you show above of course)\r\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/437352665",
    "html_url": "https://github.com/pandas-dev/pandas/issues/23586#issuecomment-437352665",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23586",
    "id": 437352665,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNzM1MjY2NQ==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-09T13:00:29Z",
    "updated_at": "2018-11-09T13:00:29Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hmm, can we say in general whether factorizing or converting to object is more expensive?"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/437356125",
    "html_url": "https://github.com/pandas-dev/pandas/issues/23586#issuecomment-437356125",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23586",
    "id": 437356125,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNzM1NjEyNQ==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-09T13:15:30Z",
    "updated_at": "2018-11-09T13:15:30Z",
    "author_association": "MEMBER",
    "body": "Probably not in general, but my feeling is that it is likely the overhead of keeping track of the codes in factorize will give less overhead compared to doing it in object mode.\r\n\r\nFor integers:\r\n```\r\nIn [26]: a = np.random.randint(100, size=1000000)\r\n\r\nIn [28]: %timeit pd.unique(a)\r\n3.75 ms ± 29.5 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)\r\n\r\nIn [29]: %timeit pd.factorize(a)\r\n8.99 ms ± 125 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)\r\n\r\nIn [30]: a2 = np.array(a, dtype=object)\r\n\r\nIn [31]: %timeit pd.unique(a2)\r\n25.6 ms ± 1.01 ms per loop (mean ± std. dev. of 7 runs, 10 loops each)\r\n```\r\n\r\n(but so this also clearly shows that for PeriodArray it is worth to explicitly use `unique` instead of `factorize`)"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/437356513",
    "html_url": "https://github.com/pandas-dev/pandas/issues/23586#issuecomment-437356513",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23586",
    "id": 437356513,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNzM1NjUxMw==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-09T13:17:07Z",
    "updated_at": "2018-11-09T13:18:23Z",
    "author_association": "MEMBER",
    "body": "Actually, can't we do something like this as default:\r\n\r\n```patch\r\n+    def unique(self):\r\n+        from pandas.core.algorithms import unique\r\n+        return self._from_factorized(unique(self._values_for_factorize), self)\r\n```"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/437357097",
    "html_url": "https://github.com/pandas-dev/pandas/issues/23586#issuecomment-437357097",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23586",
    "id": 437357097,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNzM1NzA5Nw==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-09T13:19:31Z",
    "updated_at": "2018-11-09T13:19:59Z",
    "author_association": "CONTRIBUTOR",
    "body": "Yeah, I think so... I don't think we make any claims about the order of the result (but  I think right now unique and the default factorize will preserve it)."
  }
]
