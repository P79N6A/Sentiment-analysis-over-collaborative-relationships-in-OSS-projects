[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/87405448",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9746#issuecomment-87405448",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9746",
    "id": 87405448,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3NDA1NDQ4",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-03-29T12:45:17Z",
    "updated_at": "2015-03-29T12:45:17Z",
    "author_association": "CONTRIBUTOR",
    "body": "You can do this by specifying the `downcast` keyword. This is NOT automatic as a general operation this _can_ be expensive.\n\n```\nIn [10]: df.set_index(['x','y']).unstack().fillna(-1,downcast='infer')\nOut[10]: \n   z   \ny  j  k\nx      \na  0  1\nb  2 -1\n\nIn [11]: df.set_index(['x','y']).unstack().fillna(-1,downcast='infer').dtypes\nOut[11]: \n   y\nz  j    int64\n   k    int64\ndtype: object\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/87425971",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9746#issuecomment-87425971",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9746",
    "id": 87425971,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3NDI1OTcx",
    "user": {
      "login": "amcpherson",
      "id": 1170234,
      "node_id": "MDQ6VXNlcjExNzAyMzQ=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1170234?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/amcpherson",
      "html_url": "https://github.com/amcpherson",
      "followers_url": "https://api.github.com/users/amcpherson/followers",
      "following_url": "https://api.github.com/users/amcpherson/following{/other_user}",
      "gists_url": "https://api.github.com/users/amcpherson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/amcpherson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/amcpherson/subscriptions",
      "organizations_url": "https://api.github.com/users/amcpherson/orgs",
      "repos_url": "https://api.github.com/users/amcpherson/repos",
      "events_url": "https://api.github.com/users/amcpherson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/amcpherson/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-03-29T15:01:17Z",
    "updated_at": "2015-03-29T15:01:17Z",
    "author_association": "CONTRIBUTOR",
    "body": "There may be some merit to this being allowed directly, even if the functionality can be accomplished with a series of operations.  For instance, when trying to limit memory usage on a big dataset, perhaps it would be preferable to keep the data as `np.int8`.\n\n``` python\nIn [15]: idx = np.array([0, 0, 1], dtype=np.int32)\n\nIn [16]: idx2 = np.array([0, 1, 0], dtype=np.int8)\n\nIn [17]: value = np.array([0, 1, 2], dtype=np.int8)\n\nIn [18]: df = pd.DataFrame({'idx':idx, 'idx2':idx2, 'value':value})\n\nIn [19]: df.dtypes\nOut[19]:\nidx      int32\nidx2      int8\nvalue     int8\ndtype: object\n\nIn [20]: df.set_index(['idx', 'idx2']).unstack().dtypes\nOut[20]:\n       idx2\nvalue  0       float64\n       1       float64\ndtype: object\n```\n\nAfter the unstack my data table is suddenly much larger than necessary.\n\nAlso, from looking at the code this would be fairly trivial to implement, without much impact on existing code.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/87433203",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9746#issuecomment-87433203",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9746",
    "id": 87433203,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3NDMzMjAz",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-03-29T16:13:02Z",
    "updated_at": "2015-03-29T16:13:02Z",
    "author_association": "CONTRIBUTOR",
    "body": "@amcpherson ok, if you can find a reasonable way to do this w/o affecting perf then would be ok to have a `fill_value` argument.\n"
  }
]
