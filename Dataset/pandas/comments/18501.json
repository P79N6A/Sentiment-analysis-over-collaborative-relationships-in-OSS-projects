[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/346981891",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18501#issuecomment-346981891",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18501",
    "id": 346981891,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0Njk4MTg5MQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-26T03:42:50Z",
    "updated_at": "2017-11-26T03:42:50Z",
    "author_association": "CONTRIBUTOR",
    "body": "pls show a copy pastable example "
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/346982577",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18501#issuecomment-346982577",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18501",
    "id": 346982577,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0Njk4MjU3Nw==",
    "user": {
      "login": "dcolascione",
      "id": 331322,
      "node_id": "MDQ6VXNlcjMzMTMyMg==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/331322?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dcolascione",
      "html_url": "https://github.com/dcolascione",
      "followers_url": "https://api.github.com/users/dcolascione/followers",
      "following_url": "https://api.github.com/users/dcolascione/following{/other_user}",
      "gists_url": "https://api.github.com/users/dcolascione/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dcolascione/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dcolascione/subscriptions",
      "organizations_url": "https://api.github.com/users/dcolascione/orgs",
      "repos_url": "https://api.github.com/users/dcolascione/repos",
      "events_url": "https://api.github.com/users/dcolascione/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dcolascione/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-26T04:04:39Z",
    "updated_at": "2017-11-26T04:04:39Z",
    "author_association": "NONE",
    "body": "I'm not sure what you want. The intermediate conversion to int64 isn't observable, so there'd be nothing to show in a copy-paste example. It's an efficiency enhancement request, not a functionality one."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/346984799",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18501#issuecomment-346984799",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18501",
    "id": 346984799,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0Njk4NDc5OQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-26T05:05:12Z",
    "updated_at": "2017-11-26T05:05:12Z",
    "author_association": "CONTRIBUTOR",
    "body": "i want a copy pastable example of your input "
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/346988202",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18501#issuecomment-346988202",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18501",
    "id": 346988202,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0Njk4ODIwMg==",
    "user": {
      "login": "dcolascione",
      "id": 331322,
      "node_id": "MDQ6VXNlcjMzMTMyMg==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/331322?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dcolascione",
      "html_url": "https://github.com/dcolascione",
      "followers_url": "https://api.github.com/users/dcolascione/followers",
      "following_url": "https://api.github.com/users/dcolascione/following{/other_user}",
      "gists_url": "https://api.github.com/users/dcolascione/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dcolascione/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dcolascione/subscriptions",
      "organizations_url": "https://api.github.com/users/dcolascione/orgs",
      "repos_url": "https://api.github.com/users/dcolascione/repos",
      "events_url": "https://api.github.com/users/dcolascione/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dcolascione/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-26T06:39:15Z",
    "updated_at": "2017-11-26T06:39:15Z",
    "author_association": "NONE",
    "body": "```python\r\n    # Shouldn't convert the input codes array to int64, because we then convert it to \r\n    # to int8 anyway.\r\n    pd.Categorical.from_codes(codes=np.asarray([0,1], np.int16), categories=[\"foo\", \"bar\"])"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/347005709",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18501#issuecomment-347005709",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18501",
    "id": 347005709,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NzAwNTcwOQ==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-26T12:37:46Z",
    "updated_at": "2017-11-26T12:37:46Z",
    "author_association": "CONTRIBUTOR",
    "body": "Should be able to wrap this:\r\n\r\nhttps://github.com/pandas-dev/pandas/blob/38f41e64f4b8a0479f8835022af5e7343ccf8498/pandas/core/categorical.py#L599-L603\r\n\r\nin an\r\n\r\n```python\r\nif not is_integer_dtype(codes):\r\n    # do the try / except\r\n```\r\n\r\nAnd see what breaks. @dcolascione could you submit a PR for that, along with tests and a release note?\r\n\r\nNote that we even if we avoid the cast to `int64`, I think we *will* still try to cast it to a smaller dtype (int8 in this case).\r\n\r\n```python\r\n\r\nIn [6]: pd.Categorical.from_codes(codes=np.asarray([0,1], np.int16), categories=[\"foo\", \"bar\"]).codes.dtype\r\nOut[6]: dtype('int8')\r\n```\r\n\r\nAvoiding all copies may be more difficult, but possible."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/347013777",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18501#issuecomment-347013777",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18501",
    "id": 347013777,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NzAxMzc3Nw==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-26T14:52:12Z",
    "updated_at": "2017-11-26T14:53:43Z",
    "author_association": "CONTRIBUTOR",
    "body": "ok this looks fine to do\r\n\r\n```\r\nIn [1]: arr = np.ones(10000000,dtype='int8')\r\n\r\n# with change\r\nIn [5]: %timeit pd.Categorical.from_codes(arr, ['foo', 'bar'])\r\n8.92 ms ± 510 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)\r\n\r\n# master\r\nIn [2]: %timeit pd.Categorical.from_codes(arr, ['foo', 'bar'])\r\n53.2 ms ± 3.18 ms per loop (mean ± std. dev. of 7 runs, 10 loops each)\r\n```\r\n\r\nchange\r\n```\r\ndiff --git a/pandas/core/categorical.py b/pandas/core/categorical.py\r\nindex deaec20..8710f50 100644\r\n--- a/pandas/core/categorical.py\r\n+++ b/pandas/core/categorical.py\r\n@@ -597,7 +597,7 @@ class Categorical(PandasObject):\r\n             unordered.\r\n         \"\"\"\r\n         try:\r\n-            codes = np.asarray(codes, np.int64)\r\n+            codes = np.asarray(codes)\r\n         except:\r\n             raise ValueError(\r\n                 \"codes need to be convertible to an arrays of integers\")\r\n```"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/360956733",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18501#issuecomment-360956733",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18501",
    "id": 360956733,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MDk1NjczMw==",
    "user": {
      "login": "renewang",
      "id": 4778331,
      "node_id": "MDQ6VXNlcjQ3NzgzMzE=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/4778331?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/renewang",
      "html_url": "https://github.com/renewang",
      "followers_url": "https://api.github.com/users/renewang/followers",
      "following_url": "https://api.github.com/users/renewang/following{/other_user}",
      "gists_url": "https://api.github.com/users/renewang/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/renewang/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/renewang/subscriptions",
      "organizations_url": "https://api.github.com/users/renewang/orgs",
      "repos_url": "https://api.github.com/users/renewang/repos",
      "events_url": "https://api.github.com/users/renewang/events{/privacy}",
      "received_events_url": "https://api.github.com/users/renewang/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-27T03:35:06Z",
    "updated_at": "2018-01-27T03:35:06Z",
    "author_association": "NONE",
    "body": "Hi, I would like to work on this issue. Is any issue that I couldn't work on this? And any suggestions or documents for the first starter like how to write a test case etc?  Thanks!"
  }
]
