[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/311560524",
    "html_url": "https://github.com/pandas-dev/pandas/issues/16784#issuecomment-311560524",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/16784",
    "id": 311560524,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxMTU2MDUyNA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-06-28T05:30:33Z",
    "updated_at": "2017-06-28T05:30:33Z",
    "author_association": "CONTRIBUTOR",
    "body": "pls show a copy-pastable example, IOW construct df1 here."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/311563562",
    "html_url": "https://github.com/pandas-dev/pandas/issues/16784#issuecomment-311563562",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/16784",
    "id": 311563562,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxMTU2MzU2Mg==",
    "user": {
      "login": "eromoe",
      "id": 3938751,
      "node_id": "MDQ6VXNlcjM5Mzg3NTE=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/3938751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eromoe",
      "html_url": "https://github.com/eromoe",
      "followers_url": "https://api.github.com/users/eromoe/followers",
      "following_url": "https://api.github.com/users/eromoe/following{/other_user}",
      "gists_url": "https://api.github.com/users/eromoe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eromoe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eromoe/subscriptions",
      "organizations_url": "https://api.github.com/users/eromoe/orgs",
      "repos_url": "https://api.github.com/users/eromoe/repos",
      "events_url": "https://api.github.com/users/eromoe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eromoe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-06-28T05:54:33Z",
    "updated_at": "2017-06-28T06:00:17Z",
    "author_association": "NONE",
    "body": "It's simple \r\n```\r\ncolumns_values_map={\r\n    'positive': {\r\n        '正面':1,\r\n        '中立': 1,\r\n        '负面':0\r\n    }\r\n}\r\ndf1 = pd.DataFrame({'positive': np.ones(10)})\r\ndf1.replace(columns_values_map)\r\n#  TypeError: Cannot compare types 'ndarray(dtype=int64)' and 'unicode'\r\n\r\ndf2 = pd.DataFrame({'positive': ['正面', '负面']})\r\ndf2.replace(columns_values_map)\r\n# this work\r\n```\r\n\r\nI am using pandas to couple some excels with some common column but different value. \r\nNow I have to use something like\r\n```\r\nfor col, v_map in self.columns_values_map.items():\r\n    cats = df[col].astype('category')\r\n    cat_map = {k:v for k, v in v_map.items() if k in cats}\r\n    if cat_map:\r\n        df[col] = df[col].map(lambda x: cat_map[x])\r\n```\r\n\r\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/311613905",
    "html_url": "https://github.com/pandas-dev/pandas/issues/16784#issuecomment-311613905",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/16784",
    "id": 311613905,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxMTYxMzkwNQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-06-28T09:57:18Z",
    "updated_at": "2017-06-28T09:57:18Z",
    "author_association": "CONTRIBUTOR",
    "body": "This looks correct to me. You are trying to replace integers with string-likes, none of which match. Are you objecting over the error message?\r\n\r\nFYI\r\n\r\n```\r\nIn [35]: df1['positive'].map(columns_values_map['positive'])\r\nOut[35]: \r\n0   NaN\r\n1   NaN\r\n2   NaN\r\n3   NaN\r\n4   NaN\r\n5   NaN\r\n6   NaN\r\n7   NaN\r\n8   NaN\r\n9   NaN\r\nName: positive, dtype: float64\r\n```\r\n\r\nThough for the reverse we let this pass\r\n```\r\nIn [40]: df = DataFrame({'A': [1., 2.], 'B': ['foo', 'bar']})\r\n\r\nIn [41]: df.replace({'A':{20:1}})\r\nOut[41]: \r\n     A    B\r\n0  1.0  foo\r\n1  2.0  bar\r\n```"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/311614049",
    "html_url": "https://github.com/pandas-dev/pandas/issues/16784#issuecomment-311614049",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/16784",
    "id": 311614049,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxMTYxNDA0OQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-06-28T09:57:52Z",
    "updated_at": "2017-06-28T09:57:52Z",
    "author_association": "CONTRIBUTOR",
    "body": "@chris-b1 @jorisvandenbossche @TomAugspurger \r\n\r\ncomments?"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/311668661",
    "html_url": "https://github.com/pandas-dev/pandas/issues/16784#issuecomment-311668661",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/16784",
    "id": 311668661,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxMTY2ODY2MQ==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-06-28T14:00:36Z",
    "updated_at": "2017-06-28T14:00:36Z",
    "author_association": "CONTRIBUTOR",
    "body": "For consistency, and since `replace` is a general purpose find / replace method, it'd be nice if this didn't raise a `TypeError`."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/354225043",
    "html_url": "https://github.com/pandas-dev/pandas/issues/16784#issuecomment-354225043",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/16784",
    "id": 354225043,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NDIyNTA0Mw==",
    "user": {
      "login": "sanjaydeo96",
      "id": 29541116,
      "node_id": "MDQ6VXNlcjI5NTQxMTE2",
      "avatar_url": "https://avatars1.githubusercontent.com/u/29541116?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sanjaydeo96",
      "html_url": "https://github.com/sanjaydeo96",
      "followers_url": "https://api.github.com/users/sanjaydeo96/followers",
      "following_url": "https://api.github.com/users/sanjaydeo96/following{/other_user}",
      "gists_url": "https://api.github.com/users/sanjaydeo96/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sanjaydeo96/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sanjaydeo96/subscriptions",
      "organizations_url": "https://api.github.com/users/sanjaydeo96/orgs",
      "repos_url": "https://api.github.com/users/sanjaydeo96/repos",
      "events_url": "https://api.github.com/users/sanjaydeo96/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sanjaydeo96/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-28T04:06:16Z",
    "updated_at": "2017-12-28T04:06:16Z",
    "author_association": "NONE",
    "body": "Kindly run above cells if you are using Jupyter notebook. I had same problem which shorted out by that."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/354359014",
    "html_url": "https://github.com/pandas-dev/pandas/issues/16784#issuecomment-354359014",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/16784",
    "id": 354359014,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NDM1OTAxNA==",
    "user": {
      "login": "diegoquintanav",
      "id": 16281387,
      "node_id": "MDQ6VXNlcjE2MjgxMzg3",
      "avatar_url": "https://avatars3.githubusercontent.com/u/16281387?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/diegoquintanav",
      "html_url": "https://github.com/diegoquintanav",
      "followers_url": "https://api.github.com/users/diegoquintanav/followers",
      "following_url": "https://api.github.com/users/diegoquintanav/following{/other_user}",
      "gists_url": "https://api.github.com/users/diegoquintanav/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/diegoquintanav/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/diegoquintanav/subscriptions",
      "organizations_url": "https://api.github.com/users/diegoquintanav/orgs",
      "repos_url": "https://api.github.com/users/diegoquintanav/repos",
      "events_url": "https://api.github.com/users/diegoquintanav/events{/privacy}",
      "received_events_url": "https://api.github.com/users/diegoquintanav/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-28T21:15:22Z",
    "updated_at": "2017-12-28T21:16:55Z",
    "author_association": "NONE",
    "body": "I'm having the same problem. I say a flag like the one that `to_numeric` has would do great here."
  }
]
