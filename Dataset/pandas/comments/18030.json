[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/340434144",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18030#issuecomment-340434144",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18030",
    "id": 340434144,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0MDQzNDE0NA==",
    "user": {
      "login": "jlandercy",
      "id": 20479241,
      "node_id": "MDQ6VXNlcjIwNDc5MjQx",
      "avatar_url": "https://avatars0.githubusercontent.com/u/20479241?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jlandercy",
      "html_url": "https://github.com/jlandercy",
      "followers_url": "https://api.github.com/users/jlandercy/followers",
      "following_url": "https://api.github.com/users/jlandercy/following{/other_user}",
      "gists_url": "https://api.github.com/users/jlandercy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jlandercy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jlandercy/subscriptions",
      "organizations_url": "https://api.github.com/users/jlandercy/orgs",
      "repos_url": "https://api.github.com/users/jlandercy/repos",
      "events_url": "https://api.github.com/users/jlandercy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jlandercy/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-30T12:49:55Z",
    "updated_at": "2017-10-30T13:01:43Z",
    "author_association": "NONE",
    "body": "Diving into `Pandas` source code I found why it behaves like described above.\r\n\r\nIn `DataFrame` definition we find a method binding to `pivot_table` function:\r\n\r\nhttps://github.com/pandas-dev/pandas/blob/52fe6bc15acd1598290b53195ea7fefecda5fce3/pandas/core/frame.py#L4430-L4437\r\n\r\nIn the function definition:\r\n\r\nhttps://github.com/pandas-dev/pandas/blob/52fe6bc15acd1598290b53195ea7fefecda5fce3/pandas/core/reshape/pivot.py#L26-L28\r\n\r\nWe can search for `dropna` switch and see that there is a Cartesian Product of level modalities:\r\n\r\nhttps://github.com/pandas-dev/pandas/blob/52fe6bc15acd1598290b53195ea7fefecda5fce3/pandas/core/reshape/pivot.py#L99-L113\r\n\r\nAnd after all, columns of NaN are purged:\r\n\r\nhttps://github.com/pandas-dev/pandas/blob/52fe6bc15acd1598290b53195ea7fefecda5fce3/pandas/core/reshape/pivot.py#L136-L140\r\n\r\nAfter reading these portions of code, I can tell:\r\n\r\n - It is the intended behaviour;\r\n - There is no way to keep `NaN` and not to increase cardinality of MultiIndex with the `dropna` switch, because of the Cartesian Product part.\r\n\r\nQuestions:\r\n\r\n - I wonder why does this behaviour exist, how it is used;\r\n - And how can I perform my task without filling and then replacing.\r\n\r\nFix proposal:\r\n\r\nActually I need to inhibate the final `dropna` without triggering the Cartesian Product. And then I guess it is done.\r\n\r\nMay be a finer condition (or an extra switch) in the Cartesian Product part will do the trick."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/340442023",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18030#issuecomment-340442023",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18030",
    "id": 340442023,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0MDQ0MjAyMw==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-30T13:23:38Z",
    "updated_at": "2017-10-30T13:23:38Z",
    "author_association": "MEMBER",
    "body": "@jlandercy thanks for diving in! \r\nMy first reflex was to say that this is due to limitations of `unstack` dealing with existing NaNs vs introduced NaNs due to unstacking (you can search for 'unstack dropna' in the issues to see some related discussions). \r\n\r\nBut actually, it seems you can get your desired result (I think) with the underlying groupby + unstack:\r\n\r\n```\r\nIn [83]: df.groupby([\"timestamp\", \"channelid\", \"networkkey\", \"sitekey\", \"measurandkey\"]).agg('first').unstack([1,2,3,4])\r\nOut[83]: \r\n             userfloatvalue                     \r\nchannelid              5069   5119   5120   5233\r\nnetworkkey              HMT    HMT    HMT    HMT\r\nsitekey              01MEU1 01AND3 01MEU1 01AND3\r\nmeasurandkey             Cu     Cu     Pb     Pb\r\ntimestamp                                       \r\n2018-01-01              NaN    NaN    NaN    NaN\r\n2018-01-02              NaN    NaN    NaN    NaN\r\n2018-01-03              NaN    NaN    NaN    NaN\r\n2018-01-04              NaN    NaN    NaN    NaN\r\n```\r\n\r\nIs it correct that this is what you want?\r\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/340455937",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18030#issuecomment-340455937",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18030",
    "id": 340455937,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0MDQ1NTkzNw==",
    "user": {
      "login": "jlandercy",
      "id": 20479241,
      "node_id": "MDQ6VXNlcjIwNDc5MjQx",
      "avatar_url": "https://avatars0.githubusercontent.com/u/20479241?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jlandercy",
      "html_url": "https://github.com/jlandercy",
      "followers_url": "https://api.github.com/users/jlandercy/followers",
      "following_url": "https://api.github.com/users/jlandercy/following{/other_user}",
      "gists_url": "https://api.github.com/users/jlandercy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jlandercy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jlandercy/subscriptions",
      "organizations_url": "https://api.github.com/users/jlandercy/orgs",
      "repos_url": "https://api.github.com/users/jlandercy/repos",
      "events_url": "https://api.github.com/users/jlandercy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jlandercy/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-30T14:12:29Z",
    "updated_at": "2017-10-30T14:15:48Z",
    "author_association": "NONE",
    "body": "Dear @jorisvandenbossche,\r\n\r\nYes this is the desired output. Thank you for pointing out this alternative of fill/replace.\r\n\r\nUnfortunately, this will not fit in my project as this. Simply because I extensively use `pivot_table` with a lot of parametrizations. Your solution will introduce a new dataflow I must handle in parallel with `pivot_table` instead of properly setup its parameters. Or maybe I will have to redesign my code to cope with this issue. But I fell odd about that for the moment. I do like the simplicity of `pivot_table` method.\r\n\r\nWhat I do not understand is: **why there is a Cartesian Product on Level Modalities of index and columns?** Do you have any idea? What could be the reason or usage of this feature? I am really intrigued with this. And I found it a little bit counter intuitive by now.\r\n\r\nBest regards,"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/457169709",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18030#issuecomment-457169709",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18030",
    "id": 457169709,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1NzE2OTcwOQ==",
    "user": {
      "login": "Sarnath",
      "id": 1013251,
      "node_id": "MDQ6VXNlcjEwMTMyNTE=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1013251?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sarnath",
      "html_url": "https://github.com/Sarnath",
      "followers_url": "https://api.github.com/users/Sarnath/followers",
      "following_url": "https://api.github.com/users/Sarnath/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sarnath/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Sarnath/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sarnath/subscriptions",
      "organizations_url": "https://api.github.com/users/Sarnath/orgs",
      "repos_url": "https://api.github.com/users/Sarnath/repos",
      "events_url": "https://api.github.com/users/Sarnath/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Sarnath/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-24T11:49:54Z",
    "updated_at": "2019-01-24T11:49:54Z",
    "author_association": "NONE",
    "body": "Yes, I hit this problem today. Boy -- So annoying.\r\nWe use pivot_table everywhere and this behavior is very limiting.\r\nIs there any ETA for this fix?\r\nGood job by OP in creating a reproducible case... Great job, mate!"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/457176261",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18030#issuecomment-457176261",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18030",
    "id": 457176261,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1NzE3NjI2MQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-24T12:14:53Z",
    "updated_at": "2019-01-24T12:14:53Z",
    "author_association": "CONTRIBUTOR",
    "body": "ETA is when someone submits a patch, how about it @Sarnath "
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/457213112",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18030#issuecomment-457213112",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18030",
    "id": 457213112,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1NzIxMzExMg==",
    "user": {
      "login": "Sarnath",
      "id": 1013251,
      "node_id": "MDQ6VXNlcjEwMTMyNTE=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1013251?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sarnath",
      "html_url": "https://github.com/Sarnath",
      "followers_url": "https://api.github.com/users/Sarnath/followers",
      "following_url": "https://api.github.com/users/Sarnath/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sarnath/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Sarnath/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sarnath/subscriptions",
      "organizations_url": "https://api.github.com/users/Sarnath/orgs",
      "repos_url": "https://api.github.com/users/Sarnath/repos",
      "events_url": "https://api.github.com/users/Sarnath/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Sarnath/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-24T14:20:45Z",
    "updated_at": "2019-01-24T14:20:45Z",
    "author_association": "NONE",
    "body": "Challenge accepted. I have no idea about Pandas development. Let me know how to go about it. I will get started! Cheers!"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/457213539",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18030#issuecomment-457213539",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18030",
    "id": 457213539,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1NzIxMzUzOQ==",
    "user": {
      "login": "Sarnath",
      "id": 1013251,
      "node_id": "MDQ6VXNlcjEwMTMyNTE=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1013251?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sarnath",
      "html_url": "https://github.com/Sarnath",
      "followers_url": "https://api.github.com/users/Sarnath/followers",
      "following_url": "https://api.github.com/users/Sarnath/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sarnath/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Sarnath/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sarnath/subscriptions",
      "organizations_url": "https://api.github.com/users/Sarnath/orgs",
      "repos_url": "https://api.github.com/users/Sarnath/repos",
      "events_url": "https://api.github.com/users/Sarnath/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Sarnath/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-24T14:21:58Z",
    "updated_at": "2019-01-24T14:21:58Z",
    "author_association": "NONE",
    "body": "https://pandas.pydata.org/pandas-docs/stable/contributing.html \r\nI will go with this. Let me know if something else is expected."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/457215867",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18030#issuecomment-457215867",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18030",
    "id": 457215867,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1NzIxNTg2Nw==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-24T14:28:33Z",
    "updated_at": "2019-01-24T14:28:33Z",
    "author_association": "CONTRIBUTOR",
    "body": "The docs at `/stable` are a bit out of date. Try\nhttp://pandas-docs.github.io/pandas-docs-travis/development/contributing.html\n\nOn Thu, Jan 24, 2019 at 8:22 AM Sarnath <notifications@github.com> wrote:\n\n> https://pandas.pydata.org/pandas-docs/stable/contributing.html\n> I will go with this. Let me know if something else is expected.\n>\n> —\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/pandas-dev/pandas/issues/18030#issuecomment-457213539>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/ABQHIpNh-lo-Lkffo7n_AIs3Rw-a3UB6ks5vGcGNgaJpZM4QK-7n>\n> .\n>\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/457518228",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18030#issuecomment-457518228",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18030",
    "id": 457518228,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1NzUxODIyOA==",
    "user": {
      "login": "Sarnath",
      "id": 1013251,
      "node_id": "MDQ6VXNlcjEwMTMyNTE=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1013251?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sarnath",
      "html_url": "https://github.com/Sarnath",
      "followers_url": "https://api.github.com/users/Sarnath/followers",
      "following_url": "https://api.github.com/users/Sarnath/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sarnath/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Sarnath/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sarnath/subscriptions",
      "organizations_url": "https://api.github.com/users/Sarnath/orgs",
      "repos_url": "https://api.github.com/users/Sarnath/repos",
      "events_url": "https://api.github.com/users/Sarnath/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Sarnath/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-25T09:54:24Z",
    "updated_at": "2019-01-25T09:54:24Z",
    "author_association": "NONE",
    "body": "Sure, Thanks! I will start in a week. I hope i can find a place where I can sync with other developers. I will first read the guide. Thanks for your time!"
  }
]
