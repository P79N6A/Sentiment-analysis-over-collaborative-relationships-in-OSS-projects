[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/427897581",
    "html_url": "https://github.com/pandas-dev/pandas/issues/23046#issuecomment-427897581",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23046",
    "id": 427897581,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNzg5NzU4MQ==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-08T16:26:09Z",
    "updated_at": "2018-10-08T16:26:09Z",
    "author_association": "CONTRIBUTOR",
    "body": "Looks like in https://github.com/pandas-dev/pandas/blob/e510b1a265fc2ec280cd753ec752a2340c3ffdaf/doc/source/conf.py#L572\r\n\r\nwe call `inspect.getsourcefile(pd.DataFrame.astype)`, which goes to `_decorators.py`.\r\n\r\nI'm not sure whether the fix is to update `linkcode_resolve` or whether we need to update the decorator to use something like `functools.wraps` to pass along the correct information."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/427935036",
    "html_url": "https://github.com/pandas-dev/pandas/issues/23046#issuecomment-427935036",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23046",
    "id": 427935036,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNzkzNTAzNg==",
    "user": {
      "login": "vkk800",
      "id": 19554001,
      "node_id": "MDQ6VXNlcjE5NTU0MDAx",
      "avatar_url": "https://avatars3.githubusercontent.com/u/19554001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vkk800",
      "html_url": "https://github.com/vkk800",
      "followers_url": "https://api.github.com/users/vkk800/followers",
      "following_url": "https://api.github.com/users/vkk800/following{/other_user}",
      "gists_url": "https://api.github.com/users/vkk800/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vkk800/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vkk800/subscriptions",
      "organizations_url": "https://api.github.com/users/vkk800/orgs",
      "repos_url": "https://api.github.com/users/vkk800/repos",
      "events_url": "https://api.github.com/users/vkk800/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vkk800/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-08T18:29:20Z",
    "updated_at": "2018-10-08T18:29:20Z",
    "author_association": "CONTRIBUTOR",
    "body": "Now that I understand the problem, using `functools.wraps` definitely seems like a way to go. I'm not familiar with pandas codebase, but I will still try to take a look in the next few days."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/427936113",
    "html_url": "https://github.com/pandas-dev/pandas/issues/23046#issuecomment-427936113",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23046",
    "id": 427936113,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNzkzNjExMw==",
    "user": {
      "login": "WillAyd",
      "id": 609873,
      "node_id": "MDQ6VXNlcjYwOTg3Mw==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/609873?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/WillAyd",
      "html_url": "https://github.com/WillAyd",
      "followers_url": "https://api.github.com/users/WillAyd/followers",
      "following_url": "https://api.github.com/users/WillAyd/following{/other_user}",
      "gists_url": "https://api.github.com/users/WillAyd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/WillAyd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/WillAyd/subscriptions",
      "organizations_url": "https://api.github.com/users/WillAyd/orgs",
      "repos_url": "https://api.github.com/users/WillAyd/repos",
      "events_url": "https://api.github.com/users/WillAyd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/WillAyd/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-08T18:32:38Z",
    "updated_at": "2018-10-08T18:32:38Z",
    "author_association": "MEMBER",
    "body": "> Now that I understand the problem, using `functools.wraps` definitely seems like a way to go.\r\n\r\nThis may have some other benefits as well like improved tracebacks. Not sure if we've ever done an audit of decorators in the code base to see what is using wraps or not but would be interesting"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/427939887",
    "html_url": "https://github.com/pandas-dev/pandas/issues/23046#issuecomment-427939887",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23046",
    "id": 427939887,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNzkzOTg4Nw==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-08T18:44:37Z",
    "updated_at": "2018-10-08T18:44:37Z",
    "author_association": "CONTRIBUTOR",
    "body": "I vaguely recalled a discussion about functools.wraps breaking something.\nPerhaps I'm thinking of https://github.com/pandas-dev/pandas/issues/13875\n(something doesn't work properly on Python 2, which we don't care about\nmuch these days).\n\nOn Mon, Oct 8, 2018 at 1:32 PM William Ayd <notifications@github.com> wrote:\n\n> Now that I understand the problem, using functools.wraps definitely seems\n> like a way to go.\n>\n> This may have some other benefits as well like improved tracebacks. Not\n> sure if we've ever done an audit of decorators in the code base to see what\n> is using wraps or not but would be interesting\n>\n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/pandas-dev/pandas/issues/23046#issuecomment-427936113>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/ABQHIpoU5_q5Ja9Mve5GAokKQ7YxWaxNks5ui5pSgaJpZM4XNQK2>\n> .\n>\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/429616453",
    "html_url": "https://github.com/pandas-dev/pandas/issues/23046#issuecomment-429616453",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/23046",
    "id": 429616453,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyOTYxNjQ1Mw==",
    "user": {
      "login": "vkk800",
      "id": 19554001,
      "node_id": "MDQ6VXNlcjE5NTU0MDAx",
      "avatar_url": "https://avatars3.githubusercontent.com/u/19554001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vkk800",
      "html_url": "https://github.com/vkk800",
      "followers_url": "https://api.github.com/users/vkk800/followers",
      "following_url": "https://api.github.com/users/vkk800/following{/other_user}",
      "gists_url": "https://api.github.com/users/vkk800/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vkk800/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vkk800/subscriptions",
      "organizations_url": "https://api.github.com/users/vkk800/orgs",
      "repos_url": "https://api.github.com/users/vkk800/repos",
      "events_url": "https://api.github.com/users/vkk800/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vkk800/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-14T10:50:08Z",
    "updated_at": "2018-10-14T10:50:08Z",
    "author_association": "CONTRIBUTOR",
    "body": "Just a comment on this and my PR: the case was that the decorator used in this case was already using `@functools.wraps()`, but since the filename that `getsourcefile()` finds comes from `fun.__code__.co_filename` which does not get transferred from the decorated function by `wraps()`, the filename returned was also the filename of the wrapper function. This is probably something that should be kept in mind in the future when using functions from `inspect` module in conjunction with wrapped/partial/etc function."
  }
]
