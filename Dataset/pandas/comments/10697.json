[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/125938558",
    "html_url": "https://github.com/pandas-dev/pandas/issues/10697#issuecomment-125938558",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/10697",
    "id": 125938558,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyNTkzODU1OA==",
    "user": {
      "login": "TomAugspurger",
      "id": 1312546,
      "node_id": "MDQ6VXNlcjEzMTI1NDY=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/1312546?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomAugspurger",
      "html_url": "https://github.com/TomAugspurger",
      "followers_url": "https://api.github.com/users/TomAugspurger/followers",
      "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
      "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
      "repos_url": "https://api.github.com/users/TomAugspurger/repos",
      "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-07-29T12:42:10Z",
    "updated_at": "2015-07-29T12:42:10Z",
    "author_association": "CONTRIBUTOR",
    "body": "Do you have a small script to generate two DataFrames that cause the error? That would be preferable to a pickle.\nAlso show exactly how you calling `concat`.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/125963071",
    "html_url": "https://github.com/pandas-dev/pandas/issues/10697#issuecomment-125963071",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/10697",
    "id": 125963071,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyNTk2MzA3MQ==",
    "user": {
      "login": "Alexis-benoist",
      "id": 4437159,
      "node_id": "MDQ6VXNlcjQ0MzcxNTk=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/4437159?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Alexis-benoist",
      "html_url": "https://github.com/Alexis-benoist",
      "followers_url": "https://api.github.com/users/Alexis-benoist/followers",
      "following_url": "https://api.github.com/users/Alexis-benoist/following{/other_user}",
      "gists_url": "https://api.github.com/users/Alexis-benoist/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Alexis-benoist/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Alexis-benoist/subscriptions",
      "organizations_url": "https://api.github.com/users/Alexis-benoist/orgs",
      "repos_url": "https://api.github.com/users/Alexis-benoist/repos",
      "events_url": "https://api.github.com/users/Alexis-benoist/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Alexis-benoist/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-07-29T14:09:01Z",
    "updated_at": "2015-07-29T14:10:38Z",
    "author_association": "NONE",
    "body": "The script which generates the dataframes is a bit complicated but I can provide csv exports [df1](https://gist.github.com/Alexis-benoist/1a36c69a818a984c2950) [df2](https://gist.github.com/Alexis-benoist/d5aae92d79eaecd70789).\n\nI tried to reproduce the bug using, the csv and the dataframe but unfortunately it works.  I also tried to serialize the array using np.save, but it also works.\n\n``` python\nimport pandas as pd\nfrom ast import literal_eval as literal_eval_base\n\ndef literal_eval(s):\n    try:\n        return literal_eval_base(s)\n    except Exception as e:\n        return s\n\n\ndf_1 = pd.read_csv('df_1.csv')\ndf_2 = pd.read_csv('df_2.csv')\n\ndf_1.rename(columns=literal_eval, inplace=True)\ndf_2.rename(columns=literal_eval, inplace=True)\nto_concat = [df_1, df_2]\npd.concat(to_concat)\n```\n\nI think that the bug is on the line 4039 of core/internals in the combine_concat_plans func.\nBecause, we can see below that the value in the iterator (JoinUnit(None, {}), JoinUnit(None, {})) is not the same as the one in the evaluated list (None of them is None).  \n<img width=\"957\" alt=\"capture d ecran 2015-07-29 a 16 05 57\" src=\"https://cloud.githubusercontent.com/assets/4437159/8959549/c27127fe-360b-11e5-80c2-997d556e1727.png\">\n\nI don't really know how i could send you the DataFrame in a readable format for you. \n\nI'm wondering, what could be the difference between the csv and the pandas (appart from the unamed column). \n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/125982081",
    "html_url": "https://github.com/pandas-dev/pandas/issues/10697#issuecomment-125982081",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/10697",
    "id": 125982081,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyNTk4MjA4MQ==",
    "user": {
      "login": "Alexis-benoist",
      "id": 4437159,
      "node_id": "MDQ6VXNlcjQ0MzcxNTk=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/4437159?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Alexis-benoist",
      "html_url": "https://github.com/Alexis-benoist",
      "followers_url": "https://api.github.com/users/Alexis-benoist/followers",
      "following_url": "https://api.github.com/users/Alexis-benoist/following{/other_user}",
      "gists_url": "https://api.github.com/users/Alexis-benoist/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Alexis-benoist/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Alexis-benoist/subscriptions",
      "organizations_url": "https://api.github.com/users/Alexis-benoist/orgs",
      "repos_url": "https://api.github.com/users/Alexis-benoist/repos",
      "events_url": "https://api.github.com/users/Alexis-benoist/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Alexis-benoist/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-07-29T15:04:48Z",
    "updated_at": "2015-07-29T15:04:48Z",
    "author_association": "NONE",
    "body": "The get_mgr_concatenation_plan does not seems coherent as we can see on the picture below. When it's called by the code  (the length is 1) but when I call it from the debugger, the length is 6.\n\n<img width=\"1398\" alt=\"capture d ecran 2015-07-29 a 16 59 58\" src=\"https://cloud.githubusercontent.com/assets/4437159/8961145/cf7fedce-3613-11e5-987c-10d057ae6018.png\">\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/126008072",
    "html_url": "https://github.com/pandas-dev/pandas/issues/10697#issuecomment-126008072",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/10697",
    "id": 126008072,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyNjAwODA3Mg==",
    "user": {
      "login": "tarikd",
      "id": 5740031,
      "node_id": "MDQ6VXNlcjU3NDAwMzE=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/5740031?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tarikd",
      "html_url": "https://github.com/tarikd",
      "followers_url": "https://api.github.com/users/tarikd/followers",
      "following_url": "https://api.github.com/users/tarikd/following{/other_user}",
      "gists_url": "https://api.github.com/users/tarikd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tarikd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tarikd/subscriptions",
      "organizations_url": "https://api.github.com/users/tarikd/orgs",
      "repos_url": "https://api.github.com/users/tarikd/repos",
      "events_url": "https://api.github.com/users/tarikd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tarikd/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-07-29T16:28:36Z",
    "updated_at": "2015-07-29T16:28:36Z",
    "author_association": "NONE",
    "body": ":+1: \n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/126296794",
    "html_url": "https://github.com/pandas-dev/pandas/issues/10697#issuecomment-126296794",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/10697",
    "id": 126296794,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyNjI5Njc5NA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-07-30T12:04:51Z",
    "updated_at": "2015-07-30T12:04:51Z",
    "author_association": "CONTRIBUTOR",
    "body": "This was a bit tricky to repro. However, the bottom line is their is a small edge case bug that you hit, though you should NOT ever use tuples in an index, unless it really is a multi-index, as these are by-definition the markers for multi-index guessing.\n\nThis is very odd in how things are sorted, not sure why exactly python does this (this is py2).\n\n```\nIn [23]: sorted([u'class',(u'internal',u'__delete__')])\nOut[23]: [(u'internal', u'__delete__'), u'class']\n\nIn [24]: sorted(['class',('internal','__delete__')])\nOut[24]: ['class', ('internal', '__delete__')]\n```\n\nSo this makes a determination if the guessed index is a multi-index or not (this is the bug part, I think we can be more strict, IOW we are only checking the first element if its a tuple; if it is we try to create a multi-index).\n\n```\nIn [29]: Index([('A',1),'B'])\nIn [29]: Index([('A',1),'B'])\nOut[29]: \nMultiIndex(levels=[[u'A', u'B'], [1]],\n           labels=[[0, 1], [0, -1]])\n\nIn [30]: Index(['B',('A',1)])\nOut[30]: Index([u'B', (u'A', 1)], dtype='object')\n```\n\nHere's a repro example. Note that if these are strings (e.g. no `u`), then this would WORK!.\n\n```\nIn [26]: df1 = DataFrame({ u'A' : 'foo', (u'B',1) : 'bar' },index=range(2))\n\nIn [27]: df2 = DataFrame({ u'B' : 'foo', (u'B',1) : 'bar' },index=range(2))\n\nIn [28]: pd.concat([df1,df2])\nAssertionError: invalid dtype determination in get_concat_dtype\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/126328665",
    "html_url": "https://github.com/pandas-dev/pandas/issues/10697#issuecomment-126328665",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/10697",
    "id": 126328665,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyNjMyODY2NQ==",
    "user": {
      "login": "Alexis-benoist",
      "id": 4437159,
      "node_id": "MDQ6VXNlcjQ0MzcxNTk=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/4437159?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Alexis-benoist",
      "html_url": "https://github.com/Alexis-benoist",
      "followers_url": "https://api.github.com/users/Alexis-benoist/followers",
      "following_url": "https://api.github.com/users/Alexis-benoist/following{/other_user}",
      "gists_url": "https://api.github.com/users/Alexis-benoist/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Alexis-benoist/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Alexis-benoist/subscriptions",
      "organizations_url": "https://api.github.com/users/Alexis-benoist/orgs",
      "repos_url": "https://api.github.com/users/Alexis-benoist/repos",
      "events_url": "https://api.github.com/users/Alexis-benoist/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Alexis-benoist/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-07-30T13:43:24Z",
    "updated_at": "2015-07-30T13:43:24Z",
    "author_association": "NONE",
    "body": "Thanks for the reactivity !\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/126331652",
    "html_url": "https://github.com/pandas-dev/pandas/issues/10697#issuecomment-126331652",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/10697",
    "id": 126331652,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyNjMzMTY1Mg==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-07-30T13:49:08Z",
    "updated_at": "2015-07-30T13:49:08Z",
    "author_association": "CONTRIBUTOR",
    "body": "I'll close when I merge\n"
  }
]
