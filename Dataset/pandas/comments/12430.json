[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/187822745",
    "html_url": "https://github.com/pandas-dev/pandas/issues/12430#issuecomment-187822745",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/12430",
    "id": 187822745,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4NzgyMjc0NQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-02-23T18:11:07Z",
    "updated_at": "2016-02-23T18:11:07Z",
    "author_association": "CONTRIBUTOR",
    "body": "You know about these right? https://github.com/pydata/pandas/blob/master/pandas/algos.pyx#L941\n\nof a specific expanding apply for specific functions can be done marginally (so of course could be faster).\n\nDo you have some timings?\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/187843119",
    "html_url": "https://github.com/pandas-dev/pandas/issues/12430#issuecomment-187843119",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/12430",
    "id": 187843119,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4Nzg0MzExOQ==",
    "user": {
      "login": "bschreck",
      "id": 3237925,
      "node_id": "MDQ6VXNlcjMyMzc5MjU=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/3237925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bschreck",
      "html_url": "https://github.com/bschreck",
      "followers_url": "https://api.github.com/users/bschreck/followers",
      "following_url": "https://api.github.com/users/bschreck/following{/other_user}",
      "gists_url": "https://api.github.com/users/bschreck/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bschreck/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bschreck/subscriptions",
      "organizations_url": "https://api.github.com/users/bschreck/orgs",
      "repos_url": "https://api.github.com/users/bschreck/repos",
      "events_url": "https://api.github.com/users/bschreck/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bschreck/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-02-23T19:02:56Z",
    "updated_at": "2016-02-23T19:02:56Z",
    "author_association": "NONE",
    "body": "Those are for rolling functions as opposed to expanding from the beginning of the list. I also have other ones that aren't implemented there like mode and total/percentage of each value for categorical variables. I'll check the timings for specific cases and post them here\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/187848819",
    "html_url": "https://github.com/pandas-dev/pandas/issues/12430#issuecomment-187848819",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/12430",
    "id": 187848819,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4Nzg0ODgxOQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-02-23T19:16:49Z",
    "updated_at": "2016-02-23T19:16:49Z",
    "author_association": "CONTRIBUTOR",
    "body": "expanding == rolling when window=len(data)\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/187849526",
    "html_url": "https://github.com/pandas-dev/pandas/issues/12430#issuecomment-187849526",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/12430",
    "id": 187849526,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4Nzg0OTUyNg==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-02-23T19:17:57Z",
    "updated_at": "2016-02-23T19:17:57Z",
    "author_association": "CONTRIBUTOR",
    "body": "certainly up for adding additional ones. `mode` is quite tricky (we do have an impl of that one), but it will in general not return a scalar but a list-like, so tricky to figure out what you want.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/187931204",
    "html_url": "https://github.com/pandas-dev/pandas/issues/12430#issuecomment-187931204",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/12430",
    "id": 187931204,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4NzkzMTIwNA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-02-23T21:55:52Z",
    "updated_at": "2016-02-23T21:55:52Z",
    "author_association": "CONTRIBUTOR",
    "body": "This uses the new interface in 0.18.0\n\n```\nIn [1]: s = Series(range(5))\n\nIn [2]: s.rolling(window=1).sum()\nOut[2]: \n0    0.0\n1    1.0\n2    2.0\n3    3.0\n4    4.0\ndtype: float64\n\nIn [3]: s.expanding().sum()\nOut[3]: \n0     0.0\n1     1.0\n2     3.0\n3     6.0\n4    10.0\ndtype: float64\n\nIn [4]: s.rolling(window=len(s)).sum()\nOut[4]: \n0     NaN\n1     NaN\n2     NaN\n3     NaN\n4    10.0\ndtype: float64\n\nIn [5]: s.rolling(window=len(s), min_periods=1).sum()\nOut[5]: \n0     0.0\n1     1.0\n2     3.0\n3     6.0\n4    10.0\ndtype: float64\n```\n\nThere is a correction for the min_periods (e. window is actually window+min_periods), but the code is the same otherwise.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/188341302",
    "html_url": "https://github.com/pandas-dev/pandas/issues/12430#issuecomment-188341302",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/12430",
    "id": 188341302,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4ODM0MTMwMg==",
    "user": {
      "login": "bschreck",
      "id": 3237925,
      "node_id": "MDQ6VXNlcjMyMzc5MjU=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/3237925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bschreck",
      "html_url": "https://github.com/bschreck",
      "followers_url": "https://api.github.com/users/bschreck/followers",
      "following_url": "https://api.github.com/users/bschreck/following{/other_user}",
      "gists_url": "https://api.github.com/users/bschreck/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bschreck/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bschreck/subscriptions",
      "organizations_url": "https://api.github.com/users/bschreck/orgs",
      "repos_url": "https://api.github.com/users/bschreck/repos",
      "events_url": "https://api.github.com/users/bschreck/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bschreck/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-02-24T16:33:26Z",
    "updated_at": "2016-02-24T16:33:26Z",
    "author_association": "NONE",
    "body": "I know you have a mode for a Series/DataFrame (http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.mode.html) but I can't find a rolling or expanding version anywhere. I see what you mean about it being more complicated because you might want each step to return an ordered list of all values seen in the window, but in many cases I think you'd just want the actual mode right? i.e. the most common value seen so far in the window.\n\n```\nIn [5]: num_list = np.random.randint(4, size=10)\n\nIn [6]: num_list\nOut[6]: array([0, 3, 1, 3, 1, 0, 3, 3, 1, 0])\nIn [7]: copt.expanding_mode(num_list)\nOut[7]: array([0, 0, 0, 3, 3, 3, 3, 3, 3, 3])\n```\n\nI have some others for categorical values that may or may not be too specific to my use case or not be a real statistical value that people care about. But I have a total and percentage of each value so far, which in the Cython returns lists of lists and a mapping array for aligning indices with the values they refer to.\n\n```\nIn [8]: copt.expanding_total_and_percentage(num_list)\nOut[8]:\n(array([[1, 1, 1, 1, 1, 2, 2, 2, 2, 3],\n    [0, 1, 1, 2, 2, 2, 3, 4, 4, 4],\n    [0, 0, 1, 1, 2, 2, 2, 2, 3, 3]]),\n array([[ 1.        ,  0.5       ,  0.33333333,  0.25      ,  0.2       ,\n      0.33333333,  0.28571429,  0.25      ,  0.22222222,  0.3       ],\n    [ 0.        ,  0.5       ,  0.33333333,  0.5       ,  0.4       ,\n      0.33333333,  0.42857143,  0.5       ,  0.44444444,  0.4       ],\n    [ 0.        ,  0.        ,  0.33333333,  0.25      ,  0.4       ,\n      0.33333333,  0.28571429,  0.25      ,  0.33333333,  0.3       ]]),\n array([0, 3, 1]))\n```\n\nAnd I have these two that I call \"jitter\" and \"stability\" which probably aren't very rigorously statistical but I thought were useful. Jitter measures the number of times the value has changed divided by the total number of values seen so far. Stability measures the number of times the most common value has been seen divided by the total number of values so far.\n\n```\nIn [9]: copt.expanding_jitter(num_lists)\nOut[9]:\narray([ 0.        ,  0.        ,  0.        ,  0.25      ,  0.2       ,\n    0.16666667,  0.14285714,  0.125     ,  0.11111111,  0.1       ])\n\nIn [10]: copt.expanding_stability(num_lists)\nOut[10]:\narray([ 1.        ,  1.        ,  1.        ,  0.75      ,  0.6       ,\n    0.66666667,  0.71428571,  0.75      ,  0.77777778,  0.8       ])\n```\n"
  }
]
