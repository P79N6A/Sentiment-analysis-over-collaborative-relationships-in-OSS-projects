[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/406806151",
    "html_url": "https://github.com/pandas-dev/pandas/pull/22011#issuecomment-406806151",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/22011",
    "id": 406806151,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNjgwNjE1MQ==",
    "user": {
      "login": "dhimmel",
      "id": 1117703,
      "node_id": "MDQ6VXNlcjExMTc3MDM=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1117703?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dhimmel",
      "html_url": "https://github.com/dhimmel",
      "followers_url": "https://api.github.com/users/dhimmel/followers",
      "following_url": "https://api.github.com/users/dhimmel/following{/other_user}",
      "gists_url": "https://api.github.com/users/dhimmel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dhimmel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dhimmel/subscriptions",
      "organizations_url": "https://api.github.com/users/dhimmel/orgs",
      "repos_url": "https://api.github.com/users/dhimmel/repos",
      "events_url": "https://api.github.com/users/dhimmel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dhimmel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-21T16:01:22Z",
    "updated_at": "2018-07-21T19:11:45Z",
    "author_association": "CONTRIBUTOR",
    "body": "The following test is failing in Python 2.7 (see [travis log](https://travis-ci.org/pandas-dev/pandas/jobs/406613281#L3856)):\r\n\r\nhttps://github.com/pandas-dev/pandas/blob/1033e8b1195d4071253889ada60523832285354c/pandas/tests/test_common.py#L254-L264\r\n\r\nLet me look into https://github.com/pandas-dev/pandas/issues/21227 as to what this test is for.\r\n\r\n**Update**: this test was added in https://github.com/pandas-dev/pandas/commit/91451cb7dbaaf6fb3f9bdfca73fe6adc2ee68cce / https://github.com/pandas-dev/pandas/pull/21478 (not https://github.com/pandas-dev/pandas/issues/21227). @minggli can you explain the purpose of `test_compression_warning`? I'm not sure why switching the compression default is causing this to fail. It seems like in Python 2, the test expects a `RuntimeWarning` that is not occurring.\r\n\r\nHere is the relevant pytest fixture:\r\n\r\nhttps://github.com/pandas-dev/pandas/blob/55cbd7d9291b2d3b9e20410a008042bab889d870/pandas/conftest.py#L131-L138"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/406815736",
    "html_url": "https://github.com/pandas-dev/pandas/pull/22011#issuecomment-406815736",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/22011",
    "id": 406815736,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNjgxNTczNg==",
    "user": {
      "login": "codecov[bot]",
      "id": 22429695,
      "node_id": "MDM6Qm90MjI0Mjk2OTU=",
      "avatar_url": "https://avatars2.githubusercontent.com/in/254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/codecov%5Bbot%5D",
      "html_url": "https://github.com/apps/codecov",
      "followers_url": "https://api.github.com/users/codecov%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/codecov%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/codecov%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/codecov%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/codecov%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/codecov%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/codecov%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/codecov%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/codecov%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2018-07-21T18:43:39Z",
    "updated_at": "2018-08-01T21:23:06Z",
    "author_association": "NONE",
    "body": "# [Codecov](https://codecov.io/gh/pandas-dev/pandas/pull/22011?src=pr&el=h1) Report\n> Merging [#22011](https://codecov.io/gh/pandas-dev/pandas/pull/22011?src=pr&el=desc) into [master](https://codecov.io/gh/pandas-dev/pandas/commit/d30c4a0696d5fbdc3c7ce36a9b9b19224a557e09?src=pr&el=desc) will **decrease** coverage by `<.01%`.\n> The diff coverage is `100%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/pandas-dev/pandas/pull/22011/graphs/tree.svg?width=650&token=eZ4WkYLtcO&height=150&src=pr)](https://codecov.io/gh/pandas-dev/pandas/pull/22011?src=pr&el=tree)\n\n```diff\n@@            Coverage Diff             @@\n##           master   #22011      +/-   ##\n==========================================\n- Coverage   92.07%   92.06%   -0.01%     \n==========================================\n  Files         170      170              \n  Lines       50690    50704      +14     \n==========================================\n+ Hits        46672    46680       +8     \n- Misses       4018     4024       +6\n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| #multiple | `90.47% <100%> (-0.01%)` | :arrow_down: |\n| #single | `42.3% <100%> (-0.01%)` | :arrow_down: |\n\n| [Impacted Files](https://codecov.io/gh/pandas-dev/pandas/pull/22011?src=pr&el=tree) | Coverage Δ | |\n|---|---|---|\n| [pandas/core/series.py](https://codecov.io/gh/pandas-dev/pandas/pull/22011/diff?src=pr&el=tree#diff-cGFuZGFzL2NvcmUvc2VyaWVzLnB5) | `94.11% <ø> (ø)` | :arrow_up: |\n| [pandas/core/frame.py](https://codecov.io/gh/pandas-dev/pandas/pull/22011/diff?src=pr&el=tree#diff-cGFuZGFzL2NvcmUvZnJhbWUucHk=) | `97.26% <ø> (ø)` | :arrow_up: |\n| [pandas/io/json/json.py](https://codecov.io/gh/pandas-dev/pandas/pull/22011/diff?src=pr&el=tree#diff-cGFuZGFzL2lvL2pzb24vanNvbi5weQ==) | `92.47% <ø> (ø)` | :arrow_up: |\n| [pandas/core/generic.py](https://codecov.io/gh/pandas-dev/pandas/pull/22011/diff?src=pr&el=tree#diff-cGFuZGFzL2NvcmUvZ2VuZXJpYy5weQ==) | `96.47% <ø> (ø)` | :arrow_up: |\n| [pandas/io/formats/csvs.py](https://codecov.io/gh/pandas-dev/pandas/pull/22011/diff?src=pr&el=tree#diff-cGFuZGFzL2lvL2Zvcm1hdHMvY3N2cy5weQ==) | `98.21% <100%> (+0.55%)` | :arrow_up: |\n| [pandas/core/arrays/datetimelike.py](https://codecov.io/gh/pandas-dev/pandas/pull/22011/diff?src=pr&el=tree#diff-cGFuZGFzL2NvcmUvYXJyYXlzL2RhdGV0aW1lbGlrZS5weQ==) | `94.02% <0%> (-1.04%)` | :arrow_down: |\n| [pandas/core/dtypes/common.py](https://codecov.io/gh/pandas-dev/pandas/pull/22011/diff?src=pr&el=tree#diff-cGFuZGFzL2NvcmUvZHR5cGVzL2NvbW1vbi5weQ==) | `94.87% <0%> (-0.34%)` | :arrow_down: |\n| [pandas/util/testing.py](https://codecov.io/gh/pandas-dev/pandas/pull/22011/diff?src=pr&el=tree#diff-cGFuZGFzL3V0aWwvdGVzdGluZy5weQ==) | `85.69% <0%> (-0.21%)` | :arrow_down: |\n| [pandas/core/indexes/datetimes.py](https://codecov.io/gh/pandas-dev/pandas/pull/22011/diff?src=pr&el=tree#diff-cGFuZGFzL2NvcmUvaW5kZXhlcy9kYXRldGltZXMucHk=) | `95.54% <0%> (-0.14%)` | :arrow_down: |\n| [pandas/core/indexing.py](https://codecov.io/gh/pandas-dev/pandas/pull/22011/diff?src=pr&el=tree#diff-cGFuZGFzL2NvcmUvaW5kZXhpbmcucHk=) | `93.79% <0%> (-0.03%)` | :arrow_down: |\n| ... and [11 more](https://codecov.io/gh/pandas-dev/pandas/pull/22011/diff?src=pr&el=tree-more) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/pandas-dev/pandas/pull/22011?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/pandas-dev/pandas/pull/22011?src=pr&el=footer). Last update [d30c4a0...cf5b62e](https://codecov.io/gh/pandas-dev/pandas/pull/22011?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/406817406",
    "html_url": "https://github.com/pandas-dev/pandas/pull/22011#issuecomment-406817406",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/22011",
    "id": 406817406,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNjgxNzQwNg==",
    "user": {
      "login": "dhimmel",
      "id": 1117703,
      "node_id": "MDQ6VXNlcjExMTc3MDM=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1117703?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dhimmel",
      "html_url": "https://github.com/dhimmel",
      "followers_url": "https://api.github.com/users/dhimmel/followers",
      "following_url": "https://api.github.com/users/dhimmel/following{/other_user}",
      "gists_url": "https://api.github.com/users/dhimmel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dhimmel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dhimmel/subscriptions",
      "organizations_url": "https://api.github.com/users/dhimmel/orgs",
      "repos_url": "https://api.github.com/users/dhimmel/repos",
      "events_url": "https://api.github.com/users/dhimmel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dhimmel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-21T19:08:37Z",
    "updated_at": "2018-07-21T19:08:58Z",
    "author_association": "CONTRIBUTOR",
    "body": "> Needs tests\r\n\r\n@WillAyd I believe the different values for `compression` are already being tested, such that we don't need to test that `compression='infer'` works. Are you saying that I should be testing that changing the default actually changes the default? It seems like that could create an excessive amount of tests were we to test every default argument, but am happy to proceed as you see fit."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/406817626",
    "html_url": "https://github.com/pandas-dev/pandas/pull/22011#issuecomment-406817626",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/22011",
    "id": 406817626,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNjgxNzYyNg==",
    "user": {
      "login": "minggli",
      "id": 14131823,
      "node_id": "MDQ6VXNlcjE0MTMxODIz",
      "avatar_url": "https://avatars0.githubusercontent.com/u/14131823?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minggli",
      "html_url": "https://github.com/minggli",
      "followers_url": "https://api.github.com/users/minggli/followers",
      "following_url": "https://api.github.com/users/minggli/following{/other_user}",
      "gists_url": "https://api.github.com/users/minggli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minggli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minggli/subscriptions",
      "organizations_url": "https://api.github.com/users/minggli/orgs",
      "repos_url": "https://api.github.com/users/minggli/repos",
      "events_url": "https://api.github.com/users/minggli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minggli/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-21T19:13:00Z",
    "updated_at": "2018-07-21T19:21:33Z",
    "author_association": "CONTRIBUTOR",
    "body": "@dhimmel saw your comment. thanks for contributing! this `test_compression_warning` expects a RuntimeWarning when a file handle is passed to `to_csv` method with compression kwarg is supplied.\r\n\r\nThis is because it's not supported as stated in:\r\nhttps://github.com/pandas-dev/pandas/blob/1033e8b1195d4071253889ada60523832285354c/pandas/io/formats/csvs.py#L134\r\n\r\nI don't see why it would fail your work on `to_json`. \r\n\r\nHaving checked out your PR, I saw the issue but can't replicate it on master. Are you working off the latest master branch?"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/406818144",
    "html_url": "https://github.com/pandas-dev/pandas/pull/22011#issuecomment-406818144",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/22011",
    "id": 406818144,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNjgxODE0NA==",
    "user": {
      "login": "WillAyd",
      "id": 609873,
      "node_id": "MDQ6VXNlcjYwOTg3Mw==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/609873?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/WillAyd",
      "html_url": "https://github.com/WillAyd",
      "followers_url": "https://api.github.com/users/WillAyd/followers",
      "following_url": "https://api.github.com/users/WillAyd/following{/other_user}",
      "gists_url": "https://api.github.com/users/WillAyd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/WillAyd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/WillAyd/subscriptions",
      "organizations_url": "https://api.github.com/users/WillAyd/orgs",
      "repos_url": "https://api.github.com/users/WillAyd/repos",
      "events_url": "https://api.github.com/users/WillAyd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/WillAyd/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-21T19:21:55Z",
    "updated_at": "2018-07-21T19:21:55Z",
    "author_association": "MEMBER",
    "body": "> Are you saying that I should be testing that changing the default actually changes the default\r\n\r\nYep. Don't need to overthink it with all the various parameter combinations but at least need a test to ensure this now defaults to infer (since that is what you are changing)"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/406818644",
    "html_url": "https://github.com/pandas-dev/pandas/pull/22011#issuecomment-406818644",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/22011",
    "id": 406818644,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNjgxODY0NA==",
    "user": {
      "login": "dhimmel",
      "id": 1117703,
      "node_id": "MDQ6VXNlcjExMTc3MDM=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1117703?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dhimmel",
      "html_url": "https://github.com/dhimmel",
      "followers_url": "https://api.github.com/users/dhimmel/followers",
      "following_url": "https://api.github.com/users/dhimmel/following{/other_user}",
      "gists_url": "https://api.github.com/users/dhimmel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dhimmel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dhimmel/subscriptions",
      "organizations_url": "https://api.github.com/users/dhimmel/orgs",
      "repos_url": "https://api.github.com/users/dhimmel/repos",
      "events_url": "https://api.github.com/users/dhimmel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dhimmel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-21T19:30:43Z",
    "updated_at": "2018-07-21T19:31:14Z",
    "author_association": "CONTRIBUTOR",
    "body": "> Are you working off the latest master branch?\r\n\r\n@minggli, this PR currently branches off at 322dbf4f812f47d4eaee5d8afa10e17acf6dbc67, which is now two commits behind. I can rebase, but don't think that's the issue.\r\n\r\n> I don't see why it would fail your work on to_json.\r\n\r\nI was thinking the change of the to_csv compression default may have caused this issue, but it doesn't make sense to me. The test explicitly specifies compression in `df.to_csv(f, compression=compression_only)`, so I don't see how my PR would effect `test_compression_warning`."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/406825191",
    "html_url": "https://github.com/pandas-dev/pandas/pull/22011#issuecomment-406825191",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/22011",
    "id": 406825191,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNjgyNTE5MQ==",
    "user": {
      "login": "minggli",
      "id": 14131823,
      "node_id": "MDQ6VXNlcjE0MTMxODIz",
      "avatar_url": "https://avatars0.githubusercontent.com/u/14131823?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minggli",
      "html_url": "https://github.com/minggli",
      "followers_url": "https://api.github.com/users/minggli/followers",
      "following_url": "https://api.github.com/users/minggli/following{/other_user}",
      "gists_url": "https://api.github.com/users/minggli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minggli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minggli/subscriptions",
      "organizations_url": "https://api.github.com/users/minggli/orgs",
      "repos_url": "https://api.github.com/users/minggli/repos",
      "events_url": "https://api.github.com/users/minggli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minggli/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-21T21:42:01Z",
    "updated_at": "2018-07-21T22:44:42Z",
    "author_association": "CONTRIBUTOR",
    "body": "@dhimmel,\r\n\r\nI think the change of default in to_csv did change things. there is no infer_compression procedure in to_csv. I think that's what caused the failing of test. \r\n\r\nadd _infer_compression in to_csv should solve this problem.\r\n\r\nby the way, it appears that https://github.com/pandas-dev/pandas/pull/17900 has removed zip from docstrings in to_csv and to_json based on Oct 2017 discussion but zip compression for writing has been added in 0.23 Jun 2018:\r\nhttps://github.com/pandas-dev/pandas/blob/67b627717db2b0d6c1b3699d9384cc433c0b9af4/doc/source/whatsnew/v0.23.0.txt#L543\r\n\r\ncould you add 'zip' back in the docstrings of to_csv and to_json?"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/406829684",
    "html_url": "https://github.com/pandas-dev/pandas/pull/22011#issuecomment-406829684",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/22011",
    "id": 406829684,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNjgyOTY4NA==",
    "user": {
      "login": "dhimmel",
      "id": 1117703,
      "node_id": "MDQ6VXNlcjExMTc3MDM=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1117703?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dhimmel",
      "html_url": "https://github.com/dhimmel",
      "followers_url": "https://api.github.com/users/dhimmel/followers",
      "following_url": "https://api.github.com/users/dhimmel/following{/other_user}",
      "gists_url": "https://api.github.com/users/dhimmel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dhimmel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dhimmel/subscriptions",
      "organizations_url": "https://api.github.com/users/dhimmel/orgs",
      "repos_url": "https://api.github.com/users/dhimmel/repos",
      "events_url": "https://api.github.com/users/dhimmel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dhimmel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-21T23:24:05Z",
    "updated_at": "2018-07-21T23:39:30Z",
    "author_association": "CONTRIBUTOR",
    "body": "> there is no infer_compression procedure in to_csv\r\n\r\nHmm. I thought to_csv now supports `compression='infer'` as of https://github.com/pandas-dev/pandas/pull/17900 by @Dobatymo and @gfyoung. Basically, compression should be inferred by `_get_handle` but it appears the zip logic operates outside of this delegation.\r\n\r\n> could you add 'zip' back in the docstrings of to_csv and to_json?\r\n\r\nIs there consensus on this change. IIRC from reading past issues, it was considered poor practice to save a single file to a zip archive. Thus pandas would be lenient on reading, but stricter on writing. I don't have a strong opinion, but don't want to hold up this PR for another controversial issue. So let's diagnose the failing test and see if it's somehow related to the zip issue."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/406830932",
    "html_url": "https://github.com/pandas-dev/pandas/pull/22011#issuecomment-406830932",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/22011",
    "id": 406830932,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNjgzMDkzMg==",
    "user": {
      "login": "minggli",
      "id": 14131823,
      "node_id": "MDQ6VXNlcjE0MTMxODIz",
      "avatar_url": "https://avatars0.githubusercontent.com/u/14131823?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minggli",
      "html_url": "https://github.com/minggli",
      "followers_url": "https://api.github.com/users/minggli/followers",
      "following_url": "https://api.github.com/users/minggli/following{/other_user}",
      "gists_url": "https://api.github.com/users/minggli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minggli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minggli/subscriptions",
      "organizations_url": "https://api.github.com/users/minggli/orgs",
      "repos_url": "https://api.github.com/users/minggli/repos",
      "events_url": "https://api.github.com/users/minggli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minggli/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-22T00:00:30Z",
    "updated_at": "2018-07-22T00:11:00Z",
    "author_association": "CONTRIBUTOR",
    "body": "#17900 added infer in _get_handle but to_csv uses compression argument before calling _get_handle; therefore raises RuntimeWarning at https://github.com/dhimmel/pandas/blob/648bf4d1810a2c2b9cbff1d4b941ab7cb7bc0b35/pandas/io/formats/csvs.py#L133 because compression='infer' instead of None as it was before. It on itself shouldn't be a problem but https://github.com/pytest-dev/pytest/issues/2917 exists so that test_compression_warning fails because the warning has been raised in earlier test before this case. simply changing the order of the test is not thread-safe so I think the best way is:\r\n\r\ninside to_csv:\r\ncompression = _infer_compression(path_or_buf, compression)\r\nor inside csvs\r\nself.compression = _infer_compression(path_or_buf, compression)\r\n\r\nIn regards to zip in docstring, it's what production is showing right and supported already.\r\n```\r\nimport os\r\nimport pandas as pd\r\n\r\na = pd.DataFrame(10000 * [[123, 234, 435]], columns=['A', 'B', 'C'])\r\na.to_csv('test_compressed', index=False, compression='zip')\r\n\r\nb = pd.read_csv('test_compressed', compression='zip')\r\n\r\nassert a.equals(b)\r\nos.remove('test_compressed')\r\n```"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/406831478",
    "html_url": "https://github.com/pandas-dev/pandas/pull/22011#issuecomment-406831478",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/22011",
    "id": 406831478,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNjgzMTQ3OA==",
    "user": {
      "login": "dhimmel",
      "id": 1117703,
      "node_id": "MDQ6VXNlcjExMTc3MDM=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1117703?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dhimmel",
      "html_url": "https://github.com/dhimmel",
      "followers_url": "https://api.github.com/users/dhimmel/followers",
      "following_url": "https://api.github.com/users/dhimmel/following{/other_user}",
      "gists_url": "https://api.github.com/users/dhimmel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dhimmel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dhimmel/subscriptions",
      "organizations_url": "https://api.github.com/users/dhimmel/orgs",
      "repos_url": "https://api.github.com/users/dhimmel/repos",
      "events_url": "https://api.github.com/users/dhimmel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dhimmel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-22T00:12:24Z",
    "updated_at": "2018-07-22T00:13:16Z",
    "author_association": "CONTRIBUTOR",
    "body": "So I'm a bit concerned with what has happened since I last worked on compression & file IO. My impression was that we should start to use a unified API for inferring compression and opening files: see https://github.com/pandas-dev/pandas/issues/15008. `_get_handle` now delegates to `_infer_compression` . It seems however that `CSVFormatter.save` has now gotten further away from using the unified API. In https://github.com/pandas-dev/pandas/pull/22011/commits/be724fa7edcb80056cf0bdbc94351ca39d8f3d23 I replace `CSVFormatter.save` with the simplified workflow. If writing to zip is a feature that we want to support, then shouldn't this go in _get_handle?\r\n\r\nHappy to revert https://github.com/pandas-dev/pandas/pull/22011/commits/be724fa7edcb80056cf0bdbc94351ca39d8f3d23 or put it in another PR, just wanted to see the CI test output to know what this would break."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/407026469",
    "html_url": "https://github.com/pandas-dev/pandas/pull/22011#issuecomment-407026469",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/22011",
    "id": 407026469,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNzAyNjQ2OQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-23T11:31:09Z",
    "updated_at": "2018-07-23T11:31:09Z",
    "author_association": "CONTRIBUTOR",
    "body": "> _get_handle now delegates to _infer_compression . \r\n\r\nwhy is this a problem? this is clear separation of concerns. I don't think the goal has drifted from when you last worked on this. A number of bugs / consolidations have happened in the interim. Happy to take further cleanup."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/407099062",
    "html_url": "https://github.com/pandas-dev/pandas/pull/22011#issuecomment-407099062",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/22011",
    "id": 407099062,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNzA5OTA2Mg==",
    "user": {
      "login": "dhimmel",
      "id": 1117703,
      "node_id": "MDQ6VXNlcjExMTc3MDM=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1117703?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dhimmel",
      "html_url": "https://github.com/dhimmel",
      "followers_url": "https://api.github.com/users/dhimmel/followers",
      "following_url": "https://api.github.com/users/dhimmel/following{/other_user}",
      "gists_url": "https://api.github.com/users/dhimmel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dhimmel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dhimmel/subscriptions",
      "organizations_url": "https://api.github.com/users/dhimmel/orgs",
      "repos_url": "https://api.github.com/users/dhimmel/repos",
      "events_url": "https://api.github.com/users/dhimmel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dhimmel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-23T15:29:55Z",
    "updated_at": "2018-07-23T15:30:25Z",
    "author_association": "CONTRIBUTOR",
    "body": "> why is this a problem?\r\n\r\nHaving `_get_handle` call `_infer_compression` is good. It simplifies the number of functions that individual `to_*` methods have to call. However, the issue with `CSVFormatter.save` is that performs a custom workflow for handling zip files, which has made the code quite complicated with several lines calling `_get_handle`. The issue came up because the failing test is part of this custom compression workflow CSVFormatter now contains. However, I apologize for getting a bit sidetracked. I should keep this PR focused on changing the default for compression to infer."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/407201884",
    "html_url": "https://github.com/pandas-dev/pandas/pull/22011#issuecomment-407201884",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/22011",
    "id": 407201884,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNzIwMTg4NA==",
    "user": {
      "login": "pep8speaks",
      "id": 24736507,
      "node_id": "MDQ6VXNlcjI0NzM2NTA3",
      "avatar_url": "https://avatars1.githubusercontent.com/u/24736507?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pep8speaks",
      "html_url": "https://github.com/pep8speaks",
      "followers_url": "https://api.github.com/users/pep8speaks/followers",
      "following_url": "https://api.github.com/users/pep8speaks/following{/other_user}",
      "gists_url": "https://api.github.com/users/pep8speaks/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pep8speaks/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pep8speaks/subscriptions",
      "organizations_url": "https://api.github.com/users/pep8speaks/orgs",
      "repos_url": "https://api.github.com/users/pep8speaks/repos",
      "events_url": "https://api.github.com/users/pep8speaks/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pep8speaks/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-23T21:08:43Z",
    "updated_at": "2018-08-01T14:41:41Z",
    "author_association": "NONE",
    "body": "Hello @dhimmel! Thanks for updating the PR.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCheers ! There are no PEP8 issues in this Pull Request. :beers: \n\n##### Comment last updated on August 01, 2018 at 14:41 Hours UTC"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/407465262",
    "html_url": "https://github.com/pandas-dev/pandas/pull/22011#issuecomment-407465262",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/22011",
    "id": 407465262,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNzQ2NTI2Mg==",
    "user": {
      "login": "dhimmel",
      "id": 1117703,
      "node_id": "MDQ6VXNlcjExMTc3MDM=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1117703?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dhimmel",
      "html_url": "https://github.com/dhimmel",
      "followers_url": "https://api.github.com/users/dhimmel/followers",
      "following_url": "https://api.github.com/users/dhimmel/following{/other_user}",
      "gists_url": "https://api.github.com/users/dhimmel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dhimmel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dhimmel/subscriptions",
      "organizations_url": "https://api.github.com/users/dhimmel/orgs",
      "repos_url": "https://api.github.com/users/dhimmel/repos",
      "events_url": "https://api.github.com/users/dhimmel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dhimmel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-24T16:17:40Z",
    "updated_at": "2018-07-24T16:17:40Z",
    "author_association": "CONTRIBUTOR",
    "body": "# Why is `test_compression_warning` failing?\r\n\r\nThere is a [testing failure](https://travis-ci.org/pandas-dev/pandas/jobs/407342195#L3855) that has completely stumped me. It is only occurring in some Python 2 builds. The failing test is:\r\n\r\nhttps://github.com/pandas-dev/pandas/blob/1033e8b1195d4071253889ada60523832285354c/pandas/tests/test_common.py#L254-L264\r\n\r\nThe error is:\r\n\r\n```\r\nE               AssertionError: Did not see expected warning of class 'RuntimeWarning'.\r\n```\r\n\r\nIt doesn't make sense to me how the changes in this PR would effect whether the `RuntimeWarning`. This PR only changes the default compression value. The test specifies `compression` so the default should not matter.\r\n\r\nIn https://github.com/pandas-dev/pandas/pull/22011/commits/cebc0d98bd4ec7f68d3521f2814c0f41de818312 I added some debugging statements to help diagnose the testing failure\r\n\r\nIn CSVFormatter.save:\r\n\r\n> ![warning-debug](https://user-images.githubusercontent.com/1117703/43151674-7b62f83e-8f3a-11e8-9e33-0ac41baeaa64.png)\r\n\r\nIn `test_compression_warning`:\r\n\r\n> ![test-debug-changes](https://user-images.githubusercontent.com/1117703/43151695-8690fbf2-8f3a-11e8-9978-5a303b863501.png)\r\n\r\nHere's the output:\r\n\r\n```\r\n------------------------------ Captured log call -------------------------------\r\ntest_common.py             261 WARNING  debug_1: gzip\r\ntest_common.py             266 WARNING  debug_2: gzip\r\ncsvs.py                    138 WARNING  debug_3: gzip\r\ncsvs.py                    139 WARNING  debug_4: <gzip open file '/tmp/tmpQYAr5L', mode 'wb' at 0x7f7c02e56db0 0x7f7c04698b10>\r\ncsvs.py                    141 WARNING  debug_5: True\r\ncsvs.py                    143 WARNING  debug_6: in loop, should RuntimeWarn\r\n```\r\n\r\nSo the logging shows in the failing test that the code enters the if statement that triggers the RuntimeWarning. So I don't understand how the warning could not be raised or where this issue could be coming from.\r\n\r\n@WillAyd other than this issue how do things look? I added a test for `to_csv` defaulting to inference."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/407470823",
    "html_url": "https://github.com/pandas-dev/pandas/pull/22011#issuecomment-407470823",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/22011",
    "id": 407470823,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNzQ3MDgyMw==",
    "user": {
      "login": "WillAyd",
      "id": 609873,
      "node_id": "MDQ6VXNlcjYwOTg3Mw==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/609873?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/WillAyd",
      "html_url": "https://github.com/WillAyd",
      "followers_url": "https://api.github.com/users/WillAyd/followers",
      "following_url": "https://api.github.com/users/WillAyd/following{/other_user}",
      "gists_url": "https://api.github.com/users/WillAyd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/WillAyd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/WillAyd/subscriptions",
      "organizations_url": "https://api.github.com/users/WillAyd/orgs",
      "repos_url": "https://api.github.com/users/WillAyd/repos",
      "events_url": "https://api.github.com/users/WillAyd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/WillAyd/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-24T16:35:26Z",
    "updated_at": "2018-07-24T16:35:26Z",
    "author_association": "MEMBER",
    "body": "@minggli any thoughts on the issue @dhimmel is describing above?"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/407506013",
    "html_url": "https://github.com/pandas-dev/pandas/pull/22011#issuecomment-407506013",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/22011",
    "id": 407506013,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNzUwNjAxMw==",
    "user": {
      "login": "minggli",
      "id": 14131823,
      "node_id": "MDQ6VXNlcjE0MTMxODIz",
      "avatar_url": "https://avatars0.githubusercontent.com/u/14131823?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minggli",
      "html_url": "https://github.com/minggli",
      "followers_url": "https://api.github.com/users/minggli/followers",
      "following_url": "https://api.github.com/users/minggli/following{/other_user}",
      "gists_url": "https://api.github.com/users/minggli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minggli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minggli/subscriptions",
      "organizations_url": "https://api.github.com/users/minggli/orgs",
      "repos_url": "https://api.github.com/users/minggli/repos",
      "events_url": "https://api.github.com/users/minggli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minggli/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-24T18:26:52Z",
    "updated_at": "2018-07-24T18:26:52Z",
    "author_association": "CONTRIBUTOR",
    "body": "@dhimmel \r\n\r\n> #17900 added infer in _get_handle but to_csv uses compression argument before calling _get_handle; therefore raises RuntimeWarning at https://github.com/dhimmel/pandas/blob/648bf4d1810a2c2b9cbff1d4b941ab7cb7bc0b35/pandas/io/formats/csvs.py#L133 because compression='infer' instead of None as it was before. It on itself shouldn't be a problem but pytest-dev/pytest#2917 exists so that test_compression_warning fails because the warning has been raised in earlier test before this case. simply changing the order of the test is not thread-safe so I think the best way is:\r\n> \r\n> inside to_csv:\r\n> compression = _infer_compression(path_or_buf, compression)\r\n> or inside csvs\r\n> self.compression = _infer_compression(path_or_buf, compression)"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/407844045",
    "html_url": "https://github.com/pandas-dev/pandas/pull/22011#issuecomment-407844045",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/22011",
    "id": 407844045,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNzg0NDA0NQ==",
    "user": {
      "login": "dhimmel",
      "id": 1117703,
      "node_id": "MDQ6VXNlcjExMTc3MDM=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1117703?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dhimmel",
      "html_url": "https://github.com/dhimmel",
      "followers_url": "https://api.github.com/users/dhimmel/followers",
      "following_url": "https://api.github.com/users/dhimmel/following{/other_user}",
      "gists_url": "https://api.github.com/users/dhimmel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dhimmel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dhimmel/subscriptions",
      "organizations_url": "https://api.github.com/users/dhimmel/orgs",
      "repos_url": "https://api.github.com/users/dhimmel/repos",
      "events_url": "https://api.github.com/users/dhimmel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dhimmel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-25T18:03:46Z",
    "updated_at": "2018-07-25T18:03:46Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thanks @minggli for tracking down the [pytest issue](https://github.com/pytest-dev/pytest/issues/2917) titled \"asserting repeated warning does not work in Python 2.7\". I think it's very likely this is issue, however, I'm still not sure where the first RuntimeWarning is occurring that is causing pytest to malfunction when detecting the second. An easy solution would be to skip `test_compression_warning` on Python 2. However, I'd like to know where in the tests changing the default for compression to infer is causing a RuntimeWarning, in case we should just fix that test."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/408048011",
    "html_url": "https://github.com/pandas-dev/pandas/pull/22011#issuecomment-408048011",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/22011",
    "id": 408048011,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwODA0ODAxMQ==",
    "user": {
      "login": "minggli",
      "id": 14131823,
      "node_id": "MDQ6VXNlcjE0MTMxODIz",
      "avatar_url": "https://avatars0.githubusercontent.com/u/14131823?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minggli",
      "html_url": "https://github.com/minggli",
      "followers_url": "https://api.github.com/users/minggli/followers",
      "following_url": "https://api.github.com/users/minggli/following{/other_user}",
      "gists_url": "https://api.github.com/users/minggli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minggli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minggli/subscriptions",
      "organizations_url": "https://api.github.com/users/minggli/orgs",
      "repos_url": "https://api.github.com/users/minggli/repos",
      "events_url": "https://api.github.com/users/minggli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minggli/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-26T10:09:53Z",
    "updated_at": "2018-07-26T10:09:53Z",
    "author_association": "CONTRIBUTOR",
    "body": "@dhimmel ,\r\n\r\nto_csv should not raise RuntimeWarning when user didn't explicitly specify a compression and pass a file-like object, so the tests work fine. In other words, now that there is 'infer' as default, the RuntimeWarning raises all the time, which is undesirable, and should only raise when user passes explicitly and a file-handle is given.\r\n\r\nSo, I feel fixing the test is wrong way about it (the test affected by default 'infer' is test_compression_size_fh) and we should instead pass inferred compression keyword into CSV formatter or during construction of it. "
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/408076405",
    "html_url": "https://github.com/pandas-dev/pandas/pull/22011#issuecomment-408076405",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/22011",
    "id": 408076405,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwODA3NjQwNQ==",
    "user": {
      "login": "dhimmel",
      "id": 1117703,
      "node_id": "MDQ6VXNlcjExMTc3MDM=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1117703?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dhimmel",
      "html_url": "https://github.com/dhimmel",
      "followers_url": "https://api.github.com/users/dhimmel/followers",
      "following_url": "https://api.github.com/users/dhimmel/following{/other_user}",
      "gists_url": "https://api.github.com/users/dhimmel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dhimmel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dhimmel/subscriptions",
      "organizations_url": "https://api.github.com/users/dhimmel/orgs",
      "repos_url": "https://api.github.com/users/dhimmel/repos",
      "events_url": "https://api.github.com/users/dhimmel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dhimmel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-26T12:11:28Z",
    "updated_at": "2018-07-26T12:11:28Z",
    "author_association": "CONTRIBUTOR",
    "body": "@shangyian I saw you're the author of https://github.com/pandas-dev/pandas/pull/20341. Was there a specific reason why the encoding processing is performed in `CSVFormatter.save` rather than `CSVFormatter.__init__`? Does the movement of encoding logic as of https://github.com/pandas-dev/pandas/pull/22011/commits/eb7f9b5491defe035231e87f7902f1ea8786e86d raise any concerns?"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/408097168",
    "html_url": "https://github.com/pandas-dev/pandas/pull/22011#issuecomment-408097168",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/22011",
    "id": 408097168,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwODA5NzE2OA==",
    "user": {
      "login": "dhimmel",
      "id": 1117703,
      "node_id": "MDQ6VXNlcjExMTc3MDM=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1117703?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dhimmel",
      "html_url": "https://github.com/dhimmel",
      "followers_url": "https://api.github.com/users/dhimmel/followers",
      "following_url": "https://api.github.com/users/dhimmel/following{/other_user}",
      "gists_url": "https://api.github.com/users/dhimmel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dhimmel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dhimmel/subscriptions",
      "organizations_url": "https://api.github.com/users/dhimmel/orgs",
      "repos_url": "https://api.github.com/users/dhimmel/repos",
      "events_url": "https://api.github.com/users/dhimmel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dhimmel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-26T13:27:56Z",
    "updated_at": "2018-07-26T13:28:11Z",
    "author_association": "CONTRIBUTOR",
    "body": "> to_csv should not raise RuntimeWarning when user didn't explicitly specify a compression and pass a file-like object\r\n\r\n@minggli got it! I've added `_infer_compression` to `CSVFormatter.__init__`. This fixes the bug where `CSVFormatter.save` raises a RuntimeWarning when a file object is passed and `compression='infer'`. By preventing undesired RuntimeWarnings in other tests, we no longer hit the pytest bug in `test_compression_warning` in Python 2. I've also added a docstring to `test_compression_warning`, so if other users hit the pytest bug, they will hopefully not have to repeat our laborious debugging.\r\n\r\nIn the longterm, I still think it makes sense for any non-CSV-specific file/compression handling to be moved to the common module. However, that can be done in the future."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/408130317",
    "html_url": "https://github.com/pandas-dev/pandas/pull/22011#issuecomment-408130317",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/22011",
    "id": 408130317,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwODEzMDMxNw==",
    "user": {
      "login": "dhimmel",
      "id": 1117703,
      "node_id": "MDQ6VXNlcjExMTc3MDM=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1117703?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dhimmel",
      "html_url": "https://github.com/dhimmel",
      "followers_url": "https://api.github.com/users/dhimmel/followers",
      "following_url": "https://api.github.com/users/dhimmel/following{/other_user}",
      "gists_url": "https://api.github.com/users/dhimmel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dhimmel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dhimmel/subscriptions",
      "organizations_url": "https://api.github.com/users/dhimmel/orgs",
      "repos_url": "https://api.github.com/users/dhimmel/repos",
      "events_url": "https://api.github.com/users/dhimmel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dhimmel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-26T15:10:26Z",
    "updated_at": "2018-07-26T15:10:56Z",
    "author_association": "CONTRIBUTOR",
    "body": "@WillAyd [Travis jobs](https://travis-ci.org/pandas-dev/pandas/builds/408516636) have all passed, if you want to take another look. No outstanding items from my end."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/408150280",
    "html_url": "https://github.com/pandas-dev/pandas/pull/22011#issuecomment-408150280",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/22011",
    "id": 408150280,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwODE1MDI4MA==",
    "user": {
      "login": "WillAyd",
      "id": 609873,
      "node_id": "MDQ6VXNlcjYwOTg3Mw==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/609873?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/WillAyd",
      "html_url": "https://github.com/WillAyd",
      "followers_url": "https://api.github.com/users/WillAyd/followers",
      "following_url": "https://api.github.com/users/WillAyd/following{/other_user}",
      "gists_url": "https://api.github.com/users/WillAyd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/WillAyd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/WillAyd/subscriptions",
      "organizations_url": "https://api.github.com/users/WillAyd/orgs",
      "repos_url": "https://api.github.com/users/WillAyd/repos",
      "events_url": "https://api.github.com/users/WillAyd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/WillAyd/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-26T16:09:06Z",
    "updated_at": "2018-07-26T16:09:06Z",
    "author_association": "MEMBER",
    "body": "> I'm thinking that one fully parametrized test for compression inference by default is enough. This could either be the current modifications to test_compression_size or it could be a rewritten test_compression_defaults_to_infer\r\n\r\nYour point is understood but we typically like to have small, very directed unit tests to keep a logical separation of features tested. As such, there should (or already is in fact) one test that ensures that files actually get compressed as part of the process. A separate test entity for \"ensuring that the default compression is set to 'infer'\" is what you are introducing with this change. \r\n\r\nThe structure I was hinting at would keep those two \"features\" distinct in tests and give a better logical separation. Again the smaller and more directed tests can be, the better. There are plenty of older tests in our suite that try to do a lot of things at once - if you don't believe me take a look at them :-)\r\n\r\nlmk if that's not clear"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/408160649",
    "html_url": "https://github.com/pandas-dev/pandas/pull/22011#issuecomment-408160649",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/22011",
    "id": 408160649,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwODE2MDY0OQ==",
    "user": {
      "login": "dhimmel",
      "id": 1117703,
      "node_id": "MDQ6VXNlcjExMTc3MDM=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1117703?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dhimmel",
      "html_url": "https://github.com/dhimmel",
      "followers_url": "https://api.github.com/users/dhimmel/followers",
      "following_url": "https://api.github.com/users/dhimmel/following{/other_user}",
      "gists_url": "https://api.github.com/users/dhimmel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dhimmel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dhimmel/subscriptions",
      "organizations_url": "https://api.github.com/users/dhimmel/orgs",
      "repos_url": "https://api.github.com/users/dhimmel/repos",
      "events_url": "https://api.github.com/users/dhimmel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dhimmel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-26T16:44:37Z",
    "updated_at": "2018-07-26T16:45:14Z",
    "author_association": "CONTRIBUTOR",
    "body": "> A separate test entity for \"ensuring that the default compression is set to 'infer'\" is what you are introducing with this change.\r\n\r\nOkay, the only test that this now changes (besides comments) is a new test `test_compression_defaults_to_infer`. It uses a round-trip approach to testing compression. This test is parametrized as follows:\r\n\r\n```python\r\n@pytest.mark.parametrize('input', [\r\n    DataFrame([[1.0, 0, -4.4],\r\n               [3.4, 5, 2.4]], columns=['X', 'Y', 'Z']),\r\n    Series([0, 1, 2, 4], name='X'),\r\n])\r\n@pytest.mark.parametrize('methods', [\r\n    ('to_csv', pandas.read_csv),\r\n    ('to_json', pandas.read_json),\r\n    ('to_pickle', pandas.read_pickle),\r\n])\r\ndef test_compression_defaults_to_infer(input, methods, compression_only):\r\n```\r\n\r\n@WillAyd do you agree that this is the minimal test to exhaustively test that supported `to_*` methods default to infer? I think it's important we test Series AND DataFrame as well as to_json, to_csv, AND to_pickle. Hence, I put the test in `test_common.py` rather than `test_to_csv.py`."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/408185631",
    "html_url": "https://github.com/pandas-dev/pandas/pull/22011#issuecomment-408185631",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/22011",
    "id": 408185631,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwODE4NTYzMQ==",
    "user": {
      "login": "dhimmel",
      "id": 1117703,
      "node_id": "MDQ6VXNlcjExMTc3MDM=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1117703?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dhimmel",
      "html_url": "https://github.com/dhimmel",
      "followers_url": "https://api.github.com/users/dhimmel/followers",
      "following_url": "https://api.github.com/users/dhimmel/following{/other_user}",
      "gists_url": "https://api.github.com/users/dhimmel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dhimmel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dhimmel/subscriptions",
      "organizations_url": "https://api.github.com/users/dhimmel/orgs",
      "repos_url": "https://api.github.com/users/dhimmel/repos",
      "events_url": "https://api.github.com/users/dhimmel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dhimmel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-26T18:08:55Z",
    "updated_at": "2018-07-26T18:08:55Z",
    "author_association": "CONTRIBUTOR",
    "body": "Had to split test into two in https://github.com/pandas-dev/pandas/pull/22011/commits/fadb943851e395cfd6e7dbe05ba86d15ea2ee6f2: one for series and one for dataframes. Basically, the DataFrame & Series roundtrips require different args. Still a WIP, but the filesize test is considerably simpler given the intricacies of roundtripping."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/408217695",
    "html_url": "https://github.com/pandas-dev/pandas/pull/22011#issuecomment-408217695",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/22011",
    "id": 408217695,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwODIxNzY5NQ==",
    "user": {
      "login": "dhimmel",
      "id": 1117703,
      "node_id": "MDQ6VXNlcjExMTc3MDM=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1117703?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dhimmel",
      "html_url": "https://github.com/dhimmel",
      "followers_url": "https://api.github.com/users/dhimmel/followers",
      "following_url": "https://api.github.com/users/dhimmel/following{/other_user}",
      "gists_url": "https://api.github.com/users/dhimmel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dhimmel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dhimmel/subscriptions",
      "organizations_url": "https://api.github.com/users/dhimmel/orgs",
      "repos_url": "https://api.github.com/users/dhimmel/repos",
      "events_url": "https://api.github.com/users/dhimmel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dhimmel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-26T20:00:40Z",
    "updated_at": "2018-07-26T20:00:40Z",
    "author_association": "CONTRIBUTOR",
    "body": "@WillAyd round-tripping a series to a CSV with to_csv and read_csv is not straightforward. There is the deprecated pandas.Series.from_csv, but it doesn't support compression. Take a look at the current PR... do you still think round-tripping is preferable to file size comparing, given the complexity of round-tripping? Is there an easier way to roundtrip the CSV?"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/408255522",
    "html_url": "https://github.com/pandas-dev/pandas/pull/22011#issuecomment-408255522",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/22011",
    "id": 408255522,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwODI1NTUyMg==",
    "user": {
      "login": "shangyian",
      "id": 9524628,
      "node_id": "MDQ6VXNlcjk1MjQ2Mjg=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/9524628?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shangyian",
      "html_url": "https://github.com/shangyian",
      "followers_url": "https://api.github.com/users/shangyian/followers",
      "following_url": "https://api.github.com/users/shangyian/following{/other_user}",
      "gists_url": "https://api.github.com/users/shangyian/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shangyian/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shangyian/subscriptions",
      "organizations_url": "https://api.github.com/users/shangyian/orgs",
      "repos_url": "https://api.github.com/users/shangyian/repos",
      "events_url": "https://api.github.com/users/shangyian/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shangyian/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-26T22:32:56Z",
    "updated_at": "2018-07-26T22:32:56Z",
    "author_association": "CONTRIBUTOR",
    "body": "@dhimmel - there wasn't a specific reason, so yeah, go ahead and move it if it makes more sense!"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/408440110",
    "html_url": "https://github.com/pandas-dev/pandas/pull/22011#issuecomment-408440110",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/22011",
    "id": 408440110,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwODQ0MDExMA==",
    "user": {
      "login": "dhimmel",
      "id": 1117703,
      "node_id": "MDQ6VXNlcjExMTc3MDM=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1117703?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dhimmel",
      "html_url": "https://github.com/dhimmel",
      "followers_url": "https://api.github.com/users/dhimmel/followers",
      "following_url": "https://api.github.com/users/dhimmel/following{/other_user}",
      "gists_url": "https://api.github.com/users/dhimmel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dhimmel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dhimmel/subscriptions",
      "organizations_url": "https://api.github.com/users/dhimmel/orgs",
      "repos_url": "https://api.github.com/users/dhimmel/repos",
      "events_url": "https://api.github.com/users/dhimmel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dhimmel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-27T14:44:04Z",
    "updated_at": "2018-07-27T16:43:57Z",
    "author_association": "CONTRIBUTOR",
    "body": "@WillAyd ready for re-review. Tests passing as of https://github.com/pandas-dev/pandas/pull/22011/commits/14c3945410288a8edd3ee989d5582b1e5df0e992 and the following commit just modifies comments.\r\n\r\n> you might also want to take a look at #19715 to make sure there aren't any conflicts.\r\n\r\nThere may be some minor git conflicts since it looks like @toobaz's commits move where the `Series.to_csv` code is located: see https://github.com/toobaz/pandas/commit/191d2ab56249f0c60786cdb24b35dc7b7c92890f. However, all we touch in that code is the compression default and docstring, so it shouldn't be too bad for @toobaz to rebase on top of these changes (I didn't see a WIP PR with his/her changes)."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/408482558",
    "html_url": "https://github.com/pandas-dev/pandas/pull/22011#issuecomment-408482558",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/22011",
    "id": 408482558,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwODQ4MjU1OA==",
    "user": {
      "login": "toobaz",
      "id": 1224492,
      "node_id": "MDQ6VXNlcjEyMjQ0OTI=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1224492?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/toobaz",
      "html_url": "https://github.com/toobaz",
      "followers_url": "https://api.github.com/users/toobaz/followers",
      "following_url": "https://api.github.com/users/toobaz/following{/other_user}",
      "gists_url": "https://api.github.com/users/toobaz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/toobaz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/toobaz/subscriptions",
      "organizations_url": "https://api.github.com/users/toobaz/orgs",
      "repos_url": "https://api.github.com/users/toobaz/repos",
      "events_url": "https://api.github.com/users/toobaz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/toobaz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-27T17:14:16Z",
    "updated_at": "2018-07-27T17:14:16Z",
    "author_association": "MEMBER",
    "body": "> There may be some minor git conflicts since it looks like @toobaz's commits move where the Series.to_csv code is located: see toobaz@191d2ab. However, all we touch in that code is the compression default and docstring, so it shouldn't be too bad for @toobaz to rebase on top of these changes\r\n\r\nSure, no problem\r\n\r\n\r\n\r\n\r\n> (I didn't see a WIP PR with his/her changes)\r\n\r\n#21896"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/408607822",
    "html_url": "https://github.com/pandas-dev/pandas/pull/22011#issuecomment-408607822",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/22011",
    "id": 408607822,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwODYwNzgyMg==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-28T13:24:46Z",
    "updated_at": "2018-07-28T13:24:46Z",
    "author_association": "CONTRIBUTOR",
    "body": "can you rebase"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/408713683",
    "html_url": "https://github.com/pandas-dev/pandas/pull/22011#issuecomment-408713683",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/22011",
    "id": 408713683,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwODcxMzY4Mw==",
    "user": {
      "login": "dhimmel",
      "id": 1117703,
      "node_id": "MDQ6VXNlcjExMTc3MDM=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1117703?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dhimmel",
      "html_url": "https://github.com/dhimmel",
      "followers_url": "https://api.github.com/users/dhimmel/followers",
      "following_url": "https://api.github.com/users/dhimmel/following{/other_user}",
      "gists_url": "https://api.github.com/users/dhimmel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dhimmel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dhimmel/subscriptions",
      "organizations_url": "https://api.github.com/users/dhimmel/orgs",
      "repos_url": "https://api.github.com/users/dhimmel/repos",
      "events_url": "https://api.github.com/users/dhimmel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dhimmel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-29T23:26:42Z",
    "updated_at": "2018-07-29T23:27:11Z",
    "author_association": "CONTRIBUTOR",
    "body": "> can you rebase\r\n\r\nI merged in the latest master (https://github.com/pandas-dev/pandas/pull/22011/commits/25bdb4cecdb15e70e4ef217c883def2eb4137274) and took care of the conflict. Usually I rebase, but I wanted to preserve the commit history in the PR since we reference commit hashes and CI builds frequently in the discussion. Hope that is OKAY.\r\n\r\nCC @WillAyd, I think we should be ready for your re-review."
  }
]
