[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/347303761",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18523#issuecomment-347303761",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18523",
    "id": 347303761,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NzMwMzc2MQ==",
    "user": {
      "login": "gfyoung",
      "id": 9273653,
      "node_id": "MDQ6VXNlcjkyNzM2NTM=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/9273653?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gfyoung",
      "html_url": "https://github.com/gfyoung",
      "followers_url": "https://api.github.com/users/gfyoung/followers",
      "following_url": "https://api.github.com/users/gfyoung/following{/other_user}",
      "gists_url": "https://api.github.com/users/gfyoung/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gfyoung/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gfyoung/subscriptions",
      "organizations_url": "https://api.github.com/users/gfyoung/orgs",
      "repos_url": "https://api.github.com/users/gfyoung/repos",
      "events_url": "https://api.github.com/users/gfyoung/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gfyoung/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-27T19:45:19Z",
    "updated_at": "2017-11-27T19:45:19Z",
    "author_association": "MEMBER",
    "body": "How odd indeed!  This example is indeed reproducible on my end this time around.\r\n\r\nHave a look and see why we're getting this discrepancy in timezone representation.  PR is most welcome!"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/347583582",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18523#issuecomment-347583582",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18523",
    "id": 347583582,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NzU4MzU4Mg==",
    "user": {
      "login": "antvig",
      "id": 25105210,
      "node_id": "MDQ6VXNlcjI1MTA1MjEw",
      "avatar_url": "https://avatars3.githubusercontent.com/u/25105210?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/antvig",
      "html_url": "https://github.com/antvig",
      "followers_url": "https://api.github.com/users/antvig/followers",
      "following_url": "https://api.github.com/users/antvig/following{/other_user}",
      "gists_url": "https://api.github.com/users/antvig/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/antvig/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/antvig/subscriptions",
      "organizations_url": "https://api.github.com/users/antvig/orgs",
      "repos_url": "https://api.github.com/users/antvig/repos",
      "events_url": "https://api.github.com/users/antvig/events{/privacy}",
      "received_events_url": "https://api.github.com/users/antvig/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-28T16:39:26Z",
    "updated_at": "2017-11-28T16:39:26Z",
    "author_association": "NONE",
    "body": "The issue is from DatetimeIndex : when creating a localized DatetimeIndex, the DatetimeIndex and Timestamps in the DatetimeIndex have different tzinfo ...\r\n\r\n```\r\nIn [9]: idx = pd.DatetimeIndex(start='2011-01-01', periods=3, freq='H', tz='Europe/Paris')\r\n\r\nIn [10]: idx.tzinfo\r\nOut[10]: <DstTzInfo 'Europe/Paris' LMT+0:09:00 STD>\r\n\r\nIn [11]: idx[0].tzinfo\r\nOut[11]: <DstTzInfo 'Europe/Paris' CET+1:00:00 STD>\r\n```"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/347834068",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18523#issuecomment-347834068",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18523",
    "id": 347834068,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NzgzNDA2OA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-29T11:34:49Z",
    "updated_at": "2017-11-29T11:34:49Z",
    "author_association": "CONTRIBUTOR",
    "body": "@antvig this is a bug, probably a duplicate of something in : https://github.com/pandas-dev/pandas/issues?q=is%3Aopen+is%3Aissue+label%3AReshaping+label%3ATimezones\r\n\r\nbut not because of what you show: https://github.com/pandas-dev/pandas/issues/18523#issuecomment-347583582\r\n\r\nrather the combined index is reset to UTC rather than preserve the incoming tz. \r\n\r\ni'll mark this."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/347837147",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18523#issuecomment-347837147",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18523",
    "id": 347837147,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NzgzNzE0Nw==",
    "user": {
      "login": "antvig",
      "id": 25105210,
      "node_id": "MDQ6VXNlcjI1MTA1MjEw",
      "avatar_url": "https://avatars3.githubusercontent.com/u/25105210?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/antvig",
      "html_url": "https://github.com/antvig",
      "followers_url": "https://api.github.com/users/antvig/followers",
      "following_url": "https://api.github.com/users/antvig/following{/other_user}",
      "gists_url": "https://api.github.com/users/antvig/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/antvig/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/antvig/subscriptions",
      "organizations_url": "https://api.github.com/users/antvig/orgs",
      "repos_url": "https://api.github.com/users/antvig/repos",
      "events_url": "https://api.github.com/users/antvig/events{/privacy}",
      "received_events_url": "https://api.github.com/users/antvig/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-29T11:48:57Z",
    "updated_at": "2017-11-29T11:48:57Z",
    "author_association": "NONE",
    "body": "The combined index preserve the incoming tz if the two dataframe indexes have exactly the same timezone\r\n\r\n```\r\nidx1 = pd.date_range('2011-01-01', periods=3, freq='H', tz='Europe/Paris')\r\nidx2 = pd.date_range('2011-01-01', periods=3, freq='H', tz='Europe/Paris')\r\n\r\ndf1 = pd.DataFrame({'a': [1, 2, 3]}, index=idx1)\r\ndf2 = pd.DataFrame({'b': [1, 2, 3]}, index=idx2)\r\nres = pd.concat([df1, df2], axis=1)\r\n\r\nprint(df1.index.tzinfo)\r\nprint(df2.index.tzinfo)\r\nprint(res.index.tzinfo)\r\n``` \r\n**Output**\r\n``` \r\nEurope/Paris\r\nEurope/Paris\r\nEurope/Paris\r\n``` "
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/347845102",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18523#issuecomment-347845102",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18523",
    "id": 347845102,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0Nzg0NTEwMg==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-29T12:25:24Z",
    "updated_at": "2017-11-29T12:25:24Z",
    "author_association": "MEMBER",
    "body": "Seem related to https://github.com/pandas-dev/pandas/issues/17572"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/347846784",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18523#issuecomment-347846784",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18523",
    "id": 347846784,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0Nzg0Njc4NA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-29T12:32:08Z",
    "updated_at": "2017-11-29T12:32:08Z",
    "author_association": "CONTRIBUTOR",
    "body": "@jorisvandenbossche see my comment above, #17572 is irrelevant"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/347847233",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18523#issuecomment-347847233",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18523",
    "id": 347847233,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0Nzg0NzIzMw==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-29T12:33:57Z",
    "updated_at": "2017-11-29T12:33:57Z",
    "author_association": "MEMBER",
    "body": "And how do you explain https://github.com/pandas-dev/pandas/issues/18523#issuecomment-347837147?"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/347850566",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18523#issuecomment-347850566",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18523",
    "id": 347850566,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0Nzg1MDU2Ng==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-29T12:48:23Z",
    "updated_at": "2017-11-29T12:48:23Z",
    "author_association": "MEMBER",
    "body": "This is due to `_maybe_utc_convert` which checks the timezones by equality:\r\n\r\nhttps://github.com/pandas-dev/pandas/blob/d3c3c2b092b17aa720b489101d59d60aff8799da/pandas/core/indexes/datetimes.py#L1141-L1144\r\n\r\nAs explained in #17572, such equality check does not always give True, depending on how the `tzinfo` object is constructed, although they are in the same timezone (#17572 links to this [SO question](https://stackoverflow.com/questions/24359540/why-doesnt-pytz-localize-produce-a-datetime-object-with-tzinfo-matching-the-t))"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/348539462",
    "html_url": "https://github.com/pandas-dev/pandas/issues/18523#issuecomment-348539462",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/18523",
    "id": 348539462,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0ODUzOTQ2Mg==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-01T16:24:07Z",
    "updated_at": "2017-12-01T16:24:07Z",
    "author_association": "CONTRIBUTOR",
    "body": "here is a patch to fix:\r\n\r\n```\r\ndiff --git a/pandas/core/indexes/datetimes.py b/pandas/core/indexes/datetimes.py\r\nindex 196c881f9..01229e042 100644\r\n--- a/pandas/core/indexes/datetimes.py\r\n+++ b/pandas/core/indexes/datetimes.py\r\n@@ -1138,7 +1138,7 @@ class DatetimeIndex(DatelikeOps, TimelikeOps, DatetimeIndexOpsMixin,\r\n                 raise TypeError('Cannot join tz-naive with tz-aware '\r\n                                 'DatetimeIndex')\r\n \r\n-            if self.tz != other.tz:\r\n+            if str(self.tz) != str(other.tz):\r\n                 this = self.tz_convert('UTC')\r\n                 other = other.tz_convert('UTC')\r\n         return this, other\r\n```\r\n\r\n\r\nthanks to @pganssle for the advice!"
  }
]
