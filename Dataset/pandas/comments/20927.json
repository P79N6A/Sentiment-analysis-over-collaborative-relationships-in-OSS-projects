[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/406031517",
    "html_url": "https://github.com/pandas-dev/pandas/issues/20927#issuecomment-406031517",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/20927",
    "id": 406031517,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNjAzMTUxNw==",
    "user": {
      "login": "paul-lilley",
      "id": 38343013,
      "node_id": "MDQ6VXNlcjM4MzQzMDEz",
      "avatar_url": "https://avatars0.githubusercontent.com/u/38343013?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paul-lilley",
      "html_url": "https://github.com/paul-lilley",
      "followers_url": "https://api.github.com/users/paul-lilley/followers",
      "following_url": "https://api.github.com/users/paul-lilley/following{/other_user}",
      "gists_url": "https://api.github.com/users/paul-lilley/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paul-lilley/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paul-lilley/subscriptions",
      "organizations_url": "https://api.github.com/users/paul-lilley/orgs",
      "repos_url": "https://api.github.com/users/paul-lilley/repos",
      "events_url": "https://api.github.com/users/paul-lilley/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paul-lilley/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-18T18:34:40Z",
    "updated_at": "2018-07-18T18:34:40Z",
    "author_association": "NONE",
    "body": "I've dug a bit more into this.\r\n\r\nThe exception throws from \r\nFile \"pandas/_libs/tslibs/timedeltas.pyx\", line 237, in pandas._libs.tslibs.timedeltas.cast_from_unit\r\nwhich tries to cast the number of days from SAS epoch (midnight 1960-01-01) to 9999-12-31 to nanoseconds and return it as an int64_t\r\n(as an aside the correct number of days is 2932896 but 2932894 is passed in - I think this is a follow-through error\r\nfrom SAS7BDAT which pandas uses as direct use of SAS7BDAT converts 9999-12-31 to 9999-12-29 - i.e. the same 2-day diff)\r\nAnyhow, 2932894 * 1000000000L * 86400 is too large for an int64_t => exception \"OverflowError: int too big to convert\"\r\n\r\nquestion is - why convert a datediff in days to nanosecs?\r\nanswer is likely that the function _libs.tslibs.timedeltas.cast_from_unit is generic and not just for importing data from SAS\r\n\r\naccording to http://support.sas.com/documentation/cdl/en/etsug/63939/HTML/default/viewer.htm#etsug_tsdata_sect006.htm\r\nSAS datetimes are the number of seconds the time is from midnight, 1 January 1960.  \r\nAll numerics in SAS are floating point so milliseconds in a SAS datetime can be stored in the fractional part but \r\nthere is insufficient precision to store nanoseconds in a SAS datetime.\r\n(see https://support.sas.com/resources/papers/proceedings16/SAS2802-2016.pdf for a suggested workaround)\r\ni.e. nanosecond granularity is never needed for converting SAS dates or datetimes\r\n\r\nsolutions?\r\na) return an int128_t from pandas._libs.tslibs.timedeltas.cast_from_unit\r\nb) have a separate conversion for SAS dates - maybe just use what SAS7BDAT gives ? (and fix the out-by-two-days error in SAS7BDAT rather than pandas)\r\n\r\nPS - Not sure the Timeseries label is appropriate for this"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/406031745",
    "html_url": "https://github.com/pandas-dev/pandas/issues/20927#issuecomment-406031745",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/20927",
    "id": 406031745,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNjAzMTc0NQ==",
    "user": {
      "login": "paul-lilley",
      "id": 38343013,
      "node_id": "MDQ6VXNlcjM4MzQzMDEz",
      "avatar_url": "https://avatars0.githubusercontent.com/u/38343013?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paul-lilley",
      "html_url": "https://github.com/paul-lilley",
      "followers_url": "https://api.github.com/users/paul-lilley/followers",
      "following_url": "https://api.github.com/users/paul-lilley/following{/other_user}",
      "gists_url": "https://api.github.com/users/paul-lilley/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paul-lilley/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paul-lilley/subscriptions",
      "organizations_url": "https://api.github.com/users/paul-lilley/orgs",
      "repos_url": "https://api.github.com/users/paul-lilley/repos",
      "events_url": "https://api.github.com/users/paul-lilley/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paul-lilley/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-18T18:35:22Z",
    "updated_at": "2018-07-18T18:35:22Z",
    "author_association": "NONE",
    "body": "Oops - didn't mean to close."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/406049312",
    "html_url": "https://github.com/pandas-dev/pandas/issues/20927#issuecomment-406049312",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/20927",
    "id": 406049312,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNjA0OTMxMg==",
    "user": {
      "login": "paul-lilley",
      "id": 38343013,
      "node_id": "MDQ6VXNlcjM4MzQzMDEz",
      "avatar_url": "https://avatars0.githubusercontent.com/u/38343013?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paul-lilley",
      "html_url": "https://github.com/paul-lilley",
      "followers_url": "https://api.github.com/users/paul-lilley/followers",
      "following_url": "https://api.github.com/users/paul-lilley/following{/other_user}",
      "gists_url": "https://api.github.com/users/paul-lilley/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paul-lilley/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paul-lilley/subscriptions",
      "organizations_url": "https://api.github.com/users/paul-lilley/orgs",
      "repos_url": "https://api.github.com/users/paul-lilley/repos",
      "events_url": "https://api.github.com/users/paul-lilley/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paul-lilley/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-18T19:37:12Z",
    "updated_at": "2018-07-18T19:37:12Z",
    "author_association": "NONE",
    "body": "The SAS import issue is NOT related to the format of the very high dates - i.e. 31DEC9999 or 9999-12-31 as a SAS format both fail.  \r\nThe root problem is the conversion via nanoseconds in _libs.tslibs.timedeltas.cast_from_unit which is used by to_datetime()"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/406069951",
    "html_url": "https://github.com/pandas-dev/pandas/issues/20927#issuecomment-406069951",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/20927",
    "id": 406069951,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNjA2OTk1MQ==",
    "user": {
      "login": "paul-lilley",
      "id": 38343013,
      "node_id": "MDQ6VXNlcjM4MzQzMDEz",
      "avatar_url": "https://avatars0.githubusercontent.com/u/38343013?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paul-lilley",
      "html_url": "https://github.com/paul-lilley",
      "followers_url": "https://api.github.com/users/paul-lilley/followers",
      "following_url": "https://api.github.com/users/paul-lilley/following{/other_user}",
      "gists_url": "https://api.github.com/users/paul-lilley/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paul-lilley/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paul-lilley/subscriptions",
      "organizations_url": "https://api.github.com/users/paul-lilley/orgs",
      "repos_url": "https://api.github.com/users/paul-lilley/repos",
      "events_url": "https://api.github.com/users/paul-lilley/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paul-lilley/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-18T20:50:30Z",
    "updated_at": "2018-07-18T20:50:30Z",
    "author_association": "NONE",
    "body": "Thanks to comment from @jschendel on #21972 a possible resolution to this may to be catch the pandas._libs.tslib.OutOfBoundsDatetime and convert larger dates to Periods https://pandas.pydata.org/pandas-docs/stable/timeseries.html#timeseries-oob"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/406430114",
    "html_url": "https://github.com/pandas-dev/pandas/issues/20927#issuecomment-406430114",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/20927",
    "id": 406430114,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNjQzMDExNA==",
    "user": {
      "login": "paul-lilley",
      "id": 38343013,
      "node_id": "MDQ6VXNlcjM4MzQzMDEz",
      "avatar_url": "https://avatars0.githubusercontent.com/u/38343013?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paul-lilley",
      "html_url": "https://github.com/paul-lilley",
      "followers_url": "https://api.github.com/users/paul-lilley/followers",
      "following_url": "https://api.github.com/users/paul-lilley/following{/other_user}",
      "gists_url": "https://api.github.com/users/paul-lilley/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paul-lilley/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paul-lilley/subscriptions",
      "organizations_url": "https://api.github.com/users/paul-lilley/orgs",
      "repos_url": "https://api.github.com/users/paul-lilley/repos",
      "events_url": "https://api.github.com/users/paul-lilley/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paul-lilley/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-19T22:11:00Z",
    "updated_at": "2018-07-19T22:11:00Z",
    "author_association": "NONE",
    "body": "On second thoughts, I think a better approach is exposing the convert_dates=bool parameter from the underlying SAS7BDATReader up to read_sas().  \r\nThis retains current functionality but also allows catching the exception for very high datetimes/dates and re-reading with the dates/datetimes as SAS native float64 values which can then be converted/cleansed/capped as required.\r\n\r\nI've forked, altered and filed a pull-request - first time I've done this so any feedback is most welcome."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/455534182",
    "html_url": "https://github.com/pandas-dev/pandas/issues/20927#issuecomment-455534182",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/20927",
    "id": 455534182,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1NTUzNDE4Mg==",
    "user": {
      "login": "sunilkalmadi",
      "id": 41113342,
      "node_id": "MDQ6VXNlcjQxMTEzMzQy",
      "avatar_url": "https://avatars2.githubusercontent.com/u/41113342?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sunilkalmadi",
      "html_url": "https://github.com/sunilkalmadi",
      "followers_url": "https://api.github.com/users/sunilkalmadi/followers",
      "following_url": "https://api.github.com/users/sunilkalmadi/following{/other_user}",
      "gists_url": "https://api.github.com/users/sunilkalmadi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sunilkalmadi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sunilkalmadi/subscriptions",
      "organizations_url": "https://api.github.com/users/sunilkalmadi/orgs",
      "repos_url": "https://api.github.com/users/sunilkalmadi/repos",
      "events_url": "https://api.github.com/users/sunilkalmadi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sunilkalmadi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-18T12:44:09Z",
    "updated_at": "2019-01-18T12:44:09Z",
    "author_association": "NONE",
    "body": "Hi @paul-lilley \r\nThanks for your work here.\r\nI am currently facing this issue. Did you solve the problem?"
  }
]
