[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/387533372",
    "html_url": "https://github.com/pandas-dev/pandas/pull/20980#issuecomment-387533372",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/20980",
    "id": 387533372,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4NzUzMzM3Mg==",
    "user": {
      "login": "pep8speaks",
      "id": 24736507,
      "node_id": "MDQ6VXNlcjI0NzM2NTA3",
      "avatar_url": "https://avatars1.githubusercontent.com/u/24736507?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pep8speaks",
      "html_url": "https://github.com/pep8speaks",
      "followers_url": "https://api.github.com/users/pep8speaks/followers",
      "following_url": "https://api.github.com/users/pep8speaks/following{/other_user}",
      "gists_url": "https://api.github.com/users/pep8speaks/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pep8speaks/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pep8speaks/subscriptions",
      "organizations_url": "https://api.github.com/users/pep8speaks/orgs",
      "repos_url": "https://api.github.com/users/pep8speaks/repos",
      "events_url": "https://api.github.com/users/pep8speaks/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pep8speaks/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-08T20:33:12Z",
    "updated_at": "2018-05-14T21:28:24Z",
    "author_association": "NONE",
    "body": "Hello @WillAyd! Thanks for updating the PR.\n\n\n\n - In the file [`pandas/tests/frame/test_reshape.py`](https://github.com/pandas-dev/pandas/blob/a79eaf714c0466315760ec21472f77311e12cc0d/pandas/tests/frame/test_reshape.py), following are the PEP8 issues :\n\n> [Line 427:80](https://github.com/pandas-dev/pandas/blob/a79eaf714c0466315760ec21472f77311e12cc0d/pandas/tests/frame/test_reshape.py#L427): [E501](https://duckduckgo.com/?q=pep8%20E501) line too long (81 > 79 characters)\n\n\n\n##### Comment last updated on May 14, 2018 at 21:28 Hours UTC"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/387542362",
    "html_url": "https://github.com/pandas-dev/pandas/pull/20980#issuecomment-387542362",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/20980",
    "id": 387542362,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4NzU0MjM2Mg==",
    "user": {
      "login": "WillAyd",
      "id": 609873,
      "node_id": "MDQ6VXNlcjYwOTg3Mw==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/609873?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/WillAyd",
      "html_url": "https://github.com/WillAyd",
      "followers_url": "https://api.github.com/users/WillAyd/followers",
      "following_url": "https://api.github.com/users/WillAyd/following{/other_user}",
      "gists_url": "https://api.github.com/users/WillAyd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/WillAyd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/WillAyd/subscriptions",
      "organizations_url": "https://api.github.com/users/WillAyd/orgs",
      "repos_url": "https://api.github.com/users/WillAyd/repos",
      "events_url": "https://api.github.com/users/WillAyd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/WillAyd/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-08T21:06:10Z",
    "updated_at": "2018-05-08T21:07:12Z",
    "author_association": "MEMBER",
    "body": "Good to know, though I must have explained the issue incorrectly. Within the call to `_stack_multi_columns` on master here's how the column index of the failing example looks:\r\n\r\n```python\r\nMultiIndex(levels=[['A', 'B'], ['a', 'b', 'c', 'd']],\r\n           labels=[[0, 0, 0, 0, 1, 1, 1, 1], [2, 1, 0, 3, 2, 1, 0, 3]],\r\n           names=['dim2', 'foo'])\r\n```\r\n\r\nI built another DataFrame manually which was equivalent (at least according to `tm.assert_frame_equal`) and had a column index that look as follows:\r\n\r\n```python\r\nMultiIndex(levels=[['A', 'B'], ['c', 'b', 'a', 'd']],\r\n           labels=[[0, 0, 0, 0, 1, 1, 1, 1], [0, 1, 2, 3, 0, 1, 2, 3]],\r\n           names=['dim2', 'foo'])\r\n```\r\n\r\nThe former yielded incorrect results at the end of the stack operation but the latter was fine, even though they were coming from two frames that look exactly the same. \r\n\r\nI believe the problem is that when iterating over the groups, `_stack_multi_columns` gets a slice of the frames' values. With the latter, getting a slice of the 4 values at a time keeps it aligned with the second level labels since they are sequential. That does not apply to the former example hence the issue.\r\n\r\nIs the fact that the values of the DataFrame do not align with the labels of the column index by design?"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/387701749",
    "html_url": "https://github.com/pandas-dev/pandas/pull/20980#issuecomment-387701749",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/20980",
    "id": 387701749,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4NzcwMTc0OQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-09T10:56:18Z",
    "updated_at": "2018-05-09T10:56:18Z",
    "author_association": "CONTRIBUTOR",
    "body": "eg.\r\n```\r\nIn [2]: mi = pd.MultiIndex(levels=[['A', 'B'], ['c', 'b', 'a', 'd']],\r\n   ...:            labels=[[0, 0, 0, 0, 1, 1, 1, 1], [0, 1, 2, 3, 0, 1, 2, 3]],\r\n   ...:            names=['dim2', 'foo'])\r\n   ...:            \r\n\r\nIn [3]: mi._sort_levels_monotonic()\r\nOut[3]: \r\nMultiIndex(levels=[['A', 'B'], ['a', 'b', 'c', 'd']],\r\n           labels=[[0, 0, 0, 0, 1, 1, 1, 1], [2, 1, 0, 3, 2, 1, 0, 3]],\r\n           names=['dim2', 'foo'])\r\n```"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/394108039",
    "html_url": "https://github.com/pandas-dev/pandas/pull/20980#issuecomment-394108039",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/20980",
    "id": 394108039,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NDEwODAzOQ==",
    "user": {
      "login": "WillAyd",
      "id": 609873,
      "node_id": "MDQ6VXNlcjYwOTg3Mw==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/609873?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/WillAyd",
      "html_url": "https://github.com/WillAyd",
      "followers_url": "https://api.github.com/users/WillAyd/followers",
      "following_url": "https://api.github.com/users/WillAyd/following{/other_user}",
      "gists_url": "https://api.github.com/users/WillAyd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/WillAyd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/WillAyd/subscriptions",
      "organizations_url": "https://api.github.com/users/WillAyd/orgs",
      "repos_url": "https://api.github.com/users/WillAyd/repos",
      "events_url": "https://api.github.com/users/WillAyd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/WillAyd/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-02T18:42:28Z",
    "updated_at": "2018-06-02T18:42:28Z",
    "author_association": "MEMBER",
    "body": "solved via #21043"
  }
]
