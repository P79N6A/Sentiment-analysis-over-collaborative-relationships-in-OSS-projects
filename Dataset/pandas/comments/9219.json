[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/69417224",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9219#issuecomment-69417224",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9219",
    "id": 69417224,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5NDE3MjI0",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-01-09T23:16:46Z",
    "updated_at": "2015-01-09T23:16:46Z",
    "author_association": "CONTRIBUTOR",
    "body": "You are violating the guarantees of HDF5. The only allowed file access is thru those constructors. You will get this error if the file is previously constructed and not HDF5.\n\nI suppose a better error message is in order. I would raise this on the `PyTables` side. This only happens on 3.4.\n\nThe obvious solution is when you are not appending always to open with `mode='w'`\n\n```\nIn [12]: !rm foo.h5\n\nIn [13]: df = pd.DataFrame({'a': [1, 2, 3]})\n\nIn [14]: df.to_hdf('foo.h5', '/data', append=True)\n\nIn [15]: !rm foo.h5\n\nIn [16]: with open('foo.h5','wb') as fh:\n    pass\n   ....: \n\nIn [17]: df.to_hdf('foo.h5', '/data', append=True)\nTypeError: unorderable types: NoneType() >= tuple()\n\nIn [18]: df.to_hdf('foo.h5', '/data', append=True, mode='w')\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/69420901",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9219#issuecomment-69420901",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9219",
    "id": 69420901,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5NDIwOTAx",
    "user": {
      "login": "mrocklin",
      "id": 306380,
      "node_id": "MDQ6VXNlcjMwNjM4MA==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/306380?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mrocklin",
      "html_url": "https://github.com/mrocklin",
      "followers_url": "https://api.github.com/users/mrocklin/followers",
      "following_url": "https://api.github.com/users/mrocklin/following{/other_user}",
      "gists_url": "https://api.github.com/users/mrocklin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mrocklin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mrocklin/subscriptions",
      "organizations_url": "https://api.github.com/users/mrocklin/orgs",
      "repos_url": "https://api.github.com/users/mrocklin/repos",
      "events_url": "https://api.github.com/users/mrocklin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mrocklin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-01-09T23:42:11Z",
    "updated_at": "2015-01-09T23:42:11Z",
    "author_association": "CONTRIBUTOR",
    "body": "Alrighty.  Thanks for the explanation.  That helps.\n\nOn Fri, Jan 9, 2015 at 3:16 PM, jreback notifications@github.com wrote:\n\n> Closed #9219 https://github.com/pydata/pandas/issues/9219.\n> \n> â€”\n> Reply to this email directly or view it on GitHub\n> https://github.com/pydata/pandas/issues/9219#event-216818788.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/88008636",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9219#issuecomment-88008636",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9219",
    "id": 88008636,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg4MDA4NjM2",
    "user": {
      "login": "cachitas",
      "id": 2321514,
      "node_id": "MDQ6VXNlcjIzMjE1MTQ=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/2321514?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cachitas",
      "html_url": "https://github.com/cachitas",
      "followers_url": "https://api.github.com/users/cachitas/followers",
      "following_url": "https://api.github.com/users/cachitas/following{/other_user}",
      "gists_url": "https://api.github.com/users/cachitas/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cachitas/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cachitas/subscriptions",
      "organizations_url": "https://api.github.com/users/cachitas/orgs",
      "repos_url": "https://api.github.com/users/cachitas/repos",
      "events_url": "https://api.github.com/users/cachitas/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cachitas/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-03-31T09:13:39Z",
    "updated_at": "2015-03-31T09:15:05Z",
    "author_association": "NONE",
    "body": "I don't understand the above explanation and I'm having a similar issue.\n\n```\nwith pd.HDFStore(filename) as store:\n    store.put('/', df,\n                   mode='w',  # if I comment this I still have the error\n                   append=True,  # True or False, the error is here\n                   format='table',\n                   data_columns=True,\n                   encoding='utf-8',\n                   dropna=False)\n```\n\nThis line is also giving me the error mentioned. If I comment out the `format='table'` line, it works. @jreback, an you elaborate?\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/88054938",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9219#issuecomment-88054938",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9219",
    "id": 88054938,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg4MDU0OTM4",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-03-31T11:39:01Z",
    "updated_at": "2015-03-31T11:39:01Z",
    "author_association": "CONTRIBUTOR",
    "body": "well in order to have an hdf5 you must create it with the hdf5 constructors. you cannot create it by doing say open('file.h5') and thrn trying to write hdf5 to it. \n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/289520287",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9219#issuecomment-289520287",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9219",
    "id": 289520287,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4OTUyMDI4Nw==",
    "user": {
      "login": "iipr",
      "id": 17690149,
      "node_id": "MDQ6VXNlcjE3NjkwMTQ5",
      "avatar_url": "https://avatars3.githubusercontent.com/u/17690149?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/iipr",
      "html_url": "https://github.com/iipr",
      "followers_url": "https://api.github.com/users/iipr/followers",
      "following_url": "https://api.github.com/users/iipr/following{/other_user}",
      "gists_url": "https://api.github.com/users/iipr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/iipr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iipr/subscriptions",
      "organizations_url": "https://api.github.com/users/iipr/orgs",
      "repos_url": "https://api.github.com/users/iipr/repos",
      "events_url": "https://api.github.com/users/iipr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/iipr/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-27T17:13:33Z",
    "updated_at": "2017-03-27T17:13:33Z",
    "author_association": "NONE",
    "body": "I don't understand the answer, maybe what I am trying to do cannot be achieved in this way. I am using h5py to create the HDF5 file and its internal structure. A normal workflow for me would be:\r\n1. Create a new HDF5 file: \r\n```\r\nimport h5py\r\nimport pandas as pd\r\nf = h5py.File('file.hdf5', 'a')\r\n```\r\n2. Create a group and dataset: \r\n```\r\ngrp = f.create_group('One_Group')\r\ndset = f.create_dataset('One_Group/One_Dset', (100,), dtype='S10')\r\n```\r\n3. Every time I have new data, append it to the corresponding dataset:\r\n```\r\ndf = pd.read_table('data.csv', sep='\\t')\r\ndf.to_hdf('file.hdf5', '/One_Group/One_Dset', append=True, mode='a')\r\n```\r\nOutput of the last line:\r\n```\r\nD:\\...\\lib\\site-packages\\tables\\leaf.py in __init__(self, parentnode, name, new, filters, byteorder, _log)\r\n    255             # Get filter properties from parent group if not given.\r\n    256             if filters is None:\r\n--> 257                 filters = parentnode._v_filters\r\n    258             self.__dict__['filters'] = filters  # bypass the property\r\n    259 \r\n\r\nAttributeError: 'Array' object has no attribute '_v_filters'\r\n```\r\nAny idea of what is wrong?"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/289524565",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9219#issuecomment-289524565",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9219",
    "id": 289524565,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4OTUyNDU2NQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-27T17:28:21Z",
    "updated_at": "2017-03-27T17:28:21Z",
    "author_association": "CONTRIBUTOR",
    "body": "@iipr ``HDFStore`` is based upon ``pytables``, see the docs [here](http://pandas.pydata.org/pandas-docs/stable/io.html#hdf5-pytables)\r\n\r\nit can *read* ``h5py`` files, but not write them, and certainly not by opening a ``h5py`` in that way. You *can* open a ``PyTables`` file directly and do what you are doing. But really no need for that as ``to_hdf`` (and ``HDFStore``) can take care of the file IO directly.\r\n\r\nIn the future this may be possible (as ``h5py`` and ``PyTables`` are combining the formats), but not today."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/289758556",
    "html_url": "https://github.com/pandas-dev/pandas/issues/9219#issuecomment-289758556",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/9219",
    "id": 289758556,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4OTc1ODU1Ng==",
    "user": {
      "login": "iipr",
      "id": 17690149,
      "node_id": "MDQ6VXNlcjE3NjkwMTQ5",
      "avatar_url": "https://avatars3.githubusercontent.com/u/17690149?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/iipr",
      "html_url": "https://github.com/iipr",
      "followers_url": "https://api.github.com/users/iipr/followers",
      "following_url": "https://api.github.com/users/iipr/following{/other_user}",
      "gists_url": "https://api.github.com/users/iipr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/iipr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iipr/subscriptions",
      "organizations_url": "https://api.github.com/users/iipr/orgs",
      "repos_url": "https://api.github.com/users/iipr/repos",
      "events_url": "https://api.github.com/users/iipr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/iipr/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-28T12:48:04Z",
    "updated_at": "2017-03-28T12:48:04Z",
    "author_association": "NONE",
    "body": "I see, thanks a lot. You are right, I read [this](https://hdfgroup.org/wp/2015/09/python-hdf5-a-vision/) some time ago, but I didn't know if the combination of `h5py` and `PyTables` was already happening or not.\r\n\r\nI will probably start working with `PyTables` to see if it goes fine for my project then."
  }
]
