[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/30166001",
    "html_url": "https://github.com/pandas-dev/pandas/issues/5671#issuecomment-30166001",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/5671",
    "id": 30166001,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwMTY2MDAx",
    "user": {
      "login": "rosnfeld",
      "id": 5356340,
      "node_id": "MDQ6VXNlcjUzNTYzNDA=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/5356340?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rosnfeld",
      "html_url": "https://github.com/rosnfeld",
      "followers_url": "https://api.github.com/users/rosnfeld/followers",
      "following_url": "https://api.github.com/users/rosnfeld/following{/other_user}",
      "gists_url": "https://api.github.com/users/rosnfeld/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rosnfeld/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rosnfeld/subscriptions",
      "organizations_url": "https://api.github.com/users/rosnfeld/orgs",
      "repos_url": "https://api.github.com/users/rosnfeld/repos",
      "events_url": "https://api.github.com/users/rosnfeld/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rosnfeld/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-12-09T19:42:11Z",
    "updated_at": "2013-12-09T19:42:11Z",
    "author_association": "CONTRIBUTOR",
    "body": "(I should also note that this extends to much larger cases than this toy example, I found it first by trying to migrate to corrwith on much larger scale real-world code)\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/30169082",
    "html_url": "https://github.com/pandas-dev/pandas/issues/5671#issuecomment-30169082",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/5671",
    "id": 30169082,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwMTY5MDgy",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-12-09T20:17:00Z",
    "updated_at": "2013-12-09T20:17:00Z",
    "author_association": "CONTRIBUTOR",
    "body": "The case of a frame with a series is doing a directly apply (as you mentioned).\n\nIf you create a repeated frame of the series, align it, you will see much greater perf.\n\nAlignment is generally the responsibility of the user, however in this case it should be done inside the function (rather than passing to apply). Would appreciate a PR for this. thanks.\n\n```\nIn [28]: df.info()\n<class 'pandas.core.frame.DataFrame'>\nInt64Index: 3360 entries, 0 to 3359\nColumns: 4096 entries, 0 to 4095\ndtypes: float64(4096)\n\nIn [27]: df2 = DataFrame({i:s for i in df.columns})\n\nIn [29]: df2.info()\n<class 'pandas.core.frame.DataFrame'>\nInt64Index: 4096 entries, 0 to 4095\nColumns: 4096 entries, 0 to 4095\ndtypes: float64(4096)\n\nIn [30]: left,right=df.align(df2,join='inner')\n```\n\ntimings\n\n```\nIn [32]: %timeit -n 3 left.corrwith(right)\n3 loops, best of 3: 767 ms per loop\n\nIn [33]: %timeit -n 3 df.apply((lambda x: np.corrcoef(x.values, s.values)[0, 1]), axis=1)\n%timeit -n 3 df.corrwith(s, axis=1)\n3 loops, best of 3: 930 ms per loop\n\nIn [34]: %timeit -n 3 df.corrwith(s, axis=1)\n3 loops, best of 3: 2 s per loop\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/30467581",
    "html_url": "https://github.com/pandas-dev/pandas/issues/5671#issuecomment-30467581",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/5671",
    "id": 30467581,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwNDY3NTgx",
    "user": {
      "login": "rosnfeld",
      "id": 5356340,
      "node_id": "MDQ6VXNlcjUzNTYzNDA=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/5356340?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rosnfeld",
      "html_url": "https://github.com/rosnfeld",
      "followers_url": "https://api.github.com/users/rosnfeld/followers",
      "following_url": "https://api.github.com/users/rosnfeld/following{/other_user}",
      "gists_url": "https://api.github.com/users/rosnfeld/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rosnfeld/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rosnfeld/subscriptions",
      "organizations_url": "https://api.github.com/users/rosnfeld/orgs",
      "repos_url": "https://api.github.com/users/rosnfeld/repos",
      "events_url": "https://api.github.com/users/rosnfeld/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rosnfeld/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-12-12T22:14:51Z",
    "updated_at": "2013-12-12T22:14:51Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hmm, if I'm understanding you correctly, I think \"df2\" should contain one copy of \"s\" per row, not per column:\n\n``` python\ndf2 = pd.DataFrame({i:s for i in range(len(df))}).T\n```\n\nas I'm trying to take the correlation of each 4096-point row with a given \"signature\" Series (and there can be a variable number of rows).\n\n```\nIn [81]: df.info()\n<class 'pandas.core.frame.DataFrame'>\nInt64Index: 3360 entries, 0 to 3359\nColumns: 4096 entries, 0 to 4095\ndtypes: float64(4096)\n\nIn [82]: df2.info()\n<class 'pandas.core.frame.DataFrame'>\nInt64Index: 3360 entries, 0 to 3359\nColumns: 4096 entries, 0 to 4095\ndtypes: float64(4096)\n\nIn [83]: left, right = df.align(df2, join='inner')\n```\n\nAnd then unfortunately I am not observing any benefit to using the frame.corrwith(frame) approach, performance-wise. (and we also haven't counted the cost of setting up df2, left, and right)\n\n```\nIn [89]: %timeit -n 3 left.corrwith(right, axis=1)\n3 loops, best of 3: 1.59 s per loop\n\nIn [90]: %timeit -n 3 df.apply((lambda x: np.corrcoef(x.values, s.values)[0, 1]), axis=1)\n3 loops, best of 3: 733 ms per loop\n\nIn [91]: %timeit -n 3 df.corrwith(s, axis=1)\n3 loops, best of 3: 1.62 s per loop\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/30509057",
    "html_url": "https://github.com/pandas-dev/pandas/issues/5671#issuecomment-30509057",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/5671",
    "id": 30509057,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwNTA5MDU3",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-12-13T13:30:46Z",
    "updated_at": "2013-12-13T13:30:46Z",
    "author_association": "CONTRIBUTOR",
    "body": "ok..would welcome a PR on this; you might be able to just change `corrwith` to do the apply like you have it for certain cases then\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/30556065",
    "html_url": "https://github.com/pandas-dev/pandas/issues/5671#issuecomment-30556065",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/5671",
    "id": 30556065,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwNTU2MDY1",
    "user": {
      "login": "rosnfeld",
      "id": 5356340,
      "node_id": "MDQ6VXNlcjUzNTYzNDA=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/5356340?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rosnfeld",
      "html_url": "https://github.com/rosnfeld",
      "followers_url": "https://api.github.com/users/rosnfeld/followers",
      "following_url": "https://api.github.com/users/rosnfeld/following{/other_user}",
      "gists_url": "https://api.github.com/users/rosnfeld/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rosnfeld/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rosnfeld/subscriptions",
      "organizations_url": "https://api.github.com/users/rosnfeld/orgs",
      "repos_url": "https://api.github.com/users/rosnfeld/repos",
      "events_url": "https://api.github.com/users/rosnfeld/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rosnfeld/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-12-14T01:10:48Z",
    "updated_at": "2013-12-14T01:10:48Z",
    "author_association": "CONTRIBUTOR",
    "body": "Sounds good, I'll try. I haven't contributed to Pandas before so may take me a while to get set up.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/30556267",
    "html_url": "https://github.com/pandas-dev/pandas/issues/5671#issuecomment-30556267",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/5671",
    "id": 30556267,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwNTU2MjY3",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-12-14T01:17:33Z",
    "updated_at": "2013-12-14T01:17:33Z",
    "author_association": "CONTRIBUTOR",
    "body": "np\n\nthis would be a nice intro that is pretty straightforward \n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/33497468",
    "html_url": "https://github.com/pandas-dev/pandas/issues/5671#issuecomment-33497468",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/5671",
    "id": 33497468,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzNDk3NDY4",
    "user": {
      "login": "rosnfeld",
      "id": 5356340,
      "node_id": "MDQ6VXNlcjUzNTYzNDA=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/5356340?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rosnfeld",
      "html_url": "https://github.com/rosnfeld",
      "followers_url": "https://api.github.com/users/rosnfeld/followers",
      "following_url": "https://api.github.com/users/rosnfeld/following{/other_user}",
      "gists_url": "https://api.github.com/users/rosnfeld/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rosnfeld/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rosnfeld/subscriptions",
      "organizations_url": "https://api.github.com/users/rosnfeld/orgs",
      "repos_url": "https://api.github.com/users/rosnfeld/repos",
      "events_url": "https://api.github.com/users/rosnfeld/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rosnfeld/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-01-28T16:49:31Z",
    "updated_at": "2014-01-28T16:49:31Z",
    "author_association": "CONTRIBUTOR",
    "body": "Apologies for letting this sit open so long. I did take a look at it, and concluded that pandas is adding significant functionality on top of raw numpy corrcoef, through data alignment and avoidance of nan values. This functionality has a non-trivial cost (sadly I don't seem to have my profiling notes anymore), but also significant benefit, which I've taken advantage of on some newer projects. I think the moral of the story is \"use raw numpy if you have clean, complete data (i.e. you've pre-aligned and checked for/handled nan), otherwise use pandas\".\n\nAs I was the person to open this issue, I assume it's okay for me to close it as I don't think it's relevant anymore?\n\n(and I do hope to make some 'real' code contributions to pandas in the coming months, I have a few sketches of minor improvements)\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/33499698",
    "html_url": "https://github.com/pandas-dev/pandas/issues/5671#issuecomment-33499698",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/5671",
    "id": 33499698,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzNDk5Njk4",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-01-28T17:09:24Z",
    "updated_at": "2014-01-28T17:09:24Z",
    "author_association": "CONTRIBUTOR",
    "body": "@rosnfeld np.....\n\nthis motivated #6013 which uses your example as a benchmark....get's a decent perf improvment in 0.13.1 (releasing next week)...\n"
  }
]
