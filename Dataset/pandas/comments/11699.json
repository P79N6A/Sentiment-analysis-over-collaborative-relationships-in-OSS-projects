[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/159611344",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11699#issuecomment-159611344",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11699",
    "id": 159611344,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1OTYxMTM0NA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-11-25T13:43:07Z",
    "updated_at": "2015-11-25T13:43:07Z",
    "author_association": "CONTRIBUTOR",
    "body": "cc @behzadnouri \n\n@Sereger13 I don't think their is an easy way around this w/o resorting to patching `DataFrame.groupby` to catch this situation (which while messy and normally nor recommended may work for you temporarily).\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/159613434",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11699#issuecomment-159613434",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11699",
    "id": 159613434,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1OTYxMzQzNA==",
    "user": {
      "login": "Sereger13",
      "id": 10167353,
      "node_id": "MDQ6VXNlcjEwMTY3MzUz",
      "avatar_url": "https://avatars0.githubusercontent.com/u/10167353?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sereger13",
      "html_url": "https://github.com/Sereger13",
      "followers_url": "https://api.github.com/users/Sereger13/followers",
      "following_url": "https://api.github.com/users/Sereger13/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sereger13/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Sereger13/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sereger13/subscriptions",
      "organizations_url": "https://api.github.com/users/Sereger13/orgs",
      "repos_url": "https://api.github.com/users/Sereger13/repos",
      "events_url": "https://api.github.com/users/Sereger13/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Sereger13/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-11-25T13:54:10Z",
    "updated_at": "2015-11-25T13:54:23Z",
    "author_association": "NONE",
    "body": "I see...\n\nWe found that this code:\n`count().iloc[:, 0]`\nproduces very similar results to size() and seems to be working for us - but does not look particularly attractive so still deciding whether to have it or not.\n\nIf you do decide to fix size() - is there any idea when the next version/patch is going to be available? Thanks..\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/159614782",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11699#issuecomment-159614782",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11699",
    "id": 159614782,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1OTYxNDc4Mg==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-11-25T13:59:59Z",
    "updated_at": "2015-11-25T13:59:59Z",
    "author_association": "CONTRIBUTOR",
    "body": "will be fixed; 0.18.0 prob later january\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/159615493",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11699#issuecomment-159615493",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11699",
    "id": 159615493,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1OTYxNTQ5Mw==",
    "user": {
      "login": "Sereger13",
      "id": 10167353,
      "node_id": "MDQ6VXNlcjEwMTY3MzUz",
      "avatar_url": "https://avatars0.githubusercontent.com/u/10167353?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sereger13",
      "html_url": "https://github.com/Sereger13",
      "followers_url": "https://api.github.com/users/Sereger13/followers",
      "following_url": "https://api.github.com/users/Sereger13/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sereger13/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Sereger13/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sereger13/subscriptions",
      "organizations_url": "https://api.github.com/users/Sereger13/orgs",
      "repos_url": "https://api.github.com/users/Sereger13/repos",
      "events_url": "https://api.github.com/users/Sereger13/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Sereger13/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-11-25T14:02:42Z",
    "updated_at": "2015-11-25T14:02:42Z",
    "author_association": "NONE",
    "body": "Thanks.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/159617222",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11699#issuecomment-159617222",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11699",
    "id": 159617222,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1OTYxNzIyMg==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-11-25T14:08:45Z",
    "updated_at": "2015-11-25T14:08:45Z",
    "author_association": "CONTRIBUTOR",
    "body": "@Sereger13 my point about patching is that you can avoid _any_ code changes.\n\nnote again that is a 'hack' but will work.\n\ne.g.\n\n```\nIn [109]: df1 = pd.DataFrame({'A': [], 'B': []})\n\nIn [110]: df2 = pd.DataFrame({'A': [1,2,1], 'B': [1,2,3]})\n\nIn [116]: def size(self):\n   .....:     try:\n   .....:         return self.grouper.size()\n   .....:     except ValueError:\n   .....:         self._set_selection_from_grouper()\n   .....:         return self._selected_obj[0:0]\n   .....:     \n\nIn [117]: pandas.core.groupby.GroupBy.size = size\n\nIn [118]: df1.groupby('A').size()\nOut[118]: \nEmpty DataFrame\nColumns: [B]\nIndex: []\n\nIn [119]: df2.groupby('A').size()\nOut[119]: \nA\n1    2\n2    1\ndtype: int64\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/159640435",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11699#issuecomment-159640435",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11699",
    "id": 159640435,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1OTY0MDQzNQ==",
    "user": {
      "login": "Sereger13",
      "id": 10167353,
      "node_id": "MDQ6VXNlcjEwMTY3MzUz",
      "avatar_url": "https://avatars0.githubusercontent.com/u/10167353?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sereger13",
      "html_url": "https://github.com/Sereger13",
      "followers_url": "https://api.github.com/users/Sereger13/followers",
      "following_url": "https://api.github.com/users/Sereger13/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sereger13/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Sereger13/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sereger13/subscriptions",
      "organizations_url": "https://api.github.com/users/Sereger13/orgs",
      "repos_url": "https://api.github.com/users/Sereger13/repos",
      "events_url": "https://api.github.com/users/Sereger13/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Sereger13/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-11-25T15:25:59Z",
    "updated_at": "2015-11-25T15:25:59Z",
    "author_association": "NONE",
    "body": "Great - thanks for your help.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/159940967",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11699#issuecomment-159940967",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11699",
    "id": 159940967,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1OTk0MDk2Nw==",
    "user": {
      "login": "behzadnouri",
      "id": 1288998,
      "node_id": "MDQ6VXNlcjEyODg5OTg=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1288998?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/behzadnouri",
      "html_url": "https://github.com/behzadnouri",
      "followers_url": "https://api.github.com/users/behzadnouri/followers",
      "following_url": "https://api.github.com/users/behzadnouri/following{/other_user}",
      "gists_url": "https://api.github.com/users/behzadnouri/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/behzadnouri/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/behzadnouri/subscriptions",
      "organizations_url": "https://api.github.com/users/behzadnouri/orgs",
      "repos_url": "https://api.github.com/users/behzadnouri/repos",
      "events_url": "https://api.github.com/users/behzadnouri/events{/privacy}",
      "received_events_url": "https://api.github.com/users/behzadnouri/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-11-26T15:34:38Z",
    "updated_at": "2015-11-26T15:34:38Z",
    "author_association": "CONTRIBUTOR",
    "body": "This is more a bug in [`np.bincount`](https://docs.scipy.org/doc/numpy/reference/generated/numpy.bincount.html) because unnecessarily requires `minlength` to be _strictly_ positive. though kind of ugly, the work-around would be simple:\n\n``` diff\ndiff --git a/pandas/core/groupby.py b/pandas/core/groupby.py\nindex e9aa906..d722ef8 100644\n--- a/pandas/core/groupby.py\n+++ b/pandas/core/groupby.py\n@@ -1439,7 +1439,8 @@ class BaseGrouper(object):\n         \"\"\"\n         ids, _, ngroup = self.group_info\n         ids = com._ensure_platform_int(ids)\n-        out = np.bincount(ids[ids != -1], minlength=ngroup)\n+        mask = ids != -1\n+        out = np.bincount(ids[mask], minlength=ngroup) if ngroup != 0 else []\n         return Series(out, index=self.result_index, dtype='int64')\n\n     @cache_readonly\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/159971461",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11699#issuecomment-159971461",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11699",
    "id": 159971461,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1OTk3MTQ2MQ==",
    "user": {
      "login": "Sereger13",
      "id": 10167353,
      "node_id": "MDQ6VXNlcjEwMTY3MzUz",
      "avatar_url": "https://avatars0.githubusercontent.com/u/10167353?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sereger13",
      "html_url": "https://github.com/Sereger13",
      "followers_url": "https://api.github.com/users/Sereger13/followers",
      "following_url": "https://api.github.com/users/Sereger13/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sereger13/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Sereger13/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sereger13/subscriptions",
      "organizations_url": "https://api.github.com/users/Sereger13/orgs",
      "repos_url": "https://api.github.com/users/Sereger13/repos",
      "events_url": "https://api.github.com/users/Sereger13/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Sereger13/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-11-26T18:13:33Z",
    "updated_at": "2015-11-26T18:13:33Z",
    "author_association": "NONE",
    "body": "Interesting... thanks for the update. Yes they could have made `np.bincount()` better indeed - allowing either None or 0 having the same meaning would make it more usable.\n\nSo it looks like simply setting ngroup to None should also do the trick:\n\n```\nif not ngroup:\n    ngroup=None\nout = np.bincount(ids[ids != -1], minlength=ngroup)\n```\n\nNot sure this is more readable than @behzadnouri's solution though. Looking forward for a new pandas with the workaround!\n"
  }
]
