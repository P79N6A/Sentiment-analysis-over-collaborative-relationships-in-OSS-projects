[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/149260493",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11372#issuecomment-149260493",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11372",
    "id": 149260493,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0OTI2MDQ5Mw==",
    "user": {
      "login": "rekcahpassyla",
      "id": 7807926,
      "node_id": "MDQ6VXNlcjc4MDc5MjY=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/7807926?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rekcahpassyla",
      "html_url": "https://github.com/rekcahpassyla",
      "followers_url": "https://api.github.com/users/rekcahpassyla/followers",
      "following_url": "https://api.github.com/users/rekcahpassyla/following{/other_user}",
      "gists_url": "https://api.github.com/users/rekcahpassyla/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rekcahpassyla/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rekcahpassyla/subscriptions",
      "organizations_url": "https://api.github.com/users/rekcahpassyla/orgs",
      "repos_url": "https://api.github.com/users/rekcahpassyla/repos",
      "events_url": "https://api.github.com/users/rekcahpassyla/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rekcahpassyla/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-10-19T16:07:28Z",
    "updated_at": "2015-10-19T16:07:28Z",
    "author_association": "CONTRIBUTOR",
    "body": "Indexing with a specific set of columns also gives the error:\n\nCode sample:\n\n``` python\nimport pandas as pd\nimport numpy as np\n\nnp.random.seed(1)\n\nfrom itertools import product\n\nfrom pandas.util.testing import assert_frame_equal\n\npd.show_versions()\n\nidx = pd.MultiIndex.from_tuples(\n    list(\n        product(['A', 'B', 'C'], \n                pd.date_range('2015-01-01', '2015-04-01', freq='MS'))\n    )\n)\ncols = pd.MultiIndex.from_tuples(\n    list(\n        product(['foo', 'bar'], \n                pd.date_range('2016-01-01', '2016-02-01', freq='MS'))\n    )\n)\n\n# if cols = ['foo', 'bar', 'baz', 'quux'], there is no error. \n\ntest = pd.DataFrame(np.random.random((12, 4)), index=idx, columns=cols)\n\n\nsubidx = pd.MultiIndex.from_tuples(\n    [('A', pd.Timestamp('2015-01-01')), ('A', pd.Timestamp('2015-02-01'))]\n)\n\nsubcols = pd.MultiIndex.from_tuples(\n    [('foo', pd.Timestamp('2016-01-01')), ('foo', pd.Timestamp('2016-02-01'))]\n)\n\n\nvals = pd.DataFrame(np.random.random((2, 2)), index=subidx, columns=subcols)\n\n\ntest.ix[subidx, subcols] = vals\n\nprint test.ix[subidx, subcols]\n\nprint vals\n\nassert_frame_equal(test.ix[subidx, subcols], vals)\n```\n\n### 0.17.0\n\n``` python\nINSTALLED VERSIONS\n------------------\ncommit: None\npython: 2.7.10.final.0\npython-bits: 64\nOS: Windows\nOS-release: 7\nmachine: AMD64\nprocessor: Intel64 Family 6 Model 26 Stepping 5, GenuineIntel\nbyteorder: little\nLC_ALL: None\nLANG: None\n\npandas: 0.17.0\nnose: 1.3.7\npip: 7.1.0\nsetuptools: 18.0.1\nCython: 0.22\nnumpy: 1.10.1\nscipy: 0.16.0\nstatsmodels: 0.6.1\nIPython: 3.2.1\nsphinx: 1.3.1\npatsy: 0.4.0\ndateutil: 2.4.1\npytz: 2015.4\nblosc: None\nbottleneck: 1.0.0\ntables: 3.2.2\nnumexpr: 2.4.4\nmatplotlib: 1.4.3\nopenpyxl: None\nxlrd: 0.9.4\nxlwt: None\nxlsxwriter: 0.7.3\nlxml: None\nbs4: 4.3.2\nhtml5lib: 0.999\nhttplib2: None\napiclient: None\nsqlalchemy: 1.0.7\npymysql: None\npsycopg2: None\n                    foo\n             2016-01-01 2016-02-01\nA 2015-01-01   0.287775   0.130029\n  2015-02-01   0.287775   0.130029\n                    foo\n             2016-01-01 2016-02-01\nA 2015-01-01   0.287775   0.130029\n  2015-02-01   0.019367   0.678836\nTraceback (most recent call last):\n  File \"c:\\dev\\code\\sandbox\\multiindex.py\", line 48, in <module>\n    assert_frame_equal(test.ix[subidx, subcols], vals)\n  File \"c:\\python\\envs\\pd017\\lib\\site-packages\\pandas\\util\\testing.py\", line 1028, in assert_frame_equal\n    obj='DataFrame.iloc[:, {0}]'.format(i))\n  File \"c:\\python\\envs\\pd017\\lib\\site-packages\\pandas\\util\\testing.py\", line 925, in assert_series_equal\n    check_less_precise, obj='{0}'.format(obj))\n  File \"pandas\\src\\testing.pyx\", line 58, in pandas._testing.assert_almost_equal (pandas\\src\\testing.c:3809)\n  File \"pandas\\src\\testing.pyx\", line 147, in pandas._testing.assert_almost_equal (pandas\\src\\testing.c:2685)\n  File \"c:\\python\\envs\\pd017\\lib\\site-packages\\pandas\\util\\testing.py\", line 798, in raise_assert_detail\n    raise AssertionError(msg)\nAssertionError: DataFrame.iloc[:, 0] are different\n\nDataFrame.iloc[:, 0] values are different (50.0 %)\n[left]:  [0.287775338586, 0.287775338586]\n[right]: [0.287775338586, 0.0193669578703]\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/149272344",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11372#issuecomment-149272344",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11372",
    "id": 149272344,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0OTI3MjM0NA==",
    "user": {
      "login": "rekcahpassyla",
      "id": 7807926,
      "node_id": "MDQ6VXNlcjc4MDc5MjY=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/7807926?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rekcahpassyla",
      "html_url": "https://github.com/rekcahpassyla",
      "followers_url": "https://api.github.com/users/rekcahpassyla/followers",
      "following_url": "https://api.github.com/users/rekcahpassyla/following{/other_user}",
      "gists_url": "https://api.github.com/users/rekcahpassyla/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rekcahpassyla/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rekcahpassyla/subscriptions",
      "organizations_url": "https://api.github.com/users/rekcahpassyla/orgs",
      "repos_url": "https://api.github.com/users/rekcahpassyla/repos",
      "events_url": "https://api.github.com/users/rekcahpassyla/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rekcahpassyla/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-10-19T16:31:47Z",
    "updated_at": "2015-10-19T16:49:37Z",
    "author_association": "CONTRIBUTOR",
    "body": "(Deleted- misread something, my previous suggestion was not really a fix)\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/149299070",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11372#issuecomment-149299070",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11372",
    "id": 149299070,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0OTI5OTA3MA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-10-19T18:02:49Z",
    "updated_at": "2015-10-19T18:02:49Z",
    "author_association": "CONTRIBUTOR",
    "body": "hmm, surprised that broke. there is not must testing on that sub-section actually\n\nThe issue is here: https://github.com/pydata/pandas/blob/master/pandas/core/indexing.py#L450\n\n`self._align_series` is called on a sub-section of the frame, but in the aligner, it looks at it and says oh you are a frame so gives back the wrong result.\n\nSo could prob pass in an additional parameter which would determine this.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/149604462",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11372#issuecomment-149604462",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11372",
    "id": 149604462,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0OTYwNDQ2Mg==",
    "user": {
      "login": "rekcahpassyla",
      "id": 7807926,
      "node_id": "MDQ6VXNlcjc4MDc5MjY=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/7807926?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rekcahpassyla",
      "html_url": "https://github.com/rekcahpassyla",
      "followers_url": "https://api.github.com/users/rekcahpassyla/followers",
      "following_url": "https://api.github.com/users/rekcahpassyla/following{/other_user}",
      "gists_url": "https://api.github.com/users/rekcahpassyla/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rekcahpassyla/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rekcahpassyla/subscriptions",
      "organizations_url": "https://api.github.com/users/rekcahpassyla/orgs",
      "repos_url": "https://api.github.com/users/rekcahpassyla/repos",
      "events_url": "https://api.github.com/users/rekcahpassyla/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rekcahpassyla/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-10-20T15:34:08Z",
    "updated_at": "2015-10-20T15:34:08Z",
    "author_association": "CONTRIBUTOR",
    "body": "Since I've already got two test cases, I'd be happy to have a go if I can be pointed in the right direction. I'll start by looking at the history of `indexing.py` and following any referenced issues / PRs\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/149634065",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11372#issuecomment-149634065",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11372",
    "id": 149634065,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0OTYzNDA2NQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-10-20T17:03:22Z",
    "updated_at": "2015-10-20T17:03:22Z",
    "author_association": "CONTRIBUTOR",
    "body": "the pointer above is to the relevant issues.\n\nthe way to do this is to setup the test cases and the expected results (in test_indexing); they should fail before a fix, then you can step thru to see where to put a fix and go from there\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/149821994",
    "html_url": "https://github.com/pandas-dev/pandas/issues/11372#issuecomment-149821994",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/11372",
    "id": 149821994,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0OTgyMTk5NA==",
    "user": {
      "login": "rekcahpassyla",
      "id": 7807926,
      "node_id": "MDQ6VXNlcjc4MDc5MjY=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/7807926?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rekcahpassyla",
      "html_url": "https://github.com/rekcahpassyla",
      "followers_url": "https://api.github.com/users/rekcahpassyla/followers",
      "following_url": "https://api.github.com/users/rekcahpassyla/following{/other_user}",
      "gists_url": "https://api.github.com/users/rekcahpassyla/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rekcahpassyla/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rekcahpassyla/subscriptions",
      "organizations_url": "https://api.github.com/users/rekcahpassyla/orgs",
      "repos_url": "https://api.github.com/users/rekcahpassyla/repos",
      "events_url": "https://api.github.com/users/rekcahpassyla/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rekcahpassyla/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-10-21T08:41:38Z",
    "updated_at": "2015-10-21T08:49:02Z",
    "author_association": "CONTRIBUTOR",
    "body": "OK, here is my first attempt: https://github.com/pydata/pandas/pull/11400\n\nI added a test for https://github.com/pydata/pandas/issues/5206 as well to test I hadn't broken that existing functionality. \n\n``` python\nC:\\dev\\code\\opensource\\pandas-rekcahpassyla [multiindex_setitem +2 ~0 -0 !]> C:\\python\\envs\\pandasdev\\scripts\\nosetests .\\pandas\\tests\\test_indexing.py\n...........................................................................................................................................\n----------------------------------------------------------------------\nRan 139 tests in 68.094s\n\nOK\n```\n\nAttempted to run the whole test suite, but `\ntest_max_ext_len (pandas.tests.test_msgpack.test_limits.TestLimits)` eats up 4GB of memory and causes Python to crash\n"
  }
]
