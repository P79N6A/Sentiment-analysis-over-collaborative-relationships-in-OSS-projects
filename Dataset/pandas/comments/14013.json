[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/240244924",
    "html_url": "https://github.com/pandas-dev/pandas/issues/14013#issuecomment-240244924",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/14013",
    "id": 240244924,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0MDI0NDkyNA==",
    "user": {
      "login": "chrisaycock",
      "id": 453745,
      "node_id": "MDQ6VXNlcjQ1Mzc0NQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/453745?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chrisaycock",
      "html_url": "https://github.com/chrisaycock",
      "followers_url": "https://api.github.com/users/chrisaycock/followers",
      "following_url": "https://api.github.com/users/chrisaycock/following{/other_user}",
      "gists_url": "https://api.github.com/users/chrisaycock/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chrisaycock/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chrisaycock/subscriptions",
      "organizations_url": "https://api.github.com/users/chrisaycock/orgs",
      "repos_url": "https://api.github.com/users/chrisaycock/repos",
      "events_url": "https://api.github.com/users/chrisaycock/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chrisaycock/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-16T21:28:20Z",
    "updated_at": "2016-08-16T21:28:20Z",
    "author_association": "CONTRIBUTOR",
    "body": "A little note while digging through more code: `_convert_grouper` in `groupby.py` has:\n\n```\n    if isinstance(grouper, dict):\n        ...\n    elif isinstance(grouper, Series):\n        ...\n    elif isinstance(grouper, (list, Series, Index, np.ndarray)):\n        ...\n    else:\n        ...\n```\n\nThe `grouper` is compared twice to `Series`. I will fix this when I clean-up everything.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/240270549",
    "html_url": "https://github.com/pandas-dev/pandas/issues/14013#issuecomment-240270549",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/14013",
    "id": 240270549,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0MDI3MDU0OQ==",
    "user": {
      "login": "chrisaycock",
      "id": 453745,
      "node_id": "MDQ6VXNlcjQ1Mzc0NQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/453745?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chrisaycock",
      "html_url": "https://github.com/chrisaycock",
      "followers_url": "https://api.github.com/users/chrisaycock/followers",
      "following_url": "https://api.github.com/users/chrisaycock/following{/other_user}",
      "gists_url": "https://api.github.com/users/chrisaycock/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chrisaycock/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chrisaycock/subscriptions",
      "organizations_url": "https://api.github.com/users/chrisaycock/orgs",
      "repos_url": "https://api.github.com/users/chrisaycock/repos",
      "events_url": "https://api.github.com/users/chrisaycock/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chrisaycock/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-16T23:28:30Z",
    "updated_at": "2016-08-16T23:37:17Z",
    "author_association": "CONTRIBUTOR",
    "body": "I can fix the issue if I set the group selection:\n\n```\ng._set_group_selection()\n```\n\nI think we need this function at the start of `.rolling()`.\n\nSeems similar to #12839 \n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/240370485",
    "html_url": "https://github.com/pandas-dev/pandas/issues/14013#issuecomment-240370485",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/14013",
    "id": 240370485,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0MDM3MDQ4NQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-17T10:11:17Z",
    "updated_at": "2016-08-17T10:11:17Z",
    "author_association": "CONTRIBUTOR",
    "body": "This is defined behavior; in, that it is identical to `.apply` on the groupby.\n\n```\nIn [10]: df.groupby('A').rolling(4).sum()\nOut[10]: \n         A      B\nA                \n1 0    NaN    NaN\n  1    NaN    NaN\n  2    NaN    NaN\n  3    4.0    6.0\n  4    4.0   10.0\n...    ...    ...\n3 35  12.0  134.0\n  36  12.0  138.0\n  37  12.0  142.0\n  38  12.0  146.0\n  39  12.0  150.0\n\n[40 rows x 2 columns]\n\nIn [11]: df.groupby('A').rolling(4).apply(lambda x: x.sum())\nOut[11]: \n         A      B\nA                \n1 0    NaN    NaN\n  1    NaN    NaN\n  2    NaN    NaN\n  3    4.0    6.0\n  4    4.0   10.0\n...    ...    ...\n3 35  12.0  134.0\n  36  12.0  138.0\n  37  12.0  142.0\n  38  12.0  146.0\n  39  12.0  150.0\n\n[40 rows x 2 columns]\n```\n\nyou can look back at the issues, IIRC @jorisvandenbossche and I had a long conversation about this.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/240434589",
    "html_url": "https://github.com/pandas-dev/pandas/issues/14013#issuecomment-240434589",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/14013",
    "id": 240434589,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0MDQzNDU4OQ==",
    "user": {
      "login": "chrisaycock",
      "id": 453745,
      "node_id": "MDQ6VXNlcjQ1Mzc0NQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/453745?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chrisaycock",
      "html_url": "https://github.com/chrisaycock",
      "followers_url": "https://api.github.com/users/chrisaycock/followers",
      "following_url": "https://api.github.com/users/chrisaycock/following{/other_user}",
      "gists_url": "https://api.github.com/users/chrisaycock/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chrisaycock/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chrisaycock/subscriptions",
      "organizations_url": "https://api.github.com/users/chrisaycock/orgs",
      "repos_url": "https://api.github.com/users/chrisaycock/repos",
      "events_url": "https://api.github.com/users/chrisaycock/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chrisaycock/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-17T14:44:27Z",
    "updated_at": "2016-08-17T14:44:27Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hmm:\n\n```\nIn [617]: df.groupby('A').sum()\nOut[617]:\n     B\nA\n1  190\n2  306\n3  284\n\nIn [618]: df.groupby('A').apply(lambda x: x.sum())\nOut[618]:\n    A    B\nA\n1  20  190\n2  24  306\n3  24  284\n```\n\nIn addition to `.rolling()` and `.apply()`, `.ohlc()` and `.expanding()` keep the `by` column following a `.groupby()`.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/244055690",
    "html_url": "https://github.com/pandas-dev/pandas/issues/14013#issuecomment-244055690",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/14013",
    "id": 244055690,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0NDA1NTY5MA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-09-01T11:50:58Z",
    "updated_at": "2016-09-01T11:50:58Z",
    "author_association": "CONTRIBUTOR",
    "body": "on reread this should be consistent - so marking as a bug\nprob should not include the grouping column/level even though apply does \n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/280018991",
    "html_url": "https://github.com/pandas-dev/pandas/issues/14013#issuecomment-280018991",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/14013",
    "id": 280018991,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4MDAxODk5MQ==",
    "user": {
      "login": "ohadle",
      "id": 2196196,
      "node_id": "MDQ6VXNlcjIxOTYxOTY=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/2196196?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ohadle",
      "html_url": "https://github.com/ohadle",
      "followers_url": "https://api.github.com/users/ohadle/followers",
      "following_url": "https://api.github.com/users/ohadle/following{/other_user}",
      "gists_url": "https://api.github.com/users/ohadle/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ohadle/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ohadle/subscriptions",
      "organizations_url": "https://api.github.com/users/ohadle/orgs",
      "repos_url": "https://api.github.com/users/ohadle/repos",
      "events_url": "https://api.github.com/users/ohadle/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ohadle/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-15T14:05:33Z",
    "updated_at": "2017-02-15T14:25:26Z",
    "author_association": "NONE",
    "body": "A similar thing happens with index columns.\r\n\r\n```python\r\nfrom pandas import DataFrame, Timestamp\r\n\r\nc = pandas.DataFrame({u'ul_payload': {('a', Timestamp('2016-11-01 06:15:00')): 5, ('a', Timestamp('2016-11-01 07:45:00')): 8, ('a', Timestamp('2016-11-01 09:00:00')): 9, ('a', Timestamp('2016-11-01 07:15:00')): 6, ('a', Timestamp('2016-11-01 07:30:00')): 7, ('a', Timestamp('2016-11-01 06:00:00')): 4}, u'dl_payload': {('a', Timestamp('2016-11-01 06:15:00')): 15, ('a', Timestamp('2016-11-01 07:45:00')): 18, ('a', Timestamp('2016-11-01 09:00:00')): 19, ('a', Timestamp('2016-11-01 07:15:00')): 16, ('a', Timestamp('2016-11-01 07:30:00')): 17, ('a', Timestamp('2016-11-01 06:00:00')): 14}})\r\n\r\nIn [27]: c\r\nOut[27]:\r\n                       dl_payload  ul_payload\r\na 2016-11-01 06:00:00          14           4\r\n  2016-11-01 06:15:00          15           5\r\n  2016-11-01 07:15:00          16           6\r\n  2016-11-01 07:30:00          17           7\r\n  2016-11-01 07:45:00          18           8\r\n  2016-11-01 09:00:00          19           9\r\n\r\nIn [29]: c.groupby(level=0).rolling(window=3).agg(np.sum)\r\nOut[29]:\r\n                         dl_payload  ul_payload\r\na a 2016-11-01 06:00:00         NaN         NaN\r\n    2016-11-01 06:15:00         NaN         NaN\r\n    2016-11-01 07:15:00        45.0        15.0\r\n    2016-11-01 07:30:00        48.0        18.0\r\n    2016-11-01 07:45:00        51.0        21.0\r\n    2016-11-01 09:00:00        54.0        24.0\r\n```\r\nBut not with `group_keys=False`:\r\n```python\r\nIn [48]: c.groupby(level=0, group_keys=False).rolling(window=3).agg(np.sum)\r\nOut[48]:\r\n                       dl_payload  ul_payload\r\na 2016-11-01 06:00:00         NaN         NaN\r\n  2016-11-01 06:15:00         NaN         NaN\r\n  2016-11-01 07:15:00        45.0        15.0\r\n  2016-11-01 07:30:00        48.0        18.0\r\n  2016-11-01 07:45:00        51.0        21.0\r\n  2016-11-01 09:00:00        54.0        24.0\r\n```"
  }
]
