[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/61383710",
    "html_url": "https://github.com/pandas-dev/pandas/issues/8704#issuecomment-61383710",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/8704",
    "id": 61383710,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYxMzgzNzEw",
    "user": {
      "login": "davidrpugh",
      "id": 2219562,
      "node_id": "MDQ6VXNlcjIyMTk1NjI=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/2219562?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/davidrpugh",
      "html_url": "https://github.com/davidrpugh",
      "followers_url": "https://api.github.com/users/davidrpugh/followers",
      "following_url": "https://api.github.com/users/davidrpugh/following{/other_user}",
      "gists_url": "https://api.github.com/users/davidrpugh/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/davidrpugh/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/davidrpugh/subscriptions",
      "organizations_url": "https://api.github.com/users/davidrpugh/orgs",
      "repos_url": "https://api.github.com/users/davidrpugh/repos",
      "events_url": "https://api.github.com/users/davidrpugh/events{/privacy}",
      "received_events_url": "https://api.github.com/users/davidrpugh/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-11-01T21:14:27Z",
    "updated_at": "2014-11-01T21:14:27Z",
    "author_association": "NONE",
    "body": "When I drop into the `pdb` I get the following...\n\n``` python\nTypeError: data type not understood\n> /Users/drpugh/anaconda/lib/python2.7/site-packages/pandas/core/reshape.py(1208)block2d_to_blocknd()\n   1207     if mask.all():\n-> 1208         pvalues = np.empty(panel_shape, dtype=values.dtype)\n   1209     else:\n\nipdb> values\n[NaN, NaN, NaN, NaN, NaN, ..., Extrapolated, Extrapolated, Extrapolated, Extrapolated, Extrapolated]\nLength: 10354\nCategories (3, object): [Benchmark < Extrapolated < Interpolated]\nipdb> values.dtype\ncategory\nipdb> \n\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/61385197",
    "html_url": "https://github.com/pandas-dev/pandas/issues/8704#issuecomment-61385197",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/8704",
    "id": 61385197,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYxMzg1MTk3",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-11-01T21:55:12Z",
    "updated_at": "2014-11-01T21:55:12Z",
    "author_association": "CONTRIBUTOR",
    "body": "you will need to show the construction of your frame (in code) and df.dtypes\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/61386704",
    "html_url": "https://github.com/pandas-dev/pandas/issues/8704#issuecomment-61386704",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/8704",
    "id": 61386704,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYxMzg2NzA0",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-11-01T22:48:21Z",
    "updated_at": "2014-11-01T22:49:05Z",
    "author_association": "CONTRIBUTOR",
    "body": "Categorical is a new type in 0.15 but you have to explicitly use it so puzzling why you have it in this expression (you didn't mention using it)\n\nit is prob a bug that to_panel() doesn't work with Categorical - but as I said you have to actually convert your data in the first place \n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/61391079",
    "html_url": "https://github.com/pandas-dev/pandas/issues/8704#issuecomment-61391079",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/8704",
    "id": 61391079,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYxMzkxMDc5",
    "user": {
      "login": "davidrpugh",
      "id": 2219562,
      "node_id": "MDQ6VXNlcjIyMTk1NjI=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/2219562?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/davidrpugh",
      "html_url": "https://github.com/davidrpugh",
      "followers_url": "https://api.github.com/users/davidrpugh/followers",
      "following_url": "https://api.github.com/users/davidrpugh/following{/other_user}",
      "gists_url": "https://api.github.com/users/davidrpugh/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/davidrpugh/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/davidrpugh/subscriptions",
      "organizations_url": "https://api.github.com/users/davidrpugh/orgs",
      "repos_url": "https://api.github.com/users/davidrpugh/repos",
      "events_url": "https://api.github.com/users/davidrpugh/events{/privacy}",
      "received_events_url": "https://api.github.com/users/davidrpugh/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-11-02T01:50:00Z",
    "updated_at": "2014-11-02T01:50:00Z",
    "author_association": "NONE",
    "body": "@jreback \n\nWhen creating my frame I am not explicitly making use of the categorical type. I have written a function that takes some Stata .dta files as inputs and creates a `pandas.Panel` object out of them.\n\n``` python\n    try:\n        pwt_raw_data = pd.read_stata('pwt' + str(version) + '.dta')\n        dep_rates_raw_data = pd.read_stata('depreciation_rates.dta')\n\n    except IOError:\n        _download_pwt_data(base_url, version)\n        pwt_raw_data = pd.read_stata('pwt' + str(version) + '.dta')\n        dep_rates_raw_data = pd.read_stata('depreciation_rates.dta')\n\n    # merge the data\n    pwt_merged_data = pd.merge(pwt_raw_data, dep_rates_raw_data, how='outer',\n                               on=['countrycode', 'year'])\n\n    # create the hierarchical index\n    pwt_merged_data.year = pd.to_datetime(pwt_raw_data.year, format='%Y')\n    pwt_merged_data.set_index(['countrycode', 'year'], inplace=True)\n\n    # coerce into a panel\n    pwt_panel_data = pwt_merged_data.to_panel()\n\n    return pwt_panel_data\n```\n\nThe dataframe called  `data` in my original comment is actually the `pwt_merged_data` defined in the code snippet. Here are the dtypes for `pwt_merged_data`:\n\n```\nIn [4]: data.dtypes\nOut[4]: \ncountry            object\ncurrency_unit      object\nrgdpe             float32\nrgdpo             float32\npop               float64\nemp               float32\navh               float64\nhc                float32\ncgdpe             float32\ncgdpo             float32\nck                float32\nctfp              float32\nrgdpna            float64\nrkna              float32\nrtfpna            float32\nlabsh             float32\nxr                float64\npl_gdpe           float32\npl_gdpo           float32\ni_cig            category\ni_xm             category\ni_xr             category\ni_outlier        category\ncor_exp           float64\nstatcap           float64\ncsh_c             float32\ncsh_i             float32\ncsh_g             float32\ncsh_x             float32\ncsh_m             float32\ncsh_r             float32\npl_c              float64\npl_i              float64\npl_g              float64\npl_x              float32\npl_m              float32\npl_k              float32\ndelta_k           float32\ndtype: object\n```\n\nAs you suspected, three of the variables have been cast as categorical. I wonder if this assignment is being done by the `read_stata`?\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/61391200",
    "html_url": "https://github.com/pandas-dev/pandas/issues/8704#issuecomment-61391200",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/8704",
    "id": 61391200,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYxMzkxMjAw",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-11-02T01:56:45Z",
    "updated_at": "2014-11-02T01:57:47Z",
    "author_association": "CONTRIBUTOR",
    "body": "`read_stata` DOES correctly return categorical data.\n\nI am working on a fix for this kind of reshaping. Though support of mixed-type data in a Panel is very limited ATM. You are almost certainly better off keeping it in a multi-indexed frame.\n\nIs their a reason you _need_ a Panel?\n\nat a work-around ATM, you can simply do: `df['i_cig'] = df['i_cig'].astype('object')` (for each of the category columns).\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/61391584",
    "html_url": "https://github.com/pandas-dev/pandas/issues/8704#issuecomment-61391584",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/8704",
    "id": 61391584,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYxMzkxNTg0",
    "user": {
      "login": "davidrpugh",
      "id": 2219562,
      "node_id": "MDQ6VXNlcjIyMTk1NjI=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/2219562?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/davidrpugh",
      "html_url": "https://github.com/davidrpugh",
      "followers_url": "https://api.github.com/users/davidrpugh/followers",
      "following_url": "https://api.github.com/users/davidrpugh/following{/other_user}",
      "gists_url": "https://api.github.com/users/davidrpugh/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/davidrpugh/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/davidrpugh/subscriptions",
      "organizations_url": "https://api.github.com/users/davidrpugh/orgs",
      "repos_url": "https://api.github.com/users/davidrpugh/repos",
      "events_url": "https://api.github.com/users/davidrpugh/events{/privacy}",
      "received_events_url": "https://api.github.com/users/davidrpugh/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-11-02T02:15:35Z",
    "updated_at": "2014-11-02T02:15:35Z",
    "author_association": "NONE",
    "body": "@jreback \n\nI suppose no data set _needs_ to be a Panel. The data set being loaded is the Penn World Tablesl data set that is widely used to study the economic growth across countries over time. It seems to be a natural use case for a Panel object.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/61391709",
    "html_url": "https://github.com/pandas-dev/pandas/issues/8704#issuecomment-61391709",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/8704",
    "id": 61391709,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYxMzkxNzA5",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-11-02T02:21:51Z",
    "updated_at": "2014-11-02T02:21:51Z",
    "author_association": "CONTRIBUTOR",
    "body": "ok, we'll try to fix this. Their is a 'technical' issue so not sure can get it in 0.15.1, but we'll see.\n\nMy point was that the manipulation tools are currently much better for multi-indexed frames that for Panels. And if the data is not too dense, a mi frame is more compact in representation. But Panels do have there uses.\n\nThanks for the report.\n"
  }
]
