[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/270758150",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15069#issuecomment-270758150",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15069",
    "id": 270758150,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3MDc1ODE1MA==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-01-05T21:08:55Z",
    "updated_at": "2017-01-05T21:08:55Z",
    "author_association": "MEMBER",
    "body": "There recently has been some improvement regarding this. With master:\r\n\r\n```\r\nIn [101]: pd.qcut([0] * K + [1] * (K + 1), 2)\r\n...\r\nValueError: Bin edges must be unique: array([0, 1, 1]).\r\nYou can drop duplicate edges by setting the 'duplicates' kwarg\r\n\r\nIn [102]: pd.qcut([0] * K + [1] * (K + 1), 2, duplicates='drop')\r\nOut[102]: \r\n[[0, 1], [0, 1], [0, 1], [0, 1], [0, 1], ..., [0, 1], [0, 1], [0, 1], [0, 1], [0, 1]]\r\nLength: 201\r\nCategories (1, object): [[0, 1]]\r\n```\r\n\r\nSo there is option to deal with duplicates edges, but the option chosen here is to take less bins instead of assigning all values to one of the bins."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/270758660",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15069#issuecomment-270758660",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15069",
    "id": 270758660,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3MDc1ODY2MA==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-01-05T21:11:10Z",
    "updated_at": "2017-01-05T21:11:10Z",
    "author_association": "MEMBER",
    "body": "See the issue https://github.com/pandas-dev/pandas/issues/7751 and final PR merged couple days ago https://github.com/pandas-dev/pandas/pull/15000"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/271017553",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15069#issuecomment-271017553",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15069",
    "id": 271017553,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3MTAxNzU1Mw==",
    "user": {
      "login": "ashishsingal1",
      "id": 3426091,
      "node_id": "MDQ6VXNlcjM0MjYwOTE=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/3426091?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ashishsingal1",
      "html_url": "https://github.com/ashishsingal1",
      "followers_url": "https://api.github.com/users/ashishsingal1/followers",
      "following_url": "https://api.github.com/users/ashishsingal1/following{/other_user}",
      "gists_url": "https://api.github.com/users/ashishsingal1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ashishsingal1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ashishsingal1/subscriptions",
      "organizations_url": "https://api.github.com/users/ashishsingal1/orgs",
      "repos_url": "https://api.github.com/users/ashishsingal1/repos",
      "events_url": "https://api.github.com/users/ashishsingal1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ashishsingal1/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-01-06T21:49:38Z",
    "updated_at": "2017-01-06T21:49:38Z",
    "author_association": "CONTRIBUTOR",
    "body": "Effectively, the `duplicates='drop'` will assign all of clumped values into a single bin. In my experience with data, this happens most when there's a zero value for most observations and a tail of non zero values. For example, take 'snowfall_in_inches'. Most for days, this will be zero. If we want to split into quantiles, we'll need to group all of the zero values into one bucket. `duplicates='drop'` should do this. Happy to improve if there's a better way though."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/275150748",
    "html_url": "https://github.com/pandas-dev/pandas/issues/15069#issuecomment-275150748",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15069",
    "id": 275150748,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3NTE1MDc0OA==",
    "user": {
      "login": "wesm",
      "id": 329591,
      "node_id": "MDQ6VXNlcjMyOTU5MQ==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/329591?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wesm",
      "html_url": "https://github.com/wesm",
      "followers_url": "https://api.github.com/users/wesm/followers",
      "following_url": "https://api.github.com/users/wesm/following{/other_user}",
      "gists_url": "https://api.github.com/users/wesm/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wesm/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wesm/subscriptions",
      "organizations_url": "https://api.github.com/users/wesm/orgs",
      "repos_url": "https://api.github.com/users/wesm/repos",
      "events_url": "https://api.github.com/users/wesm/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wesm/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-01-25T16:09:17Z",
    "updated_at": "2017-01-25T16:09:17Z",
    "author_association": "MEMBER",
    "body": "I looked at the behavior after #15000 -- I'm going to leave this issue open for now. We should look into the quantile algorithms in other statistical packages. for example we have:\r\n\r\n```\r\n> quantile(data, c(0, 0.5, 1), type=1)\r\n  0%  50% 100% \r\n   0    1    1 \r\n> quantile(data, c(0, 0.5, 1), type=2)\r\n  0%  50% 100% \r\n   0    1    1 \r\n> quantile(data, c(0, 0.5, 1), type=3)\r\n  0%  50% 100% \r\n   0    0    1 \r\n```\r\n\r\nI think having duplicate bin edges is fine as long as we have a convention about which bin to assign the data to. I would argue in this case, the correct sample quantiles are `[0, 1), [1, 1]`, and so we have two well-defined bins to assign the data to. In the degenerate case where multiple bins have the same start and end point, we would want to assign values to the leftmost (or rightmost) bin"
  }
]
