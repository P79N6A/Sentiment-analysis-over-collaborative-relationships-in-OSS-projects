[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/125914872",
    "html_url": "https://github.com/pandas-dev/pandas/issues/10694#issuecomment-125914872",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/10694",
    "id": 125914872,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyNTkxNDg3Mg==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-07-29T10:32:24Z",
    "updated_at": "2015-07-29T10:32:24Z",
    "author_association": "MEMBER",
    "body": "The strange thing is I get even different error messages with the example on SO compared to my dummy example:\n\n```\nIn [27]: income = DataFrame({'name': ['Adam', 'Bill', 'Chris', 'Dave', 'Edison',\n 'Frank'],\n   ....:                     'age': [22, 24, 31, 45, 51, 55],\n   ....:                     'income': [1000, 2500, 1200, 1500, 1300, 1600],\n   ....:                     })\n\nIn [28]:\n\nIn [28]: income = income.drop(2)\n\nIn [29]: ageBin = pd.cut(income.age, [20, 30, 40, 50, 60])\n\nIn [30]: grouped = income.groupby([ageBin])\n\nIn [31]: grouped.income.idxmax()\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n<ipython-input-31-ce76f8e7a4f6> in <module>()\n----> 1 grouped.income.idxmax()\n\nc:\\users\\vdbosscj\\scipy\\pandas-joris\\pandas\\core\\groupby.pyc in idxmax(self, axi\ns, out, skipna)\n\nc:\\users\\vdbosscj\\scipy\\pandas-joris\\pandas\\core\\groupby.pyc in wrapper(*args, *\n*kwargs)\n    588                         return self._aggregate_item_by_item(name, *args,\n **kwargs)\n    589                     except (AttributeError):\n--> 590                         raise ValueError\n    591\n    592         return wrapper\n\nValueError:\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/264540823",
    "html_url": "https://github.com/pandas-dev/pandas/issues/10694#issuecomment-264540823",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/10694",
    "id": 264540823,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2NDU0MDgyMw==",
    "user": {
      "login": "cfperez",
      "id": 2013379,
      "node_id": "MDQ6VXNlcjIwMTMzNzk=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/2013379?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cfperez",
      "html_url": "https://github.com/cfperez",
      "followers_url": "https://api.github.com/users/cfperez/followers",
      "following_url": "https://api.github.com/users/cfperez/following{/other_user}",
      "gists_url": "https://api.github.com/users/cfperez/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cfperez/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cfperez/subscriptions",
      "organizations_url": "https://api.github.com/users/cfperez/orgs",
      "repos_url": "https://api.github.com/users/cfperez/repos",
      "events_url": "https://api.github.com/users/cfperez/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cfperez/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-12-02T19:28:37Z",
    "updated_at": "2016-12-02T19:28:37Z",
    "author_association": "CONTRIBUTOR",
    "body": "Also, `.value_counts()` does not work under the same conditions, with the same error.\r\n\r\nOn the other hand, `.nunique()` does work for me (#11635). Is there an issue where we should collect groupby+category related test cases?"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/341269803",
    "html_url": "https://github.com/pandas-dev/pandas/issues/10694#issuecomment-341269803",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/10694",
    "id": 341269803,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0MTI2OTgwMw==",
    "user": {
      "login": "rbu",
      "id": 65913,
      "node_id": "MDQ6VXNlcjY1OTEz",
      "avatar_url": "https://avatars2.githubusercontent.com/u/65913?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rbu",
      "html_url": "https://github.com/rbu",
      "followers_url": "https://api.github.com/users/rbu/followers",
      "following_url": "https://api.github.com/users/rbu/following{/other_user}",
      "gists_url": "https://api.github.com/users/rbu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rbu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rbu/subscriptions",
      "organizations_url": "https://api.github.com/users/rbu/orgs",
      "repos_url": "https://api.github.com/users/rbu/repos",
      "events_url": "https://api.github.com/users/rbu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rbu/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-01T23:07:17Z",
    "updated_at": "2017-11-01T23:07:17Z",
    "author_association": "NONE",
    "body": "Just ran into this bug (in the variant where I insert ``pd.cut()`` as a Series and then do ```.groupby(\"cuts\")```. As @jorisvandenbossche points out, changing the series type from category to something like int64 works around this bug."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/451738960",
    "html_url": "https://github.com/pandas-dev/pandas/issues/10694#issuecomment-451738960",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/10694",
    "id": 451738960,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MTczODk2MA==",
    "user": {
      "login": "jorijnsmit",
      "id": 2835259,
      "node_id": "MDQ6VXNlcjI4MzUyNTk=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/2835259?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorijnsmit",
      "html_url": "https://github.com/jorijnsmit",
      "followers_url": "https://api.github.com/users/jorijnsmit/followers",
      "following_url": "https://api.github.com/users/jorijnsmit/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorijnsmit/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorijnsmit/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorijnsmit/subscriptions",
      "organizations_url": "https://api.github.com/users/jorijnsmit/orgs",
      "repos_url": "https://api.github.com/users/jorijnsmit/repos",
      "events_url": "https://api.github.com/users/jorijnsmit/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorijnsmit/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-06T12:46:40Z",
    "updated_at": "2019-01-06T12:46:40Z",
    "author_association": "NONE",
    "body": "A quick fix for this is to handle empty categories yourself: `.agg(lambda x : np.nan if x.count() == 0 else x.idxmax()`. Would be nice to have this implemented in `.idxmax()` itself though; it is very difficult figuring out what the problem is when all it does is give back an empty result."
  }
]
