[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/286908570",
    "html_url": "https://github.com/pandas-dev/pandas/pull/15694#issuecomment-286908570",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15694",
    "id": 286908570,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NjkwODU3MA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-15T23:11:55Z",
    "updated_at": "2017-03-15T23:11:55Z",
    "author_association": "CONTRIBUTOR",
    "body": "so the basic problem was we were not sorting if a MultiIndex was lexsorted. But a lexsorted index, does NOT imply that the levels are monotonic (intra-level). Depending on the construction method they might or might not be.\r\n\r\nSo what this is does is will force a reconstruction (of the MI), which is not actually expensive to do; to ensure that it is ordered correctly when sorting. (which we do in a myriad of places).\r\n\r\nxref #13431 which I added a test (xfailing). This is a tiny bit more complicated and I think may have to modify the internals a bit."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/286942777",
    "html_url": "https://github.com/pandas-dev/pandas/pull/15694#issuecomment-286942777",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15694",
    "id": 286942777,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4Njk0Mjc3Nw==",
    "user": {
      "login": "codecov[bot]",
      "id": 22429695,
      "node_id": "MDM6Qm90MjI0Mjk2OTU=",
      "avatar_url": "https://avatars2.githubusercontent.com/in/254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/codecov%5Bbot%5D",
      "html_url": "https://github.com/apps/codecov",
      "followers_url": "https://api.github.com/users/codecov%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/codecov%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/codecov%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/codecov%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/codecov%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/codecov%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/codecov%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/codecov%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/codecov%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2017-03-16T02:50:50Z",
    "updated_at": "2017-04-07T15:19:55Z",
    "author_association": "NONE",
    "body": "# [Codecov](https://codecov.io/gh/pandas-dev/pandas/pull/15694?src=pr&el=h1) Report\n> Merging [#15694](https://codecov.io/gh/pandas-dev/pandas/pull/15694?src=pr&el=desc) into [master](https://codecov.io/gh/pandas-dev/pandas/commit/0cfc08cf4584e8442c84c30d53f1dceafeac5abf?src=pr&el=desc) will **increase** coverage by `0.02%`.\n> The diff coverage is `98.24%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/pandas-dev/pandas/pull/15694/graphs/tree.svg?height=150&width=650&token=eZ4WkYLtcO&src=pr)](https://codecov.io/gh/pandas-dev/pandas/pull/15694?src=pr&el=tree)\n\n```diff\n@@            Coverage Diff             @@\n##           master   #15694      +/-   ##\n==========================================\n+ Coverage   90.97%   90.99%   +0.02%     \n==========================================\n  Files         145      145              \n  Lines       49474    49519      +45     \n==========================================\n+ Hits        45007    45060      +53     \n+ Misses       4467     4459       -8\n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| #multiple | `88.75% <98.24%> (+0.02%)` | :arrow_up: |\n| #single | `40.61% <17.54%> (-0.07%)` | :arrow_down: |\n\n| [Impacted Files](https://codecov.io/gh/pandas-dev/pandas/pull/15694?src=pr&el=tree) | Coverage Δ | |\n|---|---|---|\n| [pandas/core/sorting.py](https://codecov.io/gh/pandas-dev/pandas/pull/15694?src=pr&el=tree#diff-cGFuZGFzL2NvcmUvc29ydGluZy5weQ==) | `97.81% <100%> (+0.03%)` | :arrow_up: |\n| [pandas/core/frame.py](https://codecov.io/gh/pandas-dev/pandas/pull/15694?src=pr&el=tree#diff-cGFuZGFzL2NvcmUvZnJhbWUucHk=) | `97.57% <100%> (ø)` | :arrow_up: |\n| [pandas/indexes/multi.py](https://codecov.io/gh/pandas-dev/pandas/pull/15694?src=pr&el=tree#diff-cGFuZGFzL2luZGV4ZXMvbXVsdGkucHk=) | `96.7% <100%> (+0.1%)` | :arrow_up: |\n| [pandas/core/reshape.py](https://codecov.io/gh/pandas-dev/pandas/pull/15694?src=pr&el=tree#diff-cGFuZGFzL2NvcmUvcmVzaGFwZS5weQ==) | `99.27% <100%> (-0.01%)` | :arrow_down: |\n| [pandas/core/groupby.py](https://codecov.io/gh/pandas-dev/pandas/pull/15694?src=pr&el=tree#diff-cGFuZGFzL2NvcmUvZ3JvdXBieS5weQ==) | `95.54% <100%> (+0.51%)` | :arrow_up: |\n| [pandas/core/series.py](https://codecov.io/gh/pandas-dev/pandas/pull/15694?src=pr&el=tree#diff-cGFuZGFzL2NvcmUvc2VyaWVzLnB5) | `94.89% <85.71%> (-0.08%)` | :arrow_down: |\n| [pandas/indexes/base.py](https://codecov.io/gh/pandas-dev/pandas/pull/15694?src=pr&el=tree#diff-cGFuZGFzL2luZGV4ZXMvYmFzZS5weQ==) | `96.09% <0%> (-0.06%)` | :arrow_down: |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/pandas-dev/pandas/pull/15694?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/pandas-dev/pandas/pull/15694?src=pr&el=footer). Last update [0cfc08c...bd17d2b](https://codecov.io/gh/pandas-dev/pandas/pull/15694?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments)."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/287044804",
    "html_url": "https://github.com/pandas-dev/pandas/pull/15694#issuecomment-287044804",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15694",
    "id": 287044804,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NzA0NDgwNA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-16T12:40:26Z",
    "updated_at": "2017-03-16T12:40:26Z",
    "author_association": "CONTRIBUTOR",
    "body": "@chris-b1 if you'd have a look."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/287080780",
    "html_url": "https://github.com/pandas-dev/pandas/pull/15694#issuecomment-287080780",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15694",
    "id": 287080780,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NzA4MDc4MA==",
    "user": {
      "login": "chris-b1",
      "id": 1924092,
      "node_id": "MDQ6VXNlcjE5MjQwOTI=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1924092?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chris-b1",
      "html_url": "https://github.com/chris-b1",
      "followers_url": "https://api.github.com/users/chris-b1/followers",
      "following_url": "https://api.github.com/users/chris-b1/following{/other_user}",
      "gists_url": "https://api.github.com/users/chris-b1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chris-b1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chris-b1/subscriptions",
      "organizations_url": "https://api.github.com/users/chris-b1/orgs",
      "repos_url": "https://api.github.com/users/chris-b1/repos",
      "events_url": "https://api.github.com/users/chris-b1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chris-b1/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-16T14:48:37Z",
    "updated_at": "2017-03-16T14:48:37Z",
    "author_association": "CONTRIBUTOR",
    "body": "@jreback - I only skimmed the implementation, seems reasonable at first glance.\r\n\r\nI do think this needs a bigger note in the docs, and maybe should even warn if the reconstruction re-sorts the levels as this is an API change?  I'm in favor in the behavior in this PR, but there could be existing code that takes advantage of the customer ordering possible with a mi.  e.g. \r\n\r\n```python\r\nIn [21]: df = pd.DataFrame({'value': [1, 2, 3, 4]}, index=pd.MultiIndex(\r\n    ...:     levels=[['a', 'b'], ['bb', 'aa']],\r\n    ...:     labels=[[0, 0, 1, 1], [0, 1, 0, 1]]))\r\n\r\nIn [22]: df\r\nOut[22]: \r\n      value\r\na bb      1\r\n  aa      2\r\nb bb      3\r\n  aa      4\r\n\r\nIn [23]: df.sort_index()\r\nOut[23]: \r\n      value\r\na bb      1\r\n  aa      2\r\nb bb      3\r\n  aa      4\r\n```\r\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/287082480",
    "html_url": "https://github.com/pandas-dev/pandas/pull/15694#issuecomment-287082480",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15694",
    "id": 287082480,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NzA4MjQ4MA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-16T14:53:53Z",
    "updated_at": "2017-03-16T14:53:53Z",
    "author_association": "CONTRIBUTOR",
    "body": "@chris-b1 FYI couple of recent pushes as I had some bug fixes.\r\n\r\nThis *only* reconstructs to actually calculate the indexer. It should not be an API change, except that *some* sorting before just didn't work."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/287082937",
    "html_url": "https://github.com/pandas-dev/pandas/pull/15694#issuecomment-287082937",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15694",
    "id": 287082937,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NzA4MjkzNw==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-16T14:55:21Z",
    "updated_at": "2017-03-16T14:55:21Z",
    "author_association": "CONTRIBUTOR",
    "body": "@chris-b1 your example maybe with an older version\r\n\r\n```\r\nIn [1]: df = pd.DataFrame({'value': [1, 2, 3, 4]}, index=pd.MultiIndex(\r\n   ...:     ...:     levels=[['a', 'b'], ['bb', 'aa']],\r\n   ...:     ...:     labels=[[0, 0, 1, 1], [0, 1, 0, 1]]))\r\n   ...: \r\n\r\nIn [2]: df\r\nOut[2]: \r\n      value\r\na bb      1\r\n  aa      2\r\nb bb      3\r\n  aa      4\r\n\r\nIn [3]: df.sort_index()\r\nOut[3]: \r\n      value\r\na aa      2\r\n  bb      1\r\nb aa      4\r\n  bb      3\r\n\r\nIn [4]: df.index\r\nOut[4]: \r\nMultiIndex(levels=[['a', 'b'], ['bb', 'aa']],\r\n           labels=[[0, 0, 1, 1], [0, 1, 0, 1]])\r\n\r\nIn [5]: df.sort_index().index\r\nOut[5]: \r\nMultiIndex(levels=[['a', 'b'], ['bb', 'aa']],\r\n           labels=[[0, 0, 1, 1], [1, 0, 1, 0]])\r\n```"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/287082942",
    "html_url": "https://github.com/pandas-dev/pandas/pull/15694#issuecomment-287082942",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15694",
    "id": 287082942,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NzA4Mjk0Mg==",
    "user": {
      "login": "chris-b1",
      "id": 1924092,
      "node_id": "MDQ6VXNlcjE5MjQwOTI=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1924092?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chris-b1",
      "html_url": "https://github.com/chris-b1",
      "followers_url": "https://api.github.com/users/chris-b1/followers",
      "following_url": "https://api.github.com/users/chris-b1/following{/other_user}",
      "gists_url": "https://api.github.com/users/chris-b1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chris-b1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chris-b1/subscriptions",
      "organizations_url": "https://api.github.com/users/chris-b1/orgs",
      "repos_url": "https://api.github.com/users/chris-b1/repos",
      "events_url": "https://api.github.com/users/chris-b1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chris-b1/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-16T14:55:21Z",
    "updated_at": "2017-03-16T14:55:21Z",
    "author_association": "CONTRIBUTOR",
    "body": "Maybe I'm misunderstanding, but won't `[23]` above now be this?\r\n\r\n```\r\nIn [23]: df.sort_index()\r\nOut[23]: \r\n      value\r\na aa      1\r\n  bb      2\r\nb aa      3\r\n  bb      4\r\n```"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/287086688",
    "html_url": "https://github.com/pandas-dev/pandas/pull/15694#issuecomment-287086688",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15694",
    "id": 287086688,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NzA4NjY4OA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-16T15:06:37Z",
    "updated_at": "2017-03-16T15:06:37Z",
    "author_association": "CONTRIBUTOR",
    "body": "see [3] in my example (your index is right, but the values are not). It gets sorted."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/287090193",
    "html_url": "https://github.com/pandas-dev/pandas/pull/15694#issuecomment-287090193",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15694",
    "id": 287090193,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NzA5MDE5Mw==",
    "user": {
      "login": "chris-b1",
      "id": 1924092,
      "node_id": "MDQ6VXNlcjE5MjQwOTI=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1924092?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chris-b1",
      "html_url": "https://github.com/chris-b1",
      "followers_url": "https://api.github.com/users/chris-b1/followers",
      "following_url": "https://api.github.com/users/chris-b1/following{/other_user}",
      "gists_url": "https://api.github.com/users/chris-b1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chris-b1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chris-b1/subscriptions",
      "organizations_url": "https://api.github.com/users/chris-b1/orgs",
      "repos_url": "https://api.github.com/users/chris-b1/repos",
      "events_url": "https://api.github.com/users/chris-b1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chris-b1/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-16T15:17:34Z",
    "updated_at": "2017-03-16T15:17:34Z",
    "author_association": "CONTRIBUTOR",
    "body": "Sorry I mistyped the values.  Pulled it down. this is the change in behavior - although `[25]` (below) looks like a bug, my point was that someone could have been relying on this if they had specified the levels.\r\n\r\nmaster / 0.19.2\r\n```python\r\nIn [25]: df.sort_index()\r\nOut[25]: \r\n      value\r\na bb      1\r\n  aa      2\r\nb bb      3\r\n  aa      4\r\n```\r\n\r\nPR\r\n```python\r\nIn [3]: df.sort_index()\r\n\r\n      value\r\na aa      2\r\n  bb      1\r\nb aa      4\r\n  bb      3\r\n```"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/287090917",
    "html_url": "https://github.com/pandas-dev/pandas/pull/15694#issuecomment-287090917",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15694",
    "id": 287090917,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NzA5MDkxNw==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-16T15:19:47Z",
    "updated_at": "2017-03-16T15:19:47Z",
    "author_association": "CONTRIBUTOR",
    "body": "@chris-b1 right that's the bug, they *thought* it sorted but actually wasn't. ok will add this as a small sub-section to show it."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/287095752",
    "html_url": "https://github.com/pandas-dev/pandas/pull/15694#issuecomment-287095752",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15694",
    "id": 287095752,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NzA5NTc1Mg==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-16T15:34:24Z",
    "updated_at": "2017-03-16T15:56:14Z",
    "author_association": "CONTRIBUTOR",
    "body": "so just because it was cool :>\r\n\r\nI added support (internally) for removing unused level values, ala #2770  here: https://github.com/pandas-dev/pandas/pull/15694/commits/50ac46118b0dd07738c51d4d3ed7b781a0e65fd4\r\n\r\nThis is still not user exposed. Though pretty trivially to make a ``.remove_unused_levels()`` function (which could just call this).\r\n\r\nFurther I *think* we could actually call this (its pretty cheap as long as you don't actually have unused levels, with a tiny modification) from a higher level (e.g. in DataFrame / Groupby) and such.\r\n\r\nThis is for another issue though.\r\n\r\ncc @shoyer @wesm "
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/287105455",
    "html_url": "https://github.com/pandas-dev/pandas/pull/15694#issuecomment-287105455",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15694",
    "id": 287105455,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NzEwNTQ1NQ==",
    "user": {
      "login": "chris-b1",
      "id": 1924092,
      "node_id": "MDQ6VXNlcjE5MjQwOTI=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1924092?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chris-b1",
      "html_url": "https://github.com/chris-b1",
      "followers_url": "https://api.github.com/users/chris-b1/followers",
      "following_url": "https://api.github.com/users/chris-b1/following{/other_user}",
      "gists_url": "https://api.github.com/users/chris-b1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chris-b1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chris-b1/subscriptions",
      "organizations_url": "https://api.github.com/users/chris-b1/orgs",
      "repos_url": "https://api.github.com/users/chris-b1/repos",
      "events_url": "https://api.github.com/users/chris-b1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chris-b1/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-16T16:03:44Z",
    "updated_at": "2017-03-16T16:03:44Z",
    "author_association": "CONTRIBUTOR",
    "body": "> @chris-b1 right that's the bug, \r\n\r\nNot to belabor the point, but what I was saying is that someone may have _wanted_ that ordering, it was well defined behavior, if surprising.  Seems to have been removed the in current docs, but there used to be a line specifically explaining that lexsorting the index does not always mean lexsorting the level values.  (to be clear, I am completely for changing this)\r\n\r\n> There is an important new method sort_index to sort an axis within a MultiIndex so that its labels are grouped and sorted by the original ordering of the associated factor at that level. Note that this does not necessarily mean the labels will be sorted lexicographically!\r\n\r\nhttp://pandas.pydata.org/pandas-docs/version/0.18.1/advanced.html#the-need-for-sortedness-with-multiindex\r\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/287114525",
    "html_url": "https://github.com/pandas-dev/pandas/pull/15694#issuecomment-287114525",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15694",
    "id": 287114525,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NzExNDUyNQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-16T16:32:33Z",
    "updated_at": "2017-03-16T16:32:33Z",
    "author_association": "CONTRIBUTOR",
    "body": "split off the unused to https://github.com/pandas-dev/pandas/pull/15700\r\n\r\n@chris-b1 added some docs here (just whatsnew): https://github.com/pandas-dev/pandas/pull/15694/commits/1a9be09018c763f52a70ebb5602791032dee1634"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/287119700",
    "html_url": "https://github.com/pandas-dev/pandas/pull/15694#issuecomment-287119700",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15694",
    "id": 287119700,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NzExOTcwMA==",
    "user": {
      "login": "chris-b1",
      "id": 1924092,
      "node_id": "MDQ6VXNlcjE5MjQwOTI=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1924092?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chris-b1",
      "html_url": "https://github.com/chris-b1",
      "followers_url": "https://api.github.com/users/chris-b1/followers",
      "following_url": "https://api.github.com/users/chris-b1/following{/other_user}",
      "gists_url": "https://api.github.com/users/chris-b1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chris-b1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chris-b1/subscriptions",
      "organizations_url": "https://api.github.com/users/chris-b1/orgs",
      "repos_url": "https://api.github.com/users/chris-b1/repos",
      "events_url": "https://api.github.com/users/chris-b1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chris-b1/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-16T16:49:16Z",
    "updated_at": "2017-03-16T16:49:16Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thanks.  I actually somewhat misunderstood current behavior - thought `[73]` below would also give the same `['bb', 'aa']` order - but I guess not.  Knowing that, I do agree this is more of a bug fix than api change, but the doc example is good to show anyways!\r\n\r\n0.19.2\r\n```\r\ndf = pd.DataFrame({'value': [1, 2, 3, 4]}, index=pd.MultiIndex(\r\n    levels=[['a', 'b'], ['bb', 'aa']],\r\n    labels=[[0, 0, 1, 1], [1, 0, 1, 0]]))\r\n\r\ndf\r\nOut[72]: \r\n      value\r\na aa      1\r\n  bb      2\r\nb aa      3\r\n  bb      4\r\n\r\ndf.sort_index()\r\nOut[73]: \r\n      value\r\na aa      1\r\n  bb      2\r\nb aa      3\r\n  bb      4\r\n```"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/288510051",
    "html_url": "https://github.com/pandas-dev/pandas/pull/15694#issuecomment-288510051",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15694",
    "id": 288510051,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4ODUxMDA1MQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-22T19:19:19Z",
    "updated_at": "2017-03-22T19:19:19Z",
    "author_association": "CONTRIBUTOR",
    "body": "any more comments on this."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/288553902",
    "html_url": "https://github.com/pandas-dev/pandas/pull/15694#issuecomment-288553902",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15694",
    "id": 288553902,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4ODU1MzkwMg==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-22T22:02:49Z",
    "updated_at": "2017-03-22T22:03:00Z",
    "author_association": "MEMBER",
    "body": "> If you want to have the behaviour of before (in certain cases), so to sort according to order of the levels,\r\n\r\nMy wording here is not really correct, as it is only the previous behaviour in a very specific case I think? (when they were already lexsorted?) But still, the question is probably valid I think. \r\nGiven that MultiIndex slicing needs lexsorted (or is sorted enough?) indexes, and a plain `sort_index` does not always give you that, it would be good to know to obtain it. "
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/288575792",
    "html_url": "https://github.com/pandas-dev/pandas/pull/15694#issuecomment-288575792",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15694",
    "id": 288575792,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4ODU3NTc5Mg==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-22T23:55:50Z",
    "updated_at": "2017-03-22T23:55:50Z",
    "author_association": "CONTRIBUTOR",
    "body": "so I pushed a small doc update (with corrections as indicated above). \r\n\r\nI also incorporated my (currently internal) method of removing unused levels (this is also included in ``._reconstruct``).\r\n\r\nI am thinking about a public ``.remove_unused_levels()`` method. what do you think? In fact we have a section of the docs where do:\r\n\r\n```\r\n   To reconstruct the multiindex with only the used levels\r\n\r\n   .. ipython:: python\r\n\r\n      pd.MultiIndex.from_tuples(df[['foo','qux']].columns.values)\r\n```\r\n\r\n(Note that this is quite inefficient, but does work).\r\n\r\nAs to your other question. Do we provide a way to have the existing (buggy behavior). sure. you just don't sort! This is completely a bug fix."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/288575936",
    "html_url": "https://github.com/pandas-dev/pandas/pull/15694#issuecomment-288575936",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15694",
    "id": 288575936,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4ODU3NTkzNg==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-22T23:56:49Z",
    "updated_at": "2017-03-22T23:56:49Z",
    "author_association": "CONTRIBUTOR",
    "body": "> Given that MultiIndex slicing needs lexsorted (or is sorted enough?) indexes, and a plain sort_index does not always give you that, it would be good to know to obtain it.\r\n\r\nnot sure what you mean here. the point of this PR is to fix this problem. In some cases previously, ``.sort_index`` would just refuse to work."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/288888482",
    "html_url": "https://github.com/pandas-dev/pandas/pull/15694#issuecomment-288888482",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15694",
    "id": 288888482,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4ODg4ODQ4Mg==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-23T23:13:40Z",
    "updated_at": "2017-03-23T23:13:40Z",
    "author_association": "MEMBER",
    "body": ">> Given that MultiIndex slicing needs lexsorted (or is sorted enough?) indexes, and a plain sort_index does not always give you that, it would be good to know to obtain it.\r\n\r\n> not sure what you mean here. the point of this PR is to fix this problem. In some cases previously, .sort_index would just refuse to work.\r\n\r\nAs I said, my initial wording was wrong, as I shouldn't have said it was to have the previous behaviour. \r\nBut imaging the following: you have a DataFrame with a MultiIndex, and you want to do multi-index slicing. You know that, to be able to do that, you have to sort your index:\r\n\r\n```\r\nIn [14]: idx = pd.MultiIndex([['A', 'B', 'C'], ['c', 'b', 'a']], [[0,1,2,0,1,2], [0,2,1,1,0,2]])\r\n\r\nIn [15]: df = pd.DataFrame({'col': range(len(idx))}, index=idx)\r\n\r\nIn [16]: df\r\nOut[16]: \r\n     col\r\nA c    0\r\nB a    1\r\nC b    2\r\nA b    3\r\nB c    4\r\nC a    5\r\n\r\nIn [17]: df = df.sort_index()\r\n\r\nIn [18]: df\r\nOut[18]: \r\n     col\r\nA b    3\r\n  c    0\r\nB a    1\r\n  c    4\r\nC a    5\r\n  b    2\r\n\r\nIn [19]: df.index\r\nOut[19]: \r\nMultiIndex(levels=[['A', 'B', 'C'], ['c', 'b', 'a']],\r\n           labels=[[0, 0, 1, 1, 2, 2], [1, 0, 2, 0, 2, 1]])\r\n\r\nIn [20]: df.index.is_lexsorted()\r\nOut[20]: False\r\n\r\nIn [21]: IDX = pd.IndexSlice\r\n\r\nIn [22]: df.loc[IDX['B':'C', 'a':'c'], :]\r\n...\r\nUnsortedIndexError: 'MultiIndex Slicing requires the index to be fully lexsorted tuple len (2), lexsort depth (1)'\r\n```\r\n\r\nSo you get a \"Uh, I just sorted my index but I still get an UnsortedIndexError\".\r\n\r\nAnd this has not in principle something to do with this PR in the example above (as the behaviour of the above is exactly the same on master or with this PR). \r\nBut that is what I meant with \"plain sort_index does not always give you that\": `sort_index` does not guarantee that your index is lexsorted, and that you can use multi-index slicing. And so my question what would be the best way to end up with a lexsorted index.\r\n\r\nThe above is true for both this PR and master, and it is not necessarily something that this PR should solve (although we could also opt for `sort_index` sorting the levels as well, although this is a bigger change). \r\nBut you can also construct an example MultiIndex that is lexsorted (our terminology), but not lexicographically sorted. Previously sorting the frame would have kept the order and preserved its lexsortedness, with this PR it will no longer be lexsorted, possibly breaking multi-indexing."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/288890151",
    "html_url": "https://github.com/pandas-dev/pandas/pull/15694#issuecomment-288890151",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15694",
    "id": 288890151,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4ODg5MDE1MQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-23T23:23:07Z",
    "updated_at": "2017-03-23T23:23:07Z",
    "author_association": "CONTRIBUTOR",
    "body": "@jorisvandenbossche ahh, but I actually *can* do this.\r\n\r\n```\r\nIn [7]: df2 = df.sort_index()\r\n\r\nIn [8]: df2.index = df2.index._reconstruct(sort=True)\r\n\r\nIn [9]: df2\r\nOut[9]: \r\n     col\r\nA b    3\r\n  c    0\r\nB a    1\r\n  c    4\r\nC a    5\r\n  b    2\r\n\r\nIn [10]: df2.index.is_lexsorted()\r\nOut[10]: True\r\n\r\nIn [11]: df2.loc[IDX['B':'C', 'a':'c'], :]\r\nOut[11]: \r\n     col\r\nB a    1\r\n  c    4\r\nC a    5\r\n  b    2\r\n\r\n```"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/288890665",
    "html_url": "https://github.com/pandas-dev/pandas/pull/15694#issuecomment-288890665",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15694",
    "id": 288890665,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4ODg5MDY2NQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-23T23:26:17Z",
    "updated_at": "2017-03-23T23:27:06Z",
    "author_association": "CONTRIBUTOR",
    "body": "```\r\nIn [14]: df.sort_index().index\r\nOut[14]: \r\nMultiIndex(levels=[['A', 'B', 'C'], ['c', 'b', 'a']],\r\n           labels=[[0, 0, 1, 1, 2, 2], [1, 0, 2, 0, 2, 1]])\r\n\r\nIn [15]: df2.index\r\nOut[15]: \r\nMultiIndex(levels=[['A', 'B', 'C'], ['a', 'b', 'c']],\r\n           labels=[[0, 0, 1, 1, 2, 2], [1, 2, 0, 2, 0, 1]])\r\n\r\n```\r\n\r\nI actually did try that (IOW, I would actually modify the returned index iself, rather than *just* the indexers).\r\n\r\nIts actually not that big of a deal to do this and its much cheaper than the actual sort itself so I don't think there is a penalty for doing this.\r\n\r\nThe reason we don't *always* do this is that we are eagerly evaluated. You could do all kinds of operations that mess up lexsortedness (e.g. multiple appends, masking whatever) ,and its not clear *when* to reconstruct / sort.\r\n\r\nBut I think ``.sort_index`` is safe as the user *asked* to sort, so no harm no foul."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/288894362",
    "html_url": "https://github.com/pandas-dev/pandas/pull/15694#issuecomment-288894362",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15694",
    "id": 288894362,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4ODg5NDM2Mg==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-23T23:49:48Z",
    "updated_at": "2017-03-23T23:50:10Z",
    "author_association": "CONTRIBUTOR",
    "body": "I pushed the addtl tests.\r\n\r\n```\r\ndiff --git a/pandas/core/frame.py b/pandas/core/frame.py\r\nindex c998705..1d10798 100644\r\n--- a/pandas/core/frame.py\r\n+++ b/pandas/core/frame.py\r\n@@ -3359,6 +3359,9 @@ it is assumed to be aliases for the column names.')\r\n                                    axis=baxis,\r\n                                    convert=False, verify=False)\r\n \r\n+        # reconstruct axis if needed\r\n+        new_data.axes[baxis] = new_data.axes[baxis]._reconstruct(sort=True)\r\n+\r\n         if inplace:\r\n             return self._update_inplace(new_data)\r\n         else:\r\ndiff --git a/pandas/indexes/base.py b/pandas/indexes/base.py\r\nindex 54f73a2..722bfd2 100644\r\n--- a/pandas/indexes/base.py\r\n+++ b/pandas/indexes/base.py\r\n@@ -444,6 +444,10 @@ class Index(IndexOpsMixin, StringAccessorMixin, PandasObject):\r\n \r\n         return self\r\n \r\n+    def _reconstruct(self, sort=False, remove_unused=False):\r\n+        \"\"\" compat with MultiIndex \"\"\"\r\n+        return self\r\n+\r\n     def _update_inplace(self, result, **kwargs):\r\n         # guard when called from IndexOpsMixin\r\n         raise TypeError(\"Index can't be updated inplace\")\r\n```\r\n\r\nis the fix which is almost trivial, BUT\r\n\r\nit *makes* things ``lexsorted`` for sure. BUT then have to go fix some tests for ``stack`` and such. So I will make an issue but needs attacking later."
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/291538471",
    "html_url": "https://github.com/pandas-dev/pandas/pull/15694#issuecomment-291538471",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15694",
    "id": 291538471,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5MTUzODQ3MQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-04-04T15:34:07Z",
    "updated_at": "2017-04-04T15:34:07Z",
    "author_association": "CONTRIBUTOR",
    "body": "revised to replace internal ``_reconstruct`` with ``.sort_monotonic()`` and ``.remove_unused_levels()`` (now public). I think this is cleaner; revised docs a bit as well.\r\n\r\n@chris-b1 @jorisvandenbossche "
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/292377186",
    "html_url": "https://github.com/pandas-dev/pandas/pull/15694#issuecomment-292377186",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15694",
    "id": 292377186,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5MjM3NzE4Ng==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-04-07T00:35:05Z",
    "updated_at": "2017-04-07T00:35:05Z",
    "author_association": "CONTRIBUTOR",
    "body": "fixed up.\r\n\r\n@chris-b1 @jorisvandenbossche \r\n\r\nwill merge tomorrow"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/292546121",
    "html_url": "https://github.com/pandas-dev/pandas/pull/15694#issuecomment-292546121",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15694",
    "id": 292546121,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5MjU0NjEyMQ==",
    "user": {
      "login": "jorisvandenbossche",
      "id": 1020496,
      "node_id": "MDQ6VXNlcjEwMjA0OTY=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorisvandenbossche",
      "html_url": "https://github.com/jorisvandenbossche",
      "followers_url": "https://api.github.com/users/jorisvandenbossche/followers",
      "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions",
      "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs",
      "repos_url": "https://api.github.com/users/jorisvandenbossche/repos",
      "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-04-07T14:07:31Z",
    "updated_at": "2017-04-07T14:07:31Z",
    "author_association": "MEMBER",
    "body": "Good to merge.\r\n\r\nI am thinking we might need to fix #15797 at the same time with this change (I don't mean necessarily in this PR, but the same release). \r\nFor example, in the case of issue https://github.com/pandas-dev/pandas/issues/15622 (which is said to be closed by this PR), you would end up with a now visually sorted (that was the bug report, so that is good), but no longer lexsorted frame. So that could lead to errors when indexing. "
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/292565417",
    "html_url": "https://github.com/pandas-dev/pandas/pull/15694#issuecomment-292565417",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/15694",
    "id": 292565417,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5MjU2NTQxNw==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-04-07T15:17:16Z",
    "updated_at": "2017-04-07T15:17:16Z",
    "author_association": "CONTRIBUTOR",
    "body": "yep will address #15797 next week."
  }
]
