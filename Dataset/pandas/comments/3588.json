[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/18007466",
    "html_url": "https://github.com/pandas-dev/pandas/issues/3588#issuecomment-18007466",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/3588",
    "id": 18007466,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4MDA3NDY2",
    "user": {
      "login": "john-granieri",
      "id": 945749,
      "node_id": "MDQ6VXNlcjk0NTc0OQ==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/945749?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/john-granieri",
      "html_url": "https://github.com/john-granieri",
      "followers_url": "https://api.github.com/users/john-granieri/followers",
      "following_url": "https://api.github.com/users/john-granieri/following{/other_user}",
      "gists_url": "https://api.github.com/users/john-granieri/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/john-granieri/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/john-granieri/subscriptions",
      "organizations_url": "https://api.github.com/users/john-granieri/orgs",
      "repos_url": "https://api.github.com/users/john-granieri/repos",
      "events_url": "https://api.github.com/users/john-granieri/events{/privacy}",
      "received_events_url": "https://api.github.com/users/john-granieri/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-05-16T15:13:06Z",
    "updated_at": "2013-05-16T15:15:14Z",
    "author_association": "NONE",
    "body": "This looks like a general ‘multi-index with Nan’ problem, and as the pivot() method is re-indexing, it blows up. \n\nAt a minimum, it would be nice to have an exception thrown when sum(df.index.isnull()>0 to warn, then people can clean up the Nans in the columns before indexing (either directly or indirectly through things like pivot).\n\n```\n>>> est = pd.DataFrame({\"a\":['R1', 'R2', NaN, 'R4'], 'b':[\"C1\", \"C2\", \"C3\" , \"C4\"], \"c\":[10, 15, NaN , 20]})\n>>> est\n     a   b   c\n0   R1  C1  10\n1   R2  C2  15\n2  NaN  C3 NaN\n3   R4  C4  20\n\n>>> # this is the wrong result\n>>> est.pivot('a','b','c')\n\nb   C1  C2  C3  C4\na                 \nR1 NaN NaN NaN NaN\nR2 NaN  10 NaN NaN\nR4 NaN NaN  15  20\n```\n\nthe index as used then drops the Nan, and then the values are scrambled as the 'a' column lost the Nan index value\n\n```\n>>> est.set_index(['a','b'], drop=False)\n         a   b   c\na  b              \nR1 C1   R1  C1  10\nR2 C2   R2  C2  15\nR4 C3  NaN  C3 NaN\n   C4   R4  C4  20\n```\n\neven though the index has the values:\n\n```\n>>> est.set_index(['a','b']).index, est.set_index(['a','b']).index.levels\n(MultiIndex\n[(R1, C1), (R2, C2), (nan, C3), (R4, C4)],\n[Index([R1, R2, R4], dtype=object), Index([C1, C2, C3, C4], dtype=object)])\n```\n\nsingle column index with Nan seems to work OK\n\n```\n>>> est.set_index(['a'], drop=False)\n       a   b   c\na               \nR1    R1  C1  10\nR2    R2  C2  15\nnan  NaN  C3 NaN\nR4    R4  C4  20\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/18008503",
    "html_url": "https://github.com/pandas-dev/pandas/issues/3588#issuecomment-18008503",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/3588",
    "id": 18008503,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4MDA4NTAz",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-05-16T15:28:04Z",
    "updated_at": "2013-05-16T15:28:04Z",
    "author_association": "CONTRIBUTOR",
    "body": "set_index seems fine in lastest master, what version are you on?\n\n```\nIn [1]: df = DataFrame({\"a\":['R1', 'R2', np.nan, 'R4'], 'b':[\"C1\", \"C2\", \"C3\" , \"C4\"], \"c\":[10, 15, np.nan , 20]})\n\nIn [2]: df.set_index(['a','b'], drop=False)\nOut[2]: \n          a   b   c\na   b              \nR1  C1   R1  C1  10\nR2  C2   R2  C2  15\nNaN C3  NaN  C3 NaN\nR4  C4   R4  C4  20\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/18029337",
    "html_url": "https://github.com/pandas-dev/pandas/issues/3588#issuecomment-18029337",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/3588",
    "id": 18029337,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4MDI5MzM3",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-05-16T21:10:44Z",
    "updated_at": "2013-05-16T21:10:44Z",
    "author_association": "CONTRIBUTOR",
    "body": "a bit non-trivial, but fixed by #3588, @seignour @john-granieri want to test out?\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/18146987",
    "html_url": "https://github.com/pandas-dev/pandas/issues/3588#issuecomment-18146987",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/3588",
    "id": 18146987,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4MTQ2OTg3",
    "user": {
      "login": "john-granieri",
      "id": 945749,
      "node_id": "MDQ6VXNlcjk0NTc0OQ==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/945749?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/john-granieri",
      "html_url": "https://github.com/john-granieri",
      "followers_url": "https://api.github.com/users/john-granieri/followers",
      "following_url": "https://api.github.com/users/john-granieri/following{/other_user}",
      "gists_url": "https://api.github.com/users/john-granieri/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/john-granieri/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/john-granieri/subscriptions",
      "organizations_url": "https://api.github.com/users/john-granieri/orgs",
      "repos_url": "https://api.github.com/users/john-granieri/repos",
      "events_url": "https://api.github.com/users/john-granieri/events{/privacy}",
      "received_events_url": "https://api.github.com/users/john-granieri/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-05-20T13:25:46Z",
    "updated_at": "2013-05-20T13:25:46Z",
    "author_association": "NONE",
    "body": "Thanks for fixing. I had been on 0.10.1. Indeed, on 0.11 the indexing problem went away, but the pivot was still broken. \n\nThanks for fixing! We'll test it out in the latest build.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/18147943",
    "html_url": "https://github.com/pandas-dev/pandas/issues/3588#issuecomment-18147943",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/3588",
    "id": 18147943,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4MTQ3OTQz",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-05-20T13:45:29Z",
    "updated_at": "2013-05-20T13:45:29Z",
    "author_association": "CONTRIBUTOR",
    "body": "glad to hear...v0.11.1 should be out shortly...let us know of any issues\n"
  }
]
