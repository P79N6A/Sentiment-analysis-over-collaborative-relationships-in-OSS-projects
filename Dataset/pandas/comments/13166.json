[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/219036920",
    "html_url": "https://github.com/pandas-dev/pandas/issues/13166#issuecomment-219036920",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13166",
    "id": 219036920,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIxOTAzNjkyMA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-05-13T13:05:08Z",
    "updated_at": "2016-05-13T13:05:08Z",
    "author_association": "CONTRIBUTOR",
    "body": "This might have been true on older versions of pandas (maybe < 0.16.0, I don't recall the exact version) as these were object based. but these moved to true float based hashtables (typed). \n\n```\nIn [1]: pd.__version__\nOut[1]: u'0.18.1'\n\nIn [2]: a = np.arange(1000000)\n\nIn [3]: ind1 = pd.Float64Index(a * 4.8e-08)\n\nIn [4]: ind2 = pd.Float64Index(a * 4.8000000418824129e-08)\n\nIn [5]: %timeit -n 1 -r 1 ind1._engine.get_loc(0)\n1 loop, best of 1: 116 ms per loop\n\nIn [6]: %timeit -n 1 -r 1 ind2._engine.get_loc(0)\n1 loop, best of 1: 107 ms per loop\n```\n\nclosing, but pls show your versions\n\nnote you have to time these with a single iteration as these build the hash tables which are then cached (so of course that tells you the lookup time, but you want the build time as well)\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/219061619",
    "html_url": "https://github.com/pandas-dev/pandas/issues/13166#issuecomment-219061619",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13166",
    "id": 219061619,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIxOTA2MTYxOQ==",
    "user": {
      "login": "ruoyu0088",
      "id": 826871,
      "node_id": "MDQ6VXNlcjgyNjg3MQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/826871?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ruoyu0088",
      "html_url": "https://github.com/ruoyu0088",
      "followers_url": "https://api.github.com/users/ruoyu0088/followers",
      "following_url": "https://api.github.com/users/ruoyu0088/following{/other_user}",
      "gists_url": "https://api.github.com/users/ruoyu0088/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ruoyu0088/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ruoyu0088/subscriptions",
      "organizations_url": "https://api.github.com/users/ruoyu0088/orgs",
      "repos_url": "https://api.github.com/users/ruoyu0088/repos",
      "events_url": "https://api.github.com/users/ruoyu0088/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ruoyu0088/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-05-13T14:36:55Z",
    "updated_at": "2016-05-13T14:37:18Z",
    "author_association": "NONE",
    "body": "@jreback \n\nI am using pandas 0.18.1, python 3.5 64bit, I confirmed this problem both on Linux and Windows 7. \nThe `pd.hashtable.Float64HashTable` is slow for `ind2` on my system. I think this is due to the khash library.\n\n```\nINSTALLED VERSIONS\n------------------\ncommit: None\npython: 3.5.1.final.0\npython-bits: 64\nOS: Linux\nOS-release: 3.10.18\nmachine: x86_64\nprocessor: Intel(R) Celeron(R) CPU N2840 @ 2.16GHz\nbyteorder: little\nLC_ALL: en_US.utf8\nLANG: None\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/219064291",
    "html_url": "https://github.com/pandas-dev/pandas/issues/13166#issuecomment-219064291",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13166",
    "id": 219064291,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIxOTA2NDI5MQ==",
    "user": {
      "login": "ruoyu0088",
      "id": 826871,
      "node_id": "MDQ6VXNlcjgyNjg3MQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/826871?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ruoyu0088",
      "html_url": "https://github.com/ruoyu0088",
      "followers_url": "https://api.github.com/users/ruoyu0088/followers",
      "following_url": "https://api.github.com/users/ruoyu0088/following{/other_user}",
      "gists_url": "https://api.github.com/users/ruoyu0088/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ruoyu0088/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ruoyu0088/subscriptions",
      "organizations_url": "https://api.github.com/users/ruoyu0088/orgs",
      "repos_url": "https://api.github.com/users/ruoyu0088/repos",
      "events_url": "https://api.github.com/users/ruoyu0088/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ruoyu0088/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-05-13T14:45:42Z",
    "updated_at": "2016-05-13T14:45:42Z",
    "author_association": "NONE",
    "body": "@jreback It seems that Python 3.5 has the problem, but Python 2.7 has no problem. Can you reopen this issue? You can confirm this on https://try.jupyter.org/.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/219064613",
    "html_url": "https://github.com/pandas-dev/pandas/issues/13166#issuecomment-219064613",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13166",
    "id": 219064613,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIxOTA2NDYxMw==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-05-13T14:46:45Z",
    "updated_at": "2016-05-13T14:46:45Z",
    "author_association": "CONTRIBUTOR",
    "body": "hmm interesting\n\nso you want to try profiling the cython ?\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/219080134",
    "html_url": "https://github.com/pandas-dev/pandas/issues/13166#issuecomment-219080134",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13166",
    "id": 219080134,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIxOTA4MDEzNA==",
    "user": {
      "login": "ruoyu0088",
      "id": 826871,
      "node_id": "MDQ6VXNlcjgyNjg3MQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/826871?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ruoyu0088",
      "html_url": "https://github.com/ruoyu0088",
      "followers_url": "https://api.github.com/users/ruoyu0088/followers",
      "following_url": "https://api.github.com/users/ruoyu0088/following{/other_user}",
      "gists_url": "https://api.github.com/users/ruoyu0088/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ruoyu0088/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ruoyu0088/subscriptions",
      "organizations_url": "https://api.github.com/users/ruoyu0088/orgs",
      "repos_url": "https://api.github.com/users/ruoyu0088/repos",
      "events_url": "https://api.github.com/users/ruoyu0088/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ruoyu0088/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-05-13T15:39:42Z",
    "updated_at": "2016-05-13T15:39:42Z",
    "author_association": "NONE",
    "body": "I think here is the problem, but I don't know why:\n\n`khash_python.h`\n\n```\n#define kh_float64_hash_func _Py_HashDouble\n```\n\nI changed the line to following code, it view the double value as int64 and use the same formula as `kh_int64_hash_func`:\n\n```\ninline khint64_t asint64(double key)\n{\n  return *(khint64_t *)(&key);\n}\n\n#define kh_float64_hash_func(key) (khint32_t)((asint64(key))>>33^(asint64(key))^(asint64(key))<<11)\n```\n\nThe %time result is almost the same, and it's even 2x faster  for `ind0`.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/219081562",
    "html_url": "https://github.com/pandas-dev/pandas/issues/13166#issuecomment-219081562",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13166",
    "id": 219081562,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIxOTA4MTU2Mg==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-05-13T15:44:37Z",
    "updated_at": "2016-05-13T15:44:37Z",
    "author_association": "CONTRIBUTOR",
    "body": "does that break any tests? can you run the asv suite as well (and add benchmark for this).\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/219082220",
    "html_url": "https://github.com/pandas-dev/pandas/issues/13166#issuecomment-219082220",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13166",
    "id": 219082220,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIxOTA4MjIyMA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-05-13T15:46:57Z",
    "updated_at": "2016-05-13T15:46:57Z",
    "author_association": "CONTRIBUTOR",
    "body": "https://github.com/python/cpython/blob/master/Python/pyhash.c#L85 is the existing PyHash_double.\n\nIts probably generating 'better' hashes that your change, but in the end of the day I don't see why that's preferable.\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/222761800",
    "html_url": "https://github.com/pandas-dev/pandas/issues/13166#issuecomment-222761800",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/13166",
    "id": 222761800,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyMjc2MTgwMA==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-05-31T17:34:11Z",
    "updated_at": "2016-05-31T17:34:11Z",
    "author_association": "CONTRIBUTOR",
    "body": "@ruoyu0088 see also #13335 \n"
  }
]
