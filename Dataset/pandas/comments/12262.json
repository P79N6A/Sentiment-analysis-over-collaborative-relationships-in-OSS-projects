[
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/181890717",
    "html_url": "https://github.com/pandas-dev/pandas/issues/12262#issuecomment-181890717",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/12262",
    "id": 181890717,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4MTg5MDcxNw==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-02-09T14:33:31Z",
    "updated_at": "2016-02-09T14:33:31Z",
    "author_association": "CONTRIBUTOR",
    "body": "a simpler way to look at this is with `memory_profiler`\n\n```\nIn [1]: arr = np.random.rand(100000, 10)\n\nIn [2]: %memit DataFrame(arr)\npeak memory: 67.15 MiB, increment: 0.15 MiB\n\nIn [3]: %memit DataFrame(np.array(arr))\npeak memory: 74.82 MiB, increment: 7.64 MiB\n\nIn [4]: arr2 = np.array(arr)\n\nIn [6]: %memit np.array(arr)\npeak memory: 82.47 MiB, increment: 7.63 MiB\n\nIn [5]: %memit DataFrame(arr2)\npeak memory: 74.83 MiB, increment: 0.01 MiB\n```\n\nThis is all as expected. What exactly do you think is a problem here?\na list-of-lists need to be copied to a numpy array structure\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/182036406",
    "html_url": "https://github.com/pandas-dev/pandas/issues/12262#issuecomment-182036406",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/12262",
    "id": 182036406,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4MjAzNjQwNg==",
    "user": {
      "login": "allthedata",
      "id": 6295582,
      "node_id": "MDQ6VXNlcjYyOTU1ODI=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/6295582?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/allthedata",
      "html_url": "https://github.com/allthedata",
      "followers_url": "https://api.github.com/users/allthedata/followers",
      "following_url": "https://api.github.com/users/allthedata/following{/other_user}",
      "gists_url": "https://api.github.com/users/allthedata/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/allthedata/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/allthedata/subscriptions",
      "organizations_url": "https://api.github.com/users/allthedata/orgs",
      "repos_url": "https://api.github.com/users/allthedata/repos",
      "events_url": "https://api.github.com/users/allthedata/events{/privacy}",
      "received_events_url": "https://api.github.com/users/allthedata/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-02-09T20:00:02Z",
    "updated_at": "2016-02-09T20:00:02Z",
    "author_association": "NONE",
    "body": "I'm saying that if I use numpy to explicitly convert the list-of-arrays to an array first, it saves a lot of memory compared to letting pandas convert it. I'm assuming pandas does something like `np.array()` to convert the input if it realizes that it needs to be converted, so ideally it should use the same amount of memory as me explicitly converting it. Sorry if I'm missing something, but in your post there are no lists to be converted.\n\n``` python\nIn [1]: import numpy as np\n   ...: import pandas as pd\n\nIn [2]: %load_ext memory_profiler\n\nIn [3]: arr = np.random.rand(100000, 10)\n\nIn [4]: list1 = list(arr)  # list of arrays\n\nIn [5]: %memit pd.DataFrame(list1)\npeak memory: 140.37 MiB, increment: 49.91 MiB\n\nIn [6]: %memit pd.DataFrame(np.array(list1))\npeak memory: 99.64 MiB, increment: 8.03 MiB\n\nIn [7]: list2 = [list(i) for i in arr]  # list of lists\n\nIn [8]: %memit pd.DataFrame(list2)\npeak memory: 150.22 MiB, increment: 13.89 MiB\n\nIn [9]: %memit pd.DataFrame(np.array(list2))\npeak memory: 140.18 MiB, increment: 5.34 MiB\n```\n"
  },
  {
    "url": "https://api.github.com/repos/pandas-dev/pandas/issues/comments/182059961",
    "html_url": "https://github.com/pandas-dev/pandas/issues/12262#issuecomment-182059961",
    "issue_url": "https://api.github.com/repos/pandas-dev/pandas/issues/12262",
    "id": 182059961,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4MjA1OTk2MQ==",
    "user": {
      "login": "jreback",
      "id": 953992,
      "node_id": "MDQ6VXNlcjk1Mzk5Mg==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jreback",
      "html_url": "https://github.com/jreback",
      "followers_url": "https://api.github.com/users/jreback/followers",
      "following_url": "https://api.github.com/users/jreback/following{/other_user}",
      "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jreback/subscriptions",
      "organizations_url": "https://api.github.com/users/jreback/orgs",
      "repos_url": "https://api.github.com/users/jreback/repos",
      "events_url": "https://api.github.com/users/jreback/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jreback/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-02-09T20:50:59Z",
    "updated_at": "2016-02-09T20:50:59Z",
    "author_association": "CONTRIBUTOR",
    "body": "@allthedata \n\n`np.array(list_of_array)` is converting a singular dtype structure, then pandas simply takes a view on this and you are done.\n\nHowever a list-of-list is not the same thing as it might have multiple dtypes and we cannot use `np.array` at all as it mostly does the wrong things.\n\nTry this with a list of things that are not exactly the same dtype.\n\nso not really sure what if anything one could do here, while preserving the input semantics. you are welcome to take a look.\n\nif you find something interesting, pls reopen the issue.\n"
  }
]
