[
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/175267204",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/10614#issuecomment-175267204",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/10614",
    "id": 175267204,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3NTI2NzIwNA==",
    "user": {
      "login": "pchote",
      "id": 167819,
      "node_id": "MDQ6VXNlcjE2NzgxOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/167819?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pchote",
      "html_url": "https://github.com/pchote",
      "followers_url": "https://api.github.com/users/pchote/followers",
      "following_url": "https://api.github.com/users/pchote/following{/other_user}",
      "gists_url": "https://api.github.com/users/pchote/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pchote/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pchote/subscriptions",
      "organizations_url": "https://api.github.com/users/pchote/orgs",
      "repos_url": "https://api.github.com/users/pchote/repos",
      "events_url": "https://api.github.com/users/pchote/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pchote/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-01-26T22:27:35Z",
    "updated_at": "2016-01-26T22:27:35Z",
    "author_association": "MEMBER",
    "body": "> If anyone exit while that countdown is, then it crash.\n\nDo you have a crash log from this?\n"
  },
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/175278484",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/10614#issuecomment-175278484",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/10614",
    "id": 175278484,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3NTI3ODQ4NA==",
    "user": {
      "login": "kyrreso",
      "id": 526956,
      "node_id": "MDQ6VXNlcjUyNjk1Ng==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/526956?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kyrreso",
      "html_url": "https://github.com/kyrreso",
      "followers_url": "https://api.github.com/users/kyrreso/followers",
      "following_url": "https://api.github.com/users/kyrreso/following{/other_user}",
      "gists_url": "https://api.github.com/users/kyrreso/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kyrreso/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kyrreso/subscriptions",
      "organizations_url": "https://api.github.com/users/kyrreso/orgs",
      "repos_url": "https://api.github.com/users/kyrreso/repos",
      "events_url": "https://api.github.com/users/kyrreso/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kyrreso/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-01-26T22:53:26Z",
    "updated_at": "2016-01-26T22:53:26Z",
    "author_association": "CONTRIBUTOR",
    "body": "Sorry, its only stall.. no crash.. so no logs I think?\n"
  },
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/180837865",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/10614#issuecomment-180837865",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/10614",
    "id": 180837865,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4MDgzNzg2NQ==",
    "user": {
      "login": "kyrreso",
      "id": 526956,
      "node_id": "MDQ6VXNlcjUyNjk1Ng==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/526956?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kyrreso",
      "html_url": "https://github.com/kyrreso",
      "followers_url": "https://api.github.com/users/kyrreso/followers",
      "following_url": "https://api.github.com/users/kyrreso/following{/other_user}",
      "gists_url": "https://api.github.com/users/kyrreso/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kyrreso/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kyrreso/subscriptions",
      "organizations_url": "https://api.github.com/users/kyrreso/orgs",
      "repos_url": "https://api.github.com/users/kyrreso/repos",
      "events_url": "https://api.github.com/users/kyrreso/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kyrreso/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-02-06T18:54:05Z",
    "updated_at": "2016-02-06T18:54:05Z",
    "author_association": "CONTRIBUTOR",
    "body": "can anyone ask him next time they meet him, what kind of system he runs? and how he leave? It happened again, after game was done..\n"
  },
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/182019205",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/10614#issuecomment-182019205",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/10614",
    "id": 182019205,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4MjAxOTIwNQ==",
    "user": {
      "login": "kyrreso",
      "id": 526956,
      "node_id": "MDQ6VXNlcjUyNjk1Ng==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/526956?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kyrreso",
      "html_url": "https://github.com/kyrreso",
      "followers_url": "https://api.github.com/users/kyrreso/followers",
      "following_url": "https://api.github.com/users/kyrreso/following{/other_user}",
      "gists_url": "https://api.github.com/users/kyrreso/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kyrreso/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kyrreso/subscriptions",
      "organizations_url": "https://api.github.com/users/kyrreso/orgs",
      "repos_url": "https://api.github.com/users/kyrreso/repos",
      "events_url": "https://api.github.com/users/kyrreso/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kyrreso/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-02-09T19:25:24Z",
    "updated_at": "2016-02-09T19:25:24Z",
    "author_association": "CONTRIBUTOR",
    "body": "![openra-2016-02-09t192307z](https://cloud.githubusercontent.com/assets/526956/12927938/260fc8c6-cf6b-11e5-80bc-d425ef5f6e0b.png)\nHe is using win10, and usually do first surrender, then abort game\n"
  },
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/269759194",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/10614#issuecomment-269759194",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/10614",
    "id": 269759194,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2OTc1OTE5NA==",
    "user": {
      "login": "AoAGeneral",
      "id": 7693928,
      "node_id": "MDQ6VXNlcjc2OTM5Mjg=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/7693928?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AoAGeneral",
      "html_url": "https://github.com/AoAGeneral",
      "followers_url": "https://api.github.com/users/AoAGeneral/followers",
      "following_url": "https://api.github.com/users/AoAGeneral/following{/other_user}",
      "gists_url": "https://api.github.com/users/AoAGeneral/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AoAGeneral/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AoAGeneral/subscriptions",
      "organizations_url": "https://api.github.com/users/AoAGeneral/orgs",
      "repos_url": "https://api.github.com/users/AoAGeneral/repos",
      "events_url": "https://api.github.com/users/AoAGeneral/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AoAGeneral/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-12-30T11:04:11Z",
    "updated_at": "2016-12-30T11:04:11Z",
    "author_association": "CONTRIBUTOR",
    "body": "Not sure if it relates to this but recently there has been some issues where some players will havea DC countdown timer. In some cases exactly this will happen and just locks the server up. But it gives no \"Connection aborted message.\" or anything. Its just stuck. Screen can be scrolled around and you can click on stuff as if the game is waiting for players to connect. Just nothing.\r\n\r\nIve sat for about 30 minutes once before and it gave no progress. Once I left the server it took the server itself about 5 minutes to reset itself and pop back up.\r\n\r\nIf it happens again i will sit in the server for much longer and see what happens."
  },
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/277038556",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/10614#issuecomment-277038556",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/10614",
    "id": 277038556,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3NzAzODU1Ng==",
    "user": {
      "login": "pchote",
      "id": 167819,
      "node_id": "MDQ6VXNlcjE2NzgxOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/167819?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pchote",
      "html_url": "https://github.com/pchote",
      "followers_url": "https://api.github.com/users/pchote/followers",
      "following_url": "https://api.github.com/users/pchote/following{/other_user}",
      "gists_url": "https://api.github.com/users/pchote/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pchote/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pchote/subscriptions",
      "organizations_url": "https://api.github.com/users/pchote/orgs",
      "repos_url": "https://api.github.com/users/pchote/repos",
      "events_url": "https://api.github.com/users/pchote/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pchote/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-02T18:20:36Z",
    "updated_at": "2017-02-02T18:21:38Z",
    "author_association": "MEMBER",
    "body": "With a quick look I have narrowed this down to the frame associated with the Drop Client order (`0xBF`).  The timedout detection always uses `-1` and this is parsed by the other clients fine.  Other drops (including a player disconnecting normally) uses `Connection.MostRecentFrame`.\r\n\r\nWhen a player drops while another player is stalling the game then the drop client order is *not* parsed by the other clients, and so the game will stall forever waiting for this other client.  I need to dig deeper, but I suspect that something in either the client or server has decided that all the orders from that client have already been dealt with, and so the drop is ignored.\r\n\r\nI've confirmed that replacing `MostRecentFrame` with `-1` fixes the issue, but I expect this will have other unwanted side effects.  I strongly suspect that using `-1` for lag-drops is what caused #6241, and that the general drop-frame bogosity that causes this bug is also behind our sporadic quit desyncs."
  },
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/277045179",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/10614#issuecomment-277045179",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/10614",
    "id": 277045179,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3NzA0NTE3OQ==",
    "user": {
      "login": "pchote",
      "id": 167819,
      "node_id": "MDQ6VXNlcjE2NzgxOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/167819?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pchote",
      "html_url": "https://github.com/pchote",
      "followers_url": "https://api.github.com/users/pchote/followers",
      "following_url": "https://api.github.com/users/pchote/following{/other_user}",
      "gists_url": "https://api.github.com/users/pchote/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pchote/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pchote/subscriptions",
      "organizations_url": "https://api.github.com/users/pchote/orgs",
      "repos_url": "https://api.github.com/users/pchote/repos",
      "events_url": "https://api.github.com/users/pchote/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pchote/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-02T18:45:19Z",
    "updated_at": "2017-02-02T18:45:19Z",
    "author_association": "MEMBER",
    "body": "More specifically, for some reason `MostRecentFrame` is being set to 0 for a player who drops while the game is stalled (it is a sensible positive number for players who drop when the game is running normally).  This makes the server try and parse it as a server order which then fails and silently drops it on the floor instead of sending it to the other players.\r\n\r\nChanging the `DispatchOrders` to `DispatchOrdersToClients` in `DropClient` provides another workaround, but the real bug and fix will be to work out why `MostRecentFrame` is being set to 0 in the first place."
  },
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/277050537",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/10614#issuecomment-277050537",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/10614",
    "id": 277050537,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3NzA1MDUzNw==",
    "user": {
      "login": "pchote",
      "id": 167819,
      "node_id": "MDQ6VXNlcjE2NzgxOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/167819?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pchote",
      "html_url": "https://github.com/pchote",
      "followers_url": "https://api.github.com/users/pchote/followers",
      "following_url": "https://api.github.com/users/pchote/following{/other_user}",
      "gists_url": "https://api.github.com/users/pchote/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pchote/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pchote/subscriptions",
      "organizations_url": "https://api.github.com/users/pchote/orgs",
      "repos_url": "https://api.github.com/users/pchote/repos",
      "events_url": "https://api.github.com/users/pchote/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pchote/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-02T19:04:07Z",
    "updated_at": "2017-02-02T19:10:15Z",
    "author_association": "MEMBER",
    "body": "Ok, well that was stupid.  `MostRecentFrame` is being set unconditionally with the frame for each order, which means it gets set to 0 when the client sends an immediate order like \"hey i'm about to quit\".  Adding a greater than check so that it *actually* stores the most recent frame fixes the issue properly."
  }
]
