[
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/217632034",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/11218#issuecomment-217632034",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/11218",
    "id": 217632034,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIxNzYzMjAzNA==",
    "user": {
      "login": "obrakmann",
      "id": 4331210,
      "node_id": "MDQ6VXNlcjQzMzEyMTA=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/4331210?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/obrakmann",
      "html_url": "https://github.com/obrakmann",
      "followers_url": "https://api.github.com/users/obrakmann/followers",
      "following_url": "https://api.github.com/users/obrakmann/following{/other_user}",
      "gists_url": "https://api.github.com/users/obrakmann/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/obrakmann/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/obrakmann/subscriptions",
      "organizations_url": "https://api.github.com/users/obrakmann/orgs",
      "repos_url": "https://api.github.com/users/obrakmann/repos",
      "events_url": "https://api.github.com/users/obrakmann/events{/privacy}",
      "received_events_url": "https://api.github.com/users/obrakmann/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-05-07T12:15:50Z",
    "updated_at": "2016-05-07T12:15:50Z",
    "author_association": "CONTRIBUTOR",
    "body": "I think these would be the events leading up to that crash:\n1. Truk enters the building\n2. `Enter.FindAndTransitionToNextState()` is running, and since `DonateSupplies` uses `EnterBehaviour.Dispose`, `Actor.Dispose()` runs for the actor, queueing a FrameEndTask.\n3. Truk is then killed by the enemy:\n- `Health.InflictDamage` first calls `SpawnActorOnDeath.Killed()`, which queues a FrameEndTask, during which some trait lookups happen.\n- `Health.InflightDamage` then calls `Actor.Dispose()` as well, queueing another FrameEndTask (which will never run, the game crashes before).\n1. After the tick, the first FrameEndTask disposes of the actor. The second FrameEndTask would spawn the crate from the truk, but the trait lookups then fail and throw an exception.\n\nThe fix would be to check `Actor.Disposed` in `SpawnActorOnDeath`'s FrameEndTask. The truk has already delivered the money, so a crate shouldn't be spawned anyway.\n"
  },
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/217673707",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/11218#issuecomment-217673707",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/11218",
    "id": 217673707,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIxNzY3MzcwNw==",
    "user": {
      "login": "abcdefg30",
      "id": 7704140,
      "node_id": "MDQ6VXNlcjc3MDQxNDA=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/7704140?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/abcdefg30",
      "html_url": "https://github.com/abcdefg30",
      "followers_url": "https://api.github.com/users/abcdefg30/followers",
      "following_url": "https://api.github.com/users/abcdefg30/following{/other_user}",
      "gists_url": "https://api.github.com/users/abcdefg30/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/abcdefg30/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/abcdefg30/subscriptions",
      "organizations_url": "https://api.github.com/users/abcdefg30/orgs",
      "repos_url": "https://api.github.com/users/abcdefg30/repos",
      "events_url": "https://api.github.com/users/abcdefg30/events{/privacy}",
      "received_events_url": "https://api.github.com/users/abcdefg30/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-05-07T22:50:48Z",
    "updated_at": "2016-05-07T22:50:48Z",
    "author_association": "MEMBER",
    "body": "Wasn't this fixed in #11234 now (see https://github.com/OpenRA/OpenRA/pull/11234#issuecomment-217642412)?\n"
  }
]
