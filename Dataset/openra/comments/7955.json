[
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/93096444",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/7955#issuecomment-93096444",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/7955",
    "id": 93096444,
    "node_id": "MDEyOklzc3VlQ29tbWVudDkzMDk2NDQ0",
    "user": {
      "login": "RoosterDragon",
      "id": 3399086,
      "node_id": "MDQ6VXNlcjMzOTkwODY=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/3399086?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/RoosterDragon",
      "html_url": "https://github.com/RoosterDragon",
      "followers_url": "https://api.github.com/users/RoosterDragon/followers",
      "following_url": "https://api.github.com/users/RoosterDragon/following{/other_user}",
      "gists_url": "https://api.github.com/users/RoosterDragon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/RoosterDragon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/RoosterDragon/subscriptions",
      "organizations_url": "https://api.github.com/users/RoosterDragon/orgs",
      "repos_url": "https://api.github.com/users/RoosterDragon/repos",
      "events_url": "https://api.github.com/users/RoosterDragon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/RoosterDragon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-04-14T22:31:22Z",
    "updated_at": "2015-04-14T22:36:05Z",
    "author_association": "MEMBER",
    "body": "It's looping endlessly inside [PathFinder.FindPath](https://github.com/OpenRA/OpenRA/blob/6a66cea01f8b309578aad132c74be6f9f8313708/OpenRA.Mods.Common/Traits/World/PathFinder.cs#L125-L133). The caller is [Harvester.ClosestProc](https://github.com/OpenRA/OpenRA/blob/6a66cea01f8b309578aad132c74be6f9f8313708/OpenRA.Mods.Common/Traits/Harvester.cs#L124-L137).\n\n@Rydra any thoughts?\n"
  },
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/93098401",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/7955#issuecomment-93098401",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/7955",
    "id": 93098401,
    "node_id": "MDEyOklzc3VlQ29tbWVudDkzMDk4NDAx",
    "user": {
      "login": "penev92",
      "id": 7137365,
      "node_id": "MDQ6VXNlcjcxMzczNjU=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/7137365?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/penev92",
      "html_url": "https://github.com/penev92",
      "followers_url": "https://api.github.com/users/penev92/followers",
      "following_url": "https://api.github.com/users/penev92/following{/other_user}",
      "gists_url": "https://api.github.com/users/penev92/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/penev92/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/penev92/subscriptions",
      "organizations_url": "https://api.github.com/users/penev92/orgs",
      "repos_url": "https://api.github.com/users/penev92/repos",
      "events_url": "https://api.github.com/users/penev92/events{/privacy}",
      "received_events_url": "https://api.github.com/users/penev92/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-04-14T22:38:13Z",
    "updated_at": "2015-04-14T22:38:13Z",
    "author_association": "MEMBER",
    "body": "Pinging @Rydra, as he is most likely to be able to help with this.\n"
  },
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/93204753",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/7955#issuecomment-93204753",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/7955",
    "id": 93204753,
    "node_id": "MDEyOklzc3VlQ29tbWVudDkzMjA0NzUz",
    "user": {
      "login": "Rydra",
      "id": 5826108,
      "node_id": "MDQ6VXNlcjU4MjYxMDg=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/5826108?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Rydra",
      "html_url": "https://github.com/Rydra",
      "followers_url": "https://api.github.com/users/Rydra/followers",
      "following_url": "https://api.github.com/users/Rydra/following{/other_user}",
      "gists_url": "https://api.github.com/users/Rydra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Rydra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Rydra/subscriptions",
      "organizations_url": "https://api.github.com/users/Rydra/orgs",
      "repos_url": "https://api.github.com/users/Rydra/repos",
      "events_url": "https://api.github.com/users/Rydra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Rydra/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-04-15T05:50:07Z",
    "updated_at": "2015-04-15T05:50:07Z",
    "author_association": "CONTRIBUTOR",
    "body": "I will check it out, yet I would need if possible some information to help me reproduce the error, conditions, etc...\n"
  },
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/93205002",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/7955#issuecomment-93205002",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/7955",
    "id": 93205002,
    "node_id": "MDEyOklzc3VlQ29tbWVudDkzMjA1MDAy",
    "user": {
      "login": "Rydra",
      "id": 5826108,
      "node_id": "MDQ6VXNlcjU4MjYxMDg=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/5826108?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Rydra",
      "html_url": "https://github.com/Rydra",
      "followers_url": "https://api.github.com/users/Rydra/followers",
      "following_url": "https://api.github.com/users/Rydra/following{/other_user}",
      "gists_url": "https://api.github.com/users/Rydra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Rydra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Rydra/subscriptions",
      "organizations_url": "https://api.github.com/users/Rydra/orgs",
      "repos_url": "https://api.github.com/users/Rydra/repos",
      "events_url": "https://api.github.com/users/Rydra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Rydra/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-04-15T05:51:00Z",
    "updated_at": "2015-04-15T05:51:00Z",
    "author_association": "CONTRIBUTOR",
    "body": "Ohhh it has a replay, then I'll reproduce and check as soon as I can.\n"
  },
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/93377260",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/7955#issuecomment-93377260",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/7955",
    "id": 93377260,
    "node_id": "MDEyOklzc3VlQ29tbWVudDkzMzc3MjYw",
    "user": {
      "login": "penev92",
      "id": 7137365,
      "node_id": "MDQ6VXNlcjcxMzczNjU=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/7137365?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/penev92",
      "html_url": "https://github.com/penev92",
      "followers_url": "https://api.github.com/users/penev92/followers",
      "following_url": "https://api.github.com/users/penev92/following{/other_user}",
      "gists_url": "https://api.github.com/users/penev92/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/penev92/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/penev92/subscriptions",
      "organizations_url": "https://api.github.com/users/penev92/orgs",
      "repos_url": "https://api.github.com/users/penev92/repos",
      "events_url": "https://api.github.com/users/penev92/events{/privacy}",
      "received_events_url": "https://api.github.com/users/penev92/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-04-15T12:46:59Z",
    "updated_at": "2015-04-15T12:53:44Z",
    "author_association": "MEMBER",
    "body": "I added some logging to check for who does what.\nI got the following using Clemmy's replay:\n\n> --Tick: 27137 (local)\n> DeliverResources is ticking for harvester 266 (Watson (1)) and he doesn't have an OwnerLinkedProc.\n> Harvester 266 (Watson (1)) is looking for ClosestProc.\n> Started looking for path at 16.4.2015 г. 14:27:42 ч..\n> Finished looking for path at 16.4.2015 г. 14:28:13 ч..\n> Harvester 266 (Watson (1)) finished searching for ClosestProc.\n> --Tick: 27138 (local)\n\nThis is a half-minute path search, and all 31 seconds of it are in the `while` that @RoosterDragon pointed out - [PathFinder.FindPath](https://github.com/OpenRA/OpenRA/blob/6a66cea01f8b309578aad132c74be6f9f8313708/OpenRA.Mods.Common/Traits/World/PathFinder.cs#L125-L133) (I added the `DateTime.Now` logging around it)\n\nSadly I was unable to get such info from my replay, I guess I killed the game too early when it froze :/\n"
  },
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/93503509",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/7955#issuecomment-93503509",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/7955",
    "id": 93503509,
    "node_id": "MDEyOklzc3VlQ29tbWVudDkzNTAzNTA5",
    "user": {
      "login": "RoosterDragon",
      "id": 3399086,
      "node_id": "MDQ6VXNlcjMzOTkwODY=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/3399086?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/RoosterDragon",
      "html_url": "https://github.com/RoosterDragon",
      "followers_url": "https://api.github.com/users/RoosterDragon/followers",
      "following_url": "https://api.github.com/users/RoosterDragon/following{/other_user}",
      "gists_url": "https://api.github.com/users/RoosterDragon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/RoosterDragon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/RoosterDragon/subscriptions",
      "organizations_url": "https://api.github.com/users/RoosterDragon/orgs",
      "repos_url": "https://api.github.com/users/RoosterDragon/repos",
      "events_url": "https://api.github.com/users/RoosterDragon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/RoosterDragon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-04-15T17:58:30Z",
    "updated_at": "2015-04-15T17:58:30Z",
    "author_association": "MEMBER",
    "body": "Now I'm taking a wild stab in the dark here:\n\nIs it possible [this line in Expand](https://github.com/OpenRA/OpenRA/blob/6a66cea01f8b309578aad132c74be6f9f8313708/OpenRA.Mods.Common/Pathfinder/PathSearch.cs#L119) is re-opening nodes that are closed, and thus allowing the search to keep reconsidering the same cells?\n\nMaybe it shouldn't be updating closed cells at all? i.e:\n\n``` c#\n// Closed nodes remain closed, unvisited or open nodes become open.\nif(neighborCell.Status != CellStatus.Closed)\n    Graph[neighborCPos] = new CellInfo(gCost, gCost + hCost, currentMinNode, newStatus);\n```\n\nOr maybe it should update the costs, but keep closed cells closed?\n\n``` c#\n// Closed nodes remain closed, unvisited or open nodes become open.\nvar newStatus = neighborCell.Status == CellStatus.Closed ? CellStatus.Closed : CellStatus.Open;\nGraph[neighborCPos] = new CellInfo(gCost, gCost + hCost, currentMinNode, newStatus);\n```\n\nOr maybe it is meant to reopen them, in which case I don't know what to do.\n\nI could of course be talking utter nonsense because I don't understand the pathing, so that's also an option. :)\n"
  },
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/93522494",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/7955#issuecomment-93522494",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/7955",
    "id": 93522494,
    "node_id": "MDEyOklzc3VlQ29tbWVudDkzNTIyNDk0",
    "user": {
      "login": "Rydra",
      "id": 5826108,
      "node_id": "MDQ6VXNlcjU4MjYxMDg=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/5826108?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Rydra",
      "html_url": "https://github.com/Rydra",
      "followers_url": "https://api.github.com/users/Rydra/followers",
      "following_url": "https://api.github.com/users/Rydra/following{/other_user}",
      "gists_url": "https://api.github.com/users/Rydra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Rydra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Rydra/subscriptions",
      "organizations_url": "https://api.github.com/users/Rydra/orgs",
      "repos_url": "https://api.github.com/users/Rydra/repos",
      "events_url": "https://api.github.com/users/Rydra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Rydra/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-04-15T18:28:45Z",
    "updated_at": "2015-04-15T18:28:45Z",
    "author_association": "CONTRIBUTOR",
    "body": "@RoosterDragon it reopens closed cells because there exists the possibility to find a better path to an already processed node. Not reopening closed nodes improves performance at the expense of providing possibly suboptimal paths.\n\nThis crash must be something deeper and must be dealt with. When I analyze the replay I hope I can come up with some conclusions.\n\nIndeed not reopening closed nodes would be a fast way to deal with this bug issue, but imho I should get a grasp why it has failed in this very specific case.\n"
  },
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/93555255",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/7955#issuecomment-93555255",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/7955",
    "id": 93555255,
    "node_id": "MDEyOklzc3VlQ29tbWVudDkzNTU1MjU1",
    "user": {
      "login": "Rydra",
      "id": 5826108,
      "node_id": "MDQ6VXNlcjU4MjYxMDg=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/5826108?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Rydra",
      "html_url": "https://github.com/Rydra",
      "followers_url": "https://api.github.com/users/Rydra/followers",
      "following_url": "https://api.github.com/users/Rydra/following{/other_user}",
      "gists_url": "https://api.github.com/users/Rydra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Rydra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Rydra/subscriptions",
      "organizations_url": "https://api.github.com/users/Rydra/orgs",
      "repos_url": "https://api.github.com/users/Rydra/repos",
      "events_url": "https://api.github.com/users/Rydra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Rydra/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-04-15T20:23:31Z",
    "updated_at": "2015-04-15T20:23:31Z",
    "author_association": "CONTRIBUTOR",
    "body": "Just a small question... How can I play (and therefore debug) this replay? Because in the DEV_VERSION I can't run it due to different version replay.\n"
  },
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/93557695",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/7955#issuecomment-93557695",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/7955",
    "id": 93557695,
    "node_id": "MDEyOklzc3VlQ29tbWVudDkzNTU3Njk1",
    "user": {
      "login": "penev92",
      "id": 7137365,
      "node_id": "MDQ6VXNlcjcxMzczNjU=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/7137365?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/penev92",
      "html_url": "https://github.com/penev92",
      "followers_url": "https://api.github.com/users/penev92/followers",
      "following_url": "https://api.github.com/users/penev92/following{/other_user}",
      "gists_url": "https://api.github.com/users/penev92/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/penev92/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/penev92/subscriptions",
      "organizations_url": "https://api.github.com/users/penev92/orgs",
      "repos_url": "https://api.github.com/users/penev92/repos",
      "events_url": "https://api.github.com/users/penev92/events{/privacy}",
      "received_events_url": "https://api.github.com/users/penev92/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-04-15T20:26:53Z",
    "updated_at": "2015-04-15T20:26:53Z",
    "author_association": "MEMBER",
    "body": "Open OpenRA\\mods\\cnc\\mod.yaml and set `Version:` to `playtest-20150408`. Basically lie to the game :D\n"
  },
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/93562723",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/7955#issuecomment-93562723",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/7955",
    "id": 93562723,
    "node_id": "MDEyOklzc3VlQ29tbWVudDkzNTYyNzIz",
    "user": {
      "login": "chrisforbes",
      "id": 128877,
      "node_id": "MDQ6VXNlcjEyODg3Nw==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/128877?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chrisforbes",
      "html_url": "https://github.com/chrisforbes",
      "followers_url": "https://api.github.com/users/chrisforbes/followers",
      "following_url": "https://api.github.com/users/chrisforbes/following{/other_user}",
      "gists_url": "https://api.github.com/users/chrisforbes/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chrisforbes/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chrisforbes/subscriptions",
      "organizations_url": "https://api.github.com/users/chrisforbes/orgs",
      "repos_url": "https://api.github.com/users/chrisforbes/repos",
      "events_url": "https://api.github.com/users/chrisforbes/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chrisforbes/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-04-15T20:40:21Z",
    "updated_at": "2015-04-15T20:41:42Z",
    "author_association": "MEMBER",
    "body": "> @RoosterDragon it reopens closed cells because there exists the possibility to find a better path to an already processed node\n\nNak! It's possible to find a better path to a cell in the open queue, but _not_ once the node has been visited.\n\nEdit: This is why textbook A\\* requires the heuristic to underestimate the true cost.\n"
  },
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/93565835",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/7955#issuecomment-93565835",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/7955",
    "id": 93565835,
    "node_id": "MDEyOklzc3VlQ29tbWVudDkzNTY1ODM1",
    "user": {
      "login": "Rydra",
      "id": 5826108,
      "node_id": "MDQ6VXNlcjU4MjYxMDg=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/5826108?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Rydra",
      "html_url": "https://github.com/Rydra",
      "followers_url": "https://api.github.com/users/Rydra/followers",
      "following_url": "https://api.github.com/users/Rydra/following{/other_user}",
      "gists_url": "https://api.github.com/users/Rydra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Rydra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Rydra/subscriptions",
      "organizations_url": "https://api.github.com/users/Rydra/orgs",
      "repos_url": "https://api.github.com/users/Rydra/repos",
      "events_url": "https://api.github.com/users/Rydra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Rydra/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-04-15T20:49:58Z",
    "updated_at": "2015-04-15T20:49:58Z",
    "author_association": "CONTRIBUTOR",
    "body": "@chrisforbes It is possible, I could put a graphic example about it but I feel somewhat lazy now. Just put a conditional breakpoint in the line 115 of the file PathSearch.cs (from the bleed branch) where it only stops if CellStatus is closed. If it stops during a gameplay, it means that for an already visited node it has found a better way to reach it. Make the test.\n\nA.I. books implementations take this scenario into account in the algorithms. (Although I have read some too that do not). Yet not doing so leads to suboptimal paths.\n"
  },
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/93576197",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/7955#issuecomment-93576197",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/7955",
    "id": 93576197,
    "node_id": "MDEyOklzc3VlQ29tbWVudDkzNTc2MTk3",
    "user": {
      "login": "Rydra",
      "id": 5826108,
      "node_id": "MDQ6VXNlcjU4MjYxMDg=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/5826108?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Rydra",
      "html_url": "https://github.com/Rydra",
      "followers_url": "https://api.github.com/users/Rydra/followers",
      "following_url": "https://api.github.com/users/Rydra/following{/other_user}",
      "gists_url": "https://api.github.com/users/Rydra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Rydra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Rydra/subscriptions",
      "organizations_url": "https://api.github.com/users/Rydra/orgs",
      "repos_url": "https://api.github.com/users/Rydra/repos",
      "events_url": "https://api.github.com/users/Rydra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Rydra/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-04-15T21:36:52Z",
    "updated_at": "2015-04-15T21:37:29Z",
    "author_association": "CONTRIBUTOR",
    "body": "Ok I've finally found the real issue here. It's indeed one of those extreme rare cases and we should consider carefully the implications of this.\n\nThe issue is found in the line 114 from the file PathGraph.cs: var directions = DirectedNeighbors[index]. Just to sum up what this does, regular A\\* implementations found in books and other resources consider all 8 neighbours when making the neighbour loop. Prior to the pathfinder refactor, the neighbour selection was made so that it would consider only the neighbours that would bring your forward from your goal given the previous point.\n\nFor instance, if you are in 1, 2 because you came from 1, 1, there's on a 99% basis no need to consider the points that you \"left behind\". This was implemented that way before I laid my hands on the pathfinder, and I considered it a clever \"heuristic\" to cut down the amount of iterations you had to do. Yet this comes with the flaw that it could lead to suboptimal paths (sometimes that's ok).\n\nYet replay's case is one of those 1% cases where the pathing to perform is so complex that to perform a correct pathfinding conflicts with the optimality of a solution (made by reopening closed nodes as needed). You can try by replacing the line \"var directions = DirectedNeighbors[index]\" by \"var directions = DirectedNeighbors[4]\". Now the replay won't be stuck in that forever loop.\n\nQuite curious.\n\nTo prevent this error to happen again, there exist 2 possible solutions:\n\n1- Consider the 8 neighbours every time. This will solve this problem and return always the one and only shortest path from a source to destination. Performance will be hit \"a bit\".\n2- Not reopening again closed nodes. This will solve this problem, improve a bit performance at the expense of not ensuring that a given path is the shortest.\n\nUp to you and what you decide. Both solutions are extremely easy to implement.\n"
  },
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/93576553",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/7955#issuecomment-93576553",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/7955",
    "id": 93576553,
    "node_id": "MDEyOklzc3VlQ29tbWVudDkzNTc2NTUz",
    "user": {
      "login": "pchote",
      "id": 167819,
      "node_id": "MDQ6VXNlcjE2NzgxOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/167819?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pchote",
      "html_url": "https://github.com/pchote",
      "followers_url": "https://api.github.com/users/pchote/followers",
      "following_url": "https://api.github.com/users/pchote/following{/other_user}",
      "gists_url": "https://api.github.com/users/pchote/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pchote/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pchote/subscriptions",
      "organizations_url": "https://api.github.com/users/pchote/orgs",
      "repos_url": "https://api.github.com/users/pchote/repos",
      "events_url": "https://api.github.com/users/pchote/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pchote/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-04-15T21:38:41Z",
    "updated_at": "2015-04-15T21:38:41Z",
    "author_association": "MEMBER",
    "body": "Do we really care if an actor doesn't pick the globally shortest path? Chances are that this path will be invalidated/recalculated at least once while the unit is following it.\n"
  },
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/93577813",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/7955#issuecomment-93577813",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/7955",
    "id": 93577813,
    "node_id": "MDEyOklzc3VlQ29tbWVudDkzNTc3ODEz",
    "user": {
      "login": "chrisforbes",
      "id": 128877,
      "node_id": "MDQ6VXNlcjEyODg3Nw==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/128877?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chrisforbes",
      "html_url": "https://github.com/chrisforbes",
      "followers_url": "https://api.github.com/users/chrisforbes/followers",
      "following_url": "https://api.github.com/users/chrisforbes/following{/other_user}",
      "gists_url": "https://api.github.com/users/chrisforbes/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chrisforbes/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chrisforbes/subscriptions",
      "organizations_url": "https://api.github.com/users/chrisforbes/orgs",
      "repos_url": "https://api.github.com/users/chrisforbes/repos",
      "events_url": "https://api.github.com/users/chrisforbes/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chrisforbes/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-04-15T21:44:42Z",
    "updated_at": "2015-04-15T21:44:42Z",
    "author_association": "MEMBER",
    "body": "This is actually just completely broken, and there are a bunch of things interacting.\n- PathSearch.cs:119 allows state transitions from Closed to Open.\n- PathSearch.cs:121 suppresses readding open nodes to the open set with a lower cost, which is _required_ when the pq implementation lacks a reduceKey operation.\n\nAs for @pchote's question: no, this is a game -- we don't care about optimal paths in the slightest. We care about producing reasonable paths (or even reasonable path prefixes) as quickly as possible.\n"
  },
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/93579540",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/7955#issuecomment-93579540",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/7955",
    "id": 93579540,
    "node_id": "MDEyOklzc3VlQ29tbWVudDkzNTc5NTQw",
    "user": {
      "login": "Rydra",
      "id": 5826108,
      "node_id": "MDQ6VXNlcjU4MjYxMDg=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/5826108?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Rydra",
      "html_url": "https://github.com/Rydra",
      "followers_url": "https://api.github.com/users/Rydra/followers",
      "following_url": "https://api.github.com/users/Rydra/following{/other_user}",
      "gists_url": "https://api.github.com/users/Rydra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Rydra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Rydra/subscriptions",
      "organizations_url": "https://api.github.com/users/Rydra/orgs",
      "repos_url": "https://api.github.com/users/Rydra/repos",
      "events_url": "https://api.github.com/users/Rydra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Rydra/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-04-15T21:53:35Z",
    "updated_at": "2015-04-15T22:00:42Z",
    "author_association": "CONTRIBUTOR",
    "body": "@chrisforbes I'm not fine with your first point.\nAnd for your second point, the class PositionComparer takes the live value from the cellLayer when you pop out of the queue, no need to update it in the openQueue as it requests the current estimated value in the CellLayer when updating it in line 119. I implemented the Node array A\\* variant for the pathfinder when refactoring. My two cents.\n"
  },
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/93582909",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/7955#issuecomment-93582909",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/7955",
    "id": 93582909,
    "node_id": "MDEyOklzc3VlQ29tbWVudDkzNTgyOTA5",
    "user": {
      "login": "chrisforbes",
      "id": 128877,
      "node_id": "MDQ6VXNlcjEyODg3Nw==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/128877?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chrisforbes",
      "html_url": "https://github.com/chrisforbes",
      "followers_url": "https://api.github.com/users/chrisforbes/followers",
      "following_url": "https://api.github.com/users/chrisforbes/following{/other_user}",
      "gists_url": "https://api.github.com/users/chrisforbes/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chrisforbes/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chrisforbes/subscriptions",
      "organizations_url": "https://api.github.com/users/chrisforbes/orgs",
      "repos_url": "https://api.github.com/users/chrisforbes/repos",
      "events_url": "https://api.github.com/users/chrisforbes/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chrisforbes/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-04-15T22:09:02Z",
    "updated_at": "2015-04-15T22:09:02Z",
    "author_association": "MEMBER",
    "body": "s/RecordComparer/PositionComparer/ ?\n\nPulling the live values doesn't mitigate it (and really, makes things worse -- the pq never has a chance to shuffle things to maintain its invariants. You _will_ pull items out in the wrong order.)\n"
  },
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/93584217",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/7955#issuecomment-93584217",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/7955",
    "id": 93584217,
    "node_id": "MDEyOklzc3VlQ29tbWVudDkzNTg0MjE3",
    "user": {
      "login": "Rydra",
      "id": 5826108,
      "node_id": "MDQ6VXNlcjU4MjYxMDg=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/5826108?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Rydra",
      "html_url": "https://github.com/Rydra",
      "followers_url": "https://api.github.com/users/Rydra/followers",
      "following_url": "https://api.github.com/users/Rydra/following{/other_user}",
      "gists_url": "https://api.github.com/users/Rydra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Rydra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Rydra/subscriptions",
      "organizations_url": "https://api.github.com/users/Rydra/orgs",
      "repos_url": "https://api.github.com/users/Rydra/repos",
      "events_url": "https://api.github.com/users/Rydra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Rydra/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-04-15T22:13:03Z",
    "updated_at": "2015-04-15T22:13:03Z",
    "author_association": "CONTRIBUTOR",
    "body": "The class is PositionComparer. Can't remember the file where it is placed.\n\nThe implemented priorityqueue reorders it's elements when popping out of the queue afaik.\n"
  },
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/93584731",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/7955#issuecomment-93584731",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/7955",
    "id": 93584731,
    "node_id": "MDEyOklzc3VlQ29tbWVudDkzNTg0NzMx",
    "user": {
      "login": "chrisforbes",
      "id": 128877,
      "node_id": "MDQ6VXNlcjEyODg3Nw==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/128877?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chrisforbes",
      "html_url": "https://github.com/chrisforbes",
      "followers_url": "https://api.github.com/users/chrisforbes/followers",
      "following_url": "https://api.github.com/users/chrisforbes/following{/other_user}",
      "gists_url": "https://api.github.com/users/chrisforbes/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chrisforbes/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chrisforbes/subscriptions",
      "organizations_url": "https://api.github.com/users/chrisforbes/orgs",
      "repos_url": "https://api.github.com/users/chrisforbes/repos",
      "events_url": "https://api.github.com/users/chrisforbes/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chrisforbes/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-04-15T22:15:33Z",
    "updated_at": "2015-04-15T22:15:33Z",
    "author_association": "MEMBER",
    "body": "It only behaves correctly if the minheap was consistent before the pop.\n"
  },
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/93646259",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/7955#issuecomment-93646259",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/7955",
    "id": 93646259,
    "node_id": "MDEyOklzc3VlQ29tbWVudDkzNjQ2MjU5",
    "user": {
      "login": "Rydra",
      "id": 5826108,
      "node_id": "MDQ6VXNlcjU4MjYxMDg=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/5826108?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Rydra",
      "html_url": "https://github.com/Rydra",
      "followers_url": "https://api.github.com/users/Rydra/followers",
      "following_url": "https://api.github.com/users/Rydra/following{/other_user}",
      "gists_url": "https://api.github.com/users/Rydra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Rydra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Rydra/subscriptions",
      "organizations_url": "https://api.github.com/users/Rydra/orgs",
      "repos_url": "https://api.github.com/users/Rydra/repos",
      "events_url": "https://api.github.com/users/Rydra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Rydra/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-04-16T05:25:11Z",
    "updated_at": "2015-04-16T05:25:11Z",
    "author_association": "CONTRIBUTOR",
    "body": "'''It only behaves correctly if the minheap was consistent before the pop.'''\n\nAfter making some research I trust this. For the time being it's ok in the pathfinder, no one noted this, but it would be cool if the priority queue implements some kind of \"update\" function or something to reorder in necessary.\n\nI'll do some research when I have some time to spare.\n"
  },
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/93762353",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/7955#issuecomment-93762353",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/7955",
    "id": 93762353,
    "node_id": "MDEyOklzc3VlQ29tbWVudDkzNzYyMzUz",
    "user": {
      "login": "pi99y",
      "id": 10639257,
      "node_id": "MDQ6VXNlcjEwNjM5MjU3",
      "avatar_url": "https://avatars0.githubusercontent.com/u/10639257?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pi99y",
      "html_url": "https://github.com/pi99y",
      "followers_url": "https://api.github.com/users/pi99y/followers",
      "following_url": "https://api.github.com/users/pi99y/following{/other_user}",
      "gists_url": "https://api.github.com/users/pi99y/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pi99y/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pi99y/subscriptions",
      "organizations_url": "https://api.github.com/users/pi99y/orgs",
      "repos_url": "https://api.github.com/users/pi99y/repos",
      "events_url": "https://api.github.com/users/pi99y/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pi99y/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-04-16T15:22:53Z",
    "updated_at": "2015-04-16T15:35:47Z",
    "author_association": "NONE",
    "body": "One more RA replay file: http://s000.tinyupload.com/index.php?file_id=06337738901118615067\nFirst time it froze around 22-23th minute, then around 29th\n\nAnd this one is from the TD mod: http://s000.tinyupload.com/index.php?file_id=00141637889477015082\n"
  },
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/93812486",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/7955#issuecomment-93812486",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/7955",
    "id": 93812486,
    "node_id": "MDEyOklzc3VlQ29tbWVudDkzODEyNDg2",
    "user": {
      "login": "Mailaender",
      "id": 756669,
      "node_id": "MDQ6VXNlcjc1NjY2OQ==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/756669?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Mailaender",
      "html_url": "https://github.com/Mailaender",
      "followers_url": "https://api.github.com/users/Mailaender/followers",
      "following_url": "https://api.github.com/users/Mailaender/following{/other_user}",
      "gists_url": "https://api.github.com/users/Mailaender/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Mailaender/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Mailaender/subscriptions",
      "organizations_url": "https://api.github.com/users/Mailaender/orgs",
      "repos_url": "https://api.github.com/users/Mailaender/repos",
      "events_url": "https://api.github.com/users/Mailaender/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Mailaender/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-04-16T18:47:28Z",
    "updated_at": "2015-04-16T18:47:28Z",
    "author_association": "MEMBER",
    "body": "A patch has been suggested at https://github.com/OpenRA/OpenRA/pull/7959.\n"
  },
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/94147234",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/7955#issuecomment-94147234",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/7955",
    "id": 94147234,
    "node_id": "MDEyOklzc3VlQ29tbWVudDk0MTQ3MjM0",
    "user": {
      "login": "Beep6581",
      "id": 5844619,
      "node_id": "MDQ6VXNlcjU4NDQ2MTk=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/5844619?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Beep6581",
      "html_url": "https://github.com/Beep6581",
      "followers_url": "https://api.github.com/users/Beep6581/followers",
      "following_url": "https://api.github.com/users/Beep6581/following{/other_user}",
      "gists_url": "https://api.github.com/users/Beep6581/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Beep6581/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Beep6581/subscriptions",
      "organizations_url": "https://api.github.com/users/Beep6581/orgs",
      "repos_url": "https://api.github.com/users/Beep6581/repos",
      "events_url": "https://api.github.com/users/Beep6581/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Beep6581/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-04-18T09:26:25Z",
    "updated_at": "2015-04-18T09:26:25Z",
    "author_association": "NONE",
    "body": "Hey!\n\nI was plagued by freezing in offline skirmishes 7 bots vs 1 me in playtest-20150405, but they would not happen when I ran it through monodevelop, only when run normally. The freeze, a complete OpenRA lockup requiring killing OpenRA, would happen in about 80% of games. I'm happy to see you found this issue. I provide here a dump of my replays so you can check whether the cause is the same. I hexdumped the latest replay and indeed the last word in the replay is \"harvester\" so it could be the same thing.\nhttp://filebin.net/1lfu4tsfjb\n"
  }
]
