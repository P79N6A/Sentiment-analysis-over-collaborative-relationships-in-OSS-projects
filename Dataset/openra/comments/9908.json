[
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/154841827",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/9908#issuecomment-154841827",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/9908",
    "id": 154841827,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NDg0MTgyNw==",
    "user": {
      "login": "obrakmann",
      "id": 4331210,
      "node_id": "MDQ6VXNlcjQzMzEyMTA=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/4331210?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/obrakmann",
      "html_url": "https://github.com/obrakmann",
      "followers_url": "https://api.github.com/users/obrakmann/followers",
      "following_url": "https://api.github.com/users/obrakmann/following{/other_user}",
      "gists_url": "https://api.github.com/users/obrakmann/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/obrakmann/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/obrakmann/subscriptions",
      "organizations_url": "https://api.github.com/users/obrakmann/orgs",
      "repos_url": "https://api.github.com/users/obrakmann/repos",
      "events_url": "https://api.github.com/users/obrakmann/events{/privacy}",
      "received_events_url": "https://api.github.com/users/obrakmann/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-11-08T17:10:48Z",
    "updated_at": "2015-11-08T17:10:48Z",
    "author_association": "CONTRIBUTOR",
    "body": "This is another unwanted consequence of our `AttackMove` implementation.\n\n`AttackMoveActivity` will run for two ticks, until `Move` notices it can't do anything and returns null, [causing the `AttackMoveActivity` to quit](https://github.com/OpenRA/OpenRA/blob/d677192bea82ed13f172f604693c0cefc9a89636/OpenRA.Mods.Common/Activities/Move/AttackMoveActivity.cs#L40-L41).\n\nDuring these two ticks, `WithInfantryBody` is in the `Waiting` state, which it entered from the `Idle` state and [started to play a stand animation](https://github.com/OpenRA/OpenRA/blob/d677192bea82ed13f172f604693c0cefc9a89636/OpenRA.Mods.Common/Traits/Render/WithInfantryBody.cs#L132).\n\nWhen `AttackMoveActivity` quit, the actor entered an idle state, so the `TickIdle` method in `WithInfantryBody` ran, set its state to `Idle` and [also started another stand animation](https://github.com/OpenRA/OpenRA/blob/d677192bea82ed13f172f604693c0cefc9a89636/OpenRA.Mods.Common/Traits/Render/WithInfantryBody.cs#L142-L143).\n\nAt this point the awfulness of `AttackMove` kicks in, which [restarts itself when an actor becomes idle and there happens to be a destination set](https://github.com/OpenRA/OpenRA/blob/d677192bea82ed13f172f604693c0cefc9a89636/OpenRA.Mods.Common/Traits/AttackMove.cs#L57-L58). So `AttackMoveActivity` runs again for two ticks, `WithInfantryBody` enters the `Waiting` state again, starts another stand animation, then `AttackMoveActivity` quits... etc. etc.\n"
  },
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/154851562",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/9908#issuecomment-154851562",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/9908",
    "id": 154851562,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NDg1MTU2Mg==",
    "user": {
      "login": "obrakmann",
      "id": 4331210,
      "node_id": "MDQ6VXNlcjQzMzEyMTA=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/4331210?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/obrakmann",
      "html_url": "https://github.com/obrakmann",
      "followers_url": "https://api.github.com/users/obrakmann/followers",
      "following_url": "https://api.github.com/users/obrakmann/following{/other_user}",
      "gists_url": "https://api.github.com/users/obrakmann/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/obrakmann/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/obrakmann/subscriptions",
      "organizations_url": "https://api.github.com/users/obrakmann/orgs",
      "repos_url": "https://api.github.com/users/obrakmann/repos",
      "events_url": "https://api.github.com/users/obrakmann/events{/privacy}",
      "received_events_url": "https://api.github.com/users/obrakmann/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-11-08T17:39:28Z",
    "updated_at": "2015-11-08T17:39:28Z",
    "author_association": "CONTRIBUTOR",
    "body": "```\n[17:24:38]  <pchote> antares79: easiest thing is probably go go back a couple of releases and see if it still existed\n[17:27:20]  <antares79> well, in 20150614, they don't cycle through animations, but they don't play animation at all. completely turned to stone\n[17:27:28]  <antares79> that's not really better, just different \n[17:27:53]  <pchote> any thoughts on how to fix this?\n[17:28:03]  <antares79> fix attackmove :p\n[17:28:26]  <pchote> wouldn't delaying the idle animation also help?\n[17:28:32]  <pchote> or am I reading your comment wrong?\n[17:29:22]  <antares79> I don't know my way around the rendering code too much, but that sounds like it would bring back the 'infantry doesn't leave attack animation` bug\n[17:29:47]  <pchote> the glitchy animation change is it jumping from part way through an idle anim, right?\n[17:30:03]  <pchote> if the infantry didn't have that anim, would it look okay?\n[17:30:12]  <pchote> or is it jumping between the stand anim and something else?\n[17:30:32]  <antares79> no. there are apparently several stand animations, and each call to PlayStandAnimation selects a random one\n[17:31:00]  <pchote> ok\n[17:31:07]  <pchote> we could do a hacky workaround\n[17:31:17]  <antares79> yeah, there's stand and stand2\n[17:31:21]  <pchote> which is to hash the (cell, subcell) pair to an array index\n[17:31:30]  <pchote> so it will always pick the same animation for units in the same spot\n[17:31:49]  <pchote> but appear randomish overall\n[17:32:33]  <pchote> or is that still going to glitch between the stand anim and something else?\n[17:34:27]  <antares79> I don't think the bug is important enough to introduce workaround for. 1) it only happens in total edge cases (the *only* bridge out of an area blocked), and 2) unless you watch them carefully, you don't even notice what the infantry is doing. their idle animation is also constantly moving, so you really have to be on the lookout for the misbehaviour\n[17:35:05]  <pchote> ok \n```\n"
  },
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/154857171",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/9908#issuecomment-154857171",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/9908",
    "id": 154857171,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NDg1NzE3MQ==",
    "user": {
      "login": "pchote",
      "id": 167819,
      "node_id": "MDQ6VXNlcjE2NzgxOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/167819?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pchote",
      "html_url": "https://github.com/pchote",
      "followers_url": "https://api.github.com/users/pchote/followers",
      "following_url": "https://api.github.com/users/pchote/following{/other_user}",
      "gists_url": "https://api.github.com/users/pchote/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pchote/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pchote/subscriptions",
      "organizations_url": "https://api.github.com/users/pchote/orgs",
      "repos_url": "https://api.github.com/users/pchote/repos",
      "events_url": "https://api.github.com/users/pchote/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pchote/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-11-08T18:49:47Z",
    "updated_at": "2015-11-08T18:49:47Z",
    "author_association": "MEMBER",
    "body": "This will happen any time you issue an attack-move order into an area that can't be reached -- not just bridges, but also areas completely separated by cliffs, water, etc.\n"
  },
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/154857408",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/9908#issuecomment-154857408",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/9908",
    "id": 154857408,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NDg1NzQwOA==",
    "user": {
      "login": "pchote",
      "id": 167819,
      "node_id": "MDQ6VXNlcjE2NzgxOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/167819?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pchote",
      "html_url": "https://github.com/pchote",
      "followers_url": "https://api.github.com/users/pchote/followers",
      "following_url": "https://api.github.com/users/pchote/following{/other_user}",
      "gists_url": "https://api.github.com/users/pchote/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pchote/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pchote/subscriptions",
      "organizations_url": "https://api.github.com/users/pchote/orgs",
      "repos_url": "https://api.github.com/users/pchote/repos",
      "events_url": "https://api.github.com/users/pchote/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pchote/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-11-08T18:54:44Z",
    "updated_at": "2015-11-08T18:54:51Z",
    "author_association": "MEMBER",
    "body": "A simple workaround for this is to select the animation using a function that maps the current position + subcell -> index.  This would \"randomize\" the animations for infantry in adjacent cells while avoiding the flickering for units that don't move.\n"
  }
]
