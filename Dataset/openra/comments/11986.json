[
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/246778723",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/11986#issuecomment-246778723",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/11986",
    "id": 246778723,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0Njc3ODcyMw==",
    "user": {
      "login": "obrakmann",
      "id": 4331210,
      "node_id": "MDQ6VXNlcjQzMzEyMTA=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/4331210?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/obrakmann",
      "html_url": "https://github.com/obrakmann",
      "followers_url": "https://api.github.com/users/obrakmann/followers",
      "following_url": "https://api.github.com/users/obrakmann/following{/other_user}",
      "gists_url": "https://api.github.com/users/obrakmann/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/obrakmann/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/obrakmann/subscriptions",
      "organizations_url": "https://api.github.com/users/obrakmann/orgs",
      "repos_url": "https://api.github.com/users/obrakmann/repos",
      "events_url": "https://api.github.com/users/obrakmann/events{/privacy}",
      "received_events_url": "https://api.github.com/users/obrakmann/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-09-13T18:34:02Z",
    "updated_at": "2016-09-13T18:34:02Z",
    "author_association": "CONTRIBUTOR",
    "body": "Confirmed. The server.log contains this stack trace:\n\n```\nClient 1: Accepted connection from 127.0.0.1:43264.\nDropping connection 127.0.0.1:43264 because an error occurred:\nSystem.Collections.Generic.KeyNotFoundException: The given key was not present in the dictionary.\n  at System.ThrowHelper.ThrowKeyNotFoundException () <0x7fa61d8b7080 + 0x00015> in <filename unknown>:0 \n  at System.Collections.Generic.Dictionary`2[TKey,TValue].get_Item (System.Collections.Generic.TKey key) <0x7fa61d73d870 + 0x00042> in <filename unknown>:0 \n  at OpenRA.Mods.Common.Server.LobbySettingsNotification.ClientJoined (OpenRA.Server.Server server, OpenRA.Server.Connection conn) <0x41d9d3c0 + 0x0046c> in <filename unknown>:0 \n  at OpenRA.Server.Server.ValidateClient (OpenRA.Server.Connection newConn, System.String data) <0x41d85490 + 0x00dc5> in <filename unknown>:0 \n```\n"
  },
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/246780865",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/11986#issuecomment-246780865",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/11986",
    "id": 246780865,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0Njc4MDg2NQ==",
    "user": {
      "login": "pchote",
      "id": 167819,
      "node_id": "MDQ6VXNlcjE2NzgxOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/167819?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pchote",
      "html_url": "https://github.com/pchote",
      "followers_url": "https://api.github.com/users/pchote/followers",
      "following_url": "https://api.github.com/users/pchote/following{/other_user}",
      "gists_url": "https://api.github.com/users/pchote/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pchote/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pchote/subscriptions",
      "organizations_url": "https://api.github.com/users/pchote/orgs",
      "repos_url": "https://api.github.com/users/pchote/repos",
      "events_url": "https://api.github.com/users/pchote/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pchote/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-09-13T18:40:47Z",
    "updated_at": "2016-09-13T18:41:37Z",
    "author_association": "MEMBER",
    "body": "I'm going to guess that those missions remove one or more of the traits that are associated with checkboxes in the lobby options.  It will then die because the notifications code assumes that every map option key has a trait associated with it (`options[kv.Key]` without first checking if `options.ContainsKey(kv.Key)`).\n"
  },
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/247109509",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/11986#issuecomment-247109509",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/11986",
    "id": 247109509,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0NzEwOTUwOQ==",
    "user": {
      "login": "obrakmann",
      "id": 4331210,
      "node_id": "MDQ6VXNlcjQzMzEyMTA=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/4331210?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/obrakmann",
      "html_url": "https://github.com/obrakmann",
      "followers_url": "https://api.github.com/users/obrakmann/followers",
      "following_url": "https://api.github.com/users/obrakmann/following{/other_user}",
      "gists_url": "https://api.github.com/users/obrakmann/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/obrakmann/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/obrakmann/subscriptions",
      "organizations_url": "https://api.github.com/users/obrakmann/orgs",
      "repos_url": "https://api.github.com/users/obrakmann/repos",
      "events_url": "https://api.github.com/users/obrakmann/events{/privacy}",
      "received_events_url": "https://api.github.com/users/obrakmann/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-09-14T18:26:17Z",
    "updated_at": "2016-09-14T18:26:17Z",
    "author_association": "CONTRIBUTOR",
    "body": "This only happens when the server's initial map is a skirmish map and the admin then changes the map to a mission. Starting the server with a mission does not produce the error.\n\nThis leads to the next bug, although a minor one: When a server is started with a mission, which removes the `SpawnMPUnits` trait, the admin then changes the map to a skirmish map and switches the starting units selection to a non-default value, joining players will not be informed of that change.\n\n`GlobalSettings.LobbyOptions` needs to be re-generated with each map change.\n"
  },
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/249258570",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/11986#issuecomment-249258570",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/11986",
    "id": 249258570,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0OTI1ODU3MA==",
    "user": {
      "login": "RoosterDragon",
      "id": 3399086,
      "node_id": "MDQ6VXNlcjMzOTkwODY=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/3399086?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/RoosterDragon",
      "html_url": "https://github.com/RoosterDragon",
      "followers_url": "https://api.github.com/users/RoosterDragon/followers",
      "following_url": "https://api.github.com/users/RoosterDragon/following{/other_user}",
      "gists_url": "https://api.github.com/users/RoosterDragon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/RoosterDragon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/RoosterDragon/subscriptions",
      "organizations_url": "https://api.github.com/users/RoosterDragon/orgs",
      "repos_url": "https://api.github.com/users/RoosterDragon/repos",
      "events_url": "https://api.github.com/users/RoosterDragon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/RoosterDragon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-09-23T17:49:50Z",
    "updated_at": "2016-09-23T17:49:50Z",
    "author_association": "MEMBER",
    "body": "@obrakmann: Just pinging in case you want to open an issue to track the option regeneration issue you mentioned since this one is now closed.\n"
  }
]
