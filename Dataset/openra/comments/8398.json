[
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/112839018",
    "html_url": "https://github.com/OpenRA/OpenRA/pull/8398#issuecomment-112839018",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/8398",
    "id": 112839018,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExMjgzOTAxOA==",
    "user": {
      "login": "abcdefg30",
      "id": 7704140,
      "node_id": "MDQ6VXNlcjc3MDQxNDA=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/7704140?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/abcdefg30",
      "html_url": "https://github.com/abcdefg30",
      "followers_url": "https://api.github.com/users/abcdefg30/followers",
      "following_url": "https://api.github.com/users/abcdefg30/following{/other_user}",
      "gists_url": "https://api.github.com/users/abcdefg30/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/abcdefg30/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/abcdefg30/subscriptions",
      "organizations_url": "https://api.github.com/users/abcdefg30/orgs",
      "repos_url": "https://api.github.com/users/abcdefg30/repos",
      "events_url": "https://api.github.com/users/abcdefg30/events{/privacy}",
      "received_events_url": "https://api.github.com/users/abcdefg30/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-06-17T15:13:41Z",
    "updated_at": "2015-06-17T15:13:41Z",
    "author_association": "MEMBER",
    "body": "> It is based on my investigation of a reported stacktrace.\n\nAny tip how I/we can verify this fix? (But anyway, this shouldn't break anything though.)\n"
  },
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/112843585",
    "html_url": "https://github.com/OpenRA/OpenRA/pull/8398#issuecomment-112843585",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/8398",
    "id": 112843585,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExMjg0MzU4NQ==",
    "user": {
      "login": "penev92",
      "id": 7137365,
      "node_id": "MDQ6VXNlcjcxMzczNjU=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/7137365?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/penev92",
      "html_url": "https://github.com/penev92",
      "followers_url": "https://api.github.com/users/penev92/followers",
      "following_url": "https://api.github.com/users/penev92/following{/other_user}",
      "gists_url": "https://api.github.com/users/penev92/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/penev92/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/penev92/subscriptions",
      "organizations_url": "https://api.github.com/users/penev92/orgs",
      "repos_url": "https://api.github.com/users/penev92/repos",
      "events_url": "https://api.github.com/users/penev92/events{/privacy}",
      "received_events_url": "https://api.github.com/users/penev92/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-06-17T15:22:09Z",
    "updated_at": "2015-06-17T15:22:09Z",
    "author_association": "MEMBER",
    "body": "IMO the stacktrace in that issue suggests that `Session.ClientPings` contained a `null` element.\nI don't think it ever got to assigning any value to `ping`.\n"
  },
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/112932263",
    "html_url": "https://github.com/OpenRA/OpenRA/pull/8398#issuecomment-112932263",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/8398",
    "id": 112932263,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExMjkzMjI2Mw==",
    "user": {
      "login": "obrakmann",
      "id": 4331210,
      "node_id": "MDQ6VXNlcjQzMzEyMTA=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/4331210?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/obrakmann",
      "html_url": "https://github.com/obrakmann",
      "followers_url": "https://api.github.com/users/obrakmann/followers",
      "following_url": "https://api.github.com/users/obrakmann/following{/other_user}",
      "gists_url": "https://api.github.com/users/obrakmann/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/obrakmann/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/obrakmann/subscriptions",
      "organizations_url": "https://api.github.com/users/obrakmann/orgs",
      "repos_url": "https://api.github.com/users/obrakmann/repos",
      "events_url": "https://api.github.com/users/obrakmann/events{/privacy}",
      "received_events_url": "https://api.github.com/users/obrakmann/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-06-17T20:10:48Z",
    "updated_at": "2015-06-17T20:12:54Z",
    "author_association": "CONTRIBUTOR",
    "body": "OK, now that I've seen the stack trace, I'm sure that this won't solve the issue. The crash doesn't happen here, but in the delegate in `PingFromClient`. Also `LobbyCommands` isn't involved in that stack trace at all, the call comes from [`Server::InterpretServerOrders`, line 492](https://github.com/OpenRA/OpenRA/blob/bleed/OpenRA.Game/Server/Server.cs#L492).\n\nThe proper fix will be this one:\n\n``` diff\ndiff --git a/OpenRA.Game/Server/Server.cs b/OpenRA.Game/Server/Server.cs\nindex 2d0f117..7b59ff8 100644\n--- a/OpenRA.Game/Server/Server.cs\n+++ b/OpenRA.Game/Server/Server.cs\n@@ -489,7 +489,11 @@ void InterpretServerOrder(Connection conn, ServerOrder so)\n                                                        break;\n                                                }\n\n-                                               var pingFromClient = LobbyInfo.PingFromClient(GetClient(conn));\n+                                               var client = GetClient(conn);\n+                                               if (client == null)\n+                                                       return;\n+\n+                                               var pingFromClient = LobbyInfo.PingFromClient(client);\n                                                if (pingFromClient == null)\n                                                        return;\n```\n\n`GetClient` calls `Session::ClientWithIndex`, which uses `SingleOrDefault`. I assume this probably happened when a ping arrived from a client that didn't exist anymore (?).\n"
  },
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/113770525",
    "html_url": "https://github.com/OpenRA/OpenRA/pull/8398#issuecomment-113770525",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/8398",
    "id": 113770525,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExMzc3MDUyNQ==",
    "user": {
      "login": "Mailaender",
      "id": 756669,
      "node_id": "MDQ6VXNlcjc1NjY2OQ==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/756669?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Mailaender",
      "html_url": "https://github.com/Mailaender",
      "followers_url": "https://api.github.com/users/Mailaender/followers",
      "following_url": "https://api.github.com/users/Mailaender/following{/other_user}",
      "gists_url": "https://api.github.com/users/Mailaender/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Mailaender/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Mailaender/subscriptions",
      "organizations_url": "https://api.github.com/users/Mailaender/orgs",
      "repos_url": "https://api.github.com/users/Mailaender/repos",
      "events_url": "https://api.github.com/users/Mailaender/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Mailaender/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-06-20T13:54:37Z",
    "updated_at": "2015-06-20T13:54:37Z",
    "author_association": "MEMBER",
    "body": "Added your patch as well.\n"
  },
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/116259772",
    "html_url": "https://github.com/OpenRA/OpenRA/pull/8398#issuecomment-116259772",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/8398",
    "id": 116259772,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExNjI1OTc3Mg==",
    "user": {
      "login": "abcdefg30",
      "id": 7704140,
      "node_id": "MDQ6VXNlcjc3MDQxNDA=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/7704140?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/abcdefg30",
      "html_url": "https://github.com/abcdefg30",
      "followers_url": "https://api.github.com/users/abcdefg30/followers",
      "following_url": "https://api.github.com/users/abcdefg30/following{/other_user}",
      "gists_url": "https://api.github.com/users/abcdefg30/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/abcdefg30/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/abcdefg30/subscriptions",
      "organizations_url": "https://api.github.com/users/abcdefg30/orgs",
      "repos_url": "https://api.github.com/users/abcdefg30/repos",
      "events_url": "https://api.github.com/users/abcdefg30/events{/privacy}",
      "received_events_url": "https://api.github.com/users/abcdefg30/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-06-28T11:14:34Z",
    "updated_at": "2015-06-28T11:14:34Z",
    "author_association": "MEMBER",
    "body": "Not sure if we want the first patch now, but it can't be too wrong.\n\nSeems reasonable overall :+1:\n"
  },
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/116357163",
    "html_url": "https://github.com/OpenRA/OpenRA/pull/8398#issuecomment-116357163",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/8398",
    "id": 116357163,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExNjM1NzE2Mw==",
    "user": {
      "login": "penev92",
      "id": 7137365,
      "node_id": "MDQ6VXNlcjcxMzczNjU=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/7137365?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/penev92",
      "html_url": "https://github.com/penev92",
      "followers_url": "https://api.github.com/users/penev92/followers",
      "following_url": "https://api.github.com/users/penev92/following{/other_user}",
      "gists_url": "https://api.github.com/users/penev92/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/penev92/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/penev92/subscriptions",
      "organizations_url": "https://api.github.com/users/penev92/orgs",
      "repos_url": "https://api.github.com/users/penev92/repos",
      "events_url": "https://api.github.com/users/penev92/events{/privacy}",
      "received_events_url": "https://api.github.com/users/penev92/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-06-28T22:55:49Z",
    "updated_at": "2015-06-28T22:55:49Z",
    "author_association": "MEMBER",
    "body": "Looks OK :+1: \n"
  }
]
