[
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/161273441",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/10155#issuecomment-161273441",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/10155",
    "id": 161273441,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2MTI3MzQ0MQ==",
    "user": {
      "login": "kyrreso",
      "id": 526956,
      "node_id": "MDQ6VXNlcjUyNjk1Ng==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/526956?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kyrreso",
      "html_url": "https://github.com/kyrreso",
      "followers_url": "https://api.github.com/users/kyrreso/followers",
      "following_url": "https://api.github.com/users/kyrreso/following{/other_user}",
      "gists_url": "https://api.github.com/users/kyrreso/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kyrreso/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kyrreso/subscriptions",
      "organizations_url": "https://api.github.com/users/kyrreso/orgs",
      "repos_url": "https://api.github.com/users/kyrreso/repos",
      "events_url": "https://api.github.com/users/kyrreso/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kyrreso/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-12-02T12:10:22Z",
    "updated_at": "2015-12-02T12:10:22Z",
    "author_association": "CONTRIBUTOR",
    "body": "Replay from zypres: http://s000.tinyupload.com/index.php?file_id=97251790162190813014\n"
  },
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/161410353",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/10155#issuecomment-161410353",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/10155",
    "id": 161410353,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2MTQxMDM1Mw==",
    "user": {
      "login": "obrakmann",
      "id": 4331210,
      "node_id": "MDQ6VXNlcjQzMzEyMTA=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/4331210?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/obrakmann",
      "html_url": "https://github.com/obrakmann",
      "followers_url": "https://api.github.com/users/obrakmann/followers",
      "following_url": "https://api.github.com/users/obrakmann/following{/other_user}",
      "gists_url": "https://api.github.com/users/obrakmann/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/obrakmann/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/obrakmann/subscriptions",
      "organizations_url": "https://api.github.com/users/obrakmann/orgs",
      "repos_url": "https://api.github.com/users/obrakmann/repos",
      "events_url": "https://api.github.com/users/obrakmann/events{/privacy}",
      "received_events_url": "https://api.github.com/users/obrakmann/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-12-02T19:40:23Z",
    "updated_at": "2015-12-02T20:15:28Z",
    "author_association": "CONTRIBUTOR",
    "body": "Well, the good news is that the crash can be reproduced using the replay. The bad news is that I couldn't find a cause while single-stepping through the last four frames  (9288 - 9292). The impacted 1tnk is the only 1tnk on the map at the time of the crash, but you can't see it doing anything at that point. In the last tick of frame 9290 `AttackBase.IsAttacking` changes to true, so that will probably be related. When `IsAttacking` is true, the only location that could change `TurretFacing` is `FaceTarget`, which only gets called from `AttackTurreted.CanAttack()`. It needs a target at that point, though, and I haven't had a chance to check if it had one yet.\n\nEdit: Forgot to mention that a breakpoint in `FaceTarget` never got hit during those four frames, but I guess that is to be expected, otherwise the replay wouldn't desync. I didn't see any obvious places in unsynced code that called anything turret-related, either.\n"
  },
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/162244300",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/10155#issuecomment-162244300",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/10155",
    "id": 162244300,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2MjI0NDMwMA==",
    "user": {
      "login": "RoosterDragon",
      "id": 3399086,
      "node_id": "MDQ6VXNlcjMzOTkwODY=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/3399086?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/RoosterDragon",
      "html_url": "https://github.com/RoosterDragon",
      "followers_url": "https://api.github.com/users/RoosterDragon/followers",
      "following_url": "https://api.github.com/users/RoosterDragon/following{/other_user}",
      "gists_url": "https://api.github.com/users/RoosterDragon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/RoosterDragon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/RoosterDragon/subscriptions",
      "organizations_url": "https://api.github.com/users/RoosterDragon/orgs",
      "repos_url": "https://api.github.com/users/RoosterDragon/repos",
      "events_url": "https://api.github.com/users/RoosterDragon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/RoosterDragon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-12-05T20:44:50Z",
    "updated_at": "2015-12-05T20:44:50Z",
    "author_association": "MEMBER",
    "body": "The replay also desyncs on my machine (I get a report matching abcdefg30).\n\nThe target is the camo pillbox. `AttackTurreted.CanAttack` returns false for me as `AttackBase.CanAttack` returns false on the [CanTargetActor check](https://github.com/OpenRA/OpenRA/blob/eddda3ecca82807a25a341a9a9a267f31619730e/OpenRA.Mods.Common/Traits/Attack/AttackBase.cs#L93)\n\nIf I ignore this failure in the debugger and allow it to run `FaceTarget` anyway, the turret begins to turn for two ticks and I remain in sync (the replay then ends normally).\n\nThis could be visibility related? (A GPS was active at the time, if that counts for anything)\n"
  },
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/162252938",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/10155#issuecomment-162252938",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/10155",
    "id": 162252938,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2MjI1MjkzOA==",
    "user": {
      "login": "pchote",
      "id": 167819,
      "node_id": "MDQ6VXNlcjE2NzgxOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/167819?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pchote",
      "html_url": "https://github.com/pchote",
      "followers_url": "https://api.github.com/users/pchote/followers",
      "following_url": "https://api.github.com/users/pchote/following{/other_user}",
      "gists_url": "https://api.github.com/users/pchote/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pchote/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pchote/subscriptions",
      "organizations_url": "https://api.github.com/users/pchote/orgs",
      "repos_url": "https://api.github.com/users/pchote/repos",
      "events_url": "https://api.github.com/users/pchote/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pchote/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-12-05T22:16:45Z",
    "updated_at": "2015-12-05T22:16:45Z",
    "author_association": "MEMBER",
    "body": "Replacing `atek.World.RenderPlayer` with `Owner` at https://github.com/OpenRA/OpenRA/blob/74db6f337d6038cf0c387c14c5081c8abf83ef65/OpenRA.Mods.RA/Traits/SupportPowers/GpsPower.cs#L66 may help.\n"
  },
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/162253530",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/10155#issuecomment-162253530",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/10155",
    "id": 162253530,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2MjI1MzUzMA==",
    "user": {
      "login": "RoosterDragon",
      "id": 3399086,
      "node_id": "MDQ6VXNlcjMzOTkwODY=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/3399086?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/RoosterDragon",
      "html_url": "https://github.com/RoosterDragon",
      "followers_url": "https://api.github.com/users/RoosterDragon/followers",
      "following_url": "https://api.github.com/users/RoosterDragon/following{/other_user}",
      "gists_url": "https://api.github.com/users/RoosterDragon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/RoosterDragon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/RoosterDragon/subscriptions",
      "organizations_url": "https://api.github.com/users/RoosterDragon/orgs",
      "repos_url": "https://api.github.com/users/RoosterDragon/repos",
      "events_url": "https://api.github.com/users/RoosterDragon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/RoosterDragon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-12-05T22:25:45Z",
    "updated_at": "2015-12-05T22:25:45Z",
    "author_association": "MEMBER",
    "body": "We should make that change anyway, but It doesn't appear to fix this specific desync.\n"
  },
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/162256650",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/10155#issuecomment-162256650",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/10155",
    "id": 162256650,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2MjI1NjY1MA==",
    "user": {
      "login": "RoosterDragon",
      "id": 3399086,
      "node_id": "MDQ6VXNlcjMzOTkwODY=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/3399086?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/RoosterDragon",
      "html_url": "https://github.com/RoosterDragon",
      "followers_url": "https://api.github.com/users/RoosterDragon/followers",
      "following_url": "https://api.github.com/users/RoosterDragon/following{/other_user}",
      "gists_url": "https://api.github.com/users/RoosterDragon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/RoosterDragon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/RoosterDragon/subscriptions",
      "organizations_url": "https://api.github.com/users/RoosterDragon/orgs",
      "repos_url": "https://api.github.com/users/RoosterDragon/repos",
      "events_url": "https://api.github.com/users/RoosterDragon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/RoosterDragon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-12-05T23:30:26Z",
    "updated_at": "2015-12-05T23:30:26Z",
    "author_association": "MEMBER",
    "body": "@obrakmann noticed in IRC that if you watch the replay from Zypres's point of view, it _won't_ desync. It will desync if you observe from another players' perspective.\n\nThis would suggest that the root cause is something checking against the current render player when updating the simulation state.\n\nThe only obvious misuse of `World.RenderPlayer` is the above noted code - which does need fixing - but this doesn't help for this specific desync.\n"
  },
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/162263156",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/10155#issuecomment-162263156",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/10155",
    "id": 162263156,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2MjI2MzE1Ng==",
    "user": {
      "login": "RoosterDragon",
      "id": 3399086,
      "node_id": "MDQ6VXNlcjMzOTkwODY=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/3399086?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/RoosterDragon",
      "html_url": "https://github.com/RoosterDragon",
      "followers_url": "https://api.github.com/users/RoosterDragon/followers",
      "following_url": "https://api.github.com/users/RoosterDragon/following{/other_user}",
      "gists_url": "https://api.github.com/users/RoosterDragon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/RoosterDragon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/RoosterDragon/subscriptions",
      "organizations_url": "https://api.github.com/users/RoosterDragon/orgs",
      "repos_url": "https://api.github.com/users/RoosterDragon/repos",
      "events_url": "https://api.github.com/users/RoosterDragon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/RoosterDragon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-12-06T01:53:02Z",
    "updated_at": "2015-12-06T01:53:02Z",
    "author_association": "MEMBER",
    "body": "Found the cause of this.\n\nThe GPS was relying on whether the frozen actor for the pillbox had been rendered or not. Anything checking visibility, such as targeting, was checking the GPS in case that revealed the unit. In this case, the tank has acquired the pillbox as a target according to Zypres's view and had turned to attack it. From abcdefg30's view, the tank did not have sight on the pillbox and hence the turret had not moved.\n\nThe rendering for the frozen actor need not match up with the world state (if you can't see it, we don't bother rendering it). Since the GPS was accidentally relying on this render state, the GPS could be different depending on which player you were observing in a replay (or which player you are during the game!)\n\nThis manifested as the tank acquiring and turning to target the pillbox in one version of events, and not having sight and thus ignoring the pillbox in another version.\n"
  }
]
