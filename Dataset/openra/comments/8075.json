[
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/98219607",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/8075#issuecomment-98219607",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/8075",
    "id": 98219607,
    "node_id": "MDEyOklzc3VlQ29tbWVudDk4MjE5NjA3",
    "user": {
      "login": "reaperrr",
      "id": 2857877,
      "node_id": "MDQ6VXNlcjI4NTc4Nzc=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/2857877?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/reaperrr",
      "html_url": "https://github.com/reaperrr",
      "followers_url": "https://api.github.com/users/reaperrr/followers",
      "following_url": "https://api.github.com/users/reaperrr/following{/other_user}",
      "gists_url": "https://api.github.com/users/reaperrr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/reaperrr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/reaperrr/subscriptions",
      "organizations_url": "https://api.github.com/users/reaperrr/orgs",
      "repos_url": "https://api.github.com/users/reaperrr/repos",
      "events_url": "https://api.github.com/users/reaperrr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/reaperrr/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-05-01T19:55:36Z",
    "updated_at": "2015-05-01T19:55:36Z",
    "author_association": "CONTRIBUTOR",
    "body": "> [21:45] <+pchote> oh, you're talking about IRenderInfantrySequenceModifier\n> [21:45] <reaperrr> yeah\n> [21:46] <+pchote> if you move WithInfantryBody above TakeCover then it won't work, no\n> [21:46] <+pchote> because it does the lookup in the constructor\n> [21:46] <+pchote> you can fix that by moving the lookup into INotifyCreated\n"
  },
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/98360572",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/8075#issuecomment-98360572",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/8075",
    "id": 98360572,
    "node_id": "MDEyOklzc3VlQ29tbWVudDk4MzYwNTcy",
    "user": {
      "login": "penev92",
      "id": 7137365,
      "node_id": "MDQ6VXNlcjcxMzczNjU=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/7137365?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/penev92",
      "html_url": "https://github.com/penev92",
      "followers_url": "https://api.github.com/users/penev92/followers",
      "following_url": "https://api.github.com/users/penev92/following{/other_user}",
      "gists_url": "https://api.github.com/users/penev92/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/penev92/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/penev92/subscriptions",
      "organizations_url": "https://api.github.com/users/penev92/orgs",
      "repos_url": "https://api.github.com/users/penev92/repos",
      "events_url": "https://api.github.com/users/penev92/events{/privacy}",
      "received_events_url": "https://api.github.com/users/penev92/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-05-02T13:44:25Z",
    "updated_at": "2015-06-21T10:41:19Z",
    "author_association": "MEMBER",
    "body": "This seems to only solve half of the problem.\nI was testing using Minigunners in TD.\nHere is some YAML:\n\n> \\rules\\infantry.yaml:\n> \n> ``` yaml\n> E1:\n>     WithInfantryBody:\n>         StandSequences: stand, stand2\n> ```\n> \n> \\sequences\\infantry.yaml:\n> \n> ``` yaml\n> e1:\n>     stand:\n>     stand2:\n>     prone-stand:\n> ```\n\nNow, when the actor becomes idle, `WithIfantryBody` selects a random sequence from `StandSequences` to use.\nAlso, when `TakeCover` sets `TakeCover.IsProne` (`TakeCover.IsModifyingSequence`) to `true`, `WithIfantryBody` takes `TakeCover.SequencePrefix` and appends again a random sequence from `StandSequences` (in our case that gives us either `prone-stand` or `prone-stand2`), then checks if the actor has such a sequence.\nIf there is such a sequence, great, use that. If not, use the selected sequence **without** the prefix.\n\nThis means that if we [enter here](https://github.com/OpenRA/OpenRA/blob/a2c1993561cfda0fd0622257083aaefd5252f0e3/OpenRA.Mods.Common/Traits/Render/WithInfantryBody.cs#L79) with `baseSequence == \"stand\"` everything is OK - the method will return `prone-stand`.\nBut if we enter with `baseSequence == \"stand2\"`, then the method will return `stand2`, because there is no sequence `prone-stand2` defined, so even if the sequence gets changed (from `stand` to `stand2`), that doesn't actually matter, because it is not a prone sequence.\n\nAll that is decided by [info.StandSequences.Random(Game.CosmeticRandom)](https://github.com/OpenRA/OpenRA/blob/a2c1993561cfda0fd0622257083aaefd5252f0e3/OpenRA.Mods.Common/Traits/Render/WithInfantryBody.cs#L119).\n"
  },
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/112442339",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/8075#issuecomment-112442339",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/8075",
    "id": 112442339,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExMjQ0MjMzOQ==",
    "user": {
      "login": "reaperrr",
      "id": 2857877,
      "node_id": "MDQ6VXNlcjI4NTc4Nzc=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/2857877?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/reaperrr",
      "html_url": "https://github.com/reaperrr",
      "followers_url": "https://api.github.com/users/reaperrr/followers",
      "following_url": "https://api.github.com/users/reaperrr/following{/other_user}",
      "gists_url": "https://api.github.com/users/reaperrr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/reaperrr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/reaperrr/subscriptions",
      "organizations_url": "https://api.github.com/users/reaperrr/orgs",
      "repos_url": "https://api.github.com/users/reaperrr/repos",
      "events_url": "https://api.github.com/users/reaperrr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/reaperrr/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-06-16T13:58:36Z",
    "updated_at": "2015-06-16T13:58:36Z",
    "author_association": "CONTRIBUTOR",
    "body": "@penev92: I assume you know how exactly to apply the fix @pchote mentioned (I don't), please file a PR (or send me code), I'm working on updating the sequences of each mod to add a `prone-stand2` sequence to all infantry that use `stand2`.\n"
  }
]
