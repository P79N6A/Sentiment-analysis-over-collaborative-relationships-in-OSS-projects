[
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/129078735",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/9008#issuecomment-129078735",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/9008",
    "id": 129078735,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyOTA3ODczNQ==",
    "user": {
      "login": "Phrohdoh",
      "id": 4861023,
      "node_id": "MDQ6VXNlcjQ4NjEwMjM=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/4861023?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Phrohdoh",
      "html_url": "https://github.com/Phrohdoh",
      "followers_url": "https://api.github.com/users/Phrohdoh/followers",
      "following_url": "https://api.github.com/users/Phrohdoh/following{/other_user}",
      "gists_url": "https://api.github.com/users/Phrohdoh/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Phrohdoh/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Phrohdoh/subscriptions",
      "organizations_url": "https://api.github.com/users/Phrohdoh/orgs",
      "repos_url": "https://api.github.com/users/Phrohdoh/repos",
      "events_url": "https://api.github.com/users/Phrohdoh/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Phrohdoh/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-08-09T00:40:30Z",
    "updated_at": "2015-08-09T00:42:33Z",
    "author_association": "MEMBER",
    "body": "Hey @xp65, thanks for the detailed ticket!\nThese types of reports make it much easier to begin looking into an issue which means we can resolve it quicker.\n\nPerformance is of course quite important so this will definitely need to be ~~resolved~~ investigated before the stable release is out.\n"
  },
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/129079200",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/9008#issuecomment-129079200",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/9008",
    "id": 129079200,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyOTA3OTIwMA==",
    "user": {
      "login": "penev92",
      "id": 7137365,
      "node_id": "MDQ6VXNlcjcxMzczNjU=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/7137365?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/penev92",
      "html_url": "https://github.com/penev92",
      "followers_url": "https://api.github.com/users/penev92/followers",
      "following_url": "https://api.github.com/users/penev92/following{/other_user}",
      "gists_url": "https://api.github.com/users/penev92/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/penev92/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/penev92/subscriptions",
      "organizations_url": "https://api.github.com/users/penev92/orgs",
      "repos_url": "https://api.github.com/users/penev92/repos",
      "events_url": "https://api.github.com/users/penev92/events{/privacy}",
      "received_events_url": "https://api.github.com/users/penev92/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-08-09T01:00:59Z",
    "updated_at": "2015-08-09T01:01:08Z",
    "author_association": "MEMBER",
    "body": "Nice, I like this report :)\nDo you happen to have the `perf.log` from that game, or from watching the replay? My laptop is significantly slower so it might take a while before I can generate my own logs from the replay.\n"
  },
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/129129053",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/9008#issuecomment-129129053",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/9008",
    "id": 129129053,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyOTEyOTA1Mw==",
    "user": {
      "login": "xp65",
      "id": 6690499,
      "node_id": "MDQ6VXNlcjY2OTA0OTk=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/6690499?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/xp65",
      "html_url": "https://github.com/xp65",
      "followers_url": "https://api.github.com/users/xp65/followers",
      "following_url": "https://api.github.com/users/xp65/following{/other_user}",
      "gists_url": "https://api.github.com/users/xp65/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/xp65/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/xp65/subscriptions",
      "organizations_url": "https://api.github.com/users/xp65/orgs",
      "repos_url": "https://api.github.com/users/xp65/repos",
      "events_url": "https://api.github.com/users/xp65/events{/privacy}",
      "received_events_url": "https://api.github.com/users/xp65/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-08-09T06:56:37Z",
    "updated_at": "2015-08-09T06:56:37Z",
    "author_association": "NONE",
    "body": "Thanks guys! I'll let my pc run the replay again later today to make the perf.log. \n"
  },
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/129129529",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/9008#issuecomment-129129529",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/9008",
    "id": 129129529,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyOTEyOTUyOQ==",
    "user": {
      "login": "xp65",
      "id": 6690499,
      "node_id": "MDQ6VXNlcjY2OTA0OTk=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/6690499?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/xp65",
      "html_url": "https://github.com/xp65",
      "followers_url": "https://api.github.com/users/xp65/followers",
      "following_url": "https://api.github.com/users/xp65/following{/other_user}",
      "gists_url": "https://api.github.com/users/xp65/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/xp65/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/xp65/subscriptions",
      "organizations_url": "https://api.github.com/users/xp65/orgs",
      "repos_url": "https://api.github.com/users/xp65/repos",
      "events_url": "https://api.github.com/users/xp65/events{/privacy}",
      "received_events_url": "https://api.github.com/users/xp65/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-08-09T07:13:31Z",
    "updated_at": "2015-08-09T07:26:41Z",
    "author_association": "NONE",
    "body": "I did some digging and it seems you guys store all the games in the perf.log until closing, thanks to that, I still had the original log file, I cutted out the actual game and here it is: \nhttps://drive.google.com/file/d/0BynHp26MoAw-emxyWk5Udl9zc3M/view?usp=sharing \n\nIt seems something in \"299 ms [83280] Trait: player->HackyAI\" is very slow (peaks to 324ms etc) and at the very end of the file (as in the replay) you can see it get a lot better, just by killing some boats and then by 1 player 6 boats 1 subpen and once gone, also drastic improvements. So I don't know where it is spending its cpu.\n"
  },
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/129193704",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/9008#issuecomment-129193704",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/9008",
    "id": 129193704,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyOTE5MzcwNA==",
    "user": {
      "login": "reaperrr",
      "id": 2857877,
      "node_id": "MDQ6VXNlcjI4NTc4Nzc=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/2857877?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/reaperrr",
      "html_url": "https://github.com/reaperrr",
      "followers_url": "https://api.github.com/users/reaperrr/followers",
      "following_url": "https://api.github.com/users/reaperrr/following{/other_user}",
      "gists_url": "https://api.github.com/users/reaperrr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/reaperrr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/reaperrr/subscriptions",
      "organizations_url": "https://api.github.com/users/reaperrr/orgs",
      "repos_url": "https://api.github.com/users/reaperrr/repos",
      "events_url": "https://api.github.com/users/reaperrr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/reaperrr/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-08-09T14:53:20Z",
    "updated_at": "2015-08-09T14:53:20Z",
    "author_association": "CONTRIBUTOR",
    "body": "The HackyAI lag spikes happen every 30 ticks, which matches `AttackForceInterval`, so it's likely that the AI tries to make squads containing submarines do things they can't do (AttackMove towards land targets).\n"
  },
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/129202470",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/9008#issuecomment-129202470",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/9008",
    "id": 129202470,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyOTIwMjQ3MA==",
    "user": {
      "login": "RoosterDragon",
      "id": 3399086,
      "node_id": "MDQ6VXNlcjMzOTkwODY=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/3399086?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/RoosterDragon",
      "html_url": "https://github.com/RoosterDragon",
      "followers_url": "https://api.github.com/users/RoosterDragon/followers",
      "following_url": "https://api.github.com/users/RoosterDragon/following{/other_user}",
      "gists_url": "https://api.github.com/users/RoosterDragon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/RoosterDragon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/RoosterDragon/subscriptions",
      "organizations_url": "https://api.github.com/users/RoosterDragon/orgs",
      "repos_url": "https://api.github.com/users/RoosterDragon/repos",
      "events_url": "https://api.github.com/users/RoosterDragon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/RoosterDragon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-08-09T15:52:37Z",
    "updated_at": "2015-08-09T15:52:37Z",
    "author_association": "MEMBER",
    "body": "I ran this replay as max speed with profiling on. The CPU time spent in various interesting areas are:\n- 49% in [World.SyncHash ran after processing each order](https://github.com/OpenRA/OpenRA/blob/5720bde43bca138fdd07b2829520e4af1a92eb62/OpenRA.Game/Network/OrderManager.cs#L213). This is the same problem as noted in #8770 - sync hashing for every order is super expensive. @pchote has suggested in IRC that'd we'd be safe enough to sync only one per tick rather than once per order. That would fix this since the per-frame sync only costs 1%.\n- 17% in [Move.Tick (for pathfinding)](https://github.com/OpenRA/OpenRA/blob/5720bde43bca138fdd07b2829520e4af1a92eb62/OpenRA.Mods.Common/Activities/Move/Move.cs#L159) - to be expected really as we know pathfinding is expensive.\n- 10% in [GroundUnitsAttackState.Tick](https://github.com/OpenRA/OpenRA/blob/5720bde43bca138fdd07b2829520e4af1a92eb62/OpenRA.Mods.Common/AI/States/GroundStates.cs#L144) - in particular finding an enemy to attack when not busy. I suspect this is the problem with the subs - maybe they keep trying to find a target and come up empty causing repeated searches? (Just guessing here.) Does this even find valid nearby targets for subs? - I'm not sure.\n- 3% in [TryGetActorFromUInt](https://github.com/OpenRA/OpenRA/blob/5720bde43bca138fdd07b2829520e4af1a92eb62/OpenRA.Game/Network/Order.cs#L120). We can probably eliminate this overhead by allowing lookup of actor by ID so it doesn't have to churn through the whole set of actors.\n"
  },
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/131114838",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/9008#issuecomment-131114838",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/9008",
    "id": 131114838,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMTExNDgzOA==",
    "user": {
      "login": "LipkeGu",
      "id": 2057932,
      "node_id": "MDQ6VXNlcjIwNTc5MzI=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/2057932?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/LipkeGu",
      "html_url": "https://github.com/LipkeGu",
      "followers_url": "https://api.github.com/users/LipkeGu/followers",
      "following_url": "https://api.github.com/users/LipkeGu/following{/other_user}",
      "gists_url": "https://api.github.com/users/LipkeGu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/LipkeGu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/LipkeGu/subscriptions",
      "organizations_url": "https://api.github.com/users/LipkeGu/orgs",
      "repos_url": "https://api.github.com/users/LipkeGu/repos",
      "events_url": "https://api.github.com/users/LipkeGu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/LipkeGu/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-08-14T14:04:50Z",
    "updated_at": "2015-08-14T14:05:58Z",
    "author_association": "MEMBER",
    "body": "it seems instead earlier than 30 seconds :/\n\nhttp://i.imgur.com/TNuxk4S.jpg\n\nand it doesnt ends :(\n"
  },
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/131119944",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/9008#issuecomment-131119944",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/9008",
    "id": 131119944,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMTExOTk0NA==",
    "user": {
      "login": "reaperrr",
      "id": 2857877,
      "node_id": "MDQ6VXNlcjI4NTc4Nzc=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/2857877?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/reaperrr",
      "html_url": "https://github.com/reaperrr",
      "followers_url": "https://api.github.com/users/reaperrr/followers",
      "following_url": "https://api.github.com/users/reaperrr/following{/other_user}",
      "gists_url": "https://api.github.com/users/reaperrr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/reaperrr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/reaperrr/subscriptions",
      "organizations_url": "https://api.github.com/users/reaperrr/orgs",
      "repos_url": "https://api.github.com/users/reaperrr/repos",
      "events_url": "https://api.github.com/users/reaperrr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/reaperrr/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-08-14T14:20:21Z",
    "updated_at": "2015-08-14T14:23:01Z",
    "author_association": "CONTRIBUTOR",
    "body": "> it seems instead earlier than 30 seconds :/\n> http://i.imgur.com/TNuxk4S.jpg\n> and it doesnt ends :(\n\nThat is a different issue, on your screenshot it appears to be the pathfinder. It cannot handle TS' terrain well yet.\n"
  },
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/133066670",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/9008#issuecomment-133066670",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/9008",
    "id": 133066670,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMzA2NjY3MA==",
    "user": {
      "login": "RoosterDragon",
      "id": 3399086,
      "node_id": "MDQ6VXNlcjMzOTkwODY=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/3399086?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/RoosterDragon",
      "html_url": "https://github.com/RoosterDragon",
      "followers_url": "https://api.github.com/users/RoosterDragon/followers",
      "following_url": "https://api.github.com/users/RoosterDragon/following{/other_user}",
      "gists_url": "https://api.github.com/users/RoosterDragon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/RoosterDragon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/RoosterDragon/subscriptions",
      "organizations_url": "https://api.github.com/users/RoosterDragon/orgs",
      "repos_url": "https://api.github.com/users/RoosterDragon/repos",
      "events_url": "https://api.github.com/users/RoosterDragon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/RoosterDragon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-08-20T16:27:48Z",
    "updated_at": "2015-08-20T16:27:48Z",
    "author_association": "MEMBER",
    "body": "We've merged #9022 and #9023 which should address a large amount of the performance problem, and we have #9021 and #3241 which providing specific details on fixing the remaining problems.\n"
  },
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/133085482",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/9008#issuecomment-133085482",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/9008",
    "id": 133085482,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMzA4NTQ4Mg==",
    "user": {
      "login": "xp65",
      "id": 6690499,
      "node_id": "MDQ6VXNlcjY2OTA0OTk=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/6690499?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/xp65",
      "html_url": "https://github.com/xp65",
      "followers_url": "https://api.github.com/users/xp65/followers",
      "following_url": "https://api.github.com/users/xp65/following{/other_user}",
      "gists_url": "https://api.github.com/users/xp65/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/xp65/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/xp65/subscriptions",
      "organizations_url": "https://api.github.com/users/xp65/orgs",
      "repos_url": "https://api.github.com/users/xp65/repos",
      "events_url": "https://api.github.com/users/xp65/events{/privacy}",
      "received_events_url": "https://api.github.com/users/xp65/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-08-20T17:31:57Z",
    "updated_at": "2015-08-20T17:31:57Z",
    "author_association": "NONE",
    "body": "Thanks guys for the great work, I really appreciate this. Only 12 days have passed and you guys have moved mountains.\n"
  },
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/133091611",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/9008#issuecomment-133091611",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/9008",
    "id": 133091611,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMzA5MTYxMQ==",
    "user": {
      "login": "RoosterDragon",
      "id": 3399086,
      "node_id": "MDQ6VXNlcjMzOTkwODY=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/3399086?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/RoosterDragon",
      "html_url": "https://github.com/RoosterDragon",
      "followers_url": "https://api.github.com/users/RoosterDragon/followers",
      "following_url": "https://api.github.com/users/RoosterDragon/following{/other_user}",
      "gists_url": "https://api.github.com/users/RoosterDragon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/RoosterDragon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/RoosterDragon/subscriptions",
      "organizations_url": "https://api.github.com/users/RoosterDragon/orgs",
      "repos_url": "https://api.github.com/users/RoosterDragon/repos",
      "events_url": "https://api.github.com/users/RoosterDragon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/RoosterDragon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-08-20T17:42:53Z",
    "updated_at": "2015-08-20T17:42:53Z",
    "author_association": "MEMBER",
    "body": "Providing the replay and a detailed description of the problem works wonders in helping us solve this sort of thing, so thanks for the awesome report. :)\n"
  }
]
