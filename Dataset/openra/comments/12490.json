[
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/267862311",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/12490#issuecomment-267862311",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/12490",
    "id": 267862311,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2Nzg2MjMxMQ==",
    "user": {
      "login": "chrisforbes",
      "id": 128877,
      "node_id": "MDQ6VXNlcjEyODg3Nw==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/128877?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chrisforbes",
      "html_url": "https://github.com/chrisforbes",
      "followers_url": "https://api.github.com/users/chrisforbes/followers",
      "following_url": "https://api.github.com/users/chrisforbes/following{/other_user}",
      "gists_url": "https://api.github.com/users/chrisforbes/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chrisforbes/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chrisforbes/subscriptions",
      "organizations_url": "https://api.github.com/users/chrisforbes/orgs",
      "repos_url": "https://api.github.com/users/chrisforbes/repos",
      "events_url": "https://api.github.com/users/chrisforbes/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chrisforbes/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-12-19T01:20:27Z",
    "updated_at": "2016-12-19T01:20:27Z",
    "author_association": "MEMBER",
    "body": "The UI code is fairly wasteful and there have been discussions about making it less so -- but being somewhere around 2-5% of profile isn't by itself the end of the world."
  },
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/267922219",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/12490#issuecomment-267922219",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/12490",
    "id": 267922219,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2NzkyMjIxOQ==",
    "user": {
      "login": "pchote",
      "id": 167819,
      "node_id": "MDQ6VXNlcjE2NzgxOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/167819?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pchote",
      "html_url": "https://github.com/pchote",
      "followers_url": "https://api.github.com/users/pchote/followers",
      "following_url": "https://api.github.com/users/pchote/following{/other_user}",
      "gists_url": "https://api.github.com/users/pchote/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pchote/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pchote/subscriptions",
      "organizations_url": "https://api.github.com/users/pchote/orgs",
      "repos_url": "https://api.github.com/users/pchote/repos",
      "events_url": "https://api.github.com/users/pchote/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pchote/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-12-19T09:44:41Z",
    "updated_at": "2016-12-19T09:45:12Z",
    "author_association": "MEMBER",
    "body": "Note that `EventBounds`, `ChildOrigin`, etc, are virtual implementations that specific widgets replace with their own implementations (e.g. scroll panels move their children in response to the scroll bar), so they can't just be removed.\r\n\r\nThere's no reason, however, why we couldn't cache these per-widget and then only call the slow path to update them in response to a `LayoutChanged` event.  @RoosterDragon do you have any thoughts on this area?"
  },
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/268603256",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/12490#issuecomment-268603256",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/12490",
    "id": 268603256,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2ODYwMzI1Ng==",
    "user": {
      "login": "RoosterDragon",
      "id": 3399086,
      "node_id": "MDQ6VXNlcjMzOTkwODY=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/3399086?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/RoosterDragon",
      "html_url": "https://github.com/RoosterDragon",
      "followers_url": "https://api.github.com/users/RoosterDragon/followers",
      "following_url": "https://api.github.com/users/RoosterDragon/following{/other_user}",
      "gists_url": "https://api.github.com/users/RoosterDragon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/RoosterDragon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/RoosterDragon/subscriptions",
      "organizations_url": "https://api.github.com/users/RoosterDragon/orgs",
      "repos_url": "https://api.github.com/users/RoosterDragon/repos",
      "events_url": "https://api.github.com/users/RoosterDragon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/RoosterDragon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-12-21T18:33:23Z",
    "updated_at": "2016-12-21T18:33:23Z",
    "author_association": "MEMBER",
    "body": "Have you generated this trace using the [Mono log profiler](http://www.mono-project.com/docs/debug+profile/profile/profiler/)? What options did you use?\r\n\r\nI ask because this trace looks very different to what I would expect. In particular if you have method enter/leave counts tracked during the profile this tends to significantly skew the execution timings due to the overhead of tracking the method being called. `RenderOrigin` is a very short but frequently called method that I would expect to see skewed results for if calls counts were being tracked.\r\n\r\nWhatever profiler you are using, if you are interested in times - you should ensure you are using a sampling mode and turn off other options such as call counts and allocations. For the mono one this would appear to correspond to use the `sample` option and also using `nocalls` and `noalloc` to disable the others.\r\n\r\nI profile on Windows with VS binaries and the CLR, so there is some possibility that mono is getting different results since we're talking different binaries and runtimes. It would be interesting if that does turn out to be the cause of the disparity though."
  },
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/268621403",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/12490#issuecomment-268621403",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/12490",
    "id": 268621403,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2ODYyMTQwMw==",
    "user": {
      "login": "anvilvapre",
      "id": 12512948,
      "node_id": "MDQ6VXNlcjEyNTEyOTQ4",
      "avatar_url": "https://avatars0.githubusercontent.com/u/12512948?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/anvilvapre",
      "html_url": "https://github.com/anvilvapre",
      "followers_url": "https://api.github.com/users/anvilvapre/followers",
      "following_url": "https://api.github.com/users/anvilvapre/following{/other_user}",
      "gists_url": "https://api.github.com/users/anvilvapre/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/anvilvapre/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/anvilvapre/subscriptions",
      "organizations_url": "https://api.github.com/users/anvilvapre/orgs",
      "repos_url": "https://api.github.com/users/anvilvapre/repos",
      "events_url": "https://api.github.com/users/anvilvapre/events{/privacy}",
      "received_events_url": "https://api.github.com/users/anvilvapre/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-12-21T19:48:16Z",
    "updated_at": "2016-12-21T19:49:35Z",
    "author_association": "NONE",
    "body": "I used \"mono --profile=log\" ealier which also records allocations - so yes this may have given a inccorect view.\r\n\r\nWhen i retry using \"mono --profile=default:stat\" i get the following report:\r\n\r\n```\r\n$ mono --profile=default:stat /usr/lib/openra/OpenRA.Game.exe \r\nPlatform is Linux\r\nUsing SDL 2 with OpenGL renderer\r\nDesktop resolution: 1920x1080\r\nNo custom resolution provided, using desktop resolution\r\nUsing resolution: 1920x1080\r\nOpenGL version: 4.5.13416 Compatibility Profile Context 15.302\r\nUsing default sound device\r\nAvailable mods:\r\n        cnc: Tiberian Dawn (release-20161019)\r\n        d2k: Dune 2000 (release-20161019)\r\n        modchooser: Mod Chooser (release-20161019)\r\n        ra: Red Alert (release-20161019)\r\nLoading mod: ra\r\nNAT discovery failed: \r\n[2016-12-21T20:01:14] Game started\r\nAL lib: FreeContext: (0x2d15b60) Deleting 32 Source(s)\r\n\r\nMono log profiler data\r\n        Profiler version: 0.4\r\n        Data version: 4\r\n        Mean timer overhead: 74 nanoseconds\r\n        Program startup: Wed Dec 21 20:00:58 2016\r\n        Program ID: 23875\r\n        Server listening on: 53894\r\n\r\nJIT summary\r\n        Compiled methods: 14829\r\n        Generated code size: 4027289\r\n\r\nGC summary\r\n        GC resizes: 0\r\n        Max heap size: 0\r\n        Object moves: 7866460\r\n        Gen0 collections: 539, max time: 14954us, total time: 2524684us, average: 4684us\r\n        Gen1 collections: 26, max time: 163588us, total time: 730752us, average: 28105us\r\n        GC handles weak: created: 2066, destroyed: 0, max: 2066\r\n        GC handles weaktrack: created: 2, destroyed: 2, max: 1\r\n        GC handles normal: created: 2, destroyed: 0, max: 2\r\n\r\n\r\n\r\nStatistical samples summary\r\n        Sample type: cycles\r\n        Unmanaged hits:   46333 (73.6%)\r\n        Managed hits:     16579 (26.4%)\r\n        Unresolved hits:  38641 (61.4%)\r\n          Hits      % Method name\r\n          8104  12.88 /usr/lib/dri/fglrx_dri.so\r\n          2199   3.50 /lib/x86_64-linux-gnu/libc.so.6\r\n          1417   2.25 mono_gc_bzero_aligned                in /usr/bin/mono-sgen\r\n           750   1.19 OpenRA.Widgets.Widget:get_RenderOrigin ()\r\n           651   1.03 OpenRA.int2:op_Addition (OpenRA.int2,OpenRA.int2)\r\n           457   0.73 /usr/lib/x86_64-linux-gnu/libopenal.so.1\r\n           441   0.70 string:IndexOfOrdinalUnchecked (string,int,int)\r\n           414   0.66 /usr/lib/libmono-profiler-log.so\r\n           390   0.62 append_frame_and_continue\r\n           389   0.62 OpenRA.Graphics.Util:FastCreateQuad (OpenRA.Graphics.Vertex[],OpenRA.float3,OpenRA.float3,OpenRA.float3,OpenRA.float3,OpenRA.Graphics.Sprite,single,int)\r\n           335   0.53 /usr/lib/x86_64-linux-gnu/pulseaudio/libpulsecommon-4.0.so\r\n           293   0.47 (wrapper alloc) object:AllocSmall (intptr)\r\n           275   0.44 System.Collections.Generic.Dictionary'2:TryGetValue (TKey,TValue&)\r\n           257   0.41 memset                               in /lib/x86_64-linux-gnu/libc.so.6\r\n           249   0.40 System.Collections.Generic.List'1/Enumerator:MoveNext ()\r\n           244   0.39 mono_gc_pthread_create               in /usr/bin/mono-sgen\r\n           218   0.35 OpenRA.Mods.Common.Traits.Render.RenderSprites:Tick (OpenRA.Actor)\r\n           208   0.33 /usr/bin/mono-sgen\r\n207   0.33 mono_g_hash_mark                     in /usr/bin/mono-sgen\r\n           206   0.33 /usr/lib/x86_64-linux-gnu/libpulse.so.0\r\n           204   0.32 (wrapper alloc) object:Alloc (intptr)\r\n           203   0.32 OpenRA.Graphics.Vertex:.ctor (single,single,single,single,single,single,single,single,single)\r\n           198   0.31 OpenRA.Widgets.Widget:get_ChildOrigin ()\r\n           195   0.31 OpenRA.Traits.Shroud:IsVisible (OpenRA.MPos)\r\n           186   0.30 __pthread_mutex_lock                 in /lib/x86_64-linux-gnu/libpthread.so.0\r\n           175   0.28 major_copy_or_mark_object            in /usr/bin/mono-sgen\r\n           174   0.28 OpenRA.Graphics.Vertex:.ctor (OpenRA.float3,single,single,single,single,single,single)\r\n           173   0.27 OpenRA.float3:.ctor (single,single,single)\r\n           146   0.23 envz_strip                           in /lib/x86_64-linux-gnu/libc.so.6\r\n           143   0.23 OpenRA.CellLayer'1<System.Collections.Generic.List'1<OpenRA.MPos>>:get_Item (OpenRA.MPos)\r\n           138   0.22 (wrapper alloc) object:AllocVector (intptr,intptr)\r\n           135   0.21 System.Collections.Generic.List'1:GetEnumerator ()\r\n           135   0.21 System.Collections.Generic.Dictionary'2<OpenRA.Primitives.Pair'2<char, System.Drawing.Color>, OpenRA.Graphics.GlyphInfo>:TryGetValue (OpenRA.Primitives.Pair'2<char, System.Drawing.Color>,OpenRA.Graphics.GlyphInfo&)\r\n           130   0.21 OpenRA.CPos:ToMPos (OpenRA.MapGridType)\r\n           130   0.21 \r\n           127   0.20 OpenRA.float3:op_Implicit (OpenRA.float2)\r\n           126   0.20 string:GetHashCode ()\r\n           124   0.20 System.Collections.Generic.List'1<System.Threading.Tasks.Task'1<System.Collections.Generic.IEnumerable'1<Open.Nat.NatDevice>>>:get_Item (int)\r\n           118   0.19 malloc                               in /lib/x86_64-linux-gnu/libc.so.6\r\n           116   0.18 major_scan_card_table                in /usr/bin/mono-sgen\r\n           111   0.18 System.Linq.Enumerable/<CreateSelectIterator>c__Iterator10'2<OpenRA.Primitives.Pair'2<OpenRA.ISync, System.Func'2<object, int>>, OpenRA.Actor/SyncHash>:MoveNext ()\r\n           109   0.17 OpenRA.Widgets.Widget:GetEventBounds ()\r\n           107   0.17 alloc_obj                            in /usr/bin/mono-sgen\r\n           105   0.17 System.Collections.Generic.Dictionary'2/Enumerator<OpenRA.CPos, OpenRA.Mods.Common.Traits.SmudgeLayer/Smudge>:MoveNext ()\r\n           104   0.17 OpenRA.Widgets.Widget:get_RenderBounds ()\r\n           103   0.16 mono_mempool_contains_addr           in /usr/bin/mono-sgen\r\n            96   0.15 OpenRA.CellLayer'1<int16>:get_Item (OpenRA.MPos)\r\n            95   0.15 OpenRA.World:<Tick>m__3 (OpenRA.TraitPair'1<OpenRA.Traits.ITick>)\r\n            93   0.15 OpenRA.Actor:Render (OpenRA.Graphics.WorldRenderer)\r\n 92   0.15 mono_delegate_trampoline             in /usr/bin/mono-sgen\r\n            91   0.14 System.Drawing.Rectangle:FromLTRB (int,int,int,int)\r\n            90   0.14 System.Drawing.Rectangle:Contains (int,int)\r\n            89   0.14 OpenRA.Graphics.SpriteRenderer:DrawSprite (OpenRA.Graphics.Sprite,OpenRA.float3,single,OpenRA.float3)\r\n            89   0.14 OpenRA.Graphics.RgbaColorRenderer:DrawLine (OpenRA.float3,OpenRA.float3,single,System.Drawing.Color)\r\n            89   0.14 __nanosleep_nocancel                 in /lib/x86_64-linux-gnu/libpthread.so.0\r\n            88   0.14 OpenRA.float3:op_Addition (OpenRA.float3,OpenRA.float3)\r\n            87   0.14 OpenRA.Actor:<Actor>m__1 (OpenRA.Primitives.Pair'2<OpenRA.ISync, System.Func'2<object, int>>)\r\n            85   0.14 OpenRA.Mods.Common.FileFormats.AudReader:DecodeSample (byte,int&,int&)\r\n            85   0.14 OpenRA.PPos:op_Explicit (OpenRA.PPos)\r\n            83   0.13 /usr/lib/x86_64-linux-gnu/libSDL2-2.0.so.0\r\n            81   0.13 Mono.Globalization.Unicode.CodePointIndexer:ToIndex (int)\r\n            81   0.13 mono_class_is_assignable_from        in /usr/bin/mono-sgen\r\n            77   0.12 simple_nursery_serial_scan_object    in /usr/bin/mono-sgen\r\n            75   0.12 pthread_mutex_unlock                 in /lib/x86_64-linux-gnu/libpthread.so.0\r\n            74   0.12 Mono.Globalization.Unicode.SimpleCollator:CompareInternal (string,int,int,string,int,int,bool&,bool&,bool,bool,Mono.Globalization.Unicode.SimpleCollator/Context&)\r\n            73   0.12 (wrapper stelemref) object:virt_stelemref_class (intptr,object)\r\n            73   0.12 System.Collections.Generic.Dictionary'2:get_Item (TKey)\r\n            73   0.12 OpenRA.Widgets.Widget:PrepareRenderablesOuter ()\r\n            73   0.12 ioctl                                in /lib/x86_64-linux-gnu/libc.so.6\r\n            72   0.11 add_profile_gc_root.isra.15\r\n            71   0.11 string:Equals (string,string)\r\n            71   0.11 OpenRA.World:SyncHash ()\r\n            67   0.11 System.Collections.Generic.Dictionary'2/Enumerator:MoveNext ()\r\n            67   0.11 major_iterate_live_block_ranges      in /usr/bin/mono-sgen\r\n            66   0.10 pthread_getspecific                  in /lib/x86_64-linux-gnu/libpthread.so.0\r\n            66   0.10 eg_utf8_to_utf16_general             in /usr/bin/mono-sgen\r\n            65   0.10 monoeg_g_hash_table_lookup_extended  in /usr/bin/mono-sgen\r\n            64   0.10 OpenRA.Graphics.Util:FastCopyIntoChannel (OpenRA.Graphics.Sprite,byte[])\r\n            64   0.10 major_scan_object                    in /usr/bin/mono-sgen\r\n\r\nMetadata summary\r\n        Loaded images: 24\r\n\r\nException summary\r\n        Throws: 91\r\n        Executed catch clauses: 90\r\n        Executed finally clauses: 1\r\n\r\nThread summary\r\n        Thread: 0x7f000589e700, name: \"\"\r\n        Thread: 0x7effd3dfc700, name: \"\"\r\n        Thread: 0x7effd3bfb700, name: \"\"\r\n        Thread: 0xef5e10fd88505c00, name: \"Map Preview Loader\"\r\n        Thread: 0x7effd0ffc700, name: \"\"\r\n        Thread: 0x7effeedef700, name: \"\"\r\n        Thread: 0x7f0022209700, name: \"\"\r\n        Thread: (nil), name: \"IO Threadpool worker\"\r\n        Thread: 0x7f0010d63700, name: \"\"\r\n        Thread: 0x6e389404415fcdc0, name: \"Finalizer\"\r\n        Thread: 0x7f002528c7c0, name: \"Main\"\r\n\r\n---- second time\r\n\r\nMono log profiler data\r\n\tProfiler version: 0.4\r\n\tData version: 4\r\n\tMean timer overhead: 22 nanoseconds\r\n\tProgram startup: Wed Dec 21 20:16:16 2016\r\n\tProgram ID: 26897\r\n\tServer listening on: 54611\r\n\r\nJIT summary\r\n\tCompiled methods: 14774\r\n\tGenerated code size: 4009829\r\n\r\nGC summary\r\n\tGC resizes: 0\r\n\tMax heap size: 0\r\n\tObject moves: 7843336\r\n\tGen0 collections: 536, max time: 14903us, total time: 2544880us, average: 4747us\r\n\tGen1 collections: 26, max time: 161758us, total time: 728291us, average: 28011us\r\n\tGC handles weak: created: 2066, destroyed: 0, max: 2066\r\n\tGC handles weaktrack: created: 2, destroyed: 2, max: 1\r\n\tGC handles normal: created: 2, destroyed: 0, max: 2\r\n\r\nStatistical samples summary\r\n\tSample type: cycles\r\n\tUnmanaged hits:   46604 (72.3%)\r\n\tManaged hits:     17856 (27.7%)\r\n\tUnresolved hits:  38674 (60.0%)\r\n\t  Hits      % Method name\r\n\t  8624  13.38 /usr/lib/dri/fglrx_dri.so\r\n\t  2342   3.63 /lib/x86_64-linux-gnu/libc.so.6\r\n\t  1630   2.53 mono_gc_bzero_aligned                in /usr/bin/mono-sgen\r\n\t   836   1.30 OpenRA.Widgets.Widget:get_RenderOrigin ()\r\n\t   704   1.09 string:IndexOfOrdinalUnchecked (string,int,int)\r\n\t   664   1.03 OpenRA.int2:op_Addition (OpenRA.int2,OpenRA.int2)\r\n\t   474   0.74 /usr/lib/libmono-profiler-log.so\r\n\t   350   0.54 /usr/lib/x86_64-linux-gnu/libopenal.so.1\r\n\t   347   0.54 OpenRA.Graphics.Util:FastCreateQuad (OpenRA.Graphics.Vertex[],OpenRA.float3,OpenRA.float3,OpenRA.float3,OpenRA.float3,OpenRA.Graphics.Sprite,single,int)\r\n\t   324   0.50 System.Collections.Generic.Dictionary'2<string, System.Type>:TryGetValue (string,System.Type&)\r\n\t   290   0.45 /usr/lib/x86_64-linux-gnu/pulseaudio/libpulsecommon-4.0.so\r\n\t   286   0.44 (wrapper alloc) object:AllocSmall (intptr)\r\n\t   276   0.43 OpenRA.Mods.Common.Traits.Render.RenderSprites:Tick (OpenRA.Actor)\r\n\t   272   0.42 append_frame_and_continue\r\n\t   268   0.42 memset                               in /lib/x86_64-linux-gnu/libc.so.6\r\n\t   262   0.41 System.Collections.Generic.List'1/Enumerator<OpenRA.MiniYamlNode>:MoveNext ()\r\n\t   247   0.38 OpenRA.Widgets.Widget:get_ChildOrigin ()\r\n\t   242   0.38 OpenRA.Traits.Shroud:IsVisible (OpenRA.MPos)\r\n\t   241   0.37 mono_gc_pthread_create               in /usr/bin/mono-sgen\r\n\t   227   0.35 /usr/bin/mono-sgen\r\n\t   221   0.34 (wrapper alloc) object:Alloc (intptr)\r\n\t   203   0.31 OpenRA.Graphics.Vertex:.ctor (single,single,single,single,single,single,single,single,single)\r\n\t   203   0.31 mono_g_hash_mark                     in /usr/bin/mono-sgen\r\n\t   189   0.29 major_copy_or_mark_object            in /usr/bin/mono-sgen\r\n\t   175   0.27 OpenRA.CellLayer'1:get_Item (OpenRA.MPos)\r\n\t   174   0.27 __pthread_mutex_lock                 in /lib/x86_64-linux-gnu/libpthread.so.0\r\n\t   156   0.24 /usr/lib/x86_64-linux-gnu/libpulse.so.0\r\n\t   152   0.24 OpenRA.Graphics.Vertex:.ctor (OpenRA.float3,single,single,single,single,single,single)\r\n\t   148   0.23 System.Collections.Generic.List'1:get_Item (int)\r\n\t   143   0.22 OpenRA.float3:.ctor (single,single,single)\r\n\t   140   0.22 envz_strip                           in /lib/x86_64-linux-gnu/libc.so.6\r\n\t   139   0.22 System.Collections.Generic.List'1:GetEnumerator ()\r\n\t   139   0.22 OpenRA.CPos:ToMPos (OpenRA.MapGridType)\r\n\t   139   0.22 \r\n\t   136   0.21 OpenRA.float3:op_Implicit (OpenRA.float2)\r\n\t   128   0.20 mono_mempool_contains_addr           in /usr/bin/mono-sgen\r\n\t   126   0.20 OpenRA.CellLayer'1<int16>:get_Item (OpenRA.MPos)\r\n\t   123   0.19 (wrapper alloc) object:AllocVector (intptr,intptr)\r\n\t   118   0.18 string:GetHashCode ()\r\n\t   114   0.18 System.Linq.Enumerable/<CreateSelectIterator>c__Iterator10'2<OpenRA.Primitives.Pair'2<OpenRA.ISync, System.Func'2<object, int>>, OpenRA.Actor/SyncHash>:MoveNext ()\r\n\t   114   0.18 System.Collections.Generic.Dictionary'2/Enumerator<OpenRA.CPos, OpenRA.Mods.Common.Traits.SmudgeLayer/Smudge>:MoveNext ()\r\n\t   113   0.18 OpenRA.Widgets.Widget:GetEventBounds ()\r\n\t   110   0.17 major_scan_card_table                in /usr/bin/mono-sgen\r\n\t   110   0.17 malloc                               in /lib/x86_64-linux-gnu/libc.so.6\r\n\t   109   0.17 OpenRA.PPos:op_Explicit (OpenRA.PPos)\r\n\t   108   0.17 mono_delegate_trampoline             in /usr/bin/mono-sgen\r\n\t   107   0.17 System.Collections.Generic.Dictionary'2<OpenRA.Primitives.Pair'2<char, System.Drawing.Color>, OpenRA.Graphics.GlyphInfo>:TryGetValue (OpenRA.Primitives.Pair'2<char, System.Drawing.Color>,OpenRA.Graphics.GlyphInfo&)\r\n\t   103   0.16 System.Drawing.Rectangle:FromLTRB (int,int,int,int)\r\n\t   102   0.16 OpenRA.World:<Tick>m__3 (OpenRA.TraitPair'1<OpenRA.Traits.ITick>)\r\n\t   101   0.16 major_scan_object                    in /usr/bin/mono-sgen\r\n\t   100   0.16 OpenRA.Graphics.RgbaColorRenderer:DrawLine (OpenRA.float3,OpenRA.float3,single,System.Drawing.Color)\r\n\t    99   0.15 OpenRA.float3:op_Addition (OpenRA.float3,OpenRA.float3)\r\n\t    99   0.15 alloc_obj                            in /usr/bin/mono-sgen\r\n\t    95   0.15 OpenRA.Widgets.Widget:PrepareRenderablesOuter ()\r\n\t    95   0.15 /usr/lib/x86_64-linux-gnu/libSDL2-2.0.so.0\r\n\t    90   0.14 simple_nursery_serial_scan_object    in /usr/bin/mono-sgen\r\n\t    89   0.14 (wrapper stelemref) object:virt_stelemref_interface (intptr,object)\r\n\t    88   0.14 OpenRA.Widgets.Widget:get_RenderBounds ()\r\n\t    87   0.13 System.Collections.Generic.Dictionary'2:get_Item (TKey)\r\n\t    86   0.13 OpenRA.Actor:Render (OpenRA.Graphics.WorldRenderer)\r\n\t    82   0.13 System.Drawing.Rectangle:Contains (int,int)\r\n\t    82   0.13 OpenRA.Primitives.SpatiallyPartitioned'1/<InBox>c__Iterator1:MoveNext ()\r\n\t    80   0.12 monoeg_g_hash_table_lookup_extended  in /usr/bin/mono-sgen\r\n\t    79   0.12 mono_class_is_assignable_from        in /usr/bin/mono-sgen\r\n\t    78   0.12 OpenRA.Mods.Common.Scripting.ScriptTriggers:TickIdle (OpenRA.Actor)\r\n\t    77   0.12 (wrapper stelemref) object:virt_stelemref_class (intptr,object)\r\n\t    77   0.12 ves_icall_System_Buffer_BlockCopyInternal in /usr/bin/mono-sgen\r\n\t    76   0.12 string:Equals (string,string)\r\n\t    76   0.12 OpenRA.Actor:<Actor>m__1 (OpenRA.Primitives.Pair'2<OpenRA.ISync, System.Func'2<object, int>>)\r\n\t    76   0.12 pthread_mutex_unlock                 in /lib/x86_64-linux-gnu/libpthread.so.0\r\n\t    75   0.12 OpenRA.Network.SyncReport:GenerateSyncReport (OpenRA.Network.SyncReport/Report)\r\n\t    75   0.12 System.Collections.Generic.Dictionary'2/Enumerator<OpenRA.Actor, System.Drawing.Rectangle>:MoveNext ()\r\n\t    75   0.12 OpenRA.Graphics.SpriteRenderer:DrawSprite (OpenRA.Graphics.Sprite,OpenRA.float3,single,OpenRA.float3)\r\n\t    75   0.12 eg_utf8_to_utf16_general             in /usr/bin/mono-sgen\r\n\t    74   0.11 OpenRA.World:SyncHash ()\r\n\t    73   0.11 System.Array:InternalArray__get_Item<OpenRA.Primitives.Pair'2<OpenRA.ISync, System.Func'2<object, int>>> (int)\r\n\t    72   0.11 OpenRA.Mods.Common.FileFormats.AudReader:DecodeSample (byte,int&,int&)\r\n\t    70   0.11 OpenRA.Widgets.Widget:DrawOuter ()\r\n\t    68   0.11 System.Collections.Generic.Dictionary'2/Enumerator:MoveNext ()\r\n\t    67   0.10 pthread_getspecific                  in /lib/x86_64-linux-gnu/libpthread.so.0\r\n\t    66   0.10 System.Drawing.Color:FromArgb (int,int,int,int)\r\n\t    65   0.10 OpenRA.CPos:ToMPos (OpenRA.Map)\r\n\t    65   0.10 OpenRA.ListExts:BinarySearchMany (System.Collections.Generic.List'1<OpenRA.Actor>,uint)\r\n\t    65   0.10 add_profile_gc_root.isra.15\r\n\r\nMetadata summary\r\n\tLoaded images: 24\r\n\r\nException summary\r\n\tThrows: 90\r\n\tExecuted catch clauses: 89\r\n\tExecuted finally clauses: 1\r\n\r\nThread summary\r\n\tThread: 0x7fa96caef700, name: \"\"\r\n\tThread: 0x7fa93adfb700, name: \"\"\r\n\tThread: 0x7fa93abfa700, name: \"\"\r\n\tThread: 0xefc3350da8a57000, name: \"Map Preview Loader\"\r\n\tThread: 0x7fa94435e700, name: \"\"\r\n\tThread: 0x7fa9569ff700, name: \"\"\r\n\tThread: 0x7fa989609700, name: \"\"\r\n\tThread: (nil), name: \"IO Threadpool worker\"\r\n\tThread: 0x7fa978263700, name: \"\"\r\n\tThread: 0x4933de6bf545c7c0, name: \"Finalizer\"\r\n\tThread: 0x7fa98c71a7c0, name: \"Main\"\r\n\r\n\r\n \r\nFor about 2 minutes of game play Skirmisch against one AI where I let 10 units walk to map to uncover shrowd.\r\n\r\nUsing this command the output format is different and does not show the number of calls. Not sure how I can configure the sample time and/or output format. \r\n\r\nWhen i use \"mono --profile=log:sample\" gives the same output:\r\n\r\nMono log profiler data\r\n\tProfiler version: 0.4\r\n\tData version: 4\r\n\tMean timer overhead: 34 nanoseconds\r\n\tProgram startup: Wed Dec 21 20:29:53 2016\r\n\tProgram ID: 29611\r\n\tServer listening on: 36731\r\n\r\nJIT summary\r\n\tCompiled methods: 14789\r\n\tGenerated code size: 4015614\r\n\r\nGC summary\r\n\tGC resizes: 0\r\n\tMax heap size: 0\r\n\tObject moves: 8084594\r\n\tGen0 collections: 547, max time: 38817us, total time: 2507347us, average: 4583us\r\n\tGen1 collections: 26, max time: 150648us, total time: 690710us, average: 26565us\r\n\tGC handles weak: created: 2066, destroyed: 0, max: 2066\r\n\tGC handles weaktrack: created: 2, destroyed: 2, max: 1\r\n\tGC handles normal: created: 2, destroyed: 0, max: 2\r\n\r\nStatistical samples summary\r\n\tSample type: cycles\r\n\tUnmanaged hits:   44262 (67.9%)\r\n\tManaged hits:     20889 (32.1%)\r\n\tUnresolved hits:  35872 (55.1%)\r\n\t  Hits      % Method name\r\n\t  9626  14.77 /usr/lib/dri/fglrx_dri.so\r\n\t  2562   3.93 /lib/x86_64-linux-gnu/libc.so.6\r\n\t  1854   2.85 mono_gc_bzero_aligned                in /usr/bin/mono-sgen\r\n\t  1096   1.68 string:IndexOfOrdinalUnchecked (string,int,int)\r\n\t   877   1.35 OpenRA.Widgets.Widget:get_RenderOrigin ()\r\n\t   846   1.30 OpenRA.int2:op_Addition (OpenRA.int2,OpenRA.int2)\r\n\t   508   0.78 /usr/lib/libmono-profiler-log.so\r\n\t   387   0.59 OpenRA.Graphics.Util:FastCreateQuad (OpenRA.Graphics.Vertex[],OpenRA.float3,OpenRA.float3,OpenRA.float3,OpenRA.float3,OpenRA.Graphics.Sprite,single,int)\r\n\t   346   0.53 (wrapper alloc) object:AllocSmall (intptr)\r\n\t   333   0.51 System.Collections.Generic.Dictionary'2<string, System.Type>:TryGetValue (string,System.Type&)\r\n\t   330   0.51 OpenRA.Mods.Common.Traits.Render.RenderSprites:Tick (OpenRA.Actor)\r\n\t   315   0.48 /usr/lib/x86_64-linux-gnu/libopenal.so.1\r\n\t   311   0.48 OpenRA.Traits.Shroud:IsVisible (OpenRA.MPos)\r\n\t   310   0.48 memset                               in /lib/x86_64-linux-gnu/libc.so.6\r\n\t   293   0.45 mono_gc_pthread_create               in /usr/bin/mono-sgen\r\n\t   283   0.43 /usr/lib/x86_64-linux-gnu/pulseaudio/libpulsecommon-4.0.so\r\n\t   278   0.43 System.Collections.Generic.List'1/Enumerator<OpenRA.MiniYamlNode>:MoveNext ()\r\n\t   278   0.43 append_frame_and_continue\r\n\t   270   0.41 OpenRA.Widgets.Widget:get_ChildOrigin ()\r\n\t   244   0.37 (wrapper alloc) object:Alloc (intptr)\r\n\t   243   0.37 /usr/bin/mono-sgen\r\n\t   240   0.37 OpenRA.CellLayer'1:get_Item (OpenRA.MPos)\r\n\t   219   0.34 OpenRA.Graphics.Vertex:.ctor (single,single,single,single,single,single,single,single,single)\r\n\t   199   0.31 major_copy_or_mark_object            in /usr/bin/mono-sgen\r\n\t   195   0.30 OpenRA.float3:.ctor (single,single,single)\r\n\t   191   0.29 OpenRA.CPos:ToMPos (OpenRA.MapGridType)\r\n\t   184   0.28 mono_g_hash_mark                     in /usr/bin/mono-sgen\r\n\t   182   0.28 System.Collections.Generic.List'1<System.Threading.Tasks.Task'1<System.Collections.Generic.IEnumerable'1<Open.Nat.NatDevice>>>:get_Item (int)\r\n\t   175   0.27 OpenRA.Graphics.Vertex:.ctor (OpenRA.float3,single,single,single,single,single,single)\r\n\t   168   0.26 \r\n\t   166   0.25 __pthread_mutex_lock                 in /lib/x86_64-linux-gnu/libpthread.so.0\r\n\t   159   0.24 System.Collections.Generic.Dictionary'2/Enumerator<OpenRA.CPos, OpenRA.Mods.Common.Traits.SmudgeLayer/Smudge>:MoveNext ()\r\n\t   156   0.24 System.Linq.Enumerable/<CreateSelectIterator>c__Iterator10'2<OpenRA.Primitives.Pair'2<OpenRA.ISync, System.Func'2<object, int>>, OpenRA.Actor/SyncHash>:MoveNext ()\r\n\t   154   0.24 envz_strip                           in /lib/x86_64-linux-gnu/libc.so.6\r\n\t   152   0.23 System.Collections.Generic.List'1<OpenRA.MiniYamlNode>:GetEnumerator ()\r\n\t   146   0.22 /usr/lib/x86_64-linux-gnu/libpulse.so.0\r\n\t   141   0.22 OpenRA.PPos:op_Explicit (OpenRA.PPos)\r\n\t   138   0.21 OpenRA.CellLayer'1<int16>:get_Item (OpenRA.MPos)\r\n\t   133   0.20 OpenRA.Widgets.Widget:GetEventBounds ()\r\n\t   133   0.20 OpenRA.float3:op_Implicit (OpenRA.float2)\r\n\t   127   0.19 OpenRA.Widgets.Widget:get_RenderBounds ()\r\n\t   126   0.19 (wrapper alloc) object:AllocVector (intptr,intptr)\r\n\t   126   0.19 System.Collections.Generic.Dictionary'2<OpenRA.Primitives.Pair'2<char, System.Drawing.Color>, OpenRA.Graphics.GlyphInfo>:TryGetValue (OpenRA.Primitives.Pair'2<char, System.Drawing.Color>,OpenRA.Graphics.GlyphInfo&)\r\n\t   123   0.19 string:GetHashCode ()\r\n\t   121   0.19 mono_delegate_trampoline             in /usr/bin/mono-sgen\r\n\t   119   0.18 OpenRA.float3:op_Addition (OpenRA.float3,OpenRA.float3)\r\n\t   115   0.18 alloc_obj                            in /usr/bin/mono-sgen\r\n\t   115   0.18 mono_mempool_contains_addr           in /usr/bin/mono-sgen\r\n\t   114   0.17 major_scan_card_table                in /usr/bin/mono-sgen\r\n\t   113   0.17 OpenRA.Actor:<Actor>m__1 (OpenRA.Primitives.Pair'2<OpenRA.ISync, System.Func'2<object, int>>)\r\n\t   109   0.17 OpenRA.World:<Tick>m__3 (OpenRA.TraitPair'1<OpenRA.Traits.ITick>)\r\n\t   108   0.17 System.Drawing.Rectangle:Contains (int,int)\r\n\t   108   0.17 OpenRA.Actor:Render (OpenRA.Graphics.WorldRenderer)\r\n\t   105   0.16 OpenRA.Mods.Common.Scripting.ScriptTriggers:TickIdle (OpenRA.Actor)\r\n\t   104   0.16 System.Drawing.Rectangle:FromLTRB (int,int,int,int)\r\n\t   104   0.16 major_scan_object                    in /usr/bin/mono-sgen\r\n\t   102   0.16 OpenRA.Widgets.Widget:PrepareRenderablesOuter ()\r\n\t   100   0.15 OpenRA.Graphics.RgbaColorRenderer:DrawLine (OpenRA.float3,OpenRA.float3,single,System.Drawing.Color)\r\n\t    97   0.15 (wrapper stelemref) object:virt_stelemref_interface (intptr,object)\r\n\t    96   0.15 pthread_mutex_unlock                 in /lib/x86_64-linux-gnu/libpthread.so.0\r\n\t    93   0.14 System.Collections.Generic.Dictionary'2<string, string>:get_Item (string)\r\n\t    93   0.14 OpenRA.World:SyncHash ()\r\n\t    89   0.14 OpenRA.Primitives.SpatiallyPartitioned'1/<InBox>c__Iterator1:MoveNext ()\r\n\t    88   0.14 malloc                               in /lib/x86_64-linux-gnu/libc.so.6\r\n\t    88   0.14 __nanosleep_nocancel                 in /lib/x86_64-linux-gnu/libpthread.so.0\r\n\t    87   0.13 OpenRA.Graphics.Util:FastCreateQuad (OpenRA.Graphics.Vertex[],OpenRA.float3,OpenRA.Graphics.Sprite,single,int,OpenRA.float3)\r\n\t    86   0.13 simple_nursery_serial_scan_object    in /usr/bin/mono-sgen\r\n\t    85   0.13 pthread_getspecific                  in /lib/x86_64-linux-gnu/libpthread.so.0\r\n\t    80   0.12 System.Drawing.Color:FromArgb (int,int,int,int)\r\n\t    80   0.12 OpenRA.Graphics.SpriteRenderer:DrawSprite (OpenRA.Graphics.Sprite,OpenRA.float3,single,OpenRA.float3)\r\n\t    78   0.12 System.Collections.Generic.Dictionary'2/Enumerator<string, string>:MoveNext ()\r\n\t    78   0.12 System.Collections.Generic.Dictionary'2/Enumerator<OpenRA.Actor, System.Drawing.Rectangle>:MoveNext ()\r\n\t    78   0.12 sgen_cardtable_scan_object           in /usr/bin/mono-sgen\r\n\t    78   0.12 /usr/lib/x86_64-linux-gnu/libSDL2-2.0.so.0\r\n\t    77   0.12 string:Equals (string,string)\r\n\t    77   0.12 major_iterate_live_block_ranges      in /usr/bin/mono-sgen\r\n\t    77   0.12 eg_utf8_to_utf16_general             in /usr/bin/mono-sgen\r\n\t    76   0.12 Mono.Globalization.Unicode.CodePointIndexer:ToIndex (int)\r\n\t    76   0.12 (wrapper stelemref) object:virt_stelemref_class (intptr,object)\r\n\t    76   0.12 sgen_card_table_wbarrier_arrayref_copy in /usr/bin/mono-sgen\r\n\t    75   0.12 OpenRA.Network.SyncReport:GenerateSyncReport (OpenRA.Network.SyncReport/Report)\r\n\t    73   0.11 OpenRA.Graphics.Util:FastCopyIntoChannel (OpenRA.Graphics.Sprite,byte[])\r\n\t    73   0.11 OpenRA.Graphics.WorldRenderer:Draw ()\r\n\t    73   0.11 monoeg_g_hash_table_lookup_extended  in /usr/bin/mono-sgen\r\n\t    71   0.11 mono_class_is_assignable_from        in /usr/bin/mono-sgen\r\n\t    70   0.11 OpenRA.ListExts:BinarySearchMany (System.Collections.Generic.List'1<OpenRA.Actor>,uint)\r\n\t    70   0.11 ves_icall_System_Buffer_BlockCopyInternal in /usr/bin/mono-sgen\r\n\t    68   0.10 System.Array:InternalArray__get_Item<OpenRA.Primitives.Pair'2<OpenRA.ISync, System.Func'2<object, int>>> (int)\r\n\t    68   0.10 OpenRA.CPos:ToMPos (OpenRA.Map)\r\n\t    66   0.10 OpenRA.Widgets.Widget:DrawOuter ()\r\n\t    66   0.10 OpenRA.World:Tick ()\r\n\r\nMetadata summary\r\n\tLoaded images: 24\r\n\r\nException summary\r\n\tThrows: 90\r\n\tExecuted catch clauses: 89\r\n\tExecuted finally clauses: 1\r\n\r\nMonitor lock summary\r\n\tLock object 0x7f3b32d5c420: 1 contentions\r\n\t\t0.000153 secs total wait time, 0.000153 max, 0.000153 average\r\n\tLock object 0x7f3aff550308: 1 contentions\r\n\t\t0.000058 secs total wait time, 0.000058 max, 0.000058 average\r\n\tLock contentions: 2\r\n\tLock acquired: 2\r\n\tLock failures: 0\r\n\r\nThread summary\r\n\tThread: 0x7f3b1466e700, name: \"\"\r\n\tThread: 0x7f3aec6ce700, name: \"\"\r\n\tThread: 0x7f3aec4cd700, name: \"\"\r\n\tThread: 0xef42abdfb40e7000, name: \"Map Preview Loader\"\r\n\tThread: 0x7f3ae0566700, name: \"\"\r\n\tThread: 0x7f3afeaff700, name: \"\"\r\n\tThread: 0x7f3b31209700, name: \"\"\r\n\tThread: (nil), name: \"IO Threadpool worker\"\r\n\tThread: 0x7f3b17dfd700, name: \"\"\r\n\tThread: 0x187e246db7f279c0, name: \"Finalizer\"\r\n\tThread: 0x7f3b3437c7c0, name: \"Main\"\r\n```"
  },
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/268621952",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/12490#issuecomment-268621952",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/12490",
    "id": 268621952,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2ODYyMTk1Mg==",
    "user": {
      "login": "anvilvapre",
      "id": 12512948,
      "node_id": "MDQ6VXNlcjEyNTEyOTQ4",
      "avatar_url": "https://avatars0.githubusercontent.com/u/12512948?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/anvilvapre",
      "html_url": "https://github.com/anvilvapre",
      "followers_url": "https://api.github.com/users/anvilvapre/followers",
      "following_url": "https://api.github.com/users/anvilvapre/following{/other_user}",
      "gists_url": "https://api.github.com/users/anvilvapre/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/anvilvapre/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/anvilvapre/subscriptions",
      "organizations_url": "https://api.github.com/users/anvilvapre/orgs",
      "repos_url": "https://api.github.com/users/anvilvapre/repos",
      "events_url": "https://api.github.com/users/anvilvapre/events{/privacy}",
      "received_events_url": "https://api.github.com/users/anvilvapre/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-12-21T19:50:50Z",
    "updated_at": "2016-12-21T20:00:50Z",
    "author_association": "NONE",
    "body": "When i use \"mono --profile=log:sample\" gives the same output:\r\n<pre>\r\nMono log profiler data\r\n\tProfiler version: 0.4\r\n\tData version: 4\r\n\tMean timer overhead: 34 nanoseconds\r\n\tProgram startup: Wed Dec 21 20:29:53 2016\r\n\tProgram ID: 29611\r\n\tServer listening on: 36731\r\n\r\nJIT summary\r\n\tCompiled methods: 14789\r\n\tGenerated code size: 4015614\r\n\r\nGC summary\r\n\tGC resizes: 0\r\n\tMax heap size: 0\r\n\tObject moves: 8084594\r\n\tGen0 collections: 547, max time: 38817us, total time: 2507347us, average: 4583us\r\n\tGen1 collections: 26, max time: 150648us, total time: 690710us, average: 26565us\r\n\tGC handles weak: created: 2066, destroyed: 0, max: 2066\r\n\tGC handles weaktrack: created: 2, destroyed: 2, max: 1\r\n\tGC handles normal: created: 2, destroyed: 0, max: 2\r\n\r\nStatistical samples summary\r\n\tSample type: cycles\r\n\tUnmanaged hits:   44262 (67.9%)\r\n\tManaged hits:     20889 (32.1%)\r\n\tUnresolved hits:  35872 (55.1%)\r\n\t  Hits      % Method name\r\n\t  9626  14.77 /usr/lib/dri/fglrx_dri.so\r\n\t  2562   3.93 /lib/x86_64-linux-gnu/libc.so.6\r\n\t  1854   2.85 mono_gc_bzero_aligned                in /usr/bin/mono-sgen\r\n\t  1096   1.68 string:IndexOfOrdinalUnchecked (string,int,int)\r\n\t   877   1.35 OpenRA.Widgets.Widget:get_RenderOrigin ()\r\n\t   846   1.30 OpenRA.int2:op_Addition (OpenRA.int2,OpenRA.int2)\r\n\t   508   0.78 /usr/lib/libmono-profiler-log.so\r\n\t   387   0.59 OpenRA.Graphics.Util:FastCreateQuad (OpenRA.Graphics.Vertex[],OpenRA.float3,OpenRA.float3,OpenRA.float3,OpenRA.float3,OpenRA.Graphics.Sprite,single,int)\r\n\t   346   0.53 (wrapper alloc) object:AllocSmall (intptr)\r\n\t   333   0.51 System.Collections.Generic.Dictionary`2<string, System.Type>:TryGetValue (string,System.Type&)\r\n\t   330   0.51 OpenRA.Mods.Common.Traits.Render.RenderSprites:Tick (OpenRA.Actor)\r\n\t   315   0.48 /usr/lib/x86_64-linux-gnu/libopenal.so.1\r\n\t   311   0.48 OpenRA.Traits.Shroud:IsVisible (OpenRA.MPos)\r\n\t   310   0.48 memset                               in /lib/x86_64-linux-gnu/libc.so.6\r\n\t   293   0.45 mono_gc_pthread_create               in /usr/bin/mono-sgen\r\n\t   283   0.43 /usr/lib/x86_64-linux-gnu/pulseaudio/libpulsecommon-4.0.so\r\n\t   278   0.43 System.Collections.Generic.List`1/Enumerator<OpenRA.MiniYamlNode>:MoveNext ()\r\n\t   278   0.43 append_frame_and_continue\r\n\t   270   0.41 OpenRA.Widgets.Widget:get_ChildOrigin ()\r\n\t   244   0.37 (wrapper alloc) object:Alloc (intptr)\r\n\t   243   0.37 /usr/bin/mono-sgen\r\n\t   240   0.37 OpenRA.CellLayer`1:get_Item (OpenRA.MPos)\r\n\t   219   0.34 OpenRA.Graphics.Vertex:.ctor (single,single,single,single,single,single,single,single,single)\r\n\t   199   0.31 major_copy_or_mark_object            in /usr/bin/mono-sgen\r\n\t   195   0.30 OpenRA.float3:.ctor (single,single,single)\r\n\t   191   0.29 OpenRA.CPos:ToMPos (OpenRA.MapGridType)\r\n\t   184   0.28 mono_g_hash_mark                     in /usr/bin/mono-sgen\r\n\t   182   0.28 System.Collections.Generic.List`1<System.Threading.Tasks.Task`1<System.Collections.Generic.IEnumerable`1<Open.Nat.NatDevice>>>:get_Item (int)\r\n\t   175   0.27 OpenRA.Graphics.Vertex:.ctor (OpenRA.float3,single,single,single,single,single,single)\r\n\t   168   0.26 \r\n\t   166   0.25 __pthread_mutex_lock                 in /lib/x86_64-linux-gnu/libpthread.so.0\r\n\t   159   0.24 System.Collections.Generic.Dictionary`2/Enumerator<OpenRA.CPos, OpenRA.Mods.Common.Traits.SmudgeLayer/Smudge>:MoveNext ()\r\n\t   156   0.24 System.Linq.Enumerable/<CreateSelectIterator>c__Iterator10`2<OpenRA.Primitives.Pair`2<OpenRA.ISync, System.Func`2<object, int>>, OpenRA.Actor/SyncHash>:MoveNext ()\r\n\t   154   0.24 envz_strip                           in /lib/x86_64-linux-gnu/libc.so.6\r\n\t   152   0.23 System.Collections.Generic.List`1<OpenRA.MiniYamlNode>:GetEnumerator ()\r\n\t   146   0.22 /usr/lib/x86_64-linux-gnu/libpulse.so.0\r\n\t   141   0.22 OpenRA.PPos:op_Explicit (OpenRA.PPos)\r\n\t   138   0.21 OpenRA.CellLayer`1<int16>:get_Item (OpenRA.MPos)\r\n\t   133   0.20 OpenRA.Widgets.Widget:GetEventBounds ()\r\n\t   133   0.20 OpenRA.float3:op_Implicit (OpenRA.float2)\r\n\t   127   0.19 OpenRA.Widgets.Widget:get_RenderBounds ()\r\n\t   126   0.19 (wrapper alloc) object:AllocVector (intptr,intptr)\r\n\t   126   0.19 System.Collections.Generic.Dictionary`2<OpenRA.Primitives.Pair`2<char, System.Drawing.Color>, OpenRA.Graphics.GlyphInfo>:TryGetValue (OpenRA.Primitives.Pair`2<char, System.Drawing.Color>,OpenRA.Graphics.GlyphInfo&)\r\n\t   123   0.19 string:GetHashCode ()\r\n\t   121   0.19 mono_delegate_trampoline             in /usr/bin/mono-sgen\r\n\t   119   0.18 OpenRA.float3:op_Addition (OpenRA.float3,OpenRA.float3)\r\n\t   115   0.18 alloc_obj                            in /usr/bin/mono-sgen\r\n\t   115   0.18 mono_mempool_contains_addr           in /usr/bin/mono-sgen\r\n\t   114   0.17 major_scan_card_table                in /usr/bin/mono-sgen\r\n\t   113   0.17 OpenRA.Actor:<Actor>m__1 (OpenRA.Primitives.Pair`2<OpenRA.ISync, System.Func`2<object, int>>)\r\n\t   109   0.17 OpenRA.World:<Tick>m__3 (OpenRA.TraitPair`1<OpenRA.Traits.ITick>)\r\n\t   108   0.17 System.Drawing.Rectangle:Contains (int,int)\r\n\t   108   0.17 OpenRA.Actor:Render (OpenRA.Graphics.WorldRenderer)\r\n\t   105   0.16 OpenRA.Mods.Common.Scripting.ScriptTriggers:TickIdle (OpenRA.Actor)\r\n\t   104   0.16 System.Drawing.Rectangle:FromLTRB (int,int,int,int)\r\n\t   104   0.16 major_scan_object                    in /usr/bin/mono-sgen\r\n\t   102   0.16 OpenRA.Widgets.Widget:PrepareRenderablesOuter ()\r\n\t   100   0.15 OpenRA.Graphics.RgbaColorRenderer:DrawLine (OpenRA.float3,OpenRA.float3,single,System.Drawing.Color)\r\n\t    97   0.15 (wrapper stelemref) object:virt_stelemref_interface (intptr,object)\r\n\t    96   0.15 pthread_mutex_unlock                 in /lib/x86_64-linux-gnu/libpthread.so.0\r\n\t    93   0.14 System.Collections.Generic.Dictionary`2<string, string>:get_Item (string)\r\n\t    93   0.14 OpenRA.World:SyncHash ()\r\n\t    89   0.14 OpenRA.Primitives.SpatiallyPartitioned`1/<InBox>c__Iterator1:MoveNext ()\r\n\t    88   0.14 malloc                               in /lib/x86_64-linux-gnu/libc.so.6\r\n\t    88   0.14 __nanosleep_nocancel                 in /lib/x86_64-linux-gnu/libpthread.so.0\r\n\t    87   0.13 OpenRA.Graphics.Util:FastCreateQuad (OpenRA.Graphics.Vertex[],OpenRA.float3,OpenRA.Graphics.Sprite,single,int,OpenRA.float3)\r\n\t    86   0.13 simple_nursery_serial_scan_object    in /usr/bin/mono-sgen\r\n\t    85   0.13 pthread_getspecific                  in /lib/x86_64-linux-gnu/libpthread.so.0\r\n\t    80   0.12 System.Drawing.Color:FromArgb (int,int,int,int)\r\n\t    80   0.12 OpenRA.Graphics.SpriteRenderer:DrawSprite (OpenRA.Graphics.Sprite,OpenRA.float3,single,OpenRA.float3)\r\n\t    78   0.12 System.Collections.Generic.Dictionary`2/Enumerator<string, string>:MoveNext ()\r\n\t    78   0.12 System.Collections.Generic.Dictionary`2/Enumerator<OpenRA.Actor, System.Drawing.Rectangle>:MoveNext ()\r\n\t    78   0.12 sgen_cardtable_scan_object           in /usr/bin/mono-sgen\r\n\t    78   0.12 /usr/lib/x86_64-linux-gnu/libSDL2-2.0.so.0\r\n\t    77   0.12 string:Equals (string,string)\r\n\t    77   0.12 major_iterate_live_block_ranges      in /usr/bin/mono-sgen\r\n\t    77   0.12 eg_utf8_to_utf16_general             in /usr/bin/mono-sgen\r\n\t    76   0.12 Mono.Globalization.Unicode.CodePointIndexer:ToIndex (int)\r\n\t    76   0.12 (wrapper stelemref) object:virt_stelemref_class (intptr,object)\r\n\t    76   0.12 sgen_card_table_wbarrier_arrayref_copy in /usr/bin/mono-sgen\r\n\t    75   0.12 OpenRA.Network.SyncReport:GenerateSyncReport (OpenRA.Network.SyncReport/Report)\r\n\t    73   0.11 OpenRA.Graphics.Util:FastCopyIntoChannel (OpenRA.Graphics.Sprite,byte[])\r\n\t    73   0.11 OpenRA.Graphics.WorldRenderer:Draw ()\r\n\t    73   0.11 monoeg_g_hash_table_lookup_extended  in /usr/bin/mono-sgen\r\n\t    71   0.11 mono_class_is_assignable_from        in /usr/bin/mono-sgen\r\n\t    70   0.11 OpenRA.ListExts:BinarySearchMany (System.Collections.Generic.List`1<OpenRA.Actor>,uint)\r\n\t    70   0.11 ves_icall_System_Buffer_BlockCopyInternal in /usr/bin/mono-sgen\r\n\t    68   0.10 System.Array:InternalArray__get_Item<OpenRA.Primitives.Pair`2<OpenRA.ISync, System.Func`2<object, int>>> (int)\r\n\t    68   0.10 OpenRA.CPos:ToMPos (OpenRA.Map)\r\n\t    66   0.10 OpenRA.Widgets.Widget:DrawOuter ()\r\n\t    66   0.10 OpenRA.World:Tick ()\r\n\r\nMetadata summary\r\n\tLoaded images: 24\r\n\r\nException summary\r\n\tThrows: 90\r\n\tExecuted catch clauses: 89\r\n\tExecuted finally clauses: 1\r\n\r\nMonitor lock summary\r\n\tLock object 0x7f3b32d5c420: 1 contentions\r\n\t\t0.000153 secs total wait time, 0.000153 max, 0.000153 average\r\n\tLock object 0x7f3aff550308: 1 contentions\r\n\t\t0.000058 secs total wait time, 0.000058 max, 0.000058 average\r\n\tLock contentions: 2\r\n\tLock acquired: 2\r\n\tLock failures: 0\r\n\r\nThread summary\r\n\tThread: 0x7f3b1466e700, name: \"\"\r\n\tThread: 0x7f3aec6ce700, name: \"\"\r\n\tThread: 0x7f3aec4cd700, name: \"\"\r\n\tThread: 0xef42abdfb40e7000, name: \"Map Preview Loader\"\r\n\tThread: 0x7f3ae0566700, name: \"\"\r\n\tThread: 0x7f3afeaff700, name: \"\"\r\n\tThread: 0x7f3b31209700, name: \"\"\r\n\tThread: (nil), name: \"IO Threadpool worker\"\r\n\tThread: 0x7f3b17dfd700, name: \"\"\r\n\tThread: 0x187e246db7f279c0, name: \"Finalizer\"\r\n\tThread: 0x7f3b3437c7c0, name: \"Main\"\r\n\r\n</pre>"
  },
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/268623812",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/12490#issuecomment-268623812",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/12490",
    "id": 268623812,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2ODYyMzgxMg==",
    "user": {
      "login": "anvilvapre",
      "id": 12512948,
      "node_id": "MDQ6VXNlcjEyNTEyOTQ4",
      "avatar_url": "https://avatars0.githubusercontent.com/u/12512948?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/anvilvapre",
      "html_url": "https://github.com/anvilvapre",
      "followers_url": "https://api.github.com/users/anvilvapre/followers",
      "following_url": "https://api.github.com/users/anvilvapre/following{/other_user}",
      "gists_url": "https://api.github.com/users/anvilvapre/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/anvilvapre/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/anvilvapre/subscriptions",
      "organizations_url": "https://api.github.com/users/anvilvapre/orgs",
      "repos_url": "https://api.github.com/users/anvilvapre/repos",
      "events_url": "https://api.github.com/users/anvilvapre/events{/privacy}",
      "received_events_url": "https://api.github.com/users/anvilvapre/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-12-21T19:58:20Z",
    "updated_at": "2016-12-21T20:02:55Z",
    "author_association": "NONE",
    "body": "And when i use \"mono --profile=log:noalloc\" i get the same output format as the first time.\r\n\r\nI can't send you the full report as a comment, I could email it if needed. This is the top 200.\r\n\r\n\r\nSorted top 200:\r\n<pre>\r\n    5320      194     956474 OpenRA.Graphics.ChromeProvider:GetImage (string,string)\r\n     597      194     258731 OpenRA.Graphics.SpriteRenderable:ScreenPosition (OpenRA.Graphics.WorldRenderer)\r\n     765      194     982454 System.Collections.Generic.Dictionary`2<System.Type, OpenRA.Network.SyncReport/TypeInfo>:TryGetValue (System.Type,OpenRA.Network.SyncReport/TypeInfo&)\r\n     436      196     521079 System.Collections.Generic.Dictionary`2:get_Item (TKey)\r\n     313      197    1535776 string:Equals (string)\r\n     524      198     810886 OpenRA.Primitives.Pair/ColorEqualityComparer:Equals (System.Drawing.Color,System.Drawing.Color)\r\n    7740      198    1512275 OpenRA.Exts:GetOrAdd<K, V> (System.Collections.Generic.Dictionary`2<K, V>,K,System.Func`2<K, V>)\r\n   32710      200       7943 OpenRA.Graphics.WorldRenderer:Draw ()\r\n     520      202    1788646 System.Collections.Generic.HashSet`1<int>:Remove (int)\r\n     284      203    1502473 System.Collections.Generic.GenericComparer`1<int>:Compare (int,int)\r\n     681      203    1127676 System.Collections.Generic.HashSet`1:Contains (T)\r\n     293      204    1660669 OpenRA.float3:op_Subtraction (OpenRA.float3,OpenRA.float3)\r\n     208      208    4443138 OpenRA.Traits.Shroud:get_FogEnabled ()\r\n     297      209    1676009 System.Threading.Thread:get_ManagedThreadId ()\r\n     572      209    3685309 System.Collections.Generic.List`1<char>:Add (char)\r\n   10481      210    1494078 OpenRA.Graphics.SpriteRenderer:DrawSprite (OpenRA.Graphics.Sprite,OpenRA.float3)\r\n     210      210    3663732 string:memcpy4 (byte*,byte*,int)\r\n     211      211    2782612 (wrapper managed-to-native) System.Diagnostics.Stopwatch:GetTimestamp ()\r\n     428      211    1791207 System.Array:Copy (System.Array,int,System.Array,int,int)\r\n     313      214    1407301 System.Collections.Generic.GenericEqualityComparer`1:GetHashCode (T)\r\n    5340      214    1135473 OpenRA.Widgets.WidgetUtils:DrawRGBA (OpenRA.Graphics.Sprite,OpenRA.float2)\r\n    3442      218     614921 Mono.Globalization.Unicode.SimpleCollator:IsPrefix (string,string,int,int,System.Globalization.CompareOptions)\r\n    1509      220    1212118 System.Collections.Generic.SortedDictionary`2/ValueCollection/Enumerator<uint, OpenRA.Actor>:MoveNext ()\r\n     220      220    1859690 (wrapper managed-to-native) System.Array:FastCopy (System.Array,int,System.Array,int,int)\r\n    1952      223    1125753 System.Collections.Generic.HashSet`1:Add (T)\r\n    1302      224    1185939 System.Array:Clear (System.Array,int,int)\r\n     377      229    1616780 Mono.Globalization.Unicode.SimpleCollator:GetContraction (string,int,int)\r\n    1799      231     812700 System.Collections.Generic.Dictionary`2<OpenRA.Primitives.Pair`2<char, System.Drawing.Color>, OpenRA.Graphics.GlyphInfo>:TryGetValue (OpenRA.Primitives.Pair`2<char, System.Drawing.Color>,OpenRA.Graphics.GlyphInfo&)\r\n     233      233    4353634 System.Linq.Enumerable/<CreateSelectIterator>c__Iterator10`2<OpenRA.Primitives.Pair`2<OpenRA.ISync, System.Func`2<object, int>>, OpenRA.Actor/SyncHash>:System.Collections.Generic.IEnumerator<TResult>.get_Current ()\r\n     234      234    5892755 System.Drawing.Color:CheckRGBValues (int,int,int)\r\n     795      235     607543 <>__AnonType0`3:GetHashCode ()\r\n     239      239    4907672 System.Drawing.Size:get_Width ()\r\n     355      246    1866224 OpenRA.float3:op_Multiply (OpenRA.float3,OpenRA.float3)\r\n     247      247    4499564 OpenRA.TraitPair`1:.ctor (OpenRA.Actor,T)\r\n     347      247    2001108 System.Collections.Generic.HashSet`1<int>:GetItemHashCode (int)\r\n     432      247     679054 OpenRA.Mods.Common.Scripting.ScriptTriggers:TickIdle (OpenRA.Actor)\r\n     460      247    1178966 System.Array:InternalArray__IEnumerable_GetEnumerator<T> ()\r\n     920      248     407026 System.Linq.Enumerable/<CreateWhereIterator>c__Iterator1E`1<System.Collections.Generic.KeyValuePair`2<OpenRA.ActorInfo, OpenRA.Mods.Common.Traits.ProductionState>>:MoveNext ()\r\n     949      248     461414 OpenRA.Platforms.Default.Sdl2GraphicsDevice:SetBlendMode (OpenRA.BlendMode)\r\n     251      251    6427289 char:ToUpperInvariant (char)\r\n     784      252    2092184 System.Collections.Generic.List`1:Add (T)\r\n    2446      253     296784 OpenRA.Mods.Common.ShroudExts:AnyExplored (OpenRA.Traits.Shroud,System.Collections.Generic.IEnumerable`1<OpenRA.Primitives.Pair`2<OpenRA.CPos, OpenRA.Traits.SubCell>>)\r\n     254      254    4494929 string:Equals (string,string)\r\n     256      256    5664410 OpenRA.CellLayer`1<int16>:Index (OpenRA.MPos)\r\n    3370      256          9 OpenRA.Mods.Common.Traits.MovementClassDomainIndex:BuildDomains (OpenRA.World)\r\n    7095      257    2442866 (wrapper delegate-invoke) System.Action`1<OpenRA.TraitPair`1<OpenRA.Traits.ITick>>:invoke_void__this___T (OpenRA.TraitPair`1<OpenRA.Traits.ITick>)\r\n    8543      259     230707 OpenRA.Platforms.Default.Shader:Render (System.Action)\r\n     260      260    5064606 OpenRA.Widgets.Widget:<Widget>m__0 ()\r\n     354      260    1971750 Mono.Globalization.Unicode.MSCompatUnicodeTable:IsIgnorable (int,byte)\r\n    2628      261     584808 OpenRA.FileSystem.PackageEntry:HashFilename (string,OpenRA.FileSystem.PackageHashType)\r\n     493      261     816317 System.Drawing.Color:GetHashCode ()\r\n    2283      264     741525 System.Linq.Enumerable/<CreateWhereIterator>c__Iterator1E`1<OpenRA.CPos>:MoveNext ()\r\n     267      267    4949524 System.Array/InternalEnumerator`1<OpenRA.Primitives.Pair`2<OpenRA.ISync, System.Func`2<object, int>>>:MoveNext ()\r\n     919      273    1145746 OpenRA.Traits.Shroud:IsExplored (OpenRA.PPos)\r\n     279      279    4353634 System.Array:InternalArray__get_Item<OpenRA.Primitives.Pair`2<OpenRA.ISync, System.Func`2<object, int>>> (int)\r\n     406      280    2826126 string:op_Equality (string,string)\r\n    1222      284     427352 OpenRA.Platforms.Default.VertexBuffer`1<OpenRA.Graphics.Vertex>:Bind ()\r\n    1060      291    3281578 System.Drawing.Color:FromArgb (int)\r\n     293      293     264604 (wrapper managed-to-native) object:wrapper_native_0x7fa0c4eb9d80 (uint)\r\n     434      296    3331201 System.Drawing.Color:get_B ()\r\n     418      298    2311176 object:GetHashCode ()\r\n    1612      300    2837987 System.Collections.Generic.HashSet`1:GetItemHashCode (T)\r\n     300      300    4055871 (wrapper managed-to-native) object:wrapper_native_0x7fa0c4eb56d0 ()\r\n     614      301    3448182 System.Collections.Generic.InternalStringComparer:Equals (string,string)\r\n   10628      302     137822 System.Linq.Enumerable:ToArray<TSource> (System.Collections.Generic.IEnumerable`1<TSource>)\r\n     302      302    7019924 OpenRA.PPos:op_Equality (OpenRA.PPos,OpenRA.PPos)\r\n    9120      302    1866224 OpenRA.Graphics.SpriteRenderer:SetRenderStateForSprite (OpenRA.Graphics.Sprite)\r\n     437      303    3331201 System.Drawing.Color:get_G ()\r\n     306      306    6014814 OpenRA.PPos:op_Explicit (OpenRA.PPos)\r\n     879      306    3365842 Mono.Globalization.Unicode.SimpleCollator:Category (int)\r\n     310      310    4134876 (wrapper managed-to-native) object:__icall_wrapper_mono_object_isinst (object,intptr)\r\n     479      311    1946450 OpenRA.CellLayer`1<bool>:Index (OpenRA.CPos)\r\n     314      314     989602 (wrapper managed-to-native) System.MonoType:get_Name (System.MonoType)\r\n   13889      322       3105 OpenRA.World:Tick ()\r\n  178529      325     605146 OpenRA.Widgets.Widget:DrawOuter ()\r\n     508      327    3245974 string:CharCopy (char*,char*,int)\r\n    1085      334    1213227 System.Collections.Generic.RBTree/NodeEnumerator:MoveNext ()\r\n     467      334    3331267 System.Drawing.Color:get_R ()\r\n     335      335      20354 (wrapper managed-to-native) System.IO.MonoIO:Write (intptr,byte[],int,int,System.IO.MonoIOError&)\r\n    1417      340    2730246 OpenRA.Graphics.Animation:Tick ()\r\n     341      341          5 (wrapper managed-to-native) System.GC:InternalCollect (int)\r\n     479      347    2517706 System.Type:Equals (object)\r\n     908      359    1362413 System.Linq.Enumerable/<CreateSelectIterator>c__Iterator10`2<OpenRA.CVec, OpenRA.CPos>:MoveNext ()\r\n    6210      360     467224 System.Linq.Enumerable:Any<TSource> (System.Collections.Generic.IEnumerable`1<TSource>,System.Func`2<TSource, bool>)\r\n     654      362     584808 string:ToUpperInvariant ()\r\n    8457      364    3487633 OpenRA.Widgets.Widget:get_EventBounds ()\r\n     951      365    3555510 System.Drawing.Rectangle:Union (System.Drawing.Rectangle,System.Drawing.Rectangle)\r\n     475      370    2345603 OpenRA.CellLayer`1<bool>:Contains (OpenRA.MPos)\r\n    1325      372       1484 ICSharpCode.SharpZipLib.Zip.Compression.Inflater:DecodeHuffman ()\r\n     372      372    6978130 System.Collections.Generic.List`1/Enumerator:.ctor (System.Collections.Generic.List`1<T>)\r\n     781      380    1675799 OpenRA.Platforms.Default.ThreadAffine:VerifyThreadAffinity ()\r\n   26391      386    1580126 System.Linq.Enumerable/<CreateConcatIterator>c__Iterator1`1:MoveNext ()\r\n     387      387    5591232 string:GetHashCode ()\r\n    4019      391     606641 OpenRA.Widgets.Widget:PrepareRenderablesOuter ()\r\n     636      407    2566889 ICSharpCode.SharpZipLib.Zip.Compression.InflaterHuffmanTree:GetSymbol (ICSharpCode.SharpZipLib.Zip.Compression.Streams.StreamManipulator)\r\n     573      413    3365842 Mono.Globalization.Unicode.MSCompatUnicodeTable:Category (int)\r\n     704      414    5279771 (wrapper alloc) object:Alloc (intptr)\r\n    6837      421    2442866 OpenRA.World:<Tick>m__3 (OpenRA.TraitPair`1<OpenRA.Traits.ITick>)\r\n    4083      424         11 OpenRA.Graphics.Util:FastCopyIntoSprite (OpenRA.Graphics.Sprite,System.Drawing.Bitmap)\r\n    2072      428     786150 System.Collections.Generic.HashSet`1<OpenRA.PPos>:SlotsContainsAt (int,int,OpenRA.PPos)\r\n     432      432   10943873 System.IO.FileStream:get_CanRead ()\r\n    8860      432       6758 OpenRA.Mods.Common.Traits.SmudgeLayer:TickRender (OpenRA.Graphics.WorldRenderer,OpenRA.Actor)\r\n    1631      436     215568 System.Linq.Enumerable:First<TSource> (System.Collections.Generic.IEnumerable`1<TSource>,System.Func`2<TSource, bool>,System.Linq.Enumerable/Fallback)\r\n    9385      436     362528 System.Linq.Enumerable/<CreateSelectManyIterator>c__Iterator12`2:MoveNext ()\r\n    3204      439    5107510 System.IO.FileStream:ReadInternal (byte[],int,int)\r\n     441      441    8924070 OpenRA.World:get_RenderPlayer ()\r\n    1215      446    4070640 System.Collections.Generic.EqualityComparer`1/DefaultComparer:Equals (T,T)\r\n    3030      450    5032496 OpenRA.Primitives.SegmentStream:Read (byte[],int,int)\r\n     595      450    3134114 System.Type:GetHashCode ()\r\n     451      451    9011104 System.Drawing.Rectangle:.ctor (int,int,int,int)\r\n   16166      461    1392498 System.Linq.Enumerable/<CreateSelectIterator>c__Iterator10`2:MoveNext ()\r\n    6769      466     985825 System.Linq.Enumerable/<CreateWhereIterator>c__Iterator1E`1:MoveNext ()\r\n    1986      476     411631 OpenRA.Primitives.SpatiallyPartitioned`1/<InBox>c__Iterator1:MoveNext ()\r\n    1941      489    4353634 (wrapper delegate-invoke) System.Func`2<OpenRA.Primitives.Pair`2<OpenRA.ISync, System.Func`2<object, int>>, OpenRA.Actor/SyncHash>:invoke_TResult__this___T (OpenRA.Primitives.Pair`2<OpenRA.ISync, System.Func`2<object, int>>)\r\n     492      492   10310450 Mono.Globalization.Unicode.CodePointIndexer:ToIndex (int)\r\n     495      495    9823046 OpenRA.Mods.Common.FileFormats.AudReader:DecodeSample (byte,int&,int&)\r\n     719      507    4338881 System.Drawing.Rectangle:FromLTRB (int,int,int,int)\r\n     762      509    5134799 System.IO.FileStream:ReadSegment (byte[],int,int)\r\n     792      512    4353634 System.Array/InternalEnumerator`1<OpenRA.Primitives.Pair`2<OpenRA.ISync, System.Func`2<object, int>>>:get_Current ()\r\n     514      514    6367689 (wrapper managed-to-native) System.Buffer:BlockCopyInternal (System.Array,int,System.Array,int,int)\r\n     519      519   10539309 OpenRA.CPos:ToMPos (OpenRA.MapGridType)\r\n     682      528    3230470 System.Collections.Generic.Dictionary`2/Enumerator<OpenRA.CPos, OpenRA.Mods.Common.Traits.SmudgeLayer/Smudge>:MoveNext ()\r\n    4352      535       1035 OpenRA.World:SyncHash ()\r\n    1070      538    2730219 OpenRA.Graphics.Animation:Tick (int)\r\n    2388      542     982454 OpenRA.Network.SyncReport:DumpSyncTrait (OpenRA.ISync)\r\n     775      543    4623039 OpenRA.TraitDictionary/TraitContainer`1/AllEnumerator:MoveNext ()\r\n     844      544    4055871 OpenRA.Platforms.Default.OpenGL:CheckGLError ()\r\n    1361      551    5892755 System.Drawing.Color:FromArgb (int,int,int,int)\r\n    9220      552       3009 OpenRA.WorldUtils:DoTimed<OpenRA.TraitPair`1<OpenRA.Traits.ITick>> (System.Collections.Generic.IEnumerable`1<OpenRA.TraitPair`1<OpenRA.Traits.ITick>>,System.Action`1<OpenRA.TraitPair`1<OpenRA.Traits.ITick>>,string)\r\n     771      553    4620025 (wrapper stelemref) object:virt_stelemref_class (intptr,object)\r\n    2338      554     212240 OpenRA.Graphics.RgbaColorRenderer:DrawLine (OpenRA.float3,OpenRA.float3,single,System.Drawing.Color)\r\n    2790      555         14 OpenRA.FileFormats.XccGlobalDatabase:.ctor (System.IO.Stream)\r\n     801      561    4907642 OpenRA.CellLayer`1:Index (OpenRA.MPos)\r\n     567      567   10803503 System.Collections.Generic.List`1:get_Count ()\r\n     809      575    5892755 System.Drawing.Color:CheckARGBValues (int,int,int,int)\r\n     813      575    4698491 OpenRA.CellLayer`1:Contains (OpenRA.MPos)\r\n   14486      596    1866224 OpenRA.Graphics.SpriteRenderer:DrawSprite (OpenRA.Graphics.Sprite,OpenRA.float3,single,OpenRA.float3)\r\n     868      596    5835692 System.IO.FileStream:ReadByte ()\r\n     861      598    2742858 System.Collections.Generic.Dictionary`2/Enumerator:MoveNext ()\r\n    1643      599    7019924 System.Collections.Generic.GenericEqualityComparer`1<OpenRA.PPos>:Equals (OpenRA.PPos,OpenRA.PPos)\r\n     829      603    4940235 System.Drawing.Color:ToArgb ()\r\n    8198      605    3933064 OpenRA.Traits.Shroud:IsVisible (OpenRA.CPos)\r\n    1403      628    4716111 OpenRA.CellLayer`1:get_Item (OpenRA.MPos)\r\n    8403      629    3584165 OpenRA.Widgets.Widget:get_RenderBounds ()\r\n     900      632    4867136 OpenRA.float3:op_Addition (OpenRA.float3,OpenRA.float3)\r\n     928      653    4871763 OpenRA.float3:op_Implicit (OpenRA.float2)\r\n    2472      654    6041518 System.Collections.Generic.EqualityComparer`1/DefaultComparer:GetHashCode (T)\r\n    1452      657    4353634 OpenRA.Actor:<Actor>m__1 (OpenRA.Primitives.Pair`2<OpenRA.ISync, System.Func`2<object, int>>)\r\n    1699      661   12223785 (wrapper alloc) object:AllocVector (intptr,intptr)\r\n     915      673    5319673 OpenRA.CellLayer`1<int16>:get_Item (OpenRA.MPos)\r\n    4386      675    2077628 OpenRA.Graphics.Util:FastCreateQuad (OpenRA.Graphics.Vertex[],OpenRA.float3,OpenRA.Graphics.Sprite,single,int,OpenRA.float3)\r\n    6674      675       1035 OpenRA.Network.SyncReport:GenerateSyncReport (OpenRA.Network.SyncReport/Report)\r\n    2428      703     762619 OpenRA.Mods.Common.Traits.Render.RenderSprites:Tick (OpenRA.Actor)\r\n    1056      723    6440746 OpenRA.CPos:ToMPos (OpenRA.Map)\r\n    2907      738    4601038 OpenRA.Map:ProjectedCellsCovering (OpenRA.MPos)\r\n    1043      740    7019924 OpenRA.PPos:Equals (OpenRA.PPos)\r\n    4160      749    5107510 System.IO.FileStream:Read (byte[],int,int)\r\n    2770      751    3145647 OpenRA.Graphics.Util:PremultiplyAlpha (System.Drawing.Color)\r\n    1115      761    5029093 System.Collections.Generic.InternalStringComparer:GetHashCode (string)\r\n    1388      772     804491 OpenRA.TraitDictionary/TraitContainer`1/<Actors>c__Iterator0:MoveNext ()\r\n    1137      787    8151927 System.Drawing.Color:get_A ()\r\n    3912      791    4918410 System.IO.Stream:ReadByte ()\r\n     799      799       7960 (wrapper managed-to-native) object:wrapper_native_0x7fa0c4eb4bf0 (int)\r\n    5497      800         37 OpenRA.Mods.Common.FileFormats.AudReader:LoadSound (System.IO.Stream,byte[]&,int&)\r\n    9348      826    3916030 OpenRA.World:FogObscures (OpenRA.CPos)\r\n     837      837   14110752 OpenRA.Graphics.Vertex:.ctor (single,single,single,single,single,single,single,single,single)\r\n    1663      868   12561203 (wrapper alloc) object:AllocSmall (intptr)\r\n     892      892   18068977 System.Drawing.Rectangle:Contains (int,int)\r\n     894      894     196623 (wrapper managed-to-native) object:wrapper_native_0x7fa0c4eb9870 (int,intptr,intptr,intptr)\r\n    1297      925    6978130 System.Collections.Generic.List`1:GetEnumerator ()\r\n    5522      956   10777104 OpenRA.StreamExts:ReadUInt8 (System.IO.Stream)\r\n    1374      966    8264022 OpenRA.CellLayer`1<int16>:Contains (OpenRA.MPos)\r\n    6933      992    3933064 OpenRA.Traits.Shroud:IsVisible (OpenRA.MPos)\r\n    4118      993     801996 Mono.Globalization.Unicode.SimpleCollator:CompareInternal (string,int,int,string,int,int,bool&,bool&,bool,bool,Mono.Globalization.Unicode.SimpleCollator/Context&)\r\n    1014     1014   16821000 System.Collections.Generic.List`1:get_Item (int)\r\n    2883     1022    4169817 System.Collections.Generic.Dictionary`2:TryGetValue (TKey,TValue&)\r\n    1037     1037     197052 (wrapper managed-to-native) object:__icall_wrapper_mono_gc_alloc_vector (intptr,intptr,intptr)\r\n    1073     1073   24742371 System.Drawing.Color:get_Value ()\r\n    3378     1076    2077628 OpenRA.Graphics.Util:FastCreateQuad (OpenRA.Graphics.Vertex[],OpenRA.float3,OpenRA.float3,OpenRA.float3,OpenRA.float3,OpenRA.Graphics.Sprite,single,int)\r\n    1077     1077    1185939 (wrapper managed-to-native) System.Array:ClearInternal (System.Array,int,int)\r\n    1085     1085     236646 (wrapper managed-to-native) object:__icall_wrapper_mono_gc_alloc_obj (intptr,intptr)\r\n    1889     1095    4496727 OpenRA.TraitDictionary/TraitContainer`1/AllEnumerator:get_Current ()\r\n    1160     1160      15008 (wrapper managed-to-native) object:wrapper_native_0x7fa0c4eb4830 (int,int,int,int,int,int,int,int,intptr)\r\n    3038     1161    4330958 OpenRA.Traits.Shroud:IsVisible (OpenRA.PPos)\r\n    1181     1181   19936436 System.Collections.Generic.List`1/Enumerator:MoveNext ()\r\n    1219     1219   22294512 OpenRA.float3:.ctor (single,single,single)\r\n    4450     1265    4949524 System.Linq.Enumerable/<CreateSelectIterator>c__Iterator10`2<OpenRA.Primitives.Pair`2<OpenRA.ISync, System.Func`2<object, int>>, OpenRA.Actor/SyncHash>:MoveNext ()\r\n    1456     1415     933940 string:IndexOfOrdinalUnchecked (string,int,int)\r\n    1436     1436   28086032 OpenRA.int2:op_Addition (OpenRA.int2,OpenRA.int2)\r\n    1666     1666       7960 (wrapper managed-to-native) SDL2.SDL:SDL_GL_SwapWindow (intptr)\r\n    2599     1761   14110752 OpenRA.Graphics.Vertex:.ctor (OpenRA.float3,single,single,single,single,single,single)\r\n   63217     1792    3621292 OpenRA.Widgets.Widget:GetEventBounds ()\r\n    2036     2036      36651 (wrapper managed-to-native) System.IO.MonoIO:Read (intptr,byte[],int,int,System.IO.MonoIOError&)\r\n   25971     2173   22467228 OpenRA.Widgets.Widget:get_ChildOrigin ()\r\n    4348     4348     230707 (wrapper managed-to-native) object:wrapper_native_0x7fa0c4eb6000 (int,int,int)\r\n   33645     4425   26939267 OpenRA.Widgets.Widget:get_RenderOrigin ()\r\n   26571    26571       3660 (wrapper managed-to-native) System.Threading.Thread:Sleep_internal (int)\r\n  134506   134506       1087 (wrapper managed-to-native) System.Net.Sockets.Socket:Select_internal (System.Net.Sockets.Socket[]&,int,int&)\r\n  134829   134829       1255 (wrapper managed-to-native) System.Net.Sockets.Socket:Receive_internal (intptr,byte[],int,int,System.Net.Sockets.SocketFlags,int&)\r\n  189150   189150      12741 (wrapper managed-to-native) System.Threading.WaitHandle:WaitOne_internal (System.Threading.WaitHandle,intptr,int,bool)\r\n\r\n\r\n \r\n</pre>\r\n\r\n\r\nOnly in this lasrt report you can see the number of calls and self time - like during the first time. I assume in this case it is not sampled but a total. Sampling probably causes less overhead. \r\n\r\nYou can see (very) roughly similar times as before 4+ seconds on i.e. GetRendeOrigin. It could be the overhead of the profiling however independent of the times these methods seem to be the slowest and best candidates for optimization.\r\n\r\nI guess you can't add attachments to comment in github.\r\n\r\n\r\n\r\n\r\n\r\n"
  },
  {
    "url": "https://api.github.com/repos/OpenRA/OpenRA/issues/comments/268863719",
    "html_url": "https://github.com/OpenRA/OpenRA/issues/12490#issuecomment-268863719",
    "issue_url": "https://api.github.com/repos/OpenRA/OpenRA/issues/12490",
    "id": 268863719,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2ODg2MzcxOQ==",
    "user": {
      "login": "RoosterDragon",
      "id": 3399086,
      "node_id": "MDQ6VXNlcjMzOTkwODY=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/3399086?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/RoosterDragon",
      "html_url": "https://github.com/RoosterDragon",
      "followers_url": "https://api.github.com/users/RoosterDragon/followers",
      "following_url": "https://api.github.com/users/RoosterDragon/following{/other_user}",
      "gists_url": "https://api.github.com/users/RoosterDragon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/RoosterDragon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/RoosterDragon/subscriptions",
      "organizations_url": "https://api.github.com/users/RoosterDragon/orgs",
      "repos_url": "https://api.github.com/users/RoosterDragon/repos",
      "events_url": "https://api.github.com/users/RoosterDragon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/RoosterDragon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-12-22T18:44:26Z",
    "updated_at": "2016-12-22T18:44:26Z",
    "author_association": "MEMBER",
    "body": "Here's the top 30 on my system:\r\n![image](https://cloud.githubusercontent.com/assets/3399086/21436006/638014ec-c874-11e6-9df8-4cf97a4ff91b.png)\r\n\r\nRenderOrigin is much lower on my list - but the Exclusive Samples % of 0.71% is not too far from your result of 1.30%. I suspect a lot of the other changes are due to inlining choices. `DrawLine` appears to have inlined several calls on my trace so it ends up being charged a lot more overall, for example.\r\n\r\nI'm also still a little sceptical since [the documentation](http://www.mono-project.com/docs/advanced/performance-tips/#using-the-mono-profiler) carries the following warnings:\r\n\r\n> Two warnings must be given about the method data.\r\nFirst, the profiler has an overhead associated with it. As such, a high number of calls to a method may show up as consuming lots of time, when in reality they do not consume much time at all. If you see a method that has a very high number of calls, you may be able to ignore it. However, do consider removing calls if possible, as that will sometimes help performance. This problem is often seen with the use of built in collection types.\r\nSecondly, due to the nature of the profiler, recursive calls have extremely large times (because the profiler double counts when the method calls itself). One easy way to see this problem is that if a method is shown as taking more time than the Main method, it is very likely recursive, and causing this problem.\r\n\r\n(On the other hand, I wouldn't be surprised if my profiler suffers similarly)\r\n\r\nAll that said, something like a LayoutChanged event per @pchote's could prove worthwhile since in theory that could basically remove the 1-2% time cost in calculating positions.\r\n\r\nAs @chrisforbes says, a couple of percent isn't huge - but it does all add up."
  }
]
