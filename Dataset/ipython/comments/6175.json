[
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/49567866",
    "html_url": "https://github.com/ipython/ipython/issues/6175#issuecomment-49567866",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/6175",
    "id": 49567866,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5NTY3ODY2",
    "user": {
      "login": "Krastanov",
      "id": 705248,
      "node_id": "MDQ6VXNlcjcwNTI0OA==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/705248?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Krastanov",
      "html_url": "https://github.com/Krastanov",
      "followers_url": "https://api.github.com/users/Krastanov/followers",
      "following_url": "https://api.github.com/users/Krastanov/following{/other_user}",
      "gists_url": "https://api.github.com/users/Krastanov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Krastanov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Krastanov/subscriptions",
      "organizations_url": "https://api.github.com/users/Krastanov/orgs",
      "repos_url": "https://api.github.com/users/Krastanov/repos",
      "events_url": "https://api.github.com/users/Krastanov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Krastanov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-07-21T02:30:00Z",
    "updated_at": "2014-07-21T02:30:00Z",
    "author_association": "NONE",
    "body": "What makes it stranger is that just commenting the sum out makes it work again:\n\n```\n@dview.remote(block=True)\ndef this_works():\n    import numpy as np\n    a = np.random.random([2,2])\n    # a = np.sum(a) # XXX Commented out\n    return a\n```\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/49570249",
    "html_url": "https://github.com/ipython/ipython/issues/6175#issuecomment-49570249",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/6175",
    "id": 49570249,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5NTcwMjQ5",
    "user": {
      "login": "Krastanov",
      "id": 705248,
      "node_id": "MDQ6VXNlcjcwNTI0OA==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/705248?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Krastanov",
      "html_url": "https://github.com/Krastanov",
      "followers_url": "https://api.github.com/users/Krastanov/followers",
      "following_url": "https://api.github.com/users/Krastanov/following{/other_user}",
      "gists_url": "https://api.github.com/users/Krastanov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Krastanov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Krastanov/subscriptions",
      "organizations_url": "https://api.github.com/users/Krastanov/orgs",
      "repos_url": "https://api.github.com/users/Krastanov/repos",
      "events_url": "https://api.github.com/users/Krastanov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Krastanov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-07-21T03:54:37Z",
    "updated_at": "2014-07-21T03:54:37Z",
    "author_association": "NONE",
    "body": "Updated results:\n\nThis works on 2.7, 3.3 and 3.4:\n\n```\n@dview.remote(block=True)\ndef this_works():\n    import numpy as np\n    return np.sin([2,2])\n```\n\nThis works on 2.7 and 3.3 but it does NOT work on 3.4\n\n```\n@dview.remote(block=True)\ndef this_does_NOT_work():\n    import numpy as np\n    return np.sum([2,2])\n```\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/49642356",
    "html_url": "https://github.com/ipython/ipython/issues/6175#issuecomment-49642356",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/6175",
    "id": 49642356,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5NjQyMzU2",
    "user": {
      "login": "minrk",
      "id": 151929,
      "node_id": "MDQ6VXNlcjE1MTkyOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/151929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minrk",
      "html_url": "https://github.com/minrk",
      "followers_url": "https://api.github.com/users/minrk/followers",
      "following_url": "https://api.github.com/users/minrk/following{/other_user}",
      "gists_url": "https://api.github.com/users/minrk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minrk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minrk/subscriptions",
      "organizations_url": "https://api.github.com/users/minrk/orgs",
      "repos_url": "https://api.github.com/users/minrk/repos",
      "events_url": "https://api.github.com/users/minrk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minrk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-07-21T18:05:26Z",
    "updated_at": "2014-07-21T18:05:26Z",
    "author_association": "MEMBER",
    "body": "This code succeeds on my Python 3.4 (OS X 10.9.4, Python 3.4.1, IPython master, numpy 1.8.1). My first guess is that there's something different about your client and engines. Are they running the same Python version and/or do they import the same numpy version?\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/49674623",
    "html_url": "https://github.com/ipython/ipython/issues/6175#issuecomment-49674623",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/6175",
    "id": 49674623,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5Njc0NjIz",
    "user": {
      "login": "Krastanov",
      "id": 705248,
      "node_id": "MDQ6VXNlcjcwNTI0OA==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/705248?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Krastanov",
      "html_url": "https://github.com/Krastanov",
      "followers_url": "https://api.github.com/users/Krastanov/followers",
      "following_url": "https://api.github.com/users/Krastanov/following{/other_user}",
      "gists_url": "https://api.github.com/users/Krastanov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Krastanov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Krastanov/subscriptions",
      "organizations_url": "https://api.github.com/users/Krastanov/orgs",
      "repos_url": "https://api.github.com/users/Krastanov/repos",
      "events_url": "https://api.github.com/users/Krastanov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Krastanov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-07-21T22:25:06Z",
    "updated_at": "2014-07-21T22:25:06Z",
    "author_association": "NONE",
    "body": "It will take me some time to verify, but they should be running the same python/numpy/ipython. I will report with more information.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/49695534",
    "html_url": "https://github.com/ipython/ipython/issues/6175#issuecomment-49695534",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/6175",
    "id": 49695534,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5Njk1NTM0",
    "user": {
      "login": "Krastanov",
      "id": 705248,
      "node_id": "MDQ6VXNlcjcwNTI0OA==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/705248?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Krastanov",
      "html_url": "https://github.com/Krastanov",
      "followers_url": "https://api.github.com/users/Krastanov/followers",
      "following_url": "https://api.github.com/users/Krastanov/following{/other_user}",
      "gists_url": "https://api.github.com/users/Krastanov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Krastanov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Krastanov/subscriptions",
      "organizations_url": "https://api.github.com/users/Krastanov/orgs",
      "repos_url": "https://api.github.com/users/Krastanov/repos",
      "events_url": "https://api.github.com/users/Krastanov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Krastanov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-07-22T03:55:33Z",
    "updated_at": "2014-07-22T03:56:01Z",
    "author_association": "NONE",
    "body": "## Update\n\nIt does not seem to be version mismatch between nodes:\n\nThe issue is not present on 3.3, only on 3.4. The configuration for IPython and `pip freeze` are the same between the two virtenvironments. The same git version of IPython is used.\n\n### Setup\n\n```\nfrom IPython.parallel import Client\nc = Client(profile='lsf')\ndview = c[:]\ndview.use_dill()\n```\n\n### Check versions\n\n```\n%%px --local\nimport numpy\nimport IPython\nimport sys\nprint( (sys.version, numpy.__version__, IPython.__version__) )\n```\n\nresult (same on the local and on the cluster nodes):\n\n```\n('3.4.1 (default, Jul 18 2014, 16:51:36) \\n[GCC 4.4.7 20120313 (Red Hat 4.4.7-3)]', '1.8.1', '3.0.0-dev')\n```\n\n### This works fine\n\n```\n%%px --local\nimport numpy as np\nprint(np.sum([2]))\n```\n\n### The same thing wrapped in a function fails\n\nFails on 3.4, works on 3.3:\n\n```\n@dview.remote(block=True)\ndef remote():\n    import numpy as np\n    return np.sum([2])\nremote()\n```\n\nresult:\n\n```\n...\n...\n...\n/gpfs/home/fas/jiang/sk943/python_lab/lib/python3.4/site-packages/dill/dill.py in save_type(pickler, obj)\n    814        #print (\"%s\\n%s\" % (type(obj), obj.__name__))\n    815        #print (\"%s\\n%s\" % (obj.__bases__, obj.__dict__))\n--> 816         StockPickler.save_global(pickler, obj)\n    817     return\n    818 \n/home/fas/jiang/sk943/.local/lib/python3.4/pickle.py in save_global(self, obj, name)\n    911             raise PicklingError(\n    912                 \"Can't pickle %r: it's not found as %s.%s\" %\n--> 913                 (obj, module_name, name))\n    914         else:\n    915             if obj2 is not obj:\nPicklingError: Can't pickle <class 'PyCapsule'>: it's not found as builtins.PyCapsule\n```\n\nIt is unhappy about something called `<class 'PyCapsule'>`\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/49696626",
    "html_url": "https://github.com/ipython/ipython/issues/6175#issuecomment-49696626",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/6175",
    "id": 49696626,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5Njk2NjI2",
    "user": {
      "login": "Krastanov",
      "id": 705248,
      "node_id": "MDQ6VXNlcjcwNTI0OA==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/705248?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Krastanov",
      "html_url": "https://github.com/Krastanov",
      "followers_url": "https://api.github.com/users/Krastanov/followers",
      "following_url": "https://api.github.com/users/Krastanov/following{/other_user}",
      "gists_url": "https://api.github.com/users/Krastanov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Krastanov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Krastanov/subscriptions",
      "organizations_url": "https://api.github.com/users/Krastanov/orgs",
      "repos_url": "https://api.github.com/users/Krastanov/repos",
      "events_url": "https://api.github.com/users/Krastanov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Krastanov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-07-22T04:20:51Z",
    "updated_at": "2014-07-22T04:20:51Z",
    "author_association": "NONE",
    "body": "## The problem is in the virtenvironment executable\n\nWhen I compiled 3.4 I used the bundled `pyvenv3.4` to create a virtual environment. In this virtual environment I got the error described above.\n\nFor 2.7 and 3.3 and for another 3.4 virtual environment I downloaded `virtualenv-1.11.6` and used it. In these virtual environments the problem was not present.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/69629249",
    "html_url": "https://github.com/ipython/ipython/issues/6175#issuecomment-69629249",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/6175",
    "id": 69629249,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5NjI5MjQ5",
    "user": {
      "login": "ellisonbg",
      "id": 27600,
      "node_id": "MDQ6VXNlcjI3NjAw",
      "avatar_url": "https://avatars3.githubusercontent.com/u/27600?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ellisonbg",
      "html_url": "https://github.com/ellisonbg",
      "followers_url": "https://api.github.com/users/ellisonbg/followers",
      "following_url": "https://api.github.com/users/ellisonbg/following{/other_user}",
      "gists_url": "https://api.github.com/users/ellisonbg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ellisonbg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ellisonbg/subscriptions",
      "organizations_url": "https://api.github.com/users/ellisonbg/orgs",
      "repos_url": "https://api.github.com/users/ellisonbg/repos",
      "events_url": "https://api.github.com/users/ellisonbg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ellisonbg/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-01-12T19:26:31Z",
    "updated_at": "2015-01-12T19:26:31Z",
    "author_association": "MEMBER",
    "body": "@Krastanov did you ever resolve this. It is most likely an issue with installation and/or your virtualenv setup.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/76392362",
    "html_url": "https://github.com/ipython/ipython/issues/6175#issuecomment-76392362",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/6175",
    "id": 76392362,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc2MzkyMzYy",
    "user": {
      "login": "mfitzp",
      "id": 126239,
      "node_id": "MDQ6VXNlcjEyNjIzOQ==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/126239?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mfitzp",
      "html_url": "https://github.com/mfitzp",
      "followers_url": "https://api.github.com/users/mfitzp/followers",
      "following_url": "https://api.github.com/users/mfitzp/following{/other_user}",
      "gists_url": "https://api.github.com/users/mfitzp/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mfitzp/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mfitzp/subscriptions",
      "organizations_url": "https://api.github.com/users/mfitzp/orgs",
      "repos_url": "https://api.github.com/users/mfitzp/repos",
      "events_url": "https://api.github.com/users/mfitzp/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mfitzp/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-02-27T13:14:41Z",
    "updated_at": "2015-02-27T13:50:31Z",
    "author_association": "NONE",
    "body": "I'm experiencing the same issue with `python3.4` and `IPython 3.0.0-dev` (pulled from Github and `pip install` just now) without using `virtualenv`. \n\n```\nPicklingError: Can't pickle <class 'numpy.int64'>: it's not the same object as numpy.int64\n```\n\nAnd intermittently (seemingly at random) an alternate error...\n\n```\nPicklingError: Can't pickle <class 'numpy.flagsobj'>: it's not found as numpy.flagsobj\n```\n\nFull system:\n\n```\nPython 3.4.3 (default, Feb 25 2015, 21:28:45) \n[GCC 4.2.1 Compatible Apple LLVM 6.0 (clang-600.0.56)] on darwin\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> import IPython\n>>> IPython.__version__\n'3.0.0-dev'\n```\n\nThe same code works without error on `python2.7.9`. Strangely, if I `import numpy` on the cluster then the error goes away, to be replaced by the following:\n\n```\nPicklingError: Can't pickle <class 'PyCapsule'>: it's not found as builtins.PyCapsule\n```\n\nAs far as I can see `PyCapsule` is not in `builtins` module at all. This is starting to look like a `pickle` (or `dill` ) bug rather than IPython - if it in fact a bug and not a misconfiguration! Would be great to have a suggested fix.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/76421064",
    "html_url": "https://github.com/ipython/ipython/issues/6175#issuecomment-76421064",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/6175",
    "id": 76421064,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc2NDIxMDY0",
    "user": {
      "login": "minrk",
      "id": 151929,
      "node_id": "MDQ6VXNlcjE1MTkyOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/151929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minrk",
      "html_url": "https://github.com/minrk",
      "followers_url": "https://api.github.com/users/minrk/followers",
      "following_url": "https://api.github.com/users/minrk/following{/other_user}",
      "gists_url": "https://api.github.com/users/minrk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minrk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minrk/subscriptions",
      "organizations_url": "https://api.github.com/users/minrk/orgs",
      "repos_url": "https://api.github.com/users/minrk/repos",
      "events_url": "https://api.github.com/users/minrk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minrk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-02-27T16:17:41Z",
    "updated_at": "2015-02-27T16:17:41Z",
    "author_association": "MEMBER",
    "body": "Are the client and engines running on the same system? If not, what are `sys.version` and `numpy.__version__` on each?\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/105071614",
    "html_url": "https://github.com/ipython/ipython/issues/6175#issuecomment-105071614",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/6175",
    "id": 105071614,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwNTA3MTYxNA==",
    "user": {
      "login": "mmckerns",
      "id": 321534,
      "node_id": "MDQ6VXNlcjMyMTUzNA==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/321534?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mmckerns",
      "html_url": "https://github.com/mmckerns",
      "followers_url": "https://api.github.com/users/mmckerns/followers",
      "following_url": "https://api.github.com/users/mmckerns/following{/other_user}",
      "gists_url": "https://api.github.com/users/mmckerns/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mmckerns/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mmckerns/subscriptions",
      "organizations_url": "https://api.github.com/users/mmckerns/orgs",
      "repos_url": "https://api.github.com/users/mmckerns/repos",
      "events_url": "https://api.github.com/users/mmckerns/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mmckerns/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-05-24T22:20:09Z",
    "updated_at": "2015-05-24T22:20:29Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hi guys, we are seeing this too (https://github.com/uqfoundation/dill/issues/93), but it looks like you have more info than we do at the moment.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/258311029",
    "html_url": "https://github.com/ipython/ipython/issues/6175#issuecomment-258311029",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/6175",
    "id": 258311029,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1ODMxMTAyOQ==",
    "user": {
      "login": "ivanov",
      "id": 118211,
      "node_id": "MDQ6VXNlcjExODIxMQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/118211?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ivanov",
      "html_url": "https://github.com/ivanov",
      "followers_url": "https://api.github.com/users/ivanov/followers",
      "following_url": "https://api.github.com/users/ivanov/following{/other_user}",
      "gists_url": "https://api.github.com/users/ivanov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ivanov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ivanov/subscriptions",
      "organizations_url": "https://api.github.com/users/ivanov/orgs",
      "repos_url": "https://api.github.com/users/ivanov/repos",
      "events_url": "https://api.github.com/users/ivanov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ivanov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-11-04T00:07:30Z",
    "updated_at": "2016-11-04T00:07:30Z",
    "author_association": "MEMBER",
    "body": "Hey there, I'm going through old issues and it seems to me that it makes sense to close this one. The original report is a couple of years old at this point, but the dill gang did track it down and resolved it on their end: https://github.com/uqfoundation/dill/pull/92 and https://github.com/uqfoundation/dill/pull/99 so hopefully that resolves the original issue reported by @Krastanov. \n\nThanks everyone, and happy hacking! :bowtie:\n"
  }
]
