[
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/10212566",
    "html_url": "https://github.com/ipython/ipython/pull/2561#issuecomment-10212566",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/2561",
    "id": 10212566,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwMjEyNTY2",
    "user": {
      "login": "ghost",
      "id": 10137,
      "node_id": "MDQ6VXNlcjEwMTM3",
      "avatar_url": "https://avatars3.githubusercontent.com/u/10137?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ghost",
      "html_url": "https://github.com/ghost",
      "followers_url": "https://api.github.com/users/ghost/followers",
      "following_url": "https://api.github.com/users/ghost/following{/other_user}",
      "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
      "organizations_url": "https://api.github.com/users/ghost/orgs",
      "repos_url": "https://api.github.com/users/ghost/repos",
      "events_url": "https://api.github.com/users/ghost/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ghost/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-11-09T01:30:53Z",
    "updated_at": "2012-11-09T03:01:16Z",
    "author_association": "NONE",
    "body": "I've just been experimenting with this, and came up with some confusing results. After staring at that regex for about twenty minutes, I concluded that it'd only take an extra carriage return.\n\n`/^.*\\r(?!\\n)/gm` becomes `/^.*\\r\\r(?!\\n)/gm`\n\nWhilst this fixed the adb output, it didn't work well when I tested it, so I ran the same test in the unmodified Notebook, and got confusing output there too.\n\nThis is from the modified version...\n\n```\nIn [1]:\n--------------------------------------\n%%file test.py\nprint 'Unix \\n'\nprint 'Mac \\r'\nprint 'Windows \\r\\n'\nprint 'Google \\r\\r\\n'\n--------------------------------------\nOverwriting test.py\n--------------------------------------\n\n```\n\n```\nIn [2]:\n--------------------------------------\nrun test\n--------------------------------------\nUnix \n\nMac \nWindows \n\nGoogle\n\n--------------------------------------\n```\n\n```\nIn [3]:\n--------------------------------------\n!python test.py\n--------------------------------------\nUnix \n\nMac \n\nWindows \n\n\n\n--------------------------------------\n```\n\nI then repeated this in the unmodified Notebook...\n\n```\nIn [1]:\n--------------------------------------\n%%file test.py\nprint 'Unix \\n'\nprint 'Mac \\r'\nprint 'Windows \\r\\n'\nprint 'Google \\r\\r\\n'\n--------------------------------------\nOverwriting test.py\n--------------------------------------\n```\n\n```\nIn [2]:\n--------------------------------------\nrun test\n--------------------------------------\nUnix \n\nMac \nWindows \n\n\n--------------------------------------\n```\n\n```\nIn [3]:\n--------------------------------------\n!python test.py\n--------------------------------------\nUnix\n\n\n\n\n\n--------------------------------------\n```\n\nMaybe I'm totally missing something, but that seems all wrong to me. Whilst neither work, the modified version does seem to work under normal use, when it doesn't have to deal with crazy line endings.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/10235396",
    "html_url": "https://github.com/ipython/ipython/pull/2561#issuecomment-10235396",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/2561",
    "id": 10235396,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwMjM1Mzk2",
    "user": {
      "login": "takluyver",
      "id": 327925,
      "node_id": "MDQ6VXNlcjMyNzkyNQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/327925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/takluyver",
      "html_url": "https://github.com/takluyver",
      "followers_url": "https://api.github.com/users/takluyver/followers",
      "following_url": "https://api.github.com/users/takluyver/following{/other_user}",
      "gists_url": "https://api.github.com/users/takluyver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/takluyver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/takluyver/subscriptions",
      "organizations_url": "https://api.github.com/users/takluyver/orgs",
      "repos_url": "https://api.github.com/users/takluyver/repos",
      "events_url": "https://api.github.com/users/takluyver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/takluyver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-11-09T16:32:37Z",
    "updated_at": "2012-11-09T16:34:13Z",
    "author_association": "MEMBER",
    "body": "Don't forget Python appends your system newline (presumably `\\n` for both of us) after print statements. Put a comma at the end to suppress that: `print 'Mac \\r',`. This works as I'd expect for me - try Ctrl-F5 to clear your browser cache?\n\nRunning commands using `!` also seems to turn `\\n` into `\\r\\n` - I think this is something pexpect is doing. My changes do account for that.\n\nHere's what I see from your test script, both with %run and !python, on this branch:\n\n```\nUnix \n\nMac \nWindows \n\nGoogle \n\n```\n\nBecause the print statement appends `\\n` to each, they all get an extra newline, except the Mac `\\r`, line which gets turned into a Windows line ending, `\\r\\n`. If I put commas after each print, I see:\n\n```\nUnix \nWindows \nGoogle \n```\n\nAgain, that's what I'd expect - the Mac line gets killed by the lone `\\r`.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/10235653",
    "html_url": "https://github.com/ipython/ipython/pull/2561#issuecomment-10235653",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/2561",
    "id": 10235653,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwMjM1NjUz",
    "user": {
      "login": "takluyver",
      "id": 327925,
      "node_id": "MDQ6VXNlcjMyNzkyNQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/327925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/takluyver",
      "html_url": "https://github.com/takluyver",
      "followers_url": "https://api.github.com/users/takluyver/followers",
      "following_url": "https://api.github.com/users/takluyver/following{/other_user}",
      "gists_url": "https://api.github.com/users/takluyver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/takluyver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/takluyver/subscriptions",
      "organizations_url": "https://api.github.com/users/takluyver/orgs",
      "repos_url": "https://api.github.com/users/takluyver/repos",
      "events_url": "https://api.github.com/users/takluyver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/takluyver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-11-09T16:39:21Z",
    "updated_at": "2012-11-09T16:39:21Z",
    "author_association": "MEMBER",
    "body": "Oh, hang on, you were talking about your modified version. That would go wrong. Dissecting your regex: `/^.*\\r\\r(?!\\n)/gm`:\n- Start of line `^`\n- Any text `.*`\n- Two consecutive carriage returns `\\r\\r`\n- Not followed by a newline `(?!\\n)`\n\nMy change (which I was testing), splits it into two regexes:\n- `/\\r+\\n/gm` - any number of carriage returns, followed by a newline (becomes a newline)\n- `/^.*\\r+/gm` - start of line, any text, any number of carriage returns (line blanked)\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/10235749",
    "html_url": "https://github.com/ipython/ipython/pull/2561#issuecomment-10235749",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/2561",
    "id": 10235749,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwMjM1NzQ5",
    "user": {
      "login": "takluyver",
      "id": 327925,
      "node_id": "MDQ6VXNlcjMyNzkyNQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/327925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/takluyver",
      "html_url": "https://github.com/takluyver",
      "followers_url": "https://api.github.com/users/takluyver/followers",
      "following_url": "https://api.github.com/users/takluyver/following{/other_user}",
      "gists_url": "https://api.github.com/users/takluyver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/takluyver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/takluyver/subscriptions",
      "organizations_url": "https://api.github.com/users/takluyver/orgs",
      "repos_url": "https://api.github.com/users/takluyver/repos",
      "events_url": "https://api.github.com/users/takluyver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/takluyver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-11-09T16:42:00Z",
    "updated_at": "2012-11-09T16:42:00Z",
    "author_association": "MEMBER",
    "body": "(And I must withdraw my earlier criticism of adb - presumably it just hardcodes Windows line endings, and then it's pexpect which is transforming `\\n` into `\\r\\n`, so `\\r\\n` becomes `\\r\\r\\n`. It's a combination of two minor oddities, rather than one major one)\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/10252476",
    "html_url": "https://github.com/ipython/ipython/pull/2561#issuecomment-10252476",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/2561",
    "id": 10252476,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwMjUyNDc2",
    "user": {
      "login": "ghost",
      "id": 10137,
      "node_id": "MDQ6VXNlcjEwMTM3",
      "avatar_url": "https://avatars3.githubusercontent.com/u/10137?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ghost",
      "html_url": "https://github.com/ghost",
      "followers_url": "https://api.github.com/users/ghost/followers",
      "following_url": "https://api.github.com/users/ghost/following{/other_user}",
      "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
      "organizations_url": "https://api.github.com/users/ghost/orgs",
      "repos_url": "https://api.github.com/users/ghost/repos",
      "events_url": "https://api.github.com/users/ghost/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ghost/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-11-10T06:33:40Z",
    "updated_at": "2012-11-10T06:33:40Z",
    "author_association": "NONE",
    "body": "Thanks for killing this one Thomas. I never learnt regular expressions, so I appreciate you sorting this. Nice one.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/10260848",
    "html_url": "https://github.com/ipython/ipython/pull/2561#issuecomment-10260848",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/2561",
    "id": 10260848,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwMjYwODQ4",
    "user": {
      "login": "takluyver",
      "id": 327925,
      "node_id": "MDQ6VXNlcjMyNzkyNQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/327925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/takluyver",
      "html_url": "https://github.com/takluyver",
      "followers_url": "https://api.github.com/users/takluyver/followers",
      "following_url": "https://api.github.com/users/takluyver/following{/other_user}",
      "gists_url": "https://api.github.com/users/takluyver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/takluyver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/takluyver/subscriptions",
      "organizations_url": "https://api.github.com/users/takluyver/orgs",
      "repos_url": "https://api.github.com/users/takluyver/repos",
      "events_url": "https://api.github.com/users/takluyver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/takluyver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-11-10T22:41:45Z",
    "updated_at": "2012-11-10T22:41:45Z",
    "author_association": "MEMBER",
    "body": "@Carreau @ellisonbg - As I don't often do notebook stuff, I'd like someone who does to give this a once over before I merge it. It's a 2-line change, so it should be quick. Thanks!\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/10264579",
    "html_url": "https://github.com/ipython/ipython/pull/2561#issuecomment-10264579",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/2561",
    "id": 10264579,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwMjY0NTc5",
    "user": {
      "login": "Carreau",
      "id": 335567,
      "node_id": "MDQ6VXNlcjMzNTU2Nw==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/335567?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Carreau",
      "html_url": "https://github.com/Carreau",
      "followers_url": "https://api.github.com/users/Carreau/followers",
      "following_url": "https://api.github.com/users/Carreau/following{/other_user}",
      "gists_url": "https://api.github.com/users/Carreau/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Carreau/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Carreau/subscriptions",
      "organizations_url": "https://api.github.com/users/Carreau/orgs",
      "repos_url": "https://api.github.com/users/Carreau/repos",
      "events_url": "https://api.github.com/users/Carreau/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Carreau/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-11-11T09:15:10Z",
    "updated_at": "2012-11-11T09:15:10Z",
    "author_association": "MEMBER",
    "body": "haven't tried, but I don't see any reason not to merge it if it helps on android.\n"
  }
]
