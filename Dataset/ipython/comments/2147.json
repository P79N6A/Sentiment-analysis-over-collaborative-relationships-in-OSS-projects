[
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/7037786",
    "html_url": "https://github.com/ipython/ipython/pull/2147#issuecomment-7037786",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/2147",
    "id": 7037786,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMzc3ODY=",
    "user": {
      "login": "takluyver",
      "id": 327925,
      "node_id": "MDQ6VXNlcjMyNzkyNQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/327925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/takluyver",
      "html_url": "https://github.com/takluyver",
      "followers_url": "https://api.github.com/users/takluyver/followers",
      "following_url": "https://api.github.com/users/takluyver/following{/other_user}",
      "gists_url": "https://api.github.com/users/takluyver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/takluyver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/takluyver/subscriptions",
      "organizations_url": "https://api.github.com/users/takluyver/orgs",
      "repos_url": "https://api.github.com/users/takluyver/repos",
      "events_url": "https://api.github.com/users/takluyver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/takluyver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-07-17T15:01:53Z",
    "updated_at": "2012-07-17T15:01:53Z",
    "author_association": "MEMBER",
    "body": "In fact, rather than calling Cython in a subprocess, surely we can call Cython in-process with the same options to produce annotated HTML?\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/7038544",
    "html_url": "https://github.com/ipython/ipython/pull/2147#issuecomment-7038544",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/2147",
    "id": 7038544,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMzg1NDQ=",
    "user": {
      "login": "dhirschfeld",
      "id": 881019,
      "node_id": "MDQ6VXNlcjg4MTAxOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/881019?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dhirschfeld",
      "html_url": "https://github.com/dhirschfeld",
      "followers_url": "https://api.github.com/users/dhirschfeld/followers",
      "following_url": "https://api.github.com/users/dhirschfeld/following{/other_user}",
      "gists_url": "https://api.github.com/users/dhirschfeld/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dhirschfeld/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dhirschfeld/subscriptions",
      "organizations_url": "https://api.github.com/users/dhirschfeld/orgs",
      "repos_url": "https://api.github.com/users/dhirschfeld/repos",
      "events_url": "https://api.github.com/users/dhirschfeld/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dhirschfeld/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-07-17T15:23:53Z",
    "updated_at": "2012-07-17T15:23:53Z",
    "author_association": "CONTRIBUTOR",
    "body": "Indeed, it does appear that the cythonize command could automatically annotate the source by passing `annotate = True` as an option. However the cythonize command is only conditionally run and if I run it after the sources have been cythonized and the modules imported I get a LinkError due to a permission error on the .pyd. I suspect this is something to do with the fact that you've imported the .pyd so you're holding a reference to it and can't overwrite it.\n\nI assume that the `cython -a` subprocess command works because it doesn't create a new .pyd and try and import it. AFAICS that means that the `if force or not os.path.isfile(module_path):` conditional would need an `elif annotate` which did the same as the `cython -a` in the case that the sources had been previously built but not annotated. \n\nThe equivalent of `cython -a` could probably be done programmatically but I'm afraid my cython/distutils skills aren't good enough to implement that so I cheated and used subprocess. It seems that might not be portable though.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/7038937",
    "html_url": "https://github.com/ipython/ipython/pull/2147#issuecomment-7038937",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/2147",
    "id": 7038937,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMzg5Mzc=",
    "user": {
      "login": "takluyver",
      "id": 327925,
      "node_id": "MDQ6VXNlcjMyNzkyNQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/327925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/takluyver",
      "html_url": "https://github.com/takluyver",
      "followers_url": "https://api.github.com/users/takluyver/followers",
      "following_url": "https://api.github.com/users/takluyver/following{/other_user}",
      "gists_url": "https://api.github.com/users/takluyver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/takluyver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/takluyver/subscriptions",
      "organizations_url": "https://api.github.com/users/takluyver/orgs",
      "repos_url": "https://api.github.com/users/takluyver/repos",
      "events_url": "https://api.github.com/users/takluyver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/takluyver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-07-17T15:34:57Z",
    "updated_at": "2012-07-17T15:34:57Z",
    "author_association": "MEMBER",
    "body": "I think it's probably better & more reliable to sort out the problems with using Cython within the process, rather than doing it in a subprocess. It's probably possible to use a subprocess if it's the only way, but it's not very elegant. I'm not very familiar with Cython, though, so I don't know what's the best way.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/7129648",
    "html_url": "https://github.com/ipython/ipython/pull/2147#issuecomment-7129648",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/2147",
    "id": 7129648,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxMjk2NDg=",
    "user": {
      "login": "fperez",
      "id": 57394,
      "node_id": "MDQ6VXNlcjU3Mzk0",
      "avatar_url": "https://avatars1.githubusercontent.com/u/57394?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fperez",
      "html_url": "https://github.com/fperez",
      "followers_url": "https://api.github.com/users/fperez/followers",
      "following_url": "https://api.github.com/users/fperez/following{/other_user}",
      "gists_url": "https://api.github.com/users/fperez/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fperez/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fperez/subscriptions",
      "organizations_url": "https://api.github.com/users/fperez/orgs",
      "repos_url": "https://api.github.com/users/fperez/repos",
      "events_url": "https://api.github.com/users/fperez/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fperez/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-07-20T13:08:17Z",
    "updated_at": "2012-07-20T13:08:17Z",
    "author_association": "MEMBER",
    "body": "Yes, adding subprocess management here is unnecessary brittleness (and slowdown) that we need to avoid.  I suggest pitching up a question on the cython mailing list, they are typically a very friendly bunch and I'm sure they could suggest a fix for this in no time flat.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/7129800",
    "html_url": "https://github.com/ipython/ipython/pull/2147#issuecomment-7129800",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/2147",
    "id": 7129800,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxMjk4MDA=",
    "user": {
      "login": "dhirschfeld",
      "id": 881019,
      "node_id": "MDQ6VXNlcjg4MTAxOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/881019?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dhirschfeld",
      "html_url": "https://github.com/dhirschfeld",
      "followers_url": "https://api.github.com/users/dhirschfeld/followers",
      "following_url": "https://api.github.com/users/dhirschfeld/following{/other_user}",
      "gists_url": "https://api.github.com/users/dhirschfeld/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dhirschfeld/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dhirschfeld/subscriptions",
      "organizations_url": "https://api.github.com/users/dhirschfeld/orgs",
      "repos_url": "https://api.github.com/users/dhirschfeld/repos",
      "events_url": "https://api.github.com/users/dhirschfeld/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dhirschfeld/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-07-20T13:14:50Z",
    "updated_at": "2012-07-20T13:14:50Z",
    "author_association": "CONTRIBUTOR",
    "body": "I'll try to find the time to sharpen up my cython skills and fix up the PR...\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/7129859",
    "html_url": "https://github.com/ipython/ipython/pull/2147#issuecomment-7129859",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/2147",
    "id": 7129859,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxMjk4NTk=",
    "user": {
      "login": "fperez",
      "id": 57394,
      "node_id": "MDQ6VXNlcjU3Mzk0",
      "avatar_url": "https://avatars1.githubusercontent.com/u/57394?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fperez",
      "html_url": "https://github.com/fperez",
      "followers_url": "https://api.github.com/users/fperez/followers",
      "following_url": "https://api.github.com/users/fperez/following{/other_user}",
      "gists_url": "https://api.github.com/users/fperez/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fperez/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fperez/subscriptions",
      "organizations_url": "https://api.github.com/users/fperez/orgs",
      "repos_url": "https://api.github.com/users/fperez/repos",
      "events_url": "https://api.github.com/users/fperez/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fperez/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-07-20T13:17:22Z",
    "updated_at": "2012-07-20T13:17:22Z",
    "author_association": "MEMBER",
    "body": "Great, thanks!\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/7275886",
    "html_url": "https://github.com/ipython/ipython/pull/2147#issuecomment-7275886",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/2147",
    "id": 7275886,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyNzU4ODY=",
    "user": {
      "login": "dhirschfeld",
      "id": 881019,
      "node_id": "MDQ6VXNlcjg4MTAxOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/881019?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dhirschfeld",
      "html_url": "https://github.com/dhirschfeld",
      "followers_url": "https://api.github.com/users/dhirschfeld/followers",
      "following_url": "https://api.github.com/users/dhirschfeld/following{/other_user}",
      "gists_url": "https://api.github.com/users/dhirschfeld/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dhirschfeld/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dhirschfeld/subscriptions",
      "organizations_url": "https://api.github.com/users/dhirschfeld/orgs",
      "repos_url": "https://api.github.com/users/dhirschfeld/repos",
      "events_url": "https://api.github.com/users/dhirschfeld/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dhirschfeld/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-07-26T12:15:29Z",
    "updated_at": "2012-07-26T12:15:29Z",
    "author_association": "CONTRIBUTOR",
    "body": "Think I might be a bit closer here...\n\nThe issue with being unable to overwrite the .pdb file was present in master and can be reproduced by running a `%%cython` cell then re-running it immediately with the `--force` option.\n\nI got around this by tweaking the filename in the case that the .pyd existed and `--force=True`. It's perhaps a bit of a hack, but it does seem to work for me.\n\nWith the removal of the subprocess part hopefully there are no win32-isms remaining.\n\nI also added a link-args argument as it appears to use the `cython.parallel` features you need to pass `-fopenmp` to the linker.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/7432877",
    "html_url": "https://github.com/ipython/ipython/pull/2147#issuecomment-7432877",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/2147",
    "id": 7432877,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0MzI4Nzc=",
    "user": {
      "login": "bfroehle",
      "id": 204333,
      "node_id": "MDQ6VXNlcjIwNDMzMw==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/204333?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bfroehle",
      "html_url": "https://github.com/bfroehle",
      "followers_url": "https://api.github.com/users/bfroehle/followers",
      "following_url": "https://api.github.com/users/bfroehle/following{/other_user}",
      "gists_url": "https://api.github.com/users/bfroehle/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bfroehle/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bfroehle/subscriptions",
      "organizations_url": "https://api.github.com/users/bfroehle/orgs",
      "repos_url": "https://api.github.com/users/bfroehle/repos",
      "events_url": "https://api.github.com/users/bfroehle/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bfroehle/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-08-01T16:54:33Z",
    "updated_at": "2012-08-01T16:54:33Z",
    "author_association": "CONTRIBUTOR",
    "body": "@dhirschfeld Can you test #2225?\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/7530134",
    "html_url": "https://github.com/ipython/ipython/pull/2147#issuecomment-7530134",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/2147",
    "id": 7530134,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1MzAxMzQ=",
    "user": {
      "login": "bfroehle",
      "id": 204333,
      "node_id": "MDQ6VXNlcjIwNDMzMw==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/204333?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bfroehle",
      "html_url": "https://github.com/bfroehle",
      "followers_url": "https://api.github.com/users/bfroehle/followers",
      "following_url": "https://api.github.com/users/bfroehle/following{/other_user}",
      "gists_url": "https://api.github.com/users/bfroehle/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bfroehle/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bfroehle/subscriptions",
      "organizations_url": "https://api.github.com/users/bfroehle/orgs",
      "repos_url": "https://api.github.com/users/bfroehle/repos",
      "events_url": "https://api.github.com/users/bfroehle/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bfroehle/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-08-06T17:42:50Z",
    "updated_at": "2012-08-06T17:42:50Z",
    "author_association": "CONTRIBUTOR",
    "body": "Closing this as it has been superseded by #2225.\n"
  }
]
