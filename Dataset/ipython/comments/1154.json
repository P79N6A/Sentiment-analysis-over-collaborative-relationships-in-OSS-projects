[
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/3146114",
    "html_url": "https://github.com/ipython/ipython/issues/1154#issuecomment-3146114",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/1154",
    "id": 3146114,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxNDYxMTQ=",
    "user": {
      "login": "minrk",
      "id": 151929,
      "node_id": "MDQ6VXNlcjE1MTkyOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/151929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minrk",
      "html_url": "https://github.com/minrk",
      "followers_url": "https://api.github.com/users/minrk/followers",
      "following_url": "https://api.github.com/users/minrk/following{/other_user}",
      "gists_url": "https://api.github.com/users/minrk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minrk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minrk/subscriptions",
      "organizations_url": "https://api.github.com/users/minrk/orgs",
      "repos_url": "https://api.github.com/users/minrk/repos",
      "events_url": "https://api.github.com/users/minrk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minrk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2011-12-14T18:47:27Z",
    "updated_at": "2011-12-14T18:47:27Z",
    "author_association": "MEMBER",
    "body": "I think that's fine to do, though I would actually consider it a bug that we allow user errors to raise an exception in our callback.  It seems to me that post-execute functions should be extremely safe, given their relatively low-level position.  Especially ones that we write ourselves.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/3147595",
    "html_url": "https://github.com/ipython/ipython/issues/1154#issuecomment-3147595",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/1154",
    "id": 3147595,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxNDc1OTU=",
    "user": {
      "login": "fperez",
      "id": 57394,
      "node_id": "MDQ6VXNlcjU3Mzk0",
      "avatar_url": "https://avatars1.githubusercontent.com/u/57394?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fperez",
      "html_url": "https://github.com/fperez",
      "followers_url": "https://api.github.com/users/fperez/followers",
      "following_url": "https://api.github.com/users/fperez/following{/other_user}",
      "gists_url": "https://api.github.com/users/fperez/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fperez/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fperez/subscriptions",
      "organizations_url": "https://api.github.com/users/fperez/orgs",
      "repos_url": "https://api.github.com/users/fperez/repos",
      "events_url": "https://api.github.com/users/fperez/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fperez/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2011-12-14T19:45:39Z",
    "updated_at": "2011-12-14T19:45:39Z",
    "author_association": "MEMBER",
    "body": "Well, but in the example above, it's not really our callback that causes an error, the traceback comes from matplotlib itself.  You can see it by typing the same thing in a plain `ipython --pylab` session.  And if we masked all exceptions in our callback, it would make it much harder for users to sort out by themselves situations like this one: in this example, the mpl traceback is actually pretty informative:\n\n```\n...\n  File \"/home/fperez/usr/opt/lib/python2.7/site-packages/matplotlib/text.py\", line 985, in is_math_text\n    if cbook.is_math_text(s):\n  File \"/home/fperez/usr/opt/lib/python2.7/site-packages/matplotlib/cbook.py\", line 1868, in is_math_text\n    \"matplotlib display text must have all code points < 128 or use Unicode strings\")\nValueError: matplotlib display text must have all code points < 128 or use Unicode strings\n```\n\nand seeing that would immediately tell a user what's going on.  That's why I think we should actually let exceptions of this kind bubble through, and just make it very easy/obvious for the user to disable a callback if it's really a buggy one.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/3148008",
    "html_url": "https://github.com/ipython/ipython/issues/1154#issuecomment-3148008",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/1154",
    "id": 3148008,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxNDgwMDg=",
    "user": {
      "login": "minrk",
      "id": 151929,
      "node_id": "MDQ6VXNlcjE1MTkyOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/151929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minrk",
      "html_url": "https://github.com/minrk",
      "followers_url": "https://api.github.com/users/minrk/followers",
      "following_url": "https://api.github.com/users/minrk/following{/other_user}",
      "gists_url": "https://api.github.com/users/minrk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minrk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minrk/subscriptions",
      "organizations_url": "https://api.github.com/users/minrk/orgs",
      "repos_url": "https://api.github.com/users/minrk/repos",
      "events_url": "https://api.github.com/users/minrk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minrk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2011-12-14T19:58:04Z",
    "updated_at": "2011-12-14T19:58:04Z",
    "author_association": "MEMBER",
    "body": "It's not that our callback caused an error, it's that our callback allowed a _user_ error to raise in itself, rather than calling showtraceback().  In general, IPython does not allow user errors to raise in IPython calls, but here we are allowing exactly that.\n\nI still think your idea is a sensible one.\n\nLooking at the error output, I am reminded that we should put messages about side effects _after_ tracebacks, not before.  The end of a traceback is much more visible in interactive use than the beginning.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/3148032",
    "html_url": "https://github.com/ipython/ipython/issues/1154#issuecomment-3148032",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/1154",
    "id": 3148032,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxNDgwMzI=",
    "user": {
      "login": "fperez",
      "id": 57394,
      "node_id": "MDQ6VXNlcjU3Mzk0",
      "avatar_url": "https://avatars1.githubusercontent.com/u/57394?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fperez",
      "html_url": "https://github.com/fperez",
      "followers_url": "https://api.github.com/users/fperez/followers",
      "following_url": "https://api.github.com/users/fperez/following{/other_user}",
      "gists_url": "https://api.github.com/users/fperez/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fperez/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fperez/subscriptions",
      "organizations_url": "https://api.github.com/users/fperez/orgs",
      "repos_url": "https://api.github.com/users/fperez/repos",
      "events_url": "https://api.github.com/users/fperez/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fperez/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2011-12-14T19:59:37Z",
    "updated_at": "2011-12-14T19:59:37Z",
    "author_association": "MEMBER",
    "body": "Ah yes, I misunderstood your original message then.  We could certainly wrap those calls with a `try/except showtraceback()`.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/3148256",
    "html_url": "https://github.com/ipython/ipython/issues/1154#issuecomment-3148256",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/1154",
    "id": 3148256,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxNDgyNTY=",
    "user": {
      "login": "fperez",
      "id": 57394,
      "node_id": "MDQ6VXNlcjU3Mzk0",
      "avatar_url": "https://avatars1.githubusercontent.com/u/57394?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fperez",
      "html_url": "https://github.com/fperez",
      "followers_url": "https://api.github.com/users/fperez/followers",
      "following_url": "https://api.github.com/users/fperez/following{/other_user}",
      "gists_url": "https://api.github.com/users/fperez/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fperez/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fperez/subscriptions",
      "organizations_url": "https://api.github.com/users/fperez/orgs",
      "repos_url": "https://api.github.com/users/fperez/repos",
      "events_url": "https://api.github.com/users/fperez/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fperez/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2011-12-14T20:14:32Z",
    "updated_at": "2011-12-14T20:14:32Z",
    "author_association": "MEMBER",
    "body": "BTW, if you want to take a crack at this one, go for it; I have to clean up some materials for the p4s lecture this afternoon.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/3150080",
    "html_url": "https://github.com/ipython/ipython/issues/1154#issuecomment-3150080",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/1154",
    "id": 3150080,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxNTAwODA=",
    "user": {
      "login": "minrk",
      "id": 151929,
      "node_id": "MDQ6VXNlcjE1MTkyOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/151929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minrk",
      "html_url": "https://github.com/minrk",
      "followers_url": "https://api.github.com/users/minrk/followers",
      "following_url": "https://api.github.com/users/minrk/following{/other_user}",
      "gists_url": "https://api.github.com/users/minrk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minrk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minrk/subscriptions",
      "organizations_url": "https://api.github.com/users/minrk/orgs",
      "repos_url": "https://api.github.com/users/minrk/repos",
      "events_url": "https://api.github.com/users/minrk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minrk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2011-12-14T21:22:56Z",
    "updated_at": "2011-12-14T21:22:56Z",
    "author_association": "MEMBER",
    "body": "PR #1155 makes both changes - post-exec functions are not unregistered on first failure, and user-errors do not raise in `flush_figures()`, instead calling `showtraceback()`.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/3150207",
    "html_url": "https://github.com/ipython/ipython/issues/1154#issuecomment-3150207",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/1154",
    "id": 3150207,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxNTAyMDc=",
    "user": {
      "login": "fperez",
      "id": 57394,
      "node_id": "MDQ6VXNlcjU3Mzk0",
      "avatar_url": "https://avatars1.githubusercontent.com/u/57394?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fperez",
      "html_url": "https://github.com/fperez",
      "followers_url": "https://api.github.com/users/fperez/followers",
      "following_url": "https://api.github.com/users/fperez/following{/other_user}",
      "gists_url": "https://api.github.com/users/fperez/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fperez/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fperez/subscriptions",
      "organizations_url": "https://api.github.com/users/fperez/orgs",
      "repos_url": "https://api.github.com/users/fperez/repos",
      "events_url": "https://api.github.com/users/fperez/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fperez/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2011-12-14T21:25:57Z",
    "updated_at": "2011-12-14T21:25:57Z",
    "author_association": "MEMBER",
    "body": "Great, thanks!  I'll review it in a bit...\n"
  }
]
