[
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/25182597",
    "html_url": "https://github.com/ipython/ipython/pull/4284#issuecomment-25182597",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/4284",
    "id": 25182597,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1MTgyNTk3",
    "user": {
      "login": "ellisonbg",
      "id": 27600,
      "node_id": "MDQ6VXNlcjI3NjAw",
      "avatar_url": "https://avatars3.githubusercontent.com/u/27600?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ellisonbg",
      "html_url": "https://github.com/ellisonbg",
      "followers_url": "https://api.github.com/users/ellisonbg/followers",
      "following_url": "https://api.github.com/users/ellisonbg/following{/other_user}",
      "gists_url": "https://api.github.com/users/ellisonbg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ellisonbg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ellisonbg/subscriptions",
      "organizations_url": "https://api.github.com/users/ellisonbg/orgs",
      "repos_url": "https://api.github.com/users/ellisonbg/repos",
      "events_url": "https://api.github.com/users/ellisonbg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ellisonbg/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-09-26T16:34:44Z",
    "updated_at": "2013-09-26T16:34:44Z",
    "author_association": "MEMBER",
    "body": "The fact that the `data-cite` key can be placed on arbitrary, nested HTML was not a small accident.  It was one of the most important parts of the design of this feature.  Without it, much of the usefulness of this approach goes away. Maybe let's try to fix the bugs rather than throw the baby out with the bathwater?\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/25200587",
    "html_url": "https://github.com/ipython/ipython/pull/4284#issuecomment-25200587",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/4284",
    "id": 25200587,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1MjAwNTg3",
    "user": {
      "login": "jakobgager",
      "id": 1677740,
      "node_id": "MDQ6VXNlcjE2Nzc3NDA=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/1677740?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakobgager",
      "html_url": "https://github.com/jakobgager",
      "followers_url": "https://api.github.com/users/jakobgager/followers",
      "following_url": "https://api.github.com/users/jakobgager/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakobgager/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakobgager/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakobgager/subscriptions",
      "organizations_url": "https://api.github.com/users/jakobgager/orgs",
      "repos_url": "https://api.github.com/users/jakobgager/repos",
      "events_url": "https://api.github.com/users/jakobgager/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakobgager/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-09-26T20:24:29Z",
    "updated_at": "2013-09-26T20:24:29Z",
    "author_association": "CONTRIBUTOR",
    "body": "I'm +1 on fixing the bugs and I'm totally fine with keeping the lxml approach if it features more than just find and replace.\n@ellisonbg Would you be please so kind and give me an example nested HTML which highlights the benefit of the lxml approach? Maybe something beyond the scope of a simple search and replace. I just want to understand what it is all about. Sorry if I bother you, but I start feeling silly as I just don't get it :confused: \n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/25202445",
    "html_url": "https://github.com/ipython/ipython/pull/4284#issuecomment-25202445",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/4284",
    "id": 25202445,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1MjAyNDQ1",
    "user": {
      "login": "ellisonbg",
      "id": 27600,
      "node_id": "MDQ6VXNlcjI3NjAw",
      "avatar_url": "https://avatars3.githubusercontent.com/u/27600?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ellisonbg",
      "html_url": "https://github.com/ellisonbg",
      "followers_url": "https://api.github.com/users/ellisonbg/followers",
      "following_url": "https://api.github.com/users/ellisonbg/following{/other_user}",
      "gists_url": "https://api.github.com/users/ellisonbg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ellisonbg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ellisonbg/subscriptions",
      "organizations_url": "https://api.github.com/users/ellisonbg/orgs",
      "repos_url": "https://api.github.com/users/ellisonbg/repos",
      "events_url": "https://api.github.com/users/ellisonbg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ellisonbg/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-09-26T20:47:47Z",
    "updated_at": "2013-09-26T20:47:47Z",
    "author_association": "MEMBER",
    "body": "I don't have a specific example, but the idea is that users could have the full capabilities of html to control how the citation appears in the live notebook.  For example, maybe it appears as bold text that has an onhover popup giving a link to the full citation at the bottom of the page.  Minimally, I can imagine people wanting to put bold or italics inside a tags that link to something.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/25206939",
    "html_url": "https://github.com/ipython/ipython/pull/4284#issuecomment-25206939",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/4284",
    "id": 25206939,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1MjA2OTM5",
    "user": {
      "login": "jakobgager",
      "id": 1677740,
      "node_id": "MDQ6VXNlcjE2Nzc3NDA=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/1677740?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakobgager",
      "html_url": "https://github.com/jakobgager",
      "followers_url": "https://api.github.com/users/jakobgager/followers",
      "following_url": "https://api.github.com/users/jakobgager/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakobgager/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakobgager/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakobgager/subscriptions",
      "organizations_url": "https://api.github.com/users/jakobgager/orgs",
      "repos_url": "https://api.github.com/users/jakobgager/repos",
      "events_url": "https://api.github.com/users/jakobgager/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakobgager/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-09-26T21:49:26Z",
    "updated_at": "2013-09-26T21:50:26Z",
    "author_association": "CONTRIBUTOR",
    "body": "You mean something like\n\n``` html\n<style>\n  div.text_cell_render cite {\n  font-size: 1.0em;\n  font-weight:bold;\n  text-decoration:underline;\n}\n</style>\n\nbegin <a href=www.ipython.org data-cite='ipython2012'><cite>(IPython, 2012)</cite></a> end\n```\n\nThis would be converted to `'begin \\\\cite{ipython2012} end'` with both approaches.\nA difference appears if the microdata is shifted inside:\n`begin <a href=www.ipython.org><cite data-cite='ipython2012'>(IPython, 2012)</cite></a> end`\nhere your approach keeps the `<a>` tags, whereas mine currently strips it and gives the same result as before (I would consider this as a bug - which is easy to fix).\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/25207030",
    "html_url": "https://github.com/ipython/ipython/pull/4284#issuecomment-25207030",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/4284",
    "id": 25207030,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1MjA3MDMw",
    "user": {
      "login": "ellisonbg",
      "id": 27600,
      "node_id": "MDQ6VXNlcjI3NjAw",
      "avatar_url": "https://avatars3.githubusercontent.com/u/27600?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ellisonbg",
      "html_url": "https://github.com/ellisonbg",
      "followers_url": "https://api.github.com/users/ellisonbg/followers",
      "following_url": "https://api.github.com/users/ellisonbg/following{/other_user}",
      "gists_url": "https://api.github.com/users/ellisonbg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ellisonbg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ellisonbg/subscriptions",
      "organizations_url": "https://api.github.com/users/ellisonbg/orgs",
      "repos_url": "https://api.github.com/users/ellisonbg/repos",
      "events_url": "https://api.github.com/users/ellisonbg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ellisonbg/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-09-26T21:50:54Z",
    "updated_at": "2013-09-26T21:50:54Z",
    "author_association": "MEMBER",
    "body": "Thanks for the clarification...but yours will fail if there are nested tags of the same type?\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/25208828",
    "html_url": "https://github.com/ipython/ipython/pull/4284#issuecomment-25208828",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/4284",
    "id": 25208828,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1MjA4ODI4",
    "user": {
      "login": "jakobgager",
      "id": 1677740,
      "node_id": "MDQ6VXNlcjE2Nzc3NDA=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/1677740?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakobgager",
      "html_url": "https://github.com/jakobgager",
      "followers_url": "https://api.github.com/users/jakobgager/followers",
      "following_url": "https://api.github.com/users/jakobgager/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakobgager/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakobgager/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakobgager/subscriptions",
      "organizations_url": "https://api.github.com/users/jakobgager/orgs",
      "repos_url": "https://api.github.com/users/jakobgager/repos",
      "events_url": "https://api.github.com/users/jakobgager/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakobgager/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-09-26T22:19:57Z",
    "updated_at": "2013-09-26T22:19:57Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hmm not directly the same type but a more complex version...\n\n``` html\n<table><tr><td><cite data-cite='citation'>data1</cite></td><td>data2</td></tr></table>\n```\n\ngives\n`<table><tr><td >\\\\cite{citation}</td><td>data2</td></tr></table>`\nwith both approaches (with the fixed version of mine)\n\nsame type tags:\n\n``` html\n<div align=\"center\"><div style=\"font-size:150%\"><div style=\"text-decoration:underline\" data-cite=\"foo\">Bar</div></div></div>'\n```\n\ngives the same result with both approaches\n`<div align=\"center\"><div style=\"font-size:150%\">\\\\cite{foo}</div></div>`\n\nFixed version replaces only the active tag:\n\n``` python\ndef cit2lat(s):\n   return re.sub(\"<(?P<tag>[a-z]+) [^>]*?data-cite=['\\\"]{0,1}(?P<label>[^['\\\" >]*).*?/(?P=tag)>\",\n              '\\\\cite{\\g<label>}',s)\n```\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/25209226",
    "html_url": "https://github.com/ipython/ipython/pull/4284#issuecomment-25209226",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/4284",
    "id": 25209226,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1MjA5MjI2",
    "user": {
      "login": "ellisonbg",
      "id": 27600,
      "node_id": "MDQ6VXNlcjI3NjAw",
      "avatar_url": "https://avatars3.githubusercontent.com/u/27600?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ellisonbg",
      "html_url": "https://github.com/ellisonbg",
      "followers_url": "https://api.github.com/users/ellisonbg/followers",
      "following_url": "https://api.github.com/users/ellisonbg/following{/other_user}",
      "gists_url": "https://api.github.com/users/ellisonbg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ellisonbg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ellisonbg/subscriptions",
      "organizations_url": "https://api.github.com/users/ellisonbg/orgs",
      "repos_url": "https://api.github.com/users/ellisonbg/repos",
      "events_url": "https://api.github.com/users/ellisonbg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ellisonbg/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-09-26T22:26:47Z",
    "updated_at": "2013-09-26T22:26:47Z",
    "author_association": "MEMBER",
    "body": "I am _not_ worried about situations where the `data-cite` attribute appears on an inner tag.  It should always appear at the root level of the markdown - IOW not nested in other HTML.  Otherwise there is not way it will end up as top-level valid LaTeX.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/25209795",
    "html_url": "https://github.com/ipython/ipython/pull/4284#issuecomment-25209795",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/4284",
    "id": 25209795,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1MjA5Nzk1",
    "user": {
      "login": "takluyver",
      "id": 327925,
      "node_id": "MDQ6VXNlcjMyNzkyNQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/327925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/takluyver",
      "html_url": "https://github.com/takluyver",
      "followers_url": "https://api.github.com/users/takluyver/followers",
      "following_url": "https://api.github.com/users/takluyver/following{/other_user}",
      "gists_url": "https://api.github.com/users/takluyver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/takluyver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/takluyver/subscriptions",
      "organizations_url": "https://api.github.com/users/takluyver/orgs",
      "repos_url": "https://api.github.com/users/takluyver/repos",
      "events_url": "https://api.github.com/users/takluyver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/takluyver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-09-26T22:37:09Z",
    "updated_at": "2013-09-26T22:37:09Z",
    "author_association": "MEMBER",
    "body": "What about if, for instance, you want to cite something in the caption of a\nfigure in an HTML div? I can well imagine situations where it would end up\nnot at the root of the markdown.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/25211075",
    "html_url": "https://github.com/ipython/ipython/pull/4284#issuecomment-25211075",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/4284",
    "id": 25211075,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1MjExMDc1",
    "user": {
      "login": "ellisonbg",
      "id": 27600,
      "node_id": "MDQ6VXNlcjI3NjAw",
      "avatar_url": "https://avatars3.githubusercontent.com/u/27600?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ellisonbg",
      "html_url": "https://github.com/ellisonbg",
      "followers_url": "https://api.github.com/users/ellisonbg/followers",
      "following_url": "https://api.github.com/users/ellisonbg/following{/other_user}",
      "gists_url": "https://api.github.com/users/ellisonbg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ellisonbg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ellisonbg/subscriptions",
      "organizations_url": "https://api.github.com/users/ellisonbg/orgs",
      "repos_url": "https://api.github.com/users/ellisonbg/repos",
      "events_url": "https://api.github.com/users/ellisonbg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ellisonbg/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-09-26T23:02:21Z",
    "updated_at": "2013-09-26T23:02:21Z",
    "author_association": "MEMBER",
    "body": "@takluyver if you put a citation tag inside an HTML div that has a image for example, none of that will make it to LaTeX - not the div, img, or citation. That is the stuff that pandoc doesn't handle.  If we could get pandoc to handle all of that then we could do the citation tag replacement inside the pandoc JSON data structure, but we aborted looking into that this morning.\n\nLiving with the current limitations of pandoc means that for a citation to actually show up in LaTeX it can't be nested inside other HTML.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/25310645",
    "html_url": "https://github.com/ipython/ipython/pull/4284#issuecomment-25310645",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/4284",
    "id": 25310645,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1MzEwNjQ1",
    "user": {
      "login": "jakobgager",
      "id": 1677740,
      "node_id": "MDQ6VXNlcjE2Nzc3NDA=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/1677740?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakobgager",
      "html_url": "https://github.com/jakobgager",
      "followers_url": "https://api.github.com/users/jakobgager/followers",
      "following_url": "https://api.github.com/users/jakobgager/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakobgager/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakobgager/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakobgager/subscriptions",
      "organizations_url": "https://api.github.com/users/jakobgager/orgs",
      "repos_url": "https://api.github.com/users/jakobgager/repos",
      "events_url": "https://api.github.com/users/jakobgager/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakobgager/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-09-28T23:07:27Z",
    "updated_at": "2013-09-28T23:07:27Z",
    "author_association": "CONTRIBUTOR",
    "body": "> but yours will fail if there are nested tags of the same type?\n\nYou are right!\n\n``` python\ns6='<div data-cite=\"foo\"><div>Bar</div></div>'\ncit2lat(s6)\n```\n\nyields\n`'\\\\cite{foo}</div>'`\n\nI'm currently working on a new approach.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/25366030",
    "html_url": "https://github.com/ipython/ipython/pull/4284#issuecomment-25366030",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/4284",
    "id": 25366030,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1MzY2MDMw",
    "user": {
      "login": "jakobgager",
      "id": 1677740,
      "node_id": "MDQ6VXNlcjE2Nzc3NDA=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/1677740?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakobgager",
      "html_url": "https://github.com/jakobgager",
      "followers_url": "https://api.github.com/users/jakobgager/followers",
      "following_url": "https://api.github.com/users/jakobgager/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakobgager/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakobgager/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakobgager/subscriptions",
      "organizations_url": "https://api.github.com/users/jakobgager/orgs",
      "repos_url": "https://api.github.com/users/jakobgager/repos",
      "events_url": "https://api.github.com/users/jakobgager/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakobgager/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-09-30T14:20:22Z",
    "updated_at": "2013-09-30T14:20:22Z",
    "author_association": "CONTRIBUTOR",
    "body": "Closing here, as the proposed approach does not work reliable!\n"
  }
]
