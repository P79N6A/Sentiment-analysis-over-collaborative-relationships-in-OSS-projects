[
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/311945724",
    "html_url": "https://github.com/ipython/ipython/issues/10680#issuecomment-311945724",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/10680",
    "id": 311945724,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxMTk0NTcyNA==",
    "user": {
      "login": "Carreau",
      "id": 335567,
      "node_id": "MDQ6VXNlcjMzNTU2Nw==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/335567?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Carreau",
      "html_url": "https://github.com/Carreau",
      "followers_url": "https://api.github.com/users/Carreau/followers",
      "following_url": "https://api.github.com/users/Carreau/following{/other_user}",
      "gists_url": "https://api.github.com/users/Carreau/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Carreau/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Carreau/subscriptions",
      "organizations_url": "https://api.github.com/users/Carreau/orgs",
      "repos_url": "https://api.github.com/users/Carreau/repos",
      "events_url": "https://api.github.com/users/Carreau/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Carreau/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-06-29T12:00:06Z",
    "updated_at": "2017-06-29T12:00:06Z",
    "author_association": "MEMBER",
    "body": "Thanks for the details report. We'll have to dig through it, but it might be a prompt_toolkit issue and  a fix might be needed upstream (if not already fixed on master)."
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/312619606",
    "html_url": "https://github.com/ipython/ipython/issues/10680#issuecomment-312619606",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/10680",
    "id": 312619606,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxMjYxOTYwNg==",
    "user": {
      "login": "takluyver",
      "id": 327925,
      "node_id": "MDQ6VXNlcjMyNzkyNQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/327925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/takluyver",
      "html_url": "https://github.com/takluyver",
      "followers_url": "https://api.github.com/users/takluyver/followers",
      "following_url": "https://api.github.com/users/takluyver/following{/other_user}",
      "gists_url": "https://api.github.com/users/takluyver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/takluyver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/takluyver/subscriptions",
      "organizations_url": "https://api.github.com/users/takluyver/orgs",
      "repos_url": "https://api.github.com/users/takluyver/repos",
      "events_url": "https://api.github.com/users/takluyver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/takluyver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-07-03T11:17:56Z",
    "updated_at": "2017-07-03T11:17:56Z",
    "author_association": "MEMBER",
    "body": "Ping @jonathanslenders - IIRC we just pass the specified editing mode through to prompt_toolkit."
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/312692081",
    "html_url": "https://github.com/ipython/ipython/issues/10680#issuecomment-312692081",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/10680",
    "id": 312692081,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxMjY5MjA4MQ==",
    "user": {
      "login": "jonathanslenders",
      "id": 216638,
      "node_id": "MDQ6VXNlcjIxNjYzOA==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/216638?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonathanslenders",
      "html_url": "https://github.com/jonathanslenders",
      "followers_url": "https://api.github.com/users/jonathanslenders/followers",
      "following_url": "https://api.github.com/users/jonathanslenders/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonathanslenders/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonathanslenders/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonathanslenders/subscriptions",
      "organizations_url": "https://api.github.com/users/jonathanslenders/orgs",
      "repos_url": "https://api.github.com/users/jonathanslenders/repos",
      "events_url": "https://api.github.com/users/jonathanslenders/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonathanslenders/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-07-03T16:47:24Z",
    "updated_at": "2017-07-03T16:47:24Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hi everyone, I noticed that IPython has ``history_search`` enabled. (https://github.com/ipython/ipython/blob/d2b29fbc83a01c9b9f6650c10c8549974ed1ea71/IPython/terminal/interactiveshell.py#L272)\r\n\r\nThis means that when you type something the history is filtered on this input string. Like the readline ``history-search-forward`` and ``history-search-backward`` commands.  Typing ``import<up>`` should go through the history to the last import statement.\r\n\r\nWhether or not you want to make this configurable is up to you. But I noticed that there was a bug in prompt_toolkit as well regarding this. It did consider all the input text when you started editing, rather than only the text before the cursor. https://github.com/jonathanslenders/python-prompt-toolkit/commit/2fe952a49ebd1bdf403631ca7a1ce43cd6fe8020\r\n\r\nCould you test again with the latest prompt_toolkit, master branch?\r\n\r\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/313972203",
    "html_url": "https://github.com/ipython/ipython/issues/10680#issuecomment-313972203",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/10680",
    "id": 313972203,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxMzk3MjIwMw==",
    "user": {
      "login": "yarko",
      "id": 36553,
      "node_id": "MDQ6VXNlcjM2NTUz",
      "avatar_url": "https://avatars0.githubusercontent.com/u/36553?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yarko",
      "html_url": "https://github.com/yarko",
      "followers_url": "https://api.github.com/users/yarko/followers",
      "following_url": "https://api.github.com/users/yarko/following{/other_user}",
      "gists_url": "https://api.github.com/users/yarko/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yarko/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yarko/subscriptions",
      "organizations_url": "https://api.github.com/users/yarko/orgs",
      "repos_url": "https://api.github.com/users/yarko/repos",
      "events_url": "https://api.github.com/users/yarko/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yarko/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-07-09T23:19:53Z",
    "updated_at": "2017-09-16T00:07:53Z",
    "author_association": "CONTRIBUTOR",
    "body": "thanks @jonathanslenders - sorry for my delay in getting back to this.\r\n\r\nI use `ipython` in my `venv`'s, so I uninstalled prompt-toolkit, cloned https://github.com/jonathanslenders/python-prompt-toolkit and `python setup.py develop` installed it, with your change mentioned above.\r\n\r\nIt changed things, so here's how:\r\n\r\nBehavior:\r\n\r\nwith some history established:\r\n  1. move up history w/ editor (e.g. `[ESC]k`)\r\n  1. do some editing action on the line (no mods necessary - `i [ESC]` is sufficient)\r\n  1. attempt to move to a different line in history (any line)\r\n    1. e.g. attempt motion `k`\r\n    1. also search `/foobar`: can select searched line, but no motion from result (except original line)\r\n  1. expected:\r\n     1. motion through history\r\n  1. actual (remember - I'm using vi mode):\r\n      1. Before @jonathanslenders change:\r\n         1. stuck on current line\r\n      1. After @jonathanslenders change (action, below, on *moved-to* line):\r\n         1. when no editing (e.g. `{{some line motion}}; i[ESC]`):\r\n           1. motion through history (now) works\r\n        1. when any changes (now seems inconsistent):\r\n           1. with example history line traveled to: `a = 1`:\r\n              1. `A+[ESC]u` or `A+[ESC]x`:\r\n                 1. now motion goes to lines only beginning with 'a' (*__not__ expected*);\r\n                 1. [EDIT]: also checked that it's first character on the line (it is), i.e. with this in history:\r\n                    1. `print('first')`\r\n                    1. `p = 1`\r\n                    1. `print('second')`\r\n                    1.  Abandoning an edit on the last print does include the `p = 1` lines in history motion.\r\n                 1. search-through-history from this line (i.e. `[ESC]/`) works, finds other lines (*ok*);\r\n              1. `A + 2[ESC]`  (*abandoned changed*):\r\n                 1. now upward motion goes to beginning of current line only (*I'd expect abandon edit, but...*);\r\n                 1. search still works (*ok*);\r\n                 1. other *expected* behaviors work, e.g.:  `dd` (to clear line) or `[CTL]C` to force abandon;\r\n\r\nI am thinking the remaining \"bug\" is the 'abandoned edit' and unchanged line, marked 7.iii.a.a (*__not__ expected*).\r\n\r\nYour thoughts?\r\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/329929815",
    "html_url": "https://github.com/ipython/ipython/issues/10680#issuecomment-329929815",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/10680",
    "id": 329929815,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyOTkyOTgxNQ==",
    "user": {
      "login": "yarko",
      "id": 36553,
      "node_id": "MDQ6VXNlcjM2NTUz",
      "avatar_url": "https://avatars0.githubusercontent.com/u/36553?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yarko",
      "html_url": "https://github.com/yarko",
      "followers_url": "https://api.github.com/users/yarko/followers",
      "following_url": "https://api.github.com/users/yarko/following{/other_user}",
      "gists_url": "https://api.github.com/users/yarko/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yarko/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yarko/subscriptions",
      "organizations_url": "https://api.github.com/users/yarko/orgs",
      "repos_url": "https://api.github.com/users/yarko/repos",
      "events_url": "https://api.github.com/users/yarko/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yarko/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-16T00:03:36Z",
    "updated_at": "2017-10-26T19:37:56Z",
    "author_association": "CONTRIBUTOR",
    "body": "notes post ipython 6.2 release (edited above comment for numbered list; number references below refer to my immediately previous comment):\r\n\r\nNotes (observed on vi editing mode):\r\n\r\n- on 7.iii.a.a.b:\r\n  - this {p, print} artifact no longer evident; now it appears to limit to the first word on the line in question  (i.e. either 'p' lines are scanned with simple line motion keys, or \"print\"; they are no longer mixed;); searching for anything else thru history after these actions, works (as before, as expected);\r\n\r\n- on 7.iii.a.b:\r\n  - all behaviors (as noted in previous comment) continue - and I think  are ok.\r\n\r\nSummary:  the only (very minor) remaining artifact of \"edit mode inconsistency\"  appears to be:\r\nWhen changing a history line, and attempting to abandon the change (by simple \"cursor motion\" activity), rather than abandon the changed line, the unexpected artifact appears (now) to be, in effect:\r\n  - expected:   simple motion through history;\r\n  - actual: an implicit search through history, based on the first token of the line;\r\n\r\n"
  }
]
