[
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/200456871",
    "html_url": "https://github.com/ipython/ipython/issues/9351#issuecomment-200456871",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/9351",
    "id": 200456871,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwMDQ1Njg3MQ==",
    "user": {
      "login": "takluyver",
      "id": 327925,
      "node_id": "MDQ6VXNlcjMyNzkyNQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/327925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/takluyver",
      "html_url": "https://github.com/takluyver",
      "followers_url": "https://api.github.com/users/takluyver/followers",
      "following_url": "https://api.github.com/users/takluyver/following{/other_user}",
      "gists_url": "https://api.github.com/users/takluyver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/takluyver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/takluyver/subscriptions",
      "organizations_url": "https://api.github.com/users/takluyver/orgs",
      "repos_url": "https://api.github.com/users/takluyver/repos",
      "events_url": "https://api.github.com/users/takluyver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/takluyver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-03-23T17:33:50Z",
    "updated_at": "2016-03-23T17:33:50Z",
    "author_association": "MEMBER",
    "body": "Thanks, #9352 should fix that.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/216327430",
    "html_url": "https://github.com/ipython/ipython/issues/9351#issuecomment-216327430",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/9351",
    "id": 216327430,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIxNjMyNzQzMA==",
    "user": {
      "login": "makmanalp",
      "id": 161965,
      "node_id": "MDQ6VXNlcjE2MTk2NQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/161965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/makmanalp",
      "html_url": "https://github.com/makmanalp",
      "followers_url": "https://api.github.com/users/makmanalp/followers",
      "following_url": "https://api.github.com/users/makmanalp/following{/other_user}",
      "gists_url": "https://api.github.com/users/makmanalp/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/makmanalp/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/makmanalp/subscriptions",
      "organizations_url": "https://api.github.com/users/makmanalp/orgs",
      "repos_url": "https://api.github.com/users/makmanalp/repos",
      "events_url": "https://api.github.com/users/makmanalp/events{/privacy}",
      "received_events_url": "https://api.github.com/users/makmanalp/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-05-02T18:56:39Z",
    "updated_at": "2016-05-02T18:56:39Z",
    "author_association": "NONE",
    "body": "Just pinging to say that I hit something like this today with 4.1.1:\n\n```\nTraceback (most recent call last):\n  File \"/nfs/projects_nobackup/c/cidgrowlab/Mali/peru/env/lib/python3.4/site-packages/IPython/core/history.py\", line 518, in __init__\n    self.new_session()\n  File \"<decorator-gen-21>\", line 2, in new_session\n  File \"/nfs/projects_nobackup/c/cidgrowlab/Mali/peru/env/lib/python3.4/site-packages/IPython/core/history.py\", line 68, in needs_sqlite\n    return f(self, *a, **kw)\n  File \"/nfs/projects_nobackup/c/cidgrowlab/Mali/peru/env/lib/python3.4/site-packages/IPython/core/history.py\", line 545, in new_session\n    self.session_number = cur.lastrowid\nsqlite3.OperationalError: database is locked\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/nfs/projects_nobackup/c/cidgrowlab/Mali/peru/env/bin/ipython\", line 11, in <module>\n    sys.exit(start_ipython())\n  File \"/nfs/projects_nobackup/c/cidgrowlab/Mali/peru/env/lib/python3.4/site-packages/IPython/__init__.py\", line 119, in start_ipython\n    return launch_new_instance(argv=argv, **kwargs)\n  File \"/nfs/projects_nobackup/c/cidgrowlab/Mali/peru/env/lib/python3.4/site-packages/traitlets/config/application.py\", line 588, in launch_instance\n    app.initialize(argv)\n  File \"<decorator-gen-111>\", line 2, in initialize\n  File \"/nfs/projects_nobackup/c/cidgrowlab/Mali/peru/env/lib/python3.4/site-packages/traitlets/config/application.py\", line 74, in catch_config_error\n    return method(app, *args, **kwargs)\n  File \"/nfs/projects_nobackup/c/cidgrowlab/Mali/peru/env/lib/python3.4/site-packages/IPython/terminal/ipapp.py\", line 306, in initialize\n    self.init_shell()\n  File \"/nfs/projects_nobackup/c/cidgrowlab/Mali/peru/env/lib/python3.4/site-packages/IPython/terminal/ipapp.py\", line 322, in init_shell\n    ipython_dir=self.ipython_dir, user_ns=self.user_ns)\n  File \"/nfs/projects_nobackup/c/cidgrowlab/Mali/peru/env/lib/python3.4/site-packages/traitlets/config/configurable.py\", line 404, in instance\n    inst = cls(*args, **kwargs)\n  File \"/nfs/projects_nobackup/c/cidgrowlab/Mali/peru/env/lib/python3.4/site-packages/IPython/core/interactiveshell.py\", line 465, in __init__\n    self.init_history()\n  File \"/nfs/projects_nobackup/c/cidgrowlab/Mali/peru/env/lib/python3.4/site-packages/IPython/core/interactiveshell.py\", line 1586, in init_history\n    self.history_manager = HistoryManager(shell=self, parent=self)\n  File \"/nfs/projects_nobackup/c/cidgrowlab/Mali/peru/env/lib/python3.4/site-packages/IPython/core/history.py\", line 520, in __init__\n    self.log.error(\"Failed to create history session in %s. History will not be saved.\",\nAttributeError: 'HistoryManager' object has no attribute 'log'\n\nIf you suspect this is an IPython bug, please report it at:\n    https://github.com/ipython/ipython/issues\nor send an email to the mailing list at ipython-dev@scipy.org\n\nYou can print a more detailed traceback right now with \"%tb\", or use \"%debug\"\nto interactively debug it.\n\nExtra-detailed tracebacks for bug-reporting purposes can be enabled via:\n    c.Application.verbose_crash=True\n\n```\n\nBumping to 4.2.0 got me a more different message:\n\n```\n[TerminalIPythonApp] ERROR | Failed to create history session in /nfs/home/M/makmanalp/.ipython/profile_default/history.sqlite. History will not be saved.\nTraceback (most recent call last):\n  File \"/nfs/projects_nobackup/c/cidgrowlab/Mali/peru/env/lib/python3.4/site-packages/IPython/core/history.py\", line 518, in __init__\n    self.new_session()\n  File \"<decorator-gen-21>\", line 2, in new_session\n  File \"/nfs/projects_nobackup/c/cidgrowlab/Mali/peru/env/lib/python3.4/site-packages/IPython/core/history.py\", line 68, in needs_sqlite\n    return f(self, *a, **kw)\n  File \"/nfs/projects_nobackup/c/cidgrowlab/Mali/peru/env/lib/python3.4/site-packages/IPython/core/history.py\", line 545, in new_session\n    self.session_number = cur.lastrowid\nsqlite3.OperationalError: database is locked\nTraceback (most recent call last):\n  File \"/nfs/projects_nobackup/c/cidgrowlab/Mali/peru/env/bin/ipython\", line 11, in <module>\n    sys.exit(start_ipython())\n  File \"/nfs/projects_nobackup/c/cidgrowlab/Mali/peru/env/lib/python3.4/site-packages/IPython/__init__.py\", line 119, in start_ipython\n    return launch_new_instance(argv=argv, **kwargs)\n  File \"/nfs/projects_nobackup/c/cidgrowlab/Mali/peru/env/lib/python3.4/site-packages/traitlets/config/application.py\", line 595, in launch_instance\n    app.initialize(argv)\n  File \"<decorator-gen-111>\", line 2, in initialize\n  File \"/nfs/projects_nobackup/c/cidgrowlab/Mali/peru/env/lib/python3.4/site-packages/traitlets/config/application.py\", line 74, in catch_config_error\n    return method(app, *args, **kwargs)\n  File \"/nfs/projects_nobackup/c/cidgrowlab/Mali/peru/env/lib/python3.4/site-packages/IPython/terminal/ipapp.py\", line 305, in initialize\n    self.init_shell()\n  File \"/nfs/projects_nobackup/c/cidgrowlab/Mali/peru/env/lib/python3.4/site-packages/IPython/terminal/ipapp.py\", line 321, in init_shell\n    ipython_dir=self.ipython_dir, user_ns=self.user_ns)\n  File \"/nfs/projects_nobackup/c/cidgrowlab/Mali/peru/env/lib/python3.4/site-packages/traitlets/config/configurable.py\", line 405, in instance\n    inst = cls(*args, **kwargs)\n  File \"/nfs/projects_nobackup/c/cidgrowlab/Mali/peru/env/lib/python3.4/site-packages/IPython/core/interactiveshell.py\", line 483, in __init__\n    self.init_readline()\n  File \"/nfs/projects_nobackup/c/cidgrowlab/Mali/peru/env/lib/python3.4/site-packages/IPython/terminal/interactiveshell.py\", line 435, in init_readline\n    self.refill_readline_hist()\n  File \"/nfs/projects_nobackup/c/cidgrowlab/Mali/peru/env/lib/python3.4/site-packages/IPython/terminal/interactiveshell.py\", line 470, in refill_readline_hist\n    include_latest=True):\n  File \"<decorator-gen-18>\", line 2, in get_tail\n  File \"/nfs/projects_nobackup/c/cidgrowlab/Mali/peru/env/lib/python3.4/site-packages/IPython/core/history.py\", line 90, in catch_corrupt_db\n    return f(self, *a, **kw)\n  File \"/nfs/projects_nobackup/c/cidgrowlab/Mali/peru/env/lib/python3.4/site-packages/IPython/core/history.py\", line 335, in get_tail\n    self.writeout_cache()\n  File \"<decorator-gen-22>\", line 2, in writeout_cache\n  File \"/nfs/projects_nobackup/c/cidgrowlab/Mali/peru/env/lib/python3.4/site-packages/IPython/core/history.py\", line 68, in needs_sqlite\n    return f(self, *a, **kw)\n  File \"/nfs/projects_nobackup/c/cidgrowlab/Mali/peru/env/lib/python3.4/site-packages/IPython/core/history.py\", line 755, in writeout_cache\n    self._writeout_input_cache(conn)\n  File \"/nfs/projects_nobackup/c/cidgrowlab/Mali/peru/env/lib/python3.4/site-packages/IPython/core/history.py\", line 739, in _writeout_input_cache\n    (self.session_number,)+line)\nsqlite3.OperationalError: database is locked\n\nIf you suspect this is an IPython bug, please report it at:\n    https://github.com/ipython/ipython/issues\nor send an email to the mailing list at ipython-dev@scipy.org\n\nYou can print a more detailed traceback right now with \"%tb\", or use \"%debug\"\nto interactively debug it.\n\nExtra-detailed tracebacks for bug-reporting purposes can be enabled via:\n    c.Application.verbose_crash=True\n\n```\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/216330787",
    "html_url": "https://github.com/ipython/ipython/issues/9351#issuecomment-216330787",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/9351",
    "id": 216330787,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIxNjMzMDc4Nw==",
    "user": {
      "login": "makmanalp",
      "id": 161965,
      "node_id": "MDQ6VXNlcjE2MTk2NQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/161965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/makmanalp",
      "html_url": "https://github.com/makmanalp",
      "followers_url": "https://api.github.com/users/makmanalp/followers",
      "following_url": "https://api.github.com/users/makmanalp/following{/other_user}",
      "gists_url": "https://api.github.com/users/makmanalp/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/makmanalp/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/makmanalp/subscriptions",
      "organizations_url": "https://api.github.com/users/makmanalp/orgs",
      "repos_url": "https://api.github.com/users/makmanalp/repos",
      "events_url": "https://api.github.com/users/makmanalp/events{/privacy}",
      "received_events_url": "https://api.github.com/users/makmanalp/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-05-02T19:05:52Z",
    "updated_at": "2016-05-02T19:05:52Z",
    "author_association": "NONE",
    "body": "The solution, for posterity, was doing something like this: \n\n`echo \".dump\" | sqlite3 history.sqlite | sqlite3 new.db` and then swapping the new file in place of the old one.\n\nhttp://stackoverflow.com/a/7740613\n\nNo process seemed to be reading the file, and I couldn't find a way to reset the lock otherwise - might be a weird NFS thing.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/216331150",
    "html_url": "https://github.com/ipython/ipython/issues/9351#issuecomment-216331150",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/9351",
    "id": 216331150,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIxNjMzMTE1MA==",
    "user": {
      "login": "makmanalp",
      "id": 161965,
      "node_id": "MDQ6VXNlcjE2MTk2NQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/161965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/makmanalp",
      "html_url": "https://github.com/makmanalp",
      "followers_url": "https://api.github.com/users/makmanalp/followers",
      "following_url": "https://api.github.com/users/makmanalp/following{/other_user}",
      "gists_url": "https://api.github.com/users/makmanalp/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/makmanalp/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/makmanalp/subscriptions",
      "organizations_url": "https://api.github.com/users/makmanalp/orgs",
      "repos_url": "https://api.github.com/users/makmanalp/repos",
      "events_url": "https://api.github.com/users/makmanalp/events{/privacy}",
      "received_events_url": "https://api.github.com/users/makmanalp/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-05-02T19:07:20Z",
    "updated_at": "2016-05-02T19:07:56Z",
    "author_association": "NONE",
    "body": "Looks like #9418 might be a decent enough workaround for this, even though I think it'd mean losing the history. I don't know how ipython could handle it better though.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/216337270",
    "html_url": "https://github.com/ipython/ipython/issues/9351#issuecomment-216337270",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/9351",
    "id": 216337270,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIxNjMzNzI3MA==",
    "user": {
      "login": "takluyver",
      "id": 327925,
      "node_id": "MDQ6VXNlcjMyNzkyNQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/327925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/takluyver",
      "html_url": "https://github.com/takluyver",
      "followers_url": "https://api.github.com/users/takluyver/followers",
      "following_url": "https://api.github.com/users/takluyver/following{/other_user}",
      "gists_url": "https://api.github.com/users/takluyver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/takluyver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/takluyver/subscriptions",
      "organizations_url": "https://api.github.com/users/takluyver/orgs",
      "repos_url": "https://api.github.com/users/takluyver/repos",
      "events_url": "https://api.github.com/users/takluyver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/takluyver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-05-02T19:30:43Z",
    "updated_at": "2016-05-02T19:30:43Z",
    "author_association": "MEMBER",
    "body": "Yeah, if something goes wrong with the database file, the automated options we have all lose it. SQLite has known issues with NFS, though I think it depends on the configuration and possibly the implementation.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/224432740",
    "html_url": "https://github.com/ipython/ipython/issues/9351#issuecomment-224432740",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/9351",
    "id": 224432740,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyNDQzMjc0MA==",
    "user": {
      "login": "debboutr",
      "id": 7052993,
      "node_id": "MDQ6VXNlcjcwNTI5OTM=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/7052993?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/debboutr",
      "html_url": "https://github.com/debboutr",
      "followers_url": "https://api.github.com/users/debboutr/followers",
      "following_url": "https://api.github.com/users/debboutr/following{/other_user}",
      "gists_url": "https://api.github.com/users/debboutr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/debboutr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/debboutr/subscriptions",
      "organizations_url": "https://api.github.com/users/debboutr/orgs",
      "repos_url": "https://api.github.com/users/debboutr/repos",
      "events_url": "https://api.github.com/users/debboutr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/debboutr/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-06-07T22:22:23Z",
    "updated_at": "2016-06-07T22:22:23Z",
    "author_association": "NONE",
    "body": "I get the same thing after stopping a console while in process:\n\n```\nC:\\Users\\Rdebbout\\AppData\\Local\\Continuum\\Anaconda>ipython --deep-reload\n```\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Rdebbout\\AppData\\Local\\Continuum\\Anaconda\\Scripts\\ipython-script.py\", line 5, in <module>\n    sys.exit(IPython.start_ipython())\n  File \"C:\\Users\\Rdebbout\\AppData\\Local\\Continuum\\Anaconda\\lib\\site-packages\\IPython__init__.py\", line 119, in start_ipython\n    return launch_new_instance(argv=argv, *_kwargs)\n  File \"C:\\Users\\Rdebbout\\AppData\\Local\\Continuum\\Anaconda\\lib\\site-packages\\traitlets\\config\\application.py\", line 595, in launch_i\nnstance\n    app.initialize(argv)\n  File \"<decorator-gen-112>\", line 2, in initialize\n  File \"C:\\Users\\Rdebbout\\AppData\\Local\\Continuum\\Anaconda\\lib\\site-packages\\traitlets\\config\\application.py\", line 74, in catch_con\nfig_error\n    return method(app, *args, *_kwargs)\n  File \"C:\\Users\\Rdebbout\\AppData\\Local\\Continuum\\Anaconda\\lib\\site-packages\\IPython\\terminal\\ipapp.py\", line 306, in initialize\n    self.init_shell()\n  File \"C:\\Users\\Rdebbout\\AppData\\Local\\Continuum\\Anaconda\\lib\\site-packages\\IPython\\terminal\\ipapp.py\", line 322, in init_shell\n    ipython_dir=self.ipython_dir, user_ns=self.user_ns)\n  File \"C:\\Users\\Rdebbout\\AppData\\Local\\Continuum\\Anaconda\\lib\\site-packages\\traitlets\\config\\configurable.py\", line 405, in instanc\ne\n    inst = cls(_args, *_kwargs)\n  File \"C:\\Users\\Rdebbout\\AppData\\Local\\Continuum\\Anaconda\\lib\\site-packages\\IPython\\core\\interactiveshell.py\", line 465, in **init_\n_\n    self.init_history()\n  File \"C:\\Users\\Rdebbout\\AppData\\Local\\Continuum\\Anaconda\\lib\\site-packages\\IPython\\core\\interactiveshell.py\", line 1586, in init_h\nistory\n    self.history_manager = HistoryManager(shell=self, parent=self)\n  File \"C:\\Users\\Rdebbout\\AppData\\Local\\Continuum\\Anaconda\\lib\\site-packages\\IPython\\core\\history.py\", line 520, in __init**\n    self.log.error(\"Failed to create history session in %s. History will not be saved.\",\nAttributeError: 'HistoryManager' object has no attribute 'log'\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/224891947",
    "html_url": "https://github.com/ipython/ipython/issues/9351#issuecomment-224891947",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/9351",
    "id": 224891947,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyNDg5MTk0Nw==",
    "user": {
      "login": "minrk",
      "id": 151929,
      "node_id": "MDQ6VXNlcjE1MTkyOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/151929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minrk",
      "html_url": "https://github.com/minrk",
      "followers_url": "https://api.github.com/users/minrk/followers",
      "following_url": "https://api.github.com/users/minrk/following{/other_user}",
      "gists_url": "https://api.github.com/users/minrk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minrk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minrk/subscriptions",
      "organizations_url": "https://api.github.com/users/minrk/orgs",
      "repos_url": "https://api.github.com/users/minrk/repos",
      "events_url": "https://api.github.com/users/minrk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minrk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-06-09T13:20:20Z",
    "updated_at": "2016-06-09T13:20:20Z",
    "author_association": "MEMBER",
    "body": "What is `ipython --version`? History does have `self.log` in current IPython (4.2).\n"
  }
]
