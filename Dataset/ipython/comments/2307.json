[
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/7766531",
    "html_url": "https://github.com/ipython/ipython/issues/2307#issuecomment-7766531",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/2307",
    "id": 7766531,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3NjY1MzE=",
    "user": {
      "login": "minrk",
      "id": 151929,
      "node_id": "MDQ6VXNlcjE1MTkyOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/151929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minrk",
      "html_url": "https://github.com/minrk",
      "followers_url": "https://api.github.com/users/minrk/followers",
      "following_url": "https://api.github.com/users/minrk/following{/other_user}",
      "gists_url": "https://api.github.com/users/minrk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minrk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minrk/subscriptions",
      "organizations_url": "https://api.github.com/users/minrk/orgs",
      "repos_url": "https://api.github.com/users/minrk/repos",
      "events_url": "https://api.github.com/users/minrk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minrk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-08-15T19:30:03Z",
    "updated_at": "2012-08-15T19:30:03Z",
    "author_association": "MEMBER",
    "body": "See the TaskScheduler.hwm configurable for how many tasks can be assigned to engines.  The default in 0.12 was 0 (aka inf, or maximum greedy assignment), and the default in 0.13 is 1, which means that there will never be more tasks assigned than connected engines.  In either case, new engines start getting unassigned tasks as soon as they connect, but with HWM=0, all tasks have often already been assigned, so there is nothing to assign to the new engines until you start submitting new tasks.  On 0.13, it should behave exactly as you seem to expect.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/7770897",
    "html_url": "https://github.com/ipython/ipython/issues/2307#issuecomment-7770897",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/2307",
    "id": 7770897,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3NzA4OTc=",
    "user": {
      "login": "jankatins",
      "id": 890156,
      "node_id": "MDQ6VXNlcjg5MDE1Ng==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/890156?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jankatins",
      "html_url": "https://github.com/jankatins",
      "followers_url": "https://api.github.com/users/jankatins/followers",
      "following_url": "https://api.github.com/users/jankatins/following{/other_user}",
      "gists_url": "https://api.github.com/users/jankatins/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jankatins/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jankatins/subscriptions",
      "organizations_url": "https://api.github.com/users/jankatins/orgs",
      "repos_url": "https://api.github.com/users/jankatins/repos",
      "events_url": "https://api.github.com/users/jankatins/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jankatins/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-08-15T22:08:24Z",
    "updated_at": "2012-08-15T22:08:24Z",
    "author_association": "CONTRIBUTOR",
    "body": "I'm using the latest git (aka 0.14.dev):\n\n```\nC:\\data\\external\\ipython>python -c \"import IPython; print IPython.sys_info()\"\n{'commit_hash': '289fc01',\n 'commit_source': 'repository',\n 'default_encoding': 'cp850',\n 'ipython_path': 'C:\\\\data\\\\external\\\\ipython\\\\IPython',\n 'ipython_version': '0.14.dev',\n 'os_name': 'nt',\n 'platform': 'Windows-7-6.1.7601-SP1',\n 'sys_executable': 'C:\\\\portabel\\\\Python27\\\\python.exe',\n 'sys_platform': 'win32',\n 'sys_version': '2.7.3 (default, Apr 10 2012, 23:24:47) [MSC v.1500 64 bit (AMD6\n4)]'}\n```\n\nThe TaskScheduler section of ipcontroller_config.py is completely commented out, so I guess I'm using the default.\n\nThe log of that session is also kind of strange: before the new engines register, the tasks are scheduled on engines 0-7 but afterwards according to the log of the controller only 8-9 are used. But in the computer with the \"new\" engines the engines have no CPU. The two other computer which connected before the task got \"applied\" had 100% CPU.\n\n```\n2012-08-15 11:41:04.088 [IPControllerApp] task::task '7b1a73e6-0a38-4193-ac27-876bfad5a8ce' arrived on 6\n2012-08-15 11:41:04.089 [IPControllerApp] task::task 'ffa8a0b1-001f-4833-81f2-8b0fc869c8f7' arrived on 4\n2012-08-15 11:41:04.091 [IPControllerApp] task::task 'a5b6b70d-82ae-4298-996f-664507296ccd' arrived on 7\n2012-08-15 11:41:04.092 [IPControllerApp] task::task '8287296d-7fdf-4b22-ab0d-812b9d14d7f3' arrived on 5\n2012-08-15 11:41:04.095 [IPControllerApp] task::task '5bf0ef2a-950d-47d5-8c7e-d9ffd7c04b59' arrived on 0\n2012-08-15 11:41:04.096 [IPControllerApp] task::task 'd31a2172-a738-430d-89da-ad3a73d4eac8' arrived on 3\n2012-08-15 11:41:04.096 [IPControllerApp] task::task 'aecc7b40-6041-4ed4-8f56-2f44f68f8ec4' arrived on 1\n2012-08-15 11:41:04.098 [IPControllerApp] task::task 'ca563d47-ea6e-4bea-bcbf-f6dbe33ae691' arrived on 2\n2012-08-15 13:13:00.213 [IPControllerApp] task::task 'db4205bd-91e4-44b0-b288-fd19886f31d1' arrived on 5\n2012-08-15 13:13:00.983 [IPControllerApp] task::task '8287296d-7fdf-4b22-ab0d-812b9d14d7f3' finished on 5\n2012-08-15 13:13:13.329 [IPControllerApp] task::task '2ab4111f-48b1-44ce-a78b-b71b908aed94' arrived on 6\n2012-08-15 13:13:13.654 [IPControllerApp] task::task '7b1a73e6-0a38-4193-ac27-876bfad5a8ce' finished on 6\n2012-08-15 13:15:14.020 [IPControllerApp] task::task '0ccda43c-863e-426b-a347-23df76ecf1b0' arrived on 4\n2012-08-15 13:15:15.184 [IPControllerApp] task::task 'ffa8a0b1-001f-4833-81f2-8b0fc869c8f7' finished on 4\n2012-08-15 13:15:36.286 [IPControllerApp] task::task '880d0468-fdbe-4710-942b-4e71759297b3' arrived on 7\n2012-08-15 13:15:38.072 [IPControllerApp] task::task 'a5b6b70d-82ae-4298-996f-664507296ccd' finished on 7\n2012-08-15 13:26:43.121 [IPControllerApp] task::task '3fdc2b23-b0d9-4d8a-ae50-63439921aca7' arrived on 0\n2012-08-15 13:26:44.233 [IPControllerApp] task::task '5bf0ef2a-950d-47d5-8c7e-d9ffd7c04b59' finished on 0\n2012-08-15 13:27:31.815 [IPControllerApp] task::task 'b03256c3-0554-4ea3-9ab8-4a611a844038' arrived on 2\n2012-08-15 13:27:32.905 [IPControllerApp] task::task 'ca563d47-ea6e-4bea-bcbf-f6dbe33ae691' finished on 2\n2012-08-15 13:27:56.786 [IPControllerApp] task::task '7453c7c6-c963-4a0b-80fd-f397be73eacd' arrived on 3\n2012-08-15 13:27:57.821 [IPControllerApp] task::task 'd31a2172-a738-430d-89da-ad3a73d4eac8' finished on 3\n2012-08-15 13:28:53.667 [IPControllerApp] task::task '4a356710-b2b0-4350-92cf-bf640472c28f' arrived on 1\n2012-08-15 13:28:54.740 [IPControllerApp] task::task 'aecc7b40-6041-4ed4-8f56-2f44f68f8ec4' finished on 1\n2012-08-15 13:43:54.585 [IPControllerApp] client::client 'c68df5e4-9424-4e23-b3f6-21ddbffbecab' requested 'registration_request'\n2012-08-15 13:43:57.582 [IPControllerApp] client::client '477d410f-30b9-493c-9166-5caa64ba5144' requested 'registration_request'\n2012-08-15 13:44:00.355 [IPControllerApp] registration::finished registering engine 8:c68df5e4-9424-4e23-b3f6-21ddbffbecab\n2012-08-15 13:44:00.361 [IPControllerApp] engine::Engine Connected: 8\n2012-08-15 13:44:02.829 [IPControllerApp] task::task '3beeef11-573b-4544-8c0a-3dae23374688' arrived on 8\n2012-08-15 13:44:03.354 [IPControllerApp] registration::finished registering engine 9:477d410f-30b9-493c-9166-5caa64ba5144\n2012-08-15 13:44:03.355 [IPControllerApp] engine::Engine Connected: 9\n2012-08-15 13:44:05.805 [IPControllerApp] task::task '43e1b7ec-c39a-4a48-8398-5452f576fc8c' arrived on 9\n2012-08-15 13:44:18.246 [IPControllerApp] task::task '5598804d-efae-4bd0-bc88-dc92e2f3c9e7' arrived on 9\n2012-08-15 13:44:18.384 [IPControllerApp] task::task '43e1b7ec-c39a-4a48-8398-5452f576fc8c' finished on 9\n2012-08-15 13:44:18.417 [IPControllerApp] task::task '8c705887-4953-4e5c-b6ee-eaa3074deeab' arrived on 9\n2012-08-15 13:44:18.724 [IPControllerApp] task::task '5598804d-efae-4bd0-bc88-dc92e2f3c9e7' finished on 9\n2012-08-15 13:44:18.726 [IPControllerApp] task::task '760ba0c5-4862-42ba-ac4c-306d07be967d' arrived on 8\n[... only 8 and 9 show up in the log ... ]\n2012-08-15 14:48:45.809 [IPControllerApp] task::task 'a0a0a95e-ed0e-4f89-ab17-78442a0016d9' finished on 8\n2012-08-15 14:48:50.545 [IPControllerApp] task::task '6c276cdd-d89d-4c67-8afe-605a172e7908' arrived on 9\n2012-08-15 14:48:52.779 [IPControllerApp] task::task '44a44fbe-3e0e-4353-9d7d-58bee9bc9f2e' finished on 9\n2012-08-15 14:48:55.124 [IPControllerApp] task::task '7a365f8e-ba97-4ebc-8faa-fdf2e1a4965e' arrived on 5\n2012-08-15 14:59:24.358 [IPControllerApp] registration::unregister_engine(5)\n2012-08-15 14:59:24.381 [IPControllerApp] registration::unregister_engine(7)\n2012-08-15 14:59:24.381 [IPControllerApp] registration::unregister_engine(4)\n2012-08-15 14:59:24.382 [IPControllerApp] registration::unregister_engine(6)\n2012-08-15 14:59:39.354 [IPControllerApp] registration::unregister_engine(9)\n2012-08-15 14:59:39.355 [IPControllerApp] registration::unregister_engine(8)\n2012-08-15 15:00:13.864 [IPControllerApp] Received signal 2, shutting down\n2012-08-15 15:00:13.865 [IPControllerApp] terminating children...\n```\n\n(I had to terminate as I was running out of memory on the client() python process: #1131)\n\nIs there any way to see what's going on in the TaskScheduler or lv.apply(...)?\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/7773197",
    "html_url": "https://github.com/ipython/ipython/issues/2307#issuecomment-7773197",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/2307",
    "id": 7773197,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3NzMxOTc=",
    "user": {
      "login": "minrk",
      "id": 151929,
      "node_id": "MDQ6VXNlcjE1MTkyOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/151929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minrk",
      "html_url": "https://github.com/minrk",
      "followers_url": "https://api.github.com/users/minrk/followers",
      "following_url": "https://api.github.com/users/minrk/following{/other_user}",
      "gists_url": "https://api.github.com/users/minrk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minrk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minrk/subscriptions",
      "organizations_url": "https://api.github.com/users/minrk/orgs",
      "repos_url": "https://api.github.com/users/minrk/repos",
      "events_url": "https://api.github.com/users/minrk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minrk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-08-15T23:48:13Z",
    "updated_at": "2012-08-15T23:48:13Z",
    "author_association": "MEMBER",
    "body": "Please post code (and config, if any) that reproduces the issue.  I cannot seem to induce anything but expected behavior.  You can see some scheduler output if you pass `ipcontroller --debug`.  Beware, because it can be a lot of output.\n\nI would suspect that the 100% CPU is related to the first group of engines dropping out of work.  Note that each of those engines _does_ have a currently assigned task.  The expected event that is not happening is the last tasks assigned to the first group of engines (7453c7c6, 4a356710, b03256c3, 3fdc2b23, etc.) never finish, so those engines never make themselves available again in the scheduler.  I don't know what could be the cause of this, and cannot begin to work it out without code that reproduces the situation.\n\nOne thing you might check is if this same issue hits 0.13 (or 0.13.1), because that could isolate it as an issue with the changes to serialization in master.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/7817661",
    "html_url": "https://github.com/ipython/ipython/issues/2307#issuecomment-7817661",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/2307",
    "id": 7817661,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4MTc2NjE=",
    "user": {
      "login": "jankatins",
      "id": 890156,
      "node_id": "MDQ6VXNlcjg5MDE1Ng==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/890156?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jankatins",
      "html_url": "https://github.com/jankatins",
      "followers_url": "https://api.github.com/users/jankatins/followers",
      "following_url": "https://api.github.com/users/jankatins/following{/other_user}",
      "gists_url": "https://api.github.com/users/jankatins/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jankatins/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jankatins/subscriptions",
      "organizations_url": "https://api.github.com/users/jankatins/orgs",
      "repos_url": "https://api.github.com/users/jankatins/repos",
      "events_url": "https://api.github.com/users/jankatins/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jankatins/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-08-17T13:23:12Z",
    "updated_at": "2012-08-17T13:23:12Z",
    "author_association": "CONTRIBUTOR",
    "body": "I could verify that indeed the controller uses new engines.\n\nI found a bug in my code which made each task not loop 100times but ~1mio times and I suspect that the problem is related to the fact that the two new engines where on a 32bit, 1Gb Ram machine and the first 8 engines and the controller where on 64bit and 8+Gb Ram. I suspect that the engines on the new (small) machine just crashed due to `range(Nruns)` running out of ram and me not seeing an error because the `task.get()` was waiting for the longrunning task on one of the bigger machines.\n\n-> Closing... Sorry for the noise!\n"
  }
]
