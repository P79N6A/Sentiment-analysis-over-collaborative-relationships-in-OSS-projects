[
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/395558657",
    "html_url": "https://github.com/ipython/ipython/pull/11177#issuecomment-395558657",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/11177",
    "id": 395558657,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NTU1ODY1Nw==",
    "user": {
      "login": "takluyver",
      "id": 327925,
      "node_id": "MDQ6VXNlcjMyNzkyNQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/327925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/takluyver",
      "html_url": "https://github.com/takluyver",
      "followers_url": "https://api.github.com/users/takluyver/followers",
      "following_url": "https://api.github.com/users/takluyver/following{/other_user}",
      "gists_url": "https://api.github.com/users/takluyver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/takluyver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/takluyver/subscriptions",
      "organizations_url": "https://api.github.com/users/takluyver/orgs",
      "repos_url": "https://api.github.com/users/takluyver/repos",
      "events_url": "https://api.github.com/users/takluyver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/takluyver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-07T20:44:30Z",
    "updated_at": "2018-06-07T20:44:30Z",
    "author_association": "MEMBER",
    "body": "The remaining failure is in generating the shortcuts list for the docs, if anyone wants to update that script:\r\n\r\nhttps://github.com/ipython/ipython/blob/master/docs/autogen_shortcuts.py"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/396534810",
    "html_url": "https://github.com/ipython/ipython/pull/11177#issuecomment-396534810",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/11177",
    "id": 396534810,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NjUzNDgxMA==",
    "user": {
      "login": "gpotter2",
      "id": 10530980,
      "node_id": "MDQ6VXNlcjEwNTMwOTgw",
      "avatar_url": "https://avatars0.githubusercontent.com/u/10530980?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gpotter2",
      "html_url": "https://github.com/gpotter2",
      "followers_url": "https://api.github.com/users/gpotter2/followers",
      "following_url": "https://api.github.com/users/gpotter2/following{/other_user}",
      "gists_url": "https://api.github.com/users/gpotter2/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gpotter2/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gpotter2/subscriptions",
      "organizations_url": "https://api.github.com/users/gpotter2/orgs",
      "repos_url": "https://api.github.com/users/gpotter2/repos",
      "events_url": "https://api.github.com/users/gpotter2/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gpotter2/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-12T09:57:22Z",
    "updated_at": "2018-06-12T14:35:39Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hi,\r\n\r\nhere's a custom fix that works\r\n\r\n```\r\ndiff --git a/docs/autogen_shortcuts.py b/docs/autogen_shortcuts.py\r\nindex 95c8d608b..8535f1c28 100755\r\n--- a/docs/autogen_shortcuts.py\r\n+++ b/docs/autogen_shortcuts.py\r\n@@ -1,7 +1,6 @@\r\n from os.path import abspath, dirname, join\r\n \r\n-from IPython.terminal.interactiveshell import KeyBindingManager\r\n-\r\n+from IPython.terminal.shortcuts import create_ipython_shortcuts\r\n \r\n def name(c):\r\n     s = c.__class__.__name__\r\n@@ -42,8 +41,14 @@ def multi_filter_str(flt):\r\n log_filters = {'_AndList': 'And', '_OrList': 'Or'}\r\n log_invert =  {'_Invert'}\r\n \r\n-kbm = KeyBindingManager.for_prompt()\r\n-ipy_bindings = kbm.registry.key_bindings\r\n+class _DummyTerminal(object):\r\n+    \"\"\"Used as a buffer to get prompt_toolkit bindings\r\n+    \"\"\"\r\n+    handle_return = None\r\n+    input_splitter = None\r\n+    display_completions = None\r\n+\r\n+ipy_bindings = create_ipython_shortcuts(_DummyTerminal()).bindings\r\n \r\n dummy_docs = []  # ignore bindings without proper documentation\r\n \r\n\r\n```\r\n\r\n(this patch was generated using git diff).\r\n\r\nIt would be really great to have a minor IPython release supporting `prompt_toolkit 2.0` soon. This and https://github.com/ipython/ipython/pull/11185 are two blocking features for me.\r\n\r\nThanks !"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/396537013",
    "html_url": "https://github.com/ipython/ipython/pull/11177#issuecomment-396537013",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/11177",
    "id": 396537013,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NjUzNzAxMw==",
    "user": {
      "login": "takluyver",
      "id": 327925,
      "node_id": "MDQ6VXNlcjMyNzkyNQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/327925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/takluyver",
      "html_url": "https://github.com/takluyver",
      "followers_url": "https://api.github.com/users/takluyver/followers",
      "following_url": "https://api.github.com/users/takluyver/following{/other_user}",
      "gists_url": "https://api.github.com/users/takluyver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/takluyver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/takluyver/subscriptions",
      "organizations_url": "https://api.github.com/users/takluyver/orgs",
      "repos_url": "https://api.github.com/users/takluyver/repos",
      "events_url": "https://api.github.com/users/takluyver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/takluyver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-12T10:05:21Z",
    "updated_at": "2018-06-12T10:05:21Z",
    "author_association": "MEMBER",
    "body": "Thanks, I applied that patch."
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/397868622",
    "html_url": "https://github.com/ipython/ipython/pull/11177#issuecomment-397868622",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/11177",
    "id": 397868622,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5Nzg2ODYyMg==",
    "user": {
      "login": "gpotter2",
      "id": 10530980,
      "node_id": "MDQ6VXNlcjEwNTMwOTgw",
      "avatar_url": "https://avatars0.githubusercontent.com/u/10530980?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gpotter2",
      "html_url": "https://github.com/gpotter2",
      "followers_url": "https://api.github.com/users/gpotter2/followers",
      "following_url": "https://api.github.com/users/gpotter2/following{/other_user}",
      "gists_url": "https://api.github.com/users/gpotter2/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gpotter2/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gpotter2/subscriptions",
      "organizations_url": "https://api.github.com/users/gpotter2/orgs",
      "repos_url": "https://api.github.com/users/gpotter2/repos",
      "events_url": "https://api.github.com/users/gpotter2/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gpotter2/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-17T10:12:34Z",
    "updated_at": "2018-06-17T10:12:34Z",
    "author_association": "CONTRIBUTOR",
    "body": "@takluyver Also, \r\n\r\n> My normal inclination would be to do this for 7.0, but I know that people have had problems with tab completion running in a separate thread, and so we may end up doing it as a bugfix, possibly even back to 5.x. The remaining Python 2 users now can't go past 5.x, so there's some extra pressure to backport things.\r\n\r\nAre you still willing to backport this ? I see it was only added to 7.0"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/397869401",
    "html_url": "https://github.com/ipython/ipython/pull/11177#issuecomment-397869401",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/11177",
    "id": 397869401,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5Nzg2OTQwMQ==",
    "user": {
      "login": "takluyver",
      "id": 327925,
      "node_id": "MDQ6VXNlcjMyNzkyNQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/327925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/takluyver",
      "html_url": "https://github.com/takluyver",
      "followers_url": "https://api.github.com/users/takluyver/followers",
      "following_url": "https://api.github.com/users/takluyver/following{/other_user}",
      "gists_url": "https://api.github.com/users/takluyver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/takluyver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/takluyver/subscriptions",
      "organizations_url": "https://api.github.com/users/takluyver/orgs",
      "repos_url": "https://api.github.com/users/takluyver/repos",
      "events_url": "https://api.github.com/users/takluyver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/takluyver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-17T10:28:12Z",
    "updated_at": "2018-06-17T10:28:12Z",
    "author_association": "MEMBER",
    "body": "I'm not sure :confused: . It's ended up being a fairly big change, which probably won't backport cleanly, and may cause other problems.\r\n\r\nThere's a larger shift in the Python world towards each application having its own dependencies installed in a separate environment. IPython doesn't entirely fit with that, because it's not just any application - you want it installed in the same environment as the modules you're working with. But then prompt_toolkit is a module that's largely useful only for applications.\r\n\r\nSo for now, I think I'm inclined to push forwards towards 7.0, and see how things go. IPython 5.7 correctly specifies the versions of prompt_toolkit it works with, so it's not a bug that it's incompatible with newer versions."
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/397870192",
    "html_url": "https://github.com/ipython/ipython/pull/11177#issuecomment-397870192",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/11177",
    "id": 397870192,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5Nzg3MDE5Mg==",
    "user": {
      "login": "gpotter2",
      "id": 10530980,
      "node_id": "MDQ6VXNlcjEwNTMwOTgw",
      "avatar_url": "https://avatars0.githubusercontent.com/u/10530980?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gpotter2",
      "html_url": "https://github.com/gpotter2",
      "followers_url": "https://api.github.com/users/gpotter2/followers",
      "following_url": "https://api.github.com/users/gpotter2/following{/other_user}",
      "gists_url": "https://api.github.com/users/gpotter2/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gpotter2/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gpotter2/subscriptions",
      "organizations_url": "https://api.github.com/users/gpotter2/orgs",
      "repos_url": "https://api.github.com/users/gpotter2/repos",
      "events_url": "https://api.github.com/users/gpotter2/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gpotter2/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-17T10:46:13Z",
    "updated_at": "2018-06-17T10:46:13Z",
    "author_association": "CONTRIBUTOR",
    "body": "Ok, this will be an additional point to make people switch to Python 3. Also it won’t break any app using both IPython and prompt_toolkit 1.0\r\n\r\nOnly problem we had with python 2.7 is that when we wanted to add prompt_toolkit 2.0 features to scapy, we were blocked by IPython.\r\nWe don’t have separate branches as IPython has, but that’s pretty easy to handle anyway"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/399699499",
    "html_url": "https://github.com/ipython/ipython/pull/11177#issuecomment-399699499",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/11177",
    "id": 399699499,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5OTY5OTQ5OQ==",
    "user": {
      "login": "stonebig",
      "id": 4312421,
      "node_id": "MDQ6VXNlcjQzMTI0MjE=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/4312421?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stonebig",
      "html_url": "https://github.com/stonebig",
      "followers_url": "https://api.github.com/users/stonebig/followers",
      "following_url": "https://api.github.com/users/stonebig/following{/other_user}",
      "gists_url": "https://api.github.com/users/stonebig/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stonebig/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stonebig/subscriptions",
      "organizations_url": "https://api.github.com/users/stonebig/orgs",
      "repos_url": "https://api.github.com/users/stonebig/repos",
      "events_url": "https://api.github.com/users/stonebig/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stonebig/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-23T18:33:47Z",
    "updated_at": "2018-06-23T18:34:10Z",
    "author_association": "CONTRIBUTOR",
    "body": "when will we have a chance to have an official  Ipython compatible version ? Ipython-7.0 seems months away "
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/401556987",
    "html_url": "https://github.com/ipython/ipython/pull/11177#issuecomment-401556987",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/11177",
    "id": 401556987,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwMTU1Njk4Nw==",
    "user": {
      "login": "stonebig",
      "id": 4312421,
      "node_id": "MDQ6VXNlcjQzMTI0MjE=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/4312421?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stonebig",
      "html_url": "https://github.com/stonebig",
      "followers_url": "https://api.github.com/users/stonebig/followers",
      "following_url": "https://api.github.com/users/stonebig/following{/other_user}",
      "gists_url": "https://api.github.com/users/stonebig/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stonebig/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stonebig/subscriptions",
      "organizations_url": "https://api.github.com/users/stonebig/orgs",
      "repos_url": "https://api.github.com/users/stonebig/repos",
      "events_url": "https://api.github.com/users/stonebig/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stonebig/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-30T18:04:17Z",
    "updated_at": "2018-06-30T18:04:17Z",
    "author_association": "CONTRIBUTOR",
    "body": "any hope for today ?"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/408219391",
    "html_url": "https://github.com/ipython/ipython/pull/11177#issuecomment-408219391",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/11177",
    "id": 408219391,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwODIxOTM5MQ==",
    "user": {
      "login": "2sn",
      "id": 1273110,
      "node_id": "MDQ6VXNlcjEyNzMxMTA=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1273110?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/2sn",
      "html_url": "https://github.com/2sn",
      "followers_url": "https://api.github.com/users/2sn/followers",
      "following_url": "https://api.github.com/users/2sn/following{/other_user}",
      "gists_url": "https://api.github.com/users/2sn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/2sn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/2sn/subscriptions",
      "organizations_url": "https://api.github.com/users/2sn/orgs",
      "repos_url": "https://api.github.com/users/2sn/repos",
      "events_url": "https://api.github.com/users/2sn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/2sn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-26T20:07:18Z",
    "updated_at": "2018-07-26T20:07:18Z",
    "author_association": "NONE",
    "body": "yes, it would be great to have IPython work with current versions of modules.  As you note, prompt-tooolkit 2.x is incompatible with version 1,0.x, so if you have other applications that have been updated, you have to pick which module you prefer or need - IPython or the other ... !  Maybe you need a branch using the new version; users who need the old prompt-toolkit for other apps - and there may be some, can continue use the 6.x series of IPython ... "
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/408646392",
    "html_url": "https://github.com/ipython/ipython/pull/11177#issuecomment-408646392",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/11177",
    "id": 408646392,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwODY0NjM5Mg==",
    "user": {
      "login": "ProbonoBonobo",
      "id": 4884737,
      "node_id": "MDQ6VXNlcjQ4ODQ3Mzc=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/4884737?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ProbonoBonobo",
      "html_url": "https://github.com/ProbonoBonobo",
      "followers_url": "https://api.github.com/users/ProbonoBonobo/followers",
      "following_url": "https://api.github.com/users/ProbonoBonobo/following{/other_user}",
      "gists_url": "https://api.github.com/users/ProbonoBonobo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ProbonoBonobo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ProbonoBonobo/subscriptions",
      "organizations_url": "https://api.github.com/users/ProbonoBonobo/orgs",
      "repos_url": "https://api.github.com/users/ProbonoBonobo/repos",
      "events_url": "https://api.github.com/users/ProbonoBonobo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ProbonoBonobo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-29T01:54:17Z",
    "updated_at": "2018-07-30T23:43:16Z",
    "author_association": "NONE",
    "body": "For anyone needing a temporary workaround, I can confirm that reverting to prompt-toolkit v.1.x mostly resolves the errors that prevent ipython, ptpython, etc. from initializing:\r\n\r\n```\r\n$ git clone -b 1.0  --single-branch https://github.com/jonathanslenders/python-prompt-toolkit.git\r\n$ cd python-prompt-toolkit \r\n$ python3 setup.py install \r\n$ cd ..\r\n$ export python_prompt_toolkit_install_dir=$(pip3 show prompt_toolkit | echo $(grep -w \"Location:\")  | awk '{ print substr( $0, 11 ) }')/prompt-toolkit\r\n$ pip3 uninstall prompt_toolkit\r\n$ cp -Rf python-prompt-toolkit $python_prompt_toolkit_install_dir\r\n```"
  }
]
