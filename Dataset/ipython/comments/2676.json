[
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/12451119",
    "html_url": "https://github.com/ipython/ipython/issues/2676#issuecomment-12451119",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/2676",
    "id": 12451119,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyNDUxMTE5",
    "user": {
      "login": "minrk",
      "id": 151929,
      "node_id": "MDQ6VXNlcjE1MTkyOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/151929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minrk",
      "html_url": "https://github.com/minrk",
      "followers_url": "https://api.github.com/users/minrk/followers",
      "following_url": "https://api.github.com/users/minrk/following{/other_user}",
      "gists_url": "https://api.github.com/users/minrk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minrk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minrk/subscriptions",
      "organizations_url": "https://api.github.com/users/minrk/orgs",
      "repos_url": "https://api.github.com/users/minrk/repos",
      "events_url": "https://api.github.com/users/minrk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minrk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-01-19T06:10:32Z",
    "updated_at": "2013-01-19T06:10:32Z",
    "author_association": "MEMBER",
    "body": "Just make sure to close the tees at the end of your script, and you should be fine:\n\n``` python\n_streamteeout.close()\n_streamteeerr.close()\n```\n\nIs that satisfactory?\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/12452393",
    "html_url": "https://github.com/ipython/ipython/issues/2676#issuecomment-12452393",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/2676",
    "id": 12452393,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyNDUyMzkz",
    "user": {
      "login": "thisch",
      "id": 206581,
      "node_id": "MDQ6VXNlcjIwNjU4MQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/206581?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thisch",
      "html_url": "https://github.com/thisch",
      "followers_url": "https://api.github.com/users/thisch/followers",
      "following_url": "https://api.github.com/users/thisch/following{/other_user}",
      "gists_url": "https://api.github.com/users/thisch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thisch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thisch/subscriptions",
      "organizations_url": "https://api.github.com/users/thisch/orgs",
      "repos_url": "https://api.github.com/users/thisch/repos",
      "events_url": "https://api.github.com/users/thisch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thisch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-01-19T09:06:03Z",
    "updated_at": "2013-01-19T09:06:35Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thx Min for your reply!\n\nI actually do this in the exit handler of my script but this handler is run not till i quit the ipython terminal. Therefore, I either have to close the tees manually at the end of my script or close them directly after starting the script with %run which is what I would like to avoid.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/12453710",
    "html_url": "https://github.com/ipython/ipython/issues/2676#issuecomment-12453710",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/2676",
    "id": 12453710,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyNDUzNzEw",
    "user": {
      "login": "takluyver",
      "id": 327925,
      "node_id": "MDQ6VXNlcjMyNzkyNQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/327925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/takluyver",
      "html_url": "https://github.com/takluyver",
      "followers_url": "https://api.github.com/users/takluyver/followers",
      "following_url": "https://api.github.com/users/takluyver/following{/other_user}",
      "gists_url": "https://api.github.com/users/takluyver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/takluyver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/takluyver/subscriptions",
      "organizations_url": "https://api.github.com/users/takluyver/orgs",
      "repos_url": "https://api.github.com/users/takluyver/repos",
      "events_url": "https://api.github.com/users/takluyver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/takluyver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-01-19T11:37:00Z",
    "updated_at": "2013-01-19T11:37:00Z",
    "author_association": "MEMBER",
    "body": "By exit handler, do you mean something called by `atexit.register()`? Is there any reason you can't just close them at the end of your script?\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/12454927",
    "html_url": "https://github.com/ipython/ipython/issues/2676#issuecomment-12454927",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/2676",
    "id": 12454927,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyNDU0OTI3",
    "user": {
      "login": "thisch",
      "id": 206581,
      "node_id": "MDQ6VXNlcjIwNjU4MQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/206581?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thisch",
      "html_url": "https://github.com/thisch",
      "followers_url": "https://api.github.com/users/thisch/followers",
      "following_url": "https://api.github.com/users/thisch/following{/other_user}",
      "gists_url": "https://api.github.com/users/thisch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thisch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thisch/subscriptions",
      "organizations_url": "https://api.github.com/users/thisch/orgs",
      "repos_url": "https://api.github.com/users/thisch/repos",
      "events_url": "https://api.github.com/users/thisch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thisch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-01-19T13:31:09Z",
    "updated_at": "2013-01-19T13:31:09Z",
    "author_association": "CONTRIBUTOR",
    "body": "Yes, I use `atexit.register()` in a module which is used/imported by all my scripts. Well, I could just close the streams at the end of my scripts but I would like to avoid modifying them.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/12458415",
    "html_url": "https://github.com/ipython/ipython/issues/2676#issuecomment-12458415",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/2676",
    "id": 12458415,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyNDU4NDE1",
    "user": {
      "login": "takluyver",
      "id": 327925,
      "node_id": "MDQ6VXNlcjMyNzkyNQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/327925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/takluyver",
      "html_url": "https://github.com/takluyver",
      "followers_url": "https://api.github.com/users/takluyver/followers",
      "following_url": "https://api.github.com/users/takluyver/following{/other_user}",
      "gists_url": "https://api.github.com/users/takluyver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/takluyver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/takluyver/subscriptions",
      "organizations_url": "https://api.github.com/users/takluyver/orgs",
      "repos_url": "https://api.github.com/users/takluyver/repos",
      "events_url": "https://api.github.com/users/takluyver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/takluyver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-01-19T18:02:06Z",
    "updated_at": "2013-01-19T18:02:06Z",
    "author_association": "MEMBER",
    "body": "Ah, I see. As a workaround, you can probably make your own magic command that will run a script and then run a cleanup function. (Don't try to run everything registered with atexit, because that could break IPython). But this does sound like a bug, so I'd like to fix it if possible.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/12458668",
    "html_url": "https://github.com/ipython/ipython/issues/2676#issuecomment-12458668",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/2676",
    "id": 12458668,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyNDU4NjY4",
    "user": {
      "login": "minrk",
      "id": 151929,
      "node_id": "MDQ6VXNlcjE1MTkyOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/151929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minrk",
      "html_url": "https://github.com/minrk",
      "followers_url": "https://api.github.com/users/minrk/followers",
      "following_url": "https://api.github.com/users/minrk/following{/other_user}",
      "gists_url": "https://api.github.com/users/minrk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minrk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minrk/subscriptions",
      "organizations_url": "https://api.github.com/users/minrk/orgs",
      "repos_url": "https://api.github.com/users/minrk/repos",
      "events_url": "https://api.github.com/users/minrk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minrk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-01-19T18:17:04Z",
    "updated_at": "2013-01-19T18:17:04Z",
    "author_association": "MEMBER",
    "body": "> Ah, I see. As a workaround, you can probably make your own magic command that will run a script and then run a cleanup function. (Don't try to run everything registered with atexit, because that could break IPython). But this does sound like a bug, so I'd like to fix it if possible.\n> \n> if there is a bug, it would probably be that we don't force sys.stdout/err back to our values after a run.  Which raises the question of whether we should do the same check on run_cell.  To me, it's not a bug so much as an extra protection against users messing with things.\n> \n> â€”\n> Reply to this email directly or view it on GitHub.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/12458933",
    "html_url": "https://github.com/ipython/ipython/issues/2676#issuecomment-12458933",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/2676",
    "id": 12458933,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyNDU4OTMz",
    "user": {
      "login": "takluyver",
      "id": 327925,
      "node_id": "MDQ6VXNlcjMyNzkyNQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/327925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/takluyver",
      "html_url": "https://github.com/takluyver",
      "followers_url": "https://api.github.com/users/takluyver/followers",
      "following_url": "https://api.github.com/users/takluyver/following{/other_user}",
      "gists_url": "https://api.github.com/users/takluyver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/takluyver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/takluyver/subscriptions",
      "organizations_url": "https://api.github.com/users/takluyver/orgs",
      "repos_url": "https://api.github.com/users/takluyver/repos",
      "events_url": "https://api.github.com/users/takluyver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/takluyver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-01-19T18:33:42Z",
    "updated_at": "2013-01-19T18:33:42Z",
    "author_association": "MEMBER",
    "body": "I'm not entirely clear why it happens at all, though - shouldn't readline be acting at a level that's not affected by redirecting stdout?\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/12459583",
    "html_url": "https://github.com/ipython/ipython/issues/2676#issuecomment-12459583",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/2676",
    "id": 12459583,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyNDU5NTgz",
    "user": {
      "login": "minrk",
      "id": 151929,
      "node_id": "MDQ6VXNlcjE1MTkyOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/151929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minrk",
      "html_url": "https://github.com/minrk",
      "followers_url": "https://api.github.com/users/minrk/followers",
      "following_url": "https://api.github.com/users/minrk/following{/other_user}",
      "gists_url": "https://api.github.com/users/minrk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minrk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minrk/subscriptions",
      "organizations_url": "https://api.github.com/users/minrk/orgs",
      "repos_url": "https://api.github.com/users/minrk/repos",
      "events_url": "https://api.github.com/users/minrk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minrk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-01-19T19:18:43Z",
    "updated_at": "2013-01-19T19:18:43Z",
    "author_association": "MEMBER",
    "body": "Ah, good point.  That is weird.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/12459655",
    "html_url": "https://github.com/ipython/ipython/issues/2676#issuecomment-12459655",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/2676",
    "id": 12459655,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyNDU5NjU1",
    "user": {
      "login": "thisch",
      "id": 206581,
      "node_id": "MDQ6VXNlcjIwNjU4MQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/206581?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thisch",
      "html_url": "https://github.com/thisch",
      "followers_url": "https://api.github.com/users/thisch/followers",
      "following_url": "https://api.github.com/users/thisch/following{/other_user}",
      "gists_url": "https://api.github.com/users/thisch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thisch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thisch/subscriptions",
      "organizations_url": "https://api.github.com/users/thisch/orgs",
      "repos_url": "https://api.github.com/users/thisch/repos",
      "events_url": "https://api.github.com/users/thisch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thisch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-01-19T19:23:10Z",
    "updated_at": "2013-01-19T19:23:10Z",
    "author_association": "CONTRIBUTOR",
    "body": "I have just verified that I do not have the described problem in a normal python shell - so its unlikely that the problem is caused by readline..\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/12460426",
    "html_url": "https://github.com/ipython/ipython/issues/2676#issuecomment-12460426",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/2676",
    "id": 12460426,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyNDYwNDI2",
    "user": {
      "login": "minrk",
      "id": 151929,
      "node_id": "MDQ6VXNlcjE1MTkyOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/151929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minrk",
      "html_url": "https://github.com/minrk",
      "followers_url": "https://api.github.com/users/minrk/followers",
      "following_url": "https://api.github.com/users/minrk/following{/other_user}",
      "gists_url": "https://api.github.com/users/minrk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minrk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minrk/subscriptions",
      "organizations_url": "https://api.github.com/users/minrk/orgs",
      "repos_url": "https://api.github.com/users/minrk/repos",
      "events_url": "https://api.github.com/users/minrk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minrk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-01-19T20:16:03Z",
    "updated_at": "2013-01-19T20:16:03Z",
    "author_association": "MEMBER",
    "body": "Well I can't for the life of me figure out what we do differently from regular Python that would matter here,\nbut you are right - code.interact does not bork readline if you redirect sys.stdout, so it's definitely fixable.\n"
  }
]
