[
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/47013342",
    "html_url": "https://github.com/ipython/ipython/issues/6039#issuecomment-47013342",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/6039",
    "id": 47013342,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3MDEzMzQy",
    "user": {
      "login": "minrk",
      "id": 151929,
      "node_id": "MDQ6VXNlcjE1MTkyOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/151929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minrk",
      "html_url": "https://github.com/minrk",
      "followers_url": "https://api.github.com/users/minrk/followers",
      "following_url": "https://api.github.com/users/minrk/following{/other_user}",
      "gists_url": "https://api.github.com/users/minrk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minrk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minrk/subscriptions",
      "organizations_url": "https://api.github.com/users/minrk/orgs",
      "repos_url": "https://api.github.com/users/minrk/repos",
      "events_url": "https://api.github.com/users/minrk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minrk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-06-24T18:42:52Z",
    "updated_at": "2014-06-24T18:42:52Z",
    "author_association": "MEMBER",
    "body": "Are you creating many Client objects in one process? What process is dying with the error?\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/47036550",
    "html_url": "https://github.com/ipython/ipython/issues/6039#issuecomment-47036550",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/6039",
    "id": 47036550,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3MDM2NTUw",
    "user": {
      "login": "shaunpatel",
      "id": 4933811,
      "node_id": "MDQ6VXNlcjQ5MzM4MTE=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/4933811?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shaunpatel",
      "html_url": "https://github.com/shaunpatel",
      "followers_url": "https://api.github.com/users/shaunpatel/followers",
      "following_url": "https://api.github.com/users/shaunpatel/following{/other_user}",
      "gists_url": "https://api.github.com/users/shaunpatel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shaunpatel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shaunpatel/subscriptions",
      "organizations_url": "https://api.github.com/users/shaunpatel/orgs",
      "repos_url": "https://api.github.com/users/shaunpatel/repos",
      "events_url": "https://api.github.com/users/shaunpatel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shaunpatel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-06-24T21:58:31Z",
    "updated_at": "2014-06-24T21:58:31Z",
    "author_association": "NONE",
    "body": "I'm running it on a 12-core machine and opening 24 processes when initiating the parallel processes. \n\nFrom other things I saw online, I thought perhaps it might be a ulimit issue. I'm unfamiliar with this but increased the limit and rerunning the code now to see if I still get an error. \n\nAny thoughts?\n\n> On Jun 24, 2014, at 2:43 PM, Min RK notifications@github.com wrote:\n> \n> Are you creating many Client objects in one process? What process is dying with the error?\n> \n> —\n> Reply to this email directly or view it on GitHub.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/47040839",
    "html_url": "https://github.com/ipython/ipython/issues/6039#issuecomment-47040839",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/6039",
    "id": 47040839,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3MDQwODM5",
    "user": {
      "login": "minrk",
      "id": 151929,
      "node_id": "MDQ6VXNlcjE1MTkyOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/151929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minrk",
      "html_url": "https://github.com/minrk",
      "followers_url": "https://api.github.com/users/minrk/followers",
      "following_url": "https://api.github.com/users/minrk/following{/other_user}",
      "gists_url": "https://api.github.com/users/minrk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minrk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minrk/subscriptions",
      "organizations_url": "https://api.github.com/users/minrk/orgs",
      "repos_url": "https://api.github.com/users/minrk/repos",
      "events_url": "https://api.github.com/users/minrk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minrk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-06-24T22:47:53Z",
    "updated_at": "2014-06-24T22:47:53Z",
    "author_association": "MEMBER",
    "body": "You are creating 24 clients simultaneously? Why? How are you starting the engines? Do you have any ipcluster config?\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/47049408",
    "html_url": "https://github.com/ipython/ipython/issues/6039#issuecomment-47049408",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/6039",
    "id": 47049408,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3MDQ5NDA4",
    "user": {
      "login": "shaunpatel",
      "id": 4933811,
      "node_id": "MDQ6VXNlcjQ5MzM4MTE=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/4933811?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shaunpatel",
      "html_url": "https://github.com/shaunpatel",
      "followers_url": "https://api.github.com/users/shaunpatel/followers",
      "following_url": "https://api.github.com/users/shaunpatel/following{/other_user}",
      "gists_url": "https://api.github.com/users/shaunpatel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shaunpatel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shaunpatel/subscriptions",
      "organizations_url": "https://api.github.com/users/shaunpatel/orgs",
      "repos_url": "https://api.github.com/users/shaunpatel/repos",
      "events_url": "https://api.github.com/users/shaunpatel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shaunpatel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-06-25T00:59:54Z",
    "updated_at": "2014-06-25T00:59:54Z",
    "author_association": "NONE",
    "body": "Yes. I use ‘ipcluster start’ to start the threads. I don’t specific a cluster parameter, 24 are opened (I am running this on a single 12-core computer). I have verified that 24 threads are open and running with ‘top’. I haven’t changed anything in the ipcluster config.\n\nI am using 24 threads because I am performing a multi-taper coherence analysis on a set of very long time series recording sampled at a high rate. \n\nAny thoughts would be greatly appreciated! \n\nOn Jun 24, 2014, at 6:48 PM, Min RK notifications@github.com wrote:\n\n> You are creating 24 clients simultaneously? Why? How are you starting the engines? Do you have any ipcluster config?\n> \n> —\n> Reply to this email directly or view it on GitHub.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/47056600",
    "html_url": "https://github.com/ipython/ipython/issues/6039#issuecomment-47056600",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/6039",
    "id": 47056600,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3MDU2NjAw",
    "user": {
      "login": "minrk",
      "id": 151929,
      "node_id": "MDQ6VXNlcjE1MTkyOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/151929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minrk",
      "html_url": "https://github.com/minrk",
      "followers_url": "https://api.github.com/users/minrk/followers",
      "following_url": "https://api.github.com/users/minrk/following{/other_user}",
      "gists_url": "https://api.github.com/users/minrk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minrk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minrk/subscriptions",
      "organizations_url": "https://api.github.com/users/minrk/orgs",
      "repos_url": "https://api.github.com/users/minrk/repos",
      "events_url": "https://api.github.com/users/minrk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minrk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-06-25T03:18:37Z",
    "updated_at": "2014-06-25T03:18:37Z",
    "author_association": "MEMBER",
    "body": "Sorry, my question is why are you creating so many _Client_ objects. How are you instantiating the Clients? Are you doing it many times? What program is dying with the ZMQError? Is it a Client, an Engine, or the Controller?\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/47057021",
    "html_url": "https://github.com/ipython/ipython/issues/6039#issuecomment-47057021",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/6039",
    "id": 47057021,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3MDU3MDIx",
    "user": {
      "login": "shaunpatel",
      "id": 4933811,
      "node_id": "MDQ6VXNlcjQ5MzM4MTE=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/4933811?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shaunpatel",
      "html_url": "https://github.com/shaunpatel",
      "followers_url": "https://api.github.com/users/shaunpatel/followers",
      "following_url": "https://api.github.com/users/shaunpatel/following{/other_user}",
      "gists_url": "https://api.github.com/users/shaunpatel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shaunpatel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shaunpatel/subscriptions",
      "organizations_url": "https://api.github.com/users/shaunpatel/orgs",
      "repos_url": "https://api.github.com/users/shaunpatel/repos",
      "events_url": "https://api.github.com/users/shaunpatel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shaunpatel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-06-25T03:27:58Z",
    "updated_at": "2014-06-25T03:27:58Z",
    "author_association": "NONE",
    "body": "I would like to run the analysis as fast as possible. I am assuming that more Clients will result in the greatest speedup. Is this an incorrect assumption? \n\nThe 24 Clients are being instantiated once with the ipcluster start on the terminal command line, and then initiated into a python object with the Client() class. Once they are initiated, I run the analysis, which is taking about 24 hours. During each iteration of the loop, a data set is being scattered to each of the Clients, analyses are performed, returned and compiled. A clear cache function, see previous, is then called before the next data is loaded and processed.\n\nThe traceback points to where I instantiate the python client object: rc = Client() on the ~80th iteration of the loop (~12 hours into the analysis).\n\nTo be clear, the ipcluster start command is only called once here — at the beginning of the analysis. Should I be stopping and starting this for each iteration of the loop? Some subset?\n\nOn Jun 24, 2014, at 11:18 PM, Min RK notifications@github.com wrote:\n\n> Sorry, my question is why are you creating so many Client objects. How are you instantiating the Clients? Are you doing it many times? What program is dying with the ZMQError? Is it a Client, an Engine, or the Controller?\n> \n> —\n> Reply to this email directly or view it on GitHub.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/47057223",
    "html_url": "https://github.com/ipython/ipython/issues/6039#issuecomment-47057223",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/6039",
    "id": 47057223,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3MDU3MjIz",
    "user": {
      "login": "minrk",
      "id": 151929,
      "node_id": "MDQ6VXNlcjE1MTkyOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/151929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minrk",
      "html_url": "https://github.com/minrk",
      "followers_url": "https://api.github.com/users/minrk/followers",
      "following_url": "https://api.github.com/users/minrk/following{/other_user}",
      "gists_url": "https://api.github.com/users/minrk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minrk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minrk/subscriptions",
      "organizations_url": "https://api.github.com/users/minrk/orgs",
      "repos_url": "https://api.github.com/users/minrk/repos",
      "events_url": "https://api.github.com/users/minrk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minrk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-06-25T03:33:15Z",
    "updated_at": "2014-06-25T03:33:33Z",
    "author_association": "MEMBER",
    "body": "Adding Clients definitely does not improve performance. If anything, it slows things down due to increased network traffic.  But I think there might be some confusion, here. `ipcluster start` doesn't create any Client objects; it creates one Controller and N Engines.\n\nHow many times are you calling `rc = Client()`, and why is it more than one?\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/47057487",
    "html_url": "https://github.com/ipython/ipython/issues/6039#issuecomment-47057487",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/6039",
    "id": 47057487,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3MDU3NDg3",
    "user": {
      "login": "shaunpatel",
      "id": 4933811,
      "node_id": "MDQ6VXNlcjQ5MzM4MTE=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/4933811?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shaunpatel",
      "html_url": "https://github.com/shaunpatel",
      "followers_url": "https://api.github.com/users/shaunpatel/followers",
      "following_url": "https://api.github.com/users/shaunpatel/following{/other_user}",
      "gists_url": "https://api.github.com/users/shaunpatel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shaunpatel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shaunpatel/subscriptions",
      "organizations_url": "https://api.github.com/users/shaunpatel/orgs",
      "repos_url": "https://api.github.com/users/shaunpatel/repos",
      "events_url": "https://api.github.com/users/shaunpatel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shaunpatel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-06-25T03:40:10Z",
    "updated_at": "2014-06-25T03:40:10Z",
    "author_association": "NONE",
    "body": "You're right. I was confused.\n\nI am starting 24 engines, not clients. I am calling rc = client() each iteration of the loop. It is crashing after about the ~80th call. \n\nI didn't realize this only needed to be called once. I left this code (rc = Client()) inside the function that is called each iteration, which scatters, executes, gathers the data, and clears the cache. \n\nDo you think this is the issue?\n\n> On Jun 24, 2014, at 11:33 PM, Min RK notifications@github.com wrote:\n> \n> Adding Clients definitely does not improve performance. If anything, it slows things down due to increased network traffic. But I think there might be some confusion, here. ipcluster doesn't create any Client objects; it creates one Controller and N Engines.\n> \n> How many times are you calling rc = Client(), and why is it more than one?\n> \n> —\n> Reply to this email directly or view it on GitHub.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/47063181",
    "html_url": "https://github.com/ipython/ipython/issues/6039#issuecomment-47063181",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/6039",
    "id": 47063181,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3MDYzMTgx",
    "user": {
      "login": "minrk",
      "id": 151929,
      "node_id": "MDQ6VXNlcjE1MTkyOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/151929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minrk",
      "html_url": "https://github.com/minrk",
      "followers_url": "https://api.github.com/users/minrk/followers",
      "following_url": "https://api.github.com/users/minrk/following{/other_user}",
      "gists_url": "https://api.github.com/users/minrk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minrk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minrk/subscriptions",
      "organizations_url": "https://api.github.com/users/minrk/orgs",
      "repos_url": "https://api.github.com/users/minrk/repos",
      "events_url": "https://api.github.com/users/minrk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minrk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-06-25T05:57:17Z",
    "updated_at": "2014-06-25T05:57:17Z",
    "author_association": "MEMBER",
    "body": "Yes, this is probably the issue. If you still want to keep creating many Clients (I would recommend against it, if you can avoid it), make sure you call `Client.close()` when you are done with one.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/47098024",
    "html_url": "https://github.com/ipython/ipython/issues/6039#issuecomment-47098024",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/6039",
    "id": 47098024,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3MDk4MDI0",
    "user": {
      "login": "shaunpatel",
      "id": 4933811,
      "node_id": "MDQ6VXNlcjQ5MzM4MTE=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/4933811?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shaunpatel",
      "html_url": "https://github.com/shaunpatel",
      "followers_url": "https://api.github.com/users/shaunpatel/followers",
      "following_url": "https://api.github.com/users/shaunpatel/following{/other_user}",
      "gists_url": "https://api.github.com/users/shaunpatel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shaunpatel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shaunpatel/subscriptions",
      "organizations_url": "https://api.github.com/users/shaunpatel/orgs",
      "repos_url": "https://api.github.com/users/shaunpatel/repos",
      "events_url": "https://api.github.com/users/shaunpatel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shaunpatel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-06-25T13:08:50Z",
    "updated_at": "2014-06-25T13:08:50Z",
    "author_association": "NONE",
    "body": "Thanks! I just notified the run from last night that increasing the ulimit did allow the analysis to go much farther. Though I suspect all those open Client objects are sitting there open. \n\nI added the Client.close function and am attempting again. Will update tomorrow once it has run. \n\nThanks so much!\n\n> On Jun 25, 2014, at 1:57 AM, Min RK notifications@github.com wrote:\n> \n> Yes, this is probably the issue. If you still want to keep creating many Clients (I would recommend against it, if you can avoid it), make sure you call Client.close() when you are done with one.\n> \n> —\n> Reply to this email directly or view it on GitHub.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/421220157",
    "html_url": "https://github.com/ipython/ipython/issues/6039#issuecomment-421220157",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/6039",
    "id": 421220157,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyMTIyMDE1Nw==",
    "user": {
      "login": "OliverEvans96",
      "id": 15915043,
      "node_id": "MDQ6VXNlcjE1OTE1MDQz",
      "avatar_url": "https://avatars2.githubusercontent.com/u/15915043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/OliverEvans96",
      "html_url": "https://github.com/OliverEvans96",
      "followers_url": "https://api.github.com/users/OliverEvans96/followers",
      "following_url": "https://api.github.com/users/OliverEvans96/following{/other_user}",
      "gists_url": "https://api.github.com/users/OliverEvans96/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/OliverEvans96/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/OliverEvans96/subscriptions",
      "organizations_url": "https://api.github.com/users/OliverEvans96/orgs",
      "repos_url": "https://api.github.com/users/OliverEvans96/repos",
      "events_url": "https://api.github.com/users/OliverEvans96/events{/privacy}",
      "received_events_url": "https://api.github.com/users/OliverEvans96/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-09-14T03:29:59Z",
    "updated_at": "2018-09-14T03:29:59Z",
    "author_association": "NONE",
    "body": "Is there a way to globally access the Client object created in the current process without creating a new one or passing the old one around?"
  }
]
