[
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/84467618",
    "html_url": "https://github.com/ipython/ipython/pull/8107#issuecomment-84467618",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/8107",
    "id": 84467618,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0NDY3NjE4",
    "user": {
      "login": "SylvainCorlay",
      "id": 2397974,
      "node_id": "MDQ6VXNlcjIzOTc5NzQ=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/2397974?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SylvainCorlay",
      "html_url": "https://github.com/SylvainCorlay",
      "followers_url": "https://api.github.com/users/SylvainCorlay/followers",
      "following_url": "https://api.github.com/users/SylvainCorlay/following{/other_user}",
      "gists_url": "https://api.github.com/users/SylvainCorlay/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SylvainCorlay/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SylvainCorlay/subscriptions",
      "organizations_url": "https://api.github.com/users/SylvainCorlay/orgs",
      "repos_url": "https://api.github.com/users/SylvainCorlay/repos",
      "events_url": "https://api.github.com/users/SylvainCorlay/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SylvainCorlay/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-03-21T22:55:55Z",
    "updated_at": "2015-03-25T18:22:25Z",
    "author_association": "MEMBER",
    "body": "<del>This still requires some cleanup.</del>\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/86155417",
    "html_url": "https://github.com/ipython/ipython/pull/8107#issuecomment-86155417",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/8107",
    "id": 86155417,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg2MTU1NDE3",
    "user": {
      "login": "minrk",
      "id": 151929,
      "node_id": "MDQ6VXNlcjE1MTkyOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/151929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minrk",
      "html_url": "https://github.com/minrk",
      "followers_url": "https://api.github.com/users/minrk/followers",
      "following_url": "https://api.github.com/users/minrk/following{/other_user}",
      "gists_url": "https://api.github.com/users/minrk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minrk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minrk/subscriptions",
      "organizations_url": "https://api.github.com/users/minrk/orgs",
      "repos_url": "https://api.github.com/users/minrk/repos",
      "events_url": "https://api.github.com/users/minrk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minrk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-03-25T18:13:53Z",
    "updated_at": "2015-03-25T18:13:53Z",
    "author_association": "MEMBER",
    "body": "Are there any examples remaining where the default behavior is used? If not, this probably is not the right thing to do.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/86157884",
    "html_url": "https://github.com/ipython/ipython/pull/8107#issuecomment-86157884",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/8107",
    "id": 86157884,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg2MTU3ODg0",
    "user": {
      "login": "SylvainCorlay",
      "id": 2397974,
      "node_id": "MDQ6VXNlcjIzOTc5NzQ=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/2397974?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SylvainCorlay",
      "html_url": "https://github.com/SylvainCorlay",
      "followers_url": "https://api.github.com/users/SylvainCorlay/followers",
      "following_url": "https://api.github.com/users/SylvainCorlay/following{/other_user}",
      "gists_url": "https://api.github.com/users/SylvainCorlay/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SylvainCorlay/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SylvainCorlay/subscriptions",
      "organizations_url": "https://api.github.com/users/SylvainCorlay/orgs",
      "repos_url": "https://api.github.com/users/SylvainCorlay/repos",
      "events_url": "https://api.github.com/users/SylvainCorlay/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SylvainCorlay/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-03-25T18:20:17Z",
    "updated_at": "2015-03-25T18:20:17Z",
    "author_association": "MEMBER",
    "body": "- It I type `List(trait=Instance(Foo))`, I would not expect `[None]` to be allowed.\n- There are number of cases in IPython codebase were args and kwargs are provided to construct a default value. In those case, I did not need to specify `allow_none=True`\n- and currently, having `allow_none=True` by default makes Type and Instance special cases that people have to know about. \n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/86161643",
    "html_url": "https://github.com/ipython/ipython/pull/8107#issuecomment-86161643",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/8107",
    "id": 86161643,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg2MTYxNjQz",
    "user": {
      "login": "SylvainCorlay",
      "id": 2397974,
      "node_id": "MDQ6VXNlcjIzOTc5NzQ=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/2397974?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SylvainCorlay",
      "html_url": "https://github.com/SylvainCorlay",
      "followers_url": "https://api.github.com/users/SylvainCorlay/followers",
      "following_url": "https://api.github.com/users/SylvainCorlay/following{/other_user}",
      "gists_url": "https://api.github.com/users/SylvainCorlay/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SylvainCorlay/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SylvainCorlay/subscriptions",
      "organizations_url": "https://api.github.com/users/SylvainCorlay/orgs",
      "repos_url": "https://api.github.com/users/SylvainCorlay/repos",
      "events_url": "https://api.github.com/users/SylvainCorlay/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SylvainCorlay/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-03-25T18:31:36Z",
    "updated_at": "2015-03-25T18:31:36Z",
    "author_association": "MEMBER",
    "body": "Rebased.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/86638287",
    "html_url": "https://github.com/ipython/ipython/pull/8107#issuecomment-86638287",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/8107",
    "id": 86638287,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg2NjM4Mjg3",
    "user": {
      "login": "minrk",
      "id": 151929,
      "node_id": "MDQ6VXNlcjE1MTkyOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/151929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minrk",
      "html_url": "https://github.com/minrk",
      "followers_url": "https://api.github.com/users/minrk/followers",
      "following_url": "https://api.github.com/users/minrk/following{/other_user}",
      "gists_url": "https://api.github.com/users/minrk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minrk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minrk/subscriptions",
      "organizations_url": "https://api.github.com/users/minrk/orgs",
      "repos_url": "https://api.github.com/users/minrk/repos",
      "events_url": "https://api.github.com/users/minrk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minrk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-03-26T17:37:29Z",
    "updated_at": "2015-03-26T17:37:29Z",
    "author_association": "MEMBER",
    "body": "I think there's something unexpected in how these traits are initialized, because there are many cases where you have added `allow_none=True` that shouldn't need it. I'm guessing that it's because they are validating a None value that they don't actually use. Can you look into that?\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/87047115",
    "html_url": "https://github.com/ipython/ipython/pull/8107#issuecomment-87047115",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/8107",
    "id": 87047115,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3MDQ3MTE1",
    "user": {
      "login": "minrk",
      "id": 151929,
      "node_id": "MDQ6VXNlcjE1MTkyOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/151929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minrk",
      "html_url": "https://github.com/minrk",
      "followers_url": "https://api.github.com/users/minrk/followers",
      "following_url": "https://api.github.com/users/minrk/following{/other_user}",
      "gists_url": "https://api.github.com/users/minrk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minrk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minrk/subscriptions",
      "organizations_url": "https://api.github.com/users/minrk/orgs",
      "repos_url": "https://api.github.com/users/minrk/repos",
      "events_url": "https://api.github.com/users/minrk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minrk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-03-27T18:36:26Z",
    "updated_at": "2015-03-27T18:36:26Z",
    "author_association": "MEMBER",
    "body": "From your points, I think this change in behavior is the right thing to do. I don't think there should be any need for `allow_none=True` on any of our uses of Type, and I think a few of the Instances with `_foo_default` defined or default constructor args got `allow_none=True` that shouldn't need them. If they do need them, then there's a problem with initialization, where an unused default value is getting validated.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/87050310",
    "html_url": "https://github.com/ipython/ipython/pull/8107#issuecomment-87050310",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/8107",
    "id": 87050310,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3MDUwMzEw",
    "user": {
      "login": "minrk",
      "id": 151929,
      "node_id": "MDQ6VXNlcjE1MTkyOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/151929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minrk",
      "html_url": "https://github.com/minrk",
      "followers_url": "https://api.github.com/users/minrk/followers",
      "following_url": "https://api.github.com/users/minrk/following{/other_user}",
      "gists_url": "https://api.github.com/users/minrk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minrk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minrk/subscriptions",
      "organizations_url": "https://api.github.com/users/minrk/orgs",
      "repos_url": "https://api.github.com/users/minrk/repos",
      "events_url": "https://api.github.com/users/minrk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minrk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-03-27T18:48:14Z",
    "updated_at": "2015-03-27T18:48:25Z",
    "author_association": "MEMBER",
    "body": "It seems like most cases where we have `allow_none=True` on Instance it's because the initial assignment happens after the construction of the object, so None is validated even though it is never used. Most of the cases where `allow_none=True` is added, the trait should actually not be allowed to be None.\n\nIt seems like the fix should be for the case:\n\n``` python\nclass C(HasTraits):\n    inst = Instance(SomeObject)\n\nc1 = C(inst=SomeObject()) # correctly skips validation of unused default\n\nc2 = C()\nc2.inst # should validate default None\n\nc3 = C()\nc3.inst = SomeObject() # shouldn't validate unused default, but does\n```\n\nThe default value retrieved when setting `c.inst` should _not_ be validated, since it is guaranteed to never be used.\n\nGiven how traits work, I'm not sure that's feasible to fix right now, but it seems like the right behavior. If you don't think that's doable here, I think we can have the extra allow_none=True as an acceptable wart that we can work on removing later.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/87052428",
    "html_url": "https://github.com/ipython/ipython/pull/8107#issuecomment-87052428",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/8107",
    "id": 87052428,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3MDUyNDI4",
    "user": {
      "login": "SylvainCorlay",
      "id": 2397974,
      "node_id": "MDQ6VXNlcjIzOTc5NzQ=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/2397974?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SylvainCorlay",
      "html_url": "https://github.com/SylvainCorlay",
      "followers_url": "https://api.github.com/users/SylvainCorlay/followers",
      "following_url": "https://api.github.com/users/SylvainCorlay/following{/other_user}",
      "gists_url": "https://api.github.com/users/SylvainCorlay/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SylvainCorlay/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SylvainCorlay/subscriptions",
      "organizations_url": "https://api.github.com/users/SylvainCorlay/orgs",
      "repos_url": "https://api.github.com/users/SylvainCorlay/repos",
      "events_url": "https://api.github.com/users/SylvainCorlay/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SylvainCorlay/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-03-27T18:52:42Z",
    "updated_at": "2015-03-27T18:52:42Z",
    "author_association": "MEMBER",
    "body": "I completely agree with you. I guess that we can live with allowing None in the last case\n\n```\nc3 = C()\nc3.inst = SomeObject() \n```\n\nsince we were allowing None all the time so far.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/87063569",
    "html_url": "https://github.com/ipython/ipython/pull/8107#issuecomment-87063569",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/8107",
    "id": 87063569,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3MDYzNTY5",
    "user": {
      "login": "SylvainCorlay",
      "id": 2397974,
      "node_id": "MDQ6VXNlcjIzOTc5NzQ=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/2397974?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SylvainCorlay",
      "html_url": "https://github.com/SylvainCorlay",
      "followers_url": "https://api.github.com/users/SylvainCorlay/followers",
      "following_url": "https://api.github.com/users/SylvainCorlay/following{/other_user}",
      "gists_url": "https://api.github.com/users/SylvainCorlay/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SylvainCorlay/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SylvainCorlay/subscriptions",
      "organizations_url": "https://api.github.com/users/SylvainCorlay/orgs",
      "repos_url": "https://api.github.com/users/SylvainCorlay/repos",
      "events_url": "https://api.github.com/users/SylvainCorlay/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SylvainCorlay/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-03-27T19:21:48Z",
    "updated_at": "2015-03-27T19:21:48Z",
    "author_association": "MEMBER",
    "body": "Rebased.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/87103472",
    "html_url": "https://github.com/ipython/ipython/pull/8107#issuecomment-87103472",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/8107",
    "id": 87103472,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3MTAzNDcy",
    "user": {
      "login": "minrk",
      "id": 151929,
      "node_id": "MDQ6VXNlcjE1MTkyOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/151929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minrk",
      "html_url": "https://github.com/minrk",
      "followers_url": "https://api.github.com/users/minrk/followers",
      "following_url": "https://api.github.com/users/minrk/following{/other_user}",
      "gists_url": "https://api.github.com/users/minrk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minrk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minrk/subscriptions",
      "organizations_url": "https://api.github.com/users/minrk/orgs",
      "repos_url": "https://api.github.com/users/minrk/repos",
      "events_url": "https://api.github.com/users/minrk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minrk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-03-27T21:57:23Z",
    "updated_at": "2015-03-27T21:57:23Z",
    "author_association": "MEMBER",
    "body": "@SylvainCorlay ping me when you've finished removing the extra allow_none=True, and we can get this one in.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/87106261",
    "html_url": "https://github.com/ipython/ipython/pull/8107#issuecomment-87106261",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/8107",
    "id": 87106261,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3MTA2MjYx",
    "user": {
      "login": "SylvainCorlay",
      "id": 2397974,
      "node_id": "MDQ6VXNlcjIzOTc5NzQ=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/2397974?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SylvainCorlay",
      "html_url": "https://github.com/SylvainCorlay",
      "followers_url": "https://api.github.com/users/SylvainCorlay/followers",
      "following_url": "https://api.github.com/users/SylvainCorlay/following{/other_user}",
      "gists_url": "https://api.github.com/users/SylvainCorlay/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SylvainCorlay/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SylvainCorlay/subscriptions",
      "organizations_url": "https://api.github.com/users/SylvainCorlay/orgs",
      "repos_url": "https://api.github.com/users/SylvainCorlay/repos",
      "events_url": "https://api.github.com/users/SylvainCorlay/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SylvainCorlay/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-03-27T22:17:42Z",
    "updated_at": "2015-03-27T22:17:42Z",
    "author_association": "MEMBER",
    "body": "Sorry for the late reply. I was swamped with meetings and messed up the rebase between two of them. Looking at it now.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/87132460",
    "html_url": "https://github.com/ipython/ipython/pull/8107#issuecomment-87132460",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/8107",
    "id": 87132460,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3MTMyNDYw",
    "user": {
      "login": "minrk",
      "id": 151929,
      "node_id": "MDQ6VXNlcjE1MTkyOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/151929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minrk",
      "html_url": "https://github.com/minrk",
      "followers_url": "https://api.github.com/users/minrk/followers",
      "following_url": "https://api.github.com/users/minrk/following{/other_user}",
      "gists_url": "https://api.github.com/users/minrk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minrk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minrk/subscriptions",
      "organizations_url": "https://api.github.com/users/minrk/orgs",
      "repos_url": "https://api.github.com/users/minrk/repos",
      "events_url": "https://api.github.com/users/minrk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minrk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-03-28T00:38:47Z",
    "updated_at": "2015-03-28T00:38:47Z",
    "author_association": "MEMBER",
    "body": "All, green. Thanks for finishing this one!\n"
  }
]
