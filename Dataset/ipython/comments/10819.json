[
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/332546212",
    "html_url": "https://github.com/ipython/ipython/issues/10819#issuecomment-332546212",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/10819",
    "id": 332546212,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMjU0NjIxMg==",
    "user": {
      "login": "takluyver",
      "id": 327925,
      "node_id": "MDQ6VXNlcjMyNzkyNQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/327925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/takluyver",
      "html_url": "https://github.com/takluyver",
      "followers_url": "https://api.github.com/users/takluyver/followers",
      "following_url": "https://api.github.com/users/takluyver/following{/other_user}",
      "gists_url": "https://api.github.com/users/takluyver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/takluyver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/takluyver/subscriptions",
      "organizations_url": "https://api.github.com/users/takluyver/orgs",
      "repos_url": "https://api.github.com/users/takluyver/repos",
      "events_url": "https://api.github.com/users/takluyver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/takluyver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-27T14:48:05Z",
    "updated_at": "2017-09-27T14:48:05Z",
    "author_association": "MEMBER",
    "body": "I guess this is because prompt_toolkit handles completions on a separate thread. @Carreau , do you know what you want to do about it?"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/332789983",
    "html_url": "https://github.com/ipython/ipython/issues/10819#issuecomment-332789983",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/10819",
    "id": 332789983,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMjc4OTk4Mw==",
    "user": {
      "login": "dimpase",
      "id": 1276956,
      "node_id": "MDQ6VXNlcjEyNzY5NTY=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/1276956?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dimpase",
      "html_url": "https://github.com/dimpase",
      "followers_url": "https://api.github.com/users/dimpase/followers",
      "following_url": "https://api.github.com/users/dimpase/following{/other_user}",
      "gists_url": "https://api.github.com/users/dimpase/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dimpase/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dimpase/subscriptions",
      "organizations_url": "https://api.github.com/users/dimpase/orgs",
      "repos_url": "https://api.github.com/users/dimpase/repos",
      "events_url": "https://api.github.com/users/dimpase/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dimpase/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-28T10:03:15Z",
    "updated_at": "2017-09-28T10:03:15Z",
    "author_association": "NONE",
    "body": "Is it possible to provide a non-interactive test for tab completion? I have a similar issue involving ipython 5.1.0, the one included in Sagemath 8.0, and I need to do this kind of test (hit TAB to complete a Python command) many time to track down a [regression](https://trac.sagemath.org/ticket/23700#comment:11).\r\n\r\nAnd it's good to have a test in docstrings, so that we know things don't get broken."
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/332792282",
    "html_url": "https://github.com/ipython/ipython/issues/10819#issuecomment-332792282",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/10819",
    "id": 332792282,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMjc5MjI4Mg==",
    "user": {
      "login": "takluyver",
      "id": 327925,
      "node_id": "MDQ6VXNlcjMyNzkyNQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/327925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/takluyver",
      "html_url": "https://github.com/takluyver",
      "followers_url": "https://api.github.com/users/takluyver/followers",
      "following_url": "https://api.github.com/users/takluyver/following{/other_user}",
      "gists_url": "https://api.github.com/users/takluyver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/takluyver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/takluyver/subscriptions",
      "organizations_url": "https://api.github.com/users/takluyver/orgs",
      "repos_url": "https://api.github.com/users/takluyver/repos",
      "events_url": "https://api.github.com/users/takluyver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/takluyver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-28T10:13:13Z",
    "updated_at": "2017-09-28T10:13:13Z",
    "author_association": "MEMBER",
    "body": "It's certainly possible to write tests for our tab completion machinery (see [some of our tests](https://github.com/ipython/ipython/blob/master/IPython/core/tests/test_completer.py)), but it doesn't test it through prompt_toolkit, which is what's running it in a separate thread. I don't know of a way to do that."
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/332798587",
    "html_url": "https://github.com/ipython/ipython/issues/10819#issuecomment-332798587",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/10819",
    "id": 332798587,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMjc5ODU4Nw==",
    "user": {
      "login": "dimpase",
      "id": 1276956,
      "node_id": "MDQ6VXNlcjEyNzY5NTY=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/1276956?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dimpase",
      "html_url": "https://github.com/dimpase",
      "followers_url": "https://api.github.com/users/dimpase/followers",
      "following_url": "https://api.github.com/users/dimpase/following{/other_user}",
      "gists_url": "https://api.github.com/users/dimpase/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dimpase/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dimpase/subscriptions",
      "organizations_url": "https://api.github.com/users/dimpase/orgs",
      "repos_url": "https://api.github.com/users/dimpase/repos",
      "events_url": "https://api.github.com/users/dimpase/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dimpase/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-28T10:42:36Z",
    "updated_at": "2017-09-28T10:42:36Z",
    "author_association": "NONE",
    "body": "The whole point that it **does** run in a separate thread, and that's what causes the segfault in my case. (It calls an extension initialised in the main thread, that's why)."
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/332934841",
    "html_url": "https://github.com/ipython/ipython/issues/10819#issuecomment-332934841",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/10819",
    "id": 332934841,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMjkzNDg0MQ==",
    "user": {
      "login": "Carreau",
      "id": 335567,
      "node_id": "MDQ6VXNlcjMzNTU2Nw==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/335567?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Carreau",
      "html_url": "https://github.com/Carreau",
      "followers_url": "https://api.github.com/users/Carreau/followers",
      "following_url": "https://api.github.com/users/Carreau/following{/other_user}",
      "gists_url": "https://api.github.com/users/Carreau/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Carreau/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Carreau/subscriptions",
      "organizations_url": "https://api.github.com/users/Carreau/orgs",
      "repos_url": "https://api.github.com/users/Carreau/repos",
      "events_url": "https://api.github.com/users/Carreau/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Carreau/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-28T19:08:56Z",
    "updated_at": "2017-09-28T19:08:56Z",
    "author_association": "MEMBER",
    "body": "I'll see if we can protect from any exception here. It's just jedi raising so  it should be easyish to mock. "
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/333341437",
    "html_url": "https://github.com/ipython/ipython/issues/10819#issuecomment-333341437",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/10819",
    "id": 333341437,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMzM0MTQzNw==",
    "user": {
      "login": "dimpase",
      "id": 1276956,
      "node_id": "MDQ6VXNlcjEyNzY5NTY=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/1276956?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dimpase",
      "html_url": "https://github.com/dimpase",
      "followers_url": "https://api.github.com/users/dimpase/followers",
      "following_url": "https://api.github.com/users/dimpase/following{/other_user}",
      "gists_url": "https://api.github.com/users/dimpase/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dimpase/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dimpase/subscriptions",
      "organizations_url": "https://api.github.com/users/dimpase/orgs",
      "repos_url": "https://api.github.com/users/dimpase/repos",
      "events_url": "https://api.github.com/users/dimpase/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dimpase/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-30T22:59:34Z",
    "updated_at": "2017-09-30T22:59:34Z",
    "author_association": "NONE",
    "body": "I don't see how it can be easy --- short of running single-thread. Indeed, the extension I am talking around has an embedded Common Lisp system ECL, which uses Boehm GC. The latter (and thus the whole memory management of ECL) needs to know the thread it is called from for correct execution. \r\nNow, with the introduction of a separate thread for tab completion, one can e.g. start the extension in the main thread and then call it in the tab completion thread (or the other way around) and get a segfault."
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/333343344",
    "html_url": "https://github.com/ipython/ipython/issues/10819#issuecomment-333343344",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/10819",
    "id": 333343344,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMzM0MzM0NA==",
    "user": {
      "login": "dimpase",
      "id": 1276956,
      "node_id": "MDQ6VXNlcjEyNzY5NTY=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/1276956?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dimpase",
      "html_url": "https://github.com/dimpase",
      "followers_url": "https://api.github.com/users/dimpase/followers",
      "following_url": "https://api.github.com/users/dimpase/following{/other_user}",
      "gists_url": "https://api.github.com/users/dimpase/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dimpase/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dimpase/subscriptions",
      "organizations_url": "https://api.github.com/users/dimpase/orgs",
      "repos_url": "https://api.github.com/users/dimpase/repos",
      "events_url": "https://api.github.com/users/dimpase/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dimpase/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-30T23:38:53Z",
    "updated_at": "2017-09-30T23:38:53Z",
    "author_association": "NONE",
    "body": "Can tab completion involve importing of modules? If you do importing from several threads, it might end in a race of some sort."
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/370249399",
    "html_url": "https://github.com/ipython/ipython/issues/10819#issuecomment-370249399",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/10819",
    "id": 370249399,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MDI0OTM5OQ==",
    "user": {
      "login": "ritiek",
      "id": 20314742,
      "node_id": "MDQ6VXNlcjIwMzE0NzQy",
      "avatar_url": "https://avatars1.githubusercontent.com/u/20314742?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ritiek",
      "html_url": "https://github.com/ritiek",
      "followers_url": "https://api.github.com/users/ritiek/followers",
      "following_url": "https://api.github.com/users/ritiek/following{/other_user}",
      "gists_url": "https://api.github.com/users/ritiek/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ritiek/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ritiek/subscriptions",
      "organizations_url": "https://api.github.com/users/ritiek/orgs",
      "repos_url": "https://api.github.com/users/ritiek/repos",
      "events_url": "https://api.github.com/users/ritiek/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ritiek/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-04T18:00:01Z",
    "updated_at": "2018-03-04T18:00:01Z",
    "author_association": "NONE",
    "body": "Ditto same error appears with [PlasmaPy](https://github.com/PlasmaPy/PlasmaPy):\r\n```python\r\n>>> from plasmapy.atomic import Particle\r\n# AttributeError\r\n>>> Particle('He').<tab>\r\n```\r\nAlthough, it works fine if we assign `Particle` to a variable first:\r\n```python\r\n>>> from plasmapy.atomic import Particle\r\n>>> x = Particle('He')\r\n# Works OK\r\n>>> x.<tab>\r\n```\r\nI am not sure if `threading` is responsible in this case as well."
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/448196912",
    "html_url": "https://github.com/ipython/ipython/issues/10819#issuecomment-448196912",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/10819",
    "id": 448196912,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0ODE5NjkxMg==",
    "user": {
      "login": "antontarasenko",
      "id": 6628679,
      "node_id": "MDQ6VXNlcjY2Mjg2Nzk=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/6628679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/antontarasenko",
      "html_url": "https://github.com/antontarasenko",
      "followers_url": "https://api.github.com/users/antontarasenko/followers",
      "following_url": "https://api.github.com/users/antontarasenko/following{/other_user}",
      "gists_url": "https://api.github.com/users/antontarasenko/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/antontarasenko/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/antontarasenko/subscriptions",
      "organizations_url": "https://api.github.com/users/antontarasenko/orgs",
      "repos_url": "https://api.github.com/users/antontarasenko/repos",
      "events_url": "https://api.github.com/users/antontarasenko/events{/privacy}",
      "received_events_url": "https://api.github.com/users/antontarasenko/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-18T11:59:32Z",
    "updated_at": "2018-12-18T11:59:32Z",
    "author_association": "NONE",
    "body": "I had a similar error with autocompletion in `pandas`. Updating to `jedi-0.13.2` helped:\r\n\r\n```\r\npip3 install --upgrade jedi\r\n```"
  }
]
