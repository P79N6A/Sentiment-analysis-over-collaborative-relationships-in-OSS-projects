[
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/623035",
    "html_url": "https://github.com/ipython/ipython/pull/234#issuecomment-623035",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/234",
    "id": 623035,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyMzAzNQ==",
    "user": {
      "login": "minrk",
      "id": 151929,
      "node_id": "MDQ6VXNlcjE1MTkyOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/151929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minrk",
      "html_url": "https://github.com/minrk",
      "followers_url": "https://api.github.com/users/minrk/followers",
      "following_url": "https://api.github.com/users/minrk/following{/other_user}",
      "gists_url": "https://api.github.com/users/minrk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minrk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minrk/subscriptions",
      "organizations_url": "https://api.github.com/users/minrk/orgs",
      "repos_url": "https://api.github.com/users/minrk/repos",
      "events_url": "https://api.github.com/users/minrk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minrk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2010-12-19T20:53:58Z",
    "updated_at": "2010-12-19T20:53:58Z",
    "author_association": "MEMBER",
    "body": "This sounds great, but I have a few notes:\n- It seems like the HistorySaveThread object should be defined in core.history instead of core.interactiveshell\n- Saving every second seems excessive, especially if you develop a large history and/or leave an IPython session sitting in the background (many do this). Perhaps make it every 5 or 10, or even every minute. If you are going to save at high frequency, it's important to detect changes in order to avoid writing the exact same content to a file over and over again, and we don't do this yet.\n- If you do increase the save interval (and possibly even if not), we don't want the save dialog to wait for the interval to complete to come up, and that's what currently happens.  You could change:\n  \n  ```\n  self.shell.history_thread.exit_now=True\n  self.shell.history_thread.join()\n  if self.confirm_exit:\n      if self.ask_yes_no('Do you really want to exit ([y]/n)?','y'):\n          self.ask_exit()\n      else:\n          self.shell.history_thread = HistorySaveThread(self.shell, 1,\n                  False)\n          self.shell.history_thread.start()\n  else:\n      self.ask_exit()\n  ```\n\nto\n\n```\n    if self.confirm_exit:\n        if self.ask_yes_no('Do you really want to exit ([y]/n)?','y'):\n            self.shell.history_thread.exit_now=True\n            self.shell.history_thread.join()\n            self.ask_exit()\n    else:\n        self.shell.history_thread.exit_now=True\n        self.shell.history_thread.join()\n        self.ask_exit()\n```\n\nYou can also use a threading.Condition, and its wait()/notify() methods to avoid having to wait on join() at all.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/625448",
    "html_url": "https://github.com/ipython/ipython/pull/234#issuecomment-625448",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/234",
    "id": 625448,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyNTQ0OA==",
    "user": {
      "login": "mchandra",
      "id": 527239,
      "node_id": "MDQ6VXNlcjUyNzIzOQ==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/527239?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mchandra",
      "html_url": "https://github.com/mchandra",
      "followers_url": "https://api.github.com/users/mchandra/followers",
      "following_url": "https://api.github.com/users/mchandra/following{/other_user}",
      "gists_url": "https://api.github.com/users/mchandra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mchandra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mchandra/subscriptions",
      "organizations_url": "https://api.github.com/users/mchandra/orgs",
      "repos_url": "https://api.github.com/users/mchandra/repos",
      "events_url": "https://api.github.com/users/mchandra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mchandra/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2010-12-20T19:49:43Z",
    "updated_at": "2010-12-20T19:49:43Z",
    "author_association": "NONE",
    "body": "Hi, thanks for the suggestions. I have implemented it as you said but I have a few doubts. I'm looking at how to use the threading.Condition and wait()/noitfy() methods but meanwhile I realized that I do not need to use join() and the results are still the same. The problem with the current implementation is that the user has to wait for the sleep time to complete when ctrl+D + yes is pressed before the program can exit. Any suggestions on how to make the program exit instantly? Perhaps this is possible with the methods you suggested and I'm working on how to use them.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/625795",
    "html_url": "https://github.com/ipython/ipython/pull/234#issuecomment-625795",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/234",
    "id": 625795,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyNTc5NQ==",
    "user": {
      "login": "minrk",
      "id": 151929,
      "node_id": "MDQ6VXNlcjE1MTkyOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/151929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minrk",
      "html_url": "https://github.com/minrk",
      "followers_url": "https://api.github.com/users/minrk/followers",
      "following_url": "https://api.github.com/users/minrk/following{/other_user}",
      "gists_url": "https://api.github.com/users/minrk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minrk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minrk/subscriptions",
      "organizations_url": "https://api.github.com/users/minrk/orgs",
      "repos_url": "https://api.github.com/users/minrk/repos",
      "events_url": "https://api.github.com/users/minrk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minrk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2010-12-20T21:46:28Z",
    "updated_at": "2010-12-20T21:46:28Z",
    "author_association": "MEMBER",
    "body": "I think you can use wait(timeout) instead of sleep(timeout), then the notify() trigger will effectively interrupt the sleep. Along the lines of:\n    ...\n    while True:\n        self.cond.acquire()\n        self.cond.wait(self.time_interval)\n        self.cond.release()\n        if self.exit_now == True:\n            break\n        ...\nand trigger with something like:\n\n```\nhistory_thread.exit_now = True\nhistory_thread.cond.acquire()\nhistory_thread.cond.notify()\nhistory_thread.cond.release()\n```\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/628032",
    "html_url": "https://github.com/ipython/ipython/pull/234#issuecomment-628032",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/234",
    "id": 628032,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyODAzMg==",
    "user": {
      "login": "mchandra",
      "id": 527239,
      "node_id": "MDQ6VXNlcjUyNzIzOQ==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/527239?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mchandra",
      "html_url": "https://github.com/mchandra",
      "followers_url": "https://api.github.com/users/mchandra/followers",
      "following_url": "https://api.github.com/users/mchandra/following{/other_user}",
      "gists_url": "https://api.github.com/users/mchandra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mchandra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mchandra/subscriptions",
      "organizations_url": "https://api.github.com/users/mchandra/orgs",
      "repos_url": "https://api.github.com/users/mchandra/repos",
      "events_url": "https://api.github.com/users/mchandra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mchandra/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2010-12-21T19:43:36Z",
    "updated_at": "2010-12-21T19:43:36Z",
    "author_association": "NONE",
    "body": "Hi, I made the changes and now it works nicely. I also increased the timeout to one minute.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/628061",
    "html_url": "https://github.com/ipython/ipython/pull/234#issuecomment-628061",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/234",
    "id": 628061,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyODA2MQ==",
    "user": {
      "login": "minrk",
      "id": 151929,
      "node_id": "MDQ6VXNlcjE1MTkyOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/151929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minrk",
      "html_url": "https://github.com/minrk",
      "followers_url": "https://api.github.com/users/minrk/followers",
      "following_url": "https://api.github.com/users/minrk/following{/other_user}",
      "gists_url": "https://api.github.com/users/minrk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minrk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minrk/subscriptions",
      "organizations_url": "https://api.github.com/users/minrk/orgs",
      "repos_url": "https://api.github.com/users/minrk/repos",
      "events_url": "https://api.github.com/users/minrk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minrk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2010-12-21T19:54:46Z",
    "updated_at": "2010-12-21T19:54:46Z",
    "author_association": "MEMBER",
    "body": "Great, this looks excellent. One last question: Why do you start a new HistorySaveThread if confirm_exit is False?  Shouldn't it just go straight to ask_exit()?\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/628173",
    "html_url": "https://github.com/ipython/ipython/pull/234#issuecomment-628173",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/234",
    "id": 628173,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyODE3Mw==",
    "user": {
      "login": "mchandra",
      "id": 527239,
      "node_id": "MDQ6VXNlcjUyNzIzOQ==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/527239?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mchandra",
      "html_url": "https://github.com/mchandra",
      "followers_url": "https://api.github.com/users/mchandra/followers",
      "following_url": "https://api.github.com/users/mchandra/following{/other_user}",
      "gists_url": "https://api.github.com/users/mchandra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mchandra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mchandra/subscriptions",
      "organizations_url": "https://api.github.com/users/mchandra/orgs",
      "repos_url": "https://api.github.com/users/mchandra/repos",
      "events_url": "https://api.github.com/users/mchandra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mchandra/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2010-12-21T20:34:43Z",
    "updated_at": "2010-12-21T20:34:43Z",
    "author_association": "NONE",
    "body": "Oops. You're right, those lines shouldn't be there. There were part of earlier code where I was using slightly different logic. Fixed it now.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/634765",
    "html_url": "https://github.com/ipython/ipython/pull/234#issuecomment-634765",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/234",
    "id": 634765,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYzNDc2NQ==",
    "user": {
      "login": "mchandra",
      "id": 527239,
      "node_id": "MDQ6VXNlcjUyNzIzOQ==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/527239?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mchandra",
      "html_url": "https://github.com/mchandra",
      "followers_url": "https://api.github.com/users/mchandra/followers",
      "following_url": "https://api.github.com/users/mchandra/following{/other_user}",
      "gists_url": "https://api.github.com/users/mchandra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mchandra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mchandra/subscriptions",
      "organizations_url": "https://api.github.com/users/mchandra/orgs",
      "repos_url": "https://api.github.com/users/mchandra/repos",
      "events_url": "https://api.github.com/users/mchandra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mchandra/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2010-12-25T18:39:57Z",
    "updated_at": "2010-12-25T18:39:57Z",
    "author_association": "NONE",
    "body": "Hi, so what happens now?\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/634949",
    "html_url": "https://github.com/ipython/ipython/pull/234#issuecomment-634949",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/234",
    "id": 634949,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYzNDk0OQ==",
    "user": {
      "login": "mchandra",
      "id": 527239,
      "node_id": "MDQ6VXNlcjUyNzIzOQ==",
      "avatar_url": "https://avatars2.githubusercontent.com/u/527239?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mchandra",
      "html_url": "https://github.com/mchandra",
      "followers_url": "https://api.github.com/users/mchandra/followers",
      "following_url": "https://api.github.com/users/mchandra/following{/other_user}",
      "gists_url": "https://api.github.com/users/mchandra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mchandra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mchandra/subscriptions",
      "organizations_url": "https://api.github.com/users/mchandra/orgs",
      "repos_url": "https://api.github.com/users/mchandra/repos",
      "events_url": "https://api.github.com/users/mchandra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mchandra/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2010-12-26T01:01:47Z",
    "updated_at": "2010-12-26T01:01:47Z",
    "author_association": "NONE",
    "body": "Periodic Autosave added in background thread\n\nclosed by 8bac8cb891924e18ce44dbbe749a00f9aa375ea4\n\nSigned-off-by: MinRK &lt;benjaminrk@gmail.com&gt;\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/634950",
    "html_url": "https://github.com/ipython/ipython/pull/234#issuecomment-634950",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/234",
    "id": 634950,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYzNDk1MA==",
    "user": {
      "login": "minrk",
      "id": 151929,
      "node_id": "MDQ6VXNlcjE1MTkyOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/151929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minrk",
      "html_url": "https://github.com/minrk",
      "followers_url": "https://api.github.com/users/minrk/followers",
      "following_url": "https://api.github.com/users/minrk/following{/other_user}",
      "gists_url": "https://api.github.com/users/minrk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minrk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minrk/subscriptions",
      "organizations_url": "https://api.github.com/users/minrk/orgs",
      "repos_url": "https://api.github.com/users/minrk/repos",
      "events_url": "https://api.github.com/users/minrk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minrk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2010-12-26T01:02:30Z",
    "updated_at": "2010-12-26T01:02:30Z",
    "author_association": "MEMBER",
    "body": "Hi, sorry for the delay.\n\nIt's merged into master now.\n"
  }
]
