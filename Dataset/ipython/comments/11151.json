[
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/391244039",
    "html_url": "https://github.com/ipython/ipython/issues/11151#issuecomment-391244039",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/11151",
    "id": 391244039,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MTI0NDAzOQ==",
    "user": {
      "login": "takluyver",
      "id": 327925,
      "node_id": "MDQ6VXNlcjMyNzkyNQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/327925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/takluyver",
      "html_url": "https://github.com/takluyver",
      "followers_url": "https://api.github.com/users/takluyver/followers",
      "following_url": "https://api.github.com/users/takluyver/following{/other_user}",
      "gists_url": "https://api.github.com/users/takluyver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/takluyver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/takluyver/subscriptions",
      "organizations_url": "https://api.github.com/users/takluyver/orgs",
      "repos_url": "https://api.github.com/users/takluyver/repos",
      "events_url": "https://api.github.com/users/takluyver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/takluyver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-23T07:11:02Z",
    "updated_at": "2018-05-23T07:11:02Z",
    "author_association": "MEMBER",
    "body": "Ipython is running it's machinery in the same python interpreter your code\nruns in. So if you start modifying libraries like time, you can break\nstuff. We can't protect it against stuff like that.\n\nOn Tue, 22 May 2018, 3:24 a.m. ChristopherRogers1991, <\nnotifications@github.com> wrote:\n\n> Trying to use time.time = MagicMock(side_effect=[1,2,3,4,5]), I'm getting\n> a crash. That line runs fine, but as soon as I begin to type the next line,\n> ipython crashes.\n>\n> $ ipython\n> Python 3.6.3 (default, Oct  3 2017, 21:45:48)\n> Type 'copyright', 'credits' or 'license' for more information\n> IPython 6.4.0 -- An enhanced Interactive Python. Type '?' for help.\n>\n> In [1]: from unittest.mock import MagicMock\n>\n> In [2]: import time\n>\n> In [3]: time.time = MagicMock(side_effect=[1,2,3,4,5])\n>\n> In [4]:\n> Traceback (most recent call last):\n>   File \"<string>\", line 1, in <module>\n>   File \"/home/chris/.virtualenvs/log-monitor/lib/python3.6/site-packages/traitlets/config/application.py\", line 658, in launch_instance\n>     app.start()\n>   File \"/home/chris/.virtualenvs/log-monitor/lib/python3.6/site-packages/IPython/terminal/ipapp.py\", line 356, in start\n>     self.shell.mainloop()\n>   File \"/home/chris/.virtualenvs/log-monitor/lib/python3.6/site-packages/IPython/terminal/interactiveshell.py\", line 485, in mainloop\n>     self.interact()\n>   File \"/home/chris/.virtualenvs/log-monitor/lib/python3.6/site-packages/IPython/terminal/interactiveshell.py\", line 468, in interact\n>     code = self.prompt_for_code()\n>   File \"/home/chris/.virtualenvs/log-monitor/lib/python3.6/site-packages/IPython/terminal/interactiveshell.py\", line 381, in prompt_for_code\n>     pre_run=self.pre_prompt, reset_current_buffer=True)\n>   File \"/home/chris/.virtualenvs/log-monitor/lib/python3.6/site-packages/prompt_toolkit/interface.py\", line 415, in run\n>     self.eventloop.run(self.input, self.create_eventloop_callbacks())\n>   File \"/home/chris/.virtualenvs/log-monitor/lib/python3.6/site-packages/prompt_toolkit/eventloop/posix.py\", line 102, in run\n>     self._inputhook_context.call_inputhook(ready)\n>   File \"/home/chris/.virtualenvs/log-monitor/lib/python3.6/site-packages/prompt_toolkit/eventloop/utils.py\", line 22, in __exit__\n>     self.end = time.time()\n>   File \"/usr/lib/python3.6/unittest/mock.py\", line 939, in __call__\n>     return _mock_self._mock_call(*args, **kwargs)\n>   File \"/usr/lib/python3.6/unittest/mock.py\", line 998, in _mock_call\n>     result = next(effect)\n> StopIteration\n>\n> If you suspect this is an IPython bug, please report it at:\n>     https://github.com/ipython/ipython/issues\n> or send an email to the mailing list at ipython-dev@python.org\n>\n> You can print a more detailed traceback right now with \"%tb\", or use \"%debug\"\n> to interactively debug it.\n>\n> Extra-detailed tracebacks for bug-reporting purposes can be enabled via:\n>     %config Application.verbose_crash=True\n>\n> Here's how it works in the standard shell:\n>\n> $ python\n> Python 3.6.3 (default, Oct  3 2017, 21:45:48)\n> [GCC 7.2.0] on linux\n> Type \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n> >>> from unittest.mock import MagicMock\n> >>> import time\n> >>> time.time = MagicMock(side_effect=[1,2,3,4,5])\n> >>> time.time()\n> 1\n> >>> time.time()\n> 2\n> >>>\n>\n> Here's my system info:\n>\n> $ python -c \"import IPython; print(IPython.sys_info())\"\n> {'commit_hash': '7f10f7bb3',\n>  'commit_source': 'installation',\n>  'default_encoding': 'UTF-8',\n>  'ipython_path': '/home/chris/.virtualenvs/log-monitor/lib/python3.6/site-packages/IPython',\n>  'ipython_version': '6.4.0',\n>  'os_name': 'posix',\n>  'platform': 'Linux-4.13.0-41-generic-x86_64-with-Ubuntu-17.10-artful',\n>  'sys_executable': '/home/chris/.virtualenvs/log-monitor/bin/python',\n>  'sys_platform': 'linux',\n>  'sys_version': '3.6.3 (default, Oct  3 2017, 21:45:48) \\n[GCC 7.2.0]'}\n>\n> Please let me know if you need anything else from me.\n>\n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/ipython/ipython/issues/11151>, or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AAUA9R5CBl1YmGvvuiBl9VGOogUSyhVrks5t02jGgaJpZM4UH1eM>\n> .\n>\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/391541254",
    "html_url": "https://github.com/ipython/ipython/issues/11151#issuecomment-391541254",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/11151",
    "id": 391541254,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MTU0MTI1NA==",
    "user": {
      "login": "ChristopherRogers1991",
      "id": 8608191,
      "node_id": "MDQ6VXNlcjg2MDgxOTE=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/8608191?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ChristopherRogers1991",
      "html_url": "https://github.com/ChristopherRogers1991",
      "followers_url": "https://api.github.com/users/ChristopherRogers1991/followers",
      "following_url": "https://api.github.com/users/ChristopherRogers1991/following{/other_user}",
      "gists_url": "https://api.github.com/users/ChristopherRogers1991/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ChristopherRogers1991/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ChristopherRogers1991/subscriptions",
      "organizations_url": "https://api.github.com/users/ChristopherRogers1991/orgs",
      "repos_url": "https://api.github.com/users/ChristopherRogers1991/repos",
      "events_url": "https://api.github.com/users/ChristopherRogers1991/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ChristopherRogers1991/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-24T00:00:58Z",
    "updated_at": "2018-05-24T00:00:58Z",
    "author_association": "NONE",
    "body": "Ah, I guess that makes sense. I guess I assumed it was in it's own process or something."
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/391630779",
    "html_url": "https://github.com/ipython/ipython/issues/11151#issuecomment-391630779",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/11151",
    "id": 391630779,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MTYzMDc3OQ==",
    "user": {
      "login": "takluyver",
      "id": 327925,
      "node_id": "MDQ6VXNlcjMyNzkyNQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/327925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/takluyver",
      "html_url": "https://github.com/takluyver",
      "followers_url": "https://api.github.com/users/takluyver/followers",
      "following_url": "https://api.github.com/users/takluyver/following{/other_user}",
      "gists_url": "https://api.github.com/users/takluyver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/takluyver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/takluyver/subscriptions",
      "organizations_url": "https://api.github.com/users/takluyver/orgs",
      "repos_url": "https://api.github.com/users/takluyver/repos",
      "events_url": "https://api.github.com/users/takluyver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/takluyver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-24T08:21:26Z",
    "updated_at": "2018-05-24T08:21:26Z",
    "author_association": "MEMBER",
    "body": "If you use IPython as a kernel for Jupyter, it's a separate process from the UI - but there's still a lot of IPython code in the kernel process to deal with sending and receiving messages, handling IPython special syntax like mocks, and so on."
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/391630943",
    "html_url": "https://github.com/ipython/ipython/issues/11151#issuecomment-391630943",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/11151",
    "id": 391630943,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MTYzMDk0Mw==",
    "user": {
      "login": "takluyver",
      "id": 327925,
      "node_id": "MDQ6VXNlcjMyNzkyNQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/327925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/takluyver",
      "html_url": "https://github.com/takluyver",
      "followers_url": "https://api.github.com/users/takluyver/followers",
      "following_url": "https://api.github.com/users/takluyver/following{/other_user}",
      "gists_url": "https://api.github.com/users/takluyver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/takluyver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/takluyver/subscriptions",
      "organizations_url": "https://api.github.com/users/takluyver/orgs",
      "repos_url": "https://api.github.com/users/takluyver/repos",
      "events_url": "https://api.github.com/users/takluyver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/takluyver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-24T08:21:59Z",
    "updated_at": "2018-05-24T08:21:59Z",
    "author_association": "MEMBER",
    "body": "(Closing as there's nothing we can really do about this)"
  }
]
