[
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/3710722",
    "html_url": "https://github.com/ipython/ipython/issues/1342#issuecomment-3710722",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/1342",
    "id": 3710722,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MTA3MjI=",
    "user": {
      "login": "minrk",
      "id": 151929,
      "node_id": "MDQ6VXNlcjE1MTkyOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/151929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minrk",
      "html_url": "https://github.com/minrk",
      "followers_url": "https://api.github.com/users/minrk/followers",
      "following_url": "https://api.github.com/users/minrk/following{/other_user}",
      "gists_url": "https://api.github.com/users/minrk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minrk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minrk/subscriptions",
      "organizations_url": "https://api.github.com/users/minrk/orgs",
      "repos_url": "https://api.github.com/users/minrk/repos",
      "events_url": "https://api.github.com/users/minrk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minrk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-01-29T19:59:21Z",
    "updated_at": "2012-01-29T19:59:21Z",
    "author_association": "MEMBER",
    "body": "I can't seem to trigger this on purpose, but I think I understand what could cause the issue.  What platform are you on, and is your home directory mounted via NFS or other network share?\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/3712216",
    "html_url": "https://github.com/ipython/ipython/issues/1342#issuecomment-3712216",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/1342",
    "id": 3712216,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MTIyMTY=",
    "user": {
      "login": "fperez",
      "id": 57394,
      "node_id": "MDQ6VXNlcjU3Mzk0",
      "avatar_url": "https://avatars1.githubusercontent.com/u/57394?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fperez",
      "html_url": "https://github.com/fperez",
      "followers_url": "https://api.github.com/users/fperez/followers",
      "following_url": "https://api.github.com/users/fperez/following{/other_user}",
      "gists_url": "https://api.github.com/users/fperez/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fperez/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fperez/subscriptions",
      "organizations_url": "https://api.github.com/users/fperez/orgs",
      "repos_url": "https://api.github.com/users/fperez/repos",
      "events_url": "https://api.github.com/users/fperez/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fperez/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-01-29T23:01:11Z",
    "updated_at": "2012-01-29T23:01:11Z",
    "author_association": "MEMBER",
    "body": "I suspect it's a lock on the sqlite history database, but I've also never seen it.  @takluyver, have you ever encountered this one?\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/3712244",
    "html_url": "https://github.com/ipython/ipython/issues/1342#issuecomment-3712244",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/1342",
    "id": 3712244,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MTIyNDQ=",
    "user": {
      "login": "jni",
      "id": 492549,
      "node_id": "MDQ6VXNlcjQ5MjU0OQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/492549?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jni",
      "html_url": "https://github.com/jni",
      "followers_url": "https://api.github.com/users/jni/followers",
      "following_url": "https://api.github.com/users/jni/following{/other_user}",
      "gists_url": "https://api.github.com/users/jni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jni/subscriptions",
      "organizations_url": "https://api.github.com/users/jni/orgs",
      "repos_url": "https://api.github.com/users/jni/repos",
      "events_url": "https://api.github.com/users/jni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jni/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-01-29T23:03:48Z",
    "updated_at": "2012-01-29T23:03:48Z",
    "author_association": "NONE",
    "body": "@minrk is right: my home is on NFS. I'm running Fedora Core 16.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/3712300",
    "html_url": "https://github.com/ipython/ipython/issues/1342#issuecomment-3712300",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/1342",
    "id": 3712300,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MTIzMDA=",
    "user": {
      "login": "fperez",
      "id": 57394,
      "node_id": "MDQ6VXNlcjU3Mzk0",
      "avatar_url": "https://avatars1.githubusercontent.com/u/57394?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fperez",
      "html_url": "https://github.com/fperez",
      "followers_url": "https://api.github.com/users/fperez/followers",
      "following_url": "https://api.github.com/users/fperez/following{/other_user}",
      "gists_url": "https://api.github.com/users/fperez/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fperez/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fperez/subscriptions",
      "organizations_url": "https://api.github.com/users/fperez/orgs",
      "repos_url": "https://api.github.com/users/fperez/repos",
      "events_url": "https://api.github.com/users/fperez/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fperez/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-01-29T23:12:11Z",
    "updated_at": "2012-01-29T23:12:11Z",
    "author_association": "MEMBER",
    "body": "This is your problem then: http://www.sqlite.org/faq.html#q5.  SQLite locking doesn't work reliably on NFS filesystems.\n\nYour best bet is to start ipython directing it to use a local file for history:\n\n```\nipython --HistoryManager.hist_file=/tmp/ipython_hist.sqlite\n```\n\nJust use a path that is _not_ NSF mounted.  You can set this variable permanently in your config file if you find a value that works well.\n\nI don't know that we can really do anything else on our end, since the problem is really beyond ipython's reach.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/3712516",
    "html_url": "https://github.com/ipython/ipython/issues/1342#issuecomment-3712516",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/1342",
    "id": 3712516,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MTI1MTY=",
    "user": {
      "login": "jni",
      "id": 492549,
      "node_id": "MDQ6VXNlcjQ5MjU0OQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/492549?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jni",
      "html_url": "https://github.com/jni",
      "followers_url": "https://api.github.com/users/jni/followers",
      "following_url": "https://api.github.com/users/jni/following{/other_user}",
      "gists_url": "https://api.github.com/users/jni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jni/subscriptions",
      "organizations_url": "https://api.github.com/users/jni/orgs",
      "repos_url": "https://api.github.com/users/jni/repos",
      "events_url": "https://api.github.com/users/jni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jni/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-01-29T23:41:30Z",
    "updated_at": "2012-01-29T23:48:08Z",
    "author_association": "NONE",
    "body": "Ah. Sounds good. In the config file, is it:\n\nc = get_config()\nc.HistoryManager.hist_file='/tmp/ipython_hist.sqlite'\n\n?\n\nThanks!\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/3712698",
    "html_url": "https://github.com/ipython/ipython/issues/1342#issuecomment-3712698",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/1342",
    "id": 3712698,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MTI2OTg=",
    "user": {
      "login": "takluyver",
      "id": 327925,
      "node_id": "MDQ6VXNlcjMyNzkyNQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/327925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/takluyver",
      "html_url": "https://github.com/takluyver",
      "followers_url": "https://api.github.com/users/takluyver/followers",
      "following_url": "https://api.github.com/users/takluyver/following{/other_user}",
      "gists_url": "https://api.github.com/users/takluyver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/takluyver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/takluyver/subscriptions",
      "organizations_url": "https://api.github.com/users/takluyver/orgs",
      "repos_url": "https://api.github.com/users/takluyver/repos",
      "events_url": "https://api.github.com/users/takluyver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/takluyver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-01-30T00:08:24Z",
    "updated_at": "2012-01-30T00:08:24Z",
    "author_association": "MEMBER",
    "body": "On 29 January 2012 23:41, Juan Nunez-Iglesias <\nreply@reply.github.com\n\n> wrote:\n> \n> Ah. Sounds good. In the config file, is it:\n> \n> c = get_config()\n> c.HistoryManager.hist_file='/tmp/ipython_hist.sqlite'\n\nThat should be it, yes.\n\nThomas\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/4387892",
    "html_url": "https://github.com/ipython/ipython/issues/1342#issuecomment-4387892",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/1342",
    "id": 4387892,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzODc4OTI=",
    "user": {
      "login": "ludwigschwardt",
      "id": 392144,
      "node_id": "MDQ6VXNlcjM5MjE0NA==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/392144?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ludwigschwardt",
      "html_url": "https://github.com/ludwigschwardt",
      "followers_url": "https://api.github.com/users/ludwigschwardt/followers",
      "following_url": "https://api.github.com/users/ludwigschwardt/following{/other_user}",
      "gists_url": "https://api.github.com/users/ludwigschwardt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ludwigschwardt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ludwigschwardt/subscriptions",
      "organizations_url": "https://api.github.com/users/ludwigschwardt/orgs",
      "repos_url": "https://api.github.com/users/ludwigschwardt/repos",
      "events_url": "https://api.github.com/users/ludwigschwardt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ludwigschwardt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-03-08T08:53:02Z",
    "updated_at": "2012-03-08T08:53:02Z",
    "author_association": "NONE",
    "body": "I also ran into this issue...\n\nI instantiate an InteractiveShell object during module initialisation in order to register a custom tab completer:\n\nfrom IPython.core.interactiveshell import InteractiveShell\nip = InteractiveShell.instance()\nip.set_hook(...)\n\nThis module is imported by multiple processes that start up in parallel, leading to a race condition where some of the processes may hang on the reported OperationalError exception. I am using an SQLite history database on an HFS+ filesystem on a Mac (so no NFS problems here).\n\nAny ideas or workarounds would be welcomed.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/4388168",
    "html_url": "https://github.com/ipython/ipython/issues/1342#issuecomment-4388168",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/1342",
    "id": 4388168,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzODgxNjg=",
    "user": {
      "login": "minrk",
      "id": 151929,
      "node_id": "MDQ6VXNlcjE1MTkyOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/151929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minrk",
      "html_url": "https://github.com/minrk",
      "followers_url": "https://api.github.com/users/minrk/followers",
      "following_url": "https://api.github.com/users/minrk/following{/other_user}",
      "gists_url": "https://api.github.com/users/minrk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minrk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minrk/subscriptions",
      "organizations_url": "https://api.github.com/users/minrk/orgs",
      "repos_url": "https://api.github.com/users/minrk/repos",
      "events_url": "https://api.github.com/users/minrk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minrk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-03-08T09:17:47Z",
    "updated_at": "2012-03-08T09:17:57Z",
    "author_association": "MEMBER",
    "body": "If you don't actually need to access the history, you can override the config to use an in-memory database:\n\n``` python\nfrom IPython.config.loader import Config\nfrom IPython.core.interactiveshell import InteractiveShell\n\ncfg = Config()\ncfg.HistoryManager.hist_file = ':memory:'\nip = InteractiveShell.instance(config=cfg)\n```\n\nwhich presumably wouldn't have multiprocessing issues.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/4388548",
    "html_url": "https://github.com/ipython/ipython/issues/1342#issuecomment-4388548",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/1342",
    "id": 4388548,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzODg1NDg=",
    "user": {
      "login": "ludwigschwardt",
      "id": 392144,
      "node_id": "MDQ6VXNlcjM5MjE0NA==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/392144?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ludwigschwardt",
      "html_url": "https://github.com/ludwigschwardt",
      "followers_url": "https://api.github.com/users/ludwigschwardt/followers",
      "following_url": "https://api.github.com/users/ludwigschwardt/following{/other_user}",
      "gists_url": "https://api.github.com/users/ludwigschwardt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ludwigschwardt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ludwigschwardt/subscriptions",
      "organizations_url": "https://api.github.com/users/ludwigschwardt/orgs",
      "repos_url": "https://api.github.com/users/ludwigschwardt/repos",
      "events_url": "https://api.github.com/users/ludwigschwardt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ludwigschwardt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-03-08T09:52:54Z",
    "updated_at": "2012-03-08T09:52:54Z",
    "author_association": "NONE",
    "body": "Thanks,\n\nThat's very useful to know. In the end I opted to just catch the OperationalError exception and ignore the tab completer in that case, as this race condition typically occurs in system processes with no need for user interaction.\n\nThe problem is that our code supports IPython 0.10, 0.11 and 0.12, and your code seems to be 0.12 only (if I consider your pull request 940). I already have two code paths for 0.10 and 0.11+ and want to avoid yet another code path...\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/4388611",
    "html_url": "https://github.com/ipython/ipython/issues/1342#issuecomment-4388611",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/1342",
    "id": 4388611,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzODg2MTE=",
    "user": {
      "login": "takluyver",
      "id": 327925,
      "node_id": "MDQ6VXNlcjMyNzkyNQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/327925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/takluyver",
      "html_url": "https://github.com/takluyver",
      "followers_url": "https://api.github.com/users/takluyver/followers",
      "following_url": "https://api.github.com/users/takluyver/following{/other_user}",
      "gists_url": "https://api.github.com/users/takluyver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/takluyver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/takluyver/subscriptions",
      "organizations_url": "https://api.github.com/users/takluyver/orgs",
      "repos_url": "https://api.github.com/users/takluyver/repos",
      "events_url": "https://api.github.com/users/takluyver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/takluyver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-03-08T09:57:34Z",
    "updated_at": "2012-03-08T09:57:34Z",
    "author_association": "MEMBER",
    "body": "Well, using `:memory:` will presumably create a separate in-memory database in each process that instantiates `InteractiveShell`, so it should avoid any contest.\n\nHow many processes do you have starting up in parallel? I'm a bit surprised it has a problem with this, but maybe if there are a lot of processes, it's just the sheer number trying to access the database that causes it.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/4388884",
    "html_url": "https://github.com/ipython/ipython/issues/1342#issuecomment-4388884",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/1342",
    "id": 4388884,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzODg4ODQ=",
    "user": {
      "login": "ludwigschwardt",
      "id": 392144,
      "node_id": "MDQ6VXNlcjM5MjE0NA==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/392144?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ludwigschwardt",
      "html_url": "https://github.com/ludwigschwardt",
      "followers_url": "https://api.github.com/users/ludwigschwardt/followers",
      "following_url": "https://api.github.com/users/ludwigschwardt/following{/other_user}",
      "gists_url": "https://api.github.com/users/ludwigschwardt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ludwigschwardt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ludwigschwardt/subscriptions",
      "organizations_url": "https://api.github.com/users/ludwigschwardt/orgs",
      "repos_url": "https://api.github.com/users/ludwigschwardt/repos",
      "events_url": "https://api.github.com/users/ludwigschwardt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ludwigschwardt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-03-08T10:20:00Z",
    "updated_at": "2012-03-08T10:20:00Z",
    "author_association": "NONE",
    "body": "We have in the order of 10 processes starting up. Every now and then (more then than now, it seems), 2-3 processes will lock up with this error. Of course, I cannot reproduce it now after several startup attempts in order to verify this :-)\n"
  }
]
