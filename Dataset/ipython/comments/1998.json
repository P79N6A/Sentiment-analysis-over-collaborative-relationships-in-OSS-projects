[
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/6496369",
    "html_url": "https://github.com/ipython/ipython/issues/1998#issuecomment-6496369",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/1998",
    "id": 6496369,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0OTYzNjk=",
    "user": {
      "login": "fperez",
      "id": 57394,
      "node_id": "MDQ6VXNlcjU3Mzk0",
      "avatar_url": "https://avatars1.githubusercontent.com/u/57394?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fperez",
      "html_url": "https://github.com/fperez",
      "followers_url": "https://api.github.com/users/fperez/followers",
      "following_url": "https://api.github.com/users/fperez/following{/other_user}",
      "gists_url": "https://api.github.com/users/fperez/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fperez/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fperez/subscriptions",
      "organizations_url": "https://api.github.com/users/fperez/orgs",
      "repos_url": "https://api.github.com/users/fperez/repos",
      "events_url": "https://api.github.com/users/fperez/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fperez/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-06-21T22:36:40Z",
    "updated_at": "2012-06-21T22:36:40Z",
    "author_association": "MEMBER",
    "body": "mmh, could you explain a bit further what you were doing and under what conditions this failed?  Without some more information, there's not enough here for us to know what to fix.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/6499060",
    "html_url": "https://github.com/ipython/ipython/issues/1998#issuecomment-6499060",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/1998",
    "id": 6499060,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0OTkwNjA=",
    "user": {
      "login": "bfroehle",
      "id": 204333,
      "node_id": "MDQ6VXNlcjIwNDMzMw==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/204333?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bfroehle",
      "html_url": "https://github.com/bfroehle",
      "followers_url": "https://api.github.com/users/bfroehle/followers",
      "following_url": "https://api.github.com/users/bfroehle/following{/other_user}",
      "gists_url": "https://api.github.com/users/bfroehle/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bfroehle/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bfroehle/subscriptions",
      "organizations_url": "https://api.github.com/users/bfroehle/orgs",
      "repos_url": "https://api.github.com/users/bfroehle/repos",
      "events_url": "https://api.github.com/users/bfroehle/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bfroehle/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-06-22T01:58:59Z",
    "updated_at": "2012-06-22T15:39:12Z",
    "author_association": "CONTRIBUTOR",
    "body": "~~Your first error appears to be an issue with Python itself, not IPython.  I'm not sure how the title of this issue relates to the pasted output from `iptest`~~ \n\nSorry. I misread the traceback.  You are correct.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/6499164",
    "html_url": "https://github.com/ipython/ipython/issues/1998#issuecomment-6499164",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/1998",
    "id": 6499164,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0OTkxNjQ=",
    "user": {
      "login": "fperez",
      "id": 57394,
      "node_id": "MDQ6VXNlcjU3Mzk0",
      "avatar_url": "https://avatars1.githubusercontent.com/u/57394?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fperez",
      "html_url": "https://github.com/fperez",
      "followers_url": "https://api.github.com/users/fperez/followers",
      "following_url": "https://api.github.com/users/fperez/following{/other_user}",
      "gists_url": "https://api.github.com/users/fperez/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fperez/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fperez/subscriptions",
      "organizations_url": "https://api.github.com/users/fperez/orgs",
      "repos_url": "https://api.github.com/users/fperez/repos",
      "events_url": "https://api.github.com/users/fperez/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fperez/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-06-22T02:12:11Z",
    "updated_at": "2012-06-22T02:12:11Z",
    "author_association": "MEMBER",
    "body": "Unless we get actionable info for this within a few days, we'll have to close it; I don't know what we can do here.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/6502996",
    "html_url": "https://github.com/ipython/ipython/issues/1998#issuecomment-6502996",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/1998",
    "id": 6502996,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1MDI5OTY=",
    "user": {
      "login": "idella",
      "id": 1655078,
      "node_id": "MDQ6VXNlcjE2NTUwNzg=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1655078?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/idella",
      "html_url": "https://github.com/idella",
      "followers_url": "https://api.github.com/users/idella/followers",
      "following_url": "https://api.github.com/users/idella/following{/other_user}",
      "gists_url": "https://api.github.com/users/idella/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/idella/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/idella/subscriptions",
      "organizations_url": "https://api.github.com/users/idella/orgs",
      "repos_url": "https://api.github.com/users/idella/repos",
      "events_url": "https://api.github.com/users/idella/events{/privacy}",
      "received_events_url": "https://api.github.com/users/idella/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-06-22T08:33:25Z",
    "updated_at": "2012-06-23T18:35:19Z",
    "author_association": "NONE",
    "body": "well, I simply run the test suite of the current ipython;   Sorry for not making it clear to you.\narchtester ipython # ebuild ipython-0.12-r1.ebuild clean test\n\nI've been badgered a number of times to not enter gentoo specific code or such, but this is quite simple.\nAs ebuild need be run as root.  I've not attempted to run it as user since I have settings in gentoos background config file to validate it to be run as user anyway.\nThere are 2 separate fails, I simply added the second save making another issue.  It seems that the copy paste I did has lost the second half of paths which were made very long by a copy to a gentoo dir {$T}, work/temp\n\n```\n======================================================================\nERROR: get_home_dir() still works if $HOME is not set\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/usr/lib64/python2.7/site-packages/nose/case.py\", line 197, in runTest\n    self.test(*self.arg)\n  File \"/mnt/gen2/TmpDir/portage/dev-python/ipython-0.12-r1/temp/tests-2.7/usr/lib64/python2.7/site-packages/\nIPython/utils/tests/test_path.py\", line 162, in test_get_home_dir_4\n    home = path.get_home_dir(True)\n  File \"/mnt/gen2/TmpDir/portage/dev-python/ipython-0.12-r1/temp/tests-2.7/usr/lib64/python2.7/site-packages/\nIPython/utils/path.py\", line 222, in get_home_dir\n    'set $HOME environment variable to override' % homedir)\nHomeDirError: /var/tmp/portage is not a writable dir, set $HOME environment variable to override\n\nThe first is from test_path.py\n-------------------------------------------------------------------------------\n@with_environment\ndef test_get_home_dir_4():\n    \"\"\"get_home_dir() still works if $HOME is not set\"\"\"\n\n    if 'HOME' in env: del env['HOME']\n    # this should still succeed, but we don't know what the answer should be\n    home = path.get_home_dir(True)\n    nt.assert_true(path._writable_dir(home))\n------------------------------------------------------------------------------------\nPerhaps it is a cause from Python itself.  If so, then that's fine, I shall treat it accordingly.\n\n---------------------------------------------------------------------------------------------------------------------------------------------\n```\n\nThe second is a doctest error from from IPython test group: IPython.parallel.\n\n```\nDoctest: IPython.parallel.client.view.DirectView ... ok\nDoctest: IPython.parallel.controller.dependency.require ... ok\nERROR:\n=======================================================================\nERROR: test suite for <module 'IPython.parallel.tests' from '/mnt/gen2/TmpDir/portage/dev-python/ipython-0.12-r1/\ntemp/tests-2.7/usr/lib64/python2.7/site-packages/IPython/parallel/tests/__init__.py'>\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/usr/lib64/python2.7/site-packages/nose/suite.py\", line 208, in run\n.......\n.......\n  File \"/mnt/gen2/TmpDir/portage/dev-python/ipython-0.12-r1/temp/tests-2.7/usr/lib64/python2.7/\nsite-packages/IPython/parallel/tests/__init__.py\", line 69, in setup\n    add_engines(1)\n  File \"/mnt/gen2/TmpDir/portage/dev-python/ipython-0.12-r1/temp/tests-2.7/usr/lib64/python2.7/\nsite-packages/IPython/parallel/tests/__init__.py\", line 88, in add_engines\n    rc.spin()\n  File \"/mnt/gen2/TmpDir/portage/dev-python/ipython-0.12-r1/temp/tests-2.7/usr/lib64/python2.7/site-packages/IPython/parallel/c$\n    self._flush_iopub(self._iopub_socket)\n  File \"/mnt/gen2/TmpDir/portage/dev-python/ipython-0.12-r1/temp/tests-2.7/usr/lib64/python2.7/site-packages/\nIPython/parallel/client/client.py\", line 728, in _flush_iopub\n    msg_id = parent['msg_id']\nKeyError: 'msg_id'\n\n----------------------------------------------------------------------\nRan 5 tests in 1.744s\nFAILED (errors=1)\n\nTest suite completed for system with the following information:\n{'commit_hash': '<not found>',\n 'commit_source': '(none found)',\n 'ipython_path': '/mnt/gen2/TmpDir/portage/dev-python/ipython-0.12-r1/temp/tests-2.7/usr/lib64/python2.7/site-packages/IPython',\n 'ipython_version': '0.12',\n 'os_name': 'posix',\n 'platform': 'Linux-3.2.1-gentoo-r2-amd64-x86_64-AMD_Athlon-tm-_II_X4_645_Processor-with-gentoo-2.1',\n 'sys_executable': '/usr/bin/python2.7',\n 'sys_platform': 'linux2',\n 'sys_version': '2.7.3 (default, Jun 18 2012, 20:52:42) \\n[GCC 4.5.3]'}\n\nTools and libraries available at test time:\n   curses matplotlib pexpect pymongo qt sqlite3 tornado wx wx.aui zmq\nStatus:\nERROR - 2 out of 10 test groups failed.\n```\n\nI hope this makes it clear and workable.  Thanks\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/6504879",
    "html_url": "https://github.com/ipython/ipython/issues/1998#issuecomment-6504879",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/1998",
    "id": 6504879,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1MDQ4Nzk=",
    "user": {
      "login": "takluyver",
      "id": 327925,
      "node_id": "MDQ6VXNlcjMyNzkyNQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/327925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/takluyver",
      "html_url": "https://github.com/takluyver",
      "followers_url": "https://api.github.com/users/takluyver/followers",
      "following_url": "https://api.github.com/users/takluyver/following{/other_user}",
      "gists_url": "https://api.github.com/users/takluyver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/takluyver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/takluyver/subscriptions",
      "organizations_url": "https://api.github.com/users/takluyver/orgs",
      "repos_url": "https://api.github.com/users/takluyver/repos",
      "events_url": "https://api.github.com/users/takluyver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/takluyver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-06-22T10:33:34Z",
    "updated_at": "2012-06-22T10:33:34Z",
    "author_association": "MEMBER",
    "body": "I'm not familiar with gentoo, but it looks like you've got 0.12. Can you run the tests with a development version of IPython? We're coming up to a 0.13 release, so if there are bugs in the previous release, they may have already been fixed.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/6505553",
    "html_url": "https://github.com/ipython/ipython/issues/1998#issuecomment-6505553",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/1998",
    "id": 6505553,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1MDU1NTM=",
    "user": {
      "login": "idella",
      "id": 1655078,
      "node_id": "MDQ6VXNlcjE2NTUwNzg=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1655078?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/idella",
      "html_url": "https://github.com/idella",
      "followers_url": "https://api.github.com/users/idella/followers",
      "following_url": "https://api.github.com/users/idella/following{/other_user}",
      "gists_url": "https://api.github.com/users/idella/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/idella/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/idella/subscriptions",
      "organizations_url": "https://api.github.com/users/idella/orgs",
      "repos_url": "https://api.github.com/users/idella/repos",
      "events_url": "https://api.github.com/users/idella/events{/privacy}",
      "received_events_url": "https://api.github.com/users/idella/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-06-22T11:22:47Z",
    "updated_at": "2012-06-23T19:05:26Z",
    "author_association": "NONE",
    "body": "well being gentoo doesn't alter the running of the test really.  It's run from an ebuild and once run should be the same as running it manually from the source dirs.  Anyway, yes it is 0.12 and I just noticed I ran 0.12.0, so I ran 0.12.1 and got the same for the get_home_dir() error.  The second error is entirely different, \n\n```\nIPython/parallel/tests/test_mongodb.py\n..........\n    raise AutoReconnect(', '.join(errors))\nAutoReconnect: could not connect to localhost:27017: [Errno 111] Connection refused\n```\n\nSo it supposedly got thru the doctest test in this run.\n\nThe 1st error is persistent and sure it may be a CPython fault.  \nHomeDirError: /var/tmp/portage is not a writable dir, is wrong.  Although gentoo runs the build in a sandbox it routinely accesses and uses system sites such as /var/tmp and it is of course writable.  Anyway I shall look at getting the dev version later, I suspect that means cloning the master repo or such\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/6505728",
    "html_url": "https://github.com/ipython/ipython/issues/1998#issuecomment-6505728",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/1998",
    "id": 6505728,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1MDU3Mjg=",
    "user": {
      "login": "takluyver",
      "id": 327925,
      "node_id": "MDQ6VXNlcjMyNzkyNQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/327925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/takluyver",
      "html_url": "https://github.com/takluyver",
      "followers_url": "https://api.github.com/users/takluyver/followers",
      "following_url": "https://api.github.com/users/takluyver/following{/other_user}",
      "gists_url": "https://api.github.com/users/takluyver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/takluyver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/takluyver/subscriptions",
      "organizations_url": "https://api.github.com/users/takluyver/orgs",
      "repos_url": "https://api.github.com/users/takluyver/repos",
      "events_url": "https://api.github.com/users/takluyver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/takluyver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-06-22T11:34:19Z",
    "updated_at": "2012-06-22T11:34:19Z",
    "author_association": "MEMBER",
    "body": "On 22 June 2012 12:22, idella\nreply@reply.github.com\nwrote:\n\n> I suspect that means cloning the master repo or such\n\nYep, or grab the beta release from a few days ago:\nhttp://archive.ipython.org/testing/0.13.beta1/ipython-0.13.beta1.tar.gz\n\n> well being gentoo doesn't alter the running of the test really.  It's run from an ebuild and once run should be the same as running it manually from the source dirs.\n\nI suspect that it differs somehow. We test on Linux a lot, both\nmanually and automatically, and we're not seeing those errors. Here\nare the automated test results:\n\nhttps://jenkins.shiningpanda.com/ipython/job/ipython-multi/\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/6510674",
    "html_url": "https://github.com/ipython/ipython/issues/1998#issuecomment-6510674",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/1998",
    "id": 6510674,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1MTA2NzQ=",
    "user": {
      "login": "idella",
      "id": 1655078,
      "node_id": "MDQ6VXNlcjE2NTUwNzg=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1655078?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/idella",
      "html_url": "https://github.com/idella",
      "followers_url": "https://api.github.com/users/idella/followers",
      "following_url": "https://api.github.com/users/idella/following{/other_user}",
      "gists_url": "https://api.github.com/users/idella/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/idella/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/idella/subscriptions",
      "organizations_url": "https://api.github.com/users/idella/orgs",
      "repos_url": "https://api.github.com/users/idella/repos",
      "events_url": "https://api.github.com/users/idella/events{/privacy}",
      "received_events_url": "https://api.github.com/users/idella/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-06-22T15:37:04Z",
    "updated_at": "2012-06-23T18:40:28Z",
    "author_association": "NONE",
    "body": "ok with 0.12.1 I now have just the one fail still with the  get_home_dir() error with python2.6 2.7 persistently,\nbut since it passes for you with persistent testing I suppose it may be something to do with the gentoo sandbox.  I don't even follow the steps used in the ebuild to tun the test suite they are that complex but it does work.  \nbfroehle if you can outline how you think it's python itself that would suffice.  We (at gentoo devland) caught something else lately that stemmed from Cpython and not the package.\n\nThe traceback cites test_path.py line 163, that's how the title relates to the pasted output, not making that up.\n\n``` python\n@with_environment\ndef test_get_home_dir_4():\n    \"\"\"get_home_dir() still works if $HOME is not set\"\"\"\n\n    if 'HOME' in env: del env['HOME']\n    # this should still succeed, but we don't know what the answer should be\n    home = path.get_home_dir(True)\n    nt.assert_true(path._writable_dir(home))        line 163.\n```\n\nIt seems a pretty trivial test so we're not playing for sheep stations.  \nI have the beta -.13 and I can try it at leisure later.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/6516010",
    "html_url": "https://github.com/ipython/ipython/issues/1998#issuecomment-6516010",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/1998",
    "id": 6516010,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1MTYwMTA=",
    "user": {
      "login": "bfroehle",
      "id": 204333,
      "node_id": "MDQ6VXNlcjIwNDMzMw==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/204333?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bfroehle",
      "html_url": "https://github.com/bfroehle",
      "followers_url": "https://api.github.com/users/bfroehle/followers",
      "following_url": "https://api.github.com/users/bfroehle/following{/other_user}",
      "gists_url": "https://api.github.com/users/bfroehle/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bfroehle/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bfroehle/subscriptions",
      "organizations_url": "https://api.github.com/users/bfroehle/orgs",
      "repos_url": "https://api.github.com/users/bfroehle/repos",
      "events_url": "https://api.github.com/users/bfroehle/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bfroehle/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-06-22T19:17:11Z",
    "updated_at": "2012-06-22T19:17:11Z",
    "author_association": "CONTRIBUTOR",
    "body": "I was wrong earlier... was thinking `path` was `os.path`, not `IPython.utils.path`.  :-/  sorry.\n\nThe assertion is failing because `IPython.utils.path.get_home_dir` is [raising an exception](https://github.com/ipython/ipython/blob/master/IPython/utils/path.py#L225).  The code there seems pretty straightforward -- either `/var/tmp/portage` is [not a directory or it is not writeable](https://github.com/ipython/ipython/blob/master/IPython/utils/path.py#L38).\n\nWhat is the output of `ls -ld /var/tmp/portage`?\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/6523730",
    "html_url": "https://github.com/ipython/ipython/issues/1998#issuecomment-6523730",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/1998",
    "id": 6523730,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1MjM3MzA=",
    "user": {
      "login": "idella",
      "id": 1655078,
      "node_id": "MDQ6VXNlcjE2NTUwNzg=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1655078?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/idella",
      "html_url": "https://github.com/idella",
      "followers_url": "https://api.github.com/users/idella/followers",
      "following_url": "https://api.github.com/users/idella/following{/other_user}",
      "gists_url": "https://api.github.com/users/idella/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/idella/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/idella/subscriptions",
      "organizations_url": "https://api.github.com/users/idella/orgs",
      "repos_url": "https://api.github.com/users/idella/repos",
      "events_url": "https://api.github.com/users/idella/events{/privacy}",
      "received_events_url": "https://api.github.com/users/idella/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-06-23T09:19:45Z",
    "updated_at": "2012-06-23T09:19:45Z",
    "author_association": "NONE",
    "body": "archtester dev-python # ls -ld /var/tmp/portage\ndrwxr-xr-x 4 root root 4096 May  5  2011 /var/tmp/portage\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/6527277",
    "html_url": "https://github.com/ipython/ipython/issues/1998#issuecomment-6527277",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/1998",
    "id": 6527277,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1MjcyNzc=",
    "user": {
      "login": "minrk",
      "id": 151929,
      "node_id": "MDQ6VXNlcjE1MTkyOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/151929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minrk",
      "html_url": "https://github.com/minrk",
      "followers_url": "https://api.github.com/users/minrk/followers",
      "following_url": "https://api.github.com/users/minrk/following{/other_user}",
      "gists_url": "https://api.github.com/users/minrk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minrk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minrk/subscriptions",
      "organizations_url": "https://api.github.com/users/minrk/orgs",
      "repos_url": "https://api.github.com/users/minrk/repos",
      "events_url": "https://api.github.com/users/minrk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minrk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-06-23T19:01:41Z",
    "updated_at": "2012-06-23T19:12:43Z",
    "author_association": "MEMBER",
    "body": "Are you certain the test suite is run as root?  It seems like a reasonable thing to run third-party tests as a restricted user, in which case this dir would obviously not be writable.\n\nAs root, what do you get for:\n\n``` python\nimport os\npath = '/var/tmp/portage'\nprint \"writable:\", os.access(path, os.W_OK)\nprint \"dir:\", os.path.isdir(path)\n```\n\nBecause that's the sum-total of the `_writable_dir` function.  If those are both True, then your tests are most likely not actually being run as root, and the failure is correct.\n\nIn any case, we might just skip this fairly unlikely test case, as it only runs afoul of contrived unrealistic environments like most testing sandboxes.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/6527502",
    "html_url": "https://github.com/ipython/ipython/issues/1998#issuecomment-6527502",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/1998",
    "id": 6527502,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1Mjc1MDI=",
    "user": {
      "login": "idella",
      "id": 1655078,
      "node_id": "MDQ6VXNlcjE2NTUwNzg=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1655078?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/idella",
      "html_url": "https://github.com/idella",
      "followers_url": "https://api.github.com/users/idella/followers",
      "following_url": "https://api.github.com/users/idella/following{/other_user}",
      "gists_url": "https://api.github.com/users/idella/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/idella/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/idella/subscriptions",
      "organizations_url": "https://api.github.com/users/idella/orgs",
      "repos_url": "https://api.github.com/users/idella/repos",
      "events_url": "https://api.github.com/users/idella/events{/privacy}",
      "received_events_url": "https://api.github.com/users/idella/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-06-23T19:27:43Z",
    "updated_at": "2012-06-23T19:27:43Z",
    "author_association": "NONE",
    "body": "Are you certain the test suite is run as root?\nFEATURES=\"userpriv usersandbox in /etc/make.conf.  Now this is s likely source of the confusion.  An emerge is always run as root, but these features make running in the sandbox with user privileges, and these settings are recommended hence I use them.  However, I think skipping the test catches all best interests.  If it fails, we at gentoo say that's not right, pass it to upstream, and it happens that the odd test like comes up that just doesn't 'play right' in a  carefully crafted and enforced gentoo sandbox. \n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/6527668",
    "html_url": "https://github.com/ipython/ipython/issues/1998#issuecomment-6527668",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/1998",
    "id": 6527668,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1Mjc2Njg=",
    "user": {
      "login": "bfroehle",
      "id": 204333,
      "node_id": "MDQ6VXNlcjIwNDMzMw==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/204333?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bfroehle",
      "html_url": "https://github.com/bfroehle",
      "followers_url": "https://api.github.com/users/bfroehle/followers",
      "following_url": "https://api.github.com/users/bfroehle/following{/other_user}",
      "gists_url": "https://api.github.com/users/bfroehle/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bfroehle/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bfroehle/subscriptions",
      "organizations_url": "https://api.github.com/users/bfroehle/orgs",
      "repos_url": "https://api.github.com/users/bfroehle/repos",
      "events_url": "https://api.github.com/users/bfroehle/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bfroehle/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-06-23T19:47:42Z",
    "updated_at": "2012-06-23T19:47:42Z",
    "author_association": "CONTRIBUTOR",
    "body": "Sounds like the best thing to do is to just get rid of that specific test.  It seems to me that we can't really guarantee that '~' will be writable if $HOME is not set (in testing environments)... It is certainly an odd corner case...\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/6527747",
    "html_url": "https://github.com/ipython/ipython/issues/1998#issuecomment-6527747",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/1998",
    "id": 6527747,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1Mjc3NDc=",
    "user": {
      "login": "fperez",
      "id": 57394,
      "node_id": "MDQ6VXNlcjU3Mzk0",
      "avatar_url": "https://avatars1.githubusercontent.com/u/57394?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fperez",
      "html_url": "https://github.com/fperez",
      "followers_url": "https://api.github.com/users/fperez/followers",
      "following_url": "https://api.github.com/users/fperez/following{/other_user}",
      "gists_url": "https://api.github.com/users/fperez/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fperez/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fperez/subscriptions",
      "organizations_url": "https://api.github.com/users/fperez/orgs",
      "repos_url": "https://api.github.com/users/fperez/repos",
      "events_url": "https://api.github.com/users/fperez/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fperez/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-06-23T19:57:57Z",
    "updated_at": "2012-06-23T19:57:57Z",
    "author_association": "MEMBER",
    "body": "Are we already running each test group with a tempfile-generated directory set as IPYTHONDIR?  I don't recall if that's been merged or not, but that would solve this problem (and in general introduce a healthy decoupling between test groups and the enclosing environment).\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/6528044",
    "html_url": "https://github.com/ipython/ipython/issues/1998#issuecomment-6528044",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/1998",
    "id": 6528044,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1MjgwNDQ=",
    "user": {
      "login": "minrk",
      "id": 151929,
      "node_id": "MDQ6VXNlcjE1MTkyOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/151929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minrk",
      "html_url": "https://github.com/minrk",
      "followers_url": "https://api.github.com/users/minrk/followers",
      "following_url": "https://api.github.com/users/minrk/following{/other_user}",
      "gists_url": "https://api.github.com/users/minrk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minrk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minrk/subscriptions",
      "organizations_url": "https://api.github.com/users/minrk/orgs",
      "repos_url": "https://api.github.com/users/minrk/repos",
      "events_url": "https://api.github.com/users/minrk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minrk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-06-23T20:36:07Z",
    "updated_at": "2012-06-23T20:36:07Z",
    "author_association": "MEMBER",
    "body": "For completeness:\n\nThe case this tests is that in any real, sensible (*ix) environment, the HOME variable is not necessary because the pwd package can be relied upon to get the home dir (as evidenced by the fact that this test has been passing for non-pathological environments for a long time).  This comes up in various bundled app situations, where HOME need not be defined.\n\nThis is failing because `pwd.getpwuid(os.getuid()).pw_dir` (see the os.path.expanduser source) is not returning a valid choice.  This is a bug in either the gentoo sandboxing in general or the usage thereof in this particular build (I don't know enough to be sure), because the passwd database has the home dir of the user as root-owned, which obviously makes no sense.\n\nIt is a bit silly to remove a perfectly functional and correct test, but at the same time, it's not really testing IPython - it's testing os.path.expanduser and the system passwd database, which do not give sensible values in this sandbox.\n\n> Are we already running each test group with a tempfile-generated directory set as IPYTHONDIR?\n\nWe are not, but I also don't believe that would change anything here.  I think it's the sandbox itself that has pathological values, and once inside that sandbox the cwd for subprocesses should be irrelevant.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/6528141",
    "html_url": "https://github.com/ipython/ipython/issues/1998#issuecomment-6528141",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/1998",
    "id": 6528141,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1MjgxNDE=",
    "user": {
      "login": "fperez",
      "id": 57394,
      "node_id": "MDQ6VXNlcjU3Mzk0",
      "avatar_url": "https://avatars1.githubusercontent.com/u/57394?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fperez",
      "html_url": "https://github.com/fperez",
      "followers_url": "https://api.github.com/users/fperez/followers",
      "following_url": "https://api.github.com/users/fperez/following{/other_user}",
      "gists_url": "https://api.github.com/users/fperez/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fperez/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fperez/subscriptions",
      "organizations_url": "https://api.github.com/users/fperez/orgs",
      "repos_url": "https://api.github.com/users/fperez/repos",
      "events_url": "https://api.github.com/users/fperez/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fperez/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-06-23T20:47:13Z",
    "updated_at": "2012-06-23T20:47:13Z",
    "author_association": "MEMBER",
    "body": "Thanks for the careful analysis, @minrk.  I suggest we close this and let the gentoo folks either figure out their build machinery or report it upstream to Python if they deem it an issue with pwd/os.path (and they can argue their point with the python folks, not us).  Does that sound reasonable?\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/6528197",
    "html_url": "https://github.com/ipython/ipython/issues/1998#issuecomment-6528197",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/1998",
    "id": 6528197,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1MjgxOTc=",
    "user": {
      "login": "minrk",
      "id": 151929,
      "node_id": "MDQ6VXNlcjE1MTkyOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/151929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minrk",
      "html_url": "https://github.com/minrk",
      "followers_url": "https://api.github.com/users/minrk/followers",
      "following_url": "https://api.github.com/users/minrk/following{/other_user}",
      "gists_url": "https://api.github.com/users/minrk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minrk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minrk/subscriptions",
      "organizations_url": "https://api.github.com/users/minrk/orgs",
      "repos_url": "https://api.github.com/users/minrk/repos",
      "events_url": "https://api.github.com/users/minrk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minrk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-06-23T20:54:28Z",
    "updated_at": "2012-06-23T20:54:28Z",
    "author_association": "MEMBER",
    "body": "I guess I should clarify my clarification a little bit :).  While the test is fine and there is no IPython bug here, the fact that it mostly tests code totally outside IPython, I come down slightly _in favor_ of removing the test, or at least removing its check for writability.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/6528453",
    "html_url": "https://github.com/ipython/ipython/issues/1998#issuecomment-6528453",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/1998",
    "id": 6528453,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1Mjg0NTM=",
    "user": {
      "login": "fperez",
      "id": 57394,
      "node_id": "MDQ6VXNlcjU3Mzk0",
      "avatar_url": "https://avatars1.githubusercontent.com/u/57394?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fperez",
      "html_url": "https://github.com/fperez",
      "followers_url": "https://api.github.com/users/fperez/followers",
      "following_url": "https://api.github.com/users/fperez/following{/other_user}",
      "gists_url": "https://api.github.com/users/fperez/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fperez/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fperez/subscriptions",
      "organizations_url": "https://api.github.com/users/fperez/orgs",
      "repos_url": "https://api.github.com/users/fperez/repos",
      "events_url": "https://api.github.com/users/fperez/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fperez/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-06-23T21:25:51Z",
    "updated_at": "2012-06-23T21:25:51Z",
    "author_association": "MEMBER",
    "body": "Fine with me, though let's only remove the writability check.  As you said above, the test is otherwise fine, and it may help us catch other problems sometimes...\n"
  }
]
