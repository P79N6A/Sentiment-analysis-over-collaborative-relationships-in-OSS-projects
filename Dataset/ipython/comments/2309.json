[
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/7792284",
    "html_url": "https://github.com/ipython/ipython/issues/2309#issuecomment-7792284",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/2309",
    "id": 7792284,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3OTIyODQ=",
    "user": {
      "login": "minrk",
      "id": 151929,
      "node_id": "MDQ6VXNlcjE1MTkyOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/151929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minrk",
      "html_url": "https://github.com/minrk",
      "followers_url": "https://api.github.com/users/minrk/followers",
      "following_url": "https://api.github.com/users/minrk/following{/other_user}",
      "gists_url": "https://api.github.com/users/minrk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minrk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minrk/subscriptions",
      "organizations_url": "https://api.github.com/users/minrk/orgs",
      "repos_url": "https://api.github.com/users/minrk/repos",
      "events_url": "https://api.github.com/users/minrk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minrk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-08-16T17:14:56Z",
    "updated_at": "2012-08-16T17:14:56Z",
    "author_association": "MEMBER",
    "body": "When I run this in notebook I get the expected output.  Have you made any other gevent-related calls, or is this the only code that has been run in the process?\n\nAlso, what version of gevent are you using?\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/7836661",
    "html_url": "https://github.com/ipython/ipython/issues/2309#issuecomment-7836661",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/2309",
    "id": 7836661,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4MzY2NjE=",
    "user": {
      "login": "jonschull",
      "id": 53673,
      "node_id": "MDQ6VXNlcjUzNjcz",
      "avatar_url": "https://avatars0.githubusercontent.com/u/53673?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonschull",
      "html_url": "https://github.com/jonschull",
      "followers_url": "https://api.github.com/users/jonschull/followers",
      "following_url": "https://api.github.com/users/jonschull/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonschull/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonschull/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonschull/subscriptions",
      "organizations_url": "https://api.github.com/users/jonschull/orgs",
      "repos_url": "https://api.github.com/users/jonschull/repos",
      "events_url": "https://api.github.com/users/jonschull/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonschull/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-08-17T22:14:20Z",
    "updated_at": "2012-08-17T22:14:20Z",
    "author_association": "NONE",
    "body": "Thanks for the quick follow up.\n\nIndeed, if I restart the kernel the results make sense.  But when I re-run\nthe last item, they go bad.  I suspect gevent is not being recreated when I\ncreate it anew.\n\ngevent version info:  (0, 13, 7)\n\nplease see attached\n\nJon Schull     Jon.Schull@rit.edu   cell: 585-738-6696\nDept. of Interactive Games and Media, and Center for Student Innovation, RIT\nMy free/busy info is\nherehttps://www.google.com/calendar/b/0/embed?src=jschull@gmail.com&ctz=America/New_York.\n For an appointment, make me an offer.\n\nOn Thu, Aug 16, 2012 at 1:14 PM, Min RK notifications@github.com wrote:\n\n> When I run this in notebook I get the expected output. Have you made any\n> other gevent-related calls, or is this the only code that has been run in\n> the process?\n> \n> Also, what version of gevent are you using?\n> \n> —\n> Reply to this email directly or view it on GitHubhttps://github.com/ipython/ipython/issues/2309#issuecomment-7792284.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/7837545",
    "html_url": "https://github.com/ipython/ipython/issues/2309#issuecomment-7837545",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/2309",
    "id": 7837545,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4Mzc1NDU=",
    "user": {
      "login": "minrk",
      "id": 151929,
      "node_id": "MDQ6VXNlcjE1MTkyOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/151929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minrk",
      "html_url": "https://github.com/minrk",
      "followers_url": "https://api.github.com/users/minrk/followers",
      "following_url": "https://api.github.com/users/minrk/following{/other_user}",
      "gists_url": "https://api.github.com/users/minrk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minrk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minrk/subscriptions",
      "organizations_url": "https://api.github.com/users/minrk/orgs",
      "repos_url": "https://api.github.com/users/minrk/repos",
      "events_url": "https://api.github.com/users/minrk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minrk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-08-17T23:04:58Z",
    "updated_at": "2012-08-17T23:04:58Z",
    "author_association": "MEMBER",
    "body": "I can confirm that the second run encounters this issue with gevent-0.13, and does not with gevent 1.0-dev, so this is a gevent bug.\n\nThe issue seems to be that the gevent loop timer is still running in the background while IPython is sitting idle, so when you do spawn(...3), the sleep seems to wake itself 3 seconds after the previous gevent call, _not_ 3 seconds after the call to `gevent.sleep`.  A call to `gevent.sleep(0)` before the calls to `gevent.spawn` seems to workaround the issue.\n\nI'm closing this, because I can [reproduce](https://gist.github.com/3383348) this behavior exactly without IPython at all, and has even been fixed in gevent-dev.\n\n> please see attached\n\nNB: GitHub comments do not support attachments.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/7840652",
    "html_url": "https://github.com/ipython/ipython/issues/2309#issuecomment-7840652",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/2309",
    "id": 7840652,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4NDA2NTI=",
    "user": {
      "login": "jonschull",
      "id": 53673,
      "node_id": "MDQ6VXNlcjUzNjcz",
      "avatar_url": "https://avatars0.githubusercontent.com/u/53673?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonschull",
      "html_url": "https://github.com/jonschull",
      "followers_url": "https://api.github.com/users/jonschull/followers",
      "following_url": "https://api.github.com/users/jonschull/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonschull/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonschull/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonschull/subscriptions",
      "organizations_url": "https://api.github.com/users/jonschull/orgs",
      "repos_url": "https://api.github.com/users/jonschull/repos",
      "events_url": "https://api.github.com/users/jonschull/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonschull/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-08-18T01:28:47Z",
    "updated_at": "2012-08-18T01:28:47Z",
    "author_association": "NONE",
    "body": "Thanks for your impressive, and impressively fast, analysis!\n\nSent from my iPhone 585-738-6696; pls excuse tyops\n\nOn Aug 17, 2012, at 7:05 PM, Min RK notifications@github.com wrote:\n\nI can confirm that the second run encounters this issue with gevent-0.13,\nand does not with gevent 1.0-dev, so this is a gevent bug.\n\nThe issue seems to be that the gevent loop timer is still running in the\nbackground while IPython is sitting idle, so when you do spawn(...3), the\nsleep seems to wake itself 3 seconds after the previous gevent call,\n_not_3 seconds after the call to\ngevent.sleep. A call to gevent.sleep(0) before the calls to\ngevent.spawnseems to workaround the issue.\n\nI'm closing this, because I can reproduce\nhttps://gist.github.com/3383348this behavior exactly without IPython\nat all, and has even been fixed in\ngevent-dev.\n\nplease see attached\n\nNB: GitHub comments do not support attachments.\n\n—\nReply to this email directly or view it on\nGitHubhttps://github.com/ipython/ipython/issues/2309#issuecomment-7837545.\n"
  }
]
