[
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/6234747",
    "html_url": "https://github.com/ipython/ipython/pull/1888#issuecomment-6234747",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/1888",
    "id": 6234747,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyMzQ3NDc=",
    "user": {
      "login": "jdmarch",
      "id": 278873,
      "node_id": "MDQ6VXNlcjI3ODg3Mw==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/278873?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jdmarch",
      "html_url": "https://github.com/jdmarch",
      "followers_url": "https://api.github.com/users/jdmarch/followers",
      "following_url": "https://api.github.com/users/jdmarch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jdmarch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jdmarch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jdmarch/subscriptions",
      "organizations_url": "https://api.github.com/users/jdmarch/orgs",
      "repos_url": "https://api.github.com/users/jdmarch/repos",
      "events_url": "https://api.github.com/users/jdmarch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jdmarch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-06-11T03:34:19Z",
    "updated_at": "2012-06-11T03:34:19Z",
    "author_association": "CONTRIBUTOR",
    "body": "A few comments, mostly in the context of Windows. Wish I had a clear & full response but I am out of time tonight, mostly offline for the next week, and probably out of time for the week after that.\n1. The use of os.system here was already fragile because call_args[1](the path to ipytest.py) may contain spaces (e.g. if ipython source is in user home dir on Win XP); while this would not bother Popen, os.system cannot interpret it correctly unless it is explicitly quoted (which it is not).\n2. Even before this PR, there are a number of (presumably unrelated) test failures on Windows. In particular, #1901 complicates evaluation of the PR. \n3. Even apart from (1), I would expect Popen to work as well or better than os.system, at least for running a single test. Both before and after this PR, when I use the non-Windows version of _run_cmd for Windows, _one test at a time_, the tests seem to run no worse than before (cf (2)).\n4. The possible issues are in running multiple tests, when there are failures. It's not clear to me how well this code works then in Windows.\n5. I am using Python 2.7. Note that os.kill is not supported in Windows prior to Python 2.7. I would need to understand better how the recursive test runner handles failures in *nix before I would have an opinion whether even with this we would be any worse off with Popen than with os.system.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/6241075",
    "html_url": "https://github.com/ipython/ipython/pull/1888#issuecomment-6241075",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/1888",
    "id": 6241075,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyNDEwNzU=",
    "user": {
      "login": "takluyver",
      "id": 327925,
      "node_id": "MDQ6VXNlcjMyNzkyNQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/327925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/takluyver",
      "html_url": "https://github.com/takluyver",
      "followers_url": "https://api.github.com/users/takluyver/followers",
      "following_url": "https://api.github.com/users/takluyver/following{/other_user}",
      "gists_url": "https://api.github.com/users/takluyver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/takluyver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/takluyver/subscriptions",
      "organizations_url": "https://api.github.com/users/takluyver/orgs",
      "repos_url": "https://api.github.com/users/takluyver/repos",
      "events_url": "https://api.github.com/users/takluyver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/takluyver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-06-11T10:19:19Z",
    "updated_at": "2012-06-11T10:19:19Z",
    "author_association": "MEMBER",
    "body": "OK, so by the sounds of it we should try changing it to `subprocess.call` and seeing what - if anything - breaks?\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/6252259",
    "html_url": "https://github.com/ipython/ipython/pull/1888#issuecomment-6252259",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/1888",
    "id": 6252259,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyNTIyNTk=",
    "user": {
      "login": "fperez",
      "id": 57394,
      "node_id": "MDQ6VXNlcjU3Mzk0",
      "avatar_url": "https://avatars1.githubusercontent.com/u/57394?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fperez",
      "html_url": "https://github.com/fperez",
      "followers_url": "https://api.github.com/users/fperez/followers",
      "following_url": "https://api.github.com/users/fperez/following{/other_user}",
      "gists_url": "https://api.github.com/users/fperez/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fperez/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fperez/subscriptions",
      "organizations_url": "https://api.github.com/users/fperez/orgs",
      "repos_url": "https://api.github.com/users/fperez/repos",
      "events_url": "https://api.github.com/users/fperez/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fperez/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-06-11T18:36:23Z",
    "updated_at": "2012-06-11T18:36:23Z",
    "author_association": "MEMBER",
    "body": "That could be done, and we can ask @jstenar to have a test of the branch on Windows as well...\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/6499004",
    "html_url": "https://github.com/ipython/ipython/pull/1888#issuecomment-6499004",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/1888",
    "id": 6499004,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0OTkwMDQ=",
    "user": {
      "login": "bfroehle",
      "id": 204333,
      "node_id": "MDQ6VXNlcjIwNDMzMw==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/204333?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bfroehle",
      "html_url": "https://github.com/bfroehle",
      "followers_url": "https://api.github.com/users/bfroehle/followers",
      "following_url": "https://api.github.com/users/bfroehle/following{/other_user}",
      "gists_url": "https://api.github.com/users/bfroehle/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bfroehle/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bfroehle/subscriptions",
      "organizations_url": "https://api.github.com/users/bfroehle/orgs",
      "repos_url": "https://api.github.com/users/bfroehle/repos",
      "events_url": "https://api.github.com/users/bfroehle/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bfroehle/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-06-22T01:54:57Z",
    "updated_at": "2012-06-22T01:54:57Z",
    "author_association": "CONTRIBUTOR",
    "body": "Well, to really get the ball rolling here I've removed the windows os.system call and run the different test groups in their own processes using `multiprocessing.Pool.map`.\n\nNow this is pretty wasteful. By that, I mean multiprocessing spins up a fresh Python process to run 'runner.run()' which then launches a new Python process for the actual test.\n\n```\n$ ps f\n  PID TTY      STAT   TIME COMMAND\n 1791 pts/21   Ss     0:00 bash\n 4565 pts/21   R+     0:00  \\_ ps f\n29891 pts/5    Ss     0:00 bash\n 4462 pts/5    Sl+    0:00  \\_ /usr/bin/python /home/bfroehle/.local/bin/iptest\n 4467 pts/5    S+     0:00      \\_ /bin/sh -c octave -q --braindead\n 4468 pts/5    S+     0:00      |   \\_ octave -q --braindead\n 4469 pts/5    S+     0:00      \\_ /usr/bin/python /home/bfroehle/.local/bin/iptest\n 4491 pts/5    D+     0:00      |   \\_ /usr/bin/python /home/bfroehle/src/ipython/IPython/testing/iptest.py IPython.config\n 4555 pts/5    S+     0:00      |       \\_ /bin/sh -c octave -q --braindead\n 4557 pts/5    S+     0:00      |           \\_ octave -q --braindead\n 4470 pts/5    S+     0:00      \\_ /usr/bin/python /home/bfroehle/.local/bin/iptest\n 4488 pts/5    D+     0:00      |   \\_ /usr/bin/python /home/bfroehle/src/ipython/IPython/testing/iptest.py IPython.core\n 4547 pts/5    S+     0:00      |       \\_ /bin/sh -c octave -q --braindead\n 4550 pts/5    S+     0:00      |           \\_ octave -q --braindead\n 4471 pts/5    S+     0:00      \\_ /usr/bin/python /home/bfroehle/.local/bin/iptest\n 4489 pts/5    D+     0:00      |   \\_ /usr/bin/python /home/bfroehle/src/ipython/IPython/testing/iptest.py IPython.extensions\n 4553 pts/5    S+     0:00      |       \\_ /bin/sh -c octave -q --braindead\n 4554 pts/5    S+     0:00      |           \\_ octave -q --braindead\n 4472 pts/5    S+     0:00      \\_ /usr/bin/python /home/bfroehle/.local/bin/iptest\n 4490 pts/5    D+     0:00      |   \\_ /usr/bin/python /home/bfroehle/src/ipython/IPython/testing/iptest.py IPython.frontend\n 4543 pts/5    S+     0:00      |       \\_ /bin/sh -c octave -q --braindead\n 4544 pts/5    S+     0:00      |           \\_ octave -q --braindead\n...\n```\n\nBut it does cut the test time down to ~56 seconds (from ~136 seconds).\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/6500118",
    "html_url": "https://github.com/ipython/ipython/pull/1888#issuecomment-6500118",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/1888",
    "id": 6500118,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1MDAxMTg=",
    "user": {
      "login": "fperez",
      "id": 57394,
      "node_id": "MDQ6VXNlcjU3Mzk0",
      "avatar_url": "https://avatars1.githubusercontent.com/u/57394?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fperez",
      "html_url": "https://github.com/fperez",
      "followers_url": "https://api.github.com/users/fperez/followers",
      "following_url": "https://api.github.com/users/fperez/following{/other_user}",
      "gists_url": "https://api.github.com/users/fperez/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fperez/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fperez/subscriptions",
      "organizations_url": "https://api.github.com/users/fperez/orgs",
      "repos_url": "https://api.github.com/users/fperez/repos",
      "events_url": "https://api.github.com/users/fperez/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fperez/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-06-22T03:59:02Z",
    "updated_at": "2012-06-22T03:59:02Z",
    "author_association": "MEMBER",
    "body": "That looks like pretty good progress!  I'm going to tag this as 0.14 material though, because it makes pretty serious changes that I'm not comfortable with this close to release time...\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/6529740",
    "html_url": "https://github.com/ipython/ipython/pull/1888#issuecomment-6529740",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/1888",
    "id": 6529740,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1Mjk3NDA=",
    "user": {
      "login": "jdmarch",
      "id": 278873,
      "node_id": "MDQ6VXNlcjI3ODg3Mw==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/278873?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jdmarch",
      "html_url": "https://github.com/jdmarch",
      "followers_url": "https://api.github.com/users/jdmarch/followers",
      "following_url": "https://api.github.com/users/jdmarch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jdmarch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jdmarch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jdmarch/subscriptions",
      "organizations_url": "https://api.github.com/users/jdmarch/orgs",
      "repos_url": "https://api.github.com/users/jdmarch/repos",
      "events_url": "https://api.github.com/users/jdmarch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jdmarch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-06-24T01:35:59Z",
    "updated_at": "2012-06-24T01:35:59Z",
    "author_association": "CONTRIBUTOR",
    "body": "On WinXP-32, test IPython.core has a failure with this PR, but not with PR #2016, and not when run freestanding.\nThis is in addition to #2017 and #2018, core test issues which are independent of this PR.\n\n```\n======================================================================\nFAIL: Testing of issue https://github.com/ipython/ipython/issues/1107\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"c:\\documents and settings\\jdm\\ipython\\IPython\\core\\tests\\test_completerlib.py\", line 83, in test_import_invalid_module\n    assert valid_module_names.issubset(s), valid_module_names.intersection(s)\nAssertionError: set([])\n>>  assert set(['foobar']).issubset(set([])), set(['foobar']).set([])(set([]))\n\n-------------------- >> begin captured stdout << ---------------------\n\nCaching the list of root modules, please wait!\n(This will only be done once - type '%rehashx' to reset cache!)\n\nThis is taking too long, we give up.\n\n\n--------------------- >> end captured stdout << ----------------------\n```\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/6529781",
    "html_url": "https://github.com/ipython/ipython/pull/1888#issuecomment-6529781",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/1888",
    "id": 6529781,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1Mjk3ODE=",
    "user": {
      "login": "jdmarch",
      "id": 278873,
      "node_id": "MDQ6VXNlcjI3ODg3Mw==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/278873?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jdmarch",
      "html_url": "https://github.com/jdmarch",
      "followers_url": "https://api.github.com/users/jdmarch/followers",
      "following_url": "https://api.github.com/users/jdmarch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jdmarch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jdmarch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jdmarch/subscriptions",
      "organizations_url": "https://api.github.com/users/jdmarch/orgs",
      "repos_url": "https://api.github.com/users/jdmarch/repos",
      "events_url": "https://api.github.com/users/jdmarch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jdmarch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-06-24T01:47:37Z",
    "updated_at": "2012-06-24T01:47:37Z",
    "author_association": "CONTRIBUTOR",
    "body": "On WinXP-32, test IPython.zmq freezes during post-test cleanup with this PR, but not with PR #2016, and not when run freestanding. Possible segfault (eventually the Windows error reporting dialog pops up). Leaves many python processes alive but nothing responsive.\n\n```\n**********************************************************************\nIPython test group: IPython.zmq\n.......................................................................................................................................\n...............\n----------------------------------------------------------------------\nRan 160 tests in 21.656s\n\nOK\nException AttributeError: AttributeError(\"'NoneType' object has no attribute 'remove'\",) in <bound method BlockingKernelManager.__del__\n of <IPython.zmq.blockingkernelmanager.BlockingKernelManager object at 0x05F47FB0>> ignored\n```\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/6531403",
    "html_url": "https://github.com/ipython/ipython/pull/1888#issuecomment-6531403",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/1888",
    "id": 6531403,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1MzE0MDM=",
    "user": {
      "login": "fperez",
      "id": 57394,
      "node_id": "MDQ6VXNlcjU3Mzk0",
      "avatar_url": "https://avatars1.githubusercontent.com/u/57394?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fperez",
      "html_url": "https://github.com/fperez",
      "followers_url": "https://api.github.com/users/fperez/followers",
      "following_url": "https://api.github.com/users/fperez/following{/other_user}",
      "gists_url": "https://api.github.com/users/fperez/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fperez/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fperez/subscriptions",
      "organizations_url": "https://api.github.com/users/fperez/orgs",
      "repos_url": "https://api.github.com/users/fperez/repos",
      "events_url": "https://api.github.com/users/fperez/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fperez/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-06-24T08:24:13Z",
    "updated_at": "2012-06-24T08:24:13Z",
    "author_association": "MEMBER",
    "body": "Thanks for those tests, @jdmarch!  This is 0.14 material, so there's no danger of introducing instability for the release, but having this feedback is excellent so we can get this one in good shape.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/7023802",
    "html_url": "https://github.com/ipython/ipython/pull/1888#issuecomment-7023802",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/1888",
    "id": 7023802,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMjM4MDI=",
    "user": {
      "login": "bfroehle",
      "id": 204333,
      "node_id": "MDQ6VXNlcjIwNDMzMw==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/204333?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bfroehle",
      "html_url": "https://github.com/bfroehle",
      "followers_url": "https://api.github.com/users/bfroehle/followers",
      "following_url": "https://api.github.com/users/bfroehle/following{/other_user}",
      "gists_url": "https://api.github.com/users/bfroehle/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bfroehle/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bfroehle/subscriptions",
      "organizations_url": "https://api.github.com/users/bfroehle/orgs",
      "repos_url": "https://api.github.com/users/bfroehle/repos",
      "events_url": "https://api.github.com/users/bfroehle/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bfroehle/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-07-17T00:38:46Z",
    "updated_at": "2012-07-17T00:38:46Z",
    "author_association": "CONTRIBUTOR",
    "body": "This pull request is too unwieldy.  I'm going to parcel it out into a few distinct pull requests, beginning with #2148: \"win32 iptest: Use subprocess.Popen() instead of os.system().\"\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/7129592",
    "html_url": "https://github.com/ipython/ipython/pull/1888#issuecomment-7129592",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/1888",
    "id": 7129592,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxMjk1OTI=",
    "user": {
      "login": "fperez",
      "id": 57394,
      "node_id": "MDQ6VXNlcjU3Mzk0",
      "avatar_url": "https://avatars1.githubusercontent.com/u/57394?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fperez",
      "html_url": "https://github.com/fperez",
      "followers_url": "https://api.github.com/users/fperez/followers",
      "following_url": "https://api.github.com/users/fperez/following{/other_user}",
      "gists_url": "https://api.github.com/users/fperez/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fperez/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fperez/subscriptions",
      "organizations_url": "https://api.github.com/users/fperez/orgs",
      "repos_url": "https://api.github.com/users/fperez/repos",
      "events_url": "https://api.github.com/users/fperez/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fperez/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-07-20T13:05:18Z",
    "updated_at": "2012-07-20T13:05:18Z",
    "author_association": "MEMBER",
    "body": "Great thanks!\n"
  }
]
