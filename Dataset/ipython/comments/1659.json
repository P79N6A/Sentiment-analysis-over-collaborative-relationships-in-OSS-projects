[
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/5336894",
    "html_url": "https://github.com/ipython/ipython/pull/1659#issuecomment-5336894",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/1659",
    "id": 5336894,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzMzY4OTQ=",
    "user": {
      "login": "mdboom",
      "id": 38294,
      "node_id": "MDQ6VXNlcjM4Mjk0",
      "avatar_url": "https://avatars3.githubusercontent.com/u/38294?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mdboom",
      "html_url": "https://github.com/mdboom",
      "followers_url": "https://api.github.com/users/mdboom/followers",
      "following_url": "https://api.github.com/users/mdboom/following{/other_user}",
      "gists_url": "https://api.github.com/users/mdboom/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mdboom/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mdboom/subscriptions",
      "organizations_url": "https://api.github.com/users/mdboom/orgs",
      "repos_url": "https://api.github.com/users/mdboom/repos",
      "events_url": "https://api.github.com/users/mdboom/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mdboom/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-04-25T17:21:37Z",
    "updated_at": "2012-04-25T17:21:37Z",
    "author_association": "CONTRIBUTOR",
    "body": "To reproduce:\n\n```\nimport time\nfor i in range(10):\n    print (\"\\r\" + \"#\" * i),\n    time.sleep(0.1)\nprint \"Step 2\"\nfor i in range(10):\n    print (\"\\r\" + \"#\" * i),\n    time.sleep(0.1)\n```\n\nshould produce:\n\n```\n#########\nStep 2\n#########\n```\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/5337399",
    "html_url": "https://github.com/ipython/ipython/pull/1659#issuecomment-5337399",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/1659",
    "id": 5337399,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzMzczOTk=",
    "user": {
      "login": "jasongrout",
      "id": 192614,
      "node_id": "MDQ6VXNlcjE5MjYxNA==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/192614?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jasongrout",
      "html_url": "https://github.com/jasongrout",
      "followers_url": "https://api.github.com/users/jasongrout/followers",
      "following_url": "https://api.github.com/users/jasongrout/following{/other_user}",
      "gists_url": "https://api.github.com/users/jasongrout/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jasongrout/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jasongrout/subscriptions",
      "organizations_url": "https://api.github.com/users/jasongrout/orgs",
      "repos_url": "https://api.github.com/users/jasongrout/repos",
      "events_url": "https://api.github.com/users/jasongrout/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jasongrout/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-04-25T17:44:56Z",
    "updated_at": "2012-04-25T17:44:56Z",
    "author_association": "MEMBER",
    "body": "Thanks for bringing this up; we have the same problem on aleph.sagemath.org with our use of the IPython messaging protocol.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/5338795",
    "html_url": "https://github.com/ipython/ipython/pull/1659#issuecomment-5338795",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/1659",
    "id": 5338795,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzMzg3OTU=",
    "user": {
      "login": "minrk",
      "id": 151929,
      "node_id": "MDQ6VXNlcjE1MTkyOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/151929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minrk",
      "html_url": "https://github.com/minrk",
      "followers_url": "https://api.github.com/users/minrk/followers",
      "following_url": "https://api.github.com/users/minrk/following{/other_user}",
      "gists_url": "https://api.github.com/users/minrk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minrk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minrk/subscriptions",
      "organizations_url": "https://api.github.com/users/minrk/orgs",
      "repos_url": "https://api.github.com/users/minrk/repos",
      "events_url": "https://api.github.com/users/minrk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minrk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-04-25T18:40:26Z",
    "updated_at": "2012-04-25T18:40:26Z",
    "author_association": "MEMBER",
    "body": "I had a look at the save/restore, and it's a bit problematic.\n\nWhen we write the ipynb to JSON, we use `splitlines()` for the text.  So roundtrip to files, `'\\r#'` becomes `\\n#`.  The change needed for this is to use `splitlines(True)`, and `''.join(lines)` instead of `splitlines()` and `'\\n'.join(lines)`.  I believe I have a safe fix that will behave properly for notebooks written before/after the fix, but I will have to test carefully to make sure it doesn't cause any problems.\n\nI do want to make a point of discouraging actually using terminal-centric behaviors in the notebook (`\\r`, and ANSI colors, etc.).  It's important that people don't think the notebook is a terminal emulator, and it never will be, nor should it be.  But `\\r` is simple enough.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/5346401",
    "html_url": "https://github.com/ipython/ipython/pull/1659#issuecomment-5346401",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/1659",
    "id": 5346401,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzNDY0MDE=",
    "user": {
      "login": "minrk",
      "id": 151929,
      "node_id": "MDQ6VXNlcjE1MTkyOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/151929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minrk",
      "html_url": "https://github.com/minrk",
      "followers_url": "https://api.github.com/users/minrk/followers",
      "following_url": "https://api.github.com/users/minrk/following{/other_user}",
      "gists_url": "https://api.github.com/users/minrk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minrk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minrk/subscriptions",
      "organizations_url": "https://api.github.com/users/minrk/orgs",
      "repos_url": "https://api.github.com/users/minrk/repos",
      "events_url": "https://api.github.com/users/minrk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minrk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-04-25T23:40:39Z",
    "updated_at": "2012-04-25T23:40:39Z",
    "author_association": "MEMBER",
    "body": "After PR #1663, this should load from saves properly without further changes.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/5357090",
    "html_url": "https://github.com/ipython/ipython/pull/1659#issuecomment-5357090",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/1659",
    "id": 5357090,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzNTcwOTA=",
    "user": {
      "login": "mdboom",
      "id": 38294,
      "node_id": "MDQ6VXNlcjM4Mjk0",
      "avatar_url": "https://avatars3.githubusercontent.com/u/38294?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mdboom",
      "html_url": "https://github.com/mdboom",
      "followers_url": "https://api.github.com/users/mdboom/followers",
      "following_url": "https://api.github.com/users/mdboom/following{/other_user}",
      "gists_url": "https://api.github.com/users/mdboom/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mdboom/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mdboom/subscriptions",
      "organizations_url": "https://api.github.com/users/mdboom/orgs",
      "repos_url": "https://api.github.com/users/mdboom/repos",
      "events_url": "https://api.github.com/users/mdboom/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mdboom/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-04-26T14:04:16Z",
    "updated_at": "2012-04-26T14:04:16Z",
    "author_association": "CONTRIBUTOR",
    "body": "I think I've corrected the test in which to not add a div when the content is empty.  This merged with #1663 also fixes the saving/loading issue.\n\nThanks for helping with this!\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/5390033",
    "html_url": "https://github.com/ipython/ipython/pull/1659#issuecomment-5390033",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/1659",
    "id": 5390033,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzOTAwMzM=",
    "user": {
      "login": "minrk",
      "id": 151929,
      "node_id": "MDQ6VXNlcjE1MTkyOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/151929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minrk",
      "html_url": "https://github.com/minrk",
      "followers_url": "https://api.github.com/users/minrk/followers",
      "following_url": "https://api.github.com/users/minrk/following{/other_user}",
      "gists_url": "https://api.github.com/users/minrk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minrk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minrk/subscriptions",
      "organizations_url": "https://api.github.com/users/minrk/orgs",
      "repos_url": "https://api.github.com/users/minrk/repos",
      "events_url": "https://api.github.com/users/minrk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minrk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-04-27T20:50:10Z",
    "updated_at": "2012-04-27T20:50:10Z",
    "author_association": "MEMBER",
    "body": "thanks, merged.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/5412671",
    "html_url": "https://github.com/ipython/ipython/pull/1659#issuecomment-5412671",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/1659",
    "id": 5412671,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0MTI2NzE=",
    "user": {
      "login": "minrk",
      "id": 151929,
      "node_id": "MDQ6VXNlcjE1MTkyOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/151929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minrk",
      "html_url": "https://github.com/minrk",
      "followers_url": "https://api.github.com/users/minrk/followers",
      "following_url": "https://api.github.com/users/minrk/following{/other_user}",
      "gists_url": "https://api.github.com/users/minrk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minrk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minrk/subscriptions",
      "organizations_url": "https://api.github.com/users/minrk/orgs",
      "repos_url": "https://api.github.com/users/minrk/repos",
      "events_url": "https://api.github.com/users/minrk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minrk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-04-30T06:55:29Z",
    "updated_at": "2012-04-30T06:55:29Z",
    "author_association": "MEMBER",
    "body": "Crap - I merged this prematurely, and it caused a pretty critical failure (try `!ls`, and you will see no output at all).  I reverted the original patch, so can you submit a new PR after testing the output of `!ls`?\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/5495203",
    "html_url": "https://github.com/ipython/ipython/pull/1659#issuecomment-5495203",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/1659",
    "id": 5495203,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0OTUyMDM=",
    "user": {
      "login": "takluyver",
      "id": 327925,
      "node_id": "MDQ6VXNlcjMyNzkyNQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/327925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/takluyver",
      "html_url": "https://github.com/takluyver",
      "followers_url": "https://api.github.com/users/takluyver/followers",
      "following_url": "https://api.github.com/users/takluyver/following{/other_user}",
      "gists_url": "https://api.github.com/users/takluyver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/takluyver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/takluyver/subscriptions",
      "organizations_url": "https://api.github.com/users/takluyver/orgs",
      "repos_url": "https://api.github.com/users/takluyver/repos",
      "events_url": "https://api.github.com/users/takluyver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/takluyver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-05-03T18:51:08Z",
    "updated_at": "2012-05-03T18:51:08Z",
    "author_association": "MEMBER",
    "body": "Hang on, I've just understood this issue. So if there's a percentage counter that gets overwritten 100 times, we store every percentage, separated by `\\r` characters? That seems unnecessary. Shouldn't we handle `\\r` for display, but then just save the final state, as the user sees it when they hit save?\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/5496136",
    "html_url": "https://github.com/ipython/ipython/pull/1659#issuecomment-5496136",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/1659",
    "id": 5496136,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0OTYxMzY=",
    "user": {
      "login": "minrk",
      "id": 151929,
      "node_id": "MDQ6VXNlcjE1MTkyOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/151929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minrk",
      "html_url": "https://github.com/minrk",
      "followers_url": "https://api.github.com/users/minrk/followers",
      "following_url": "https://api.github.com/users/minrk/following{/other_user}",
      "gists_url": "https://api.github.com/users/minrk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minrk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minrk/subscriptions",
      "organizations_url": "https://api.github.com/users/minrk/orgs",
      "repos_url": "https://api.github.com/users/minrk/repos",
      "events_url": "https://api.github.com/users/minrk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minrk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-05-03T19:26:48Z",
    "updated_at": "2012-05-03T19:26:48Z",
    "author_association": "MEMBER",
    "body": "Correct, the notebook structure is a transcript of what actually happened, excluding any UI-specific interpretation.  `\\r` is a frontend-specific special character, which is interpreted (in this PR) in the notebook as clearing the preceding line, which is distinct from the terminal, where it simply moves the cursor, and discards no information until overwrites start happening.\n\nThis is a difference between `\\r` and clear_output, and further reason why real notebook operations are better than faked terminal-behavior in the notebook.  This is acceptable to me, because I consider `\\r` support like this decidedly second-class, and have no problem with it suffering such a disadvantage.\n\nWe could store the transformed output, but we would have to be careful that we do _not_ store the escaped HTML output (we had this bug [before](https://github.com/ipython/ipython/issues/1205)).  If we make that change, then we _must_ do fixCR always on the raw text and before fixConsole, because we would be saving the results of fixCR, and must never save the results of fixConsole.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/5496676",
    "html_url": "https://github.com/ipython/ipython/pull/1659#issuecomment-5496676",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/1659",
    "id": 5496676,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0OTY2NzY=",
    "user": {
      "login": "takluyver",
      "id": 327925,
      "node_id": "MDQ6VXNlcjMyNzkyNQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/327925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/takluyver",
      "html_url": "https://github.com/takluyver",
      "followers_url": "https://api.github.com/users/takluyver/followers",
      "following_url": "https://api.github.com/users/takluyver/following{/other_user}",
      "gists_url": "https://api.github.com/users/takluyver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/takluyver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/takluyver/subscriptions",
      "organizations_url": "https://api.github.com/users/takluyver/orgs",
      "repos_url": "https://api.github.com/users/takluyver/repos",
      "events_url": "https://api.github.com/users/takluyver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/takluyver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-05-03T19:50:05Z",
    "updated_at": "2012-05-03T19:50:05Z",
    "author_association": "MEMBER",
    "body": "I'd side with removing overwritten content at some point before saving. Even if we'd rather they didn't, people are going to use `\\r` for progress counters, because it works and library authors shouldn't have to detect and handle the notebook. If it's left in, it's extra noise for version control. Also, if one day another application can load ipynb files, but can't handle `\\r`, its users won't appreciate seeing a load of messy progress information.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/5496730",
    "html_url": "https://github.com/ipython/ipython/pull/1659#issuecomment-5496730",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/1659",
    "id": 5496730,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0OTY3MzA=",
    "user": {
      "login": "minrk",
      "id": 151929,
      "node_id": "MDQ6VXNlcjE1MTkyOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/151929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minrk",
      "html_url": "https://github.com/minrk",
      "followers_url": "https://api.github.com/users/minrk/followers",
      "following_url": "https://api.github.com/users/minrk/following{/other_user}",
      "gists_url": "https://api.github.com/users/minrk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minrk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minrk/subscriptions",
      "organizations_url": "https://api.github.com/users/minrk/orgs",
      "repos_url": "https://api.github.com/users/minrk/repos",
      "events_url": "https://api.github.com/users/minrk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minrk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-05-03T19:52:56Z",
    "updated_at": "2012-05-03T19:52:56Z",
    "author_association": "MEMBER",
    "body": "Do you want to add that as a criterion for PR #1674 (note that this one is already closed)?\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/5496829",
    "html_url": "https://github.com/ipython/ipython/pull/1659#issuecomment-5496829",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/1659",
    "id": 5496829,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0OTY4Mjk=",
    "user": {
      "login": "minrk",
      "id": 151929,
      "node_id": "MDQ6VXNlcjE1MTkyOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/151929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minrk",
      "html_url": "https://github.com/minrk",
      "followers_url": "https://api.github.com/users/minrk/followers",
      "following_url": "https://api.github.com/users/minrk/following{/other_user}",
      "gists_url": "https://api.github.com/users/minrk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minrk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minrk/subscriptions",
      "organizations_url": "https://api.github.com/users/minrk/orgs",
      "repos_url": "https://api.github.com/users/minrk/repos",
      "events_url": "https://api.github.com/users/minrk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minrk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-05-03T19:57:55Z",
    "updated_at": "2012-05-03T19:57:55Z",
    "author_association": "MEMBER",
    "body": "I think it does make sense to do, my main point is that I don't think it's worth the effort.  If someone does feel like doing it, they are welcome, but must be very careful with the points I mentioned.\n"
  }
]
