[
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/11853057",
    "html_url": "https://github.com/ipython/ipython/pull/2738#issuecomment-11853057",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/2738",
    "id": 11853057,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExODUzMDU3",
    "user": {
      "login": "takluyver",
      "id": 327925,
      "node_id": "MDQ6VXNlcjMyNzkyNQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/327925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/takluyver",
      "html_url": "https://github.com/takluyver",
      "followers_url": "https://api.github.com/users/takluyver/followers",
      "following_url": "https://api.github.com/users/takluyver/following{/other_user}",
      "gists_url": "https://api.github.com/users/takluyver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/takluyver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/takluyver/subscriptions",
      "organizations_url": "https://api.github.com/users/takluyver/orgs",
      "repos_url": "https://api.github.com/users/takluyver/repos",
      "events_url": "https://api.github.com/users/takluyver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/takluyver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-01-03T17:46:33Z",
    "updated_at": "2013-01-03T17:46:33Z",
    "author_association": "MEMBER",
    "body": "If the string sent to `page()` is a Python 2 `str`, calling `.encode()` on it might throw a UnicodeDecodeError. In Python 3, the handle returned by `os.popen()` expects unicode `str` objects, so we shouldn't encode if we keep using that.\n\nAs a quick fix, I think `py3compat.cast_bytes_py2` would work. But if you've got time, could you refactor the relevant bit of code to use `subprocess.Popen`, which should handle bytes on both Python versions?\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/11853075",
    "html_url": "https://github.com/ipython/ipython/pull/2738#issuecomment-11853075",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/2738",
    "id": 11853075,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExODUzMDc1",
    "user": {
      "login": "bfroehle",
      "id": 204333,
      "node_id": "MDQ6VXNlcjIwNDMzMw==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/204333?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bfroehle",
      "html_url": "https://github.com/bfroehle",
      "followers_url": "https://api.github.com/users/bfroehle/followers",
      "following_url": "https://api.github.com/users/bfroehle/following{/other_user}",
      "gists_url": "https://api.github.com/users/bfroehle/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bfroehle/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bfroehle/subscriptions",
      "organizations_url": "https://api.github.com/users/bfroehle/orgs",
      "repos_url": "https://api.github.com/users/bfroehle/repos",
      "events_url": "https://api.github.com/users/bfroehle/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bfroehle/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-01-03T17:47:03Z",
    "updated_at": "2013-01-03T17:47:03Z",
    "author_association": "CONTRIBUTOR",
    "body": "Unfortunately, this still leaves us with the same issue if the unicode string cannot be encoded using the `sys.stdout.encoding` codec.\n\nI think we should do something like\n\n``` python\npager.write(string.encode(..., errors='replace'))\n```\n\nIt's not clear to me that `sys.stdout.encoding` is the right codec to use... why not `pager.encoding`?\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/11853236",
    "html_url": "https://github.com/ipython/ipython/pull/2738#issuecomment-11853236",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/2738",
    "id": 11853236,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExODUzMjM2",
    "user": {
      "login": "bfroehle",
      "id": 204333,
      "node_id": "MDQ6VXNlcjIwNDMzMw==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/204333?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bfroehle",
      "html_url": "https://github.com/bfroehle",
      "followers_url": "https://api.github.com/users/bfroehle/followers",
      "following_url": "https://api.github.com/users/bfroehle/following{/other_user}",
      "gists_url": "https://api.github.com/users/bfroehle/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bfroehle/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bfroehle/subscriptions",
      "organizations_url": "https://api.github.com/users/bfroehle/orgs",
      "repos_url": "https://api.github.com/users/bfroehle/repos",
      "events_url": "https://api.github.com/users/bfroehle/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bfroehle/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-01-03T17:51:19Z",
    "updated_at": "2013-01-03T17:51:19Z",
    "author_association": "CONTRIBUTOR",
    "body": "Also this would be \"fixed\" (although still broken) if it was a try/finally block:\n\n``` py\npager = ...\ntry:\n    pager.write(...)\nfinally:\n    pager.close()\n```\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/11855469",
    "html_url": "https://github.com/ipython/ipython/pull/2738#issuecomment-11855469",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/2738",
    "id": 11855469,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExODU1NDY5",
    "user": {
      "login": "mdboom",
      "id": 38294,
      "node_id": "MDQ6VXNlcjM4Mjk0",
      "avatar_url": "https://avatars3.githubusercontent.com/u/38294?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mdboom",
      "html_url": "https://github.com/mdboom",
      "followers_url": "https://api.github.com/users/mdboom/followers",
      "following_url": "https://api.github.com/users/mdboom/following{/other_user}",
      "gists_url": "https://api.github.com/users/mdboom/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mdboom/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mdboom/subscriptions",
      "organizations_url": "https://api.github.com/users/mdboom/orgs",
      "repos_url": "https://api.github.com/users/mdboom/repos",
      "events_url": "https://api.github.com/users/mdboom/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mdboom/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-01-03T18:46:53Z",
    "updated_at": "2013-01-03T18:46:53Z",
    "author_association": "CONTRIBUTOR",
    "body": "Ok.  I've updated this to use `py3compat.cast_bytes_py2`, which does \"replace\" under the hood, so that should also address @bfroehle's concern.\n\nOn Python 2, `pager.encoding` is `None` which would imply using `sys.getdefaultencoding`, which (at least on my Linux box here) is `'ascii'`, so we haven't advanced the ball.  I've updated this to use `pager.encoding or sys.stdout.encoding` which is probably the smarter thing to do.\n\nI did add the `try` ... `finally` block, so that at least the pager gets closed if something fails.\n\nI attempted the refactor to `subprocess.Popen`, but I was seeing a change in behavior.  At present, if one presses `Ctrl+C` out of the pager to close it, one is returned to the IPython console intact (albeit with a KeyboardInterrupt exception traceback displayed).  When switching to `subprocess.Popen`, this would close the pager, leaving the console in a state where the arrow keys and keyboard echoing stopped working.  I tinkered for a while, but couldn't get things to work in the old way.  Maybe we can file a new issue to use `subprocess.Popen` in the future, but for now, this change works on Python 2 and Python 3 fine without changing any existing behavior, as far as I can tell.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/11857214",
    "html_url": "https://github.com/ipython/ipython/pull/2738#issuecomment-11857214",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/2738",
    "id": 11857214,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExODU3MjE0",
    "user": {
      "login": "takluyver",
      "id": 327925,
      "node_id": "MDQ6VXNlcjMyNzkyNQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/327925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/takluyver",
      "html_url": "https://github.com/takluyver",
      "followers_url": "https://api.github.com/users/takluyver/followers",
      "following_url": "https://api.github.com/users/takluyver/following{/other_user}",
      "gists_url": "https://api.github.com/users/takluyver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/takluyver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/takluyver/subscriptions",
      "organizations_url": "https://api.github.com/users/takluyver/orgs",
      "repos_url": "https://api.github.com/users/takluyver/repos",
      "events_url": "https://api.github.com/users/takluyver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/takluyver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-01-03T19:32:13Z",
    "updated_at": "2013-01-03T19:32:13Z",
    "author_association": "MEMBER",
    "body": "Thanks, that looks OK to me. @bfroehle , I'll let you have another look, and you can merge away if you're happy with it.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/11857376",
    "html_url": "https://github.com/ipython/ipython/pull/2738#issuecomment-11857376",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/2738",
    "id": 11857376,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExODU3Mzc2",
    "user": {
      "login": "bfroehle",
      "id": 204333,
      "node_id": "MDQ6VXNlcjIwNDMzMw==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/204333?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bfroehle",
      "html_url": "https://github.com/bfroehle",
      "followers_url": "https://api.github.com/users/bfroehle/followers",
      "following_url": "https://api.github.com/users/bfroehle/following{/other_user}",
      "gists_url": "https://api.github.com/users/bfroehle/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bfroehle/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bfroehle/subscriptions",
      "organizations_url": "https://api.github.com/users/bfroehle/orgs",
      "repos_url": "https://api.github.com/users/bfroehle/repos",
      "events_url": "https://api.github.com/users/bfroehle/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bfroehle/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-01-03T19:36:10Z",
    "updated_at": "2013-01-03T19:36:10Z",
    "author_association": "CONTRIBUTOR",
    "body": "Looks okay to me, with the one exception of the new `raise` in the `OSError` block.  Why was that added?\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/11867597",
    "html_url": "https://github.com/ipython/ipython/pull/2738#issuecomment-11867597",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/2738",
    "id": 11867597,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExODY3NTk3",
    "user": {
      "login": "mdboom",
      "id": 38294,
      "node_id": "MDQ6VXNlcjM4Mjk0",
      "avatar_url": "https://avatars3.githubusercontent.com/u/38294?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mdboom",
      "html_url": "https://github.com/mdboom",
      "followers_url": "https://api.github.com/users/mdboom/followers",
      "following_url": "https://api.github.com/users/mdboom/following{/other_user}",
      "gists_url": "https://api.github.com/users/mdboom/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mdboom/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mdboom/subscriptions",
      "organizations_url": "https://api.github.com/users/mdboom/orgs",
      "repos_url": "https://api.github.com/users/mdboom/repos",
      "events_url": "https://api.github.com/users/mdboom/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mdboom/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-01-04T00:29:59Z",
    "updated_at": "2013-01-04T00:29:59Z",
    "author_association": "CONTRIBUTOR",
    "body": "Sorry -- the new `raise` went in by accident.  I had it in there to test what happens when the pager disappears out from under (through Ctrl+C or killing its process).  I've push an amended commit.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/11916153",
    "html_url": "https://github.com/ipython/ipython/pull/2738#issuecomment-11916153",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/2738",
    "id": 11916153,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExOTE2MTUz",
    "user": {
      "login": "bfroehle",
      "id": 204333,
      "node_id": "MDQ6VXNlcjIwNDMzMw==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/204333?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bfroehle",
      "html_url": "https://github.com/bfroehle",
      "followers_url": "https://api.github.com/users/bfroehle/followers",
      "following_url": "https://api.github.com/users/bfroehle/following{/other_user}",
      "gists_url": "https://api.github.com/users/bfroehle/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bfroehle/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bfroehle/subscriptions",
      "organizations_url": "https://api.github.com/users/bfroehle/orgs",
      "repos_url": "https://api.github.com/users/bfroehle/repos",
      "events_url": "https://api.github.com/users/bfroehle/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bfroehle/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-01-05T16:45:17Z",
    "updated_at": "2013-01-05T16:45:17Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thanks again @mdboom.\n"
  }
]
