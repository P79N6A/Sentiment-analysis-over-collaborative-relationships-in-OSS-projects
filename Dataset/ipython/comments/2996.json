[
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/14422932",
    "html_url": "https://github.com/ipython/ipython/issues/2996#issuecomment-14422932",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/2996",
    "id": 14422932,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NDIyOTMy",
    "user": {
      "login": "minrk",
      "id": 151929,
      "node_id": "MDQ6VXNlcjE1MTkyOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/151929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minrk",
      "html_url": "https://github.com/minrk",
      "followers_url": "https://api.github.com/users/minrk/followers",
      "following_url": "https://api.github.com/users/minrk/following{/other_user}",
      "gists_url": "https://api.github.com/users/minrk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minrk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minrk/subscriptions",
      "organizations_url": "https://api.github.com/users/minrk/orgs",
      "repos_url": "https://api.github.com/users/minrk/repos",
      "events_url": "https://api.github.com/users/minrk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minrk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-03-05T04:28:26Z",
    "updated_at": "2013-03-05T04:28:26Z",
    "author_association": "MEMBER",
    "body": "Are you starting each engine manually, or are you running them together automatically?\nSometimes there can be simultaneous connection issues on slow machines, or when using ssh, so introducing a stagger in between starting engines can alleviate this sort of thing (ipcluster does this).\nDo you have any config other than the command-line values listed here?\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/14424569",
    "html_url": "https://github.com/ipython/ipython/issues/2996#issuecomment-14424569",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/2996",
    "id": 14424569,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NDI0NTY5",
    "user": {
      "login": "cioc",
      "id": 520839,
      "node_id": "MDQ6VXNlcjUyMDgzOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/520839?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cioc",
      "html_url": "https://github.com/cioc",
      "followers_url": "https://api.github.com/users/cioc/followers",
      "following_url": "https://api.github.com/users/cioc/following{/other_user}",
      "gists_url": "https://api.github.com/users/cioc/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cioc/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cioc/subscriptions",
      "organizations_url": "https://api.github.com/users/cioc/orgs",
      "repos_url": "https://api.github.com/users/cioc/repos",
      "events_url": "https://api.github.com/users/cioc/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cioc/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-03-05T05:42:48Z",
    "updated_at": "2013-03-05T05:42:48Z",
    "author_association": "NONE",
    "body": "No other configuration.  \n\nI stagger each engine start with 10 seconds of wait time.  Is this enough?\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/14425019",
    "html_url": "https://github.com/ipython/ipython/issues/2996#issuecomment-14425019",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/2996",
    "id": 14425019,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NDI1MDE5",
    "user": {
      "login": "minrk",
      "id": 151929,
      "node_id": "MDQ6VXNlcjE1MTkyOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/151929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minrk",
      "html_url": "https://github.com/minrk",
      "followers_url": "https://api.github.com/users/minrk/followers",
      "following_url": "https://api.github.com/users/minrk/following{/other_user}",
      "gists_url": "https://api.github.com/users/minrk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minrk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minrk/subscriptions",
      "organizations_url": "https://api.github.com/users/minrk/orgs",
      "repos_url": "https://api.github.com/users/minrk/repos",
      "events_url": "https://api.github.com/users/minrk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minrk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-03-05T06:02:38Z",
    "updated_at": "2013-03-05T06:02:38Z",
    "author_association": "MEMBER",
    "body": "That should be plenty - I find one second is typically more than enough,\nbut I haven't actually seen this issue myself, even though I have run many clusters of dozens of engines on EC2.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/14425082",
    "html_url": "https://github.com/ipython/ipython/issues/2996#issuecomment-14425082",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/2996",
    "id": 14425082,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NDI1MDgy",
    "user": {
      "login": "cioc",
      "id": 520839,
      "node_id": "MDQ6VXNlcjUyMDgzOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/520839?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cioc",
      "html_url": "https://github.com/cioc",
      "followers_url": "https://api.github.com/users/cioc/followers",
      "following_url": "https://api.github.com/users/cioc/following{/other_user}",
      "gists_url": "https://api.github.com/users/cioc/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cioc/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cioc/subscriptions",
      "organizations_url": "https://api.github.com/users/cioc/orgs",
      "repos_url": "https://api.github.com/users/cioc/repos",
      "events_url": "https://api.github.com/users/cioc/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cioc/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-03-05T06:05:27Z",
    "updated_at": "2013-03-05T06:05:27Z",
    "author_association": "NONE",
    "body": "Could Ubuntu 12.04 be the problem?\n\nI am going to reproduce my environment, step by and step in search of the problem.  I'll have these results tomorrow.\n\nThanks for your help.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/14449094",
    "html_url": "https://github.com/ipython/ipython/issues/2996#issuecomment-14449094",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/2996",
    "id": 14449094,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NDQ5MDk0",
    "user": {
      "login": "cioc",
      "id": 520839,
      "node_id": "MDQ6VXNlcjUyMDgzOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/520839?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cioc",
      "html_url": "https://github.com/cioc",
      "followers_url": "https://api.github.com/users/cioc/followers",
      "following_url": "https://api.github.com/users/cioc/following{/other_user}",
      "gists_url": "https://api.github.com/users/cioc/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cioc/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cioc/subscriptions",
      "organizations_url": "https://api.github.com/users/cioc/orgs",
      "repos_url": "https://api.github.com/users/cioc/repos",
      "events_url": "https://api.github.com/users/cioc/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cioc/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-03-05T16:25:15Z",
    "updated_at": "2013-03-05T16:25:15Z",
    "author_association": "NONE",
    "body": "I checked my current setup:\n\nPython 2.7.3\nIPython 0.13.1\nÃ˜MQ 2.2.0\nUbuntu 12.04.1 LTS\n\nDo any of these stand out as a problem?\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/14452501",
    "html_url": "https://github.com/ipython/ipython/issues/2996#issuecomment-14452501",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/2996",
    "id": 14452501,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NDUyNTAx",
    "user": {
      "login": "minrk",
      "id": 151929,
      "node_id": "MDQ6VXNlcjE1MTkyOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/151929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minrk",
      "html_url": "https://github.com/minrk",
      "followers_url": "https://api.github.com/users/minrk/followers",
      "following_url": "https://api.github.com/users/minrk/following{/other_user}",
      "gists_url": "https://api.github.com/users/minrk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minrk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minrk/subscriptions",
      "organizations_url": "https://api.github.com/users/minrk/orgs",
      "repos_url": "https://api.github.com/users/minrk/repos",
      "events_url": "https://api.github.com/users/minrk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minrk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-03-05T17:20:07Z",
    "updated_at": "2013-03-05T17:20:07Z",
    "author_association": "MEMBER",
    "body": "No, that should be the most standard setup right now.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/14454747",
    "html_url": "https://github.com/ipython/ipython/issues/2996#issuecomment-14454747",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/2996",
    "id": 14454747,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NDU0NzQ3",
    "user": {
      "login": "cioc",
      "id": 520839,
      "node_id": "MDQ6VXNlcjUyMDgzOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/520839?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cioc",
      "html_url": "https://github.com/cioc",
      "followers_url": "https://api.github.com/users/cioc/followers",
      "following_url": "https://api.github.com/users/cioc/following{/other_user}",
      "gists_url": "https://api.github.com/users/cioc/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cioc/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cioc/subscriptions",
      "organizations_url": "https://api.github.com/users/cioc/orgs",
      "repos_url": "https://api.github.com/users/cioc/repos",
      "events_url": "https://api.github.com/users/cioc/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cioc/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-03-05T17:58:41Z",
    "updated_at": "2013-03-05T17:58:41Z",
    "author_association": "NONE",
    "body": "Only difference I can think of it that ipengine is launched using dtach.  \n\nIs there a way to daemonize the controller and the engines without using something like screen or dtach?\n\n-Charles \n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/14455197",
    "html_url": "https://github.com/ipython/ipython/issues/2996#issuecomment-14455197",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/2996",
    "id": 14455197,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NDU1MTk3",
    "user": {
      "login": "minrk",
      "id": 151929,
      "node_id": "MDQ6VXNlcjE1MTkyOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/151929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minrk",
      "html_url": "https://github.com/minrk",
      "followers_url": "https://api.github.com/users/minrk/followers",
      "following_url": "https://api.github.com/users/minrk/following{/other_user}",
      "gists_url": "https://api.github.com/users/minrk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minrk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minrk/subscriptions",
      "organizations_url": "https://api.github.com/users/minrk/orgs",
      "repos_url": "https://api.github.com/users/minrk/repos",
      "events_url": "https://api.github.com/users/minrk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minrk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-03-05T18:06:22Z",
    "updated_at": "2013-03-05T18:06:22Z",
    "author_association": "MEMBER",
    "body": "I've never used dtach, but screen has always worked well for me. In fact, the only use of dtach I have ever encountered is in bug reports, where things aren't working properly.\n\nDo you still get stalled registrations if you wait for each registration to finish (this will take up to two heartbeat periods) before starting the new one?\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/14456969",
    "html_url": "https://github.com/ipython/ipython/issues/2996#issuecomment-14456969",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/2996",
    "id": 14456969,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NDU2OTY5",
    "user": {
      "login": "cioc",
      "id": 520839,
      "node_id": "MDQ6VXNlcjUyMDgzOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/520839?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cioc",
      "html_url": "https://github.com/cioc",
      "followers_url": "https://api.github.com/users/cioc/followers",
      "following_url": "https://api.github.com/users/cioc/following{/other_user}",
      "gists_url": "https://api.github.com/users/cioc/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cioc/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cioc/subscriptions",
      "organizations_url": "https://api.github.com/users/cioc/orgs",
      "repos_url": "https://api.github.com/users/cioc/repos",
      "events_url": "https://api.github.com/users/cioc/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cioc/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-03-05T18:37:40Z",
    "updated_at": "2013-03-05T18:37:40Z",
    "author_association": "NONE",
    "body": "When i run ipcontroller or ipengine with screen -d -m, the controller never creates ipcontroller-client.json or ipcontroller-engine.json files.  Nohup also has this problem.  That is why i have been using dtach.  \n\nWith a heartbeat of 3000 milliseconds, and a wait of 10 seconds between engine starts, most of my engines finish registration before the next starts.  \n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/14459468",
    "html_url": "https://github.com/ipython/ipython/issues/2996#issuecomment-14459468",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/2996",
    "id": 14459468,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NDU5NDY4",
    "user": {
      "login": "minrk",
      "id": 151929,
      "node_id": "MDQ6VXNlcjE1MTkyOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/151929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minrk",
      "html_url": "https://github.com/minrk",
      "followers_url": "https://api.github.com/users/minrk/followers",
      "following_url": "https://api.github.com/users/minrk/following{/other_user}",
      "gists_url": "https://api.github.com/users/minrk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minrk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minrk/subscriptions",
      "organizations_url": "https://api.github.com/users/minrk/orgs",
      "repos_url": "https://api.github.com/users/minrk/repos",
      "events_url": "https://api.github.com/users/minrk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minrk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-03-05T19:21:08Z",
    "updated_at": "2013-03-05T19:21:08Z",
    "author_association": "MEMBER",
    "body": "And even when you have only one engine registering at a time, you are getting failed registrations?\n\nCan you test with either the 0.13.x branch or current master, to see if your issue is still present?\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/14464830",
    "html_url": "https://github.com/ipython/ipython/issues/2996#issuecomment-14464830",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/2996",
    "id": 14464830,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NDY0ODMw",
    "user": {
      "login": "cioc",
      "id": 520839,
      "node_id": "MDQ6VXNlcjUyMDgzOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/520839?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cioc",
      "html_url": "https://github.com/cioc",
      "followers_url": "https://api.github.com/users/cioc/followers",
      "following_url": "https://api.github.com/users/cioc/following{/other_user}",
      "gists_url": "https://api.github.com/users/cioc/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cioc/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cioc/subscriptions",
      "organizations_url": "https://api.github.com/users/cioc/orgs",
      "repos_url": "https://api.github.com/users/cioc/repos",
      "events_url": "https://api.github.com/users/cioc/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cioc/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-03-05T20:59:03Z",
    "updated_at": "2013-03-05T21:02:17Z",
    "author_association": "NONE",
    "body": "I have now moved to screen and fixed my fabric issues and the problem persist.  Here is a snapshot of the controller's log on startup:\n\n2013-03-05 20:52:10.915 [IPControllerApp] registration::register_engine(2, 'd82f7559-f87f-4079-9417-d61e26f8dee9', ['d82f7559-f87f-4079-9417-d61e26f8dee9'], 'd82f7559-f87f-4079-9417-d61e26f8dee9')\n2013-03-05 20:52:11.633 [IPControllerApp] heartbeat::sending 36.0009460449\n2013-03-05 20:52:14.633 [IPControllerApp] heartbeat::sending 39.0010778904\n2013-03-05 20:52:16.917 [IPControllerApp] registration::purging stalled registration: 2\n2013-03-05 20:52:17.633 [IPControllerApp] heartbeat::sending 42.0012178421\n2013-03-05 20:52:17.634 [IPControllerApp] heartbeat::handle_new_heart('d82f7559-f87f-4079-9417-d61e26f8dee9')\n2013-03-05 20:52:17.634 [IPControllerApp] heartbeat::ignoring new heart: 'd82f7559-f87f-4079-9417-d61e26f8dee9'\n\nThe registration of engine 2 is purged before heartbeat comes in.  I'll try playing with heartbeat and timeout speed.  \n\nThis is the engine's log: (seems like everything went ok over here)\n\n2013-03-05 20:51:57.273 [IPEngineApp] Registering with controller at tcp://10.147.196.79:46514\n2013-03-05 20:51:58.070 [IPEngineApp] Using existing profile dir: u'/home/charles_user/.ipython/profile_default'\n2013-03-05 20:51:58.076 [IPEngineApp] Completed registration with id 1\n2013-03-05 20:52:09.731 [IPEngineApp] Loading url_file \n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/14465149",
    "html_url": "https://github.com/ipython/ipython/issues/2996#issuecomment-14465149",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/2996",
    "id": 14465149,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NDY1MTQ5",
    "user": {
      "login": "cioc",
      "id": 520839,
      "node_id": "MDQ6VXNlcjUyMDgzOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/520839?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cioc",
      "html_url": "https://github.com/cioc",
      "followers_url": "https://api.github.com/users/cioc/followers",
      "following_url": "https://api.github.com/users/cioc/following{/other_user}",
      "gists_url": "https://api.github.com/users/cioc/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cioc/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cioc/subscriptions",
      "organizations_url": "https://api.github.com/users/cioc/orgs",
      "repos_url": "https://api.github.com/users/cioc/repos",
      "events_url": "https://api.github.com/users/cioc/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cioc/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-03-05T21:06:06Z",
    "updated_at": "2013-03-05T21:06:06Z",
    "author_association": "NONE",
    "body": "I think i have everything working.  I slowed down the heartbeat to 10000 ms.  Seems to fix problems with registration purges now.\n\nIs this is a symptom of latency problems in the network?  In general, why would we need such a slow heartbeat for successful connections.  \n"
  }
]
