[
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/234718172",
    "html_url": "https://github.com/ipython/ipython/issues/9797#issuecomment-234718172",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/9797",
    "id": 234718172,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNDcxODE3Mg==",
    "user": {
      "login": "amancevice",
      "id": 157711,
      "node_id": "MDQ6VXNlcjE1NzcxMQ==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/157711?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/amancevice",
      "html_url": "https://github.com/amancevice",
      "followers_url": "https://api.github.com/users/amancevice/followers",
      "following_url": "https://api.github.com/users/amancevice/following{/other_user}",
      "gists_url": "https://api.github.com/users/amancevice/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/amancevice/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/amancevice/subscriptions",
      "organizations_url": "https://api.github.com/users/amancevice/orgs",
      "repos_url": "https://api.github.com/users/amancevice/repos",
      "events_url": "https://api.github.com/users/amancevice/events{/privacy}",
      "received_events_url": "https://api.github.com/users/amancevice/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-07-23T13:27:32Z",
    "updated_at": "2016-07-23T13:27:32Z",
    "author_association": "NONE",
    "body": "I should add that I've also tried adding the `alpine-sdk` package which installs things like `g++` and `make` with no luck.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/234731149",
    "html_url": "https://github.com/ipython/ipython/issues/9797#issuecomment-234731149",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/9797",
    "id": 234731149,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNDczMTE0OQ==",
    "user": {
      "login": "takluyver",
      "id": 327925,
      "node_id": "MDQ6VXNlcjMyNzkyNQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/327925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/takluyver",
      "html_url": "https://github.com/takluyver",
      "followers_url": "https://api.github.com/users/takluyver/followers",
      "following_url": "https://api.github.com/users/takluyver/following{/other_user}",
      "gists_url": "https://api.github.com/users/takluyver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/takluyver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/takluyver/subscriptions",
      "organizations_url": "https://api.github.com/users/takluyver/orgs",
      "repos_url": "https://api.github.com/users/takluyver/repos",
      "events_url": "https://api.github.com/users/takluyver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/takluyver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-07-23T17:51:05Z",
    "updated_at": "2016-07-23T17:51:05Z",
    "author_association": "MEMBER",
    "body": "In general, IPython cannot be directly responsible for segfaults, because it's pure Python code. So we must be triggering a bug in e.g. Python or sqlite. Try inserting more debugging print statements to see how far it gets before crashing.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/235163936",
    "html_url": "https://github.com/ipython/ipython/issues/9797#issuecomment-235163936",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/9797",
    "id": 235163936,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNTE2MzkzNg==",
    "user": {
      "login": "willingc",
      "id": 2680980,
      "node_id": "MDQ6VXNlcjI2ODA5ODA=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/2680980?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/willingc",
      "html_url": "https://github.com/willingc",
      "followers_url": "https://api.github.com/users/willingc/followers",
      "following_url": "https://api.github.com/users/willingc/following{/other_user}",
      "gists_url": "https://api.github.com/users/willingc/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/willingc/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/willingc/subscriptions",
      "organizations_url": "https://api.github.com/users/willingc/orgs",
      "repos_url": "https://api.github.com/users/willingc/repos",
      "events_url": "https://api.github.com/users/willingc/events{/privacy}",
      "received_events_url": "https://api.github.com/users/willingc/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-07-26T05:05:53Z",
    "updated_at": "2016-07-26T05:05:53Z",
    "author_association": "MEMBER",
    "body": "Looking at the [Alpine issues](https://bugs.alpinelinux.org/projects/alpine/issues) there seems to be several recent segfault issues reported with Alpine. \n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/235222637",
    "html_url": "https://github.com/ipython/ipython/issues/9797#issuecomment-235222637",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/9797",
    "id": 235222637,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNTIyMjYzNw==",
    "user": {
      "login": "amancevice",
      "id": 157711,
      "node_id": "MDQ6VXNlcjE1NzcxMQ==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/157711?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/amancevice",
      "html_url": "https://github.com/amancevice",
      "followers_url": "https://api.github.com/users/amancevice/followers",
      "following_url": "https://api.github.com/users/amancevice/following{/other_user}",
      "gists_url": "https://api.github.com/users/amancevice/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/amancevice/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/amancevice/subscriptions",
      "organizations_url": "https://api.github.com/users/amancevice/orgs",
      "repos_url": "https://api.github.com/users/amancevice/repos",
      "events_url": "https://api.github.com/users/amancevice/events{/privacy}",
      "received_events_url": "https://api.github.com/users/amancevice/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-07-26T09:55:21Z",
    "updated_at": "2016-07-26T09:55:21Z",
    "author_association": "NONE",
    "body": "Interesting, I'll try an older version of alpine. Thanks, @willingc \n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/236524678",
    "html_url": "https://github.com/ipython/ipython/issues/9797#issuecomment-236524678",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/9797",
    "id": 236524678,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNjUyNDY3OA==",
    "user": {
      "login": "xeor",
      "id": 682676,
      "node_id": "MDQ6VXNlcjY4MjY3Ng==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/682676?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/xeor",
      "html_url": "https://github.com/xeor",
      "followers_url": "https://api.github.com/users/xeor/followers",
      "following_url": "https://api.github.com/users/xeor/following{/other_user}",
      "gists_url": "https://api.github.com/users/xeor/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/xeor/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/xeor/subscriptions",
      "organizations_url": "https://api.github.com/users/xeor/orgs",
      "repos_url": "https://api.github.com/users/xeor/repos",
      "events_url": "https://api.github.com/users/xeor/events{/privacy}",
      "received_events_url": "https://api.github.com/users/xeor/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-01T08:52:31Z",
    "updated_at": "2016-08-01T08:53:39Z",
    "author_association": "CONTRIBUTOR",
    "body": "This problem have been haunting me for a couple of days as well. Oddly enough, the latest `alpine:3.4` you get from `docker run -it python:2-alpine sh` works like a charm. Running `pip install ipython && ipython` doesnt give a seg-fault.\n\n> / # cat /etc/os-release\n> NAME=\"Alpine Linux\"\n> ID=alpine\n> VERSION_ID=3.4.0\n> PRETTY_NAME=\"Alpine Linux v3.4\"\n> HOME_URL=\"http://alpinelinux.org\"\n> BUG_REPORT_URL=\"http://bugs.alpinelinux.org\"\n\nThey compile python from source ([Dockerfile](https://github.com/docker-library/python/blob/master/2.7/alpine/Dockerfile)).\n\nI tried compiling python as they do, following more or less the `Dockerfile`, but still ended up with a segfaulting ipython.. I probably missed something, but compiling Python on alpine:3.4 didn't do it.\n\n**Some testing**\n\nBasically `apk --no-cache add py-pip && pip install ipython && ipython` with some variations..\n- `alpine:3.3` -  didn't work\n- `alpine:3.2` -  didn't work\n- `pip install 'ipython<=5'` starts ipython `4.2.1`\n\nWhile researching more, I found https://bugs.alpinelinux.org/issues/5981 which points to a fix @ https://github.com/jonathanslenders/python-prompt-toolkit/pull/364, which explains what is causing this error.\n\nBasically, a version of `fcntl.ioctl` `fcntl.ioctl(fileno, termios.TIOCGWINSZ, buf, True)` doesn't play nice, and `cntl.ioctl(fileno, termios.TIOCGWINSZ, buf)` should be used.\n\nSo, I think the most proper work around for now (while we wait for the new `python-prompt-toolkit` version to propagate is to `pip install https://github.com/jonathanslenders/python-prompt-toolkit/archive/master.zip` before you `pip install ipython`. I just tested it, and it works perfectly! :)\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/236555359",
    "html_url": "https://github.com/ipython/ipython/issues/9797#issuecomment-236555359",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/9797",
    "id": 236555359,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNjU1NTM1OQ==",
    "user": {
      "login": "amancevice",
      "id": 157711,
      "node_id": "MDQ6VXNlcjE1NzcxMQ==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/157711?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/amancevice",
      "html_url": "https://github.com/amancevice",
      "followers_url": "https://api.github.com/users/amancevice/followers",
      "following_url": "https://api.github.com/users/amancevice/following{/other_user}",
      "gists_url": "https://api.github.com/users/amancevice/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/amancevice/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/amancevice/subscriptions",
      "organizations_url": "https://api.github.com/users/amancevice/orgs",
      "repos_url": "https://api.github.com/users/amancevice/repos",
      "events_url": "https://api.github.com/users/amancevice/events{/privacy}",
      "received_events_url": "https://api.github.com/users/amancevice/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-01T11:24:34Z",
    "updated_at": "2016-08-01T11:24:34Z",
    "author_association": "NONE",
    "body": "Confirmed this works for me as well! Thanks for this, I was able to get deep enough into the stack that I thought the bug might be in prompt_toolkit but I wasn't able to isolate it.\n\nHere is a Dockerfile that got me where I wanted:\n\n``` Dockerfile\nFROM alpine\nRUN apk add --no-cache python-dev py-pip\nRUN pip install https://github.com/jonathanslenders/python-prompt-toolkit/archive/master.zip\nRUN pip install ipython\nCMD ipython\n```\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/236724347",
    "html_url": "https://github.com/ipython/ipython/issues/9797#issuecomment-236724347",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/9797",
    "id": 236724347,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNjcyNDM0Nw==",
    "user": {
      "login": "willingc",
      "id": 2680980,
      "node_id": "MDQ6VXNlcjI2ODA5ODA=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/2680980?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/willingc",
      "html_url": "https://github.com/willingc",
      "followers_url": "https://api.github.com/users/willingc/followers",
      "following_url": "https://api.github.com/users/willingc/following{/other_user}",
      "gists_url": "https://api.github.com/users/willingc/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/willingc/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/willingc/subscriptions",
      "organizations_url": "https://api.github.com/users/willingc/orgs",
      "repos_url": "https://api.github.com/users/willingc/repos",
      "events_url": "https://api.github.com/users/willingc/events{/privacy}",
      "received_events_url": "https://api.github.com/users/willingc/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-01T22:14:25Z",
    "updated_at": "2016-08-01T22:14:25Z",
    "author_association": "MEMBER",
    "body": "@xeor Thanks for your update! I'm glad it's working for @amancevice too.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/237524518",
    "html_url": "https://github.com/ipython/ipython/issues/9797#issuecomment-237524518",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/9797",
    "id": 237524518,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNzUyNDUxOA==",
    "user": {
      "login": "amancevice",
      "id": 157711,
      "node_id": "MDQ6VXNlcjE1NzcxMQ==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/157711?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/amancevice",
      "html_url": "https://github.com/amancevice",
      "followers_url": "https://api.github.com/users/amancevice/followers",
      "following_url": "https://api.github.com/users/amancevice/following{/other_user}",
      "gists_url": "https://api.github.com/users/amancevice/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/amancevice/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/amancevice/subscriptions",
      "organizations_url": "https://api.github.com/users/amancevice/orgs",
      "repos_url": "https://api.github.com/users/amancevice/repos",
      "events_url": "https://api.github.com/users/amancevice/events{/privacy}",
      "received_events_url": "https://api.github.com/users/amancevice/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-04T11:14:33Z",
    "updated_at": "2016-08-04T11:14:33Z",
    "author_association": "NONE",
    "body": "For anyone else having this problem, a new version of [prompt-toolkit](https://github.com/jonathanslenders/python-prompt-toolkit) has been released and fixes this issue.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/237720157",
    "html_url": "https://github.com/ipython/ipython/issues/9797#issuecomment-237720157",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/9797",
    "id": 237720157,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNzcyMDE1Nw==",
    "user": {
      "login": "willingc",
      "id": 2680980,
      "node_id": "MDQ6VXNlcjI2ODA5ODA=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/2680980?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/willingc",
      "html_url": "https://github.com/willingc",
      "followers_url": "https://api.github.com/users/willingc/followers",
      "following_url": "https://api.github.com/users/willingc/following{/other_user}",
      "gists_url": "https://api.github.com/users/willingc/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/willingc/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/willingc/subscriptions",
      "organizations_url": "https://api.github.com/users/willingc/orgs",
      "repos_url": "https://api.github.com/users/willingc/repos",
      "events_url": "https://api.github.com/users/willingc/events{/privacy}",
      "received_events_url": "https://api.github.com/users/willingc/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-04T23:54:14Z",
    "updated_at": "2016-08-04T23:54:14Z",
    "author_association": "MEMBER",
    "body": "@amancevice Just to clarify for everyone: If one upgrades to the newest version of prompt-toolkit, then no other changes need to made. Correct?\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/237823979",
    "html_url": "https://github.com/ipython/ipython/issues/9797#issuecomment-237823979",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/9797",
    "id": 237823979,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNzgyMzk3OQ==",
    "user": {
      "login": "amancevice",
      "id": 157711,
      "node_id": "MDQ6VXNlcjE1NzcxMQ==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/157711?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/amancevice",
      "html_url": "https://github.com/amancevice",
      "followers_url": "https://api.github.com/users/amancevice/followers",
      "following_url": "https://api.github.com/users/amancevice/following{/other_user}",
      "gists_url": "https://api.github.com/users/amancevice/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/amancevice/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/amancevice/subscriptions",
      "organizations_url": "https://api.github.com/users/amancevice/orgs",
      "repos_url": "https://api.github.com/users/amancevice/repos",
      "events_url": "https://api.github.com/users/amancevice/events{/privacy}",
      "received_events_url": "https://api.github.com/users/amancevice/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-05T11:06:08Z",
    "updated_at": "2016-08-05T11:06:08Z",
    "author_association": "NONE",
    "body": "@willingc correct\n"
  }
]
