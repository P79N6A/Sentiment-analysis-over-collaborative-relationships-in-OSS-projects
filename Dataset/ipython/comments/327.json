[
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/942170",
    "html_url": "https://github.com/ipython/ipython/issues/327#issuecomment-942170",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/327",
    "id": 942170,
    "node_id": "MDEyOklzc3VlQ29tbWVudDk0MjE3MA==",
    "user": {
      "login": "takluyver",
      "id": 327925,
      "node_id": "MDQ6VXNlcjMyNzkyNQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/327925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/takluyver",
      "html_url": "https://github.com/takluyver",
      "followers_url": "https://api.github.com/users/takluyver/followers",
      "following_url": "https://api.github.com/users/takluyver/following{/other_user}",
      "gists_url": "https://api.github.com/users/takluyver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/takluyver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/takluyver/subscriptions",
      "organizations_url": "https://api.github.com/users/takluyver/orgs",
      "repos_url": "https://api.github.com/users/takluyver/repos",
      "events_url": "https://api.github.com/users/takluyver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/takluyver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2011-03-31T17:34:41Z",
    "updated_at": "2011-03-31T17:34:41Z",
    "author_association": "MEMBER",
    "body": "Out of interest, is this using a released version of PyPy, or a development version? PyPy 1.4 says it supports Python 2.5, and I believe we're using some 2.6 features. Is PyPy 1.4 kind of 2.5+, or was this tested on the development version?\n\nOtherwise, this looks broadly sensible. Is that the best way to get the attribute? I would use `object.__getattribute__(self, \"is_section_key\")`. Thanks!\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/942431",
    "html_url": "https://github.com/ipython/ipython/issues/327#issuecomment-942431",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/327",
    "id": 942431,
    "node_id": "MDEyOklzc3VlQ29tbWVudDk0MjQzMQ==",
    "user": {
      "login": "antocuni",
      "id": 344507,
      "node_id": "MDQ6VXNlcjM0NDUwNw==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/344507?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/antocuni",
      "html_url": "https://github.com/antocuni",
      "followers_url": "https://api.github.com/users/antocuni/followers",
      "following_url": "https://api.github.com/users/antocuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/antocuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/antocuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/antocuni/subscriptions",
      "organizations_url": "https://api.github.com/users/antocuni/orgs",
      "repos_url": "https://api.github.com/users/antocuni/repos",
      "events_url": "https://api.github.com/users/antocuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/antocuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2011-03-31T18:32:05Z",
    "updated_at": "2011-03-31T18:32:05Z",
    "author_association": "NONE",
    "body": "Yes, pypy 1.4 implements python 2.5.\nI tested the patch with the latest version from trunk, which implements python 2.7: we should release pypy 1.5 with full 2.7 compatibility very soon.\n\nUsing object.**getattribute** does not work, because it has the very same behavior of using self._is_section_key directly. The \"problem\" is that in cpython, the builtin __getattribute_ does not respect the overridden methods of dict, and thus calls the original **getitem**, which works fine.  However, pypy's **getattribute** does respect the overridden **getitem**, hence the problem.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/942519",
    "html_url": "https://github.com/ipython/ipython/issues/327#issuecomment-942519",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/327",
    "id": 942519,
    "node_id": "MDEyOklzc3VlQ29tbWVudDk0MjUxOQ==",
    "user": {
      "login": "takluyver",
      "id": 327925,
      "node_id": "MDQ6VXNlcjMyNzkyNQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/327925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/takluyver",
      "html_url": "https://github.com/takluyver",
      "followers_url": "https://api.github.com/users/takluyver/followers",
      "following_url": "https://api.github.com/users/takluyver/following{/other_user}",
      "gists_url": "https://api.github.com/users/takluyver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/takluyver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/takluyver/subscriptions",
      "organizations_url": "https://api.github.com/users/takluyver/orgs",
      "repos_url": "https://api.github.com/users/takluyver/repos",
      "events_url": "https://api.github.com/users/takluyver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/takluyver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2011-03-31T18:53:59Z",
    "updated_at": "2011-03-31T18:53:59Z",
    "author_association": "MEMBER",
    "body": "Looking at the module, I'm not actually sure that I see the problem: we're calling back into `__getitem__` from `__getattr__`, but the spec says that `__getattr__` should only be called if the attribute isn't found via normal means (and it can be). So unless I'm missing something, `self._is_section_key` should work on any implementation.\n\nI look forward to giving PyPy 1.5 a spin!\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/943346",
    "html_url": "https://github.com/ipython/ipython/issues/327#issuecomment-943346",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/327",
    "id": 943346,
    "node_id": "MDEyOklzc3VlQ29tbWVudDk0MzM0Ng==",
    "user": {
      "login": "antocuni",
      "id": 344507,
      "node_id": "MDQ6VXNlcjM0NDUwNw==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/344507?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/antocuni",
      "html_url": "https://github.com/antocuni",
      "followers_url": "https://api.github.com/users/antocuni/followers",
      "following_url": "https://api.github.com/users/antocuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/antocuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/antocuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/antocuni/subscriptions",
      "organizations_url": "https://api.github.com/users/antocuni/orgs",
      "repos_url": "https://api.github.com/users/antocuni/repos",
      "events_url": "https://api.github.com/users/antocuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/antocuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2011-03-31T22:23:08Z",
    "updated_at": "2011-03-31T22:23:08Z",
    "author_association": "NONE",
    "body": "So, this is what happens when you do self._is_section_key inside the __getitem__:\n- self.**class**.**getattribute**(self, '_is_section_key') (i.e.,\n  object.__getattribute__, the normal one)\n- **getattribute** does self.**dict**['_is_section_key']; remember that\n  self.__dict__ is of type Config\n  \n  a) CPython ignores Config.**getitem** and directly calls dict.**getitem**,\n  which raises KeyError and then the lookup continues on the class\n  \n  b) PyPy correctly calls Config.**getitem**, which tries to do\n  \"self._is_section_key\", which calls Config.__getitem__, etc.\n\nI hope it's clearer now.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/943370",
    "html_url": "https://github.com/ipython/ipython/issues/327#issuecomment-943370",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/327",
    "id": 943370,
    "node_id": "MDEyOklzc3VlQ29tbWVudDk0MzM3MA==",
    "user": {
      "login": "takluyver",
      "id": 327925,
      "node_id": "MDQ6VXNlcjMyNzkyNQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/327925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/takluyver",
      "html_url": "https://github.com/takluyver",
      "followers_url": "https://api.github.com/users/takluyver/followers",
      "following_url": "https://api.github.com/users/takluyver/following{/other_user}",
      "gists_url": "https://api.github.com/users/takluyver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/takluyver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/takluyver/subscriptions",
      "organizations_url": "https://api.github.com/users/takluyver/orgs",
      "repos_url": "https://api.github.com/users/takluyver/repos",
      "events_url": "https://api.github.com/users/takluyver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/takluyver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2011-03-31T22:29:07Z",
    "updated_at": "2011-03-31T22:29:07Z",
    "author_association": "MEMBER",
    "body": "Ah, that makes sense. I'd overlooked that we were replacing `__dict__` as well. So is doing `self.__class__` special cased so that it doesn't trigger a lookup in `__dict__`?\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/944786",
    "html_url": "https://github.com/ipython/ipython/issues/327#issuecomment-944786",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/327",
    "id": 944786,
    "node_id": "MDEyOklzc3VlQ29tbWVudDk0NDc4Ng==",
    "user": {
      "login": "antocuni",
      "id": 344507,
      "node_id": "MDQ6VXNlcjM0NDUwNw==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/344507?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/antocuni",
      "html_url": "https://github.com/antocuni",
      "followers_url": "https://api.github.com/users/antocuni/followers",
      "following_url": "https://api.github.com/users/antocuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/antocuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/antocuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/antocuni/subscriptions",
      "organizations_url": "https://api.github.com/users/antocuni/orgs",
      "repos_url": "https://api.github.com/users/antocuni/repos",
      "events_url": "https://api.github.com/users/antocuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/antocuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2011-04-01T09:03:11Z",
    "updated_at": "2011-04-01T09:03:11Z",
    "author_association": "NONE",
    "body": "Yes, exactly.\n\nIn both PyPy and CPython, **class** is implemented as a \"GetSetProperty\",\nwhich takes precedence over the normal **dict** lookup and just returns\ntype(self).\n\nSee for PyPy:\nhttp://bitbucket.org/pypy/pypy/src/a623e9cc3648/pypy/objspace/std/objecttype.py#cl-215\n\nand for CPython:\nhttp://hg.python.org/cpython/file/214d0608fb84/Objects/typeobject.c#l3059\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/944848",
    "html_url": "https://github.com/ipython/ipython/issues/327#issuecomment-944848",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/327",
    "id": 944848,
    "node_id": "MDEyOklzc3VlQ29tbWVudDk0NDg0OA==",
    "user": {
      "login": "takluyver",
      "id": 327925,
      "node_id": "MDQ6VXNlcjMyNzkyNQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/327925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/takluyver",
      "html_url": "https://github.com/takluyver",
      "followers_url": "https://api.github.com/users/takluyver/followers",
      "following_url": "https://api.github.com/users/takluyver/following{/other_user}",
      "gists_url": "https://api.github.com/users/takluyver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/takluyver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/takluyver/subscriptions",
      "organizations_url": "https://api.github.com/users/takluyver/orgs",
      "repos_url": "https://api.github.com/users/takluyver/repos",
      "events_url": "https://api.github.com/users/takluyver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/takluyver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2011-04-01T09:30:49Z",
    "updated_at": "2011-04-01T09:30:49Z",
    "author_association": "MEMBER",
    "body": "OK then, this looks sensible.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/949758",
    "html_url": "https://github.com/ipython/ipython/issues/327#issuecomment-949758",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/327",
    "id": 949758,
    "node_id": "MDEyOklzc3VlQ29tbWVudDk0OTc1OA==",
    "user": {
      "login": "takluyver",
      "id": 327925,
      "node_id": "MDQ6VXNlcjMyNzkyNQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/327925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/takluyver",
      "html_url": "https://github.com/takluyver",
      "followers_url": "https://api.github.com/users/takluyver/followers",
      "following_url": "https://api.github.com/users/takluyver/following{/other_user}",
      "gists_url": "https://api.github.com/users/takluyver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/takluyver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/takluyver/subscriptions",
      "organizations_url": "https://api.github.com/users/takluyver/orgs",
      "repos_url": "https://api.github.com/users/takluyver/repos",
      "events_url": "https://api.github.com/users/takluyver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/takluyver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2011-04-02T21:22:07Z",
    "updated_at": "2011-04-02T21:22:07Z",
    "author_association": "MEMBER",
    "body": "I've turned your patch into a pull request, #331. Thanks again.\n"
  }
]
