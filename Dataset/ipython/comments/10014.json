[
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/254567530",
    "html_url": "https://github.com/ipython/ipython/issues/10014#issuecomment-254567530",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/10014",
    "id": 254567530,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1NDU2NzUzMA==",
    "user": {
      "login": "takluyver",
      "id": 327925,
      "node_id": "MDQ6VXNlcjMyNzkyNQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/327925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/takluyver",
      "html_url": "https://github.com/takluyver",
      "followers_url": "https://api.github.com/users/takluyver/followers",
      "following_url": "https://api.github.com/users/takluyver/following{/other_user}",
      "gists_url": "https://api.github.com/users/takluyver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/takluyver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/takluyver/subscriptions",
      "organizations_url": "https://api.github.com/users/takluyver/orgs",
      "repos_url": "https://api.github.com/users/takluyver/repos",
      "events_url": "https://api.github.com/users/takluyver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/takluyver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-10-18T16:44:51Z",
    "updated_at": "2016-10-18T16:44:51Z",
    "author_association": "MEMBER",
    "body": "What version of prompt_toolkit do you have? If it's not the latest, update it. If it still happens, we'll ping Jonathan Slenders, who maintains prompt_toolkit. I'm starting to feel bad about pinging him a lot, which is why I'm deferring it until after you've checked that you've got the latest version.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/254612252",
    "html_url": "https://github.com/ipython/ipython/issues/10014#issuecomment-254612252",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/10014",
    "id": 254612252,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1NDYxMjI1Mg==",
    "user": {
      "login": "maksay",
      "id": 1268830,
      "node_id": "MDQ6VXNlcjEyNjg4MzA=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/1268830?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/maksay",
      "html_url": "https://github.com/maksay",
      "followers_url": "https://api.github.com/users/maksay/followers",
      "following_url": "https://api.github.com/users/maksay/following{/other_user}",
      "gists_url": "https://api.github.com/users/maksay/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/maksay/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/maksay/subscriptions",
      "organizations_url": "https://api.github.com/users/maksay/orgs",
      "repos_url": "https://api.github.com/users/maksay/repos",
      "events_url": "https://api.github.com/users/maksay/events{/privacy}",
      "received_events_url": "https://api.github.com/users/maksay/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-10-18T19:24:48Z",
    "updated_at": "2016-10-18T19:24:48Z",
    "author_association": "NONE",
    "body": "Updated to the latest version of prompt_toolkit available in anaconda (1.0.7), basically the same error, just some line numbers changed (+here with ipython instead of jupyter, as in the previous example):\n\n```\nI-search backward: Traceback (most recent call last):\n  File \"/Users/andriimaksai/anaconda/bin/ipython\", line 6, in <module>\n    sys.exit(IPython.start_ipython())\n  File \"/Users/andriimaksai/anaconda/lib/python2.7/site-packages/IPython/__init__.py\", line 119, in start_ipython\n    return launch_new_instance(argv=argv, **kwargs)\n  File \"/Users/andriimaksai/anaconda/lib/python2.7/site-packages/traitlets/config/application.py\", line 596, in launch_instance\n    app.start()\n  File \"/Users/andriimaksai/anaconda/lib/python2.7/site-packages/IPython/terminal/ipapp.py\", line 344, in start\n    return self.subapp.start()\n  File \"/Users/andriimaksai/anaconda/lib/python2.7/site-packages/jupyter_console/app.py\", line 151, in start\n    self.shell.mainloop()\n  File \"/Users/andriimaksai/anaconda/lib/python2.7/site-packages/jupyter_console/ptshell.py\", line 463, in mainloop\n    self.interact()\n  File \"/Users/andriimaksai/anaconda/lib/python2.7/site-packages/jupyter_console/ptshell.py\", line 448, in interact\n    code = self.prompt_for_code()\n  File \"/Users/andriimaksai/anaconda/lib/python2.7/site-packages/jupyter_console/ptshell.py\", line 408, in prompt_for_code\n    reset_current_buffer=True)\n  File \"/Users/andriimaksai/anaconda/lib/python2.7/site-packages/prompt_toolkit/interface.py\", line 399, in run\n    self._redraw()\n  File \"/Users/andriimaksai/anaconda/lib/python2.7/site-packages/prompt_toolkit/interface.py\", line 346, in _redraw\n    self.renderer.render(self, self.layout, is_done=self.is_done)\n  File \"/Users/andriimaksai/anaconda/lib/python2.7/site-packages/prompt_toolkit/renderer.py\", line 436, in render\n    extended_height=size.rows,\n  File \"/Users/andriimaksai/anaconda/lib/python2.7/site-packages/prompt_toolkit/layout/containers.py\", line 142, in write_to_screen\n    sizes = self._divide_heigths(cli, write_position)\n  File \"/Users/andriimaksai/anaconda/lib/python2.7/site-packages/prompt_toolkit/layout/containers.py\", line 177, in _divide_heigths\n    dimensions = [get_dimension_for_child(c, index) for index, c in enumerate(self.children)]\n  File \"/Users/andriimaksai/anaconda/lib/python2.7/site-packages/prompt_toolkit/layout/containers.py\", line 175, in get_dimension_for_child\n    return c.preferred_height(cli, write_position.width, write_position.extended_height)\n  File \"/Users/andriimaksai/anaconda/lib/python2.7/site-packages/prompt_toolkit/layout/containers.py\", line 395, in preferred_height\n    return self.content.preferred_height(cli, width, max_available_height)\n  File \"/Users/andriimaksai/anaconda/lib/python2.7/site-packages/prompt_toolkit/layout/containers.py\", line 128, in preferred_height\n    dimensions = [c.preferred_height(cli, width, max_available_height) for c in self.children]\n  File \"/Users/andriimaksai/anaconda/lib/python2.7/site-packages/prompt_toolkit/layout/containers.py\", line 1000, in preferred_height\n    cli, width - total_margin_width, max_available_height, wrap_lines),\n  File \"/Users/andriimaksai/anaconda/lib/python2.7/site-packages/prompt_toolkit/layout/controls.py\", line 502, in preferred_height\n    content = self.create_content(cli, width, None)\n  File \"/Users/andriimaksai/anaconda/lib/python2.7/site-packages/prompt_toolkit/layout/controls.py\", line 614, in create_content\n    ignore_case=ss.ignore_case))\n  File \"/Users/andriimaksai/anaconda/lib/python2.7/site-packages/prompt_toolkit/buffer.py\", line 1084, in document_for_search\n    search_result = self._search(search_state, include_current_position=True)\n  File \"/Users/andriimaksai/anaconda/lib/python2.7/site-packages/prompt_toolkit/buffer.py\", line 1071, in _search\n    result = search_once(working_index, document)\n  File \"/Users/andriimaksai/anaconda/lib/python2.7/site-packages/prompt_toolkit/buffer.py\", line 1061, in search_once\n    document = Document(self._working_lines[i], len(self._working_lines[i]))\n  File \"/Users/andriimaksai/anaconda/lib/python2.7/site-packages/prompt_toolkit/document.py\", line 83, in __init__\n    assert isinstance(text, six.text_type), 'Got %r' % text\nAssertionError: Got 'pwd'\n```\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/254618258",
    "html_url": "https://github.com/ipython/ipython/issues/10014#issuecomment-254618258",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/10014",
    "id": 254618258,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1NDYxODI1OA==",
    "user": {
      "login": "takluyver",
      "id": 327925,
      "node_id": "MDQ6VXNlcjMyNzkyNQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/327925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/takluyver",
      "html_url": "https://github.com/takluyver",
      "followers_url": "https://api.github.com/users/takluyver/followers",
      "following_url": "https://api.github.com/users/takluyver/following{/other_user}",
      "gists_url": "https://api.github.com/users/takluyver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/takluyver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/takluyver/subscriptions",
      "organizations_url": "https://api.github.com/users/takluyver/orgs",
      "repos_url": "https://api.github.com/users/takluyver/repos",
      "events_url": "https://api.github.com/users/takluyver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/takluyver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-10-18T19:46:58Z",
    "updated_at": "2016-10-18T19:46:58Z",
    "author_association": "MEMBER",
    "body": "OK, time to call on @jonathanslenders then. It looks like a `str` is getting in where Python 2 expects `unicode`.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/254947488",
    "html_url": "https://github.com/ipython/ipython/issues/10014#issuecomment-254947488",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/10014",
    "id": 254947488,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1NDk0NzQ4OA==",
    "user": {
      "login": "jonathanslenders",
      "id": 216638,
      "node_id": "MDQ6VXNlcjIxNjYzOA==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/216638?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonathanslenders",
      "html_url": "https://github.com/jonathanslenders",
      "followers_url": "https://api.github.com/users/jonathanslenders/followers",
      "following_url": "https://api.github.com/users/jonathanslenders/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonathanslenders/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonathanslenders/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonathanslenders/subscriptions",
      "organizations_url": "https://api.github.com/users/jonathanslenders/orgs",
      "repos_url": "https://api.github.com/users/jonathanslenders/repos",
      "events_url": "https://api.github.com/users/jonathanslenders/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonathanslenders/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-10-19T21:33:42Z",
    "updated_at": "2016-10-19T21:33:42Z",
    "author_association": "CONTRIBUTOR",
    "body": "This looks like the actual issue is not the reverse search, but the fact that `buffer._working_lines` contains some Python2 `str` objects. This list is populated from the history, so I guess that the `History` implementation does not decode all binary objects. I can look into this, later this week or early next week.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/254951365",
    "html_url": "https://github.com/ipython/ipython/issues/10014#issuecomment-254951365",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/10014",
    "id": 254951365,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1NDk1MTM2NQ==",
    "user": {
      "login": "takluyver",
      "id": 327925,
      "node_id": "MDQ6VXNlcjMyNzkyNQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/327925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/takluyver",
      "html_url": "https://github.com/takluyver",
      "followers_url": "https://api.github.com/users/takluyver/followers",
      "following_url": "https://api.github.com/users/takluyver/following{/other_user}",
      "gists_url": "https://api.github.com/users/takluyver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/takluyver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/takluyver/subscriptions",
      "organizations_url": "https://api.github.com/users/takluyver/orgs",
      "repos_url": "https://api.github.com/users/takluyver/repos",
      "events_url": "https://api.github.com/users/takluyver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/takluyver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-10-19T21:50:11Z",
    "updated_at": "2016-10-19T21:50:11Z",
    "author_association": "MEMBER",
    "body": "Thanks! We pre-popuate history from an SQLite database [here](https://github.com/ipython/ipython/blob/6b34d3563262aef7de63d4bde05ce9396f7e7620/IPython/terminal/interactiveshell.py#L225) - but I think the strings we get back from that should all be unicode.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/270408312",
    "html_url": "https://github.com/ipython/ipython/issues/10014#issuecomment-270408312",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/10014",
    "id": 270408312,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3MDQwODMxMg==",
    "user": {
      "login": "thejohnhoffer",
      "id": 9781588,
      "node_id": "MDQ6VXNlcjk3ODE1ODg=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/9781588?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thejohnhoffer",
      "html_url": "https://github.com/thejohnhoffer",
      "followers_url": "https://api.github.com/users/thejohnhoffer/followers",
      "following_url": "https://api.github.com/users/thejohnhoffer/following{/other_user}",
      "gists_url": "https://api.github.com/users/thejohnhoffer/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thejohnhoffer/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thejohnhoffer/subscriptions",
      "organizations_url": "https://api.github.com/users/thejohnhoffer/orgs",
      "repos_url": "https://api.github.com/users/thejohnhoffer/repos",
      "events_url": "https://api.github.com/users/thejohnhoffer/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thejohnhoffer/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-01-04T16:03:50Z",
    "updated_at": "2017-01-04T16:03:50Z",
    "author_association": "NONE",
    "body": "Is there any progress on this front? I'm considering getting involved because I'd like to be able to read ipynb in jupyter console. To do this, I'd like to load an ipynb into the SQLite history. But I'm not able to begin such a project until the history works properly. "
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/283134488",
    "html_url": "https://github.com/ipython/ipython/issues/10014#issuecomment-283134488",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/10014",
    "id": 283134488,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4MzEzNDQ4OA==",
    "user": {
      "login": "sboeser",
      "id": 2905745,
      "node_id": "MDQ6VXNlcjI5MDU3NDU=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/2905745?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sboeser",
      "html_url": "https://github.com/sboeser",
      "followers_url": "https://api.github.com/users/sboeser/followers",
      "following_url": "https://api.github.com/users/sboeser/following{/other_user}",
      "gists_url": "https://api.github.com/users/sboeser/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sboeser/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sboeser/subscriptions",
      "organizations_url": "https://api.github.com/users/sboeser/orgs",
      "repos_url": "https://api.github.com/users/sboeser/repos",
      "events_url": "https://api.github.com/users/sboeser/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sboeser/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-28T19:14:24Z",
    "updated_at": "2017-02-28T19:14:24Z",
    "author_association": "NONE",
    "body": "Very same error here - any progress on this?\r\n\r\nHere is my `python -c \"import IPython; print(IPython.sys_info())\"`\r\n```\r\n{'commit_hash': u'5a894b9',\r\n 'commit_source': 'installation',\r\n 'default_encoding': 'UTF-8',\r\n 'ipython_path': '/Users/sboeser/Software/VirtualEnvs/IPython/lib/python2.7/site-packages/IPython',\r\n 'ipython_version': '5.3.0',\r\n 'os_name': 'posix',\r\n 'platform': 'Darwin-15.6.0-x86_64-i386-64bit',\r\n 'sys_executable': '/Users/sboeser/Software/VirtualEnvs/IPython/bin/python',\r\n 'sys_platform': 'darwin',\r\n 'sys_version': '2.7.10 (default, Oct 23 2015, 19:19:21) \\n[GCC 4.2.1 Compatible Apple LLVM 7.0.0 (clang-700.0.59.5)]'}\r\n```"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/283365608",
    "html_url": "https://github.com/ipython/ipython/issues/10014#issuecomment-283365608",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/10014",
    "id": 283365608,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4MzM2NTYwOA==",
    "user": {
      "login": "lovelyzoo",
      "id": 4498789,
      "node_id": "MDQ6VXNlcjQ0OTg3ODk=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/4498789?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lovelyzoo",
      "html_url": "https://github.com/lovelyzoo",
      "followers_url": "https://api.github.com/users/lovelyzoo/followers",
      "following_url": "https://api.github.com/users/lovelyzoo/following{/other_user}",
      "gists_url": "https://api.github.com/users/lovelyzoo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lovelyzoo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lovelyzoo/subscriptions",
      "organizations_url": "https://api.github.com/users/lovelyzoo/orgs",
      "repos_url": "https://api.github.com/users/lovelyzoo/repos",
      "events_url": "https://api.github.com/users/lovelyzoo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lovelyzoo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-01T15:08:06Z",
    "updated_at": "2017-03-01T15:08:06Z",
    "author_association": "NONE",
    "body": "I am also seeing this problem on an Ubuntu 16.04 installation."
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/283651449",
    "html_url": "https://github.com/ipython/ipython/issues/10014#issuecomment-283651449",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/10014",
    "id": 283651449,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4MzY1MTQ0OQ==",
    "user": {
      "login": "takluyver",
      "id": 327925,
      "node_id": "MDQ6VXNlcjMyNzkyNQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/327925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/takluyver",
      "html_url": "https://github.com/takluyver",
      "followers_url": "https://api.github.com/users/takluyver/followers",
      "following_url": "https://api.github.com/users/takluyver/following{/other_user}",
      "gists_url": "https://api.github.com/users/takluyver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/takluyver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/takluyver/subscriptions",
      "organizations_url": "https://api.github.com/users/takluyver/orgs",
      "repos_url": "https://api.github.com/users/takluyver/repos",
      "events_url": "https://api.github.com/users/takluyver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/takluyver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-02T13:20:48Z",
    "updated_at": "2017-03-02T13:20:48Z",
    "author_association": "MEMBER",
    "body": "I can't reproduce the error - anyone who can, can you test #10371 ?"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/323063918",
    "html_url": "https://github.com/ipython/ipython/issues/10014#issuecomment-323063918",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/10014",
    "id": 323063918,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMzA2MzkxOA==",
    "user": {
      "login": "takluyver",
      "id": 327925,
      "node_id": "MDQ6VXNlcjMyNzkyNQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/327925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/takluyver",
      "html_url": "https://github.com/takluyver",
      "followers_url": "https://api.github.com/users/takluyver/followers",
      "following_url": "https://api.github.com/users/takluyver/following{/other_user}",
      "gists_url": "https://api.github.com/users/takluyver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/takluyver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/takluyver/subscriptions",
      "organizations_url": "https://api.github.com/users/takluyver/orgs",
      "repos_url": "https://api.github.com/users/takluyver/repos",
      "events_url": "https://api.github.com/users/takluyver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/takluyver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-17T12:50:39Z",
    "updated_at": "2017-08-17T12:50:39Z",
    "author_association": "MEMBER",
    "body": "I believe this was fixed by #10371, release 5.4."
  }
]
