[
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/3893604",
    "html_url": "https://github.com/ipython/ipython/issues/1394#issuecomment-3893604",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/1394",
    "id": 3893604,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4OTM2MDQ=",
    "user": {
      "login": "minrk",
      "id": 151929,
      "node_id": "MDQ6VXNlcjE1MTkyOQ==",
      "avatar_url": "https://avatars1.githubusercontent.com/u/151929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/minrk",
      "html_url": "https://github.com/minrk",
      "followers_url": "https://api.github.com/users/minrk/followers",
      "following_url": "https://api.github.com/users/minrk/following{/other_user}",
      "gists_url": "https://api.github.com/users/minrk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/minrk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/minrk/subscriptions",
      "organizations_url": "https://api.github.com/users/minrk/orgs",
      "repos_url": "https://api.github.com/users/minrk/repos",
      "events_url": "https://api.github.com/users/minrk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/minrk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-02-09T19:15:43Z",
    "updated_at": "2012-02-09T19:15:43Z",
    "author_association": "MEMBER",
    "body": "We certainly won't remove the dependency on ctypes for full functionality, but for basic IPython to start without ctypes is pretty trivial.  Just add to inputhook:\n\n``` python\ntry:\n    import ctypes\nexcept ImportError:\n    ctypes = None\n    # possibly warn here, because your Python is broken, albeit in a way that's not too rare\n\n# ... in InputHookManager.__init__()\n    if ctypes is not None:\n        self.PYFUNC = ctypes.PYFUNCTYPE(ctypes.c_int)\n```\n\nThen, obviously any actual use of the inputhook machinery would fail (as it should), but basic IPython should start.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/3893636",
    "html_url": "https://github.com/ipython/ipython/issues/1394#issuecomment-3893636",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/1394",
    "id": 3893636,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4OTM2MzY=",
    "user": {
      "login": "fperez",
      "id": 57394,
      "node_id": "MDQ6VXNlcjU3Mzk0",
      "avatar_url": "https://avatars1.githubusercontent.com/u/57394?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fperez",
      "html_url": "https://github.com/fperez",
      "followers_url": "https://api.github.com/users/fperez/followers",
      "following_url": "https://api.github.com/users/fperez/following{/other_user}",
      "gists_url": "https://api.github.com/users/fperez/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fperez/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fperez/subscriptions",
      "organizations_url": "https://api.github.com/users/fperez/orgs",
      "repos_url": "https://api.github.com/users/fperez/repos",
      "events_url": "https://api.github.com/users/fperez/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fperez/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-02-09T19:17:03Z",
    "updated_at": "2012-02-09T19:17:03Z",
    "author_association": "MEMBER",
    "body": "I think so; there are a number of environments where in the future we may need this, and ctypes is only required for local, interactive GUI usage.  In those systems most likely people will be using the inline backend to produce figures to be accessed remotely, so making the ctypes dependency only be needed for actualy %gui work is reasonable.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/3894073",
    "html_url": "https://github.com/ipython/ipython/issues/1394#issuecomment-3894073",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/1394",
    "id": 3894073,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4OTQwNzM=",
    "user": {
      "login": "bfroehle",
      "id": 204333,
      "node_id": "MDQ6VXNlcjIwNDMzMw==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/204333?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bfroehle",
      "html_url": "https://github.com/bfroehle",
      "followers_url": "https://api.github.com/users/bfroehle/followers",
      "following_url": "https://api.github.com/users/bfroehle/following{/other_user}",
      "gists_url": "https://api.github.com/users/bfroehle/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bfroehle/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bfroehle/subscriptions",
      "organizations_url": "https://api.github.com/users/bfroehle/orgs",
      "repos_url": "https://api.github.com/users/bfroehle/repos",
      "events_url": "https://api.github.com/users/bfroehle/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bfroehle/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-02-09T19:40:26Z",
    "updated_at": "2012-02-09T19:42:57Z",
    "author_association": "CONTRIBUTOR",
    "body": "@minrk's suggestion does work. See bfroehle@215ae51f93eac0fab9036a2921196a2bce92348d.\n\n```\nbfroehle@nid00008:~/ipython> py3dg ipython.py\nWARNING: IPython GUI event loop requires ctypes, %gui will not be available\nWARNING: IPython History requires SQLite, your history will not be saved\nPython 2.7.2 (default, Feb  7 2012, 13:20:16) \nType \"copyright\", \"credits\" or \"license\" for more information.\n\nIPython 0.13.dev -- An enhanced Interactive Python.\n?         -> Introduction and overview of IPython's features.\n%quickref -> Quick reference.\nhelp      -> Python's own help system.\nobject?   -> Details about 'object', use 'object??' for extra details.\n\nIn [1]: \n```\n\nObviously attempting to use `%gui` breaks.  Here is the error message, for the curious:\n\n```\nIn [1]: %gui\nERROR: 'NoneType' object has no attribute 'c_void_p'\n```\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/101396414",
    "html_url": "https://github.com/ipython/ipython/issues/1394#issuecomment-101396414",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/1394",
    "id": 101396414,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwMTM5NjQxNA==",
    "user": {
      "login": "Lucretiel",
      "id": 1823405,
      "node_id": "MDQ6VXNlcjE4MjM0MDU=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1823405?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Lucretiel",
      "html_url": "https://github.com/Lucretiel",
      "followers_url": "https://api.github.com/users/Lucretiel/followers",
      "following_url": "https://api.github.com/users/Lucretiel/following{/other_user}",
      "gists_url": "https://api.github.com/users/Lucretiel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Lucretiel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Lucretiel/subscriptions",
      "organizations_url": "https://api.github.com/users/Lucretiel/orgs",
      "repos_url": "https://api.github.com/users/Lucretiel/repos",
      "events_url": "https://api.github.com/users/Lucretiel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Lucretiel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-05-12T19:41:00Z",
    "updated_at": "2015-05-12T19:41:00Z",
    "author_association": "CONTRIBUTOR",
    "body": "It looks like this hasn't been 100% resolved. I get the following message when running on a machine without ctypes:\n\n```\nWARNING: IPython GUI event loop requires ctypes, %gui will not be available\nTraceback (most recent call last):\n  File \".../env/bin/ipython\", line 4, in <module>\n    from IPython import start_ipython\n  File \".../env/lib/python3.4/site-packages/IPython/__init__.py\", line 49, in <module>\n    from .terminal.embed import embed\n  File \".../env/lib/python3.4/site-packages/IPython/terminal/embed.py\", line 19, in <module>\n    from IPython.terminal.ipapp import load_default_config\n  File \".../env/lib/python3.4/site-packages/IPython/terminal/ipapp.py\", line 46, in <module>\n    from IPython.core.shellapp import (\n  File \".../env/lib/python3.4/site-packages/IPython/core/shellapp.py\", line 27, in <module>\n    from IPython.lib.inputhook import guis\n  File \".../env/lib/python3.4/site-packages/IPython/lib/inputhook.py\", line 283, in <module>\n    class NullInputHook(InputHookBase):\n  File \".../env/lib/python3.4/site-packages/IPython/lib/inputhook.py\", line 202, in decorator\n    self.guihooks[toolkitname] = inst\nAttributeError: 'InputHookManager' object has no attribute 'guihooks'\n```\n\nThe issue specifically is that it's trying to apply the `register` decorator to the input hook classes\n\n```\ndef register(self, toolkitname, *aliases):\n    ''' DOCSTRING \"\"\"\n    def decorator(cls):\n        inst = cls(self)\n        self.guihooks[toolkitname] = inst\n        for a in aliases:\n            self.aliases[a] = toolkitname\n        return cls\n    return decorator\n```\n\n---\n\n```\ninputhook_manager = InputHookManager()\n\n@inputhook_manager.register('osx')\nclass NullInputHook(InputHookBase):\n    \"\"\"A null inputhook that doesn't need to do anything\"\"\"\n    def enable(self, app=None):\n        pass\n```\n\nHowever, because `InputHookManager.__init__` is abandoned without setting any attributes (including `self.guihooks`), the decorator is crashing.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/101412075",
    "html_url": "https://github.com/ipython/ipython/issues/1394#issuecomment-101412075",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/1394",
    "id": 101412075,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwMTQxMjA3NQ==",
    "user": {
      "login": "takluyver",
      "id": 327925,
      "node_id": "MDQ6VXNlcjMyNzkyNQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/327925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/takluyver",
      "html_url": "https://github.com/takluyver",
      "followers_url": "https://api.github.com/users/takluyver/followers",
      "following_url": "https://api.github.com/users/takluyver/following{/other_user}",
      "gists_url": "https://api.github.com/users/takluyver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/takluyver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/takluyver/subscriptions",
      "organizations_url": "https://api.github.com/users/takluyver/orgs",
      "repos_url": "https://api.github.com/users/takluyver/repos",
      "events_url": "https://api.github.com/users/takluyver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/takluyver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-05-12T20:34:27Z",
    "updated_at": "2015-05-12T20:34:27Z",
    "author_association": "MEMBER",
    "body": "I think either the register decorator should be a no-op when ctypes is missing, or those empty attributes should be initialised earlier, so they're there in either case.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/101413796",
    "html_url": "https://github.com/ipython/ipython/issues/1394#issuecomment-101413796",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/1394",
    "id": 101413796,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwMTQxMzc5Ng==",
    "user": {
      "login": "Lucretiel",
      "id": 1823405,
      "node_id": "MDQ6VXNlcjE4MjM0MDU=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/1823405?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Lucretiel",
      "html_url": "https://github.com/Lucretiel",
      "followers_url": "https://api.github.com/users/Lucretiel/followers",
      "following_url": "https://api.github.com/users/Lucretiel/following{/other_user}",
      "gists_url": "https://api.github.com/users/Lucretiel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Lucretiel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Lucretiel/subscriptions",
      "organizations_url": "https://api.github.com/users/Lucretiel/orgs",
      "repos_url": "https://api.github.com/users/Lucretiel/repos",
      "events_url": "https://api.github.com/users/Lucretiel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Lucretiel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-05-12T20:42:21Z",
    "updated_at": "2015-05-12T20:45:58Z",
    "author_association": "CONTRIBUTOR",
    "body": "I think no-op is the best solution. If the decorator is actually called, populating the InputHookManager, then whatever system actually activates the hooks will still attempt to activate them.\n\nMy other fear is that the other InputHookManagers will still be throwing exceptions when it's used elsewhere (For instance, when actually looking up the input hooks). We should check for those cases as well. The best solution is probably to make the decorator a no-op, but then still ensure the InputHookManager class is initialized with all the necessary attributes (except the ctypes one) so that other methods will simply see it as having no registered input hooks.\n"
  },
  {
    "url": "https://api.github.com/repos/ipython/ipython/issues/comments/101445415",
    "html_url": "https://github.com/ipython/ipython/issues/1394#issuecomment-101445415",
    "issue_url": "https://api.github.com/repos/ipython/ipython/issues/1394",
    "id": 101445415,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwMTQ0NTQxNQ==",
    "user": {
      "login": "takluyver",
      "id": 327925,
      "node_id": "MDQ6VXNlcjMyNzkyNQ==",
      "avatar_url": "https://avatars3.githubusercontent.com/u/327925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/takluyver",
      "html_url": "https://github.com/takluyver",
      "followers_url": "https://api.github.com/users/takluyver/followers",
      "following_url": "https://api.github.com/users/takluyver/following{/other_user}",
      "gists_url": "https://api.github.com/users/takluyver/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/takluyver/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/takluyver/subscriptions",
      "organizations_url": "https://api.github.com/users/takluyver/orgs",
      "repos_url": "https://api.github.com/users/takluyver/repos",
      "events_url": "https://api.github.com/users/takluyver/events{/privacy}",
      "received_events_url": "https://api.github.com/users/takluyver/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-05-12T22:36:35Z",
    "updated_at": "2015-05-12T22:36:35Z",
    "author_association": "MEMBER",
    "body": "Makes sense. Do you want to make a PR?\n"
  }
]
